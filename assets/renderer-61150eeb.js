var eD=Object.defineProperty;var tD=(e,t,n)=>t in e?eD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var an=(e,t,n)=>(tD(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ic(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nD(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var SP={exports:{}},Jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_=Symbol.for("react.element"),rD=Symbol.for("react.portal"),iD=Symbol.for("react.fragment"),oD=Symbol.for("react.strict_mode"),aD=Symbol.for("react.profiler"),sD=Symbol.for("react.provider"),lD=Symbol.for("react.context"),uD=Symbol.for("react.forward_ref"),cD=Symbol.for("react.suspense"),hD=Symbol.for("react.memo"),fD=Symbol.for("react.lazy"),T3=Symbol.iterator;function dD(e){return e===null||typeof e!="object"?null:(e=T3&&e[T3]||e["@@iterator"],typeof e=="function"?e:null)}var CP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EP=Object.assign,kP={};function rm(e,t,n){this.props=e,this.context=t,this.refs=kP,this.updater=n||CP}rm.prototype.isReactComponent={};rm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AP(){}AP.prototype=rm.prototype;function WC(e,t,n){this.props=e,this.context=t,this.refs=kP,this.updater=n||CP}var ZC=WC.prototype=new AP;ZC.constructor=WC;EP(ZC,rm.prototype);ZC.isPureReactComponent=!0;var P3=Array.isArray,TP=Object.prototype.hasOwnProperty,KC={current:null},PP={key:!0,ref:!0,__self:!0,__source:!0};function IP(e,t,n){var r,a={},c=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(c=""+t.key),t)TP.call(t,r)&&!PP.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var x=Array(l),b=0;b<l;b++)x[b]=arguments[b+2];a.children=x}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:t_,type:e,key:c,ref:d,props:a,_owner:KC.current}}function pD(e,t){return{$$typeof:t_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function XC(e){return typeof e=="object"&&e!==null&&e.$$typeof===t_}function mD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var I3=/\/+/g;function Iw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mD(""+e.key):t.toString(36)}function zv(e,t,n,r,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case t_:case rD:d=!0}}if(d)return d=e,a=a(d),e=r===""?"."+Iw(d,0):r,P3(a)?(n="",e!=null&&(n=e.replace(I3,"$&/")+"/"),zv(a,t,n,"",function(b){return b})):a!=null&&(XC(a)&&(a=pD(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(I3,"$&/")+"/")+e)),t.push(a)),1;if(d=0,r=r===""?".":r+":",P3(e))for(var l=0;l<e.length;l++){c=e[l];var x=r+Iw(c,l);d+=zv(c,t,n,x,a)}else if(x=dD(e),typeof x=="function")for(e=x.call(e),l=0;!(c=e.next()).done;)c=c.value,x=r+Iw(c,l++),d+=zv(c,t,n,x,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function q0(e,t,n){if(e==null)return e;var r=[],a=0;return zv(e,r,"","",function(c){return t.call(n,c,a++)}),r}function gD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ca={current:null},Bv={transition:null},yD={ReactCurrentDispatcher:ca,ReactCurrentBatchConfig:Bv,ReactCurrentOwner:KC};Jn.Children={map:q0,forEach:function(e,t,n){q0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return q0(e,function(){t++}),t},toArray:function(e){return q0(e,function(t){return t})||[]},only:function(e){if(!XC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Jn.Component=rm;Jn.Fragment=iD;Jn.Profiler=aD;Jn.PureComponent=WC;Jn.StrictMode=oD;Jn.Suspense=cD;Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yD;Jn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=EP({},e.props),a=e.key,c=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,d=KC.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(x in t)TP.call(t,x)&&!PP.hasOwnProperty(x)&&(r[x]=t[x]===void 0&&l!==void 0?l[x]:t[x])}var x=arguments.length-2;if(x===1)r.children=n;else if(1<x){l=Array(x);for(var b=0;b<x;b++)l[b]=arguments[b+2];r.children=l}return{$$typeof:t_,type:e.type,key:a,ref:c,props:r,_owner:d}};Jn.createContext=function(e){return e={$$typeof:lD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sD,_context:e},e.Consumer=e};Jn.createElement=IP;Jn.createFactory=function(e){var t=IP.bind(null,e);return t.type=e,t};Jn.createRef=function(){return{current:null}};Jn.forwardRef=function(e){return{$$typeof:uD,render:e}};Jn.isValidElement=XC;Jn.lazy=function(e){return{$$typeof:fD,_payload:{_status:-1,_result:e},_init:gD}};Jn.memo=function(e,t){return{$$typeof:hD,type:e,compare:t===void 0?null:t}};Jn.startTransition=function(e){var t=Bv.transition;Bv.transition={};try{e()}finally{Bv.transition=t}};Jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jn.useCallback=function(e,t){return ca.current.useCallback(e,t)};Jn.useContext=function(e){return ca.current.useContext(e)};Jn.useDebugValue=function(){};Jn.useDeferredValue=function(e){return ca.current.useDeferredValue(e)};Jn.useEffect=function(e,t){return ca.current.useEffect(e,t)};Jn.useId=function(){return ca.current.useId()};Jn.useImperativeHandle=function(e,t,n){return ca.current.useImperativeHandle(e,t,n)};Jn.useInsertionEffect=function(e,t){return ca.current.useInsertionEffect(e,t)};Jn.useLayoutEffect=function(e,t){return ca.current.useLayoutEffect(e,t)};Jn.useMemo=function(e,t){return ca.current.useMemo(e,t)};Jn.useReducer=function(e,t,n){return ca.current.useReducer(e,t,n)};Jn.useRef=function(e){return ca.current.useRef(e)};Jn.useState=function(e){return ca.current.useState(e)};Jn.useSyncExternalStore=function(e,t,n){return ca.current.useSyncExternalStore(e,t,n)};Jn.useTransition=function(){return ca.current.useTransition()};Jn.version="18.2.0";SP.exports=Jn;var mt=SP.exports;const sn=ic(mt);var _D={exports:{}};(function(e){var t=function(n){var r=Object.prototype,a=r.hasOwnProperty,c=Object.defineProperty||function(_e,we,K){_e[we]=K.value},d,l=typeof Symbol=="function"?Symbol:{},x=l.iterator||"@@iterator",b=l.asyncIterator||"@@asyncIterator",E=l.toStringTag||"@@toStringTag";function A(_e,we,K){return Object.defineProperty(_e,we,{value:K,enumerable:!0,configurable:!0,writable:!0}),_e[we]}try{A({},"")}catch{A=function(we,K,ae){return we[K]=ae}}function L(_e,we,K,ae){var lt=we&&we.prototype instanceof G?we:G,gt=Object.create(lt.prototype),Gt=new zt(ae||[]);return c(gt,"_invoke",{value:$e(_e,K,Gt)}),gt}n.wrap=L;function F(_e,we,K){try{return{type:"normal",arg:_e.call(we,K)}}catch(ae){return{type:"throw",arg:ae}}}var $="suspendedStart",N="suspendedYield",Z="executing",R="completed",q={};function G(){}function Q(){}function se(){}var ee={};A(ee,x,function(){return this});var oe=Object.getPrototypeOf,xe=oe&&oe(oe(Vt([])));xe&&xe!==r&&a.call(xe,x)&&(ee=xe);var Oe=se.prototype=G.prototype=Object.create(ee);Q.prototype=se,c(Oe,"constructor",{value:se,configurable:!0}),c(se,"constructor",{value:Q,configurable:!0}),Q.displayName=A(se,E,"GeneratorFunction");function Le(_e){["next","throw","return"].forEach(function(we){A(_e,we,function(K){return this._invoke(we,K)})})}n.isGeneratorFunction=function(_e){var we=typeof _e=="function"&&_e.constructor;return we?we===Q||(we.displayName||we.name)==="GeneratorFunction":!1},n.mark=function(_e){return Object.setPrototypeOf?Object.setPrototypeOf(_e,se):(_e.__proto__=se,A(_e,E,"GeneratorFunction")),_e.prototype=Object.create(Oe),_e},n.awrap=function(_e){return{__await:_e}};function qe(_e,we){function K(gt,Gt,Dt,Qt){var un=F(_e[gt],_e,Gt);if(un.type==="throw")Qt(un.arg);else{var Xn=un.arg,Qn=Xn.value;return Qn&&typeof Qn=="object"&&a.call(Qn,"__await")?we.resolve(Qn.__await).then(function(Bn){K("next",Bn,Dt,Qt)},function(Bn){K("throw",Bn,Dt,Qt)}):we.resolve(Qn).then(function(Bn){Xn.value=Bn,Dt(Xn)},function(Bn){return K("throw",Bn,Dt,Qt)})}}var ae;function lt(gt,Gt){function Dt(){return new we(function(Qt,un){K(gt,Gt,Qt,un)})}return ae=ae?ae.then(Dt,Dt):Dt()}c(this,"_invoke",{value:lt})}Le(qe.prototype),A(qe.prototype,b,function(){return this}),n.AsyncIterator=qe,n.async=function(_e,we,K,ae,lt){lt===void 0&&(lt=Promise);var gt=new qe(L(_e,we,K,ae),lt);return n.isGeneratorFunction(we)?gt:gt.next().then(function(Gt){return Gt.done?Gt.value:gt.next()})};function $e(_e,we,K){var ae=$;return function(gt,Gt){if(ae===Z)throw new Error("Generator is already running");if(ae===R){if(gt==="throw")throw Gt;return Ve()}for(K.method=gt,K.arg=Gt;;){var Dt=K.delegate;if(Dt){var Qt=nt(Dt,K);if(Qt){if(Qt===q)continue;return Qt}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(ae===$)throw ae=R,K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);ae=Z;var un=F(_e,we,K);if(un.type==="normal"){if(ae=K.done?R:N,un.arg===q)continue;return{value:un.arg,done:K.done}}else un.type==="throw"&&(ae=R,K.method="throw",K.arg=un.arg)}}}function nt(_e,we){var K=we.method,ae=_e.iterator[K];if(ae===d)return we.delegate=null,K==="throw"&&_e.iterator.return&&(we.method="return",we.arg=d,nt(_e,we),we.method==="throw")||K!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+K+"' method")),q;var lt=F(ae,_e.iterator,we.arg);if(lt.type==="throw")return we.method="throw",we.arg=lt.arg,we.delegate=null,q;var gt=lt.arg;if(!gt)return we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,q;if(gt.done)we[_e.resultName]=gt.value,we.next=_e.nextLoc,we.method!=="return"&&(we.method="next",we.arg=d);else return gt;return we.delegate=null,q}Le(Oe),A(Oe,E,"Generator"),A(Oe,x,function(){return this}),A(Oe,"toString",function(){return"[object Generator]"});function pt(_e){var we={tryLoc:_e[0]};1 in _e&&(we.catchLoc=_e[1]),2 in _e&&(we.finallyLoc=_e[2],we.afterLoc=_e[3]),this.tryEntries.push(we)}function At(_e){var we=_e.completion||{};we.type="normal",delete we.arg,_e.completion=we}function zt(_e){this.tryEntries=[{tryLoc:"root"}],_e.forEach(pt,this),this.reset(!0)}n.keys=function(_e){var we=Object(_e),K=[];for(var ae in we)K.push(ae);return K.reverse(),function lt(){for(;K.length;){var gt=K.pop();if(gt in we)return lt.value=gt,lt.done=!1,lt}return lt.done=!0,lt}};function Vt(_e){if(_e){var we=_e[x];if(we)return we.call(_e);if(typeof _e.next=="function")return _e;if(!isNaN(_e.length)){var K=-1,ae=function lt(){for(;++K<_e.length;)if(a.call(_e,K))return lt.value=_e[K],lt.done=!1,lt;return lt.value=d,lt.done=!0,lt};return ae.next=ae}}return{next:Ve}}n.values=Vt;function Ve(){return{value:d,done:!0}}return zt.prototype={constructor:zt,reset:function(_e){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(At),!_e)for(var we in this)we.charAt(0)==="t"&&a.call(this,we)&&!isNaN(+we.slice(1))&&(this[we]=d)},stop:function(){this.done=!0;var _e=this.tryEntries[0],we=_e.completion;if(we.type==="throw")throw we.arg;return this.rval},dispatchException:function(_e){if(this.done)throw _e;var we=this;function K(Qt,un){return gt.type="throw",gt.arg=_e,we.next=Qt,un&&(we.method="next",we.arg=d),!!un}for(var ae=this.tryEntries.length-1;ae>=0;--ae){var lt=this.tryEntries[ae],gt=lt.completion;if(lt.tryLoc==="root")return K("end");if(lt.tryLoc<=this.prev){var Gt=a.call(lt,"catchLoc"),Dt=a.call(lt,"finallyLoc");if(Gt&&Dt){if(this.prev<lt.catchLoc)return K(lt.catchLoc,!0);if(this.prev<lt.finallyLoc)return K(lt.finallyLoc)}else if(Gt){if(this.prev<lt.catchLoc)return K(lt.catchLoc,!0)}else if(Dt){if(this.prev<lt.finallyLoc)return K(lt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(_e,we){for(var K=this.tryEntries.length-1;K>=0;--K){var ae=this.tryEntries[K];if(ae.tryLoc<=this.prev&&a.call(ae,"finallyLoc")&&this.prev<ae.finallyLoc){var lt=ae;break}}lt&&(_e==="break"||_e==="continue")&&lt.tryLoc<=we&&we<=lt.finallyLoc&&(lt=null);var gt=lt?lt.completion:{};return gt.type=_e,gt.arg=we,lt?(this.method="next",this.next=lt.finallyLoc,q):this.complete(gt)},complete:function(_e,we){if(_e.type==="throw")throw _e.arg;return _e.type==="break"||_e.type==="continue"?this.next=_e.arg:_e.type==="return"?(this.rval=this.arg=_e.arg,this.method="return",this.next="end"):_e.type==="normal"&&we&&(this.next=we),q},finish:function(_e){for(var we=this.tryEntries.length-1;we>=0;--we){var K=this.tryEntries[we];if(K.finallyLoc===_e)return this.complete(K.completion,K.afterLoc),At(K),q}},catch:function(_e){for(var we=this.tryEntries.length-1;we>=0;--we){var K=this.tryEntries[we];if(K.tryLoc===_e){var ae=K.completion;if(ae.type==="throw"){var lt=ae.arg;At(K)}return lt}}throw new Error("illegal catch attempt")},delegateYield:function(_e,we,K){return this.delegate={iterator:Vt(_e),resultName:we,nextLoc:K},this.method==="next"&&(this.arg=d),q}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(_D);var MP={},V2={},LP={exports:{}},Qa={},OP={exports:{}},FP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ve,_e){var we=Ve.length;Ve.push(_e);e:for(;0<we;){var K=we-1>>>1,ae=Ve[K];if(0<a(ae,_e))Ve[K]=_e,Ve[we]=ae,we=K;else break e}}function n(Ve){return Ve.length===0?null:Ve[0]}function r(Ve){if(Ve.length===0)return null;var _e=Ve[0],we=Ve.pop();if(we!==_e){Ve[0]=we;e:for(var K=0,ae=Ve.length,lt=ae>>>1;K<lt;){var gt=2*(K+1)-1,Gt=Ve[gt],Dt=gt+1,Qt=Ve[Dt];if(0>a(Gt,we))Dt<ae&&0>a(Qt,Gt)?(Ve[K]=Qt,Ve[Dt]=we,K=Dt):(Ve[K]=Gt,Ve[gt]=we,K=gt);else if(Dt<ae&&0>a(Qt,we))Ve[K]=Qt,Ve[Dt]=we,K=Dt;else break e}}return _e}function a(Ve,_e){var we=Ve.sortIndex-_e.sortIndex;return we!==0?we:Ve.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,l=d.now();e.unstable_now=function(){return d.now()-l}}var x=[],b=[],E=1,A=null,L=3,F=!1,$=!1,N=!1,Z=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Ve){for(var _e=n(b);_e!==null;){if(_e.callback===null)r(b);else if(_e.startTime<=Ve)r(b),_e.sortIndex=_e.expirationTime,t(x,_e);else break;_e=n(b)}}function Q(Ve){if(N=!1,G(Ve),!$)if(n(x)!==null)$=!0,zt(se);else{var _e=n(b);_e!==null&&Vt(Q,_e.startTime-Ve)}}function se(Ve,_e){$=!1,N&&(N=!1,R(xe),xe=-1),F=!0;var we=L;try{for(G(_e),A=n(x);A!==null&&(!(A.expirationTime>_e)||Ve&&!qe());){var K=A.callback;if(typeof K=="function"){A.callback=null,L=A.priorityLevel;var ae=K(A.expirationTime<=_e);_e=e.unstable_now(),typeof ae=="function"?A.callback=ae:A===n(x)&&r(x),G(_e)}else r(x);A=n(x)}if(A!==null)var lt=!0;else{var gt=n(b);gt!==null&&Vt(Q,gt.startTime-_e),lt=!1}return lt}finally{A=null,L=we,F=!1}}var ee=!1,oe=null,xe=-1,Oe=5,Le=-1;function qe(){return!(e.unstable_now()-Le<Oe)}function $e(){if(oe!==null){var Ve=e.unstable_now();Le=Ve;var _e=!0;try{_e=oe(!0,Ve)}finally{_e?nt():(ee=!1,oe=null)}}else ee=!1}var nt;if(typeof q=="function")nt=function(){q($e)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,At=pt.port2;pt.port1.onmessage=$e,nt=function(){At.postMessage(null)}}else nt=function(){Z($e,0)};function zt(Ve){oe=Ve,ee||(ee=!0,nt())}function Vt(Ve,_e){xe=Z(function(){Ve(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ve){Ve.callback=null},e.unstable_continueExecution=function(){$||F||($=!0,zt(se))},e.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<Ve?Math.floor(1e3/Ve):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return n(x)},e.unstable_next=function(Ve){switch(L){case 1:case 2:case 3:var _e=3;break;default:_e=L}var we=L;L=_e;try{return Ve()}finally{L=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ve,_e){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var we=L;L=Ve;try{return _e()}finally{L=we}},e.unstable_scheduleCallback=function(Ve,_e,we){var K=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?K+we:K):we=K,Ve){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=we+ae,Ve={id:E++,callback:_e,priorityLevel:Ve,startTime:we,expirationTime:ae,sortIndex:-1},we>K?(Ve.sortIndex=we,t(b,Ve),n(x)===null&&Ve===n(b)&&(N?(R(xe),xe=-1):N=!0,Vt(Q,we-K))):(Ve.sortIndex=ae,t(x,Ve),$||F||($=!0,zt(se))),Ve},e.unstable_shouldYield=qe,e.unstable_wrapCallback=function(Ve){var _e=L;return function(){var we=L;L=_e;try{return Ve.apply(this,arguments)}finally{L=we}}}})(FP);OP.exports=FP;var vD=OP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP=mt,Ja=vD;function St(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DP=new Set,wy={};function Qf(e,t){Gp(e,t),Gp(e+"Capture",t)}function Gp(e,t){for(wy[e]=t,e=0;e<t.length;e++)DP.add(t[e])}var Qu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q2=Object.prototype.hasOwnProperty,xD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M3={},L3={};function bD(e){return q2.call(L3,e)?!0:q2.call(M3,e)?!1:xD.test(e)?L3[e]=!0:(M3[e]=!0,!1)}function wD(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SD(e,t,n,r){if(t===null||typeof t>"u"||wD(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ha(e,t,n,r,a,c,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=d}var Po={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Po[e]=new ha(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Po[t]=new ha(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Po[e]=new ha(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Po[e]=new ha(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Po[e]=new ha(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Po[e]=new ha(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Po[e]=new ha(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Po[e]=new ha(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Po[e]=new ha(e,5,!1,e.toLowerCase(),null,!1,!1)});var YC=/[\-:]([a-z])/g;function JC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(YC,JC);Po[t]=new ha(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(YC,JC);Po[t]=new ha(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(YC,JC);Po[t]=new ha(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Po[e]=new ha(e,1,!1,e.toLowerCase(),null,!1,!1)});Po.xlinkHref=new ha("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Po[e]=new ha(e,1,!1,e.toLowerCase(),null,!0,!0)});function QC(e,t,n,r){var a=Po.hasOwnProperty(t)?Po[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SD(t,n,a,r)&&(n=null),r||a===null?bD(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var oc=RP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G0=Symbol.for("react.element"),xp=Symbol.for("react.portal"),bp=Symbol.for("react.fragment"),eE=Symbol.for("react.strict_mode"),G2=Symbol.for("react.profiler"),zP=Symbol.for("react.provider"),BP=Symbol.for("react.context"),tE=Symbol.for("react.forward_ref"),H2=Symbol.for("react.suspense"),W2=Symbol.for("react.suspense_list"),nE=Symbol.for("react.memo"),sh=Symbol.for("react.lazy"),$P=Symbol.for("react.offscreen"),O3=Symbol.iterator;function Pg(e){return e===null||typeof e!="object"?null:(e=O3&&e[O3]||e["@@iterator"],typeof e=="function"?e:null)}var mi=Object.assign,Mw;function Jg(e){if(Mw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mw=t&&t[1]||""}return`
`+Mw+e}var Lw=!1;function Ow(e,t){if(!e||Lw)return"";Lw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var r=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){r=b}e.call(t.prototype)}else{try{throw Error()}catch(b){r=b}e()}}catch(b){if(b&&r&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),c=r.stack.split(`
`),d=a.length-1,l=c.length-1;1<=d&&0<=l&&a[d]!==c[l];)l--;for(;1<=d&&0<=l;d--,l--)if(a[d]!==c[l]){if(d!==1||l!==1)do if(d--,l--,0>l||a[d]!==c[l]){var x=`
`+a[d].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=d&&0<=l);break}}}finally{Lw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jg(e):""}function CD(e){switch(e.tag){case 5:return Jg(e.type);case 16:return Jg("Lazy");case 13:return Jg("Suspense");case 19:return Jg("SuspenseList");case 0:case 2:case 15:return e=Ow(e.type,!1),e;case 11:return e=Ow(e.type.render,!1),e;case 1:return e=Ow(e.type,!0),e;default:return""}}function Z2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bp:return"Fragment";case xp:return"Portal";case G2:return"Profiler";case eE:return"StrictMode";case H2:return"Suspense";case W2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case BP:return(e.displayName||"Context")+".Consumer";case zP:return(e._context.displayName||"Context")+".Provider";case tE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nE:return t=e.displayName||null,t!==null?t:Z2(e.type)||"Memo";case sh:t=e._payload,e=e._init;try{return Z2(e(t))}catch{}}return null}function ED(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z2(t);case 8:return t===eE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ih(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function NP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kD(e){var t=NP(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){r=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function H0(e){e._valueTracker||(e._valueTracker=kD(e))}function UP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=NP(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function o1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function K2(e,t){var n=t.checked;return mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function F3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ih(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jP(e,t){t=t.checked,t!=null&&QC(e,"checked",t,!1)}function X2(e,t){jP(e,t);var n=Ih(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y2(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y2(e,t.type,Ih(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function R3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Y2(e,t,n){(t!=="number"||o1(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qg=Array.isArray;function Rp(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ih(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function J2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(St(91));return mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function D3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(St(92));if(Qg(n)){if(1<n.length)throw Error(St(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ih(n)}}function VP(e,t){var n=Ih(t.value),r=Ih(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function z3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var W0,GP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(W0=W0||document.createElement("div"),W0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=W0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sy(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var oy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AD=["Webkit","ms","Moz","O"];Object.keys(oy).forEach(function(e){AD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oy[t]=oy[e]})});function HP(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||oy.hasOwnProperty(e)&&oy[e]?(""+t).trim():t+"px"}function WP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=HP(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var TD=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eS(e,t){if(t){if(TD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(St(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(St(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(St(61))}if(t.style!=null&&typeof t.style!="object")throw Error(St(62))}}function tS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nS=null;function rE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rS=null,Dp=null,zp=null;function B3(e){if(e=i_(e)){if(typeof rS!="function")throw Error(St(280));var t=e.stateNode;t&&(t=ox(t),rS(e.stateNode,e.type,t))}}function ZP(e){Dp?zp?zp.push(e):zp=[e]:Dp=e}function KP(){if(Dp){var e=Dp,t=zp;if(zp=Dp=null,B3(e),t)for(e=0;e<t.length;e++)B3(t[e])}}function XP(e,t){return e(t)}function YP(){}var Fw=!1;function JP(e,t,n){if(Fw)return e(t,n);Fw=!0;try{return XP(e,t,n)}finally{Fw=!1,(Dp!==null||zp!==null)&&(YP(),KP())}}function Cy(e,t){var n=e.stateNode;if(n===null)return null;var r=ox(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(St(231,t,typeof n));return n}var iS=!1;if(Qu)try{var Ig={};Object.defineProperty(Ig,"passive",{get:function(){iS=!0}}),window.addEventListener("test",Ig,Ig),window.removeEventListener("test",Ig,Ig)}catch{iS=!1}function PD(e,t,n,r,a,c,d,l,x){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(E){this.onError(E)}}var ay=!1,a1=null,s1=!1,oS=null,ID={onError:function(e){ay=!0,a1=e}};function MD(e,t,n,r,a,c,d,l,x){ay=!1,a1=null,PD.apply(ID,arguments)}function LD(e,t,n,r,a,c,d,l,x){if(MD.apply(this,arguments),ay){if(ay){var b=a1;ay=!1,a1=null}else throw Error(St(198));s1||(s1=!0,oS=b)}}function ed(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function QP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $3(e){if(ed(e)!==e)throw Error(St(188))}function OD(e){var t=e.alternate;if(!t){if(t=ed(e),t===null)throw Error(St(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return $3(a),e;if(c===r)return $3(a),t;c=c.sibling}throw Error(St(188))}if(n.return!==r.return)n=a,r=c;else{for(var d=!1,l=a.child;l;){if(l===n){d=!0,n=a,r=c;break}if(l===r){d=!0,r=a,n=c;break}l=l.sibling}if(!d){for(l=c.child;l;){if(l===n){d=!0,n=c,r=a;break}if(l===r){d=!0,r=c,n=a;break}l=l.sibling}if(!d)throw Error(St(189))}}if(n.alternate!==r)throw Error(St(190))}if(n.tag!==3)throw Error(St(188));return n.stateNode.current===n?e:t}function eI(e){return e=OD(e),e!==null?tI(e):null}function tI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tI(e);if(t!==null)return t;e=e.sibling}return null}var nI=Ja.unstable_scheduleCallback,N3=Ja.unstable_cancelCallback,FD=Ja.unstable_shouldYield,RD=Ja.unstable_requestPaint,Ii=Ja.unstable_now,DD=Ja.unstable_getCurrentPriorityLevel,iE=Ja.unstable_ImmediatePriority,rI=Ja.unstable_UserBlockingPriority,l1=Ja.unstable_NormalPriority,zD=Ja.unstable_LowPriority,iI=Ja.unstable_IdlePriority,tx=null,nu=null;function BD(e){if(nu&&typeof nu.onCommitFiberRoot=="function")try{nu.onCommitFiberRoot(tx,e,void 0,(e.current.flags&128)===128)}catch{}}var ml=Math.clz32?Math.clz32:UD,$D=Math.log,ND=Math.LN2;function UD(e){return e>>>=0,e===0?32:31-($D(e)/ND|0)|0}var Z0=64,K0=4194304;function ey(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function u1(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,c=e.pingedLanes,d=n&268435455;if(d!==0){var l=d&~a;l!==0?r=ey(l):(c&=d,c!==0&&(r=ey(c)))}else d=n&~a,d!==0?r=ey(d):c!==0&&(r=ey(c));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ml(t),a=1<<n,r|=e[n],t&=~a;return r}function jD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VD(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-ml(c),l=1<<d,x=a[d];x===-1?(!(l&n)||l&r)&&(a[d]=jD(l,t)):x<=t&&(e.expiredLanes|=l),c&=~l}}function aS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oI(){var e=Z0;return Z0<<=1,!(Z0&4194240)&&(Z0=64),e}function Rw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function n_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ml(t),e[t]=n}function qD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ml(n),c=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~c}}function oE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ml(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var kr=0;function aI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sI,aE,lI,uI,cI,sS=!1,X0=[],_h=null,vh=null,xh=null,Ey=new Map,ky=new Map,ch=[],GD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U3(e,t){switch(e){case"focusin":case"focusout":_h=null;break;case"dragenter":case"dragleave":vh=null;break;case"mouseover":case"mouseout":xh=null;break;case"pointerover":case"pointerout":Ey.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ky.delete(t.pointerId)}}function Mg(e,t,n,r,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:c,targetContainers:[a]},t!==null&&(t=i_(t),t!==null&&aE(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function HD(e,t,n,r,a){switch(t){case"focusin":return _h=Mg(_h,e,t,n,r,a),!0;case"dragenter":return vh=Mg(vh,e,t,n,r,a),!0;case"mouseover":return xh=Mg(xh,e,t,n,r,a),!0;case"pointerover":var c=a.pointerId;return Ey.set(c,Mg(Ey.get(c)||null,e,t,n,r,a)),!0;case"gotpointercapture":return c=a.pointerId,ky.set(c,Mg(ky.get(c)||null,e,t,n,r,a)),!0}return!1}function hI(e){var t=Bf(e.target);if(t!==null){var n=ed(t);if(n!==null){if(t=n.tag,t===13){if(t=QP(n),t!==null){e.blockedOn=t,cI(e.priority,function(){lI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $v(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nS=r,n.target.dispatchEvent(r),nS=null}else return t=i_(n),t!==null&&aE(t),e.blockedOn=n,!1;t.shift()}return!0}function j3(e,t,n){$v(e)&&n.delete(t)}function WD(){sS=!1,_h!==null&&$v(_h)&&(_h=null),vh!==null&&$v(vh)&&(vh=null),xh!==null&&$v(xh)&&(xh=null),Ey.forEach(j3),ky.forEach(j3)}function Lg(e,t){e.blockedOn===t&&(e.blockedOn=null,sS||(sS=!0,Ja.unstable_scheduleCallback(Ja.unstable_NormalPriority,WD)))}function Ay(e){function t(a){return Lg(a,e)}if(0<X0.length){Lg(X0[0],e);for(var n=1;n<X0.length;n++){var r=X0[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_h!==null&&Lg(_h,e),vh!==null&&Lg(vh,e),xh!==null&&Lg(xh,e),Ey.forEach(t),ky.forEach(t),n=0;n<ch.length;n++)r=ch[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ch.length&&(n=ch[0],n.blockedOn===null);)hI(n),n.blockedOn===null&&ch.shift()}var Bp=oc.ReactCurrentBatchConfig,c1=!0;function ZD(e,t,n,r){var a=kr,c=Bp.transition;Bp.transition=null;try{kr=1,sE(e,t,n,r)}finally{kr=a,Bp.transition=c}}function KD(e,t,n,r){var a=kr,c=Bp.transition;Bp.transition=null;try{kr=4,sE(e,t,n,r)}finally{kr=a,Bp.transition=c}}function sE(e,t,n,r){if(c1){var a=lS(e,t,n,r);if(a===null)Gw(e,t,r,h1,n),U3(e,r);else if(HD(a,e,t,n,r))r.stopPropagation();else if(U3(e,r),t&4&&-1<GD.indexOf(e)){for(;a!==null;){var c=i_(a);if(c!==null&&sI(c),c=lS(e,t,n,r),c===null&&Gw(e,t,r,h1,n),c===a)break;a=c}a!==null&&r.stopPropagation()}else Gw(e,t,r,null,n)}}var h1=null;function lS(e,t,n,r){if(h1=null,e=rE(r),e=Bf(e),e!==null)if(t=ed(e),t===null)e=null;else if(n=t.tag,n===13){if(e=QP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return h1=e,null}function fI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DD()){case iE:return 1;case rI:return 4;case l1:case zD:return 16;case iI:return 536870912;default:return 16}default:return 16}}var dh=null,lE=null,Nv=null;function dI(){if(Nv)return Nv;var e,t=lE,n=t.length,r,a="value"in dh?dh.value:dh.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===a[c-r];r++);return Nv=a.slice(e,1<r?1-r:void 0)}function Uv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Y0(){return!0}function V3(){return!1}function es(e){function t(n,r,a,c,d){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(c):c[l]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Y0:V3,this.isPropagationStopped=V3,this}return mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Y0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Y0)},persist:function(){},isPersistent:Y0}),t}var im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uE=es(im),r_=mi({},im,{view:0,detail:0}),XD=es(r_),Dw,zw,Og,nx=mi({},r_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Og&&(Og&&e.type==="mousemove"?(Dw=e.screenX-Og.screenX,zw=e.screenY-Og.screenY):zw=Dw=0,Og=e),Dw)},movementY:function(e){return"movementY"in e?e.movementY:zw}}),q3=es(nx),YD=mi({},nx,{dataTransfer:0}),JD=es(YD),QD=mi({},r_,{relatedTarget:0}),Bw=es(QD),e8=mi({},im,{animationName:0,elapsedTime:0,pseudoElement:0}),t8=es(e8),n8=mi({},im,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r8=es(n8),i8=mi({},im,{data:0}),G3=es(i8),o8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=s8[e])?!!t[e]:!1}function cE(){return l8}var u8=mi({},r_,{key:function(e){if(e.key){var t=o8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?a8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cE,charCode:function(e){return e.type==="keypress"?Uv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),c8=es(u8),h8=mi({},nx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H3=es(h8),f8=mi({},r_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cE}),d8=es(f8),p8=mi({},im,{propertyName:0,elapsedTime:0,pseudoElement:0}),m8=es(p8),g8=mi({},nx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y8=es(g8),_8=[9,13,27,32],hE=Qu&&"CompositionEvent"in window,sy=null;Qu&&"documentMode"in document&&(sy=document.documentMode);var v8=Qu&&"TextEvent"in window&&!sy,pI=Qu&&(!hE||sy&&8<sy&&11>=sy),W3=String.fromCharCode(32),Z3=!1;function mI(e,t){switch(e){case"keyup":return _8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wp=!1;function x8(e,t){switch(e){case"compositionend":return gI(t);case"keypress":return t.which!==32?null:(Z3=!0,W3);case"textInput":return e=t.data,e===W3&&Z3?null:e;default:return null}}function b8(e,t){if(wp)return e==="compositionend"||!hE&&mI(e,t)?(e=dI(),Nv=lE=dh=null,wp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pI&&t.locale!=="ko"?null:t.data;default:return null}}var w8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!w8[e.type]:t==="textarea"}function yI(e,t,n,r){ZP(r),t=f1(t,"onChange"),0<t.length&&(n=new uE("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ly=null,Ty=null;function S8(e){TI(e,0)}function rx(e){var t=Ep(e);if(UP(t))return e}function C8(e,t){if(e==="change")return t}var _I=!1;if(Qu){var $w;if(Qu){var Nw="oninput"in document;if(!Nw){var X3=document.createElement("div");X3.setAttribute("oninput","return;"),Nw=typeof X3.oninput=="function"}$w=Nw}else $w=!1;_I=$w&&(!document.documentMode||9<document.documentMode)}function Y3(){ly&&(ly.detachEvent("onpropertychange",vI),Ty=ly=null)}function vI(e){if(e.propertyName==="value"&&rx(Ty)){var t=[];yI(t,Ty,e,rE(e)),JP(S8,t)}}function E8(e,t,n){e==="focusin"?(Y3(),ly=t,Ty=n,ly.attachEvent("onpropertychange",vI)):e==="focusout"&&Y3()}function k8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rx(Ty)}function A8(e,t){if(e==="click")return rx(t)}function T8(e,t){if(e==="input"||e==="change")return rx(t)}function P8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vl=typeof Object.is=="function"?Object.is:P8;function Py(e,t){if(vl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!q2.call(t,a)||!vl(e[a],t[a]))return!1}return!0}function J3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Q3(e,t){var n=J3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J3(n)}}function xI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bI(){for(var e=window,t=o1();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=o1(e.document)}return t}function fE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function I8(e){var t=bI(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xI(n.ownerDocument.documentElement,n)){if(r!==null&&fE(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(r.start,a);r=r.end===void 0?c:Math.min(r.end,a),!e.extend&&c>r&&(a=r,r=c,c=a),a=Q3(n,c);var d=Q3(n,r);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M8=Qu&&"documentMode"in document&&11>=document.documentMode,Sp=null,uS=null,uy=null,cS=!1;function eA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cS||Sp==null||Sp!==o1(r)||(r=Sp,"selectionStart"in r&&fE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uy&&Py(uy,r)||(uy=r,r=f1(uS,"onSelect"),0<r.length&&(t=new uE("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Sp)))}function J0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cp={animationend:J0("Animation","AnimationEnd"),animationiteration:J0("Animation","AnimationIteration"),animationstart:J0("Animation","AnimationStart"),transitionend:J0("Transition","TransitionEnd")},Uw={},wI={};Qu&&(wI=document.createElement("div").style,"AnimationEvent"in window||(delete Cp.animationend.animation,delete Cp.animationiteration.animation,delete Cp.animationstart.animation),"TransitionEvent"in window||delete Cp.transitionend.transition);function ix(e){if(Uw[e])return Uw[e];if(!Cp[e])return e;var t=Cp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wI)return Uw[e]=t[n];return e}var SI=ix("animationend"),CI=ix("animationiteration"),EI=ix("animationstart"),kI=ix("transitionend"),AI=new Map,tA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rh(e,t){AI.set(e,t),Qf(t,[e])}for(var jw=0;jw<tA.length;jw++){var Vw=tA[jw],L8=Vw.toLowerCase(),O8=Vw[0].toUpperCase()+Vw.slice(1);Rh(L8,"on"+O8)}Rh(SI,"onAnimationEnd");Rh(CI,"onAnimationIteration");Rh(EI,"onAnimationStart");Rh("dblclick","onDoubleClick");Rh("focusin","onFocus");Rh("focusout","onBlur");Rh(kI,"onTransitionEnd");Gp("onMouseEnter",["mouseout","mouseover"]);Gp("onMouseLeave",["mouseout","mouseover"]);Gp("onPointerEnter",["pointerout","pointerover"]);Gp("onPointerLeave",["pointerout","pointerover"]);Qf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ty="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ty));function nA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,LD(r,t,void 0,e),e.currentTarget=null}function TI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var c=void 0;if(t)for(var d=r.length-1;0<=d;d--){var l=r[d],x=l.instance,b=l.currentTarget;if(l=l.listener,x!==c&&a.isPropagationStopped())break e;nA(a,l,b),c=x}else for(d=0;d<r.length;d++){if(l=r[d],x=l.instance,b=l.currentTarget,l=l.listener,x!==c&&a.isPropagationStopped())break e;nA(a,l,b),c=x}}}if(s1)throw e=oS,s1=!1,oS=null,e}function Zr(e,t){var n=t[mS];n===void 0&&(n=t[mS]=new Set);var r=e+"__bubble";n.has(r)||(PI(t,e,2,!1),n.add(r))}function qw(e,t,n){var r=0;t&&(r|=4),PI(n,e,r,t)}var Q0="_reactListening"+Math.random().toString(36).slice(2);function Iy(e){if(!e[Q0]){e[Q0]=!0,DP.forEach(function(n){n!=="selectionchange"&&(F8.has(n)||qw(n,!1,e),qw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Q0]||(t[Q0]=!0,qw("selectionchange",!1,t))}}function PI(e,t,n,r){switch(fI(t)){case 1:var a=ZD;break;case 4:a=KD;break;default:a=sE}n=a.bind(null,t,n,e),a=void 0,!iS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Gw(e,t,n,r,a){var c=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(d===4)for(d=r.return;d!==null;){var x=d.tag;if((x===3||x===4)&&(x=d.stateNode.containerInfo,x===a||x.nodeType===8&&x.parentNode===a))return;d=d.return}for(;l!==null;){if(d=Bf(l),d===null)return;if(x=d.tag,x===5||x===6){r=c=d;continue e}l=l.parentNode}}r=r.return}JP(function(){var b=c,E=rE(n),A=[];e:{var L=AI.get(e);if(L!==void 0){var F=uE,$=e;switch(e){case"keypress":if(Uv(n)===0)break e;case"keydown":case"keyup":F=c8;break;case"focusin":$="focus",F=Bw;break;case"focusout":$="blur",F=Bw;break;case"beforeblur":case"afterblur":F=Bw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=q3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=JD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=d8;break;case SI:case CI:case EI:F=t8;break;case kI:F=m8;break;case"scroll":F=XD;break;case"wheel":F=y8;break;case"copy":case"cut":case"paste":F=r8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=H3}var N=(t&4)!==0,Z=!N&&e==="scroll",R=N?L!==null?L+"Capture":null:L;N=[];for(var q=b,G;q!==null;){G=q;var Q=G.stateNode;if(G.tag===5&&Q!==null&&(G=Q,R!==null&&(Q=Cy(q,R),Q!=null&&N.push(My(q,Q,G)))),Z)break;q=q.return}0<N.length&&(L=new F(L,$,null,n,E),A.push({event:L,listeners:N}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",L&&n!==nS&&($=n.relatedTarget||n.fromElement)&&(Bf($)||$[ec]))break e;if((F||L)&&(L=E.window===E?E:(L=E.ownerDocument)?L.defaultView||L.parentWindow:window,F?($=n.relatedTarget||n.toElement,F=b,$=$?Bf($):null,$!==null&&(Z=ed($),$!==Z||$.tag!==5&&$.tag!==6)&&($=null)):(F=null,$=b),F!==$)){if(N=q3,Q="onMouseLeave",R="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(N=H3,Q="onPointerLeave",R="onPointerEnter",q="pointer"),Z=F==null?L:Ep(F),G=$==null?L:Ep($),L=new N(Q,q+"leave",F,n,E),L.target=Z,L.relatedTarget=G,Q=null,Bf(E)===b&&(N=new N(R,q+"enter",$,n,E),N.target=G,N.relatedTarget=Z,Q=N),Z=Q,F&&$)t:{for(N=F,R=$,q=0,G=N;G;G=rp(G))q++;for(G=0,Q=R;Q;Q=rp(Q))G++;for(;0<q-G;)N=rp(N),q--;for(;0<G-q;)R=rp(R),G--;for(;q--;){if(N===R||R!==null&&N===R.alternate)break t;N=rp(N),R=rp(R)}N=null}else N=null;F!==null&&rA(A,L,F,N,!1),$!==null&&Z!==null&&rA(A,Z,$,N,!0)}}e:{if(L=b?Ep(b):window,F=L.nodeName&&L.nodeName.toLowerCase(),F==="select"||F==="input"&&L.type==="file")var se=C8;else if(K3(L))if(_I)se=T8;else{se=k8;var ee=E8}else(F=L.nodeName)&&F.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(se=A8);if(se&&(se=se(e,b))){yI(A,se,n,E);break e}ee&&ee(e,L,b),e==="focusout"&&(ee=L._wrapperState)&&ee.controlled&&L.type==="number"&&Y2(L,"number",L.value)}switch(ee=b?Ep(b):window,e){case"focusin":(K3(ee)||ee.contentEditable==="true")&&(Sp=ee,uS=b,uy=null);break;case"focusout":uy=uS=Sp=null;break;case"mousedown":cS=!0;break;case"contextmenu":case"mouseup":case"dragend":cS=!1,eA(A,n,E);break;case"selectionchange":if(M8)break;case"keydown":case"keyup":eA(A,n,E)}var oe;if(hE)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else wp?mI(e,n)&&(xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(pI&&n.locale!=="ko"&&(wp||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&wp&&(oe=dI()):(dh=E,lE="value"in dh?dh.value:dh.textContent,wp=!0)),ee=f1(b,xe),0<ee.length&&(xe=new G3(xe,e,null,n,E),A.push({event:xe,listeners:ee}),oe?xe.data=oe:(oe=gI(n),oe!==null&&(xe.data=oe)))),(oe=v8?x8(e,n):b8(e,n))&&(b=f1(b,"onBeforeInput"),0<b.length&&(E=new G3("onBeforeInput","beforeinput",null,n,E),A.push({event:E,listeners:b}),E.data=oe))}TI(A,t)})}function My(e,t,n){return{instance:e,listener:t,currentTarget:n}}function f1(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Cy(e,n),c!=null&&r.unshift(My(e,c,a)),c=Cy(e,t),c!=null&&r.push(My(e,c,a))),e=e.return}return r}function rp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rA(e,t,n,r,a){for(var c=t._reactName,d=[];n!==null&&n!==r;){var l=n,x=l.alternate,b=l.stateNode;if(x!==null&&x===r)break;l.tag===5&&b!==null&&(l=b,a?(x=Cy(n,c),x!=null&&d.unshift(My(n,x,l))):a||(x=Cy(n,c),x!=null&&d.push(My(n,x,l)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var R8=/\r\n?/g,D8=/\u0000|\uFFFD/g;function iA(e){return(typeof e=="string"?e:""+e).replace(R8,`
`).replace(D8,"")}function ev(e,t,n){if(t=iA(t),iA(e)!==t&&n)throw Error(St(425))}function d1(){}var hS=null,fS=null;function dS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pS=typeof setTimeout=="function"?setTimeout:void 0,z8=typeof clearTimeout=="function"?clearTimeout:void 0,oA=typeof Promise=="function"?Promise:void 0,B8=typeof queueMicrotask=="function"?queueMicrotask:typeof oA<"u"?function(e){return oA.resolve(null).then(e).catch($8)}:pS;function $8(e){setTimeout(function(){throw e})}function Hw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ay(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ay(t)}function bh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function aA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var om=Math.random().toString(36).slice(2),Ql="__reactFiber$"+om,Ly="__reactProps$"+om,ec="__reactContainer$"+om,mS="__reactEvents$"+om,N8="__reactListeners$"+om,U8="__reactHandles$"+om;function Bf(e){var t=e[Ql];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ec]||n[Ql]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=aA(e);e!==null;){if(n=e[Ql])return n;e=aA(e)}return t}e=n,n=e.parentNode}return null}function i_(e){return e=e[Ql]||e[ec],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ep(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(St(33))}function ox(e){return e[Ly]||null}var gS=[],kp=-1;function Dh(e){return{current:e}}function Xr(e){0>kp||(e.current=gS[kp],gS[kp]=null,kp--)}function Ur(e,t){kp++,gS[kp]=e.current,e.current=t}var Mh={},Ko=Dh(Mh),Pa=Dh(!1),Wf=Mh;function Hp(e,t){var n=e.type.contextTypes;if(!n)return Mh;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ia(e){return e=e.childContextTypes,e!=null}function p1(){Xr(Pa),Xr(Ko)}function sA(e,t,n){if(Ko.current!==Mh)throw Error(St(168));Ur(Ko,t),Ur(Pa,n)}function II(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(St(108,ED(e)||"Unknown",a));return mi({},n,r)}function m1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mh,Wf=Ko.current,Ur(Ko,e),Ur(Pa,Pa.current),!0}function lA(e,t,n){var r=e.stateNode;if(!r)throw Error(St(169));n?(e=II(e,t,Wf),r.__reactInternalMemoizedMergedChildContext=e,Xr(Pa),Xr(Ko),Ur(Ko,e)):Xr(Pa),Ur(Pa,n)}var Wu=null,ax=!1,Ww=!1;function MI(e){Wu===null?Wu=[e]:Wu.push(e)}function j8(e){ax=!0,MI(e)}function zh(){if(!Ww&&Wu!==null){Ww=!0;var e=0,t=kr;try{var n=Wu;for(kr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wu=null,ax=!1}catch(a){throw Wu!==null&&(Wu=Wu.slice(e+1)),nI(iE,zh),a}finally{kr=t,Ww=!1}}return null}var Ap=[],Tp=0,g1=null,y1=0,xs=[],bs=0,Zf=null,Ku=1,Xu="";function Mf(e,t){Ap[Tp++]=y1,Ap[Tp++]=g1,g1=e,y1=t}function LI(e,t,n){xs[bs++]=Ku,xs[bs++]=Xu,xs[bs++]=Zf,Zf=e;var r=Ku;e=Xu;var a=32-ml(r)-1;r&=~(1<<a),n+=1;var c=32-ml(t)+a;if(30<c){var d=a-a%5;c=(r&(1<<d)-1).toString(32),r>>=d,a-=d,Ku=1<<32-ml(t)+a|n<<a|r,Xu=c+e}else Ku=1<<c|n<<a|r,Xu=e}function dE(e){e.return!==null&&(Mf(e,1),LI(e,1,0))}function pE(e){for(;e===g1;)g1=Ap[--Tp],Ap[Tp]=null,y1=Ap[--Tp],Ap[Tp]=null;for(;e===Zf;)Zf=xs[--bs],xs[bs]=null,Xu=xs[--bs],xs[bs]=null,Ku=xs[--bs],xs[bs]=null}var Ya=null,Wa=null,Yr=!1,dl=null;function OI(e,t){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function uA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ya=e,Wa=bh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ya=e,Wa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zf!==null?{id:Ku,overflow:Xu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ya=e,Wa=null,!0):!1;default:return!1}}function yS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _S(e){if(Yr){var t=Wa;if(t){var n=t;if(!uA(e,t)){if(yS(e))throw Error(St(418));t=bh(n.nextSibling);var r=Ya;t&&uA(e,t)?OI(r,n):(e.flags=e.flags&-4097|2,Yr=!1,Ya=e)}}else{if(yS(e))throw Error(St(418));e.flags=e.flags&-4097|2,Yr=!1,Ya=e}}}function cA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ya=e}function tv(e){if(e!==Ya)return!1;if(!Yr)return cA(e),Yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dS(e.type,e.memoizedProps)),t&&(t=Wa)){if(yS(e))throw FI(),Error(St(418));for(;t;)OI(e,t),t=bh(t.nextSibling)}if(cA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(St(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wa=bh(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wa=null}}else Wa=Ya?bh(e.stateNode.nextSibling):null;return!0}function FI(){for(var e=Wa;e;)e=bh(e.nextSibling)}function Wp(){Wa=Ya=null,Yr=!1}function mE(e){dl===null?dl=[e]:dl.push(e)}var V8=oc.ReactCurrentBatchConfig;function hl(e,t){if(e&&e.defaultProps){t=mi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var _1=Dh(null),v1=null,Pp=null,gE=null;function yE(){gE=Pp=v1=null}function _E(e){var t=_1.current;Xr(_1),e._currentValue=t}function vS(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $p(e,t){v1=e,gE=Pp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ta=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(gE!==e)if(e={context:e,memoizedValue:t,next:null},Pp===null){if(v1===null)throw Error(St(308));Pp=e,v1.dependencies={lanes:0,firstContext:e}}else Pp=Pp.next=e;return t}var $f=null;function vE(e){$f===null?$f=[e]:$f.push(e)}function RI(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,vE(t)):(n.next=a.next,a.next=n),t.interleaved=n,tc(e,r)}function tc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lh=!1;function xE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ju(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wh(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,tc(e,n)}return a=r.interleaved,a===null?(t.next=t,vE(r)):(t.next=a.next,a.next=t),r.interleaved=t,tc(e,n)}function jv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oE(e,n)}}function hA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function x1(e,t,n,r){var a=e.updateQueue;lh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var x=l,b=x.next;x.next=null,d===null?c=b:d.next=b,d=x;var E=e.alternate;E!==null&&(E=E.updateQueue,l=E.lastBaseUpdate,l!==d&&(l===null?E.firstBaseUpdate=b:l.next=b,E.lastBaseUpdate=x))}if(c!==null){var A=a.baseState;d=0,E=b=x=null,l=c;do{var L=l.lane,F=l.eventTime;if((r&L)===L){E!==null&&(E=E.next={eventTime:F,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var $=e,N=l;switch(L=t,F=n,N.tag){case 1:if($=N.payload,typeof $=="function"){A=$.call(F,A,L);break e}A=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=N.payload,L=typeof $=="function"?$.call(F,A,L):$,L==null)break e;A=mi({},A,L);break e;case 2:lh=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,L=a.effects,L===null?a.effects=[l]:L.push(l))}else F={eventTime:F,lane:L,tag:l.tag,payload:l.payload,callback:l.callback,next:null},E===null?(b=E=F,x=A):E=E.next=F,d|=L;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;L=l,l=L.next,L.next=null,a.lastBaseUpdate=L,a.shared.pending=null}}while(1);if(E===null&&(x=A),a.baseState=x,a.firstBaseUpdate=b,a.lastBaseUpdate=E,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);Xf|=d,e.lanes=d,e.memoizedState=A}}function fA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(St(191,a));a.call(r)}}}var zI=new RP.Component().refs;function xS(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sx={isMounted:function(e){return(e=e._reactInternals)?ed(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ua(),a=Ch(e),c=Ju(r,a);c.payload=t,n!=null&&(c.callback=n),t=wh(e,c,a),t!==null&&(gl(t,e,a,r),jv(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ua(),a=Ch(e),c=Ju(r,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=wh(e,c,a),t!==null&&(gl(t,e,a,r),jv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ua(),r=Ch(e),a=Ju(n,r);a.tag=2,t!=null&&(a.callback=t),t=wh(e,a,r),t!==null&&(gl(t,e,r,n),jv(t,e,r))}};function dA(e,t,n,r,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,d):t.prototype&&t.prototype.isPureReactComponent?!Py(n,r)||!Py(a,c):!0}function BI(e,t,n){var r=!1,a=Mh,c=t.contextType;return typeof c=="object"&&c!==null?c=As(c):(a=Ia(t)?Wf:Ko.current,r=t.contextTypes,c=(r=r!=null)?Hp(e,a):Mh),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function pA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sx.enqueueReplaceState(t,t.state,null)}function bS(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zI,xE(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=As(c):(c=Ia(t)?Wf:Ko.current,a.context=Hp(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(xS(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&sx.enqueueReplaceState(a,a.state,null),x1(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Fg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(St(309));var r=n.stateNode}if(!r)throw Error(St(147,e));var a=r,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var l=a.refs;l===zI&&(l=a.refs={}),d===null?delete l[c]:l[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(St(284));if(!n._owner)throw Error(St(290,e))}return e}function nv(e,t){throw e=Object.prototype.toString.call(t),Error(St(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mA(e){var t=e._init;return t(e._payload)}function $I(e){function t(R,q){if(e){var G=R.deletions;G===null?(R.deletions=[q],R.flags|=16):G.push(q)}}function n(R,q){if(!e)return null;for(;q!==null;)t(R,q),q=q.sibling;return null}function r(R,q){for(R=new Map;q!==null;)q.key!==null?R.set(q.key,q):R.set(q.index,q),q=q.sibling;return R}function a(R,q){return R=Eh(R,q),R.index=0,R.sibling=null,R}function c(R,q,G){return R.index=G,e?(G=R.alternate,G!==null?(G=G.index,G<q?(R.flags|=2,q):G):(R.flags|=2,q)):(R.flags|=1048576,q)}function d(R){return e&&R.alternate===null&&(R.flags|=2),R}function l(R,q,G,Q){return q===null||q.tag!==6?(q=e2(G,R.mode,Q),q.return=R,q):(q=a(q,G),q.return=R,q)}function x(R,q,G,Q){var se=G.type;return se===bp?E(R,q,G.props.children,Q,G.key):q!==null&&(q.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===sh&&mA(se)===q.type)?(Q=a(q,G.props),Q.ref=Fg(R,q,G),Q.return=R,Q):(Q=Zv(G.type,G.key,G.props,null,R.mode,Q),Q.ref=Fg(R,q,G),Q.return=R,Q)}function b(R,q,G,Q){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=t2(G,R.mode,Q),q.return=R,q):(q=a(q,G.children||[]),q.return=R,q)}function E(R,q,G,Q,se){return q===null||q.tag!==7?(q=Vf(G,R.mode,Q,se),q.return=R,q):(q=a(q,G),q.return=R,q)}function A(R,q,G){if(typeof q=="string"&&q!==""||typeof q=="number")return q=e2(""+q,R.mode,G),q.return=R,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case G0:return G=Zv(q.type,q.key,q.props,null,R.mode,G),G.ref=Fg(R,null,q),G.return=R,G;case xp:return q=t2(q,R.mode,G),q.return=R,q;case sh:var Q=q._init;return A(R,Q(q._payload),G)}if(Qg(q)||Pg(q))return q=Vf(q,R.mode,G,null),q.return=R,q;nv(R,q)}return null}function L(R,q,G,Q){var se=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return se!==null?null:l(R,q,""+G,Q);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case G0:return G.key===se?x(R,q,G,Q):null;case xp:return G.key===se?b(R,q,G,Q):null;case sh:return se=G._init,L(R,q,se(G._payload),Q)}if(Qg(G)||Pg(G))return se!==null?null:E(R,q,G,Q,null);nv(R,G)}return null}function F(R,q,G,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return R=R.get(G)||null,l(q,R,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case G0:return R=R.get(Q.key===null?G:Q.key)||null,x(q,R,Q,se);case xp:return R=R.get(Q.key===null?G:Q.key)||null,b(q,R,Q,se);case sh:var ee=Q._init;return F(R,q,G,ee(Q._payload),se)}if(Qg(Q)||Pg(Q))return R=R.get(G)||null,E(q,R,Q,se,null);nv(q,Q)}return null}function $(R,q,G,Q){for(var se=null,ee=null,oe=q,xe=q=0,Oe=null;oe!==null&&xe<G.length;xe++){oe.index>xe?(Oe=oe,oe=null):Oe=oe.sibling;var Le=L(R,oe,G[xe],Q);if(Le===null){oe===null&&(oe=Oe);break}e&&oe&&Le.alternate===null&&t(R,oe),q=c(Le,q,xe),ee===null?se=Le:ee.sibling=Le,ee=Le,oe=Oe}if(xe===G.length)return n(R,oe),Yr&&Mf(R,xe),se;if(oe===null){for(;xe<G.length;xe++)oe=A(R,G[xe],Q),oe!==null&&(q=c(oe,q,xe),ee===null?se=oe:ee.sibling=oe,ee=oe);return Yr&&Mf(R,xe),se}for(oe=r(R,oe);xe<G.length;xe++)Oe=F(oe,R,xe,G[xe],Q),Oe!==null&&(e&&Oe.alternate!==null&&oe.delete(Oe.key===null?xe:Oe.key),q=c(Oe,q,xe),ee===null?se=Oe:ee.sibling=Oe,ee=Oe);return e&&oe.forEach(function(qe){return t(R,qe)}),Yr&&Mf(R,xe),se}function N(R,q,G,Q){var se=Pg(G);if(typeof se!="function")throw Error(St(150));if(G=se.call(G),G==null)throw Error(St(151));for(var ee=se=null,oe=q,xe=q=0,Oe=null,Le=G.next();oe!==null&&!Le.done;xe++,Le=G.next()){oe.index>xe?(Oe=oe,oe=null):Oe=oe.sibling;var qe=L(R,oe,Le.value,Q);if(qe===null){oe===null&&(oe=Oe);break}e&&oe&&qe.alternate===null&&t(R,oe),q=c(qe,q,xe),ee===null?se=qe:ee.sibling=qe,ee=qe,oe=Oe}if(Le.done)return n(R,oe),Yr&&Mf(R,xe),se;if(oe===null){for(;!Le.done;xe++,Le=G.next())Le=A(R,Le.value,Q),Le!==null&&(q=c(Le,q,xe),ee===null?se=Le:ee.sibling=Le,ee=Le);return Yr&&Mf(R,xe),se}for(oe=r(R,oe);!Le.done;xe++,Le=G.next())Le=F(oe,R,xe,Le.value,Q),Le!==null&&(e&&Le.alternate!==null&&oe.delete(Le.key===null?xe:Le.key),q=c(Le,q,xe),ee===null?se=Le:ee.sibling=Le,ee=Le);return e&&oe.forEach(function($e){return t(R,$e)}),Yr&&Mf(R,xe),se}function Z(R,q,G,Q){if(typeof G=="object"&&G!==null&&G.type===bp&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case G0:e:{for(var se=G.key,ee=q;ee!==null;){if(ee.key===se){if(se=G.type,se===bp){if(ee.tag===7){n(R,ee.sibling),q=a(ee,G.props.children),q.return=R,R=q;break e}}else if(ee.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===sh&&mA(se)===ee.type){n(R,ee.sibling),q=a(ee,G.props),q.ref=Fg(R,ee,G),q.return=R,R=q;break e}n(R,ee);break}else t(R,ee);ee=ee.sibling}G.type===bp?(q=Vf(G.props.children,R.mode,Q,G.key),q.return=R,R=q):(Q=Zv(G.type,G.key,G.props,null,R.mode,Q),Q.ref=Fg(R,q,G),Q.return=R,R=Q)}return d(R);case xp:e:{for(ee=G.key;q!==null;){if(q.key===ee)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){n(R,q.sibling),q=a(q,G.children||[]),q.return=R,R=q;break e}else{n(R,q);break}else t(R,q);q=q.sibling}q=t2(G,R.mode,Q),q.return=R,R=q}return d(R);case sh:return ee=G._init,Z(R,q,ee(G._payload),Q)}if(Qg(G))return $(R,q,G,Q);if(Pg(G))return N(R,q,G,Q);nv(R,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,q!==null&&q.tag===6?(n(R,q.sibling),q=a(q,G),q.return=R,R=q):(n(R,q),q=e2(G,R.mode,Q),q.return=R,R=q),d(R)):n(R,q)}return Z}var Zp=$I(!0),NI=$I(!1),o_={},ru=Dh(o_),Oy=Dh(o_),Fy=Dh(o_);function Nf(e){if(e===o_)throw Error(St(174));return e}function bE(e,t){switch(Ur(Fy,t),Ur(Oy,e),Ur(ru,o_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Q2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Q2(t,e)}Xr(ru),Ur(ru,t)}function Kp(){Xr(ru),Xr(Oy),Xr(Fy)}function UI(e){Nf(Fy.current);var t=Nf(ru.current),n=Q2(t,e.type);t!==n&&(Ur(Oy,e),Ur(ru,n))}function wE(e){Oy.current===e&&(Xr(ru),Xr(Oy))}var di=Dh(0);function b1(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zw=[];function SE(){for(var e=0;e<Zw.length;e++)Zw[e]._workInProgressVersionPrimary=null;Zw.length=0}var Vv=oc.ReactCurrentDispatcher,Kw=oc.ReactCurrentBatchConfig,Kf=0,pi=null,eo=null,fo=null,w1=!1,cy=!1,Ry=0,q8=0;function Go(){throw Error(St(321))}function CE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vl(e[n],t[n]))return!1;return!0}function EE(e,t,n,r,a,c){if(Kf=c,pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vv.current=e===null||e.memoizedState===null?Z8:K8,e=n(r,a),cy){c=0;do{if(cy=!1,Ry=0,25<=c)throw Error(St(301));c+=1,fo=eo=null,t.updateQueue=null,Vv.current=X8,e=n(r,a)}while(cy)}if(Vv.current=S1,t=eo!==null&&eo.next!==null,Kf=0,fo=eo=pi=null,w1=!1,t)throw Error(St(300));return e}function kE(){var e=Ry!==0;return Ry=0,e}function Yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?pi.memoizedState=fo=e:fo=fo.next=e,fo}function Ts(){if(eo===null){var e=pi.alternate;e=e!==null?e.memoizedState:null}else e=eo.next;var t=fo===null?pi.memoizedState:fo.next;if(t!==null)fo=t,eo=e;else{if(e===null)throw Error(St(310));eo=e,e={memoizedState:eo.memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},fo===null?pi.memoizedState=fo=e:fo=fo.next=e}return fo}function Dy(e,t){return typeof t=="function"?t(e):t}function Xw(e){var t=Ts(),n=t.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,c=n.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}r.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,r=r.baseState;var l=d=null,x=null,b=c;do{var E=b.lane;if((Kf&E)===E)x!==null&&(x=x.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),r=b.hasEagerState?b.eagerState:e(r,b.action);else{var A={lane:E,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};x===null?(l=x=A,d=r):x=x.next=A,pi.lanes|=E,Xf|=E}b=b.next}while(b!==null&&b!==c);x===null?d=r:x.next=l,vl(r,t.memoizedState)||(Ta=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=x,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do c=a.lane,pi.lanes|=c,Xf|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yw(e){var t=Ts(),n=t.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);vl(c,t.memoizedState)||(Ta=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,r]}function jI(){}function VI(e,t){var n=pi,r=Ts(),a=t(),c=!vl(r.memoizedState,a);if(c&&(r.memoizedState=a,Ta=!0),r=r.queue,AE(HI.bind(null,n,r,e),[e]),r.getSnapshot!==t||c||fo!==null&&fo.memoizedState.tag&1){if(n.flags|=2048,zy(9,GI.bind(null,n,r,a,t),void 0,null),po===null)throw Error(St(349));Kf&30||qI(n,t,a)}return a}function qI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function GI(e,t,n,r){t.value=n,t.getSnapshot=r,WI(t)&&ZI(e)}function HI(e,t,n){return n(function(){WI(t)&&ZI(e)})}function WI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vl(e,n)}catch{return!0}}function ZI(e){var t=tc(e,1);t!==null&&gl(t,e,1,-1)}function gA(e){var t=Yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:e},t.queue=e,e=e.dispatch=W8.bind(null,pi,e),[t.memoizedState,e]}function zy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function KI(){return Ts().memoizedState}function qv(e,t,n,r){var a=Yl();pi.flags|=e,a.memoizedState=zy(1|t,n,void 0,r===void 0?null:r)}function lx(e,t,n,r){var a=Ts();r=r===void 0?null:r;var c=void 0;if(eo!==null){var d=eo.memoizedState;if(c=d.destroy,r!==null&&CE(r,d.deps)){a.memoizedState=zy(t,n,c,r);return}}pi.flags|=e,a.memoizedState=zy(1|t,n,c,r)}function yA(e,t){return qv(8390656,8,e,t)}function AE(e,t){return lx(2048,8,e,t)}function XI(e,t){return lx(4,2,e,t)}function YI(e,t){return lx(4,4,e,t)}function JI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QI(e,t,n){return n=n!=null?n.concat([e]):null,lx(4,4,JI.bind(null,t,e),n)}function TE(){}function e6(e,t){var n=Ts();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&CE(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function t6(e,t){var n=Ts();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&CE(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function n6(e,t,n){return Kf&21?(vl(n,t)||(n=oI(),pi.lanes|=n,Xf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ta=!0),e.memoizedState=n)}function G8(e,t){var n=kr;kr=n!==0&&4>n?n:4,e(!0);var r=Kw.transition;Kw.transition={};try{e(!1),t()}finally{kr=n,Kw.transition=r}}function r6(){return Ts().memoizedState}function H8(e,t,n){var r=Ch(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},i6(e))o6(t,n);else if(n=RI(e,t,n,r),n!==null){var a=ua();gl(n,e,r,a),a6(n,t,r)}}function W8(e,t,n){var r=Ch(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(i6(e))o6(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,l=c(d,n);if(a.hasEagerState=!0,a.eagerState=l,vl(l,d)){var x=t.interleaved;x===null?(a.next=a,vE(t)):(a.next=x.next,x.next=a),t.interleaved=a;return}}catch{}finally{}n=RI(e,t,a,r),n!==null&&(a=ua(),gl(n,e,r,a),a6(n,t,r))}}function i6(e){var t=e.alternate;return e===pi||t!==null&&t===pi}function o6(e,t){cy=w1=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function a6(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oE(e,n)}}var S1={readContext:As,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},Z8={readContext:As,useCallback:function(e,t){return Yl().memoizedState=[e,t===void 0?null:t],e},useContext:As,useEffect:yA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qv(4194308,4,JI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qv(4194308,4,e,t)},useInsertionEffect:function(e,t){return qv(4,2,e,t)},useMemo:function(e,t){var n=Yl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=H8.bind(null,pi,e),[r.memoizedState,e]},useRef:function(e){var t=Yl();return e={current:e},t.memoizedState=e},useState:gA,useDebugValue:TE,useDeferredValue:function(e){return Yl().memoizedState=e},useTransition:function(){var e=gA(!1),t=e[0];return e=G8.bind(null,e[1]),Yl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pi,a=Yl();if(Yr){if(n===void 0)throw Error(St(407));n=n()}else{if(n=t(),po===null)throw Error(St(349));Kf&30||qI(r,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,yA(HI.bind(null,r,c,e),[e]),r.flags|=2048,zy(9,GI.bind(null,r,c,n,t),void 0,null),n},useId:function(){var e=Yl(),t=po.identifierPrefix;if(Yr){var n=Xu,r=Ku;n=(r&~(1<<32-ml(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ry++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=q8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},K8={readContext:As,useCallback:e6,useContext:As,useEffect:AE,useImperativeHandle:QI,useInsertionEffect:XI,useLayoutEffect:YI,useMemo:t6,useReducer:Xw,useRef:KI,useState:function(){return Xw(Dy)},useDebugValue:TE,useDeferredValue:function(e){var t=Ts();return n6(t,eo.memoizedState,e)},useTransition:function(){var e=Xw(Dy)[0],t=Ts().memoizedState;return[e,t]},useMutableSource:jI,useSyncExternalStore:VI,useId:r6,unstable_isNewReconciler:!1},X8={readContext:As,useCallback:e6,useContext:As,useEffect:AE,useImperativeHandle:QI,useInsertionEffect:XI,useLayoutEffect:YI,useMemo:t6,useReducer:Yw,useRef:KI,useState:function(){return Yw(Dy)},useDebugValue:TE,useDeferredValue:function(e){var t=Ts();return eo===null?t.memoizedState=e:n6(t,eo.memoizedState,e)},useTransition:function(){var e=Yw(Dy)[0],t=Ts().memoizedState;return[e,t]},useMutableSource:jI,useSyncExternalStore:VI,useId:r6,unstable_isNewReconciler:!1};function Xp(e,t){try{var n="",r=t;do n+=CD(r),r=r.return;while(r);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function Jw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wS(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Y8=typeof WeakMap=="function"?WeakMap:Map;function s6(e,t,n){n=Ju(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){E1||(E1=!0,LS=r),wS(e,t)},n}function l6(e,t,n){n=Ju(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){wS(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){wS(e,t),typeof r!="function"&&(Sh===null?Sh=new Set([this]):Sh.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function _A(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Y8;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=hz.bind(null,e,t,n),t.then(e,e))}function vA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xA(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ju(-1,1),t.tag=2,wh(n,t,1))),n.lanes|=1),e)}var J8=oc.ReactCurrentOwner,Ta=!1;function la(e,t,n,r){t.child=e===null?NI(t,null,n,r):Zp(t,e.child,n,r)}function bA(e,t,n,r,a){n=n.render;var c=t.ref;return $p(t,a),r=EE(e,t,n,r,c,a),n=kE(),e!==null&&!Ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,nc(e,t,a)):(Yr&&n&&dE(t),t.flags|=1,la(e,t,r,a),t.child)}function wA(e,t,n,r,a){if(e===null){var c=n.type;return typeof c=="function"&&!DE(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,u6(e,t,c,r,a)):(e=Zv(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:Py,n(d,r)&&e.ref===t.ref)return nc(e,t,a)}return t.flags|=1,e=Eh(c,r),e.ref=t.ref,e.return=t,t.child=e}function u6(e,t,n,r,a){if(e!==null){var c=e.memoizedProps;if(Py(c,r)&&e.ref===t.ref)if(Ta=!1,t.pendingProps=r=c,(e.lanes&a)!==0)e.flags&131072&&(Ta=!0);else return t.lanes=e.lanes,nc(e,t,a)}return SS(e,t,n,r,a)}function c6(e,t,n){var r=t.pendingProps,a=r.children,c=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(Mp,Ha),Ha|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ur(Mp,Ha),Ha|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=c!==null?c.baseLanes:n,Ur(Mp,Ha),Ha|=r}else c!==null?(r=c.baseLanes|n,t.memoizedState=null):r=n,Ur(Mp,Ha),Ha|=r;return la(e,t,a,n),t.child}function h6(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function SS(e,t,n,r,a){var c=Ia(n)?Wf:Ko.current;return c=Hp(t,c),$p(t,a),n=EE(e,t,n,r,c,a),r=kE(),e!==null&&!Ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,nc(e,t,a)):(Yr&&r&&dE(t),t.flags|=1,la(e,t,n,a),t.child)}function SA(e,t,n,r,a){if(Ia(n)){var c=!0;m1(t)}else c=!1;if($p(t,a),t.stateNode===null)Gv(e,t),BI(t,n,r),bS(t,n,r,a),r=!0;else if(e===null){var d=t.stateNode,l=t.memoizedProps;d.props=l;var x=d.context,b=n.contextType;typeof b=="object"&&b!==null?b=As(b):(b=Ia(n)?Wf:Ko.current,b=Hp(t,b));var E=n.getDerivedStateFromProps,A=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function";A||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==r||x!==b)&&pA(t,d,r,b),lh=!1;var L=t.memoizedState;d.state=L,x1(t,r,d,a),x=t.memoizedState,l!==r||L!==x||Pa.current||lh?(typeof E=="function"&&(xS(t,n,E,r),x=t.memoizedState),(l=lh||dA(t,n,l,r,L,x,b))?(A||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=x),d.props=r,d.state=x,d.context=b,r=l):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,DI(e,t),l=t.memoizedProps,b=t.type===t.elementType?l:hl(t.type,l),d.props=b,A=t.pendingProps,L=d.context,x=n.contextType,typeof x=="object"&&x!==null?x=As(x):(x=Ia(n)?Wf:Ko.current,x=Hp(t,x));var F=n.getDerivedStateFromProps;(E=typeof F=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==A||L!==x)&&pA(t,d,r,x),lh=!1,L=t.memoizedState,d.state=L,x1(t,r,d,a);var $=t.memoizedState;l!==A||L!==$||Pa.current||lh?(typeof F=="function"&&(xS(t,n,F,r),$=t.memoizedState),(b=lh||dA(t,n,b,r,L,$,x)||!1)?(E||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,$,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,$,x)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=$),d.props=r,d.state=$,d.context=x,r=b):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),r=!1)}return CS(e,t,n,r,c,a)}function CS(e,t,n,r,a,c){h6(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return a&&lA(t,n,!1),nc(e,t,c);r=t.stateNode,J8.current=t;var l=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=Zp(t,e.child,null,c),t.child=Zp(t,null,l,c)):la(e,t,l,c),t.memoizedState=r.state,a&&lA(t,n,!0),t.child}function f6(e){var t=e.stateNode;t.pendingContext?sA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sA(e,t.context,!1),bE(e,t.containerInfo)}function CA(e,t,n,r,a){return Wp(),mE(a),t.flags|=256,la(e,t,n,r),t.child}var ES={dehydrated:null,treeContext:null,retryLane:0};function kS(e){return{baseLanes:e,cachePool:null,transitions:null}}function d6(e,t,n){var r=t.pendingProps,a=di.current,c=!1,d=(t.flags&128)!==0,l;if((l=d)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ur(di,a&1),e===null)return _S(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=r.children,e=r.fallback,c?(r=t.mode,c=t.child,d={mode:"hidden",children:d},!(r&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=hx(d,r,0,null),e=Vf(e,r,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=kS(n),t.memoizedState=ES,e):PE(t,d));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Q8(e,t,d,r,l,a,n);if(c){c=r.fallback,d=t.mode,a=e.child,l=a.sibling;var x={mode:"hidden",children:r.children};return!(d&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=x,t.deletions=null):(r=Eh(a,x),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?c=Eh(l,c):(c=Vf(c,d,n,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,d=e.child.memoizedState,d=d===null?kS(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~n,t.memoizedState=ES,r}return c=e.child,e=c.sibling,r=Eh(c,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function PE(e,t){return t=hx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rv(e,t,n,r){return r!==null&&mE(r),Zp(t,e.child,null,n),e=PE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q8(e,t,n,r,a,c,d){if(n)return t.flags&256?(t.flags&=-257,r=Jw(Error(St(422))),rv(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=r.fallback,a=t.mode,r=hx({mode:"visible",children:r.children},a,0,null),c=Vf(c,a,d,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,t.mode&1&&Zp(t,e.child,null,d),t.child.memoizedState=kS(d),t.memoizedState=ES,c);if(!(t.mode&1))return rv(e,t,d,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,c=Error(St(419)),r=Jw(c,r,void 0),rv(e,t,d,r)}if(l=(d&e.childLanes)!==0,Ta||l){if(r=po,r!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,tc(e,a),gl(r,e,a,-1))}return RE(),r=Jw(Error(St(421))),rv(e,t,d,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=fz.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Wa=bh(a.nextSibling),Ya=t,Yr=!0,dl=null,e!==null&&(xs[bs++]=Ku,xs[bs++]=Xu,xs[bs++]=Zf,Ku=e.id,Xu=e.overflow,Zf=t),t=PE(t,r.children),t.flags|=4096,t)}function EA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vS(e.return,t,n)}function Qw(e,t,n,r,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=n,c.tailMode=a)}function p6(e,t,n){var r=t.pendingProps,a=r.revealOrder,c=r.tail;if(la(e,t,r.children,n),r=di.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&EA(e,n,t);else if(e.tag===19)EA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ur(di,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&b1(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Qw(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&b1(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Qw(t,!0,n,null,c);break;case"together":Qw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(St(153));if(t.child!==null){for(e=t.child,n=Eh(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Eh(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ez(e,t,n){switch(t.tag){case 3:f6(t),Wp();break;case 5:UI(t);break;case 1:Ia(t.type)&&m1(t);break;case 4:bE(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ur(_1,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ur(di,di.current&1),t.flags|=128,null):n&t.child.childLanes?d6(e,t,n):(Ur(di,di.current&1),e=nc(e,t,n),e!==null?e.sibling:null);Ur(di,di.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return p6(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ur(di,di.current),r)break;return null;case 22:case 23:return t.lanes=0,c6(e,t,n)}return nc(e,t,n)}var m6,AS,g6,y6;m6=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};AS=function(){};g6=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Nf(ru.current);var c=null;switch(n){case"input":a=K2(e,a),r=K2(e,r),c=[];break;case"select":a=mi({},a,{value:void 0}),r=mi({},r,{value:void 0}),c=[];break;case"textarea":a=J2(e,a),r=J2(e,r),c=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=d1)}eS(n,r);var d;n=null;for(b in a)if(!r.hasOwnProperty(b)&&a.hasOwnProperty(b)&&a[b]!=null)if(b==="style"){var l=a[b];for(d in l)l.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(wy.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in r){var x=r[b];if(l=a!=null?a[b]:void 0,r.hasOwnProperty(b)&&x!==l&&(x!=null||l!=null))if(b==="style")if(l){for(d in l)!l.hasOwnProperty(d)||x&&x.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in x)x.hasOwnProperty(d)&&l[d]!==x[d]&&(n||(n={}),n[d]=x[d])}else n||(c||(c=[]),c.push(b,n)),n=x;else b==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,l=l?l.__html:void 0,x!=null&&l!==x&&(c=c||[]).push(b,x)):b==="children"?typeof x!="string"&&typeof x!="number"||(c=c||[]).push(b,""+x):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(wy.hasOwnProperty(b)?(x!=null&&b==="onScroll"&&Zr("scroll",e),c||l===x||(c=[])):(c=c||[]).push(b,x))}n&&(c=c||[]).push("style",n);var b=c;(t.updateQueue=b)&&(t.flags|=4)}};y6=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rg(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tz(e,t,n){var r=t.pendingProps;switch(pE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:return Ia(t.type)&&p1(),Ho(t),null;case 3:return r=t.stateNode,Kp(),Xr(Pa),Xr(Ko),SE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(tv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dl!==null&&(RS(dl),dl=null))),AS(e,t),Ho(t),null;case 5:wE(t);var a=Nf(Fy.current);if(n=t.type,e!==null&&t.stateNode!=null)g6(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(St(166));return Ho(t),null}if(e=Nf(ru.current),tv(t)){r=t.stateNode,n=t.type;var c=t.memoizedProps;switch(r[Ql]=t,r[Ly]=c,e=(t.mode&1)!==0,n){case"dialog":Zr("cancel",r),Zr("close",r);break;case"iframe":case"object":case"embed":Zr("load",r);break;case"video":case"audio":for(a=0;a<ty.length;a++)Zr(ty[a],r);break;case"source":Zr("error",r);break;case"img":case"image":case"link":Zr("error",r),Zr("load",r);break;case"details":Zr("toggle",r);break;case"input":F3(r,c),Zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!c.multiple},Zr("invalid",r);break;case"textarea":D3(r,c),Zr("invalid",r)}eS(n,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var l=c[d];d==="children"?typeof l=="string"?r.textContent!==l&&(c.suppressHydrationWarning!==!0&&ev(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(c.suppressHydrationWarning!==!0&&ev(r.textContent,l,e),a=["children",""+l]):wy.hasOwnProperty(d)&&l!=null&&d==="onScroll"&&Zr("scroll",r)}switch(n){case"input":H0(r),R3(r,c,!0);break;case"textarea":H0(r),z3(r);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(r.onclick=d1)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qP(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[Ql]=t,e[Ly]=r,m6(e,t,!1,!1),t.stateNode=e;e:{switch(d=tS(n,r),n){case"dialog":Zr("cancel",e),Zr("close",e),a=r;break;case"iframe":case"object":case"embed":Zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<ty.length;a++)Zr(ty[a],e);a=r;break;case"source":Zr("error",e),a=r;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),a=r;break;case"details":Zr("toggle",e),a=r;break;case"input":F3(e,r),a=K2(e,r),Zr("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=mi({},r,{value:void 0}),Zr("invalid",e);break;case"textarea":D3(e,r),a=J2(e,r),Zr("invalid",e);break;default:a=r}eS(n,a),l=a;for(c in l)if(l.hasOwnProperty(c)){var x=l[c];c==="style"?WP(e,x):c==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&GP(e,x)):c==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Sy(e,x):typeof x=="number"&&Sy(e,""+x):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wy.hasOwnProperty(c)?x!=null&&c==="onScroll"&&Zr("scroll",e):x!=null&&QC(e,c,x,d))}switch(n){case"input":H0(e),R3(e,r,!1);break;case"textarea":H0(e),z3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ih(r.value));break;case"select":e.multiple=!!r.multiple,c=r.value,c!=null?Rp(e,!!r.multiple,c,!1):r.defaultValue!=null&&Rp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=d1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&t.stateNode!=null)y6(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(St(166));if(n=Nf(Fy.current),Nf(ru.current),tv(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ql]=t,(c=r.nodeValue!==n)&&(e=Ya,e!==null))switch(e.tag){case 3:ev(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ev(r.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ql]=t,t.stateNode=r}return Ho(t),null;case 13:if(Xr(di),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yr&&Wa!==null&&t.mode&1&&!(t.flags&128))FI(),Wp(),t.flags|=98560,c=!1;else if(c=tv(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(St(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(St(317));c[Ql]=t}else Wp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ho(t),c=!1}else dl!==null&&(RS(dl),dl=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||di.current&1?to===0&&(to=3):RE())),t.updateQueue!==null&&(t.flags|=4),Ho(t),null);case 4:return Kp(),AS(e,t),e===null&&Iy(t.stateNode.containerInfo),Ho(t),null;case 10:return _E(t.type._context),Ho(t),null;case 17:return Ia(t.type)&&p1(),Ho(t),null;case 19:if(Xr(di),c=t.memoizedState,c===null)return Ho(t),null;if(r=(t.flags&128)!==0,d=c.rendering,d===null)if(r)Rg(c,!1);else{if(to!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=b1(e),d!==null){for(t.flags|=128,Rg(c,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)c=n,e=r,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ur(di,di.current&1|2),t.child}e=e.sibling}c.tail!==null&&Ii()>Yp&&(t.flags|=128,r=!0,Rg(c,!1),t.lanes=4194304)}else{if(!r)if(e=b1(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rg(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!Yr)return Ho(t),null}else 2*Ii()-c.renderingStartTime>Yp&&n!==1073741824&&(t.flags|=128,r=!0,Rg(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(n=c.last,n!==null?n.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ii(),t.sibling=null,n=di.current,Ur(di,r?n&1|2:n&1),t):(Ho(t),null);case 22:case 23:return FE(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ha&1073741824&&(Ho(t),t.subtreeFlags&6&&(t.flags|=8192)):Ho(t),null;case 24:return null;case 25:return null}throw Error(St(156,t.tag))}function nz(e,t){switch(pE(t),t.tag){case 1:return Ia(t.type)&&p1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kp(),Xr(Pa),Xr(Ko),SE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wE(t),null;case 13:if(Xr(di),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(St(340));Wp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xr(di),null;case 4:return Kp(),null;case 10:return _E(t.type._context),null;case 22:case 23:return FE(),null;case 24:return null;default:return null}}var iv=!1,Wo=!1,rz=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Ip(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Si(e,t,r)}else n.current=null}function TS(e,t,n){try{n()}catch(r){Si(e,t,r)}}var kA=!1;function iz(e,t){if(hS=c1,e=bI(),fE(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var d=0,l=-1,x=-1,b=0,E=0,A=e,L=null;t:for(;;){for(var F;A!==n||a!==0&&A.nodeType!==3||(l=d+a),A!==c||r!==0&&A.nodeType!==3||(x=d+r),A.nodeType===3&&(d+=A.nodeValue.length),(F=A.firstChild)!==null;)L=A,A=F;for(;;){if(A===e)break t;if(L===n&&++b===a&&(l=d),L===c&&++E===r&&(x=d),(F=A.nextSibling)!==null)break;A=L,L=A.parentNode}A=F}n=l===-1||x===-1?null:{start:l,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(fS={focusedElem:e,selectionRange:n},c1=!1,Kt=t;Kt!==null;)if(t=Kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Kt=e;else for(;Kt!==null;){t=Kt;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var N=$.memoizedProps,Z=$.memoizedState,R=t.stateNode,q=R.getSnapshotBeforeUpdate(t.elementType===t.type?N:hl(t.type,N),Z);R.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(Q){Si(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,Kt=e;break}Kt=t.return}return $=kA,kA=!1,$}function hy(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&TS(t,n,c)}a=a.next}while(a!==r)}}function ux(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function PS(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _6(e){var t=e.alternate;t!==null&&(e.alternate=null,_6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ql],delete t[Ly],delete t[mS],delete t[N8],delete t[U8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function v6(e){return e.tag===5||e.tag===3||e.tag===4}function AA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function IS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=d1));else if(r!==4&&(e=e.child,e!==null))for(IS(e,t,n),e=e.sibling;e!==null;)IS(e,t,n),e=e.sibling}function MS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(MS(e,t,n),e=e.sibling;e!==null;)MS(e,t,n),e=e.sibling}var ko=null,fl=!1;function ih(e,t,n){for(n=n.child;n!==null;)x6(e,t,n),n=n.sibling}function x6(e,t,n){if(nu&&typeof nu.onCommitFiberUnmount=="function")try{nu.onCommitFiberUnmount(tx,n)}catch{}switch(n.tag){case 5:Wo||Ip(n,t);case 6:var r=ko,a=fl;ko=null,ih(e,t,n),ko=r,fl=a,ko!==null&&(fl?(e=ko,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ko.removeChild(n.stateNode));break;case 18:ko!==null&&(fl?(e=ko,n=n.stateNode,e.nodeType===8?Hw(e.parentNode,n):e.nodeType===1&&Hw(e,n),Ay(e)):Hw(ko,n.stateNode));break;case 4:r=ko,a=fl,ko=n.stateNode.containerInfo,fl=!0,ih(e,t,n),ko=r,fl=a;break;case 0:case 11:case 14:case 15:if(!Wo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&TS(n,t,d),a=a.next}while(a!==r)}ih(e,t,n);break;case 1:if(!Wo&&(Ip(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Si(n,t,l)}ih(e,t,n);break;case 21:ih(e,t,n);break;case 22:n.mode&1?(Wo=(r=Wo)||n.memoizedState!==null,ih(e,t,n),Wo=r):ih(e,t,n);break;default:ih(e,t,n)}}function TA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rz),t.forEach(function(r){var a=dz.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function ll(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var c=e,d=t,l=d;e:for(;l!==null;){switch(l.tag){case 5:ko=l.stateNode,fl=!1;break e;case 3:ko=l.stateNode.containerInfo,fl=!0;break e;case 4:ko=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(ko===null)throw Error(St(160));x6(c,d,a),ko=null,fl=!1;var x=a.alternate;x!==null&&(x.return=null),a.return=null}catch(b){Si(a,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)b6(t,e),t=t.sibling}function b6(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ll(t,e),Kl(e),r&4){try{hy(3,e,e.return),ux(3,e)}catch(N){Si(e,e.return,N)}try{hy(5,e,e.return)}catch(N){Si(e,e.return,N)}}break;case 1:ll(t,e),Kl(e),r&512&&n!==null&&Ip(n,n.return);break;case 5:if(ll(t,e),Kl(e),r&512&&n!==null&&Ip(n,n.return),e.flags&32){var a=e.stateNode;try{Sy(a,"")}catch(N){Si(e,e.return,N)}}if(r&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=n!==null?n.memoizedProps:c,l=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{l==="input"&&c.type==="radio"&&c.name!=null&&jP(a,c),tS(l,d);var b=tS(l,c);for(d=0;d<x.length;d+=2){var E=x[d],A=x[d+1];E==="style"?WP(a,A):E==="dangerouslySetInnerHTML"?GP(a,A):E==="children"?Sy(a,A):QC(a,E,A,b)}switch(l){case"input":X2(a,c);break;case"textarea":VP(a,c);break;case"select":var L=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var F=c.value;F!=null?Rp(a,!!c.multiple,F,!1):L!==!!c.multiple&&(c.defaultValue!=null?Rp(a,!!c.multiple,c.defaultValue,!0):Rp(a,!!c.multiple,c.multiple?[]:"",!1))}a[Ly]=c}catch(N){Si(e,e.return,N)}}break;case 6:if(ll(t,e),Kl(e),r&4){if(e.stateNode===null)throw Error(St(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(N){Si(e,e.return,N)}}break;case 3:if(ll(t,e),Kl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ay(t.containerInfo)}catch(N){Si(e,e.return,N)}break;case 4:ll(t,e),Kl(e);break;case 13:ll(t,e),Kl(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(LE=Ii())),r&4&&TA(e);break;case 22:if(E=n!==null&&n.memoizedState!==null,e.mode&1?(Wo=(b=Wo)||E,ll(t,e),Wo=b):ll(t,e),Kl(e),r&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!E&&e.mode&1)for(Kt=e,E=e.child;E!==null;){for(A=Kt=E;Kt!==null;){switch(L=Kt,F=L.child,L.tag){case 0:case 11:case 14:case 15:hy(4,L,L.return);break;case 1:Ip(L,L.return);var $=L.stateNode;if(typeof $.componentWillUnmount=="function"){r=L,n=L.return;try{t=r,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(N){Si(r,n,N)}}break;case 5:Ip(L,L.return);break;case 22:if(L.memoizedState!==null){IA(A);continue}}F!==null?(F.return=L,Kt=F):IA(A)}E=E.sibling}e:for(E=null,A=e;;){if(A.tag===5){if(E===null){E=A;try{a=A.stateNode,b?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(l=A.stateNode,x=A.memoizedProps.style,d=x!=null&&x.hasOwnProperty("display")?x.display:null,l.style.display=HP("display",d))}catch(N){Si(e,e.return,N)}}}else if(A.tag===6){if(E===null)try{A.stateNode.nodeValue=b?"":A.memoizedProps}catch(N){Si(e,e.return,N)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;E===A&&(E=null),A=A.return}E===A&&(E=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ll(t,e),Kl(e),r&4&&TA(e);break;case 21:break;default:ll(t,e),Kl(e)}}function Kl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(v6(n)){var r=n;break e}n=n.return}throw Error(St(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Sy(a,""),r.flags&=-33);var c=AA(e);MS(e,c,a);break;case 3:case 4:var d=r.stateNode.containerInfo,l=AA(e);IS(e,l,d);break;default:throw Error(St(161))}}catch(x){Si(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oz(e,t,n){Kt=e,w6(e)}function w6(e,t,n){for(var r=(e.mode&1)!==0;Kt!==null;){var a=Kt,c=a.child;if(a.tag===22&&r){var d=a.memoizedState!==null||iv;if(!d){var l=a.alternate,x=l!==null&&l.memoizedState!==null||Wo;l=iv;var b=Wo;if(iv=d,(Wo=x)&&!b)for(Kt=a;Kt!==null;)d=Kt,x=d.child,d.tag===22&&d.memoizedState!==null?MA(a):x!==null?(x.return=d,Kt=x):MA(a);for(;c!==null;)Kt=c,w6(c),c=c.sibling;Kt=a,iv=l,Wo=b}PA(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Kt=c):PA(e)}}function PA(e){for(;Kt!==null;){var t=Kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wo||ux(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Wo)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:hl(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&fA(t,c,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fA(t,d,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var E=b.memoizedState;if(E!==null){var A=E.dehydrated;A!==null&&Ay(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}Wo||t.flags&512&&PS(t)}catch(L){Si(t,t.return,L)}}if(t===e){Kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function IA(e){for(;Kt!==null;){var t=Kt;if(t===e){Kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function MA(e){for(;Kt!==null;){var t=Kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ux(4,t)}catch(x){Si(t,n,x)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(x){Si(t,a,x)}}var c=t.return;try{PS(t)}catch(x){Si(t,c,x)}break;case 5:var d=t.return;try{PS(t)}catch(x){Si(t,d,x)}}}catch(x){Si(t,t.return,x)}if(t===e){Kt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Kt=l;break}Kt=t.return}}var az=Math.ceil,C1=oc.ReactCurrentDispatcher,IE=oc.ReactCurrentOwner,Es=oc.ReactCurrentBatchConfig,ur=0,po=null,qi=null,To=0,Ha=0,Mp=Dh(0),to=0,By=null,Xf=0,cx=0,ME=0,fy=null,Aa=null,LE=0,Yp=1/0,qu=null,E1=!1,LS=null,Sh=null,ov=!1,ph=null,k1=0,dy=0,OS=null,Hv=-1,Wv=0;function ua(){return ur&6?Ii():Hv!==-1?Hv:Hv=Ii()}function Ch(e){return e.mode&1?ur&2&&To!==0?To&-To:V8.transition!==null?(Wv===0&&(Wv=oI()),Wv):(e=kr,e!==0||(e=window.event,e=e===void 0?16:fI(e.type)),e):1}function gl(e,t,n,r){if(50<dy)throw dy=0,OS=null,Error(St(185));n_(e,n,r),(!(ur&2)||e!==po)&&(e===po&&(!(ur&2)&&(cx|=n),to===4&&hh(e,To)),Ma(e,r),n===1&&ur===0&&!(t.mode&1)&&(Yp=Ii()+500,ax&&zh()))}function Ma(e,t){var n=e.callbackNode;VD(e,t);var r=u1(e,e===po?To:0);if(r===0)n!==null&&N3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&N3(n),t===1)e.tag===0?j8(LA.bind(null,e)):MI(LA.bind(null,e)),B8(function(){!(ur&6)&&zh()}),n=null;else{switch(aI(r)){case 1:n=iE;break;case 4:n=rI;break;case 16:n=l1;break;case 536870912:n=iI;break;default:n=l1}n=I6(n,S6.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function S6(e,t){if(Hv=-1,Wv=0,ur&6)throw Error(St(327));var n=e.callbackNode;if(Np()&&e.callbackNode!==n)return null;var r=u1(e,e===po?To:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=A1(e,r);else{t=r;var a=ur;ur|=2;var c=E6();(po!==e||To!==t)&&(qu=null,Yp=Ii()+500,jf(e,t));do try{uz();break}catch(l){C6(e,l)}while(1);yE(),C1.current=c,ur=a,qi!==null?t=0:(po=null,To=0,t=to)}if(t!==0){if(t===2&&(a=aS(e),a!==0&&(r=a,t=FS(e,a))),t===1)throw n=By,jf(e,0),hh(e,r),Ma(e,Ii()),n;if(t===6)hh(e,r);else{if(a=e.current.alternate,!(r&30)&&!sz(a)&&(t=A1(e,r),t===2&&(c=aS(e),c!==0&&(r=c,t=FS(e,c))),t===1))throw n=By,jf(e,0),hh(e,r),Ma(e,Ii()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(St(345));case 2:Lf(e,Aa,qu);break;case 3:if(hh(e,r),(r&130023424)===r&&(t=LE+500-Ii(),10<t)){if(u1(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ua(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pS(Lf.bind(null,e,Aa,qu),t);break}Lf(e,Aa,qu);break;case 4:if(hh(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var d=31-ml(r);c=1<<d,d=t[d],d>a&&(a=d),r&=~c}if(r=a,r=Ii()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*az(r/1960))-r,10<r){e.timeoutHandle=pS(Lf.bind(null,e,Aa,qu),r);break}Lf(e,Aa,qu);break;case 5:Lf(e,Aa,qu);break;default:throw Error(St(329))}}}return Ma(e,Ii()),e.callbackNode===n?S6.bind(null,e):null}function FS(e,t){var n=fy;return e.current.memoizedState.isDehydrated&&(jf(e,t).flags|=256),e=A1(e,t),e!==2&&(t=Aa,Aa=n,t!==null&&RS(t)),e}function RS(e){Aa===null?Aa=e:Aa.push.apply(Aa,e)}function sz(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],c=a.getSnapshot;a=a.value;try{if(!vl(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hh(e,t){for(t&=~ME,t&=~cx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ml(t),r=1<<n;e[n]=-1,t&=~r}}function LA(e){if(ur&6)throw Error(St(327));Np();var t=u1(e,0);if(!(t&1))return Ma(e,Ii()),null;var n=A1(e,t);if(e.tag!==0&&n===2){var r=aS(e);r!==0&&(t=r,n=FS(e,r))}if(n===1)throw n=By,jf(e,0),hh(e,t),Ma(e,Ii()),n;if(n===6)throw Error(St(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lf(e,Aa,qu),Ma(e,Ii()),null}function OE(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(Yp=Ii()+500,ax&&zh())}}function Yf(e){ph!==null&&ph.tag===0&&!(ur&6)&&Np();var t=ur;ur|=1;var n=Es.transition,r=kr;try{if(Es.transition=null,kr=1,e)return e()}finally{kr=r,Es.transition=n,ur=t,!(ur&6)&&zh()}}function FE(){Ha=Mp.current,Xr(Mp)}function jf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,z8(n)),qi!==null)for(n=qi.return;n!==null;){var r=n;switch(pE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&p1();break;case 3:Kp(),Xr(Pa),Xr(Ko),SE();break;case 5:wE(r);break;case 4:Kp();break;case 13:Xr(di);break;case 19:Xr(di);break;case 10:_E(r.type._context);break;case 22:case 23:FE()}n=n.return}if(po=e,qi=e=Eh(e.current,null),To=Ha=t,to=0,By=null,ME=cx=Xf=0,Aa=fy=null,$f!==null){for(t=0;t<$f.length;t++)if(n=$f[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,c=n.pending;if(c!==null){var d=c.next;c.next=a,r.next=d}n.pending=r}$f=null}return e}function C6(e,t){do{var n=qi;try{if(yE(),Vv.current=S1,w1){for(var r=pi.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}w1=!1}if(Kf=0,fo=eo=pi=null,cy=!1,Ry=0,IE.current=null,n===null||n.return===null){to=1,By=t,qi=null;break}e:{var c=e,d=n.return,l=n,x=t;if(t=To,l.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var b=x,E=l,A=E.tag;if(!(E.mode&1)&&(A===0||A===11||A===15)){var L=E.alternate;L?(E.updateQueue=L.updateQueue,E.memoizedState=L.memoizedState,E.lanes=L.lanes):(E.updateQueue=null,E.memoizedState=null)}var F=vA(d);if(F!==null){F.flags&=-257,xA(F,d,l,c,t),F.mode&1&&_A(c,b,t),t=F,x=b;var $=t.updateQueue;if($===null){var N=new Set;N.add(x),t.updateQueue=N}else $.add(x);break e}else{if(!(t&1)){_A(c,b,t),RE();break e}x=Error(St(426))}}else if(Yr&&l.mode&1){var Z=vA(d);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),xA(Z,d,l,c,t),mE(Xp(x,l));break e}}c=x=Xp(x,l),to!==4&&(to=2),fy===null?fy=[c]:fy.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var R=s6(c,x,t);hA(c,R);break e;case 1:l=x;var q=c.type,G=c.stateNode;if(!(c.flags&128)&&(typeof q.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Sh===null||!Sh.has(G)))){c.flags|=65536,t&=-t,c.lanes|=t;var Q=l6(c,l,t);hA(c,Q);break e}}c=c.return}while(c!==null)}A6(n)}catch(se){t=se,qi===n&&n!==null&&(qi=n=n.return);continue}break}while(1)}function E6(){var e=C1.current;return C1.current=S1,e===null?S1:e}function RE(){(to===0||to===3||to===2)&&(to=4),po===null||!(Xf&268435455)&&!(cx&268435455)||hh(po,To)}function A1(e,t){var n=ur;ur|=2;var r=E6();(po!==e||To!==t)&&(qu=null,jf(e,t));do try{lz();break}catch(a){C6(e,a)}while(1);if(yE(),ur=n,C1.current=r,qi!==null)throw Error(St(261));return po=null,To=0,to}function lz(){for(;qi!==null;)k6(qi)}function uz(){for(;qi!==null&&!FD();)k6(qi)}function k6(e){var t=P6(e.alternate,e,Ha);e.memoizedProps=e.pendingProps,t===null?A6(e):qi=t,IE.current=null}function A6(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nz(n,t),n!==null){n.flags&=32767,qi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{to=6,qi=null;return}}else if(n=tz(n,t,Ha),n!==null){qi=n;return}if(t=t.sibling,t!==null){qi=t;return}qi=t=e}while(t!==null);to===0&&(to=5)}function Lf(e,t,n){var r=kr,a=Es.transition;try{Es.transition=null,kr=1,cz(e,t,n,r)}finally{Es.transition=a,kr=r}return null}function cz(e,t,n,r){do Np();while(ph!==null);if(ur&6)throw Error(St(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(St(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(qD(e,c),e===po&&(qi=po=null,To=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ov||(ov=!0,I6(l1,function(){return Np(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Es.transition,Es.transition=null;var d=kr;kr=1;var l=ur;ur|=4,IE.current=null,iz(e,n),b6(n,e),I8(fS),c1=!!hS,fS=hS=null,e.current=n,oz(n),RD(),ur=l,kr=d,Es.transition=c}else e.current=n;if(ov&&(ov=!1,ph=e,k1=a),c=e.pendingLanes,c===0&&(Sh=null),BD(n.stateNode),Ma(e,Ii()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(E1)throw E1=!1,e=LS,LS=null,e;return k1&1&&e.tag!==0&&Np(),c=e.pendingLanes,c&1?e===OS?dy++:(dy=0,OS=e):dy=0,zh(),null}function Np(){if(ph!==null){var e=aI(k1),t=Es.transition,n=kr;try{if(Es.transition=null,kr=16>e?16:e,ph===null)var r=!1;else{if(e=ph,ph=null,k1=0,ur&6)throw Error(St(331));var a=ur;for(ur|=4,Kt=e.current;Kt!==null;){var c=Kt,d=c.child;if(Kt.flags&16){var l=c.deletions;if(l!==null){for(var x=0;x<l.length;x++){var b=l[x];for(Kt=b;Kt!==null;){var E=Kt;switch(E.tag){case 0:case 11:case 15:hy(8,E,c)}var A=E.child;if(A!==null)A.return=E,Kt=A;else for(;Kt!==null;){E=Kt;var L=E.sibling,F=E.return;if(_6(E),E===b){Kt=null;break}if(L!==null){L.return=F,Kt=L;break}Kt=F}}}var $=c.alternate;if($!==null){var N=$.child;if(N!==null){$.child=null;do{var Z=N.sibling;N.sibling=null,N=Z}while(N!==null)}}Kt=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,Kt=d;else e:for(;Kt!==null;){if(c=Kt,c.flags&2048)switch(c.tag){case 0:case 11:case 15:hy(9,c,c.return)}var R=c.sibling;if(R!==null){R.return=c.return,Kt=R;break e}Kt=c.return}}var q=e.current;for(Kt=q;Kt!==null;){d=Kt;var G=d.child;if(d.subtreeFlags&2064&&G!==null)G.return=d,Kt=G;else e:for(d=q;Kt!==null;){if(l=Kt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ux(9,l)}}catch(se){Si(l,l.return,se)}if(l===d){Kt=null;break e}var Q=l.sibling;if(Q!==null){Q.return=l.return,Kt=Q;break e}Kt=l.return}}if(ur=a,zh(),nu&&typeof nu.onPostCommitFiberRoot=="function")try{nu.onPostCommitFiberRoot(tx,e)}catch{}r=!0}return r}finally{kr=n,Es.transition=t}}return!1}function OA(e,t,n){t=Xp(n,t),t=s6(e,t,1),e=wh(e,t,1),t=ua(),e!==null&&(n_(e,1,t),Ma(e,t))}function Si(e,t,n){if(e.tag===3)OA(e,e,n);else for(;t!==null;){if(t.tag===3){OA(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sh===null||!Sh.has(r))){e=Xp(n,e),e=l6(t,e,1),t=wh(t,e,1),e=ua(),t!==null&&(n_(t,1,e),Ma(t,e));break}}t=t.return}}function hz(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ua(),e.pingedLanes|=e.suspendedLanes&n,po===e&&(To&n)===n&&(to===4||to===3&&(To&130023424)===To&&500>Ii()-LE?jf(e,0):ME|=n),Ma(e,t)}function T6(e,t){t===0&&(e.mode&1?(t=K0,K0<<=1,!(K0&130023424)&&(K0=4194304)):t=1);var n=ua();e=tc(e,t),e!==null&&(n_(e,t,n),Ma(e,n))}function fz(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),T6(e,n)}function dz(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(St(314))}r!==null&&r.delete(t),T6(e,n)}var P6;P6=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pa.current)Ta=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ta=!1,ez(e,t,n);Ta=!!(e.flags&131072)}else Ta=!1,Yr&&t.flags&1048576&&LI(t,y1,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gv(e,t),e=t.pendingProps;var a=Hp(t,Ko.current);$p(t,n),a=EE(null,t,r,e,a,n);var c=kE();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(r)?(c=!0,m1(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,xE(t),a.updater=sx,t.stateNode=a,a._reactInternals=t,bS(t,r,e,n),t=CS(null,t,r,!0,c,n)):(t.tag=0,Yr&&c&&dE(t),la(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=mz(r),e=hl(r,e),a){case 0:t=SS(null,t,r,e,n);break e;case 1:t=SA(null,t,r,e,n);break e;case 11:t=bA(null,t,r,e,n);break e;case 14:t=wA(null,t,r,hl(r.type,e),n);break e}throw Error(St(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),SS(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),SA(e,t,r,a,n);case 3:e:{if(f6(t),e===null)throw Error(St(387));r=t.pendingProps,c=t.memoizedState,a=c.element,DI(e,t),x1(t,r,null,n);var d=t.memoizedState;if(r=d.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Xp(Error(St(423)),t),t=CA(e,t,r,n,a);break e}else if(r!==a){a=Xp(Error(St(424)),t),t=CA(e,t,r,n,a);break e}else for(Wa=bh(t.stateNode.containerInfo.firstChild),Ya=t,Yr=!0,dl=null,n=NI(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wp(),r===a){t=nc(e,t,n);break e}la(e,t,r,n)}t=t.child}return t;case 5:return UI(t),e===null&&_S(t),r=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,dS(r,a)?d=null:c!==null&&dS(r,c)&&(t.flags|=32),h6(e,t),la(e,t,d,n),t.child;case 6:return e===null&&_S(t),null;case 13:return d6(e,t,n);case 4:return bE(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zp(t,null,r,n):la(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),bA(e,t,r,a,n);case 7:return la(e,t,t.pendingProps,n),t.child;case 8:return la(e,t,t.pendingProps.children,n),t.child;case 12:return la(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,c=t.memoizedProps,d=a.value,Ur(_1,r._currentValue),r._currentValue=d,c!==null)if(vl(c.value,d)){if(c.children===a.children&&!Pa.current){t=nc(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var l=c.dependencies;if(l!==null){d=c.child;for(var x=l.firstContext;x!==null;){if(x.context===r){if(c.tag===1){x=Ju(-1,n&-n),x.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var E=b.pending;E===null?x.next=x:(x.next=E.next,E.next=x),b.pending=x}}c.lanes|=n,x=c.alternate,x!==null&&(x.lanes|=n),vS(c.return,n,t),l.lanes|=n;break}x=x.next}}else if(c.tag===10)d=c.type===t.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(St(341));d.lanes|=n,l=d.alternate,l!==null&&(l.lanes|=n),vS(d,n,t),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===t){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}la(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,$p(t,n),a=As(a),r=r(a),t.flags|=1,la(e,t,r,n),t.child;case 14:return r=t.type,a=hl(r,t.pendingProps),a=hl(r.type,a),wA(e,t,r,a,n);case 15:return u6(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),Gv(e,t),t.tag=1,Ia(r)?(e=!0,m1(t)):e=!1,$p(t,n),BI(t,r,a),bS(t,r,a,n),CS(null,t,r,!0,e,n);case 19:return p6(e,t,n);case 22:return c6(e,t,n)}throw Error(St(156,t.tag))};function I6(e,t){return nI(e,t)}function pz(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(e,t,n,r){return new pz(e,t,n,r)}function DE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mz(e){if(typeof e=="function")return DE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tE)return 11;if(e===nE)return 14}return 2}function Eh(e,t){var n=e.alternate;return n===null?(n=Cs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zv(e,t,n,r,a,c){var d=2;if(r=e,typeof e=="function")DE(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case bp:return Vf(n.children,a,c,t);case eE:d=8,a|=8;break;case G2:return e=Cs(12,n,t,a|2),e.elementType=G2,e.lanes=c,e;case H2:return e=Cs(13,n,t,a),e.elementType=H2,e.lanes=c,e;case W2:return e=Cs(19,n,t,a),e.elementType=W2,e.lanes=c,e;case $P:return hx(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zP:d=10;break e;case BP:d=9;break e;case tE:d=11;break e;case nE:d=14;break e;case sh:d=16,r=null;break e}throw Error(St(130,e==null?e:typeof e,""))}return t=Cs(d,n,t,a),t.elementType=e,t.type=r,t.lanes=c,t}function Vf(e,t,n,r){return e=Cs(7,e,r,t),e.lanes=n,e}function hx(e,t,n,r){return e=Cs(22,e,r,t),e.elementType=$P,e.lanes=n,e.stateNode={isHidden:!1},e}function e2(e,t,n){return e=Cs(6,e,null,t),e.lanes=n,e}function t2(e,t,n){return t=Cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gz(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rw(0),this.expirationTimes=Rw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rw(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zE(e,t,n,r,a,c,d,l,x){return e=new gz(e,t,n,l,x),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Cs(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xE(c),e}function yz(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xp,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function M6(e){if(!e)return Mh;e=e._reactInternals;e:{if(ed(e)!==e||e.tag!==1)throw Error(St(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(St(171))}if(e.tag===1){var n=e.type;if(Ia(n))return II(e,n,t)}return t}function L6(e,t,n,r,a,c,d,l,x){return e=zE(n,r,!0,e,a,c,d,l,x),e.context=M6(null),n=e.current,r=ua(),a=Ch(n),c=Ju(r,a),c.callback=t??null,wh(n,c,a),e.current.lanes=a,n_(e,a,r),Ma(e,r),e}function fx(e,t,n,r){var a=t.current,c=ua(),d=Ch(a);return n=M6(n),t.context===null?t.context=n:t.pendingContext=n,t=Ju(c,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=wh(a,t,d),e!==null&&(gl(e,a,d,c),jv(e,a,d)),d}function T1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function FA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function BE(e,t){FA(e,t),(e=e.alternate)&&FA(e,t)}function _z(){return null}var O6=typeof reportError=="function"?reportError:function(e){console.error(e)};function $E(e){this._internalRoot=e}dx.prototype.render=$E.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(St(409));fx(e,t,null,null)};dx.prototype.unmount=$E.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yf(function(){fx(null,e,null,null)}),t[ec]=null}};function dx(e){this._internalRoot=e}dx.prototype.unstable_scheduleHydration=function(e){if(e){var t=uI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ch.length&&t!==0&&t<ch[n].priority;n++);ch.splice(n,0,e),n===0&&hI(e)}};function NE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function px(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function RA(){}function vz(e,t,n,r,a){if(a){if(typeof r=="function"){var c=r;r=function(){var b=T1(d);c.call(b)}}var d=L6(t,r,e,0,null,!1,!1,"",RA);return e._reactRootContainer=d,e[ec]=d.current,Iy(e.nodeType===8?e.parentNode:e),Yf(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var b=T1(x);l.call(b)}}var x=zE(e,0,!1,null,null,!1,!1,"",RA);return e._reactRootContainer=x,e[ec]=x.current,Iy(e.nodeType===8?e.parentNode:e),Yf(function(){fx(t,x,n,r)}),x}function mx(e,t,n,r,a){var c=n._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var l=a;a=function(){var x=T1(d);l.call(x)}}fx(t,d,e,a)}else d=vz(n,t,e,a,r);return T1(d)}sI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ey(t.pendingLanes);n!==0&&(oE(t,n|1),Ma(t,Ii()),!(ur&6)&&(Yp=Ii()+500,zh()))}break;case 13:Yf(function(){var r=tc(e,1);if(r!==null){var a=ua();gl(r,e,1,a)}}),BE(e,1)}};aE=function(e){if(e.tag===13){var t=tc(e,134217728);if(t!==null){var n=ua();gl(t,e,134217728,n)}BE(e,134217728)}};lI=function(e){if(e.tag===13){var t=Ch(e),n=tc(e,t);if(n!==null){var r=ua();gl(n,e,t,r)}BE(e,t)}};uI=function(){return kr};cI=function(e,t){var n=kr;try{return kr=e,t()}finally{kr=n}};rS=function(e,t,n){switch(t){case"input":if(X2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ox(r);if(!a)throw Error(St(90));UP(r),X2(r,a)}}}break;case"textarea":VP(e,n);break;case"select":t=n.value,t!=null&&Rp(e,!!n.multiple,t,!1)}};XP=OE;YP=Yf;var xz={usingClientEntryPoint:!1,Events:[i_,Ep,ox,ZP,KP,OE]},Dg={findFiberByHostInstance:Bf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bz={bundleType:Dg.bundleType,version:Dg.version,rendererPackageName:Dg.rendererPackageName,rendererConfig:Dg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eI(e),e===null?null:e.stateNode},findFiberByHostInstance:Dg.findFiberByHostInstance||_z,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var av=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!av.isDisabled&&av.supportsFiber)try{tx=av.inject(bz),nu=av}catch{}}Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xz;Qa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NE(t))throw Error(St(200));return yz(e,t,null,n)};Qa.createRoot=function(e,t){if(!NE(e))throw Error(St(299));var n=!1,r="",a=O6;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=zE(e,1,!1,null,null,n,!1,r,a),e[ec]=t.current,Iy(e.nodeType===8?e.parentNode:e),new $E(t)};Qa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(St(188)):(e=Object.keys(e).join(","),Error(St(268,e)));return e=eI(t),e=e===null?null:e.stateNode,e};Qa.flushSync=function(e){return Yf(e)};Qa.hydrate=function(e,t,n){if(!px(t))throw Error(St(200));return mx(null,e,t,!0,n)};Qa.hydrateRoot=function(e,t,n){if(!NE(e))throw Error(St(405));var r=n!=null&&n.hydratedSources||null,a=!1,c="",d=O6;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=L6(t,null,e,1,n??null,a,!1,c,d),e[ec]=t.current,Iy(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new dx(t)};Qa.render=function(e,t,n){if(!px(t))throw Error(St(200));return mx(null,e,t,!1,n)};Qa.unmountComponentAtNode=function(e){if(!px(e))throw Error(St(40));return e._reactRootContainer?(Yf(function(){mx(null,null,e,!1,function(){e._reactRootContainer=null,e[ec]=null})}),!0):!1};Qa.unstable_batchedUpdates=OE;Qa.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!px(n))throw Error(St(200));if(e==null||e._reactInternals===void 0)throw Error(St(38));return mx(e,t,n,!1,r)};Qa.version="18.2.0-next-9e3b772b8-20220608";function F6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F6)}catch(e){console.error(e)}}F6(),LP.exports=Qa;var UE=LP.exports;const sv=ic(UE);var jE,DA=UE;jE=V2.createRoot=DA.createRoot,V2.hydrateRoot=DA.hydrateRoot;var VE={};Object.defineProperty(VE,"__esModule",{value:!0});VE.getDomContainer=wz;function wz(e){if(!e)return zA();var t=document.querySelector(e);return t||(console.warn('Query selector "'.concat(e,`" doesn't match any existing DOM element. `)+"Are you using a custom HTML template? "+'Add an element matching "'.concat(e,'" to your template or change the containerQuerySelector setting.')),zA())}function zA(){return document.getElementById("root")||Sz()}function Sz(){var e=document.createElement("div");return e.setAttribute("id","root"),document.body.appendChild(e),e}var qE={},R6={},gx={},GE={},HE={},P1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */P1.exports;(function(e,t){(function(){var n,r="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",l="Invalid `variable` option passed into `_.template`",x="__lodash_hash_undefined__",b=500,E="__lodash_placeholder__",A=1,L=2,F=4,$=1,N=2,Z=1,R=2,q=4,G=8,Q=16,se=32,ee=64,oe=128,xe=256,Oe=512,Le=30,qe="...",$e=800,nt=16,pt=1,At=2,zt=3,Vt=1/0,Ve=9007199254740991,_e=17976931348623157e292,we=0/0,K=4294967295,ae=K-1,lt=K>>>1,gt=[["ary",oe],["bind",Z],["bindKey",R],["curry",G],["curryRight",Q],["flip",Oe],["partial",se],["partialRight",ee],["rearg",xe]],Gt="[object Arguments]",Dt="[object Array]",Qt="[object AsyncFunction]",un="[object Boolean]",Xn="[object Date]",Qn="[object DOMException]",Bn="[object Error]",ei="[object Function]",Je="[object GeneratorFunction]",yr="[object Map]",Gi="[object Number]",Gn="[object Null]",_n="[object Object]",_o="[object Promise]",Mo="[object Proxy]",Lo="[object RegExp]",ti="[object Set]",Yn="[object String]",Oo="[object Symbol]",vo="[object Undefined]",vt="[object WeakMap]",ni="[object WeakSet]",We="[object ArrayBuffer]",le="[object DataView]",Fe="[object Float32Array]",Pe="[object Float64Array]",rt="[object Int8Array]",bt="[object Int16Array]",vn="[object Int32Array]",Wt="[object Uint8Array]",xt="[object Uint8ClampedArray]",$n="[object Uint16Array]",jn="[object Uint32Array]",bn=/\b__p \+= '';/g,_r=/\b(__p \+=) '' \+/g,Mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,On=/&(?:amp|lt|gt|quot|#39);/g,La=/[&<>"']/g,ri=RegExp(On.source),wr=RegExp(La.source),ye=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,Te=RegExp(Re.source),Ae=/^\s+/,Ne=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,Jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fn=/[()=,{}\[\]\/\s]/,jt=/\\(\\)?/g,Zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rn=/\w*$/,Hn=/^[-+]0x[0-9a-f]+$/i,Wn=/^0b[01]+$/i,Fn=/^\[object .+?Constructor\]$/,Nn=/^0o[0-7]+$/i,wn=/^(?:0|[1-9]\d*)$/,cr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lr=/($^)/,pr=/['\n\r\u2028\u2029\\]/g,Pr="\\ud800-\\udfff",Fo="\\u0300-\\u036f",ld="\\ufe20-\\ufe2f",rs="\\u20d0-\\u20ff",jr=Fo+ld+rs,Sl="\\u2700-\\u27bf",is="a-z\\xdf-\\xf6\\xf8-\\xff",ii="\\xac\\xb1\\xd7\\xf7",zs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yo="\\u2000-\\u206f",ud=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oa="A-Z\\xc0-\\xd6\\xd8-\\xde",Bs="\\ufe0e\\ufe0f",cu=ii+zs+Yo+ud,os="[']",as="["+Pr+"]",Ln="["+cu+"]",Cl="["+jr+"]",$s="\\d+",gm="["+Sl+"]",Nh="["+is+"]",hu="[^"+Pr+cu+$s+Sl+is+Oa+"]",Uh="\\ud83c[\\udffb-\\udfff]",jh="(?:"+Cl+"|"+Uh+")",Vh="[^"+Pr+"]",lc="(?:\\ud83c[\\udde6-\\uddff]){2}",qh="[\\ud800-\\udbff][\\udc00-\\udfff]",ss="["+Oa+"]",Gh="\\u200d",uc="(?:"+Nh+"|"+hu+")",Hh="(?:"+ss+"|"+hu+")",Wh="(?:"+os+"(?:d|ll|m|re|s|t|ve))?",ls="(?:"+os+"(?:D|LL|M|RE|S|T|VE))?",Ns=jh+"?",xo="["+Bs+"]?",cc="(?:"+Gh+"(?:"+[Vh,lc,qh].join("|")+")"+xo+Ns+")*",hc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",El="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kl=xo+Ns+cc,fc="(?:"+[gm,lc,qh].join("|")+")"+kl,fu="(?:"+[Vh+Cl+"?",Cl,lc,qh,as].join("|")+")",Al=RegExp(os,"g"),du=RegExp(Cl,"g"),Hi=RegExp(Uh+"(?="+Uh+")|"+fu+kl,"g"),bo=RegExp([ss+"?"+Nh+"+"+Wh+"(?="+[Ln,ss,"$"].join("|")+")",Hh+"+"+ls+"(?="+[Ln,ss+uc,"$"].join("|")+")",ss+"?"+uc+"+"+Wh,ss+"+"+ls,El,hc,$s,fc].join("|"),"g"),Zh=RegExp("["+Gh+Pr+jr+Bs+"]"),dc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kh=-1,mr={};mr[Fe]=mr[Pe]=mr[rt]=mr[bt]=mr[vn]=mr[Wt]=mr[xt]=mr[$n]=mr[jn]=!0,mr[Gt]=mr[Dt]=mr[We]=mr[un]=mr[le]=mr[Xn]=mr[Bn]=mr[ei]=mr[yr]=mr[Gi]=mr[_n]=mr[Lo]=mr[ti]=mr[Yn]=mr[vt]=!1;var er={};er[Gt]=er[Dt]=er[We]=er[le]=er[un]=er[Xn]=er[Fe]=er[Pe]=er[rt]=er[bt]=er[vn]=er[yr]=er[Gi]=er[_n]=er[Lo]=er[ti]=er[Yn]=er[Oo]=er[Wt]=er[xt]=er[$n]=er[jn]=!0,er[Bn]=er[ei]=er[vt]=!1;var Tl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Vn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hd=parseFloat,Pl=parseInt,fd=typeof Ss=="object"&&Ss&&Ss.Object===Object&&Ss,ym=typeof self=="object"&&self&&self.Object===Object&&self,Ei=fd||ym||Function("return this")(),Xh=t&&!t.nodeType&&t,Us=Xh&&!0&&e&&!e.nodeType&&e,dd=Us&&Us.exports===Xh,pu=dd&&fd.process,Wi=function(){try{var De=Us&&Us.require&&Us.require("util").types;return De||pu&&pu.binding&&pu.binding("util")}catch{}}(),gc=Wi&&Wi.isArrayBuffer,yc=Wi&&Wi.isDate,js=Wi&&Wi.isMap,Yh=Wi&&Wi.isRegExp,Jh=Wi&&Wi.isSet,_c=Wi&&Wi.isTypedArray;function oi(De,Qe,Ye){switch(Ye.length){case 0:return De.call(Qe);case 1:return De.call(Qe,Ye[0]);case 2:return De.call(Qe,Ye[0],Ye[1]);case 3:return De.call(Qe,Ye[0],Ye[1],Ye[2])}return De.apply(Qe,Ye)}function pd(De,Qe,Ye,Tt){for(var ln=-1,tr=De==null?0:De.length;++ln<tr;){var ai=De[ln];Qe(Tt,ai,Ye(ai),De)}return Tt}function ki(De,Qe){for(var Ye=-1,Tt=De==null?0:De.length;++Ye<Tt&&Qe(De[Ye],Ye,De)!==!1;);return De}function Il(De,Qe){for(var Ye=De==null?0:De.length;Ye--&&Qe(De[Ye],Ye,De)!==!1;);return De}function Qh(De,Qe){for(var Ye=-1,Tt=De==null?0:De.length;++Ye<Tt;)if(!Qe(De[Ye],Ye,De))return!1;return!0}function pa(De,Qe){for(var Ye=-1,Tt=De==null?0:De.length,ln=0,tr=[];++Ye<Tt;){var ai=De[Ye];Qe(ai,Ye,De)&&(tr[ln++]=ai)}return tr}function qn(De,Qe){var Ye=De==null?0:De.length;return!!Ye&&hr(De,Qe,0)>-1}function Ml(De,Qe,Ye){for(var Tt=-1,ln=De==null?0:De.length;++Tt<ln;)if(Ye(Qe,De[Tt]))return!0;return!1}function Ir(De,Qe){for(var Ye=-1,Tt=De==null?0:De.length,ln=Array(Tt);++Ye<Tt;)ln[Ye]=Qe(De[Ye],Ye,De);return ln}function Fa(De,Qe){for(var Ye=-1,Tt=Qe.length,ln=De.length;++Ye<Tt;)De[ln+Ye]=Qe[Ye];return De}function Vs(De,Qe,Ye,Tt){var ln=-1,tr=De==null?0:De.length;for(Tt&&tr&&(Ye=De[++ln]);++ln<tr;)Ye=Qe(Ye,De[ln],ln,De);return Ye}function _m(De,Qe,Ye,Tt){var ln=De==null?0:De.length;for(Tt&&ln&&(Ye=De[--ln]);ln--;)Ye=Qe(Ye,De[ln],ln,De);return Ye}function ef(De,Qe){for(var Ye=-1,Tt=De==null?0:De.length;++Ye<Tt;)if(Qe(De[Ye],Ye,De))return!0;return!1}var vc=or("length");function vm(De){return De.split("")}function tf(De){return De.match(Jt)||[]}function mu(De,Qe,Ye){var Tt;return Ye(De,function(ln,tr,ai){if(Qe(ln,tr,ai))return Tt=tr,!1}),Tt}function qs(De,Qe,Ye,Tt){for(var ln=De.length,tr=Ye+(Tt?1:-1);Tt?tr--:++tr<ln;)if(Qe(De[tr],tr,De))return tr;return-1}function hr(De,Qe,Ye){return Qe===Qe?_d(De,Qe,Ye):qs(De,Pn,Ye)}function nf(De,Qe,Ye,Tt){for(var ln=Ye-1,tr=De.length;++ln<tr;)if(Tt(De[ln],Qe))return ln;return-1}function Pn(De){return De!==De}function Gs(De,Qe){var Ye=De==null?0:De.length;return Ye?rf(De,Qe)/Ye:we}function or(De){return function(Qe){return Qe==null?n:Qe[De]}}function ar(De){return function(Qe){return De==null?n:De[Qe]}}function gu(De,Qe,Ye,Tt,ln){return ln(De,function(tr,ai,gr){Ye=Tt?(Tt=!1,tr):Qe(Ye,tr,ai,gr)}),Ye}function xc(De,Qe){var Ye=De.length;for(De.sort(Qe);Ye--;)De[Ye]=De[Ye].value;return De}function rf(De,Qe){for(var Ye,Tt=-1,ln=De.length;++Tt<ln;){var tr=Qe(De[Tt]);tr!==n&&(Ye=Ye===n?tr:Ye+tr)}return Ye}function bc(De,Qe){for(var Ye=-1,Tt=Array(De);++Ye<De;)Tt[Ye]=Qe(Ye);return Tt}function wc(De,Qe){return Ir(Qe,function(Ye){return[Ye,De[Ye]]})}function Sc(De){return De&&De.slice(0,bu(De)+1).replace(Ae,"")}function Zi(De){return function(Qe){return De(Qe)}}function yu(De,Qe){return Ir(Qe,function(Ye){return De[Ye]})}function Ra(De,Qe){return De.has(Qe)}function _u(De,Qe){for(var Ye=-1,Tt=De.length;++Ye<Tt&&hr(Qe,De[Ye],0)>-1;);return Ye}function Cc(De,Qe){for(var Ye=De.length;Ye--&&hr(Qe,De[Ye],0)>-1;);return Ye}function md(De,Qe){for(var Ye=De.length,Tt=0;Ye--;)De[Ye]===Qe&&++Tt;return Tt}var Vr=ar(Tl),Hs=ar(Vn);function Ro(De){return"\\"+cd[De]}function gd(De,Qe){return De==null?n:De[Qe]}function us(De){return Zh.test(De)}function yd(De){return dc.test(De)}function Ll(De){for(var Qe,Ye=[];!(Qe=De.next()).done;)Ye.push(Qe.value);return Ye}function Ws(De){var Qe=-1,Ye=Array(De.size);return De.forEach(function(Tt,ln){Ye[++Qe]=[ln,Tt]}),Ye}function vu(De,Qe){return function(Ye){return De(Qe(Ye))}}function Do(De,Qe){for(var Ye=-1,Tt=De.length,ln=0,tr=[];++Ye<Tt;){var ai=De[Ye];(ai===Qe||ai===E)&&(De[Ye]=E,tr[ln++]=Ye)}return tr}function xu(De){var Qe=-1,Ye=Array(De.size);return De.forEach(function(Tt){Ye[++Qe]=Tt}),Ye}function of(De){var Qe=-1,Ye=Array(De.size);return De.forEach(function(Tt){Ye[++Qe]=[Tt,Tt]}),Ye}function _d(De,Qe,Ye){for(var Tt=Ye-1,ln=De.length;++Tt<ln;)if(De[Tt]===Qe)return Tt;return-1}function Ec(De,Qe,Ye){for(var Tt=Ye+1;Tt--;)if(De[Tt]===Qe)return Tt;return Tt}function Ki(De){return us(De)?wu(De):vc(De)}function io(De){return us(De)?xd(De):vm(De)}function bu(De){for(var Qe=De.length;Qe--&&Ne.test(De.charAt(Qe)););return Qe}var vd=ar(mc);function wu(De){for(var Qe=Hi.lastIndex=0;Hi.test(De);)++Qe;return Qe}function xd(De){return De.match(Hi)||[]}function bd(De){return De.match(bo)||[]}var Su=function De(Qe){Qe=Qe==null?Ei:Zs.defaults(Ei.Object(),Qe,Zs.pick(Ei,pc));var Ye=Qe.Array,Tt=Qe.Date,ln=Qe.Error,tr=Qe.Function,ai=Qe.Math,gr=Qe.Object,cs=Qe.RegExp,Cu=Qe.String,qr=Qe.TypeError,Bt=Ye.prototype,kc=tr.prototype,ma=gr.prototype,zo=Qe["__core-js_shared__"],Eu=kc.toString,ht=ma.hasOwnProperty,Ac=0,Tc=function(){var f=/[^.]+$/.exec(zo&&zo.keys&&zo.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),ku=ma.toString,Pc=Eu.call(gr),wd=Ei._,Ic=cs("^"+Eu.call(ht).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ks=dd?Qe.Buffer:n,Da=Qe.Symbol,Ol=Qe.Uint8Array,Au=Ks?Ks.allocUnsafe:n,Fl=vu(gr.getPrototypeOf,gr),Rl=gr.create,Xi=ma.propertyIsEnumerable,Jo=Bt.splice,af=Da?Da.isConcatSpreadable:n,Xs=Da?Da.iterator:n,ga=Da?Da.toStringTag:n,Dl=function(){try{var f=Du(gr,"defineProperty");return f({},"",{}),f}catch{}}(),Sd=Qe.clearTimeout!==Ei.clearTimeout&&Qe.clearTimeout,Bo=Tt&&Tt.now!==Ei.Date.now&&Tt.now,Sr=Qe.setTimeout!==Ei.setTimeout&&Qe.setTimeout,Ys=ai.ceil,zl=ai.floor,Mc=gr.getOwnPropertySymbols,Tu=Ks?Ks.isBuffer:n,sf=Qe.isFinite,lf=Bt.join,ya=vu(gr.keys,gr),zr=ai.max,Lt=ai.min,en=Tt.now,Lc=Qe.parseInt,Oc=ai.random,uf=Bt.reverse,Mi=Du(Qe,"DataView"),Bl=Du(Qe,"Map"),$o=Du(Qe,"Promise"),Qo=Du(Qe,"Set"),hs=Du(Qe,"WeakMap"),vr=Du(gr,"create"),Or=hs&&new hs,fs={},Pu=zu(Mi),Fc=zu(Bl),_a=zu($o),Rc=zu(Qo),Iu=zu(hs),za=Da?Da.prototype:n,Ba=za?za.valueOf:n,Dc=za?za.toString:n;function ie(f){if(pn(f)&&!pe(f)&&!(f instanceof Sn)){if(f instanceof Yi)return f;if(ht.call(f,"__wrapped__"))return _f(f)}return new Yi(f)}var No=function(){function f(){}return function(y){if(!Ht(y))return{};if(Rl)return Rl(y);f.prototype=y;var k=new f;return f.prototype=n,k}}();function $l(){}function Yi(f,y){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=n}ie.templateSettings={escape:ye,evaluate:W,interpolate:J,variable:"",imports:{_:ie}},ie.prototype=$l.prototype,ie.prototype.constructor=ie,Yi.prototype=No($l.prototype),Yi.prototype.constructor=Yi;function Sn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function cf(){var f=new Sn(this.__wrapped__);return f.__actions__=so(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=so(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=so(this.__views__),f}function zc(){if(this.__filtered__){var f=new Sn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Bc(){var f=this.__wrapped__.value(),y=this.__dir__,k=pe(f),z=y<0,X=k?f.length:0,ue=Y_(0,X,this.__views__),Ee=ue.start,Ie=ue.end,Ge=Ie-Ee,ft=z?Ie:Ee-1,dt=this.__iteratees__,yt=dt.length,Ut=0,tn=Lt(Ge,this.__takeCount__);if(!k||!z&&X==Ge&&tn==Ge)return D_(f,this.__actions__);var gn=[];e:for(;Ge--&&Ut<tn;){ft+=y;for(var Dn=-1,yn=f[ft];++Dn<yt;){var Kn=dt[Dn],nr=Kn.iteratee,ja=Kn.type,aa=nr(yn);if(ja==At)yn=aa;else if(!aa){if(ja==pt)continue e;break e}}gn[Ut++]=yn}return gn}Sn.prototype=No($l.prototype),Sn.prototype.constructor=Sn;function $a(f){var y=-1,k=f==null?0:f.length;for(this.clear();++y<k;){var z=f[y];this.set(z[0],z[1])}}function $c(){this.__data__=vr?vr(null):{},this.size=0}function Zn(f){var y=this.has(f)&&delete this.__data__[f];return this.size-=y?1:0,y}function v(f){var y=this.__data__;if(vr){var k=y[f];return k===x?n:k}return ht.call(y,f)?y[f]:n}function o(f){var y=this.__data__;return vr?y[f]!==n:ht.call(y,f)}function h(f,y){var k=this.__data__;return this.size+=this.has(f)?0:1,k[f]=vr&&y===n?x:y,this}$a.prototype.clear=$c,$a.prototype.delete=Zn,$a.prototype.get=v,$a.prototype.has=o,$a.prototype.set=h;function m(f){var y=-1,k=f==null?0:f.length;for(this.clear();++y<k;){var z=f[y];this.set(z[0],z[1])}}function _(){this.__data__=[],this.size=0}function w(f){var y=this.__data__,k=Xt(y,f);if(k<0)return!1;var z=y.length-1;return k==z?y.pop():Jo.call(y,k,1),--this.size,!0}function P(f){var y=this.__data__,k=Xt(y,f);return k<0?n:y[k][1]}function I(f){return Xt(this.__data__,f)>-1}function O(f,y){var k=this.__data__,z=Xt(k,f);return z<0?(++this.size,k.push([f,y])):k[z][1]=y,this}m.prototype.clear=_,m.prototype.delete=w,m.prototype.get=P,m.prototype.has=I,m.prototype.set=O;function D(f){var y=-1,k=f==null?0:f.length;for(this.clear();++y<k;){var z=f[y];this.set(z[0],z[1])}}function U(){this.size=0,this.__data__={hash:new $a,map:new(Bl||m),string:new $a}}function V(f){var y=gf(this,f).delete(f);return this.size-=y?1:0,y}function ne(f){return gf(this,f).get(f)}function fe(f){return gf(this,f).has(f)}function he(f,y){var k=gf(this,f),z=k.size;return k.set(f,y),this.size+=k.size==z?0:1,this}D.prototype.clear=U,D.prototype.delete=V,D.prototype.get=ne,D.prototype.has=fe,D.prototype.set=he;function de(f){var y=-1,k=f==null?0:f.length;for(this.__data__=new D;++y<k;)this.add(f[y])}function me(f){return this.__data__.set(f,x),this}function Me(f){return this.__data__.has(f)}de.prototype.add=de.prototype.push=me,de.prototype.has=Me;function je(f){var y=this.__data__=new m(f);this.size=y.size}function be(){this.__data__=new m,this.size=0}function Ue(f){var y=this.__data__,k=y.delete(f);return this.size=y.size,k}function Ze(f){return this.__data__.get(f)}function Ke(f){return this.__data__.has(f)}function tt(f,y){var k=this.__data__;if(k instanceof m){var z=k.__data__;if(!Bl||z.length<a-1)return z.push([f,y]),this.size=++k.size,this;k=this.__data__=new D(z)}return k.set(f,y),this.size=k.size,this}je.prototype.clear=be,je.prototype.delete=Ue,je.prototype.get=Ze,je.prototype.has=Ke,je.prototype.set=tt;function ut(f,y){var k=pe(f),z=!k&&ve(f),X=!k&&!z&&et(f),ue=!k&&!z&&!X&&xi(f),Ee=k||z||X||ue,Ie=Ee?bc(f.length,Cu):[],Ge=Ie.length;for(var ft in f)(y||ht.call(f,ft))&&!(Ee&&(ft=="length"||X&&(ft=="offset"||ft=="parent")||ue&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||gs(ft,Ge)))&&Ie.push(ft);return Ie}function it(f){var y=f.length;return y?f[Pd(0,y-1)]:n}function Et(f,y){return Vd(so(f),ir(y,0,f.length))}function Nt(f){return Vd(so(f))}function xn(f,y,k){(k!==n&&!te(f[y],k)||k===n&&!(y in f))&&dn(f,y,k)}function _t(f,y,k){var z=f[y];(!(ht.call(f,y)&&te(z,k))||k===n&&!(y in f))&&dn(f,y,k)}function Xt(f,y){for(var k=f.length;k--;)if(te(f[k][0],y))return k;return-1}function Ot(f,y,k,z){return yi(f,function(X,ue,Ee){y(z,X,k(X),Ee)}),z}function Un(f,y){return f&&wa(y,Er(y),f)}function Rn(f,y){return f&&wa(y,Ni(y),f)}function dn(f,y,k){y=="__proto__"&&Dl?Dl(f,y,{configurable:!0,enumerable:!0,value:k,writable:!0}):f[y]=k}function nn(f,y){for(var k=-1,z=y.length,X=Ye(z),ue=f==null;++k<z;)X[k]=ue?n:Tg(f,y[k]);return X}function ir(f,y,k){return f===f&&(k!==n&&(f=f<=k?f:k),y!==n&&(f=f>=y?f:y)),f}function fr(f,y,k,z,X,ue){var Ee,Ie=y&A,Ge=y&L,ft=y&F;if(k&&(Ee=X?k(f,z,X,ue):k(f)),Ee!==n)return Ee;if(!Ht(f))return f;var dt=pe(f);if(dt){if(Ee=J_(f),!Ie)return so(f,Ee)}else{var yt=lo(f),Ut=yt==ei||yt==Je;if(et(f))return B_(f,Ie);if(yt==_n||yt==Gt||Ut&&!X){if(Ee=Ge||Ut?{}:Wm(f),!Ie)return Ge?Db(f,Rn(Ee,f)):U_(f,Un(Ee,f))}else{if(!er[yt])return X?f:{};Ee=jb(f,yt,Ie)}}ue||(ue=new je);var tn=ue.get(f);if(tn)return tn;ue.set(f,Ee),Di(f)?f.forEach(function(yn){Ee.add(fr(yn,y,k,yn,f,ue))}):br(f)&&f.forEach(function(yn,Kn){Ee.set(Kn,fr(yn,y,k,Kn,f,ue))});var gn=ft?Ge?jm:Um:Ge?Ni:Er,Dn=dt?n:gn(f);return ki(Dn||f,function(yn,Kn){Dn&&(Kn=yn,yn=f[Kn]),_t(Ee,Kn,fr(yn,y,k,Kn,f,ue))}),Ee}function Gr(f){var y=Er(f);return function(k){return si(k,f,y)}}function si(f,y,k){var z=k.length;if(f==null)return!z;for(f=gr(f);z--;){var X=k[z],ue=y[X],Ee=f[X];if(Ee===n&&!(X in f)||!ue(Ee))return!1}return!0}function oo(f,y,k){if(typeof f!="function")throw new qr(d);return yf(function(){f.apply(n,k)},y)}function Ji(f,y,k,z){var X=-1,ue=qn,Ee=!0,Ie=f.length,Ge=[],ft=y.length;if(!Ie)return Ge;k&&(y=Ir(y,Zi(k))),z?(ue=Ml,Ee=!1):y.length>=a&&(ue=Ra,Ee=!1,y=new de(y));e:for(;++X<Ie;){var dt=f[X],yt=k==null?dt:k(dt);if(dt=z||dt!==0?dt:0,Ee&&yt===yt){for(var Ut=ft;Ut--;)if(y[Ut]===yt)continue e;Ge.push(dt)}else ue(y,yt,z)||Ge.push(dt)}return Ge}var yi=j_(kn),Li=j_(Wr,!0);function va(f,y){var k=!0;return yi(f,function(z,X,ue){return k=!!y(z,X,ue),k}),k}function ds(f,y,k){for(var z=-1,X=f.length;++z<X;){var ue=f[z],Ee=y(ue);if(Ee!=null&&(Ie===n?Ee===Ee&&!Cr(Ee):k(Ee,Ie)))var Ie=Ee,Ge=ue}return Ge}function Oi(f,y,k,z){var X=f.length;for(k=hn(k),k<0&&(k=-k>X?0:X+k),z=z===n||z>X?X:hn(z),z<0&&(z+=X),z=k>z?0:Sa(z);k<z;)f[k++]=y;return f}function li(f,y){var k=[];return yi(f,function(z,X,ue){y(z,X,ue)&&k.push(z)}),k}function cn(f,y,k,z,X){var ue=-1,Ee=f.length;for(k||(k=Vb),X||(X=[]);++ue<Ee;){var Ie=f[ue];y>0&&k(Ie)?y>1?cn(Ie,y-1,k,z,X):Fa(X,Ie):z||(X[X.length]=Ie)}return X}var Hr=Rd(),ui=Rd(!0);function kn(f,y){return f&&Hr(f,y,Er)}function Wr(f,y){return f&&ui(f,y,Er)}function Fi(f,y){return pa(y,function(k){return ct(f[k])})}function xa(f,y){y=Ul(y,f);for(var k=0,z=y.length;f!=null&&k<z;)f=f[ys(y[k++])];return k&&k==z?f:n}function ba(f,y,k){var z=y(f);return pe(f)?z:Fa(z,k(f))}function Qi(f){return f==null?f===n?vo:Gn:ga&&ga in gr(f)?Ub(f):Xm(f)}function Nc(f,y){return f>y}function xr(f,y){return f!=null&&ht.call(f,y)}function hf(f,y){return f!=null&&y in gr(f)}function Mu(f,y,k){return f>=Lt(y,k)&&f<zr(y,k)}function ea(f,y,k){for(var z=k?Ml:qn,X=f[0].length,ue=f.length,Ee=ue,Ie=Ye(ue),Ge=1/0,ft=[];Ee--;){var dt=f[Ee];Ee&&y&&(dt=Ir(dt,Zi(y))),Ge=Lt(dt.length,Ge),Ie[Ee]=!k&&(y||X>=120&&dt.length>=120)?new de(Ee&&dt):n}dt=f[0];var yt=-1,Ut=Ie[0];e:for(;++yt<X&&ft.length<Ge;){var tn=dt[yt],gn=y?y(tn):tn;if(tn=k||tn!==0?tn:0,!(Ut?Ra(Ut,gn):z(ft,gn,k))){for(Ee=ue;--Ee;){var Dn=Ie[Ee];if(!(Dn?Ra(Dn,gn):z(f[Ee],gn,k)))continue e}Ut&&Ut.push(gn),ft.push(tn)}}return ft}function Lu(f,y,k,z){return kn(f,function(X,ue,Ee){y(z,k(X),ue,Ee)}),z}function Nl(f,y,k){y=Ul(y,f),f=Jm(f,y);var z=f==null?f:f[ys(jo(y))];return z==null?n:oi(z,f,k)}function Cd(f){return pn(f)&&Qi(f)==Gt}function k_(f){return pn(f)&&Qi(f)==We}function Lb(f){return pn(f)&&Qi(f)==Xn}function Uc(f,y,k,z,X){return f===y?!0:f==null||y==null||!pn(f)&&!pn(y)?f!==f&&y!==y:Ob(f,y,k,z,Uc,X)}function Ob(f,y,k,z,X,ue){var Ee=pe(f),Ie=pe(y),Ge=Ee?Dt:lo(f),ft=Ie?Dt:lo(y);Ge=Ge==Gt?_n:Ge,ft=ft==Gt?_n:ft;var dt=Ge==_n,yt=ft==_n,Ut=Ge==ft;if(Ut&&et(f)){if(!et(y))return!1;Ee=!0,dt=!1}if(Ut&&!dt)return ue||(ue=new je),Ee||xi(f)?K_(f,y,k,z,X,ue):Nm(f,y,Ge,k,z,X,ue);if(!(k&$)){var tn=dt&&ht.call(f,"__wrapped__"),gn=yt&&ht.call(y,"__wrapped__");if(tn||gn){var Dn=tn?f.value():f,yn=gn?y.value():y;return ue||(ue=new je),X(Dn,yn,k,z,ue)}}return Ut?(ue||(ue=new je),mf(f,y,k,z,X,ue)):!1}function xm(f){return pn(f)&&lo(f)==yr}function bm(f,y,k,z){var X=k.length,ue=X,Ee=!z;if(f==null)return!ue;for(f=gr(f);X--;){var Ie=k[X];if(Ee&&Ie[2]?Ie[1]!==f[Ie[0]]:!(Ie[0]in f))return!1}for(;++X<ue;){Ie=k[X];var Ge=Ie[0],ft=f[Ge],dt=Ie[1];if(Ee&&Ie[2]){if(ft===n&&!(Ge in f))return!1}else{var yt=new je;if(z)var Ut=z(ft,dt,Ge,f,y,yt);if(!(Ut===n?Uc(dt,ft,$|N,z,yt):Ut))return!1}}return!0}function Ed(f){if(!Ht(f)||Gb(f))return!1;var y=ct(f)?Ic:Fn;return y.test(zu(f))}function A_(f){return pn(f)&&Qi(f)==Lo}function T_(f){return pn(f)&&lo(f)==ti}function jc(f){return pn(f)&&qt(f.length)&&!!mr[Qi(f)]}function P_(f){return typeof f=="function"?f:f==null?Ca:typeof f=="object"?pe(f)?I_(f[0],f[1]):Sm(f):k3(f)}function Ou(f){if(!nl(f))return ya(f);var y=[];for(var k in gr(f))ht.call(f,k)&&k!="constructor"&&y.push(k);return y}function kd(f){if(!Ht(f))return sr(f);var y=nl(f),k=[];for(var z in f)z=="constructor"&&(y||!ht.call(f,z))||k.push(z);return k}function Vc(f,y){return f<y}function wm(f,y){var k=-1,z=ke(f)?Ye(f.length):[];return yi(f,function(X,ue,Ee){z[++k]=y(X,ue,Ee)}),z}function Sm(f){var y=Vm(f);return y.length==1&&y[0][2]?Km(y[0][0],y[0][1]):function(k){return k===f||bm(k,f,y)}}function I_(f,y){return Zm(f)&&ci(y)?Km(ys(f),y):function(k){var z=Tg(k,f);return z===n&&z===y?oa(k,f):Uc(y,z,$|N)}}function Ai(f,y,k,z,X){f!==y&&Hr(y,function(ue,Ee){if(X||(X=new je),Ht(ue))qc(f,y,Ee,k,Ai,z,X);else{var Ie=z?z(ql(f,Ee),ue,Ee+"",f,y,X):n;Ie===n&&(Ie=ue),xn(f,Ee,Ie)}},Ni)}function qc(f,y,k,z,X,ue,Ee){var Ie=ql(f,k),Ge=ql(y,k),ft=Ee.get(Ge);if(ft){xn(f,k,ft);return}var dt=ue?ue(Ie,Ge,k+"",f,y,Ee):n,yt=dt===n;if(yt){var Ut=pe(Ge),tn=!Ut&&et(Ge),gn=!Ut&&!tn&&xi(Ge);dt=Ge,Ut||tn||gn?pe(Ie)?dt=Ie:ze(Ie)?dt=so(Ie):tn?(yt=!1,dt=B_(Ge,!0)):gn?(yt=!1,dt=df(Ge,!0)):dt=[]:vi(Ge)||ve(Ge)?(dt=Ie,ve(Ie)?dt=ra(Ie):(!Ht(Ie)||ct(Ie))&&(dt=Wm(Ge))):yt=!1}yt&&(Ee.set(Ge,dt),X(dt,Ge,z,ue,Ee),Ee.delete(Ge)),xn(f,k,dt)}function Ad(f,y){var k=f.length;if(k)return y+=y<0?k:0,gs(y,k)?f[y]:n}function Cm(f,y,k){y.length?y=Ir(y,function(ue){return pe(ue)?function(Ee){return xa(Ee,ue.length===1?ue[0]:ue)}:ue}):y=[Ca];var z=-1;y=Ir(y,Zi(on()));var X=wm(f,function(ue,Ee,Ie){var Ge=Ir(y,function(ft){return ft(ue)});return{criteria:Ge,index:++z,value:ue}});return xc(X,function(ue,Ee){return N_(ue,Ee,k)})}function ff(f,y){return M_(f,y,function(k,z){return oa(f,z)})}function M_(f,y,k){for(var z=-1,X=y.length,ue={};++z<X;){var Ee=y[z],Ie=xa(f,Ee);k(Ie,Ee)&&Js(ue,Ul(Ee,f),Ie)}return ue}function Td(f){return function(y){return xa(y,f)}}function Em(f,y,k,z){var X=z?nf:hr,ue=-1,Ee=y.length,Ie=f;for(f===y&&(y=so(y)),k&&(Ie=Ir(f,Zi(k)));++ue<Ee;)for(var Ge=0,ft=y[ue],dt=k?k(ft):ft;(Ge=X(Ie,dt,Ge,z))>-1;)Ie!==f&&Jo.call(Ie,Ge,1),Jo.call(f,Ge,1);return f}function km(f,y){for(var k=f?y.length:0,z=k-1;k--;){var X=y[k];if(k==z||X!==ue){var ue=X;gs(X)?Jo.call(f,X,1):el(f,X)}}return f}function Pd(f,y){return f+zl(Oc()*(y-f+1))}function L_(f,y,k,z){for(var X=-1,ue=zr(Ys((y-f)/(k||1)),0),Ee=Ye(ue);ue--;)Ee[z?ue:++X]=f,f+=k;return Ee}function Am(f,y){var k="";if(!f||y<1||y>Ve)return k;do y%2&&(k+=f),y=zl(y/2),y&&(f+=f);while(y);return k}function In(f,y){return eg(Ym(f,y,Ca),f+"")}function O_(f){return it(np(f))}function Tm(f,y){var k=np(f);return Vd(k,ir(y,0,k.length))}function Js(f,y,k,z){if(!Ht(f))return f;y=Ul(y,f);for(var X=-1,ue=y.length,Ee=ue-1,Ie=f;Ie!=null&&++X<ue;){var Ge=ys(y[X]),ft=k;if(Ge==="__proto__"||Ge==="constructor"||Ge==="prototype")return f;if(X!=Ee){var dt=Ie[Ge];ft=z?z(dt,Ge,Ie):n,ft===n&&(ft=Ht(dt)?dt:gs(y[X+1])?[]:{})}_t(Ie,Ge,ft),Ie=Ie[Ge]}return f}var Uo=Or?function(f,y){return Or.set(f,y),f}:Ca,F_=Dl?function(f,y){return Dl(f,"toString",{configurable:!0,enumerable:!1,value:Cw(y),writable:!0})}:Ca;function Fb(f){return Vd(np(f))}function ta(f,y,k){var z=-1,X=f.length;y<0&&(y=-y>X?0:X+y),k=k>X?X:k,k<0&&(k+=X),X=y>k?0:k-y>>>0,y>>>=0;for(var ue=Ye(X);++z<X;)ue[z]=f[z+y];return ue}function Rb(f,y){var k;return yi(f,function(z,X,ue){return k=y(z,X,ue),!k}),!!k}function Id(f,y,k){var z=0,X=f==null?z:f.length;if(typeof y=="number"&&y===y&&X<=lt){for(;z<X;){var ue=z+X>>>1,Ee=f[ue];Ee!==null&&!Cr(Ee)&&(k?Ee<=y:Ee<y)?z=ue+1:X=ue}return X}return Pm(f,y,Ca,k)}function Pm(f,y,k,z){var X=0,ue=f==null?0:f.length;if(ue===0)return 0;y=k(y);for(var Ee=y!==y,Ie=y===null,Ge=Cr(y),ft=y===n;X<ue;){var dt=zl((X+ue)/2),yt=k(f[dt]),Ut=yt!==n,tn=yt===null,gn=yt===yt,Dn=Cr(yt);if(Ee)var yn=z||gn;else ft?yn=gn&&(z||Ut):Ie?yn=gn&&Ut&&(z||!tn):Ge?yn=gn&&Ut&&!tn&&(z||!Dn):tn||Dn?yn=!1:yn=z?yt<=y:yt<y;yn?X=dt+1:ue=dt}return Lt(ue,ae)}function R_(f,y){for(var k=-1,z=f.length,X=0,ue=[];++k<z;){var Ee=f[k],Ie=y?y(Ee):Ee;if(!k||!te(Ie,Ge)){var Ge=Ie;ue[X++]=Ee===0?0:Ee}}return ue}function Md(f){return typeof f=="number"?f:Cr(f)?we:+f}function ao(f){if(typeof f=="string")return f;if(pe(f))return Ir(f,ao)+"";if(Cr(f))return Dc?Dc.call(f):"";var y=f+"";return y=="0"&&1/f==-Vt?"-0":y}function Qs(f,y,k){var z=-1,X=qn,ue=f.length,Ee=!0,Ie=[],Ge=Ie;if(k)Ee=!1,X=Ml;else if(ue>=a){var ft=y?null:$b(f);if(ft)return xu(ft);Ee=!1,X=Ra,Ge=new de}else Ge=y?[]:Ie;e:for(;++z<ue;){var dt=f[z],yt=y?y(dt):dt;if(dt=k||dt!==0?dt:0,Ee&&yt===yt){for(var Ut=Ge.length;Ut--;)if(Ge[Ut]===yt)continue e;y&&Ge.push(yt),Ie.push(dt)}else X(Ge,yt,k)||(Ge!==Ie&&Ge.push(yt),Ie.push(dt))}return Ie}function el(f,y){return y=Ul(y,f),f=Jm(f,y),f==null||delete f[ys(jo(y))]}function Gc(f,y,k,z){return Js(f,y,k(xa(f,y)),z)}function Ld(f,y,k,z){for(var X=f.length,ue=z?X:-1;(z?ue--:++ue<X)&&y(f[ue],ue,f););return k?ta(f,z?0:ue,z?ue+1:X):ta(f,z?ue+1:0,z?X:ue)}function D_(f,y){var k=f;return k instanceof Sn&&(k=k.value()),Vs(y,function(z,X){return X.func.apply(X.thisArg,Fa([z],X.args))},k)}function Im(f,y,k){var z=f.length;if(z<2)return z?Qs(f[0]):[];for(var X=-1,ue=Ye(z);++X<z;)for(var Ee=f[X],Ie=-1;++Ie<z;)Ie!=X&&(ue[X]=Ji(ue[X]||Ee,f[Ie],y,k));return Qs(cn(ue,1),y,k)}function z_(f,y,k){for(var z=-1,X=f.length,ue=y.length,Ee={};++z<X;){var Ie=z<ue?y[z]:n;k(Ee,f[z],Ie)}return Ee}function Mm(f){return ze(f)?f:[]}function Lm(f){return typeof f=="function"?f:Ca}function Ul(f,y){return pe(f)?f:Zm(f,y)?[f]:r0(Cn(f))}var Om=In;function jl(f,y,k){var z=f.length;return k=k===n?z:k,!y&&k>=z?f:ta(f,y,k)}var Fu=Sd||function(f){return Ei.clearTimeout(f)};function B_(f,y){if(y)return f.slice();var k=f.length,z=Au?Au(k):new f.constructor(k);return f.copy(z),z}function Fr(f){var y=new f.constructor(f.byteLength);return new Ol(y).set(new Ol(f)),y}function Od(f,y){var k=y?Fr(f.buffer):f.buffer;return new f.constructor(k,f.byteOffset,f.byteLength)}function $_(f){var y=new f.constructor(f.source,rn.exec(f));return y.lastIndex=f.lastIndex,y}function Fd(f){return Ba?gr(Ba.call(f)):{}}function df(f,y){var k=y?Fr(f.buffer):f.buffer;return new f.constructor(k,f.byteOffset,f.length)}function Hc(f,y){if(f!==y){var k=f!==n,z=f===null,X=f===f,ue=Cr(f),Ee=y!==n,Ie=y===null,Ge=y===y,ft=Cr(y);if(!Ie&&!ft&&!ue&&f>y||ue&&Ee&&Ge&&!Ie&&!ft||z&&Ee&&Ge||!k&&Ge||!X)return 1;if(!z&&!ue&&!ft&&f<y||ft&&k&&X&&!z&&!ue||Ie&&k&&X||!Ee&&X||!Ge)return-1}return 0}function N_(f,y,k){for(var z=-1,X=f.criteria,ue=y.criteria,Ee=X.length,Ie=k.length;++z<Ee;){var Ge=Hc(X[z],ue[z]);if(Ge){if(z>=Ie)return Ge;var ft=k[z];return Ge*(ft=="desc"?-1:1)}}return f.index-y.index}function Fm(f,y,k,z){for(var X=-1,ue=f.length,Ee=k.length,Ie=-1,Ge=y.length,ft=zr(ue-Ee,0),dt=Ye(Ge+ft),yt=!z;++Ie<Ge;)dt[Ie]=y[Ie];for(;++X<Ee;)(yt||X<ue)&&(dt[k[X]]=f[X]);for(;ft--;)dt[Ie++]=f[X++];return dt}function Wc(f,y,k,z){for(var X=-1,ue=f.length,Ee=-1,Ie=k.length,Ge=-1,ft=y.length,dt=zr(ue-Ie,0),yt=Ye(dt+ft),Ut=!z;++X<dt;)yt[X]=f[X];for(var tn=X;++Ge<ft;)yt[tn+Ge]=y[Ge];for(;++Ee<Ie;)(Ut||X<ue)&&(yt[tn+k[Ee]]=f[X++]);return yt}function so(f,y){var k=-1,z=f.length;for(y||(y=Ye(z));++k<z;)y[k]=f[k];return y}function wa(f,y,k,z){var X=!k;k||(k={});for(var ue=-1,Ee=y.length;++ue<Ee;){var Ie=y[ue],Ge=z?z(k[Ie],f[Ie],Ie,k,f):n;Ge===n&&(Ge=f[Ie]),X?dn(k,Ie,Ge):_t(k,Ie,Ge)}return k}function U_(f,y){return wa(f,qm(f),y)}function Db(f,y){return wa(f,X_(f),y)}function pf(f,y){return function(k,z){var X=pe(k)?pd:Ot,ue=y?y():{};return X(k,f,on(z,2),ue)}}function ps(f){return In(function(y,k){var z=-1,X=k.length,ue=X>1?k[X-1]:n,Ee=X>2?k[2]:n;for(ue=f.length>3&&typeof ue=="function"?(X--,ue):n,Ee&&wo(k[0],k[1],Ee)&&(ue=X<3?n:ue,X=1),y=gr(y);++z<X;){var Ie=k[z];Ie&&f(y,Ie,z,ue)}return y})}function j_(f,y){return function(k,z){if(k==null)return k;if(!ke(k))return f(k,z);for(var X=k.length,ue=y?X:-1,Ee=gr(k);(y?ue--:++ue<X)&&z(Ee[ue],ue,Ee)!==!1;);return k}}function Rd(f){return function(y,k,z){for(var X=-1,ue=gr(y),Ee=z(y),Ie=Ee.length;Ie--;){var Ge=Ee[f?Ie:++X];if(k(ue[Ge],Ge,ue)===!1)break}return y}}function zb(f,y,k){var z=y&Z,X=Ru(f);function ue(){var Ee=this&&this!==Ei&&this instanceof ue?X:f;return Ee.apply(z?k:this,arguments)}return ue}function Dd(f){return function(y){y=Cn(y);var k=us(y)?io(y):n,z=k?k[0]:y.charAt(0),X=k?jl(k,1).join(""):y.slice(1);return z[f]()+X}}function Vl(f){return function(y){return Vs(C3(S3(y).replace(Al,"")),f,"")}}function Ru(f){return function(){var y=arguments;switch(y.length){case 0:return new f;case 1:return new f(y[0]);case 2:return new f(y[0],y[1]);case 3:return new f(y[0],y[1],y[2]);case 4:return new f(y[0],y[1],y[2],y[3]);case 5:return new f(y[0],y[1],y[2],y[3],y[4]);case 6:return new f(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new f(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var k=No(f.prototype),z=f.apply(k,y);return Ht(z)?z:k}}function V_(f,y,k){var z=Ru(f);function X(){for(var ue=arguments.length,Ee=Ye(ue),Ie=ue,Ge=Zc(X);Ie--;)Ee[Ie]=arguments[Ie];var ft=ue<3&&Ee[0]!==Ge&&Ee[ue-1]!==Ge?[]:Do(Ee,Ge);if(ue-=ft.length,ue<k)return H_(f,y,zd,X.placeholder,n,Ee,ft,n,n,k-ue);var dt=this&&this!==Ei&&this instanceof X?z:f;return oi(dt,this,Ee)}return X}function Rm(f){return function(y,k,z){var X=gr(y);if(!ke(y)){var ue=on(k,3);y=Er(y),k=function(Ie){return ue(X[Ie],Ie,X)}}var Ee=f(y,k,z);return Ee>-1?X[ue?y[Ee]:Ee]:n}}function q_(f){return Ua(function(y){var k=y.length,z=k,X=Yi.prototype.thru;for(f&&y.reverse();z--;){var ue=y[z];if(typeof ue!="function")throw new qr(d);if(X&&!Ee&&Nd(ue)=="wrapper")var Ee=new Yi([],!0)}for(z=Ee?z:k;++z<k;){ue=y[z];var Ie=Nd(ue),Ge=Ie=="wrapper"?$d(ue):n;Ge&&jd(Ge[0])&&Ge[1]==(oe|G|se|xe)&&!Ge[4].length&&Ge[9]==1?Ee=Ee[Nd(Ge[0])].apply(Ee,Ge[3]):Ee=ue.length==1&&jd(ue)?Ee[Ie]():Ee.thru(ue)}return function(){var ft=arguments,dt=ft[0];if(Ee&&ft.length==1&&pe(dt))return Ee.plant(dt).value();for(var yt=0,Ut=k?y[yt].apply(this,ft):dt;++yt<k;)Ut=y[yt].call(this,Ut);return Ut}})}function zd(f,y,k,z,X,ue,Ee,Ie,Ge,ft){var dt=y&oe,yt=y&Z,Ut=y&R,tn=y&(G|Q),gn=y&Oe,Dn=Ut?n:Ru(f);function yn(){for(var Kn=arguments.length,nr=Ye(Kn),ja=Kn;ja--;)nr[ja]=arguments[ja];if(tn)var aa=Zc(yn),Va=md(nr,aa);if(z&&(nr=Fm(nr,z,X,tn)),ue&&(nr=Wc(nr,ue,Ee,tn)),Kn-=Va,tn&&Kn<ft){var Pi=Do(nr,aa);return H_(f,y,zd,yn.placeholder,k,nr,Pi,Ie,Ge,ft-Kn)}var sl=yt?k:this,Nu=Ut?sl[f]:f;return Kn=nr.length,Ie?nr=rl(nr,Ie):gn&&Kn>1&&nr.reverse(),dt&&Ge<Kn&&(nr.length=Ge),this&&this!==Ei&&this instanceof yn&&(Nu=Dn||Ru(Nu)),Nu.apply(sl,nr)}return yn}function G_(f,y){return function(k,z){return Lu(k,f,y(z),{})}}function Bd(f,y){return function(k,z){var X;if(k===n&&z===n)return y;if(k!==n&&(X=k),z!==n){if(X===n)return z;typeof k=="string"||typeof z=="string"?(k=ao(k),z=ao(z)):(k=Md(k),z=Md(z)),X=f(k,z)}return X}}function Dm(f){return Ua(function(y){return y=Ir(y,Zi(on())),In(function(k){var z=this;return f(y,function(X){return oi(X,z,k)})})})}function Na(f,y){y=y===n?" ":ao(y);var k=y.length;if(k<2)return k?Am(y,f):y;var z=Am(y,Ys(f/Ki(y)));return us(y)?jl(io(z),0,f).join(""):z.slice(0,f)}function Bb(f,y,k,z){var X=y&Z,ue=Ru(f);function Ee(){for(var Ie=-1,Ge=arguments.length,ft=-1,dt=z.length,yt=Ye(dt+Ge),Ut=this&&this!==Ei&&this instanceof Ee?ue:f;++ft<dt;)yt[ft]=z[ft];for(;Ge--;)yt[ft++]=arguments[++Ie];return oi(Ut,X?k:this,yt)}return Ee}function zm(f){return function(y,k,z){return z&&typeof z!="number"&&wo(y,k,z)&&(k=z=n),y=bi(y),k===n?(k=y,y=0):k=bi(k),z=z===n?y<k?1:-1:bi(z),L_(y,k,z,f)}}function tl(f){return function(y,k){return typeof y=="string"&&typeof k=="string"||(y=wi(y),k=wi(k)),f(y,k)}}function H_(f,y,k,z,X,ue,Ee,Ie,Ge,ft){var dt=y&G,yt=dt?Ee:n,Ut=dt?n:Ee,tn=dt?ue:n,gn=dt?n:ue;y|=dt?se:ee,y&=~(dt?ee:se),y&q||(y&=~(Z|R));var Dn=[f,y,X,tn,yt,gn,Ut,Ie,Ge,ft],yn=k.apply(n,Dn);return jd(f)&&Qm(yn,Dn),yn.placeholder=z,t0(yn,f,y)}function Bm(f){var y=ai[f];return function(k,z){if(k=wi(k),z=z==null?0:Lt(hn(z),292),z&&sf(k)){var X=(Cn(k)+"e").split("e"),ue=y(X[0]+"e"+(+X[1]+z));return X=(Cn(ue)+"e").split("e"),+(X[0]+"e"+(+X[1]-z))}return y(k)}}var $b=Qo&&1/xu(new Qo([,-0]))[1]==Vt?function(f){return new Qo(f)}:Aw;function $m(f){return function(y){var k=lo(y);return k==yr?Ws(y):k==ti?of(y):wc(y,f(y))}}function ms(f,y,k,z,X,ue,Ee,Ie){var Ge=y&R;if(!Ge&&typeof f!="function")throw new qr(d);var ft=z?z.length:0;if(ft||(y&=~(se|ee),z=X=n),Ee=Ee===n?Ee:zr(hn(Ee),0),Ie=Ie===n?Ie:hn(Ie),ft-=X?X.length:0,y&ee){var dt=z,yt=X;z=X=n}var Ut=Ge?n:$d(f),tn=[f,y,k,z,X,dt,yt,ue,Ee,Ie];if(Ut&&e0(tn,Ut),f=tn[0],y=tn[1],k=tn[2],z=tn[3],X=tn[4],Ie=tn[9]=tn[9]===n?Ge?0:f.length:zr(tn[9]-ft,0),!Ie&&y&(G|Q)&&(y&=~(G|Q)),!y||y==Z)var gn=zb(f,y,k);else y==G||y==Q?gn=V_(f,y,Ie):(y==se||y==(Z|se))&&!X.length?gn=Bb(f,y,k,z):gn=zd.apply(n,tn);var Dn=Ut?Uo:Qm;return t0(Dn(gn,tn),f,y)}function W_(f,y,k,z){return f===n||te(f,ma[k])&&!ht.call(z,k)?y:f}function Z_(f,y,k,z,X,ue){return Ht(f)&&Ht(y)&&(ue.set(y,f),Ai(f,y,n,Z_,ue),ue.delete(y)),f}function Nb(f){return vi(f)?n:f}function K_(f,y,k,z,X,ue){var Ee=k&$,Ie=f.length,Ge=y.length;if(Ie!=Ge&&!(Ee&&Ge>Ie))return!1;var ft=ue.get(f),dt=ue.get(y);if(ft&&dt)return ft==y&&dt==f;var yt=-1,Ut=!0,tn=k&N?new de:n;for(ue.set(f,y),ue.set(y,f);++yt<Ie;){var gn=f[yt],Dn=y[yt];if(z)var yn=Ee?z(Dn,gn,yt,y,f,ue):z(gn,Dn,yt,f,y,ue);if(yn!==n){if(yn)continue;Ut=!1;break}if(tn){if(!ef(y,function(Kn,nr){if(!Ra(tn,nr)&&(gn===Kn||X(gn,Kn,k,z,ue)))return tn.push(nr)})){Ut=!1;break}}else if(!(gn===Dn||X(gn,Dn,k,z,ue))){Ut=!1;break}}return ue.delete(f),ue.delete(y),Ut}function Nm(f,y,k,z,X,ue,Ee){switch(k){case le:if(f.byteLength!=y.byteLength||f.byteOffset!=y.byteOffset)return!1;f=f.buffer,y=y.buffer;case We:return!(f.byteLength!=y.byteLength||!ue(new Ol(f),new Ol(y)));case un:case Xn:case Gi:return te(+f,+y);case Bn:return f.name==y.name&&f.message==y.message;case Lo:case Yn:return f==y+"";case yr:var Ie=Ws;case ti:var Ge=z&$;if(Ie||(Ie=xu),f.size!=y.size&&!Ge)return!1;var ft=Ee.get(f);if(ft)return ft==y;z|=N,Ee.set(f,y);var dt=K_(Ie(f),Ie(y),z,X,ue,Ee);return Ee.delete(f),dt;case Oo:if(Ba)return Ba.call(f)==Ba.call(y)}return!1}function mf(f,y,k,z,X,ue){var Ee=k&$,Ie=Um(f),Ge=Ie.length,ft=Um(y),dt=ft.length;if(Ge!=dt&&!Ee)return!1;for(var yt=Ge;yt--;){var Ut=Ie[yt];if(!(Ee?Ut in y:ht.call(y,Ut)))return!1}var tn=ue.get(f),gn=ue.get(y);if(tn&&gn)return tn==y&&gn==f;var Dn=!0;ue.set(f,y),ue.set(y,f);for(var yn=Ee;++yt<Ge;){Ut=Ie[yt];var Kn=f[Ut],nr=y[Ut];if(z)var ja=Ee?z(nr,Kn,Ut,y,f,ue):z(Kn,nr,Ut,f,y,ue);if(!(ja===n?Kn===nr||X(Kn,nr,k,z,ue):ja)){Dn=!1;break}yn||(yn=Ut=="constructor")}if(Dn&&!yn){var aa=f.constructor,Va=y.constructor;aa!=Va&&"constructor"in f&&"constructor"in y&&!(typeof aa=="function"&&aa instanceof aa&&typeof Va=="function"&&Va instanceof Va)&&(Dn=!1)}return ue.delete(f),ue.delete(y),Dn}function Ua(f){return eg(Ym(f,n,Xc),f+"")}function Um(f){return ba(f,Er,qm)}function jm(f){return ba(f,Ni,X_)}var $d=Or?function(f){return Or.get(f)}:Aw;function Nd(f){for(var y=f.name+"",k=fs[y],z=ht.call(fs,y)?k.length:0;z--;){var X=k[z],ue=X.func;if(ue==null||ue==f)return X.name}return y}function Zc(f){var y=ht.call(ie,"placeholder")?ie:f;return y.placeholder}function on(){var f=ie.iteratee||Ew;return f=f===Ew?P_:f,arguments.length?f(arguments[0],arguments[1]):f}function gf(f,y){var k=f.__data__;return qb(y)?k[typeof y=="string"?"string":"hash"]:k.map}function Vm(f){for(var y=Er(f),k=y.length;k--;){var z=y[k],X=f[z];y[k]=[z,X,ci(X)]}return y}function Du(f,y){var k=gd(f,y);return Ed(k)?k:n}function Ub(f){var y=ht.call(f,ga),k=f[ga];try{f[ga]=n;var z=!0}catch{}var X=ku.call(f);return z&&(y?f[ga]=k:delete f[ga]),X}var qm=Mc?function(f){return f==null?[]:(f=gr(f),pa(Mc(f),function(y){return Xi.call(f,y)}))}:Tw,X_=Mc?function(f){for(var y=[];f;)Fa(y,qm(f)),f=Fl(f);return y}:Tw,lo=Qi;(Mi&&lo(new Mi(new ArrayBuffer(1)))!=le||Bl&&lo(new Bl)!=yr||$o&&lo($o.resolve())!=_o||Qo&&lo(new Qo)!=ti||hs&&lo(new hs)!=vt)&&(lo=function(f){var y=Qi(f),k=y==_n?f.constructor:n,z=k?zu(k):"";if(z)switch(z){case Pu:return le;case Fc:return yr;case _a:return _o;case Rc:return ti;case Iu:return vt}return y});function Y_(f,y,k){for(var z=-1,X=k.length;++z<X;){var ue=k[z],Ee=ue.size;switch(ue.type){case"drop":f+=Ee;break;case"dropRight":y-=Ee;break;case"take":y=Lt(y,f+Ee);break;case"takeRight":f=zr(f,y-Ee);break}}return{start:f,end:y}}function Gm(f){var y=f.match(at);return y?y[1].split(st):[]}function Hm(f,y,k){y=Ul(y,f);for(var z=-1,X=y.length,ue=!1;++z<X;){var Ee=ys(y[z]);if(!(ue=f!=null&&k(f,Ee)))break;f=f[Ee]}return ue||++z!=X?ue:(X=f==null?0:f.length,!!X&&qt(X)&&gs(Ee,X)&&(pe(f)||ve(f)))}function J_(f){var y=f.length,k=new f.constructor(y);return y&&typeof f[0]=="string"&&ht.call(f,"index")&&(k.index=f.index,k.input=f.input),k}function Wm(f){return typeof f.constructor=="function"&&!nl(f)?No(Fl(f)):{}}function jb(f,y,k){var z=f.constructor;switch(y){case We:return Fr(f);case un:case Xn:return new z(+f);case le:return Od(f,k);case Fe:case Pe:case rt:case bt:case vn:case Wt:case xt:case $n:case jn:return df(f,k);case yr:return new z;case Gi:case Yn:return new z(f);case Lo:return $_(f);case ti:return new z;case Oo:return Fd(f)}}function Ud(f,y){var k=y.length;if(!k)return f;var z=k-1;return y[z]=(k>1?"& ":"")+y[z],y=y.join(k>2?", ":" "),f.replace(ot,`{
/* [wrapped with `+y+`] */
`)}function Vb(f){return pe(f)||ve(f)||!!(af&&f&&f[af])}function gs(f,y){var k=typeof f;return y=y??Ve,!!y&&(k=="number"||k!="symbol"&&wn.test(f))&&f>-1&&f%1==0&&f<y}function wo(f,y,k){if(!Ht(k))return!1;var z=typeof y;return(z=="number"?ke(k)&&gs(y,k.length):z=="string"&&y in k)?te(k[y],f):!1}function Zm(f,y){if(pe(f))return!1;var k=typeof f;return k=="number"||k=="symbol"||k=="boolean"||f==null||Cr(f)?!0:Se.test(f)||!ce.test(f)||y!=null&&f in gr(y)}function qb(f){var y=typeof f;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?f!=="__proto__":f===null}function jd(f){var y=Nd(f),k=ie[y];if(typeof k!="function"||!(y in Sn.prototype))return!1;if(f===k)return!0;var z=$d(k);return!!z&&f===z[0]}function Gb(f){return!!Tc&&Tc in f}var Hb=zo?ct:Pw;function nl(f){var y=f&&f.constructor,k=typeof y=="function"&&y.prototype||ma;return f===k}function ci(f){return f===f&&!Ht(f)}function Km(f,y){return function(k){return k==null?!1:k[f]===y&&(y!==n||f in gr(k))}}function Q_(f){var y=Zl(f,function(z){return k.size===b&&k.clear(),z}),k=y.cache;return y}function e0(f,y){var k=f[1],z=y[1],X=k|z,ue=X<(Z|R|oe),Ee=z==oe&&k==G||z==oe&&k==xe&&f[7].length<=y[8]||z==(oe|xe)&&y[7].length<=y[8]&&k==G;if(!(ue||Ee))return f;z&Z&&(f[2]=y[2],X|=k&Z?0:q);var Ie=y[3];if(Ie){var Ge=f[3];f[3]=Ge?Fm(Ge,Ie,y[4]):Ie,f[4]=Ge?Do(f[3],E):y[4]}return Ie=y[5],Ie&&(Ge=f[5],f[5]=Ge?Wc(Ge,Ie,y[6]):Ie,f[6]=Ge?Do(f[5],E):y[6]),Ie=y[7],Ie&&(f[7]=Ie),z&oe&&(f[8]=f[8]==null?y[8]:Lt(f[8],y[8])),f[9]==null&&(f[9]=y[9]),f[0]=y[0],f[1]=X,f}function sr(f){var y=[];if(f!=null)for(var k in gr(f))y.push(k);return y}function Xm(f){return ku.call(f)}function Ym(f,y,k){return y=zr(y===n?f.length-1:y,0),function(){for(var z=arguments,X=-1,ue=zr(z.length-y,0),Ee=Ye(ue);++X<ue;)Ee[X]=z[y+X];X=-1;for(var Ie=Ye(y+1);++X<y;)Ie[X]=z[X];return Ie[y]=k(Ee),oi(f,this,Ie)}}function Jm(f,y){return y.length<2?f:xa(f,ta(y,0,-1))}function rl(f,y){for(var k=f.length,z=Lt(y.length,k),X=so(f);z--;){var ue=y[z];f[z]=gs(ue,k)?X[ue]:n}return f}function ql(f,y){if(!(y==="constructor"&&typeof f[y]=="function")&&y!="__proto__")return f[y]}var Qm=n0(Uo),yf=Sr||function(f,y){return Ei.setTimeout(f,y)},eg=n0(F_);function t0(f,y,k){var z=y+"";return eg(f,Ud(z,Wb(Gm(z),k)))}function n0(f){var y=0,k=0;return function(){var z=en(),X=nt-(z-k);if(k=z,X>0){if(++y>=$e)return arguments[0]}else y=0;return f.apply(n,arguments)}}function Vd(f,y){var k=-1,z=f.length,X=z-1;for(y=y===n?z:y;++k<y;){var ue=Pd(k,X),Ee=f[ue];f[ue]=f[k],f[k]=Ee}return f.length=y,f}var r0=Q_(function(f){var y=[];return f.charCodeAt(0)===46&&y.push(""),f.replace(Ce,function(k,z,X,ue){y.push(X?ue.replace(jt,"$1"):z||k)}),y});function ys(f){if(typeof f=="string"||Cr(f))return f;var y=f+"";return y=="0"&&1/f==-Vt?"-0":y}function zu(f){if(f!=null){try{return Eu.call(f)}catch{}try{return f+""}catch{}}return""}function Wb(f,y){return ki(gt,function(k){var z="_."+k[0];y&k[1]&&!qn(f,z)&&f.push(z)}),f.sort()}function _f(f){if(f instanceof Sn)return f.clone();var y=new Yi(f.__wrapped__,f.__chain__);return y.__actions__=so(f.__actions__),y.__index__=f.__index__,y.__values__=f.__values__,y}function Kc(f,y,k){(k?wo(f,y,k):y===n)?y=1:y=zr(hn(y),0);var z=f==null?0:f.length;if(!z||y<1)return[];for(var X=0,ue=0,Ee=Ye(Ys(z/y));X<z;)Ee[ue++]=ta(f,X,X+=y);return Ee}function i0(f){for(var y=-1,k=f==null?0:f.length,z=0,X=[];++y<k;){var ue=f[y];ue&&(X[z++]=ue)}return X}function tg(){var f=arguments.length;if(!f)return[];for(var y=Ye(f-1),k=arguments[0],z=f;z--;)y[z-1]=arguments[z];return Fa(pe(k)?so(k):[k],cn(y,1))}var ng=In(function(f,y){return ze(f)?Ji(f,cn(y,1,ze,!0)):[]}),Zb=In(function(f,y){var k=jo(y);return ze(k)&&(k=n),ze(f)?Ji(f,cn(y,1,ze,!0),on(k,2)):[]}),Kb=In(function(f,y){var k=jo(y);return ze(k)&&(k=n),ze(f)?Ji(f,cn(y,1,ze,!0),n,k):[]});function Xb(f,y,k){var z=f==null?0:f.length;return z?(y=k||y===n?1:hn(y),ta(f,y<0?0:y,z)):[]}function o0(f,y,k){var z=f==null?0:f.length;return z?(y=k||y===n?1:hn(y),y=z-y,ta(f,0,y<0?0:y)):[]}function a0(f,y){return f&&f.length?Ld(f,on(y,3),!0,!0):[]}function So(f,y){return f&&f.length?Ld(f,on(y,3),!0):[]}function rg(f,y,k,z){var X=f==null?0:f.length;return X?(k&&typeof k!="number"&&wo(f,y,k)&&(k=0,z=X),Oi(f,y,k,z)):[]}function ig(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var X=k==null?0:hn(k);return X<0&&(X=zr(z+X,0)),qs(f,on(y,3),X)}function il(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var X=z-1;return k!==n&&(X=hn(k),X=k<0?zr(z+X,0):Lt(X,z-1)),qs(f,on(y,3),X,!0)}function Xc(f){var y=f==null?0:f.length;return y?cn(f,1):[]}function vf(f){var y=f==null?0:f.length;return y?cn(f,Vt):[]}function Yc(f,y){var k=f==null?0:f.length;return k?(y=y===n?1:hn(y),cn(f,y)):[]}function qd(f){for(var y=-1,k=f==null?0:f.length,z={};++y<k;){var X=f[y];z[X[0]]=X[1]}return z}function xf(f){return f&&f.length?f[0]:n}function Yb(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var X=k==null?0:hn(k);return X<0&&(X=zr(z+X,0)),hr(f,y,X)}function s0(f){var y=f==null?0:f.length;return y?ta(f,0,-1):[]}var l0=In(function(f){var y=Ir(f,Mm);return y.length&&y[0]===f[0]?ea(y):[]}),Jb=In(function(f){var y=jo(f),k=Ir(f,Mm);return y===jo(k)?y=n:k.pop(),k.length&&k[0]===f[0]?ea(k,on(y,2)):[]}),u0=In(function(f){var y=jo(f),k=Ir(f,Mm);return y=typeof y=="function"?y:n,y&&k.pop(),k.length&&k[0]===f[0]?ea(k,n,y):[]});function c0(f,y){return f==null?"":lf.call(f,y)}function jo(f){var y=f==null?0:f.length;return y?f[y-1]:n}function og(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var X=z;return k!==n&&(X=hn(k),X=X<0?zr(z+X,0):Lt(X,z-1)),y===y?Ec(f,y,X):qs(f,Pn,X,!0)}function Qb(f,y){return f&&f.length?Ad(f,hn(y)):n}var ew=In(ag);function ag(f,y){return f&&f.length&&y&&y.length?Em(f,y):f}function bf(f,y,k){return f&&f.length&&y&&y.length?Em(f,y,on(k,2)):f}function _s(f,y,k){return f&&f.length&&y&&y.length?Em(f,y,n,k):f}var Gl=Ua(function(f,y){var k=f==null?0:f.length,z=nn(f,y);return km(f,Ir(y,function(X){return gs(X,k)?+X:X}).sort(Hc)),z});function h0(f,y){var k=[];if(!(f&&f.length))return k;var z=-1,X=[],ue=f.length;for(y=on(y,3);++z<ue;){var Ee=f[z];y(Ee,z,f)&&(k.push(Ee),X.push(z))}return km(f,X),k}function wf(f){return f==null?f:uf.call(f)}function tw(f,y,k){var z=f==null?0:f.length;return z?(k&&typeof k!="number"&&wo(f,y,k)?(y=0,k=z):(y=y==null?0:hn(y),k=k===n?z:hn(k)),ta(f,y,k)):[]}function nw(f,y){return Id(f,y)}function Gd(f,y,k){return Pm(f,y,on(k,2))}function sg(f,y){var k=f==null?0:f.length;if(k){var z=Id(f,y);if(z<k&&te(f[z],y))return z}return-1}function rw(f,y){return Id(f,y,!0)}function lg(f,y,k){return Pm(f,y,on(k,2),!0)}function ug(f,y){var k=f==null?0:f.length;if(k){var z=Id(f,y,!0)-1;if(te(f[z],y))return z}return-1}function Jc(f){return f&&f.length?R_(f):[]}function f0(f,y){return f&&f.length?R_(f,on(y,2)):[]}function d0(f){var y=f==null?0:f.length;return y?ta(f,1,y):[]}function cg(f,y,k){return f&&f.length?(y=k||y===n?1:hn(y),ta(f,0,y<0?0:y)):[]}function p0(f,y,k){var z=f==null?0:f.length;return z?(y=k||y===n?1:hn(y),y=z-y,ta(f,y<0?0:y,z)):[]}function Hd(f,y){return f&&f.length?Ld(f,on(y,3),!1,!0):[]}function m0(f,y){return f&&f.length?Ld(f,on(y,3)):[]}var iw=In(function(f){return Qs(cn(f,1,ze,!0))}),ow=In(function(f){var y=jo(f);return ze(y)&&(y=n),Qs(cn(f,1,ze,!0),on(y,2))}),g0=In(function(f){var y=jo(f);return y=typeof y=="function"?y:n,Qs(cn(f,1,ze,!0),n,y)});function aw(f){return f&&f.length?Qs(f):[]}function sw(f,y){return f&&f.length?Qs(f,on(y,2)):[]}function lw(f,y){return y=typeof y=="function"?y:n,f&&f.length?Qs(f,n,y):[]}function hg(f){if(!(f&&f.length))return[];var y=0;return f=pa(f,function(k){if(ze(k))return y=zr(k.length,y),!0}),bc(y,function(k){return Ir(f,or(k))})}function Wd(f,y){if(!(f&&f.length))return[];var k=hg(f);return y==null?k:Ir(k,function(z){return oi(y,n,z)})}var Hl=In(function(f,y){return ze(f)?Ji(f,y):[]}),y0=In(function(f){return Im(pa(f,ze))}),_0=In(function(f){var y=jo(f);return ze(y)&&(y=n),Im(pa(f,ze),on(y,2))}),v0=In(function(f){var y=jo(f);return y=typeof y=="function"?y:n,Im(pa(f,ze),n,y)}),x0=In(hg);function b0(f,y){return z_(f||[],y||[],_t)}function fg(f,y){return z_(f||[],y||[],Js)}var Zd=In(function(f){var y=f.length,k=y>1?f[y-1]:n;return k=typeof k=="function"?(f.pop(),k):n,Wd(f,k)});function dg(f){var y=ie(f);return y.__chain__=!0,y}function pg(f,y){return y(f),f}function Sf(f,y){return y(f)}var na=Ua(function(f){var y=f.length,k=y?f[0]:0,z=this.__wrapped__,X=function(ue){return nn(ue,f)};return y>1||this.__actions__.length||!(z instanceof Sn)||!gs(k)?this.thru(X):(z=z.slice(k,+k+(y?1:0)),z.__actions__.push({func:Sf,args:[X],thisArg:n}),new Yi(z,this.__chain__).thru(function(ue){return y&&!ue.length&&ue.push(n),ue}))});function Cf(){return dg(this)}function w0(){return new Yi(this.value(),this.__chain__)}function S0(){this.__values__===n&&(this.__values__=$i(this.value()));var f=this.__index__>=this.__values__.length,y=f?n:this.__values__[this.__index__++];return{done:f,value:y}}function C0(){return this}function E0(f){for(var y,k=this;k instanceof $l;){var z=_f(k);z.__index__=0,z.__values__=n,y?X.__wrapped__=z:y=z;var X=z;k=k.__wrapped__}return X.__wrapped__=f,y}function k0(){var f=this.__wrapped__;if(f instanceof Sn){var y=f;return this.__actions__.length&&(y=new Sn(this)),y=y.reverse(),y.__actions__.push({func:Sf,args:[wf],thisArg:n}),new Yi(y,this.__chain__)}return this.thru(wf)}function A0(){return D_(this.__wrapped__,this.__actions__)}var uw=pf(function(f,y,k){ht.call(f,k)?++f[k]:dn(f,k,1)});function T0(f,y,k){var z=pe(f)?Qh:va;return k&&wo(f,y,k)&&(y=n),z(f,on(y,3))}function Wl(f,y){var k=pe(f)?pa:li;return k(f,on(y,3))}var P0=Rm(ig),I0=Rm(il);function M0(f,y){return cn(Bu(f,y),1)}function L0(f,y){return cn(Bu(f,y),Vt)}function cw(f,y,k){return k=k===n?1:hn(k),cn(Bu(f,y),k)}function O0(f,y){var k=pe(f)?ki:yi;return k(f,on(y,3))}function mg(f,y){var k=pe(f)?Il:Li;return k(f,on(y,3))}var Qc=pf(function(f,y,k){ht.call(f,k)?f[k].push(y):dn(f,k,[y])});function F0(f,y,k,z){f=ke(f)?f:np(f),k=k&&!z?hn(k):0;var X=f.length;return k<0&&(k=zr(X+k,0)),Ti(f)?k<=X&&f.indexOf(y,k)>-1:!!X&&hr(f,y,k)>-1}var Kd=In(function(f,y,k){var z=-1,X=typeof y=="function",ue=ke(f)?Ye(f.length):[];return yi(f,function(Ee){ue[++z]=X?oi(y,Ee,k):Nl(Ee,y,k)}),ue}),R0=pf(function(f,y,k){dn(f,k,y)});function Bu(f,y){var k=pe(f)?Ir:wm;return k(f,on(y,3))}function Xd(f,y,k,z){return f==null?[]:(pe(y)||(y=y==null?[]:[y]),k=z?n:k,pe(k)||(k=k==null?[]:[k]),Cm(f,y,k))}var Yd=pf(function(f,y,k){f[k?0:1].push(y)},function(){return[[],[]]});function hw(f,y,k){var z=pe(f)?Vs:gu,X=arguments.length<3;return z(f,on(y,4),k,X,yi)}function fw(f,y,k){var z=pe(f)?_m:gu,X=arguments.length<3;return z(f,on(y,4),k,X,Li)}function dw(f,y){var k=pe(f)?pa:li;return k(f,nh(on(y,3)))}function pw(f){var y=pe(f)?it:O_;return y(f)}function eh(f,y,k){(k?wo(f,y,k):y===n)?y=1:y=hn(y);var z=pe(f)?Et:Tm;return z(f,y)}function gg(f){var y=pe(f)?Nt:Fb;return y(f)}function D0(f){if(f==null)return 0;if(ke(f))return Ti(f)?Ki(f):f.length;var y=lo(f);return y==yr||y==ti?f.size:Ou(f).length}function yg(f,y,k){var z=pe(f)?ef:Rb;return k&&wo(f,y,k)&&(y=n),z(f,on(y,3))}var mw=In(function(f,y){if(f==null)return[];var k=y.length;return k>1&&wo(f,y[0],y[1])?y=[]:k>2&&wo(y[0],y[1],y[2])&&(y=[y[0]]),Cm(f,cn(y,1),[])}),Ef=Bo||function(){return Ei.Date.now()};function z0(f,y){if(typeof y!="function")throw new qr(d);return f=hn(f),function(){if(--f<1)return y.apply(this,arguments)}}function B0(f,y,k){return y=k?n:y,y=f&&y==null?f.length:y,ms(f,oe,n,n,n,n,y)}function _g(f,y){var k;if(typeof y!="function")throw new qr(d);return f=hn(f),function(){return--f>0&&(k=y.apply(this,arguments)),f<=1&&(y=n),k}}var kf=In(function(f,y,k){var z=Z;if(k.length){var X=Do(k,Zc(kf));z|=se}return ms(f,z,y,k,X)}),Jd=In(function(f,y,k){var z=Z|R;if(k.length){var X=Do(k,Zc(Jd));z|=se}return ms(y,z,f,k,X)});function vg(f,y,k){y=k?n:y;var z=ms(f,G,n,n,n,n,n,y);return z.placeholder=vg.placeholder,z}function th(f,y,k){y=k?n:y;var z=ms(f,Q,n,n,n,n,n,y);return z.placeholder=th.placeholder,z}function Qd(f,y,k){var z,X,ue,Ee,Ie,Ge,ft=0,dt=!1,yt=!1,Ut=!0;if(typeof f!="function")throw new qr(d);y=wi(y)||0,Ht(k)&&(dt=!!k.leading,yt="maxWait"in k,ue=yt?zr(wi(k.maxWait)||0,y):ue,Ut="trailing"in k?!!k.trailing:Ut);function tn(Pi){var sl=z,Nu=X;return z=X=n,ft=Pi,Ee=f.apply(Nu,sl),Ee}function gn(Pi){return ft=Pi,Ie=yf(Kn,y),dt?tn(Pi):Ee}function Dn(Pi){var sl=Pi-Ge,Nu=Pi-ft,A3=y-sl;return yt?Lt(A3,ue-Nu):A3}function yn(Pi){var sl=Pi-Ge,Nu=Pi-ft;return Ge===n||sl>=y||sl<0||yt&&Nu>=ue}function Kn(){var Pi=Ef();if(yn(Pi))return nr(Pi);Ie=yf(Kn,Dn(Pi))}function nr(Pi){return Ie=n,Ut&&z?tn(Pi):(z=X=n,Ee)}function ja(){Ie!==n&&Fu(Ie),ft=0,z=Ge=X=Ie=n}function aa(){return Ie===n?Ee:nr(Ef())}function Va(){var Pi=Ef(),sl=yn(Pi);if(z=arguments,X=this,Ge=Pi,sl){if(Ie===n)return gn(Ge);if(yt)return Fu(Ie),Ie=yf(Kn,y),tn(Ge)}return Ie===n&&(Ie=yf(Kn,y)),Ee}return Va.cancel=ja,Va.flush=aa,Va}var $0=In(function(f,y){return oo(f,1,y)}),xg=In(function(f,y,k){return oo(f,wi(y)||0,k)});function ep(f){return ms(f,Oe)}function Zl(f,y){if(typeof f!="function"||y!=null&&typeof y!="function")throw new qr(d);var k=function(){var z=arguments,X=y?y.apply(this,z):z[0],ue=k.cache;if(ue.has(X))return ue.get(X);var Ee=f.apply(this,z);return k.cache=ue.set(X,Ee)||ue,Ee};return k.cache=new(Zl.Cache||D),k}Zl.Cache=D;function nh(f){if(typeof f!="function")throw new qr(d);return function(){var y=arguments;switch(y.length){case 0:return!f.call(this);case 1:return!f.call(this,y[0]);case 2:return!f.call(this,y[0],y[1]);case 3:return!f.call(this,y[0],y[1],y[2])}return!f.apply(this,y)}}function bg(f){return _g(2,f)}var wg=Om(function(f,y){y=y.length==1&&pe(y[0])?Ir(y[0],Zi(on())):Ir(cn(y,1),Zi(on()));var k=y.length;return In(function(z){for(var X=-1,ue=Lt(z.length,k);++X<ue;)z[X]=y[X].call(this,z[X]);return oi(f,this,z)})}),Sg=In(function(f,y){var k=Do(y,Zc(Sg));return ms(f,se,n,y,k)}),s=In(function(f,y){var k=Do(y,Zc(s));return ms(f,ee,n,y,k)}),i=Ua(function(f,y){return ms(f,xe,n,n,n,y)});function u(f,y){if(typeof f!="function")throw new qr(d);return y=y===n?y:hn(y),In(f,y)}function p(f,y){if(typeof f!="function")throw new qr(d);return y=y==null?0:zr(hn(y),0),In(function(k){var z=k[y],X=jl(k,0,y);return z&&Fa(X,z),oi(f,this,X)})}function g(f,y,k){var z=!0,X=!0;if(typeof f!="function")throw new qr(d);return Ht(k)&&(z="leading"in k?!!k.leading:z,X="trailing"in k?!!k.trailing:X),Qd(f,y,{leading:z,maxWait:y,trailing:X})}function S(f){return B0(f,1)}function C(f,y){return Sg(Lm(y),f)}function T(){if(!arguments.length)return[];var f=arguments[0];return pe(f)?f:[f]}function M(f){return fr(f,F)}function B(f,y){return y=typeof y=="function"?y:n,fr(f,F,y)}function j(f){return fr(f,A|F)}function H(f,y){return y=typeof y=="function"?y:n,fr(f,A|F,y)}function Y(f,y){return y==null||si(f,y,Er(y))}function te(f,y){return f===y||f!==f&&y!==y}var re=tl(Nc),ge=tl(function(f,y){return f>=y}),ve=Cd(function(){return arguments}())?Cd:function(f){return pn(f)&&ht.call(f,"callee")&&!Xi.call(f,"callee")},pe=Ye.isArray,Be=gc?Zi(gc):k_;function ke(f){return f!=null&&qt(f.length)&&!ct(f)}function ze(f){return pn(f)&&ke(f)}function He(f){return f===!0||f===!1||pn(f)&&Qi(f)==un}var et=Tu||Pw,Rt=yc?Zi(yc):Lb;function $t(f){return pn(f)&&f.nodeType===1&&!vi(f)}function Ft(f){if(f==null)return!0;if(ke(f)&&(pe(f)||typeof f=="string"||typeof f.splice=="function"||et(f)||xi(f)||ve(f)))return!f.length;var y=lo(f);if(y==yr||y==ti)return!f.size;if(nl(f))return!Ou(f).length;for(var k in f)if(ht.call(f,k))return!1;return!0}function Pt(f,y){return Uc(f,y)}function wt(f,y,k){k=typeof k=="function"?k:n;var z=k?k(f,y):n;return z===n?Uc(f,y,n,k):!!z}function Mt(f){if(!pn(f))return!1;var y=Qi(f);return y==Bn||y==Qn||typeof f.message=="string"&&typeof f.name=="string"&&!vi(f)}function It(f){return typeof f=="number"&&sf(f)}function ct(f){if(!Ht(f))return!1;var y=Qi(f);return y==ei||y==Je||y==Qt||y==Mo}function Yt(f){return typeof f=="number"&&f==hn(f)}function qt(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Ve}function Ht(f){var y=typeof f;return f!=null&&(y=="object"||y=="function")}function pn(f){return f!=null&&typeof f=="object"}var br=js?Zi(js):xm;function hi(f,y){return f===y||bm(f,y,Vm(y))}function Vo(f,y,k){return k=typeof k=="function"?k:n,bm(f,y,Vm(y),k)}function uo(f){return co(f)&&f!=+f}function Br(f){if(Hb(f))throw new ln(c);return Ed(f)}function _i(f){return f===null}function Ri(f){return f==null}function co(f){return typeof f=="number"||pn(f)&&Qi(f)==Gi}function vi(f){if(!pn(f)||Qi(f)!=_n)return!1;var y=Fl(f);if(y===null)return!0;var k=ht.call(y,"constructor")&&y.constructor;return typeof k=="function"&&k instanceof k&&Eu.call(k)==Pc}var $r=Yh?Zi(Yh):A_;function fi(f){return Yt(f)&&f>=-Ve&&f<=Ve}var Di=Jh?Zi(Jh):T_;function Ti(f){return typeof f=="string"||!pe(f)&&pn(f)&&Qi(f)==Yn}function Cr(f){return typeof f=="symbol"||pn(f)&&Qi(f)==Oo}var xi=_c?Zi(_c):jc;function Nr(f){return f===n}function zi(f){return pn(f)&&lo(f)==vt}function Tn(f){return pn(f)&&Qi(f)==ni}var qo=tl(Vc),Bi=tl(function(f,y){return f<=y});function $i(f){if(!f)return[];if(ke(f))return Ti(f)?io(f):so(f);if(Xs&&f[Xs])return Ll(f[Xs]());var y=lo(f),k=y==yr?Ws:y==ti?xu:np;return k(f)}function bi(f){if(!f)return f===0?f:0;if(f=wi(f),f===Vt||f===-Vt){var y=f<0?-1:1;return y*_e}return f===f?f:0}function hn(f){var y=bi(f),k=y%1;return y===y?k?y-k:y:0}function Sa(f){return f?ir(hn(f),0,K):0}function wi(f){if(typeof f=="number")return f;if(Cr(f))return we;if(Ht(f)){var y=typeof f.valueOf=="function"?f.valueOf():f;f=Ht(y)?y+"":y}if(typeof f!="string")return f===0?f:+f;f=Sc(f);var k=Wn.test(f);return k||Nn.test(f)?Pl(f.slice(2),k?2:8):Hn.test(f)?we:+f}function ra(f){return wa(f,Ni(f))}function ia(f){return f?ir(hn(f),-Ve,Ve):f===0?f:0}function Cn(f){return f==null?"":ao(f)}var ol=ps(function(f,y){if(nl(y)||ke(y)){wa(y,Er(y),f);return}for(var k in y)ht.call(y,k)&&_t(f,k,y[k])}),rh=ps(function(f,y){wa(y,Ni(y),f)}),Af=ps(function(f,y,k,z){wa(y,Ni(y),f,z)}),Cg=ps(function(f,y,k,z){wa(y,Er(y),f,z)}),Eg=Ua(nn);function al(f,y){var k=No(f);return y==null?k:Un(k,y)}var N0=In(function(f,y){f=gr(f);var k=-1,z=y.length,X=z>2?y[2]:n;for(X&&wo(y[0],y[1],X)&&(z=1);++k<z;)for(var ue=y[k],Ee=Ni(ue),Ie=-1,Ge=Ee.length;++Ie<Ge;){var ft=Ee[Ie],dt=f[ft];(dt===n||te(dt,ma[ft])&&!ht.call(f,ft))&&(f[ft]=ue[ft])}return f}),kg=In(function(f){return f.push(n,Z_),oi(_3,n,f)});function Ag(f,y){return mu(f,on(y,3),kn)}function U0(f,y){return mu(f,on(y,3),Wr)}function gw(f,y){return f==null?f:Hr(f,on(y,3),Ni)}function yw(f,y){return f==null?f:ui(f,on(y,3),Ni)}function _w(f,y){return f&&kn(f,on(y,3))}function vw(f,y){return f&&Wr(f,on(y,3))}function xw(f){return f==null?[]:Fi(f,Er(f))}function bw(f){return f==null?[]:Fi(f,Ni(f))}function Tg(f,y,k){var z=f==null?n:xa(f,y);return z===n?k:z}function ww(f,y){return f!=null&&Hm(f,y,xr)}function oa(f,y){return f!=null&&Hm(f,y,hf)}var tp=G_(function(f,y,k){y!=null&&typeof y.toString!="function"&&(y=ku.call(y)),f[y]=k},Cw(Ca)),j0=G_(function(f,y,k){y!=null&&typeof y.toString!="function"&&(y=ku.call(y)),ht.call(f,y)?f[y].push(k):f[y]=[k]},on),Co=In(Nl);function Er(f){return ke(f)?ut(f):Ou(f)}function Ni(f){return ke(f)?ut(f,!0):kd(f)}function Tf(f,y){var k={};return y=on(y,3),kn(f,function(z,X,ue){dn(k,y(z,X,ue),z)}),k}function V0(f,y){var k={};return y=on(y,3),kn(f,function(z,X,ue){dn(k,X,y(z,X,ue))}),k}var $u=ps(function(f,y,k){Ai(f,y,k)}),_3=ps(function(f,y,k,z){Ai(f,y,k,z)}),PF=Ua(function(f,y){var k={};if(f==null)return k;var z=!1;y=Ir(y,function(ue){return ue=Ul(ue,f),z||(z=ue.length>1),ue}),wa(f,jm(f),k),z&&(k=fr(k,A|L|F,Nb));for(var X=y.length;X--;)el(k,y[X]);return k});function IF(f,y){return v3(f,nh(on(y)))}var MF=Ua(function(f,y){return f==null?{}:ff(f,y)});function v3(f,y){if(f==null)return{};var k=Ir(jm(f),function(z){return[z]});return y=on(y),M_(f,k,function(z,X){return y(z,X[0])})}function LF(f,y,k){y=Ul(y,f);var z=-1,X=y.length;for(X||(X=1,f=n);++z<X;){var ue=f==null?n:f[ys(y[z])];ue===n&&(z=X,ue=k),f=ct(ue)?ue.call(f):ue}return f}function OF(f,y,k){return f==null?f:Js(f,y,k)}function FF(f,y,k,z){return z=typeof z=="function"?z:n,f==null?f:Js(f,y,k,z)}var x3=$m(Er),b3=$m(Ni);function RF(f,y,k){var z=pe(f),X=z||et(f)||xi(f);if(y=on(y,4),k==null){var ue=f&&f.constructor;X?k=z?new ue:[]:Ht(f)?k=ct(ue)?No(Fl(f)):{}:k={}}return(X?ki:kn)(f,function(Ee,Ie,Ge){return y(k,Ee,Ie,Ge)}),k}function DF(f,y){return f==null?!0:el(f,y)}function zF(f,y,k){return f==null?f:Gc(f,y,Lm(k))}function BF(f,y,k,z){return z=typeof z=="function"?z:n,f==null?f:Gc(f,y,Lm(k),z)}function np(f){return f==null?[]:yu(f,Er(f))}function $F(f){return f==null?[]:yu(f,Ni(f))}function NF(f,y,k){return k===n&&(k=y,y=n),k!==n&&(k=wi(k),k=k===k?k:0),y!==n&&(y=wi(y),y=y===y?y:0),ir(wi(f),y,k)}function UF(f,y,k){return y=bi(y),k===n?(k=y,y=0):k=bi(k),f=wi(f),Mu(f,y,k)}function jF(f,y,k){if(k&&typeof k!="boolean"&&wo(f,y,k)&&(y=k=n),k===n&&(typeof y=="boolean"?(k=y,y=n):typeof f=="boolean"&&(k=f,f=n)),f===n&&y===n?(f=0,y=1):(f=bi(f),y===n?(y=f,f=0):y=bi(y)),f>y){var z=f;f=y,y=z}if(k||f%1||y%1){var X=Oc();return Lt(f+X*(y-f+hd("1e-"+((X+"").length-1))),y)}return Pd(f,y)}var VF=Vl(function(f,y,k){return y=y.toLowerCase(),f+(k?w3(y):y)});function w3(f){return Sw(Cn(f).toLowerCase())}function S3(f){return f=Cn(f),f&&f.replace(cr,Vr).replace(du,"")}function qF(f,y,k){f=Cn(f),y=ao(y);var z=f.length;k=k===n?z:ir(hn(k),0,z);var X=k;return k-=y.length,k>=0&&f.slice(k,X)==y}function GF(f){return f=Cn(f),f&&wr.test(f)?f.replace(La,Hs):f}function HF(f){return f=Cn(f),f&&Te.test(f)?f.replace(Re,"\\$&"):f}var WF=Vl(function(f,y,k){return f+(k?"-":"")+y.toLowerCase()}),ZF=Vl(function(f,y,k){return f+(k?" ":"")+y.toLowerCase()}),KF=Dd("toLowerCase");function XF(f,y,k){f=Cn(f),y=hn(y);var z=y?Ki(f):0;if(!y||z>=y)return f;var X=(y-z)/2;return Na(zl(X),k)+f+Na(Ys(X),k)}function YF(f,y,k){f=Cn(f),y=hn(y);var z=y?Ki(f):0;return y&&z<y?f+Na(y-z,k):f}function JF(f,y,k){f=Cn(f),y=hn(y);var z=y?Ki(f):0;return y&&z<y?Na(y-z,k)+f:f}function QF(f,y,k){return k||y==null?y=0:y&&(y=+y),Lc(Cn(f).replace(Ae,""),y||0)}function eR(f,y,k){return(k?wo(f,y,k):y===n)?y=1:y=hn(y),Am(Cn(f),y)}function tR(){var f=arguments,y=Cn(f[0]);return f.length<3?y:y.replace(f[1],f[2])}var nR=Vl(function(f,y,k){return f+(k?"_":"")+y.toLowerCase()});function rR(f,y,k){return k&&typeof k!="number"&&wo(f,y,k)&&(y=k=n),k=k===n?K:k>>>0,k?(f=Cn(f),f&&(typeof y=="string"||y!=null&&!$r(y))&&(y=ao(y),!y&&us(f))?jl(io(f),0,k):f.split(y,k)):[]}var iR=Vl(function(f,y,k){return f+(k?" ":"")+Sw(y)});function oR(f,y,k){return f=Cn(f),k=k==null?0:ir(hn(k),0,f.length),y=ao(y),f.slice(k,k+y.length)==y}function aR(f,y,k){var z=ie.templateSettings;k&&wo(f,y,k)&&(y=n),f=Cn(f),y=Af({},y,z,W_);var X=Af({},y.imports,z.imports,W_),ue=Er(X),Ee=yu(X,ue),Ie,Ge,ft=0,dt=y.interpolate||Lr,yt="__p += '",Ut=cs((y.escape||Lr).source+"|"+dt.source+"|"+(dt===J?Zt:Lr).source+"|"+(y.evaluate||Lr).source+"|$","g"),tn="//# sourceURL="+(ht.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kh+"]")+`
`;f.replace(Ut,function(yn,Kn,nr,ja,aa,Va){return nr||(nr=ja),yt+=f.slice(ft,Va).replace(pr,Ro),Kn&&(Ie=!0,yt+=`' +
__e(`+Kn+`) +
'`),aa&&(Ge=!0,yt+=`';
`+aa+`;
__p += '`),nr&&(yt+=`' +
((__t = (`+nr+`)) == null ? '' : __t) +
'`),ft=Va+yn.length,yn}),yt+=`';
`;var gn=ht.call(y,"variable")&&y.variable;if(!gn)yt=`with (obj) {
`+yt+`
}
`;else if(fn.test(gn))throw new ln(l);yt=(Ge?yt.replace(bn,""):yt).replace(_r,"$1").replace(Mn,"$1;"),yt="function("+(gn||"obj")+`) {
`+(gn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ie?", __e = _.escape":"")+(Ge?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yt+`return __p
}`;var Dn=E3(function(){return tr(ue,tn+"return "+yt).apply(n,Ee)});if(Dn.source=yt,Mt(Dn))throw Dn;return Dn}function sR(f){return Cn(f).toLowerCase()}function lR(f){return Cn(f).toUpperCase()}function uR(f,y,k){if(f=Cn(f),f&&(k||y===n))return Sc(f);if(!f||!(y=ao(y)))return f;var z=io(f),X=io(y),ue=_u(z,X),Ee=Cc(z,X)+1;return jl(z,ue,Ee).join("")}function cR(f,y,k){if(f=Cn(f),f&&(k||y===n))return f.slice(0,bu(f)+1);if(!f||!(y=ao(y)))return f;var z=io(f),X=Cc(z,io(y))+1;return jl(z,0,X).join("")}function hR(f,y,k){if(f=Cn(f),f&&(k||y===n))return f.replace(Ae,"");if(!f||!(y=ao(y)))return f;var z=io(f),X=_u(z,io(y));return jl(z,X).join("")}function fR(f,y){var k=Le,z=qe;if(Ht(y)){var X="separator"in y?y.separator:X;k="length"in y?hn(y.length):k,z="omission"in y?ao(y.omission):z}f=Cn(f);var ue=f.length;if(us(f)){var Ee=io(f);ue=Ee.length}if(k>=ue)return f;var Ie=k-Ki(z);if(Ie<1)return z;var Ge=Ee?jl(Ee,0,Ie).join(""):f.slice(0,Ie);if(X===n)return Ge+z;if(Ee&&(Ie+=Ge.length-Ie),$r(X)){if(f.slice(Ie).search(X)){var ft,dt=Ge;for(X.global||(X=cs(X.source,Cn(rn.exec(X))+"g")),X.lastIndex=0;ft=X.exec(dt);)var yt=ft.index;Ge=Ge.slice(0,yt===n?Ie:yt)}}else if(f.indexOf(ao(X),Ie)!=Ie){var Ut=Ge.lastIndexOf(X);Ut>-1&&(Ge=Ge.slice(0,Ut))}return Ge+z}function dR(f){return f=Cn(f),f&&ri.test(f)?f.replace(On,vd):f}var pR=Vl(function(f,y,k){return f+(k?" ":"")+y.toUpperCase()}),Sw=Dd("toUpperCase");function C3(f,y,k){return f=Cn(f),y=k?n:y,y===n?yd(f)?bd(f):tf(f):f.match(y)||[]}var E3=In(function(f,y){try{return oi(f,n,y)}catch(k){return Mt(k)?k:new ln(k)}}),mR=Ua(function(f,y){return ki(y,function(k){k=ys(k),dn(f,k,kf(f[k],f))}),f});function gR(f){var y=f==null?0:f.length,k=on();return f=y?Ir(f,function(z){if(typeof z[1]!="function")throw new qr(d);return[k(z[0]),z[1]]}):[],In(function(z){for(var X=-1;++X<y;){var ue=f[X];if(oi(ue[0],this,z))return oi(ue[1],this,z)}})}function yR(f){return Gr(fr(f,A))}function Cw(f){return function(){return f}}function _R(f,y){return f==null||f!==f?y:f}var vR=q_(),xR=q_(!0);function Ca(f){return f}function Ew(f){return P_(typeof f=="function"?f:fr(f,A))}function bR(f){return Sm(fr(f,A))}function wR(f,y){return I_(f,fr(y,A))}var SR=In(function(f,y){return function(k){return Nl(k,f,y)}}),CR=In(function(f,y){return function(k){return Nl(f,k,y)}});function kw(f,y,k){var z=Er(y),X=Fi(y,z);k==null&&!(Ht(y)&&(X.length||!z.length))&&(k=y,y=f,f=this,X=Fi(y,Er(y)));var ue=!(Ht(k)&&"chain"in k)||!!k.chain,Ee=ct(f);return ki(X,function(Ie){var Ge=y[Ie];f[Ie]=Ge,Ee&&(f.prototype[Ie]=function(){var ft=this.__chain__;if(ue||ft){var dt=f(this.__wrapped__),yt=dt.__actions__=so(this.__actions__);return yt.push({func:Ge,args:arguments,thisArg:f}),dt.__chain__=ft,dt}return Ge.apply(f,Fa([this.value()],arguments))})}),f}function ER(){return Ei._===this&&(Ei._=wd),this}function Aw(){}function kR(f){return f=hn(f),In(function(y){return Ad(y,f)})}var AR=Dm(Ir),TR=Dm(Qh),PR=Dm(ef);function k3(f){return Zm(f)?or(ys(f)):Td(f)}function IR(f){return function(y){return f==null?n:xa(f,y)}}var MR=zm(),LR=zm(!0);function Tw(){return[]}function Pw(){return!1}function OR(){return{}}function FR(){return""}function RR(){return!0}function DR(f,y){if(f=hn(f),f<1||f>Ve)return[];var k=K,z=Lt(f,K);y=on(y),f-=K;for(var X=bc(z,y);++k<f;)y(k);return X}function zR(f){return pe(f)?Ir(f,ys):Cr(f)?[f]:so(r0(Cn(f)))}function BR(f){var y=++Ac;return Cn(f)+y}var $R=Bd(function(f,y){return f+y},0),NR=Bm("ceil"),UR=Bd(function(f,y){return f/y},1),jR=Bm("floor");function VR(f){return f&&f.length?ds(f,Ca,Nc):n}function qR(f,y){return f&&f.length?ds(f,on(y,2),Nc):n}function GR(f){return Gs(f,Ca)}function HR(f,y){return Gs(f,on(y,2))}function WR(f){return f&&f.length?ds(f,Ca,Vc):n}function ZR(f,y){return f&&f.length?ds(f,on(y,2),Vc):n}var KR=Bd(function(f,y){return f*y},1),XR=Bm("round"),YR=Bd(function(f,y){return f-y},0);function JR(f){return f&&f.length?rf(f,Ca):0}function QR(f,y){return f&&f.length?rf(f,on(y,2)):0}return ie.after=z0,ie.ary=B0,ie.assign=ol,ie.assignIn=rh,ie.assignInWith=Af,ie.assignWith=Cg,ie.at=Eg,ie.before=_g,ie.bind=kf,ie.bindAll=mR,ie.bindKey=Jd,ie.castArray=T,ie.chain=dg,ie.chunk=Kc,ie.compact=i0,ie.concat=tg,ie.cond=gR,ie.conforms=yR,ie.constant=Cw,ie.countBy=uw,ie.create=al,ie.curry=vg,ie.curryRight=th,ie.debounce=Qd,ie.defaults=N0,ie.defaultsDeep=kg,ie.defer=$0,ie.delay=xg,ie.difference=ng,ie.differenceBy=Zb,ie.differenceWith=Kb,ie.drop=Xb,ie.dropRight=o0,ie.dropRightWhile=a0,ie.dropWhile=So,ie.fill=rg,ie.filter=Wl,ie.flatMap=M0,ie.flatMapDeep=L0,ie.flatMapDepth=cw,ie.flatten=Xc,ie.flattenDeep=vf,ie.flattenDepth=Yc,ie.flip=ep,ie.flow=vR,ie.flowRight=xR,ie.fromPairs=qd,ie.functions=xw,ie.functionsIn=bw,ie.groupBy=Qc,ie.initial=s0,ie.intersection=l0,ie.intersectionBy=Jb,ie.intersectionWith=u0,ie.invert=tp,ie.invertBy=j0,ie.invokeMap=Kd,ie.iteratee=Ew,ie.keyBy=R0,ie.keys=Er,ie.keysIn=Ni,ie.map=Bu,ie.mapKeys=Tf,ie.mapValues=V0,ie.matches=bR,ie.matchesProperty=wR,ie.memoize=Zl,ie.merge=$u,ie.mergeWith=_3,ie.method=SR,ie.methodOf=CR,ie.mixin=kw,ie.negate=nh,ie.nthArg=kR,ie.omit=PF,ie.omitBy=IF,ie.once=bg,ie.orderBy=Xd,ie.over=AR,ie.overArgs=wg,ie.overEvery=TR,ie.overSome=PR,ie.partial=Sg,ie.partialRight=s,ie.partition=Yd,ie.pick=MF,ie.pickBy=v3,ie.property=k3,ie.propertyOf=IR,ie.pull=ew,ie.pullAll=ag,ie.pullAllBy=bf,ie.pullAllWith=_s,ie.pullAt=Gl,ie.range=MR,ie.rangeRight=LR,ie.rearg=i,ie.reject=dw,ie.remove=h0,ie.rest=u,ie.reverse=wf,ie.sampleSize=eh,ie.set=OF,ie.setWith=FF,ie.shuffle=gg,ie.slice=tw,ie.sortBy=mw,ie.sortedUniq=Jc,ie.sortedUniqBy=f0,ie.split=rR,ie.spread=p,ie.tail=d0,ie.take=cg,ie.takeRight=p0,ie.takeRightWhile=Hd,ie.takeWhile=m0,ie.tap=pg,ie.throttle=g,ie.thru=Sf,ie.toArray=$i,ie.toPairs=x3,ie.toPairsIn=b3,ie.toPath=zR,ie.toPlainObject=ra,ie.transform=RF,ie.unary=S,ie.union=iw,ie.unionBy=ow,ie.unionWith=g0,ie.uniq=aw,ie.uniqBy=sw,ie.uniqWith=lw,ie.unset=DF,ie.unzip=hg,ie.unzipWith=Wd,ie.update=zF,ie.updateWith=BF,ie.values=np,ie.valuesIn=$F,ie.without=Hl,ie.words=C3,ie.wrap=C,ie.xor=y0,ie.xorBy=_0,ie.xorWith=v0,ie.zip=x0,ie.zipObject=b0,ie.zipObjectDeep=fg,ie.zipWith=Zd,ie.entries=x3,ie.entriesIn=b3,ie.extend=rh,ie.extendWith=Af,kw(ie,ie),ie.add=$R,ie.attempt=E3,ie.camelCase=VF,ie.capitalize=w3,ie.ceil=NR,ie.clamp=NF,ie.clone=M,ie.cloneDeep=j,ie.cloneDeepWith=H,ie.cloneWith=B,ie.conformsTo=Y,ie.deburr=S3,ie.defaultTo=_R,ie.divide=UR,ie.endsWith=qF,ie.eq=te,ie.escape=GF,ie.escapeRegExp=HF,ie.every=T0,ie.find=P0,ie.findIndex=ig,ie.findKey=Ag,ie.findLast=I0,ie.findLastIndex=il,ie.findLastKey=U0,ie.floor=jR,ie.forEach=O0,ie.forEachRight=mg,ie.forIn=gw,ie.forInRight=yw,ie.forOwn=_w,ie.forOwnRight=vw,ie.get=Tg,ie.gt=re,ie.gte=ge,ie.has=ww,ie.hasIn=oa,ie.head=xf,ie.identity=Ca,ie.includes=F0,ie.indexOf=Yb,ie.inRange=UF,ie.invoke=Co,ie.isArguments=ve,ie.isArray=pe,ie.isArrayBuffer=Be,ie.isArrayLike=ke,ie.isArrayLikeObject=ze,ie.isBoolean=He,ie.isBuffer=et,ie.isDate=Rt,ie.isElement=$t,ie.isEmpty=Ft,ie.isEqual=Pt,ie.isEqualWith=wt,ie.isError=Mt,ie.isFinite=It,ie.isFunction=ct,ie.isInteger=Yt,ie.isLength=qt,ie.isMap=br,ie.isMatch=hi,ie.isMatchWith=Vo,ie.isNaN=uo,ie.isNative=Br,ie.isNil=Ri,ie.isNull=_i,ie.isNumber=co,ie.isObject=Ht,ie.isObjectLike=pn,ie.isPlainObject=vi,ie.isRegExp=$r,ie.isSafeInteger=fi,ie.isSet=Di,ie.isString=Ti,ie.isSymbol=Cr,ie.isTypedArray=xi,ie.isUndefined=Nr,ie.isWeakMap=zi,ie.isWeakSet=Tn,ie.join=c0,ie.kebabCase=WF,ie.last=jo,ie.lastIndexOf=og,ie.lowerCase=ZF,ie.lowerFirst=KF,ie.lt=qo,ie.lte=Bi,ie.max=VR,ie.maxBy=qR,ie.mean=GR,ie.meanBy=HR,ie.min=WR,ie.minBy=ZR,ie.stubArray=Tw,ie.stubFalse=Pw,ie.stubObject=OR,ie.stubString=FR,ie.stubTrue=RR,ie.multiply=KR,ie.nth=Qb,ie.noConflict=ER,ie.noop=Aw,ie.now=Ef,ie.pad=XF,ie.padEnd=YF,ie.padStart=JF,ie.parseInt=QF,ie.random=jF,ie.reduce=hw,ie.reduceRight=fw,ie.repeat=eR,ie.replace=tR,ie.result=LF,ie.round=XR,ie.runInContext=De,ie.sample=pw,ie.size=D0,ie.snakeCase=nR,ie.some=yg,ie.sortedIndex=nw,ie.sortedIndexBy=Gd,ie.sortedIndexOf=sg,ie.sortedLastIndex=rw,ie.sortedLastIndexBy=lg,ie.sortedLastIndexOf=ug,ie.startCase=iR,ie.startsWith=oR,ie.subtract=YR,ie.sum=JR,ie.sumBy=QR,ie.template=aR,ie.times=DR,ie.toFinite=bi,ie.toInteger=hn,ie.toLength=Sa,ie.toLower=sR,ie.toNumber=wi,ie.toSafeInteger=ia,ie.toString=Cn,ie.toUpper=lR,ie.trim=uR,ie.trimEnd=cR,ie.trimStart=hR,ie.truncate=fR,ie.unescape=dR,ie.uniqueId=BR,ie.upperCase=pR,ie.upperFirst=Sw,ie.each=O0,ie.eachRight=mg,ie.first=xf,kw(ie,function(){var f={};return kn(ie,function(y,k){ht.call(ie.prototype,k)||(f[k]=y)}),f}(),{chain:!1}),ie.VERSION=r,ki(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){ie[f].placeholder=ie}),ki(["drop","take"],function(f,y){Sn.prototype[f]=function(k){k=k===n?1:zr(hn(k),0);var z=this.__filtered__&&!y?new Sn(this):this.clone();return z.__filtered__?z.__takeCount__=Lt(k,z.__takeCount__):z.__views__.push({size:Lt(k,K),type:f+(z.__dir__<0?"Right":"")}),z},Sn.prototype[f+"Right"]=function(k){return this.reverse()[f](k).reverse()}}),ki(["filter","map","takeWhile"],function(f,y){var k=y+1,z=k==pt||k==zt;Sn.prototype[f]=function(X){var ue=this.clone();return ue.__iteratees__.push({iteratee:on(X,3),type:k}),ue.__filtered__=ue.__filtered__||z,ue}}),ki(["head","last"],function(f,y){var k="take"+(y?"Right":"");Sn.prototype[f]=function(){return this[k](1).value()[0]}}),ki(["initial","tail"],function(f,y){var k="drop"+(y?"":"Right");Sn.prototype[f]=function(){return this.__filtered__?new Sn(this):this[k](1)}}),Sn.prototype.compact=function(){return this.filter(Ca)},Sn.prototype.find=function(f){return this.filter(f).head()},Sn.prototype.findLast=function(f){return this.reverse().find(f)},Sn.prototype.invokeMap=In(function(f,y){return typeof f=="function"?new Sn(this):this.map(function(k){return Nl(k,f,y)})}),Sn.prototype.reject=function(f){return this.filter(nh(on(f)))},Sn.prototype.slice=function(f,y){f=hn(f);var k=this;return k.__filtered__&&(f>0||y<0)?new Sn(k):(f<0?k=k.takeRight(-f):f&&(k=k.drop(f)),y!==n&&(y=hn(y),k=y<0?k.dropRight(-y):k.take(y-f)),k)},Sn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Sn.prototype.toArray=function(){return this.take(K)},kn(Sn.prototype,function(f,y){var k=/^(?:filter|find|map|reject)|While$/.test(y),z=/^(?:head|last)$/.test(y),X=ie[z?"take"+(y=="last"?"Right":""):y],ue=z||/^find/.test(y);X&&(ie.prototype[y]=function(){var Ee=this.__wrapped__,Ie=z?[1]:arguments,Ge=Ee instanceof Sn,ft=Ie[0],dt=Ge||pe(Ee),yt=function(Kn){var nr=X.apply(ie,Fa([Kn],Ie));return z&&Ut?nr[0]:nr};dt&&k&&typeof ft=="function"&&ft.length!=1&&(Ge=dt=!1);var Ut=this.__chain__,tn=!!this.__actions__.length,gn=ue&&!Ut,Dn=Ge&&!tn;if(!ue&&dt){Ee=Dn?Ee:new Sn(this);var yn=f.apply(Ee,Ie);return yn.__actions__.push({func:Sf,args:[yt],thisArg:n}),new Yi(yn,Ut)}return gn&&Dn?f.apply(this,Ie):(yn=this.thru(yt),gn?z?yn.value()[0]:yn.value():yn)})}),ki(["pop","push","shift","sort","splice","unshift"],function(f){var y=Bt[f],k=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",z=/^(?:pop|shift)$/.test(f);ie.prototype[f]=function(){var X=arguments;if(z&&!this.__chain__){var ue=this.value();return y.apply(pe(ue)?ue:[],X)}return this[k](function(Ee){return y.apply(pe(Ee)?Ee:[],X)})}}),kn(Sn.prototype,function(f,y){var k=ie[y];if(k){var z=k.name+"";ht.call(fs,z)||(fs[z]=[]),fs[z].push({name:y,func:k})}}),fs[zd(n,R).name]=[{name:"wrapper",func:n}],Sn.prototype.clone=cf,Sn.prototype.reverse=zc,Sn.prototype.value=Bc,ie.prototype.at=na,ie.prototype.chain=Cf,ie.prototype.commit=w0,ie.prototype.next=S0,ie.prototype.plant=E0,ie.prototype.reverse=k0,ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=A0,ie.prototype.first=ie.prototype.head,Xs&&(ie.prototype[Xs]=C0),ie},Zs=Su();Us?((Us.exports=Zs)._=Zs,Xh._=Zs):Ei._=Zs}).call(Ss)})(P1,P1.exports);var fa=P1.exports,xl={},Ms={},D6={exports:{}},Dr={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=60103,_x=60106,a_=60107,s_=60108,l_=60114,u_=60109,c_=60110,h_=60112,f_=60113,WE=60120,d_=60115,p_=60116,z6=60121,B6=60122,$6=60117,N6=60129,U6=60131;if(typeof Symbol=="function"&&Symbol.for){var Eo=Symbol.for;yx=Eo("react.element"),_x=Eo("react.portal"),a_=Eo("react.fragment"),s_=Eo("react.strict_mode"),l_=Eo("react.profiler"),u_=Eo("react.provider"),c_=Eo("react.context"),h_=Eo("react.forward_ref"),f_=Eo("react.suspense"),WE=Eo("react.suspense_list"),d_=Eo("react.memo"),p_=Eo("react.lazy"),z6=Eo("react.block"),B6=Eo("react.server.block"),$6=Eo("react.fundamental"),N6=Eo("react.debug_trace_mode"),U6=Eo("react.legacy_hidden")}function bl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yx:switch(e=e.type,e){case a_:case l_:case s_:case f_:case WE:return e;default:switch(e=e&&e.$$typeof,e){case c_:case h_:case p_:case d_:case u_:return e;default:return t}}case _x:return t}}}var Cz=u_,Ez=yx,kz=h_,Az=a_,Tz=p_,Pz=d_,Iz=_x,Mz=l_,Lz=s_,Oz=f_;Dr.ContextConsumer=c_;Dr.ContextProvider=Cz;Dr.Element=Ez;Dr.ForwardRef=kz;Dr.Fragment=Az;Dr.Lazy=Tz;Dr.Memo=Pz;Dr.Portal=Iz;Dr.Profiler=Mz;Dr.StrictMode=Lz;Dr.Suspense=Oz;Dr.isAsyncMode=function(){return!1};Dr.isConcurrentMode=function(){return!1};Dr.isContextConsumer=function(e){return bl(e)===c_};Dr.isContextProvider=function(e){return bl(e)===u_};Dr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yx};Dr.isForwardRef=function(e){return bl(e)===h_};Dr.isFragment=function(e){return bl(e)===a_};Dr.isLazy=function(e){return bl(e)===p_};Dr.isMemo=function(e){return bl(e)===d_};Dr.isPortal=function(e){return bl(e)===_x};Dr.isProfiler=function(e){return bl(e)===l_};Dr.isStrictMode=function(e){return bl(e)===s_};Dr.isSuspense=function(e){return bl(e)===f_};Dr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===a_||e===l_||e===N6||e===s_||e===f_||e===WE||e===U6||typeof e=="object"&&e!==null&&(e.$$typeof===p_||e.$$typeof===d_||e.$$typeof===u_||e.$$typeof===c_||e.$$typeof===h_||e.$$typeof===$6||e.$$typeof===z6||e[0]===B6)};Dr.typeOf=bl;D6.exports=Dr;var am=D6.exports;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.isArray=Bz;Ms.isBoolean=q6;Ms.isNull=G6;Ms.isNumber=V6;Ms.isObject=zz;Ms.isPrimitiveData=Dz;Ms.isString=j6;Ms.isUndefined=H6;var Fz=fa,Rz=am;function j6(e){return typeof e=="string"}function V6(e){return typeof e=="number"}function q6(e){return typeof e=="boolean"}function G6(e){return e===null}function H6(e){return e===void 0}function Dz(e){return j6(e)||V6(e)||q6(e)||G6(e)||H6(e)}function zz(e){return(0,Fz.isPlainObject)(e)&&!(0,Rz.isElement)(e)}function Bz(e){return Array.isArray(e)}var vx={},W6={},ZE={};Object.defineProperty(ZE,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function BA(e){return Object.prototype.toString.call(e)==="[object Object]"}function $z(e){var t,n;return BA(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(BA(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}ZE.isPlainObject=$z;var KE={},I1=Ss&&Ss.__assign||function(){return I1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},I1.apply(this,arguments)},Nz=Ss&&Ss.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var c=arguments[t],d=0,l=c.length;d<l;d++,a++)r[a]=c[d];return r};Object.defineProperty(KE,"__esModule",{value:!0});var zg=[];function Uz(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function jz(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Vz(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function Kv(e,t,n){n===void 0&&(n="");var r={indent:"	",singleQuotes:!0},a=I1(I1({},r),t),c;a.inlineCharacterLimit===void 0?c={newLine:`
`,newLineOrSpace:`
`,pad:n,indent:n+a.indent}:c={newLine:"@@__PRETTY_PRINT_NEW_LINE__@@",newLineOrSpace:"@@__PRETTY_PRINT_NEW_LINE_OR_SPACE__@@",pad:"@@__PRETTY_PRINT_PAD__@@",indent:"@@__PRETTY_PRINT_INDENT__@@"};var d=function(b){if(a.inlineCharacterLimit===void 0)return b;var E=b.replace(new RegExp(c.newLine,"g"),"").replace(new RegExp(c.newLineOrSpace,"g")," ").replace(new RegExp(c.pad+"|"+c.indent,"g"),"");return E.length<=a.inlineCharacterLimit?E:b.replace(new RegExp(c.newLine+"|"+c.newLineOrSpace,"g"),`
`).replace(new RegExp(c.pad,"g"),n).replace(new RegExp(c.indent,"g"),n+a.indent)};if(zg.indexOf(e)!==-1)return'"[Circular]"';if(e==null||typeof e=="number"||typeof e=="boolean"||typeof e=="function"||typeof e=="symbol"||jz(e))return String(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e)){if(e.length===0)return"[]";zg.push(e);var l="["+c.newLine+e.map(function(b,E){var A=e.length-1===E?c.newLine:","+c.newLineOrSpace,L=Kv(b,a,n+a.indent);return a.transform&&(L=a.transform(e,E,L)),c.indent+L+A}).join("")+c.pad+"]";return zg.pop(),d(l)}if(Uz(e)){var x=Nz(Object.keys(e),Vz(e));if(a.filter&&(x=x.filter(function(E){return a.filter&&a.filter(e,E)})),x.length===0)return"{}";zg.push(e);var l="{"+c.newLine+x.map(function(E,A){var L=x.length-1===A?c.newLine:","+c.newLineOrSpace,F=typeof E=="symbol",$=!F&&/^[a-z$_][a-z$_0-9]*$/i.test(E.toString()),N=F||$?E:Kv(E,a),Z=Kv(e[E],a,n+a.indent);return a.transform&&(Z=a.transform(e,E,Z)),c.indent+String(N)+": "+Z+L}).join("")+c.pad+"}";return zg.pop(),d(l)}return e=String(e).replace(/[\r\n]/g,function(b){return b===`
`?"\\n":"\\r"}),a.singleQuotes?(e=e.replace(/\\?'/g,"\\'"),"'"+e+"'"):(e=e.replace(/"/g,'\\"'),'"'+e+'"')}KE.prettyPrint=Kv;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ZE,n=mt,r=KE,a=am;function c(We){return We&&typeof We=="object"&&"default"in We?We:{default:We}}function d(We){if(We&&We.__esModule)return We;var le=Object.create(null);return We&&Object.keys(We).forEach(function(Fe){if(Fe!=="default"){var Pe=Object.getOwnPropertyDescriptor(We,Fe);Object.defineProperty(le,Fe,Pe.get?Pe:{enumerable:!0,get:function(){return We[Fe]}})}}),le.default=We,Object.freeze(le)}var l=d(n),x=c(n),b=function(We,le){return We===0?"":new Array(We*le).fill(" ").join("")};function E(We){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(le){return typeof le}:E=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},E(We)}function A(We){return L(We)||F(We)||$(We)||Z()}function L(We){if(Array.isArray(We))return N(We)}function F(We){if(typeof Symbol<"u"&&We[Symbol.iterator]!=null||We["@@iterator"]!=null)return Array.from(We)}function $(We,le){if(We){if(typeof We=="string")return N(We,le);var Fe=Object.prototype.toString.call(We).slice(8,-1);if(Fe==="Object"&&We.constructor&&(Fe=We.constructor.name),Fe==="Map"||Fe==="Set")return Array.from(We);if(Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe))return N(We,le)}}function N(We,le){(le==null||le>We.length)&&(le=We.length);for(var Fe=0,Pe=new Array(le);Fe<le;Fe++)Pe[Fe]=We[Fe];return Pe}function Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(We,le){return We===null||E(We)!=="object"||We instanceof Date||We instanceof RegExp||l.isValidElement(We)?We:(le.add(We),Array.isArray(We)?We.map(function(Fe){return R(Fe,le)}):Object.keys(We).sort().reduce(function(Fe,Pe){return Pe==="_owner"||(Pe==="current"||le.has(We[Pe])?Fe[Pe]="[Circular]":Fe[Pe]=R(We[Pe],le)),Fe},{}))}function q(We){return R(We,new WeakSet)}var G=function(le){return{type:"string",value:le}},Q=function(le){return{type:"number",value:le}},se=function(le,Fe,Pe,rt){return{type:"ReactElement",displayName:le,props:Fe,defaultProps:Pe,childrens:rt}},ee=function(le,Fe){return{type:"ReactFragment",key:le,childrens:Fe}},oe=!!n.Fragment,xe=function(le){return!le.name||le.name==="_default"?"No Display Name":le.name},Oe=function We(le){switch(!0){case!!le.displayName:return le.displayName;case le.$$typeof===a.Memo:return We(le.type);case le.$$typeof===a.ForwardRef:return We(le.render);default:return xe(le)}},Le=function(le){switch(!0){case typeof le.type=="string":return le.type;case typeof le.type=="function":return le.type.displayName?le.type.displayName:xe(le.type);case a.isForwardRef(le):case a.isMemo(le):return Oe(le.type);case a.isContextConsumer(le):return"".concat(le.type._context.displayName||"Context",".Consumer");case a.isContextProvider(le):return"".concat(le.type._context.displayName||"Context",".Provider");case a.isLazy(le):return"Lazy";case a.isProfiler(le):return"Profiler";case a.isStrictMode(le):return"StrictMode";case a.isSuspense(le):return"Suspense";default:return"UnknownElementType"}},qe=function(le,Fe){return Fe!=="children"},$e=function(le){return le!==!0&&le!==!1&&le!==null&&le!==""},nt=function(le,Fe){var Pe={};return Object.keys(le).filter(function(rt){return Fe(le[rt],rt)}).forEach(function(rt){return Pe[rt]=le[rt]}),Pe},pt=function We(le,Fe){var Pe=Fe.displayName,rt=Pe===void 0?Le:Pe;if(typeof le=="string")return G(le);if(typeof le=="number")return Q(le);if(!x.default.isValidElement(le))throw new Error("react-element-to-jsx-string: Expected a React.Element, got `".concat(E(le),"`"));var bt=rt(le),vn=nt(le.props,qe);le.ref!==null&&(vn.ref=le.ref);var Wt=le.key;typeof Wt=="string"&&Wt.search(/^\./)&&(vn.key=Wt);var xt=nt(le.type.defaultProps||{},qe),$n=x.default.Children.toArray(le.props.children).filter($e).map(function(jn){return We(jn,Fe)});return oe&&le.type===n.Fragment?ee(Wt,$n):se(bt,vn,xt,$n)};function At(){}var zt=function(le){return le.toString().split(`
`).map(function(Fe){return Fe.trim()}).join("")},Vt=function(le){return le.toString()},Ve=zt,_e=function(We,le){var Fe=le.functionValue,Pe=Fe===void 0?Ve:Fe,rt=le.showFunctions;return Pe(!rt&&Pe===Ve?At:We)},we=function(We,le,Fe,Pe){var rt=q(We),bt=r.prettyPrint(rt,{transform:function(Wt,xt,$n){var jn=Wt[xt];return jn&&n.isValidElement(jn)?vo(pt(jn,Pe),!0,Fe,Pe):typeof jn=="function"?_e(jn,Pe):$n}});return le?bt.replace(/\s+/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\[ /g,"[").replace(/ ]/g,"]"):bt.replace(/\t/g,b(1,Pe.tabStop)).replace(/\n([^$])/g,`
`.concat(b(Fe+1,Pe.tabStop),"$1"))},K=function(le){return le.replace(/"/g,"&quot;")},ae=function(le,Fe,Pe,rt){if(typeof le=="number")return"{".concat(String(le),"}");if(typeof le=="string")return'"'.concat(K(le),'"');if(E(le)==="symbol"){var bt=le.valueOf().toString().replace(/Symbol\((.*)\)/,"$1");return bt?"{Symbol('".concat(bt,"')}"):"{Symbol()}"}return typeof le=="function"?"{".concat(_e(le,rt),"}"):n.isValidElement(le)?"{".concat(vo(pt(le,rt),!0,Pe,rt),"}"):le instanceof Date?isNaN(le.valueOf())?"{new Date(NaN)}":'{new Date("'.concat(le.toISOString(),'")}'):t.isPlainObject(le)||Array.isArray(le)?"{".concat(we(le,Fe,Pe,rt),"}"):"{".concat(String(le),"}")},lt=function(We,le,Fe,Pe,rt,bt,vn,Wt){if(!le&&!Pe)throw new Error('The prop "'.concat(We,'" has no value and no default: could not be formatted'));var xt=le?Fe:rt,$n=Wt.useBooleanShorthandSyntax,jn=Wt.tabStop,bn=ae(xt,bt,vn,Wt),_r=" ",Mn=`
`.concat(b(vn+1,jn)),On=bn.includes(`
`);return $n&&bn==="{false}"&&!Pe?(_r="",Mn=""):$n&&bn==="{true}"?(_r+="".concat(We),Mn+="".concat(We)):(_r+="".concat(We,"=").concat(bn),Mn+="".concat(We,"=").concat(bn)),{attributeFormattedInline:_r,attributeFormattedMultiline:Mn,isMultilineAttribute:On}},gt=function(We,le){var Fe=We.slice(0,We.length>0?We.length-1:0),Pe=We[We.length-1];return Pe&&(le.type==="string"||le.type==="number")&&(Pe.type==="string"||Pe.type==="number")?Fe.push(G(String(Pe.value)+String(le.value))):(Pe&&Fe.push(Pe),Fe.push(le)),Fe},Gt=function(le){return["key","ref"].includes(le)},Dt=function(We){return function(le){var Fe=le.includes("key"),Pe=le.includes("ref"),rt=le.filter(function(vn){return!Gt(vn)}),bt=A(We?rt.sort():rt);return Pe&&bt.unshift("ref"),Fe&&bt.unshift("key"),bt}};function Qt(We,le){return Array.isArray(le)?function(Fe){return le.indexOf(Fe)===-1}:function(Fe){return le(We[Fe],Fe)}}var un=function(le,Fe,Pe,rt,bt){var vn=bt.tabStop;return le.type==="string"?Fe.split(`
`).map(function(Wt,xt){return xt===0?Wt:"".concat(b(rt,vn)).concat(Wt)}).join(`
`):Fe},Xn=function(le,Fe,Pe){return function(rt){return un(rt,vo(rt,le,Fe,Pe),le,Fe,Pe)}},Qn=function(le,Fe){return function(Pe){var rt=Object.keys(le).includes(Pe);return!rt||rt&&le[Pe]!==Fe[Pe]}},Bn=function(le,Fe,Pe,rt,bt){return bt?b(Pe,rt).length+Fe.length>bt:le.length>1},ei=function(le,Fe,Pe,rt,bt,vn,Wt){return(Bn(le,Fe,bt,vn,Wt)||Pe)&&!rt},Je=function(We,le,Fe,Pe){var rt=We.type,bt=We.displayName,vn=bt===void 0?"":bt,Wt=We.childrens,xt=We.props,$n=xt===void 0?{}:xt,jn=We.defaultProps,bn=jn===void 0?{}:jn;if(rt!=="ReactElement")throw new Error('The "formatReactElementNode" function could only format node of type "ReactElement". Given:  '.concat(rt));var _r=Pe.filterProps,Mn=Pe.maxInlineAttributesLineLength,On=Pe.showDefaultProps,La=Pe.sortProps,ri=Pe.tabStop,wr="<".concat(vn),ye=wr,W=wr,J=!1,ce=[],Se=Qt($n,_r);Object.keys($n).filter(Se).filter(Qn(bn,$n)).forEach(function(Te){return ce.push(Te)}),Object.keys(bn).filter(Se).filter(function(){return On}).filter(function(Te){return!ce.includes(Te)}).forEach(function(Te){return ce.push(Te)});var Ce=Dt(La)(ce);if(Ce.forEach(function(Te){var Ae=lt(Te,Object.keys($n).includes(Te),$n[Te],Object.keys(bn).includes(Te),bn[Te],le,Fe,Pe),Ne=Ae.attributeFormattedInline,ot=Ae.attributeFormattedMultiline,at=Ae.isMultilineAttribute;at&&(J=!0),ye+=Ne,W+=ot}),W+=`
`.concat(b(Fe,ri)),ei(Ce,ye,J,le,Fe,ri,Mn)?wr=W:wr=ye,Wt&&Wt.length>0){var Re=Fe+1;wr+=">",le||(wr+=`
`,wr+=b(Re,ri)),wr+=Wt.reduce(gt,[]).map(Xn(le,Re,Pe)).join(le?"":`
`.concat(b(Re,ri))),le||(wr+=`
`,wr+=b(Re-1,ri)),wr+="</".concat(vn,">")}else Bn(Ce,ye,Fe,ri,Mn)||(wr+=" "),wr+="/>";return wr},yr="",Gi="React.Fragment",Gn=function(le,Fe,Pe){var rt={};return Fe&&(rt={key:Fe}),{type:"ReactElement",displayName:le,props:rt,defaultProps:{},childrens:Pe}},_n=function(le){var Fe=le.key;return!!Fe},_o=function(le){var Fe=le.childrens;return Fe.length===0},Mo=function(We,le,Fe,Pe){var rt=We.type,bt=We.key,vn=We.childrens;if(rt!=="ReactFragment")throw new Error('The "formatReactFragmentNode" function could only format node of type "ReactFragment". Given: '.concat(rt));var Wt=Pe.useFragmentShortSyntax,xt;return Wt?_o(We)||_n(We)?xt=Gi:xt=yr:xt=Gi,Je(Gn(xt,bt,vn),le,Fe,Pe)},Lo=["<",">","{","}"],ti=function(le){return Lo.some(function(Fe){return le.includes(Fe)})},Yn=function(le){return ti(le)?"{`".concat(le,"`}"):le},Oo=function(le){var Fe=le;return Fe.endsWith(" ")&&(Fe=Fe.replace(/^(.*?)(\s+)$/,"$1{'$2'}")),Fe.startsWith(" ")&&(Fe=Fe.replace(/^(\s+)(.*)$/,"{'$1'}$2")),Fe},vo=function(We,le,Fe,Pe){if(We.type==="number")return String(We.value);if(We.type==="string")return We.value?"".concat(Oo(Yn(String(We.value)))):"";if(We.type==="ReactElement")return Je(We,le,Fe,Pe);if(We.type==="ReactFragment")return Mo(We,le,Fe,Pe);throw new TypeError('Unknow format type "'.concat(We.type,'"'))},vt=function(We,le){return vo(We,!1,0,le)},ni=function(le){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=Fe.filterProps,rt=Pe===void 0?[]:Pe,bt=Fe.showDefaultProps,vn=bt===void 0?!0:bt,Wt=Fe.showFunctions,xt=Wt===void 0?!1:Wt,$n=Fe.functionValue,jn=Fe.tabStop,bn=jn===void 0?2:jn,_r=Fe.useBooleanShorthandSyntax,Mn=_r===void 0?!0:_r,On=Fe.useFragmentShortSyntax,La=On===void 0?!0:On,ri=Fe.sortProps,wr=ri===void 0?!0:ri,ye=Fe.maxInlineAttributesLineLength,W=Fe.displayName;if(!le)throw new Error("react-element-to-jsx-string: Expected a ReactElement");var J={filterProps:rt,showDefaultProps:vn,showFunctions:xt,functionValue:$n,tabStop:bn,useBooleanShorthandSyntax:Mn,useFragmentShortSyntax:La,sortProps:wr,maxInlineAttributesLineLength:ye,displayName:W};return vt(pt(le,J),J)};e.default=ni,e.inlineFunction=zt,e.preserveFunctionLineBreak=Vt})(W6);Object.defineProperty(vx,"__esModule",{value:!0});vx.createValue=XE;vx.createValues=Z6;var qz=Hz(W6),Gz=am,n2=Ms;function Hz(e){return e&&e.__esModule?e:{default:e}}function Z6(e){var t={};return Object.keys(e).forEach(function(n){t[n]=XE(e[n])}),t}function XE(e){return(0,n2.isPrimitiveData)(e)?{type:"primitive",data:e}:(0,n2.isArray)(e)?{type:"array",values:e.map(function(t){return XE(t)})}:(0,n2.isObject)(e)?{type:"object",values:Z6(e)}:{type:"unserializable",stringifiedData:Wz(e)}}function Wz(e){return(0,Gz.isElement)(e)?(0,qz.default)(e):String(e)}var xx={};Object.defineProperty(xx,"__esModule",{value:!0});xx.extendWithValue=YE;xx.extendWithValues=K6;var $A=Ms;function K6(e,t){var n={};return Object.keys(t).forEach(function(r){n[r]=YE(e[r],t[r])}),n}function YE(e,t){if(t.type==="unserializable")return e;if(t.type==="object"){var n=(0,$A.isObject)(e)?e:{};return K6(n,t.values)}if(t.type==="array"){var r=(0,$A.isArray)(e)?e:[];return t.values.map(function(a,c){return YE(r[c],a)})}return t.data}var lu={},bx={},m_={};Object.defineProperty(m_,"__esModule",{value:!0});m_.removeItemMatch=t9;m_.replaceOrAddItem=e9;m_.updateItem=Qz;var X6=fa;function NA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(n),!0).forEach(function(r){Zz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kh(e){return Jz(e)||Yz(e)||Xz(e)||Kz()}function Kz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xz(e,t){if(e){if(typeof e=="string")return DS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DS(e,t)}}function Yz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jz(e){if(Array.isArray(e))return DS(e)}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qz(e,t,n){var r=e.indexOf(t);return[].concat(kh(e.slice(0,r)),[UA(UA({},t),n)],kh(e.slice(r+1)))}function e9(e,t,n){var r=(0,X6.findIndex)(e,t);return r!==-1?[].concat(kh(e.slice(0,r)),[n],kh(e.slice(r+1))):[].concat(kh(e),[n])}function t9(e,t){var n=(0,X6.findIndex)(e,t);return n===-1?kh(e):[].concat(kh(e.slice(0,n)),kh(e.slice(n+1)))}var wx={};Object.defineProperty(wx,"__esModule",{value:!0});wx.addTreeNodeChild=a9;wx.sortTreeChildren=J6;function jA(e){return o9(e)||i9(e)||r9(e)||n9()}function n9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r9(e,t){if(e){if(typeof e=="string")return zS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zS(e,t)}}function i9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o9(e){if(Array.isArray(e))return zS(e)}function zS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(n),!0).forEach(function(r){Y6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a9(e,t,n){e.children||(e.children={}),e.children[t]=n}function J6(e){var t=e.children;if(!t)return e;var n=Object.keys(t),r=n.filter(function(c){return t[c].children}),a=n.filter(function(c){return!t[c].children});return lv(lv({},e),{},{children:[].concat(jA(r.sort()),jA(a.sort())).reduce(function(c,d){return lv(lv({},c),{},Y6({},d,J6(t[d])))},{})})}var JE={};Object.defineProperty(JE,"__esModule",{value:!0});JE.uuid=Q6;function Q6(e){return e?(Number(e)^Math.random()*16>>Number(e)/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,Q6)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"TreeNode",{enumerable:!0,get:function(){return n.TreeNode}}),Object.defineProperty(e,"addTreeNodeChild",{enumerable:!0,get:function(){return n.addTreeNodeChild}}),Object.defineProperty(e,"removeItemMatch",{enumerable:!0,get:function(){return t.removeItemMatch}}),Object.defineProperty(e,"replaceOrAddItem",{enumerable:!0,get:function(){return t.replaceOrAddItem}}),Object.defineProperty(e,"sortTreeChildren",{enumerable:!0,get:function(){return n.sortTreeChildren}}),Object.defineProperty(e,"updateItem",{enumerable:!0,get:function(){return t.updateItem}}),Object.defineProperty(e,"uuid",{enumerable:!0,get:function(){return r.uuid}});var t=m_,n=wx,r=JE})(bx);Object.defineProperty(lu,"__esModule",{value:!0});lu.DEFAULT_RENDER_KEY=void 0;lu.createFixtureStateProps=l9;lu.findFixtureStateProps=tM;lu.getFixtureStateProps=s9;lu.removeFixtureStateProps=h9;lu.resetFixtureStateProps=u9;lu.updateFixtureStateProps=c9;var BS=fa,Sx=bx,eM=0;lu.DEFAULT_RENDER_KEY=eM;function s9(e,t){var n=e.props;return n?n.filter(function(r){return r.elementId.decoratorId===t}):[]}function tM(e,t){var n=e.props;return n&&(0,BS.find)(n,function(r){return(0,BS.isEqual)(r.elementId,t)})}function l9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=e.componentName,c=t.props,d=c===void 0?[]:c;return(0,Sx.replaceOrAddItem)(d,nM(n),{elementId:n,values:r,renderKey:eM,componentName:a})}function u9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=rM(t,n);return(0,Sx.updateItem)(t.props,a,{values:r,renderKey:a.renderKey+1})}function c9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=rM(t,n);return(0,Sx.updateItem)(t.props,a,{values:r})}function h9(e,t){return(0,Sx.removeItemMatch)(e.props||[],nM(t))}function nM(e){return function(t){return(0,BS.isEqual)(t.elementId,e)}}function rM(e,t){var n=tM(e,t);if(!n){var r=JSON.stringify(t);throw new Error('Fixture state props missing for element "'.concat(r,'"'))}return n}var td={};Object.defineProperty(td,"__esModule",{value:!0});td.createFixtureStateClassState=d9;td.findFixtureStateClassState=iM;td.getFixtureStateClassState=f9;td.removeFixtureStateClassState=m9;td.updateFixtureStateClassState=p9;var $S=fa,QE=bx;function f9(e,t){var n=e.classState;return n?n.filter(function(r){return r.elementId.decoratorId===t}):[]}function iM(e,t){var n=e.classState;return n&&(0,$S.find)(n,function(r){return(0,$S.isEqual)(r.elementId,t)})}function d9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=e.componentName,c=t.classState,d=c===void 0?[]:c;return(0,QE.replaceOrAddItem)(d,oM(n),{elementId:n,values:r,componentName:a})}function p9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=g9(t,n);return(0,QE.updateItem)(t.classState,a,{values:r})}function m9(e,t){return(0,QE.removeItemMatch)(e.classState||[],oM(t))}function oM(e){return function(t){return(0,$S.isEqual)(t.elementId,e)}}function g9(e,t){var n=iM(e,t);if(!n){var r=JSON.stringify(t);throw new Error('Fixture state class state missing for element "'.concat(r,'"'))}return n}var ek={};Object.defineProperty(ek,"__esModule",{value:!0});ek.findFixtureStateControl=y9;function y9(e,t){var n=e.controls;return n&&n[t]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ArrayData",{enumerable:!0,get:function(){return t.ArrayData}}),Object.defineProperty(e,"DEFAULT_RENDER_KEY",{enumerable:!0,get:function(){return a.DEFAULT_RENDER_KEY}}),Object.defineProperty(e,"FixtureDecoratorId",{enumerable:!0,get:function(){return t.FixtureDecoratorId}}),Object.defineProperty(e,"FixtureElementId",{enumerable:!0,get:function(){return t.FixtureElementId}}),Object.defineProperty(e,"FixtureState",{enumerable:!0,get:function(){return t.FixtureState}}),Object.defineProperty(e,"FixtureStateArrayValue",{enumerable:!0,get:function(){return t.FixtureStateArrayValue}}),Object.defineProperty(e,"FixtureStateClassState",{enumerable:!0,get:function(){return t.FixtureStateClassState}}),Object.defineProperty(e,"FixtureStateControl",{enumerable:!0,get:function(){return t.FixtureStateControl}}),Object.defineProperty(e,"FixtureStateControls",{enumerable:!0,get:function(){return t.FixtureStateControls}}),Object.defineProperty(e,"FixtureStateData",{enumerable:!0,get:function(){return t.FixtureStateData}}),Object.defineProperty(e,"FixtureStateObjectValue",{enumerable:!0,get:function(){return t.FixtureStateObjectValue}}),Object.defineProperty(e,"FixtureStatePrimitiveValue",{enumerable:!0,get:function(){return t.FixtureStatePrimitiveValue}}),Object.defineProperty(e,"FixtureStateProps",{enumerable:!0,get:function(){return t.FixtureStateProps}}),Object.defineProperty(e,"FixtureStateSelectControl",{enumerable:!0,get:function(){return t.FixtureStateSelectControl}}),Object.defineProperty(e,"FixtureStateStandardControl",{enumerable:!0,get:function(){return t.FixtureStateStandardControl}}),Object.defineProperty(e,"FixtureStateUnserializableValue",{enumerable:!0,get:function(){return t.FixtureStateUnserializableValue}}),Object.defineProperty(e,"FixtureStateValue",{enumerable:!0,get:function(){return t.FixtureStateValue}}),Object.defineProperty(e,"FixtureStateValues",{enumerable:!0,get:function(){return t.FixtureStateValues}}),Object.defineProperty(e,"ObjectData",{enumerable:!0,get:function(){return t.ObjectData}}),Object.defineProperty(e,"PrimitiveData",{enumerable:!0,get:function(){return t.PrimitiveData}}),Object.defineProperty(e,"SetFixtureState",{enumerable:!0,get:function(){return t.SetFixtureState}}),Object.defineProperty(e,"createFixtureStateClassState",{enumerable:!0,get:function(){return c.createFixtureStateClassState}}),Object.defineProperty(e,"createFixtureStateProps",{enumerable:!0,get:function(){return a.createFixtureStateProps}}),Object.defineProperty(e,"createValue",{enumerable:!0,get:function(){return n.createValue}}),Object.defineProperty(e,"createValues",{enumerable:!0,get:function(){return n.createValues}}),Object.defineProperty(e,"extendWithValue",{enumerable:!0,get:function(){return r.extendWithValue}}),Object.defineProperty(e,"extendWithValues",{enumerable:!0,get:function(){return r.extendWithValues}}),Object.defineProperty(e,"findFixtureStateClassState",{enumerable:!0,get:function(){return c.findFixtureStateClassState}}),Object.defineProperty(e,"findFixtureStateControl",{enumerable:!0,get:function(){return d.findFixtureStateControl}}),Object.defineProperty(e,"findFixtureStateProps",{enumerable:!0,get:function(){return a.findFixtureStateProps}}),Object.defineProperty(e,"getFixtureStateClassState",{enumerable:!0,get:function(){return c.getFixtureStateClassState}}),Object.defineProperty(e,"getFixtureStateProps",{enumerable:!0,get:function(){return a.getFixtureStateProps}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}}),Object.defineProperty(e,"isBoolean",{enumerable:!0,get:function(){return t.isBoolean}}),Object.defineProperty(e,"isNull",{enumerable:!0,get:function(){return t.isNull}}),Object.defineProperty(e,"isNumber",{enumerable:!0,get:function(){return t.isNumber}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return t.isObject}}),Object.defineProperty(e,"isPrimitiveData",{enumerable:!0,get:function(){return t.isPrimitiveData}}),Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return t.isString}}),Object.defineProperty(e,"removeFixtureStateClassState",{enumerable:!0,get:function(){return c.removeFixtureStateClassState}}),Object.defineProperty(e,"removeFixtureStateProps",{enumerable:!0,get:function(){return a.removeFixtureStateProps}}),Object.defineProperty(e,"resetFixtureStateProps",{enumerable:!0,get:function(){return a.resetFixtureStateProps}}),Object.defineProperty(e,"updateFixtureStateClassState",{enumerable:!0,get:function(){return c.updateFixtureStateClassState}}),Object.defineProperty(e,"updateFixtureStateProps",{enumerable:!0,get:function(){return a.updateFixtureStateProps}});var t=Ms,n=vx,r=xx,a=lu,c=td,d=ek})(xl);var wl={},tk={},Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.getComponentName=_9;var r2=new WeakMap;function _9(e){if(typeof e=="string")return e;if(!r2.has(e)){var t=e.displayName||e.name||"";r2.set(e,t)}return r2.get(e)}var Ex={};Object.defineProperty(Ex,"__esModule",{value:!0});Ex.isReactElement=x9;var v9=am;function x9(e){return(0,v9.isElement)(e)}Object.defineProperty(tk,"__esModule",{value:!0});tk.areNodesEqual=nk;var py=fa,qA=Cx,GA=Ex;function nk(e,t,n){return(0,GA.isReactElement)(e)&&(0,GA.isReactElement)(t)?b9(e,t,n):Array.isArray(e)&&Array.isArray(t)?S9(e,t,n):HA(e)&&HA(t)?C9(e,t):(0,py.isEqual)(e,t)}function b9(e,t,n){return w9(e.type,t.type,n)?e.key===t.key&&e.ref===t.ref&&nk(e.props,t.props,n):!1}function w9(e,t,n){return n?e===t:(0,qA.getComponentName)(e)===(0,qA.getComponentName)(t)}function S9(e,t,n){return e.length!==t.length?!1:e.every(function(r,a){return nk(r,t[a],n)})}function HA(e){return(0,py.isPlainObject)(e)}function C9(e,t){return(0,py.isEqual)(Object.keys(e),Object.keys(t))?Object.keys(e).every(function(n){return(0,py.isEqualWith)(e[n],t[n],function(r,a){return typeof r=="function"&&typeof a=="function"?r===a||r.toString()===a.toString():(0,py.isEqual)(r,a)})}):!1}var kx={},Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});Ax.isMultiFixture=k9;var E9=am;function NS(e){"@babel/helpers - typeof";return NS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NS(e)}function k9(e){return e!==null&&NS(e)==="object"&&!(0,E9.isElement)(e)}Object.defineProperty(kx,"__esModule",{value:!0});kx.getFixtureListFromExports=P9;kx.getFixtureListFromWrappers=T9;var A9=Ax;function WA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function M1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(n),!0).forEach(function(r){rk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T9(e){return Object.keys(e).reduce(function(t,n){return M1(M1({},t),{},rk({},n,I9(e[n])))},{})}function P9(e){return Object.keys(e).reduce(function(t,n){return M1(M1({},t),{},rk({},n,aM(e[n])))},{})}function I9(e){return aM(e.module.default)}function aM(e){return(0,A9.isMultiFixture)(e)?{type:"multi",fixtureNames:Object.keys(e)}:{type:"single"}}var ik={};Object.defineProperty(ik,"__esModule",{value:!0});ik.getSortedDecoratorsForFixturePath=D9;function M9(e){return R9(e)||F9(e)||O9(e)||L9()}function L9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O9(e,t){if(e){if(typeof e=="string")return US(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return US(e,t)}}function F9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function R9(e){if(Array.isArray(e))return US(e)}function US(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){sM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D9(e,t){return N9(z9(t,e))}function z9(e,t){return Object.keys(e).filter(function(n){return B9($9(n),t)}).reduce(function(n,r){return KA(KA({},n),{},sM({},r,e[r]))},{})}function B9(e,t){return e===""||t.indexOf("".concat(e,"/"))===0}function $9(e){return e.replace(/^((.+)\/)?.+$/,"$2")}function N9(e){return U9(Object.keys(e)).map(function(t){return e[t]})}function U9(e){return M9(e).sort(function(t,n){return XA(t)-XA(n)||t.localeCompare(n)})}function XA(e){return e.split("/").length}var lM={};Object.defineProperty(lM,"__esModule",{value:!0});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReactDecorator",{enumerable:!0,get:function(){return l.ReactDecorator}}),Object.defineProperty(e,"ReactDecoratorProps",{enumerable:!0,get:function(){return l.ReactDecoratorProps}}),Object.defineProperty(e,"ReactDecorators",{enumerable:!0,get:function(){return l.ReactDecorators}}),Object.defineProperty(e,"ReactFixture",{enumerable:!0,get:function(){return l.ReactFixture}}),Object.defineProperty(e,"ReactFixtureExport",{enumerable:!0,get:function(){return l.ReactFixtureExport}}),Object.defineProperty(e,"ReactFixtureExports",{enumerable:!0,get:function(){return l.ReactFixtureExports}}),Object.defineProperty(e,"ReactFixtureMap",{enumerable:!0,get:function(){return l.ReactFixtureMap}}),Object.defineProperty(e,"ReactFixtureModule",{enumerable:!0,get:function(){return l.ReactFixtureModule}}),Object.defineProperty(e,"ReactFixtureWrapper",{enumerable:!0,get:function(){return l.ReactFixtureWrapper}}),Object.defineProperty(e,"ReactFixtureWrappers",{enumerable:!0,get:function(){return l.ReactFixtureWrappers}}),Object.defineProperty(e,"areNodesEqual",{enumerable:!0,get:function(){return t.areNodesEqual}}),Object.defineProperty(e,"getComponentName",{enumerable:!0,get:function(){return n.getComponentName}}),Object.defineProperty(e,"getFixtureListFromExports",{enumerable:!0,get:function(){return r.getFixtureListFromExports}}),Object.defineProperty(e,"getFixtureListFromWrappers",{enumerable:!0,get:function(){return r.getFixtureListFromWrappers}}),Object.defineProperty(e,"getSortedDecoratorsForFixturePath",{enumerable:!0,get:function(){return a.getSortedDecoratorsForFixturePath}}),Object.defineProperty(e,"isMultiFixture",{enumerable:!0,get:function(){return c.isMultiFixture}}),Object.defineProperty(e,"isReactElement",{enumerable:!0,get:function(){return d.isReactElement}});var t=tk,n=Cx,r=kx,a=ik,c=Ax,d=Ex,l=lM})(wl);var da={};Object.defineProperty(da,"__esModule",{value:!0});da.FixtureContext=void 0;var j9=mt,V9=(0,j9.createContext)({fixtureState:{},setFixtureState:function(){}});da.FixtureContext=V9;var nd={},g_={},ok={},rd={};Object.defineProperty(rd,"__esModule",{value:!0});rd.getChildrenPath=q9;rd.isRootPath=uM;function q9(e){return uM(e)?"props.children":"".concat(e,".props.children")}function uM(e){return e===""}Object.defineProperty(ok,"__esModule",{value:!0});ok.findElementPaths=VS;var G9=fa,H9=mt,W9=wl,Z9=rd;function K9(e){return Q9(e)||J9(e)||Y9(e)||X9()}function X9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y9(e,t){if(e){if(typeof e=="string")return jS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jS(e,t)}}function J9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q9(e){if(Array.isArray(e))return jS(e)}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Array.isArray(e))return(0,G9.flatten)(e.map(function(a,c){return VS(a,"".concat(t,"[").concat(c,"]"))}));if(!(0,W9.isReactElement)(e))return[];var n=e.props.children,r=typeof n!="function"?VS(n,(0,Z9.getChildrenPath)(t)):[];return e.type===H9.Fragment?r:[t].concat(K9(r))}var y_={};Object.defineProperty(y_,"__esModule",{value:!0});y_.getElementAtPath=cM;y_.getExpectedElementAtPath=nB;var eB=fa,YA=wl,tB=rd;function cM(e,t){if(!(0,YA.isReactElement)(e)&&!Array.isArray(e))return null;var n=e,r=(0,tB.isRootPath)(t)?n:(0,eB.get)(n,t);return(0,YA.isReactElement)(r)?r:null}function nB(e,t){var n=cM(e,t);if(!n)throw new Error("Element not found at path: ".concat(t));return n}var ak={};Object.defineProperty(ak,"__esModule",{value:!0});ak.setElementAtPath=hB;var rB=fa,iB=wl,oB=y_,aB=rd,sB=["children"];function JA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(n),!0).forEach(function(r){lB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uB(e,t){if(e==null)return{};var n=cB(e,t),r,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cB(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function hB(e,t,n){var r=(0,oB.getExpectedElementAtPath)(e,t),a=n(r);return(0,aB.isRootPath)(t)?a:(0,rB.set)(qS(e),t,a)}function qS(e){if(Array.isArray(e))return e.map(function(a){return qS(a)});if((0,iB.isReactElement)(e)){var t=e.props,n=t.children,r=uB(t,sB);return uv(uv({},e),{},{props:uv(uv({},r),{},{children:qS(n)})})}return e}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"findElementPaths",{enumerable:!0,get:function(){return t.findElementPaths}}),Object.defineProperty(e,"getChildrenPath",{enumerable:!0,get:function(){return a.getChildrenPath}}),Object.defineProperty(e,"getElementAtPath",{enumerable:!0,get:function(){return n.getElementAtPath}}),Object.defineProperty(e,"getExpectedElementAtPath",{enumerable:!0,get:function(){return n.getExpectedElementAtPath}}),Object.defineProperty(e,"setElementAtPath",{enumerable:!0,get:function(){return r.setElementAtPath}});var t=ok,n=y_,r=ak,a=rd})(g_);Object.defineProperty(nd,"__esModule",{value:!0});nd.findRelevantElementPaths=fB;var QA=g_;function GS(e){"@babel/helpers - typeof";return GS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GS(e)}function fB(e){var t=(0,QA.findElementPaths)(e);return t.filter(function(n){var r=(0,QA.getExpectedElementAtPath)(e,n),a=r.type;if(GS(a)==="symbol")return!1;if(typeof a=="string")return dB(a);var c=a;return c.cosmosCapture!==!1&&pB(c)})}function dB(e){return e!=="div"&&e!=="span"}function pB(e){return e.name!=="StyledComponent"}var sk={},lk={};Object.defineProperty(lk,"__esModule",{value:!0});lk.isRefSupported=_B;var mB=yB(mt),gB=am;function yB(e){return e&&e.__esModule?e:{default:e}}function _B(e){if(typeof e=="string")return!1;var t=e,n=t.$$typeof,r=t.prototype;return n===gB.ForwardRef||r&&(r instanceof mB.default.Component||r.getInitialState!==void 0)&&!0}Object.defineProperty(sk,"__esModule",{value:!0});sk.decorateFixtureRefs=CB;var vB=SB(mt),xB=g_,bB=nd,wB=lk;function SB(e){return e&&e.__esModule?e:{default:e}}function CB(e,t,n){var r=(0,bB.findRelevantElementPaths)(e);return r.reduce(function(a,c){return(0,xB.setElementAtPath)(a,c,function(d){return(0,wB.isRefSupported)(d.type)?vB.default.cloneElement(d,{ref:EB(d.ref,t,c,n)}):d})},e)}function EB(e,t,n,r){var a=r[n];if(a&&a.origRef===e)return a.handler;var c=kB(e,t,n);return r[n]={origRef:e,handler:c},c}function kB(e,t,n){return function(r){e&&AB(e,r),t(n,r)}}function AB(e,t){if(typeof e=="string"){console.warn("[decorateFixtureRefs] String refs are not supported");return}if(typeof e=="function"){e(t);return}var n=e;n.current=t}var uk={};Object.defineProperty(uk,"__esModule",{value:!0});uk.replaceState=PB;var TB=fa;function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(r){hM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PB(e,t){var n=IB(e.state,t);(0,TB.isEqual)(n,e.state)||e.setState(n)}function IB(e,t){return Object.keys(e).reduce(function(n,r){return Object.keys(n).indexOf(r)===-1?tT(tT({},n),{},hM({},r,void 0)):n},t)}Object.defineProperty(HE,"__esModule",{value:!0});HE.useFixtureState=DB;var nT=fa,Gu=FB(mt),ul=xl,rT=wl,MB=da,LB=nd,OB=sk,i2=uk;function FB(e){return e&&e.__esModule?e:{default:e}}function iT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(n),!0).forEach(function(r){RB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DB(e,t,n){var r=(0,LB.findRelevantElementPaths)(e),a=Gu.default.useContext(MB.FixtureContext),c=a.fixtureState,d=a.setFixtureState,l=zB(c),x=Gu.default.useRef(c),b=Gu.default.useRef({}),E=Gu.default.useRef({});return Gu.default.useEffect(function(){return function(){b.current={},E.current={}}},[]),Gu.default.useEffect(function(){var L=(0,ul.getFixtureStateClassState)(c,t);L.forEach(function(F){var $=F.elementId,N=$.elPath;r.indexOf($.elPath)===-1&&(d(function(Z){return ip(ip({},Z),{},{classState:(0,ul.removeFixtureStateClassState)(c,$)})}),n.current[N]&&(delete n.current[N],delete b.current[N],delete E.current[N]))}),r.forEach(function(F){var $={decoratorId:t,elPath:F},N=(0,ul.findFixtureStateClassState)(c,$);if(N){var q=n.current[F];if(!q)return;var G=(0,ul.findFixtureStateClassState)(x.current,$);if(G&&!(0,nT.isEqual)(G,N))return(0,i2.replaceState)(q,(0,ul.extendWithValues)(q.state,N.values))}else if(b.current[F]){var Z=b.current[F].state,R=n.current[F];(0,nT.isEqual)(R.state,Z)||(0,i2.replaceState)(R,Z),d(function(Q){return ip(ip({},Q),{},{classState:(0,ul.createFixtureStateClassState)({fixtureState:Q,elementId:$,values:(0,ul.createValues)(Z),componentName:(0,rT.getComponentName)(R.constructor)})})})}})},[t,r,n,c,c.classState,d]),Gu.default.useEffect(function(){x.current=c}),(0,OB.decorateFixtureRefs)(e,A,E.current);function A(L,F){if(!F){delete n.current[L];return}var $=F.state;if($){n.current[L]=F,BB(b.current,L,F);var N={decoratorId:t,elPath:L},Z=(0,ul.findFixtureStateClassState)(l.current,N);Z?(0,i2.replaceState)(F,(0,ul.extendWithValues)($,Z.values)):d(function(R){return ip(ip({},R),{},{classState:(0,ul.createFixtureStateClassState)({fixtureState:R,elementId:N,values:(0,ul.createValues)($),componentName:(0,rT.getComponentName)(F.constructor)})})})}}}function zB(e){var t=Gu.default.useRef(e);return Gu.default.useEffect(function(){t.current=e}),t}function BB(e,t,n){var r=e[t],a=n.constructor,c=r&&r.type===a;!c&&n.state&&(e[t]={type:a,state:n.state})}var ck={};Object.defineProperty(ck,"__esModule",{value:!0});ck.useReadClassState=HB;var $B=fa,o2=jB(mt),Xv=xl,NB=da,UB=nd;function jB(e){return e&&e.__esModule?e:{default:e}}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function aT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(r){VB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sT(e,t,n,r,a,c,d){try{var l=e[c](d),x=l.value}catch(b){n(b);return}l.done?t(x):Promise.resolve(x).then(r,a)}function qB(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var c=e.apply(t,n);function d(x){sT(c,r,a,d,l,"next",x)}function l(x){sT(c,r,a,d,l,"throw",x)}d(void 0)})}}var GB=200;function HB(e,t,n){var r=(0,UB.findRelevantElementPaths)(e),a=o2.default.useContext(NB.FixtureContext),c=a.fixtureState,d=a.setFixtureState,l=o2.default.useRef(null);o2.default.useEffect(function(){return x(),function(){l.current&&clearTimeout(l.current)}});function x(){l.current=window.setTimeout(b,GB)}function b(){var E=!1;Object.keys(n.current).map(function(){var A=qB(regeneratorRuntime.mark(function L(F){var $,N,Z;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(r.indexOf(F)!==-1){q.next=2;break}throw new Error('[FixtureCapture] Child ref exists for missing element path "'.concat(F,'"'));case 2:$=n.current[F].state,N={decoratorId:t,elPath:F},Z=(0,Xv.findFixtureStateClassState)(c,N),Z&&$&&!WB(Z,$)&&(E=!0,d(function(G){return aT(aT({},G),{},{classState:(0,Xv.updateFixtureStateClassState)({fixtureState:G,elementId:N,values:(0,Xv.createValues)($)})})}));case 6:case"end":return q.stop()}},L)}));return function(L){return A.apply(this,arguments)}}()),E||x()}}function WB(e,t){return(0,$B.isEqual)(t,(0,Xv.extendWithValues)(t,e.values))}Object.defineProperty(GE,"__esModule",{value:!0});GE.useClassStateCapture=YB;var lT=XB(mt),ZB=HE,KB=ck;function XB(e){return e&&e.__esModule?e:{default:e}}function YB(e,t){var n=lT.default.useRef({});return lT.default.useEffect(function(){return function(){n.current={}}},[]),(0,KB.useReadClassState)(e,t,n),(0,ZB.useFixtureState)(e,t,n)}var hk={},fk={};Object.defineProperty(fk,"__esModule",{value:!0});fk.useFixtureProps=r7;var uT=fa,JB=t7(mt),a2=xl,QB=wl,e7=nd,fM=g_;function t7(e){return e&&e.__esModule?e:{default:e}}function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(r){n7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r7(e,t,n){var r=JB.default.useMemo(function(){return{}},[n]),a=(0,e7.findRelevantElementPaths)(e);return a.reduce(function(c,d){var l={decoratorId:n,elPath:d},x=(0,a2.findFixtureStateProps)(t,l);return(0,fM.setElementAtPath)(c,d,function(b){if(!x||F(x.componentName))return op(op({},b),{},{key:hT(d,a2.DEFAULT_RENDER_KEY)});var E=b.props,A=(0,a2.extendWithValues)(E,x.values),L=(0,uT.mapValues)(A,function($,N){var Z=i7(d,N);return r.hasOwnProperty(Z)||(r[Z]=E[N]),(0,uT.isEqual)(r[Z],$)?r[Z]:(r[Z]=$,$)});return op(op({},b),{},{props:o7(a,d)?op(op({},L),{},{children:E.children}):L,key:hT(d,x.renderKey)});function F($){return $!==(0,QB.getComponentName)(b.type)}})},e)}function i7(e,t){return e?"".concat(e,"-").concat(t):t}function hT(e,t){return"".concat(e,"-").concat(t)}function o7(e,t){return e.some(function(n){return n.indexOf((0,fM.getChildrenPath)(t))===0})}Object.defineProperty(hk,"__esModule",{value:!0});hk.usePropsCapture=h7;var cv=u7(mt),Pf=xl,fT=wl,a7=da,s7=nd,dT=g_,l7=fk;function u7(e){return e&&e.__esModule?e:{default:e}}function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(n),!0).forEach(function(r){c7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h7(e,t){var n=cv.default.useContext(a7.FixtureContext),r=n.fixtureState,a=n.setFixtureState,c=cv.default.useRef(e),d=(0,s7.findRelevantElementPaths)(e);return cv.default.useEffect(function(){if(!r.props&&d.length===0){a(function(x){return oh(oh({},x),{},{props:x.props||[]})});return}var l=(0,Pf.getFixtureStateProps)(r,t);l.forEach(function(x){var b=x.elementId;d.indexOf(b.elPath)===-1&&a(function(E){return oh(oh({},E),{},{props:(0,Pf.removeFixtureStateProps)(r,b)})})}),d.forEach(function(x){var b=(0,dT.getExpectedElementAtPath)(e,x),E={decoratorId:t,elPath:x};if((0,Pf.findFixtureStateProps)(r,E)){var L=(0,dT.getElementAtPath)(c.current,x);(0,fT.areNodesEqual)(L,b,!1)||a(function(F){return oh(oh({},F),{},{props:(0,Pf.updateFixtureStateProps)({fixtureState:r,elementId:E,values:(0,Pf.createValues)(b.props)})})})}else{var A=(0,fT.getComponentName)(b.type);a(function(F){return oh(oh({},F),{},{props:(0,Pf.createFixtureStateProps)({fixtureState:F,elementId:E,values:(0,Pf.createValues)(b.props),componentName:A})})})}})},[e,t,d,r,r.props,a]),cv.default.useEffect(function(){c.current=e}),(0,l7.useFixtureProps)(e,r,t)}Object.defineProperty(gx,"__esModule",{value:!0});gx.FixtureCapture=m7;var mT=p7(mt),f7=GE,d7=hk;function p7(e){return e&&e.__esModule?e:{default:e}}function m7(e){var t=e.children,n=e.decoratorId,r=(0,d7.usePropsCapture)(t,n);return r=(0,f7.useClassStateCapture)(r,n),mT.default.createElement(mT.default.Fragment,null,r)}var Tx={},dk={};Object.defineProperty(dk,"__esModule",{value:!0});dk.getFixture=g7;var gT=wl;function g7(e,t){if(t===void 0)return(0,gT.isMultiFixture)(e)?void 0:e;if((0,gT.isMultiFixture)(e)){var n=e;return n[t]}}var pk={},Px={},mk={};Object.defineProperty(mk,"__esModule",{value:!0});mk.FixtureElement=dM;var y7=_7(mt);function _7(e){return e&&e.__esModule?e:{default:e}}function dM(e){var t=e.Component;return y7.default.createElement(t,null)}dM.cosmosCapture=!1;Object.defineProperty(Px,"__esModule",{value:!0});Px.getDecoratedFixtureElement=A7;var HS=b7(mt),v7=gx,x7=mk;function b7(e){return e&&e.__esModule?e:{default:e}}function w7(e){return k7(e)||E7(e)||C7(e)||S7()}function S7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C7(e,t){if(e){if(typeof e=="string")return WS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(e,t)}}function E7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k7(e){if(Array.isArray(e))return WS(e)}function WS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A7(e,t,n){var r=HS.default.createElement(v7.FixtureCapture,{decoratorId:"root"},T7(e));return w7(t).reverse().reduce(function(a,c){return HS.default.createElement(c,n,a)},r)}function T7(e){return P7(e)?HS.default.createElement(x7.FixtureElement,{Component:e}):e}function P7(e){return typeof e=="function"}Object.defineProperty(pk,"__esModule",{value:!0});pk.FixtureProvider=B7;var Bg=O7(mt),I7=wl,M7=da,L7=Px;function O7(e){return e&&e.__esModule?e:{default:e}}function yT(e){return z7(e)||D7(e)||R7(e)||F7()}function F7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R7(e,t){if(e){if(typeof e=="string")return ZS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZS(e,t)}}function D7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function z7(e){if(Array.isArray(e))return ZS(e)}function ZS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B7(e){var t=e.fixtureId,n=e.fixture,r=e.systemDecorators,a=e.userDecorators,c=e.fixtureState,d=e.setFixtureState,l=e.onErrorReset,x=Bg.default.useMemo(function(){return{fixtureState:c,setFixtureState:d}},[c,d]),b=Bg.default.useMemo(function(){return{fixtureState:c,setFixtureState:d,onErrorReset:l}},[c,l,d]),E=Bg.default.useMemo(function(){return $7(t,r,a)},[t,r,a]),A=Bg.default.useMemo(function(){return(0,L7.getDecoratedFixtureElement)(n,E,b)},[b,E,n]);return Bg.default.createElement(M7.FixtureContext.Provider,{value:x},A)}function $7(e,t,n){return[].concat(yT(t),yT((0,I7.getSortedDecoratorsForFixturePath)(e.path,n)))}function L1(e){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L1(e)}Object.defineProperty(Tx,"__esModule",{value:!0});Tx.FixtureLoader=void 0;var $g=fa,_T=V7(mt),N7=wl,U7=dk,j7=pk;function pM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(pM=function(a){return a?n:t})(e)}function V7(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||L1(e)!=="object"&&typeof e!="function")return{default:e};var n=pM(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=a?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(r,c,d):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){gp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G7(e,t,n){return t&&xT(e.prototype,t),n&&xT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function H7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}function KS(e,t){return KS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},KS(e,t)}function W7(e){var t=K7();return function(){var r=O1(e),a;if(t){var c=O1(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return Z7(this,a)}}function Z7(e,t){if(t&&(L1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mp(e)}function mp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},O1(e)}function gp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X7(e){return e?{fixtureId:e,fixtureState:{},syncedFixtureState:{}}:null}var Y7=function(e){H7(n,e);var t=W7(n);function n(){var r;q7(this,n);for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=t.call.apply(t,[this].concat(c)),gp(mp(r),"state",{selectedFixture:X7(r.props.selectedFixtureId||r.props.initialFixtureId),renderKey:0}),gp(mp(r),"unsubscribe",null),gp(mp(r),"handleRequest",function(l){if(l.type==="pingRenderers")return r.postReadyState();if(!(!l.payload||l.payload.rendererId!==r.props.rendererId))switch(J7(l)&&r.fireChangeCallback(),l.type){case"selectFixture":return r.handleSelectFixtureRequest(l);case"unselectFixture":return r.handleUnselectFixtureRequest();case"setFixtureState":return r.handleSetFixtureStateRequest(l)}}),gp(mp(r),"postFixtureStateChange",function(l,x){var b=r.props.rendererId;r.postMessage({type:"fixtureStateChange",payload:{rendererId:b,fixtureId:l,fixtureState:x}})}),gp(mp(r),"setFixtureState",function(l){if(!r.state.selectedFixture){console.warn("[FixtureLoader] Trying to set fixture state with no fixture selected");return}r.setState(function(x){var b=x.selectedFixture;return b?{selectedFixture:hv(hv({},b),{},{fixtureState:l(b.fixtureState)})}:null})}),r}return G7(n,[{key:"componentDidMount",value:function(){if(!this.props.selectedFixtureId){var a=this.props.rendererConnect;this.unsubscribe=a.onMessage(this.handleRequest),this.postReadyState()}}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"componentDidUpdate",value:function(a){var c=this.props.fixtures;(0,$g.isEqual)(c,a.fixtures)||this.postFixtureListUpdate();var d=this.state.selectedFixture;if(d){var l=d.fixtureId,x=d.fixtureState,b=d.syncedFixtureState;l&&!(0,$g.isEqual)(x,b)&&(this.postFixtureStateChange(l,x),this.updateSyncedFixtureState(x))}}},{key:"shouldComponentUpdate",value:function(a,c){return!(0,$g.isEqual)(this.props,a)||!(0,$g.isEqual)(this.state,c)}},{key:"render",value:function(){var a=this.state.selectedFixture;if(!a)return this.renderMessage("No fixture selected.");var c=this.props.fixtures,d=a.fixtureId,l=a.fixtureState;if(!c.hasOwnProperty(d.path))return this.renderMessage("Fixture path not found: ".concat(d.path));var x=c[d.path].module.default,b=(0,U7.getFixture)(x,d.name);if(typeof b>"u")return this.renderMessage("Invalid fixture ID: ".concat(JSON.stringify(d)));var E=this.props,A=E.systemDecorators,L=E.userDecorators,F=E.onErrorReset,$=this.state.renderKey;return _T.default.createElement(j7.FixtureProvider,{key:$,fixtureId:d,fixture:b,systemDecorators:A,userDecorators:L,fixtureState:l,setFixtureState:this.setFixtureState,onErrorReset:F||Q7})}},{key:"handleSelectFixtureRequest",value:function(a){var c=a.payload,d=c.fixtureId,l=c.fixtureState;this.setState({selectedFixture:{fixtureId:d,fixtureState:l,syncedFixtureState:l},renderKey:this.state.renderKey+1})}},{key:"handleUnselectFixtureRequest",value:function(){this.setState({selectedFixture:null,renderKey:0})}},{key:"handleSetFixtureStateRequest",value:function(a){var c=a.payload,d=c.fixtureId,l=c.fixtureState,x=this.state.selectedFixture;x&&(0,$g.isEqual)(d,x.fixtureId)&&this.setState({selectedFixture:{fixtureId:d,fixtureState:l,syncedFixtureState:l}})}},{key:"postReadyState",value:function(){var a=this.props,c=a.rendererId,d=a.initialFixtureId,l=this.getFixtureList();this.postMessage({type:"rendererReady",payload:d?{rendererId:c,fixtures:l,initialFixtureId:d}:{rendererId:c,fixtures:l}})}},{key:"postFixtureListUpdate",value:function(){var a=this.props.rendererId;this.postMessage({type:"fixtureListUpdate",payload:{rendererId:a,fixtures:this.getFixtureList()}})}},{key:"getFixtureList",value:function(){return(0,N7.getFixtureListFromWrappers)(this.props.fixtures)}},{key:"fireChangeCallback",value:function(){var a=this.props.onErrorReset;typeof a=="function"&&a()}},{key:"updateSyncedFixtureState",value:function(a){this.setState(function(c){var d=c.selectedFixture;return d?{selectedFixture:hv(hv({},d),{},{syncedFixtureState:a})}:null})}},{key:"postMessage",value:function(a){this.props.rendererConnect.postMessage(a)}},{key:"renderMessage",value:function(a){return typeof this.props.renderMessage<"u"?this.props.renderMessage({msg:a}):a}}]),n}(_T.Component);Tx.FixtureLoader=Y7;function J7(e){return e.type==="selectFixture"||e.type==="unselectFixture"}function Q7(){}var gk={},yk={};Object.defineProperty(yk,"__esModule",{value:!0});yk.registerShortcuts=e$;function e$(e){window.addEventListener("keydown",n);function t(r,a){r.preventDefault(),e(a)}function n(r){if(!t$()){var a=String.fromCharCode(r.keyCode),c=r.metaKey||r.ctrlKey;a==="P"&&c?t(r,"searchFixtures"):a==="L"&&c&&r.shiftKey?t(r,"toggleFixtureList"):a==="K"&&c&&r.shiftKey?t(r,"toggleControlPanel"):a==="F"&&c&&r.shiftKey?t(r,"goFullScreen"):a==="E"&&c&&r.shiftKey&&t(r,"editFixture")}}return function(){window.removeEventListener("keydown",n)}}function t$(){var e=document.activeElement;return e&&n$(e.tagName)}function n$(e){var t=["input","textarea","select"];return t.includes(e.toLowerCase())}Object.defineProperty(gk,"__esModule",{value:!0});gk.createPostMessageConnect=i$;var r$=yk;function i$(){function e(t){parent.postMessage(t,"*")}return{postMessage:e,onMessage:function(n){function r(c){n(c.data)}window.addEventListener("message",r,!1);var a=(0,r$.registerShortcuts)(function(c){e({type:"playgroundCommand",payload:{command:c}})});return function(){window.removeEventListener("message",r),a()}}}}var _k={},vk={},Ix={};Object.defineProperty(Ix,"__esModule",{value:!0});Ix.getDefaultSelectValue=o$;function o$(e){var t=e.options,n=e.defaultValue;return typeof n=="string"?n:t[0]}function XS(e){"@babel/helpers - typeof";return XS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XS(e)}Object.defineProperty(vk,"__esModule",{value:!0});vk.useCreateFixtureState=c$;var bT=u$(mt),a$=xl,s$=da,l$=Ix;function mM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(mM=function(a){return a?n:t})(e)}function u$(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||XS(e)!=="object"&&typeof e!="function")return{default:e};var n=mM(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=a?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(r,c,d):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(n),!0).forEach(function(r){gM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c$(e,t){var n=bT.default.useContext(s$.FixtureContext),r=n.setFixtureState,a=(0,l$.getDefaultSelectValue)(t);(0,bT.useEffect)(function(){r(function(c){var d=(0,a$.findFixtureStateControl)(c,e);return d&&d.type==="select"&&d.defaultValue===a?c:fv(fv({},c),{},{controls:fv(fv({},c.controls),{},gM({},e,{type:"select",options:t.options,defaultValue:a,currentValue:a}))})})},[t.options,a,e,r])}var xk={};Object.defineProperty(xk,"__esModule",{value:!0});xk.useCurrentValue=m$;var h$=mt,f$=xl,d$=da,p$=Ix;function m$(e,t){var n=(0,h$.useContext)(d$.FixtureContext),r=n.fixtureState,a=(0,f$.findFixtureStateControl)(r,e);return a&&a.type==="select"?a.currentValue:(0,p$.getDefaultSelectValue)(t)}var bk={};Object.defineProperty(bk,"__esModule",{value:!0});bk.useSetValue=_$;var ST=mt,g$=xl,y$=da;function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ap(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(r){yM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _$(e){var t=(0,ST.useContext)(y$.FixtureContext),n=t.setFixtureState;return(0,ST.useCallback)(function(r){n(function(a){var c=(0,g$.findFixtureStateControl)(a,e);return!c||c.type!=="select"?(console.warn("Invalid fixture state for select: ".concat(e)),a):ap(ap({},a),{},{controls:ap(ap({},a.controls),{},yM({},e,ap(ap({},c),{},{currentValue:r})))})})},[e,n])}Object.defineProperty(_k,"__esModule",{value:!0});_k.useSelect=w$;var v$=vk,x$=xk,b$=bk;function w$(e,t){if(!t||!t.options||!t.options.length)throw new Error("No options provided to useSelect");(0,v$.useCreateFixtureState)(e,t);var n=(0,x$.useCurrentValue)(e,t),r=(0,b$.useSetValue)(e);return[n,r]}var wk={},Sk={};Object.defineProperty(Sk,"__esModule",{value:!0});Sk.useCreateFixtureState=k$;var S$=fa,ET=E$(mt),Yv=xl,C$=da;function E$(e){return e&&e.__esModule?e:{default:e}}function kT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(n),!0).forEach(function(r){_M(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k$(e,t){var n=ET.default.useContext(C$.FixtureContext),r=n.setFixtureState;ET.default.useEffect(function(){r(function(a){var c=(0,Yv.findFixtureStateControl)(a,e);return c&&c.type==="standard"&&A$(c.defaultValue,t)?a:dv(dv({},a),{},{controls:dv(dv({},a.controls),{},_M({},e,{type:"standard",defaultValue:(0,Yv.createValue)(t),currentValue:(0,Yv.createValue)(t)}))})})},[r,e,t])}function A$(e,t){return(0,S$.isEqual)(t,(0,Yv.extendWithValue)(t,e))}var Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});Ck.useCurrentValue=M$;var T$=I$(mt),AT=xl,P$=da;function I$(e){return e&&e.__esModule?e:{default:e}}function M$(e,t){var n=T$.default.useContext(P$.FixtureContext),r=n.fixtureState,a=(0,AT.findFixtureStateControl)(r,e);return a&&a.type==="standard"?(0,AT.extendWithValue)(t,a.currentValue):t}var Ek={};Object.defineProperty(Ek,"__esModule",{value:!0});Ek.useSetValue=F$;var TT=O$(mt),F1=xl,L$=da;function O$(e){return e&&e.__esModule?e:{default:e}}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){vM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F$(e,t){var n=TT.default.useContext(L$.FixtureContext),r=n.setFixtureState;return TT.default.useCallback(function(a){r(function(c){var d=typeof a=="function"?a(R$(c,e,t)):a;return pv(pv({},c),{},{controls:pv(pv({},c.controls),{},vM({},e,{type:"standard",defaultValue:(0,F1.createValue)(t),currentValue:(0,F1.createValue)(d)}))})})},[r,t,e])}function R$(e,t,n){var r=(0,F1.findFixtureStateControl)(e,t);return r&&r.type==="standard"?(0,F1.extendWithValue)(n,r.currentValue):n}Object.defineProperty(wk,"__esModule",{value:!0});wk.useValue=$$;var D$=Sk,z$=Ck,B$=Ek;function $$(e,t){var n=t.defaultValue;(0,D$.useCreateFixtureState)(e,n);var r=(0,z$.useCurrentValue)(e,n),a=(0,B$.useSetValue)(e,n);return[r,a]}var Mx={};Object.defineProperty(Mx,"__esModule",{value:!0});Mx.Viewport=void 0;var mv=U$(mt),N$=da;function U$(e){return e&&e.__esModule?e:{default:e}}function IT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(n),!0).forEach(function(r){j$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xM=function(t){var n=t.children,r=t.width,a=t.height,c=mv.default.useContext(N$.FixtureContext),d=c.setFixtureState;return mv.default.useEffect(function(){d(function(l){return MT(MT({},l),{},{viewport:{width:r,height:a}})})},[d,r,a]),mv.default.createElement(mv.default.Fragment,null,n)};Mx.Viewport=xM;xM.cosmosCapture=!1;var kk={},YS={exports:{}},V$=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,q$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],bM=function(t){var n=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));for(var c=V$.exec(t||""),d={},l=14;l--;)d[q$[l]]=c[l]||"";return r!=-1&&a!=-1&&(d.source=n,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d},JS={exports:{}},QS={exports:{}},$y=1e3,Ny=$y*60,Uy=Ny*60,jy=Uy*24,G$=jy*365.25,H$=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return W$(e);if(n==="number"&&isNaN(e)===!1)return t.long?K$(e):Z$(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function W$(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*G$;case"days":case"day":case"d":return n*jy;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Uy;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ny;case"seconds":case"second":case"secs":case"sec":case"s":return n*$y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function Z$(e){return e>=jy?Math.round(e/jy)+"d":e>=Uy?Math.round(e/Uy)+"h":e>=Ny?Math.round(e/Ny)+"m":e>=$y?Math.round(e/$y)+"s":e+"ms"}function K$(e){return gv(e,jy,"day")||gv(e,Uy,"hour")||gv(e,Ny,"minute")||gv(e,$y,"second")||e+" ms"}function gv(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=x,t.disable=d,t.enable=c,t.enabled=l,t.humanize=H$,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(b){var E=0,A;for(A in b)E=(E<<5)-E+b.charCodeAt(A),E|=0;return t.colors[Math.abs(E)%t.colors.length]}function r(b){var E;function A(){if(A.enabled){var L=A,F=+new Date,$=F-(E||F);L.diff=$,L.prev=E,L.curr=F,E=F;for(var N=new Array(arguments.length),Z=0;Z<N.length;Z++)N[Z]=arguments[Z];N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");var R=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(G,Q){if(G==="%%")return G;R++;var se=t.formatters[Q];if(typeof se=="function"){var ee=N[R];G=se.call(L,ee),N.splice(R,1),R--}return G}),t.formatArgs.call(L,N);var q=A.log||t.log||console.log.bind(console);q.apply(L,N)}}return A.namespace=b,A.enabled=t.enabled(b),A.useColors=t.useColors(),A.color=n(b),A.destroy=a,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function a(){var b=t.instances.indexOf(this);return b!==-1?(t.instances.splice(b,1),!0):!1}function c(b){t.save(b),t.names=[],t.skips=[];var E,A=(typeof b=="string"?b:"").split(/[\s,]+/),L=A.length;for(E=0;E<L;E++)A[E]&&(b=A[E].replace(/\*/g,".*?"),b[0]==="-"?t.skips.push(new RegExp("^"+b.substr(1)+"$")):t.names.push(new RegExp("^"+b+"$")));for(E=0;E<t.instances.length;E++){var F=t.instances[E];F.enabled=t.enabled(F.namespace)}}function d(){t.enable("")}function l(b){if(b[b.length-1]==="*")return!0;var E,A;for(E=0,A=t.skips.length;E<A;E++)if(t.skips[E].test(b))return!1;for(E=0,A=t.names.length;E<A;E++)if(t.names[E].test(b))return!0;return!1}function x(b){return b instanceof Error?b.stack||b.message:b}})(QS,QS.exports);var X$=QS.exports;(function(e,t){t=e.exports=X$,t.log=a,t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(x){try{return JSON.stringify(x)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}};function r(x){var b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" ")+"+"+t.humanize(this.diff),!!b){var E="color: "+this.color;x.splice(1,0,E,"color: inherit");var A=0,L=0;x[0].replace(/%[a-zA-Z%]/g,function(F){F!=="%%"&&(A++,F==="%c"&&(L=A))}),x.splice(L,0,E)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(x){try{x==null?t.storage.removeItem("debug"):t.storage.debug=x}catch{}}function d(){var x;try{x=t.storage.debug}catch{}return!x&&typeof process<"u"&&"env"in process&&(x={}.DEBUG),x}t.enable(d());function l(){try{return window.localStorage}catch{}}})(JS,JS.exports);var Lx=JS.exports,Y$=bM,LT=Lx("socket.io-client:url"),J$=Q$;function Q$(e,t){var n=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(LT("protocol-less url %s",e),typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),LT("parse %s",e),n=Y$(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=n.host.indexOf(":")!==-1,a=r?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}var Ox={},eC={exports:{}},tC={exports:{}},Vy=1e3,qy=Vy*60,Gy=qy*60,Hy=Gy*24,eN=Hy*365.25,tN=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return nN(e);if(n==="number"&&isNaN(e)===!1)return t.long?iN(e):rN(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function nN(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*eN;case"days":case"day":case"d":return n*Hy;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Gy;case"minutes":case"minute":case"mins":case"min":case"m":return n*qy;case"seconds":case"second":case"secs":case"sec":case"s":return n*Vy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function rN(e){return e>=Hy?Math.round(e/Hy)+"d":e>=Gy?Math.round(e/Gy)+"h":e>=qy?Math.round(e/qy)+"m":e>=Vy?Math.round(e/Vy)+"s":e+"ms"}function iN(e){return yv(e,Hy,"day")||yv(e,Gy,"hour")||yv(e,qy,"minute")||yv(e,Vy,"second")||e+" ms"}function yv(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=x,t.disable=d,t.enable=c,t.enabled=l,t.humanize=tN,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(b){var E=0,A;for(A in b)E=(E<<5)-E+b.charCodeAt(A),E|=0;return t.colors[Math.abs(E)%t.colors.length]}function r(b){var E;function A(){if(A.enabled){var L=A,F=+new Date,$=F-(E||F);L.diff=$,L.prev=E,L.curr=F,E=F;for(var N=new Array(arguments.length),Z=0;Z<N.length;Z++)N[Z]=arguments[Z];N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");var R=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(G,Q){if(G==="%%")return G;R++;var se=t.formatters[Q];if(typeof se=="function"){var ee=N[R];G=se.call(L,ee),N.splice(R,1),R--}return G}),t.formatArgs.call(L,N);var q=A.log||t.log||console.log.bind(console);q.apply(L,N)}}return A.namespace=b,A.enabled=t.enabled(b),A.useColors=t.useColors(),A.color=n(b),A.destroy=a,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function a(){var b=t.instances.indexOf(this);return b!==-1?(t.instances.splice(b,1),!0):!1}function c(b){t.save(b),t.names=[],t.skips=[];var E,A=(typeof b=="string"?b:"").split(/[\s,]+/),L=A.length;for(E=0;E<L;E++)A[E]&&(b=A[E].replace(/\*/g,".*?"),b[0]==="-"?t.skips.push(new RegExp("^"+b.substr(1)+"$")):t.names.push(new RegExp("^"+b+"$")));for(E=0;E<t.instances.length;E++){var F=t.instances[E];F.enabled=t.enabled(F.namespace)}}function d(){t.enable("")}function l(b){if(b[b.length-1]==="*")return!0;var E,A;for(E=0,A=t.skips.length;E<A;E++)if(t.skips[E].test(b))return!1;for(E=0,A=t.names.length;E<A;E++)if(t.names[E].test(b))return!0;return!1}function x(b){return b instanceof Error?b.stack||b.message:b}})(tC,tC.exports);var oN=tC.exports;(function(e,t){t=e.exports=oN,t.log=a,t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(x){try{return JSON.stringify(x)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}};function r(x){var b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" ")+"+"+t.humanize(this.diff),!!b){var E="color: "+this.color;x.splice(1,0,E,"color: inherit");var A=0,L=0;x[0].replace(/%[a-zA-Z%]/g,function(F){F!=="%%"&&(A++,F==="%c"&&(L=A))}),x.splice(L,0,E)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(x){try{x==null?t.storage.removeItem("debug"):t.storage.debug=x}catch{}}function d(){var x;try{x=t.storage.debug}catch{}return!x&&typeof process<"u"&&"env"in process&&(x={}.DEBUG),x}t.enable(d());function l(){try{return window.localStorage}catch{}}})(eC,eC.exports);var aN=eC.exports,wM={exports:{}};(function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var a in t.prototype)r[a]=t.prototype[a];return r}t.prototype.on=t.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},t.prototype.once=function(r,a){function c(){this.off(r,c),a.apply(this,arguments)}return c.fn=a,this.on(r,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+r];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var d,l=0;l<c.length;l++)if(d=c[l],d===a||d.fn===a){c.splice(l,1);break}return c.length===0&&delete this._callbacks["$"+r],this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),c=this._callbacks["$"+r],d=1;d<arguments.length;d++)a[d-1]=arguments[d];if(c){c=c.slice(0);for(var d=0,l=c.length;d<l;++d)c[d].apply(this,a)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(wM);var sN=wM.exports,Fx={},lN={}.toString,Ak=Array.isArray||function(e){return lN.call(e)=="[object Array]"},SM=fN,uN=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",cN=typeof ArrayBuffer=="function",hN=function(e){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function fN(e){return uN&&Buffer.isBuffer(e)||cN&&(e instanceof ArrayBuffer||hN(e))}var Tk=Ak,CM=SM,EM=Object.prototype.toString,dN=typeof Blob=="function"||typeof Blob<"u"&&EM.call(Blob)==="[object BlobConstructor]",pN=typeof File=="function"||typeof File<"u"&&EM.call(File)==="[object FileConstructor]";Fx.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=nC(n,t),r.attachments=t.length,{packet:r,buffers:t}};function nC(e,t){if(!e)return e;if(CM(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Tk(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=nC(e[a],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){var r={};for(var c in e)r[c]=nC(e[c],t);return r}return e}Fx.reconstructPacket=function(e,t){return e.data=rC(e.data,t),e.attachments=void 0,e};function rC(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Tk(e))for(var n=0;n<e.length;n++)e[n]=rC(e[n],t);else if(typeof e=="object")for(var r in e)e[r]=rC(e[r],t);return e}Fx.removeBlobs=function(e,t){function n(c,d,l){if(!c)return c;if(dN&&c instanceof Blob||pN&&c instanceof File){r++;var x=new FileReader;x.onload=function(){l?l[d]=this.result:a=this.result,--r||t(a)},x.readAsArrayBuffer(c)}else if(Tk(c))for(var b=0;b<c.length;b++)n(c[b],b,c);else if(typeof c=="object"&&!CM(c))for(var E in c)n(c[E],E,c)}var r=0,a=e;n(a),r||t(a)};(function(e){var t=aN("socket.io-parser"),n=sN,r=Fx,a=Ak,c=SM;e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=d,e.Decoder=A;function d(){}var l=e.ERROR+'"encode error"';d.prototype.encode=function(Z,R){if(t("encoding packet %j",Z),e.BINARY_EVENT===Z.type||e.BINARY_ACK===Z.type)E(Z,R);else{var q=x(Z);R([q])}};function x(Z){var R=""+Z.type;if((e.BINARY_EVENT===Z.type||e.BINARY_ACK===Z.type)&&(R+=Z.attachments+"-"),Z.nsp&&Z.nsp!=="/"&&(R+=Z.nsp+","),Z.id!=null&&(R+=Z.id),Z.data!=null){var q=b(Z.data);if(q!==!1)R+=q;else return l}return t("encoded %j as %s",Z,R),R}function b(Z){try{return JSON.stringify(Z)}catch{return!1}}function E(Z,R){function q(G){var Q=r.deconstructPacket(G),se=x(Q.packet),ee=Q.buffers;ee.unshift(se),R(ee)}r.removeBlobs(Z,q)}function A(){this.reconstructor=null}n(A.prototype),A.prototype.add=function(Z){var R;if(typeof Z=="string")R=L(Z),e.BINARY_EVENT===R.type||e.BINARY_ACK===R.type?(this.reconstructor=new $(R),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",R)):this.emit("decoded",R);else if(c(Z)||Z.base64)if(this.reconstructor)R=this.reconstructor.takeBinaryData(Z),R&&(this.reconstructor=null,this.emit("decoded",R));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+Z)};function L(Z){var R=0,q={type:Number(Z.charAt(0))};if(e.types[q.type]==null)return N("unknown packet type "+q.type);if(e.BINARY_EVENT===q.type||e.BINARY_ACK===q.type){for(var G=R+1;Z.charAt(++R)!=="-"&&R!=Z.length;);var Q=Z.substring(G,R);if(Q!=Number(Q)||Z.charAt(R)!=="-")throw new Error("Illegal attachments");q.attachments=Number(Q)}if(Z.charAt(R+1)==="/"){for(var G=R+1;++R;){var se=Z.charAt(R);if(se===","||R===Z.length)break}q.nsp=Z.substring(G,R)}else q.nsp="/";var ee=Z.charAt(R+1);if(ee!==""&&Number(ee)==ee){for(var G=R+1;++R;){var se=Z.charAt(R);if(se==null||Number(se)!=se){--R;break}if(R===Z.length)break}q.id=Number(Z.substring(G,R+1))}if(Z.charAt(++R)){var oe=F(Z.substr(R)),xe=oe!==!1&&(q.type===e.ERROR||a(oe));if(xe)q.data=oe;else return N("invalid payload")}return t("decoded %s as %j",Z,q),q}function F(Z){try{return JSON.parse(Z)}catch{return!1}}A.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function $(Z){this.reconPack=Z,this.buffers=[]}$.prototype.takeBinaryData=function(Z){if(this.buffers.push(Z),this.buffers.length===this.reconPack.attachments){var R=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),R}return null},$.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function N(Z){return{type:e.ERROR,data:"parser error: "+Z}}})(Ox);var Pk={exports:{}},Rx={},iC={exports:{}};try{iC.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{iC.exports=!1}var mN=iC.exports,gN=mN,Ik=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!t||gN))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!n&&r)return new XDomainRequest}catch{}if(!t)try{return new self[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Mk={exports:{}},id={},yN=Object.keys||function(t){var n=[],r=Object.prototype.hasOwnProperty;for(var a in t)r.call(t,a)&&n.push(a);return n},_N=Ak,kM=Object.prototype.toString,vN=typeof Blob=="function"||typeof Blob<"u"&&kM.call(Blob)==="[object BlobConstructor]",xN=typeof File=="function"||typeof File<"u"&&kM.call(File)==="[object FileConstructor]",AM=Jv;function Jv(e){if(!e||typeof e!="object")return!1;if(_N(e)){for(var t=0,n=e.length;t<n;t++)if(Jv(e[t]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||vN&&e instanceof Blob||xN&&e instanceof File)return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Jv(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Jv(e[r]))return!0;return!1}var bN=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||r===0)return new ArrayBuffer(0);for(var a=new Uint8Array(e),c=new Uint8Array(n-t),d=t,l=0;d<n;d++,l++)c[l]=a[d];return c.buffer},wN=SN;function SN(e,t,n){var r=!1;return n=n||CN,a.count=e,e===0?t():a;function a(c,d){if(a.count<=0)throw new Error("after called too many times");--a.count,c?(r=!0,t(c),t=n):a.count===0&&!r&&t(null,d)}}function CN(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var fh=String.fromCharCode;function TM(e){for(var t=[],n=0,r=e.length,a,c;n<r;)a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<r?(c=e.charCodeAt(n++),(c&64512)==56320?t.push(((a&1023)<<10)+(c&1023)+65536):(t.push(a),n--)):t.push(a);return t}function EN(e){for(var t=e.length,n=-1,r,a="";++n<t;)r=e[n],r>65535&&(r-=65536,a+=fh(r>>>10&1023|55296),r=56320|r&1023),a+=fh(r);return a}function PM(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s2(e,t){return fh(e>>t&63|128)}function kN(e,t){if(!(e&4294967168))return fh(e);var n="";return e&4294965248?e&4294901760?e&4292870144||(n=fh(e>>18&7|240),n+=s2(e,12),n+=s2(e,6)):(PM(e,t)||(e=65533),n=fh(e>>12&15|224),n+=s2(e,6)):n=fh(e>>6&31|192),n+=fh(e&63|128),n}function AN(e,t){t=t||{};for(var n=t.strict!==!1,r=TM(e),a=r.length,c=-1,d,l="";++c<a;)d=r[c],l+=kN(d,n);return l}function sp(){if(mh>=D1)throw Error("Invalid byte index");var e=R1[mh]&255;if(mh++,(e&192)==128)return e&63;throw Error("Invalid continuation byte")}function TN(e){var t,n,r,a,c;if(mh>D1)throw Error("Invalid byte index");if(mh==D1)return!1;if(t=R1[mh]&255,mh++,!(t&128))return t;if((t&224)==192){if(n=sp(),c=(t&31)<<6|n,c>=128)return c;throw Error("Invalid continuation byte")}if((t&240)==224){if(n=sp(),r=sp(),c=(t&15)<<12|n<<6|r,c>=2048)return PM(c,e)?c:65533;throw Error("Invalid continuation byte")}if((t&248)==240&&(n=sp(),r=sp(),a=sp(),c=(t&7)<<18|n<<12|r<<6|a,c>=65536&&c<=1114111))return c;throw Error("Invalid UTF-8 detected")}var R1,D1,mh;function PN(e,t){t=t||{};var n=t.strict!==!1;R1=TM(e),D1=R1.length,mh=0;for(var r=[],a;(a=TN(n))!==!1;)r.push(a);return EN(r)}var IN={version:"2.1.2",encode:AN,decode:PN},_v={},OT;function MN(){return OT||(OT=1,function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;_v.encode=function(r){var a=new Uint8Array(r),c,d=a.length,l="";for(c=0;c<d;c+=3)l+=e[a[c]>>2],l+=e[(a[c]&3)<<4|a[c+1]>>4],l+=e[(a[c+1]&15)<<2|a[c+2]>>6],l+=e[a[c+2]&63];return d%3===2?l=l.substring(0,l.length-1)+"=":d%3===1&&(l=l.substring(0,l.length-2)+"=="),l},_v.decode=function(r){var a=r.length*.75,c=r.length,d,l=0,x,b,E,A;r[r.length-1]==="="&&(a--,r[r.length-2]==="="&&a--);var L=new ArrayBuffer(a),F=new Uint8Array(L);for(d=0;d<c;d+=4)x=t[r.charCodeAt(d)],b=t[r.charCodeAt(d+1)],E=t[r.charCodeAt(d+2)],A=t[r.charCodeAt(d+3)],F[l++]=x<<2|b>>4,F[l++]=(b&15)<<4|E>>2,F[l++]=(E&3)<<6|A&63;return L}}()),_v}var l2,FT;function LN(){if(FT)return l2;FT=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var l=new Blob(["hi"]);return l.size===2}catch{return!1}}(),n=t&&function(){try{var l=new Blob([new Uint8Array([1,2])]);return l.size===2}catch{return!1}}(),r=e&&e.prototype.append&&e.prototype.getBlob;function a(l){return l.map(function(x){if(x.buffer instanceof ArrayBuffer){var b=x.buffer;if(x.byteLength!==b.byteLength){var E=new Uint8Array(x.byteLength);E.set(new Uint8Array(b,x.byteOffset,x.byteLength)),b=E.buffer}return b}return x})}function c(l,x){x=x||{};var b=new e;return a(l).forEach(function(E){b.append(E)}),x.type?b.getBlob(x.type):b.getBlob()}function d(l,x){return new Blob(a(l),x||{})}return typeof Blob<"u"&&(c.prototype=Blob.prototype,d.prototype=Blob.prototype),l2=function(){return t?n?Blob:d:r?c:void 0}(),l2}(function(e){var t=yN,n=AM,r=bN,a=wN,c=IN,d;typeof ArrayBuffer<"u"&&(d=MN());var l=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),x=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),b=l||x;e.protocol=3;var E=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},A=t(E),L={type:"error",data:"parser error"},F=LN();e.encodePacket=function(Q,se,ee,oe){typeof se=="function"&&(oe=se,se=!1),typeof ee=="function"&&(oe=ee,ee=null);var xe=Q.data===void 0?void 0:Q.data.buffer||Q.data;if(typeof ArrayBuffer<"u"&&xe instanceof ArrayBuffer)return N(Q,se,oe);if(typeof F<"u"&&xe instanceof F)return R(Q,se,oe);if(xe&&xe.base64)return $(Q,oe);var Oe=E[Q.type];return Q.data!==void 0&&(Oe+=ee?c.encode(String(Q.data),{strict:!1}):String(Q.data)),oe(""+Oe)};function $(Q,se){var ee="b"+e.packets[Q.type]+Q.data.data;return se(ee)}function N(Q,se,ee){if(!se)return e.encodeBase64Packet(Q,ee);var oe=Q.data,xe=new Uint8Array(oe),Oe=new Uint8Array(1+oe.byteLength);Oe[0]=E[Q.type];for(var Le=0;Le<xe.length;Le++)Oe[Le+1]=xe[Le];return ee(Oe.buffer)}function Z(Q,se,ee){if(!se)return e.encodeBase64Packet(Q,ee);var oe=new FileReader;return oe.onload=function(){e.encodePacket({type:Q.type,data:oe.result},se,!0,ee)},oe.readAsArrayBuffer(Q.data)}function R(Q,se,ee){if(!se)return e.encodeBase64Packet(Q,ee);if(b)return Z(Q,se,ee);var oe=new Uint8Array(1);oe[0]=E[Q.type];var xe=new F([oe.buffer,Q.data]);return ee(xe)}e.encodeBase64Packet=function(Q,se){var ee="b"+e.packets[Q.type];if(typeof F<"u"&&Q.data instanceof F){var oe=new FileReader;return oe.onload=function(){var $e=oe.result.split(",")[1];se(ee+$e)},oe.readAsDataURL(Q.data)}var xe;try{xe=String.fromCharCode.apply(null,new Uint8Array(Q.data))}catch{for(var Oe=new Uint8Array(Q.data),Le=new Array(Oe.length),qe=0;qe<Oe.length;qe++)Le[qe]=Oe[qe];xe=String.fromCharCode.apply(null,Le)}return ee+=btoa(xe),se(ee)},e.decodePacket=function(Q,se,ee){if(Q===void 0)return L;if(typeof Q=="string"){if(Q.charAt(0)==="b")return e.decodeBase64Packet(Q.substr(1),se);if(ee&&(Q=q(Q),Q===!1))return L;var xe=Q.charAt(0);return Number(xe)!=xe||!A[xe]?L:Q.length>1?{type:A[xe],data:Q.substring(1)}:{type:A[xe]}}var oe=new Uint8Array(Q),xe=oe[0],Oe=r(Q,1);return F&&se==="blob"&&(Oe=new F([Oe])),{type:A[xe],data:Oe}};function q(Q){try{Q=c.decode(Q,{strict:!1})}catch{return!1}return Q}e.decodeBase64Packet=function(Q,se){var ee=A[Q.charAt(0)];if(!d)return{type:ee,data:{base64:!0,data:Q.substr(1)}};var oe=d.decode(Q.substr(1));return se==="blob"&&F&&(oe=new F([oe])),{type:ee,data:oe}},e.encodePayload=function(Q,se,ee){typeof se=="function"&&(ee=se,se=null);var oe=n(Q);if(se&&oe)return F&&!b?e.encodePayloadAsBlob(Q,ee):e.encodePayloadAsArrayBuffer(Q,ee);if(!Q.length)return ee("0:");function xe(Le){return Le.length+":"+Le}function Oe(Le,qe){e.encodePacket(Le,oe?se:!1,!1,function($e){qe(null,xe($e))})}G(Q,Oe,function(Le,qe){return ee(qe.join(""))})};function G(Q,se,ee){for(var oe=new Array(Q.length),xe=a(Q.length,ee),Oe=function(qe,$e,nt){se($e,function(pt,At){oe[qe]=At,nt(pt,oe)})},Le=0;Le<Q.length;Le++)Oe(Le,Q[Le],xe)}e.decodePayload=function(Q,se,ee){if(typeof Q!="string")return e.decodePayloadAsBinary(Q,se,ee);typeof se=="function"&&(ee=se,se=null);var oe;if(Q==="")return ee(L,0,1);for(var xe="",Oe,Le,qe=0,$e=Q.length;qe<$e;qe++){var nt=Q.charAt(qe);if(nt!==":"){xe+=nt;continue}if(xe===""||xe!=(Oe=Number(xe))||(Le=Q.substr(qe+1,Oe),xe!=Le.length))return ee(L,0,1);if(Le.length){if(oe=e.decodePacket(Le,se,!1),L.type===oe.type&&L.data===oe.data)return ee(L,0,1);var pt=ee(oe,qe+Oe,$e);if(pt===!1)return}qe+=Oe,xe=""}if(xe!=="")return ee(L,0,1)},e.encodePayloadAsArrayBuffer=function(Q,se){if(!Q.length)return se(new ArrayBuffer(0));function ee(oe,xe){e.encodePacket(oe,!0,!0,function(Oe){return xe(null,Oe)})}G(Q,ee,function(oe,xe){var Oe=xe.reduce(function($e,nt){var pt;return typeof nt=="string"?pt=nt.length:pt=nt.byteLength,$e+pt.toString().length+pt+2},0),Le=new Uint8Array(Oe),qe=0;return xe.forEach(function($e){var nt=typeof $e=="string",pt=$e;if(nt){for(var Vt=new Uint8Array($e.length),At=0;At<$e.length;At++)Vt[At]=$e.charCodeAt(At);pt=Vt.buffer}nt?Le[qe++]=0:Le[qe++]=1;for(var zt=pt.byteLength.toString(),At=0;At<zt.length;At++)Le[qe++]=parseInt(zt[At]);Le[qe++]=255;for(var Vt=new Uint8Array(pt),At=0;At<Vt.length;At++)Le[qe++]=Vt[At]}),se(Le.buffer)})},e.encodePayloadAsBlob=function(Q,se){function ee(oe,xe){e.encodePacket(oe,!0,!0,function(Oe){var Le=new Uint8Array(1);if(Le[0]=1,typeof Oe=="string"){for(var qe=new Uint8Array(Oe.length),$e=0;$e<Oe.length;$e++)qe[$e]=Oe.charCodeAt($e);Oe=qe.buffer,Le[0]=0}for(var nt=Oe instanceof ArrayBuffer?Oe.byteLength:Oe.size,pt=nt.toString(),At=new Uint8Array(pt.length+1),$e=0;$e<pt.length;$e++)At[$e]=parseInt(pt[$e]);if(At[pt.length]=255,F){var zt=new F([Le.buffer,At.buffer,Oe]);xe(null,zt)}})}G(Q,ee,function(oe,xe){return se(new F(xe))})},e.decodePayloadAsBinary=function(Q,se,ee){typeof se=="function"&&(ee=se,se=null);for(var oe=Q,xe=[];oe.byteLength>0;){for(var Oe=new Uint8Array(oe),Le=Oe[0]===0,qe="",$e=1;Oe[$e]!==255;$e++){if(qe.length>310)return ee(L,0,1);qe+=Oe[$e]}oe=r(oe,2+qe.length),qe=parseInt(qe);var nt=r(oe,0,qe);if(Le)try{nt=String.fromCharCode.apply(null,new Uint8Array(nt))}catch{var pt=new Uint8Array(nt);nt="";for(var $e=0;$e<pt.length;$e++)nt+=String.fromCharCode(pt[$e])}xe.push(nt),oe=r(oe,qe)}var At=xe.length;xe.forEach(function(zt,Vt){ee(e.decodePacket(zt,se,!0),Vt,At)})}})(id);var IM={exports:{}};(function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var a in t.prototype)r[a]=t.prototype[a];return r}t.prototype.on=t.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},t.prototype.once=function(r,a){function c(){this.off(r,c),a.apply(this,arguments)}return c.fn=a,this.on(r,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+r];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var d,l=0;l<c.length;l++)if(d=c[l],d===a||d.fn===a){c.splice(l,1);break}return this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};var a=[].slice.call(arguments,1),c=this._callbacks["$"+r];if(c){c=c.slice(0);for(var d=0,l=c.length;d<l;++d)c[d].apply(this,a)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(IM);var Lk=IM.exports,u2,RT;function Ok(){if(RT)return u2;RT=1;var e=id,t=Lk;u2=n;function n(r){this.path=r.path,this.hostname=r.hostname,this.port=r.port,this.secure=r.secure,this.query=r.query,this.timestampParam=r.timestampParam,this.timestampRequests=r.timestampRequests,this.readyState="",this.agent=r.agent||!1,this.socket=r.socket,this.enablesXDR=r.enablesXDR,this.pfx=r.pfx,this.key=r.key,this.passphrase=r.passphrase,this.cert=r.cert,this.ca=r.ca,this.ciphers=r.ciphers,this.rejectUnauthorized=r.rejectUnauthorized,this.forceNode=r.forceNode,this.isReactNative=r.isReactNative,this.extraHeaders=r.extraHeaders,this.localAddress=r.localAddress}return t(n.prototype),n.prototype.onError=function(r,a){var c=new Error(r);return c.type="TransportError",c.description=a,this.emit("error",c),this},n.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},n.prototype.send=function(r){if(this.readyState==="open")this.write(r);else throw new Error("Transport not open")},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(r){var a=e.decodePacket(r,this.socket.binaryType);this.onPacket(a)},n.prototype.onPacket=function(r){this.emit("packet",r)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")},u2}var sm={};sm.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t};sm.decode=function(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var c=n[r].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t};var Dx=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},MM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),z1=64,LM={},DT=0,gh=0,zT;function oC(e){var t="";do t=MM[e%z1]+t,e=Math.floor(e/z1);while(e>0);return t}function ON(e){var t=0;for(gh=0;gh<e.length;gh++)t=t*z1+LM[e.charAt(gh)];return t}function Fk(){var e=oC(+new Date);return e!==zT?(DT=0,zT=e):e+"."+oC(DT++)}for(;gh<z1;gh++)LM[MM[gh]]=gh;Fk.encode=oC;Fk.decode=ON;var OM=Fk,aC={exports:{}},sC={exports:{}},Wy=1e3,Zy=Wy*60,Ky=Zy*60,Xy=Ky*24,FN=Xy*365.25,RN=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return DN(e);if(n==="number"&&isNaN(e)===!1)return t.long?BN(e):zN(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function DN(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*FN;case"days":case"day":case"d":return n*Xy;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ky;case"minutes":case"minute":case"mins":case"min":case"m":return n*Zy;case"seconds":case"second":case"secs":case"sec":case"s":return n*Wy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function zN(e){return e>=Xy?Math.round(e/Xy)+"d":e>=Ky?Math.round(e/Ky)+"h":e>=Zy?Math.round(e/Zy)+"m":e>=Wy?Math.round(e/Wy)+"s":e+"ms"}function BN(e){return vv(e,Xy,"day")||vv(e,Ky,"hour")||vv(e,Zy,"minute")||vv(e,Wy,"second")||e+" ms"}function vv(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=x,t.disable=d,t.enable=c,t.enabled=l,t.humanize=RN,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(b){var E=0,A;for(A in b)E=(E<<5)-E+b.charCodeAt(A),E|=0;return t.colors[Math.abs(E)%t.colors.length]}function r(b){var E;function A(){if(A.enabled){var L=A,F=+new Date,$=F-(E||F);L.diff=$,L.prev=E,L.curr=F,E=F;for(var N=new Array(arguments.length),Z=0;Z<N.length;Z++)N[Z]=arguments[Z];N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");var R=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(G,Q){if(G==="%%")return G;R++;var se=t.formatters[Q];if(typeof se=="function"){var ee=N[R];G=se.call(L,ee),N.splice(R,1),R--}return G}),t.formatArgs.call(L,N);var q=A.log||t.log||console.log.bind(console);q.apply(L,N)}}return A.namespace=b,A.enabled=t.enabled(b),A.useColors=t.useColors(),A.color=n(b),A.destroy=a,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function a(){var b=t.instances.indexOf(this);return b!==-1?(t.instances.splice(b,1),!0):!1}function c(b){t.save(b),t.names=[],t.skips=[];var E,A=(typeof b=="string"?b:"").split(/[\s,]+/),L=A.length;for(E=0;E<L;E++)A[E]&&(b=A[E].replace(/\*/g,".*?"),b[0]==="-"?t.skips.push(new RegExp("^"+b.substr(1)+"$")):t.names.push(new RegExp("^"+b+"$")));for(E=0;E<t.instances.length;E++){var F=t.instances[E];F.enabled=t.enabled(F.namespace)}}function d(){t.enable("")}function l(b){if(b[b.length-1]==="*")return!0;var E,A;for(E=0,A=t.skips.length;E<A;E++)if(t.skips[E].test(b))return!1;for(E=0,A=t.names.length;E<A;E++)if(t.names[E].test(b))return!0;return!1}function x(b){return b instanceof Error?b.stack||b.message:b}})(sC,sC.exports);var $N=sC.exports;(function(e,t){t=e.exports=$N,t.log=a,t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(x){try{return JSON.stringify(x)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}};function r(x){var b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" ")+"+"+t.humanize(this.diff),!!b){var E="color: "+this.color;x.splice(1,0,E,"color: inherit");var A=0,L=0;x[0].replace(/%[a-zA-Z%]/g,function(F){F!=="%%"&&(A++,F==="%c"&&(L=A))}),x.splice(L,0,E)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(x){try{x==null?t.storage.removeItem("debug"):t.storage.debug=x}catch{}}function d(){var x;try{x=t.storage.debug}catch{}return!x&&typeof process<"u"&&"env"in process&&(x={}.DEBUG),x}t.enable(d());function l(){try{return window.localStorage}catch{}}})(aC,aC.exports);var zx=aC.exports,FM=Ok(),NN=sm,RM=id,UN=Dx,jN=OM,pl=zx("engine.io-client:polling"),DM=uu,VN=function(){var e=Ik,t=new e({xdomain:!1});return t.responseType!=null}();function uu(e){var t=e&&e.forceBase64;(!VN||t)&&(this.supportsBinary=!1),FM.call(this,e)}UN(uu,FM);uu.prototype.name="polling";uu.prototype.doOpen=function(){this.poll()};uu.prototype.pause=function(e){var t=this;this.readyState="pausing";function n(){pl("paused"),t.readyState="paused",e()}if(this.polling||!this.writable){var r=0;this.polling&&(pl("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){pl("pre-pause polling complete"),--r||n()})),this.writable||(pl("we are currently writing - waiting to pause"),r++,this.once("drain",function(){pl("pre-pause writing complete"),--r||n()}))}else n()};uu.prototype.poll=function(){pl("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};uu.prototype.onData=function(e){var t=this;pl("polling got data %s",e);var n=function(r,a,c){if(t.readyState==="opening"&&t.onOpen(),r.type==="close")return t.onClose(),!1;t.onPacket(r)};RM.decodePayload(e,this.socket.binaryType,n),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():pl('ignoring poll - transport state "%s"',this.readyState))};uu.prototype.doClose=function(){var e=this;function t(){pl("writing close packet"),e.write([{type:"close"}])}this.readyState==="open"?(pl("transport open - closing"),t()):(pl("transport not open - deferring close"),this.once("open",t))};uu.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};RM.encodePayload(e,this.supportsBinary,function(r){t.doWrite(r,n)})};uu.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";this.timestampRequests!==!1&&(e[this.timestampParam]=jN()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=NN.encode(e),this.port&&(t==="https"&&Number(this.port)!==443||t==="http"&&Number(this.port)!==80)&&(n=":"+this.port),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e};var qN=Ik,zM=DM,GN=Lk,HN=Dx,lC=zx("engine.io-client:polling-xhr");Mk.exports=lm;Mk.exports.Request=no;function BT(){}function lm(e){if(zM.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,typeof location<"u"){var t=location.protocol==="https:",n=location.port;n||(n=t?443:80),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}HN(lm,zM);lm.prototype.supportsBinary=!0;lm.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new no(e)};lm.prototype.doWrite=function(e,t){var n=typeof e!="string"&&e!==void 0,r=this.request({method:"POST",data:e,isBinary:n}),a=this;r.on("success",t),r.on("error",function(c){a.onError("xhr post error",c)}),this.sendXhr=r};lm.prototype.doPoll=function(){lC("xhr poll");var e=this.request(),t=this;e.on("data",function(n){t.onData(n)}),e.on("error",function(n){t.onError("xhr poll error",n)}),this.pollXhr=e};function no(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}GN(no.prototype);no.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new qN(e),n=this;try{lC("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch{}if(this.method==="POST")try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(t.readyState===2)try{var a=t.getResponseHeader("Content-Type");n.supportsBinary&&a==="application/octet-stream"&&(t.responseType="arraybuffer")}catch{}t.readyState===4&&(t.status===200||t.status===1223?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},lC("xhr data %s",this.data),t.send(this.data)}catch(a){setTimeout(function(){n.onError(a)},0);return}typeof document<"u"&&(this.index=no.requestsCount++,no.requests[this.index]=this)};no.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};no.prototype.onData=function(e){this.emit("data",e),this.onSuccess()};no.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)};no.prototype.cleanup=function(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=BT:this.xhr.onreadystatechange=BT,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete no.requests[this.index],this.xhr=null}};no.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch{}t==="application/octet-stream"?e=this.xhr.response||this.xhr.responseText:e=this.xhr.responseText}catch(n){this.onError(n)}e!=null&&this.onData(e)};no.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};no.prototype.abort=function(){this.cleanup()};no.requestsCount=0;no.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$T);else if(typeof addEventListener=="function"){var WN="onpagehide"in self?"pagehide":"unload";addEventListener(WN,$T,!1)}}function $T(){for(var e in no.requests)no.requests.hasOwnProperty(e)&&no.requests[e].abort()}var ZN=Mk.exports,Rk=DM,KN=Dx,XN=um,YN=/\n/g,JN=/\\n/g,xv;function QN(){}function eU(){return typeof self<"u"?self:typeof window<"u"?window:typeof Ss<"u"?Ss:{}}function um(e){if(Rk.call(this,e),this.query=this.query||{},!xv){var t=eU();xv=t.___eio=t.___eio||[]}this.index=xv.length;var n=this;xv.push(function(r){n.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=QN)},!1)}KN(um,Rk);um.prototype.supportsBinary=!1;um.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Rk.prototype.doClose.call(this)};um.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(a){e.onError("jsonp poll error",a)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)};um.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index,d;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=c,r.method="POST",r.setAttribute("accept-charset","utf-8"),a.name="d",r.appendChild(a),document.body.appendChild(r),this.form=r,this.area=a}this.form.action=this.uri();function l(){x(),t()}function x(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(E){n.onError("jsonp polling iframe removal error",E)}try{var b='<iframe src="javascript:0" name="'+n.iframeId+'">';d=document.createElement(b)}catch{d=document.createElement("iframe"),d.name=n.iframeId,d.src="javascript:0"}d.id=n.iframeId,n.form.appendChild(d),n.iframe=d}x(),e=e.replace(JN,`\\
`),this.area.value=e.replace(YN,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState==="complete"&&l()}:this.iframe.onload=l};const tU={},nU=Object.freeze(Object.defineProperty({__proto__:null,default:tU},Symbol.toStringTag,{value:"Module"})),rU=nD(nU);var Dk=Ok(),iU=id,oU=sm,aU=Dx,sU=OM,lU=zx("engine.io-client:websocket"),B1,zk;if(typeof WebSocket<"u")B1=WebSocket;else if(typeof self<"u")B1=self.WebSocket||self.MozWebSocket;else try{zk=rU}catch{}var Up=B1||zk,uU=Ps;function Ps(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=B1&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(Up=zk),Dk.call(this,e)}aU(Ps,Dk);Ps.prototype.name="websocket";Ps.prototype.supportsBinary=!0;Ps.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new Up(e,t):new Up(e):new Up(e,t,n)}catch(r){return this.emit("error",r)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};Ps.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}};Ps.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,r=0,a=n;r<a;r++)(function(d){iU.encodePacket(d,t.supportsBinary,function(l){if(!t.usingBrowserWebSocket){var x={};if(d.options&&(x.compress=d.options.compress),t.perMessageDeflate){var b=typeof l=="string"?Buffer.byteLength(l):l.length;b<t.perMessageDeflate.threshold&&(x.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(l):t.ws.send(l,x)}catch{lU("websocket closed before onclose event")}--n||c()})})(e[r]);function c(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}};Ps.prototype.onClose=function(){Dk.prototype.onClose.call(this)};Ps.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};Ps.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&(t==="wss"&&Number(this.port)!==443||t==="ws"&&Number(this.port)!==80)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=sU()),this.supportsBinary||(e.b64=1),e=oU.encode(e),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e};Ps.prototype.check=function(){return!!Up&&!("__initialize"in Up&&this.name===Ps.prototype.name)};var cU=Ik,hU=ZN,fU=XN,dU=uU;Rx.polling=pU;Rx.websocket=dU;function pU(e){var t,n=!1,r=!1,a=e.jsonp!==!1;if(typeof location<"u"){var c=location.protocol==="https:",d=location.port;d||(d=c?443:80),n=e.hostname!==location.hostname||d!==e.port,r=e.secure!==c}if(e.xdomain=n,e.xscheme=r,t=new cU(e),"open"in t&&!e.forceJSONP)return new hU(e);if(!a)throw new Error("JSONP disabled");return new fU(e)}var mU=[].indexOf,BM=function(e,t){if(mU)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},gU=Rx,yU=Lk,ji=zx("engine.io-client:socket"),_U=BM,$M=id,NT=bM,vU=sm,xU=rr;function rr(e,t){if(!(this instanceof rr))return new rr(e,t);t=t||{},e&&typeof e=="object"&&(t=e,e=null),e?(e=NT(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=NT(t.host).host),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=t.query||{},typeof this.query=="string"&&(this.query=vU.decode(this.query)),this.upgrade=t.upgrade!==!1,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=t.jsonp!==!1,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=t.perMessageDeflate!==!1?t.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized===void 0?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}rr.priorWebsocketSuccess=!1;yU(rr.prototype);rr.protocol=$M.protocol;rr.Socket=rr;rr.Transport=Ok();rr.transports=Rx;rr.parser=id;rr.prototype.createTransport=function(e){ji('creating transport "%s"',e);var t=bU(this.query);t.EIO=$M.protocol,t.transport=e;var n=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var r=new gU[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative});return r};function bU(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}rr.prototype.open=function(){var e;if(this.rememberUpgrade&&rr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)};rr.prototype.setTransport=function(e){ji("setting transport %s",e.name);var t=this;this.transport&&(ji("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(n){t.onPacket(n)}).on("error",function(n){t.onError(n)}).on("close",function(){t.onClose("transport close")})};rr.prototype.probe=function(e){ji('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;rr.priorWebsocketSuccess=!1;function a(){if(r.onlyBinaryUpgrades){var A=!this.supportsBinary&&r.transport.supportsBinary;n=n||A}n||(ji('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(L){if(!n)if(L.type==="pong"&&L.data==="probe"){if(ji('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;rr.priorWebsocketSuccess=t.name==="websocket",ji('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||r.readyState!=="closed"&&(ji("changing transport and sending upgrade packet"),E(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{ji('probe transport "%s" failed',e);var F=new Error("probe error");F.transport=t.name,r.emit("upgradeError",F)}}))}function c(){n||(n=!0,E(),t.close(),t=null)}function d(A){var L=new Error("probe error: "+A);L.transport=t.name,c(),ji('probe transport "%s" failed because of error: %s',e,A),r.emit("upgradeError",L)}function l(){d("transport closed")}function x(){d("socket closed")}function b(A){t&&A.name!==t.name&&(ji('"%s" works - aborting "%s"',A.name,t.name),c())}function E(){t.removeListener("open",a),t.removeListener("error",d),t.removeListener("close",l),r.removeListener("close",x),r.removeListener("upgrading",b)}t.once("open",a),t.once("error",d),t.once("close",l),this.once("close",x),this.once("upgrading",b),t.open()};rr.prototype.onOpen=function(){if(ji("socket open"),this.readyState="open",rr.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){ji("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}};rr.prototype.onPacket=function(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(ji('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else ji('packet received with socket readyState "%s"',this.readyState)};rr.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};rr.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){t.readyState!=="closed"&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};rr.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){ji("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)};rr.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})};rr.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};rr.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(ji("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};rr.prototype.write=rr.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this};rr.prototype.sendPacket=function(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),!(this.readyState==="closing"||this.readyState==="closed")){n=n||{},n.compress=n.compress!==!1;var a={type:e,data:t,options:n};this.emit("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}};rr.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),ji("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this};rr.prototype.onError=function(e){ji("socket error %j",e),rr.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)};rr.prototype.onClose=function(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){ji('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}};rr.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~_U(this.transports,e[n])&&t.push(e[n]);return t};Pk.exports=xU;Pk.exports.parser=id;var wU=Pk.exports,NM={exports:{}},UM={exports:{}};(function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var a in t.prototype)r[a]=t.prototype[a];return r}t.prototype.on=t.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},t.prototype.once=function(r,a){function c(){this.off(r,c),a.apply(this,arguments)}return c.fn=a,this.on(r,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+r];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var d,l=0;l<c.length;l++)if(d=c[l],d===a||d.fn===a){c.splice(l,1);break}return this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};var a=[].slice.call(arguments,1),c=this._callbacks["$"+r];if(c){c=c.slice(0);for(var d=0,l=c.length;d<l;++d)c[d].apply(this,a)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(UM);var jM=UM.exports,SU=CU;function CU(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}var VM=EU;function EU(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}var UT=[].slice,qM=function(e,t){if(typeof t=="string"&&(t=e[t]),typeof t!="function")throw new Error("bind() requires a function");var n=UT.call(arguments,2);return function(){return t.apply(e,n.concat(UT.call(arguments)))}};(function(e,t){var n=Ox,r=jM,a=SU,c=VM,d=qM,l=Lx("socket.io-client:socket"),x=sm,b=AM;e.exports=L;var E={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},A=r.prototype.emit;function L(F,$,N){this.io=F,this.nsp=$,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},N&&N.query&&(this.query=N.query),this.io.autoConnect&&this.open()}r(L.prototype),L.prototype.subEvents=function(){if(!this.subs){var F=this.io;this.subs=[c(F,"open",d(this,"onopen")),c(F,"packet",d(this,"onpacket")),c(F,"close",d(this,"onclose"))]}},L.prototype.open=L.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},L.prototype.send=function(){var F=a(arguments);return F.unshift("message"),this.emit.apply(this,F),this},L.prototype.emit=function(F){if(E.hasOwnProperty(F))return A.apply(this,arguments),this;var $=a(arguments),N={type:(this.flags.binary!==void 0?this.flags.binary:b($))?n.BINARY_EVENT:n.EVENT,data:$};return N.options={},N.options.compress=!this.flags||this.flags.compress!==!1,typeof $[$.length-1]=="function"&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=$.pop(),N.id=this.ids++),this.connected?this.packet(N):this.sendBuffer.push(N),this.flags={},this},L.prototype.packet=function(F){F.nsp=this.nsp,this.io.packet(F)},L.prototype.onopen=function(){if(l("transport is open - connecting"),this.nsp!=="/")if(this.query){var F=typeof this.query=="object"?x.encode(this.query):this.query;l("sending connect packet with query %s",F),this.packet({type:n.CONNECT,query:F})}else this.packet({type:n.CONNECT})},L.prototype.onclose=function(F){l("close (%s)",F),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",F)},L.prototype.onpacket=function(F){var $=F.nsp===this.nsp,N=F.type===n.ERROR&&F.nsp==="/";if(!(!$&&!N))switch(F.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(F);break;case n.BINARY_EVENT:this.onevent(F);break;case n.ACK:this.onack(F);break;case n.BINARY_ACK:this.onack(F);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",F.data);break}},L.prototype.onevent=function(F){var $=F.data||[];l("emitting event %j",$),F.id!=null&&(l("attaching ack callback to event"),$.push(this.ack(F.id))),this.connected?A.apply(this,$):this.receiveBuffer.push($)},L.prototype.ack=function(F){var $=this,N=!1;return function(){if(!N){N=!0;var Z=a(arguments);l("sending ack %j",Z),$.packet({type:b(Z)?n.BINARY_ACK:n.ACK,id:F,data:Z})}}},L.prototype.onack=function(F){var $=this.acks[F.id];typeof $=="function"?(l("calling ack %s with %j",F.id,F.data),$.apply(this,F.data),delete this.acks[F.id]):l("bad ack %s",F.id)},L.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},L.prototype.emitBuffered=function(){var F;for(F=0;F<this.receiveBuffer.length;F++)A.apply(this,this.receiveBuffer[F]);for(this.receiveBuffer=[],F=0;F<this.sendBuffer.length;F++)this.packet(this.sendBuffer[F]);this.sendBuffer=[]},L.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},L.prototype.destroy=function(){if(this.subs){for(var F=0;F<this.subs.length;F++)this.subs[F].destroy();this.subs=null}this.io.destroy(this)},L.prototype.close=L.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},L.prototype.compress=function(F){return this.flags.compress=F,this},L.prototype.binary=function(F){return this.flags.binary=F,this}})(NM);var GM=NM.exports,kU=cm;function cm(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}cm.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};cm.prototype.reset=function(){this.attempts=0};cm.prototype.setMin=function(e){this.ms=e};cm.prototype.setMax=function(e){this.max=e};cm.prototype.setJitter=function(e){this.jitter=e};var AU=wU,TU=GM,PU=jM,IU=Ox,uh=VM,lp=qM,Zo=Lx("socket.io-client:manager"),HM=BM,MU=kU,WM=Object.prototype.hasOwnProperty,jT=dr;function dr(e,t){if(!(this instanceof dr))return new dr(e,t);e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new MU({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||IU;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}dr.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)WM.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)};dr.prototype.updateSocketIds=function(){for(var e in this.nsps)WM.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))};dr.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};PU(dr.prototype);dr.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection};dr.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts};dr.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay};dr.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor};dr.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax};dr.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout};dr.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};dr.prototype.open=dr.prototype.connect=function(e,t){if(Zo("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Zo("opening %s",this.uri),this.engine=AU(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var a=uh(n,"open",function(){r.onopen(),e&&e()}),c=uh(n,"error",function(x){if(Zo("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",x),e){var b=new Error("Connection error");b.data=x,e(b)}else r.maybeReconnectOnOpen()});if(this._timeout!==!1){var d=this._timeout;Zo("connect attempt will timeout after %d",d);var l=setTimeout(function(){Zo("connect attempt timed out after %d",d),a.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",d)},d);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(c),this};dr.prototype.onopen=function(){Zo("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(uh(e,"data",lp(this,"ondata"))),this.subs.push(uh(e,"ping",lp(this,"onping"))),this.subs.push(uh(e,"pong",lp(this,"onpong"))),this.subs.push(uh(e,"error",lp(this,"onerror"))),this.subs.push(uh(e,"close",lp(this,"onclose"))),this.subs.push(uh(this.decoder,"decoded",lp(this,"ondecoded")))};dr.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};dr.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};dr.prototype.ondata=function(e){this.decoder.add(e)};dr.prototype.ondecoded=function(e){this.emit("packet",e)};dr.prototype.onerror=function(e){Zo("error",e),this.emitAll("error",e)};dr.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new TU(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&a()}function a(){~HM(r.connecting,n)||r.connecting.push(n)}return n};dr.prototype.destroy=function(e){var t=HM(this.connecting,e);~t&&this.connecting.splice(t,1),!this.connecting.length&&this.close()};dr.prototype.packet=function(e){Zo("writing packet %j",e);var t=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))};dr.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};dr.prototype.cleanup=function(){Zo("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};dr.prototype.close=dr.prototype.disconnect=function(){Zo("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};dr.prototype.onclose=function(e){Zo("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()};dr.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Zo("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Zo("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(Zo("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),!e.skipReconnect&&e.open(function(r){r?(Zo("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",r.data)):(Zo("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}};dr.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};(function(e,t){var n=J$,r=Ox,a=jT,c=Lx("socket.io-client");e.exports=t=l;var d=t.managers={};function l(x,b){typeof x=="object"&&(b=x,x=void 0),b=b||{};var E=n(x),A=E.source,L=E.id,F=E.path,$=d[L]&&F in d[L].nsps,N=b.forceNew||b["force new connection"]||b.multiplex===!1||$,Z;return N?(c("ignoring socket cache for %s",A),Z=a(A,b)):(d[L]||(c("new io instance for %s",A),d[L]=a(A,b)),Z=d[L]),E.query&&!b.query&&(b.query=E.query),Z.socket(E.path,b)}t.protocol=r.protocol,t.connect=l,t.Manager=jT,t.Socket=GM})(YS,YS.exports);var LU=YS.exports,Bx={};Object.defineProperty(Bx,"__esModule",{value:!0});Bx.RENDERER_MESSAGE_EVENT_NAME=void 0;var OU="cosmos-renderer-message";Bx.RENDERER_MESSAGE_EVENT_NAME=OU;Object.defineProperty(kk,"__esModule",{value:!0});kk.createWebSocketsConnect=DU;var FU=RU(LU),c2=Bx;function RU(e){return e&&e.__esModule?e:{default:e}}function DU(e){var t=(0,FU.default)(e);return{postMessage:function(r){t.emit(c2.RENDERER_MESSAGE_EVENT_NAME,r)},onMessage:function(r){return t.on(c2.RENDERER_MESSAGE_EVENT_NAME,r),function(){return t.off(c2.RENDERER_MESSAGE_EVENT_NAME,r)}}}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"FixtureCapture",{enumerable:!0,get:function(){return t.FixtureCapture}}),Object.defineProperty(e,"FixtureContext",{enumerable:!0,get:function(){return n.FixtureContext}}),Object.defineProperty(e,"FixtureLoader",{enumerable:!0,get:function(){return r.FixtureLoader}}),Object.defineProperty(e,"Viewport",{enumerable:!0,get:function(){return x.Viewport}}),Object.defineProperty(e,"createPostMessageConnect",{enumerable:!0,get:function(){return c.createPostMessageConnect}}),Object.defineProperty(e,"createWebSocketsConnect",{enumerable:!0,get:function(){return b.createWebSocketsConnect}}),Object.defineProperty(e,"getDecoratedFixtureElement",{enumerable:!0,get:function(){return a.getDecoratedFixtureElement}}),Object.defineProperty(e,"useSelect",{enumerable:!0,get:function(){return d.useSelect}}),Object.defineProperty(e,"useValue",{enumerable:!0,get:function(){return l.useValue}});var t=gx,n=da,r=Tx,a=Px,c=gk,d=_k,l=wk,x=Mx,b=kk})(R6);var ZM=R6,$x={},zU=wl;function uC(e){"@babel/helpers - typeof";return uC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uC(e)}Object.defineProperty($x,"__esModule",{value:!0});$x.ErrorCatch=void 0;var If=NU(mt),BU=fa,$U=zU;function NU(e){return e&&e.__esModule?e:{default:e}}function UU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jU(e,t,n){return t&&VT(e.prototype,t),n&&VT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function VU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cC(e,t)}function cC(e,t){return cC=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},cC(e,t)}function qU(e){var t=HU();return function(){var r=$1(e),a;if(t){var c=$1(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return GU(this,a)}}function GU(e,t){if(t&&(uC(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KM(e)}function KM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},$1(e)}function WU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZU=function(e){VU(n,e);var t=qU(n);function n(){var r;UU(this,n);for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=t.call.apply(t,[this].concat(c)),WU(KM(r),"state",{error:null}),r}return jU(n,[{key:"componentDidCatch",value:function(a,c){this.setState({error:"".concat(a.message,`
`).concat(c.componentStack)})}},{key:"componentDidUpdate",value:function(a){this.state.error&&(KU(this.props.children,a.children)||XU(this.props.fixtureState,a.fixtureState))&&(this.setState({error:null}),this.props.onErrorReset())}},{key:"render",value:function(){return this.state.error?this.renderError(this.state.error):this.props.children}},{key:"renderError",value:function(a){return __DEV__?null:If.default.createElement(If.default.Fragment,null,If.default.createElement("p",null,If.default.createElement("strong",null,"Ouch, something wrong!")),If.default.createElement("pre",null,a),If.default.createElement("p",null,"Check console for more info."))}}]),n}(If.default.Component);$x.ErrorCatch=ZU;function KU(e,t){return!(0,$U.areNodesEqual)(e,t,!0)}function XU(e,t){return!(0,BU.isEqual)(e,t)}var hm={},Nx={};Object.defineProperty(Nx,"__esModule",{value:!0});Nx.isInsideCosmosPreviewIframe=YU;function YU(){try{return window.self!==window.parent}catch{return!0}}Object.defineProperty(hm,"__esModule",{value:!0});hm.rendererConnect=void 0;var qT=ZM,JU=Nx,QU=(0,JU.isInsideCosmosPreviewIframe)()?(0,qT.createPostMessageConnect)():(0,qT.createWebSocketsConnect)(ej());hm.rendererConnect=QU;function ej(){return location.origin}var fm={},tj=bx;Object.defineProperty(fm,"__esModule",{value:!0});fm.rendererId=void 0;var nj=tj,rj=ij();fm.rendererId=rj;function ij(){var e=sessionStorage.getItem("cosmosRendererId");return e||(e=(0,nj.uuid)(),sessionStorage.setItem("cosmosRendererId",e)),e}var Bk={};Object.defineProperty(Bk,"__esModule",{value:!0});Bk.renderMessage=lj;var oj=aj(mt);function aj(e){return e&&e.__esModule?e:{default:e}}var sj={position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",fontFamily:'-apple-system, BlinkMacSystemFont, Ubuntu, "Helvetica Neue", Helvetica, sans-serif',fontSize:14};function lj(e){var t=e.msg;return oj.default.createElement("div",{style:sj},t)}var Ux={},Bh={},__={},uj=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var GT=Object.getOwnPropertySymbols,cj=Object.prototype.hasOwnProperty,hj=Object.prototype.propertyIsEnumerable;function fj(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function dj(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(c){return t[c]});if(r.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(c){a[c]=c}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var pj=dj()?Object.assign:function(e,t){for(var n,r=fj(e),a,c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var d in n)cj.call(n,d)&&(r[d]=n[d]);if(GT){a=GT(n);for(var l=0;l<a.length;l++)hj.call(n,a[l])&&(r[a[l]]=n[a[l]])}}return r},XM="%[a-f0-9]{2}",HT=new RegExp("("+XM+")|([^%]+?)","gi"),WT=new RegExp("("+XM+")+","gi");function hC(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],hC(n),hC(r))}function mj(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(HT)||[],n=1;n<t.length;n++)e=hC(t,n).join(""),t=e.match(HT)||[];return e}}function gj(e){for(var t={"%FE%FF":"","%FF%FE":""},n=WT.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=mj(n[0]);r!==n[0]&&(t[n[0]]=r)}n=WT.exec(e)}t["%C2"]="";for(var a=Object.keys(t),c=0;c<a.length;c++){var d=a[c];e=e.replace(new RegExp(d,"g"),t[d])}return e}var yj=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return gj(e)}},_j=uj,YM=pj,ZT=yj;function vj(e){switch(e.arrayFormat){case"index":return function(t,n,r){return n===null?[Ga(t,e),"[",r,"]"].join(""):[Ga(t,e),"[",Ga(r,e),"]=",Ga(n,e)].join("")};case"bracket":return function(t,n){return n===null?Ga(t,e):[Ga(t,e),"[]=",Ga(n,e)].join("")};default:return function(t,n){return n===null?Ga(t,e):[Ga(t,e),"=",Ga(n,e)].join("")}}}function xj(e){var t;switch(e.arrayFormat){case"index":return function(n,r,a){if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){a[n]=r;return}a[n]===void 0&&(a[n]={}),a[n][t[1]]=r};case"bracket":return function(n,r,a){if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),t){if(a[n]===void 0){a[n]=[r];return}}else{a[n]=r;return}a[n]=[].concat(a[n],r)};default:return function(n,r,a){if(a[n]===void 0){a[n]=r;return}a[n]=[].concat(a[n],r)}}}function Ga(e,t){return t.encode?t.strict?_j(e):encodeURIComponent(e):e}function JM(e){return Array.isArray(e)?e.sort():typeof e=="object"?JM(Object.keys(e)).sort(function(t,n){return Number(t)-Number(n)}).map(function(t){return e[t]}):e}function QM(e){var t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function eL(e,t){t=YM({arrayFormat:"none"},t);var n=xj(t),r=Object.create(null);return typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e)?r:(e.split("&").forEach(function(a){var c=a.replace(/\+/g," ").split("="),d=c.shift(),l=c.length>0?c.join("="):void 0;l=l===void 0?null:ZT(l),n(ZT(d),l,r)}),Object.keys(r).sort().reduce(function(a,c){var d=r[c];return d&&typeof d=="object"&&!Array.isArray(d)?a[c]=JM(d):a[c]=d,a},Object.create(null)))}__.extract=QM;__.parse=eL;__.stringify=function(e,t){var n={encode:!0,strict:!0,arrayFormat:"none"};t=YM(n,t),t.sort===!1&&(t.sort=function(){});var r=vj(t);return e?Object.keys(e).sort(t.sort).map(function(a){var c=e[a];if(c===void 0)return"";if(c===null)return Ga(a,t);if(Array.isArray(c)){var d=[];return c.slice().forEach(function(l){l!==void 0&&d.push(r(a,l,d.length))}),d.join("&")}return Ga(a,t)+"="+Ga(c,t)}).filter(function(a){return a.length>0}).join("&"):""};__.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:eL(QM(e),t)}};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.parsePlaygroundUrlQuery=Sj;Bh.parseRendererUrlQuery=Ej;Bh.parseUrlQuery=$k;Bh.stringifyPlaygroundUrlQuery=wj;Bh.stringifyRendererUrlQuery=Cj;Bh.stringifyUrlQuery=kj;var jx=bj(__);function bj(e){return e&&e.__esModule?e:{default:e}}function wj(e){var t={};return e.fixtureId&&(t.fixtureId=JSON.stringify(e.fixtureId)),jx.default.stringify(t)}function Sj(e){var t=$k(e),n={};return t.fixtureId&&(n.fixtureId=JSON.parse(t.fixtureId)),n}function Cj(e){var t={};return e._fixtureId&&(t._fixtureId=JSON.stringify(e._fixtureId)),jx.default.stringify(t)}function Ej(e){var t=$k(e),n={};return t._fixtureId&&(n._fixtureId=JSON.parse(t._fixtureId)),n}function $k(e){return jx.default.parse(e)}function kj(e){return jx.default.stringify(e)}var Aj=Bh;Object.defineProperty(Ux,"__esModule",{value:!0});Ux.selectedFixtureId=void 0;var Tj=Aj,Pj=Nx,Ij=Mj();Ux.selectedFixtureId=Ij;function Mj(){var e=(0,Tj.parseRendererUrlQuery)(location.search);return e._fixtureId?(Lj(e._fixtureId),e._fixtureId):Oj()}function Lj(e){sessionStorage.setItem("cosmosFixtureId",JSON.stringify(e))}function Oj(){if((0,Pj.isInsideCosmosPreviewIframe)())return null;var e=sessionStorage.getItem("cosmosFixtureId");return e?JSON.parse(e):null}Object.defineProperty(qE,"__esModule",{value:!0});qE.DomFixtureLoader=jj;var Fj=Uj(mt),Rj=ZM,Dj=$x,zj=hm,Bj=fm,$j=Bk,Nj=Ux;function Uj(e){return e&&e.__esModule?e:{default:e}}function jj(e){var t=e.fixtures,n=e.decorators,r=e.onErrorReset;return Fj.default.createElement(Rj.FixtureLoader,{rendererId:Bj.rendererId,rendererConnect:zj.rendererConnect,fixtures:t,selectedFixtureId:Nj.selectedFixtureId,systemDecorators:[Dj.ErrorCatch],userDecorators:n,renderMessage:$j.renderMessage,onErrorReset:r})}var Vj=fm,qj=hm;window.addEventListener("error",function(){qj.rendererConnect.postMessage({type:"rendererError",payload:{rendererId:Vj.rendererId}})});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mountDomRenderer=x,Object.defineProperty(e,"rendererConnect",{enumerable:!0,get:function(){return c.rendererConnect}}),Object.defineProperty(e,"rendererId",{enumerable:!0,get:function(){return d.rendererId}});var t=l(mt),n=V2,r=VE,a=qE,c=hm,d=fm;function l(b){return b&&b.__esModule?b:{default:b}}function x(b){var E=b.rendererConfig,A=b.fixtures,L=b.decorators,F=b.onErrorReset,$=(0,r.getDomContainer)(E.containerQuerySelector),N=(0,n.createRoot)($);N.render(t.default.createElement(a.DomFixtureLoader,{fixtures:A,decorators:L,onErrorReset:F}))}})(MP);var Gj=MP;const Hj="2.15.1";var tL={exports:{}},Vx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wj=mt,Zj=Symbol.for("react.element"),Kj=Symbol.for("react.fragment"),Xj=Object.prototype.hasOwnProperty,Yj=Wj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jj={key:!0,ref:!0,__self:!0,__source:!0};function nL(e,t,n){var r,a={},c=null,d=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)Xj.call(t,r)&&!Jj.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Zj,type:e,key:c,ref:d,props:a,_owner:Yj.current}}Vx.Fragment=Kj;Vx.jsx=nL;Vx.jsxs=nL;tL.exports=Vx;var Nk=tL.exports;const qx=Nk.Fragment,Xe=Nk.jsx,mn=Nk.jsxs;function rL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=rL(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Ci(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=rL(e))&&(r&&(r+=" "),r+=t);return r}const iL=e=>Xe("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e,children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.54039 5.54039C5.79423 5.28655 6.20578 5.28655 6.45963 5.54039L12 11.0808L17.5404 5.54039C17.7942 5.28655 18.2058 5.28655 18.4596 5.54039C18.7135 5.79423 18.7135 6.20578 18.4596 6.45963L12.9192 12L18.4596 17.5404C18.7135 17.7942 18.7135 18.2058 18.4596 18.4596C18.2058 18.7135 17.7942 18.7135 17.5404 18.4596L12 12.9192L6.45963 18.4596C6.20578 18.7135 5.79423 18.7135 5.54039 18.4596C5.28655 18.2058 5.28655 17.7942 5.54039 17.5404L11.0808 12L5.54039 6.45963C5.28655 6.20578 5.28655 5.79423 5.54039 5.54039Z",fill:"currentColor"})});iL.displayName="Close24";const Qj=mt.memo(iL),eV=Qj,oL=e=>mn("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:[Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 2.64645C2.84171 2.45118 3.15829 2.45118 3.35355 2.64645L13.3536 12.6464C13.5488 12.8417 13.5488 13.1583 13.3536 13.3536C13.1583 13.5488 12.8417 13.5488 12.6464 13.3536L2.64645 3.35355C2.45118 3.15829 2.45118 2.84171 2.64645 2.64645Z",fill:"currentColor"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 2.64645C13.1583 2.45118 12.8417 2.45118 12.6464 2.64645L2.64645 12.6464C2.45118 12.8417 2.45118 13.1583 2.64645 13.3536C2.84171 13.5488 3.15829 13.5488 3.35355 13.3536L13.3536 3.35355C13.5488 3.15829 13.5488 2.84171 13.3536 2.64645Z",fill:"currentColor"})]});oL.displayName="Close16";const tV=mt.memo(oL),nV=tV,aL=e=>Xe("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 5.64645C2.84171 5.45118 3.15829 5.45118 3.35355 5.64645L8 10.2929L12.6464 5.64645C12.8417 5.45118 13.1583 5.45118 13.3536 5.64645C13.5488 5.84171 13.5488 6.15829 13.3536 6.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L2.64645 6.35355C2.45118 6.15829 2.45118 5.84171 2.64645 5.64645Z",fill:"currentColor"})});aL.displayName="ChevronDown16";const rV=mt.memo(aL),iV=rV,sL=e=>mn("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:[Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 2.66669C5.0545 2.66669 2.66669 5.0545 2.66669 8.00002C2.66669 10.9455 5.0545 13.3334 8.00002 13.3334C10.9455 13.3334 13.3334 10.9455 13.3334 8.00002C13.3334 5.0545 10.9455 2.66669 8.00002 2.66669ZM1.66669 8.00002C1.66669 4.50222 4.50222 1.66669 8.00002 1.66669C11.4978 1.66669 14.3334 4.50222 14.3334 8.00002C14.3334 11.4978 11.4978 14.3334 8.00002 14.3334C4.50222 14.3334 1.66669 11.4978 1.66669 8.00002Z",fill:"currentColor"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 6.87481C8.27614 6.87481 8.5 7.09867 8.5 7.37481V11C8.5 11.2761 8.27614 11.5 8 11.5C7.72386 11.5 7.5 11.2761 7.5 11V7.37481C7.5 7.09867 7.72386 6.87481 8 6.87481Z",fill:"currentColor"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 4.5C8.27614 4.5 8.5 4.72386 8.5 5V5.01C8.5 5.28614 8.27614 5.51 8 5.51C7.72386 5.51 7.5 5.28614 7.5 5.01V5C7.5 4.72386 7.72386 4.5 8 4.5Z",fill:"currentColor"})]});sL.displayName="InfoOutline16";const oV=mt.memo(sL),aV=oV;var lL={exports:{}},sV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lV=sV,uV=lV;function uL(){}function cL(){}cL.resetWarningCache=uL;var cV=function(){function e(r,a,c,d,l,x){if(x!==uV){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cL,resetWarningCache:uL};return n.PropTypes=n,n};lL.exports=cV();var hV=lL.exports;const En=ic(hV);let fV=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function v_(e){return e.split("-")[1]}function Uk(e){return e==="y"?"height":"width"}function qf(e){return e.split("-")[0]}function x_(e){return["top","bottom"].includes(qf(e))?"x":"y"}function KT(e,t,n){let{reference:r,floating:a}=e;const c=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,l=x_(t),x=Uk(l),b=r[x]/2-a[x]/2,E=l==="x";let A;switch(qf(t)){case"top":A={x:c,y:r.y-a.height};break;case"bottom":A={x:c,y:r.y+r.height};break;case"right":A={x:r.x+r.width,y:d};break;case"left":A={x:r.x-a.width,y:d};break;default:A={x:r.x,y:r.y}}switch(v_(t)){case"start":A[l]-=b*(n&&E?-1:1);break;case"end":A[l]+=b*(n&&E?-1:1)}return A}const dV=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:c=[],platform:d}=n,l=c.filter(Boolean),x=await(d.isRTL==null?void 0:d.isRTL(t));let b=await d.getElementRects({reference:e,floating:t,strategy:a}),{x:E,y:A}=KT(b,r,x),L=r,F={},$=0;for(let N=0;N<l.length;N++){const{name:Z,fn:R}=l[N],{x:q,y:G,data:Q,reset:se}=await R({x:E,y:A,initialPlacement:r,placement:L,strategy:a,middlewareData:F,rects:b,platform:d,elements:{reference:e,floating:t}});E=q??E,A=G??A,F={...F,[Z]:{...F[Z],...Q}},se&&$<=50&&($++,typeof se=="object"&&(se.placement&&(L=se.placement),se.rects&&(b=se.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:a}):se.rects),{x:E,y:A}=KT(b,L,x)),N=-1)}return{x:E,y:A,placement:L,strategy:a,middlewareData:F}};function hL(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function fC(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function fL(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:c,rects:d,elements:l,strategy:x}=e,{boundary:b="clippingAncestors",rootBoundary:E="viewport",elementContext:A="floating",altBoundary:L=!1,padding:F=0}=t,$=hL(F),N=l[L?A==="floating"?"reference":"floating":A],Z=fC(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(N)))==null||n?N:N.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(l.floating)),boundary:b,rootBoundary:E,strategy:x})),R=A==="floating"?{...d.floating,x:r,y:a}:d.reference,q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(l.floating)),G=await(c.isElement==null?void 0:c.isElement(q))&&await(c.getScale==null?void 0:c.getScale(q))||{x:1,y:1},Q=fC(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({rect:R,offsetParent:q,strategy:x}):R);return{top:(Z.top-Q.top+$.top)/G.y,bottom:(Q.bottom-Z.bottom+$.bottom)/G.y,left:(Z.left-Q.left+$.left)/G.x,right:(Q.right-Z.right+$.right)/G.x}}const pV=Math.min,mV=Math.max;function dC(e,t,n){return mV(e,pV(t,n))}const XT=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:a,y:c,placement:d,rects:l,platform:x,elements:b}=t;if(n==null)return{};const E=hL(r),A={x:a,y:c},L=x_(d),F=Uk(L),$=await x.getDimensions(n),N=L==="y",Z=N?"top":"left",R=N?"bottom":"right",q=N?"clientHeight":"clientWidth",G=l.reference[F]+l.reference[L]-A[L]-l.floating[F],Q=A[L]-l.reference[L],se=await(x.getOffsetParent==null?void 0:x.getOffsetParent(n));let ee=se?se[q]:0;ee&&await(x.isElement==null?void 0:x.isElement(se))||(ee=b.floating[q]||l.floating[F]);const oe=G/2-Q/2,xe=E[Z],Oe=ee-$[F]-E[R],Le=ee/2-$[F]/2+oe,qe=dC(xe,Le,Oe),$e=v_(d)!=null&&Le!=qe&&l.reference[F]/2-(Le<xe?E[Z]:E[R])-$[F]/2<0;return{[L]:A[L]-($e?Le<xe?xe-Le:Oe-Le:0),data:{[L]:qe,centerOffset:Le-qe}}}}),gV=["top","right","bottom","left"];gV.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const yV={left:"right",right:"left",bottom:"top",top:"bottom"};function N1(e){return e.replace(/left|right|bottom|top/g,t=>yV[t])}function _V(e,t,n){n===void 0&&(n=!1);const r=v_(e),a=x_(e),c=Uk(a);let d=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=N1(d)),{main:d,cross:N1(d)}}const vV={start:"end",end:"start"};function h2(e){return e.replace(/start|end/g,t=>vV[t])}const xV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:a,rects:c,initialPlacement:d,platform:l,elements:x}=t,{mainAxis:b=!0,crossAxis:E=!0,fallbackPlacements:A,fallbackStrategy:L="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:$=!0,...N}=e,Z=qf(r),R=qf(d)===d,q=await(l.isRTL==null?void 0:l.isRTL(x.floating)),G=A||(R||!$?[N1(d)]:function(qe){const $e=N1(qe);return[h2(qe),$e,h2($e)]}(d));A||F==="none"||G.push(...function(qe,$e,nt,pt){const At=v_(qe);let zt=function(Vt,Ve,_e){const we=["left","right"],K=["right","left"],ae=["top","bottom"],lt=["bottom","top"];switch(Vt){case"top":case"bottom":return _e?Ve?K:we:Ve?we:K;case"left":case"right":return Ve?ae:lt;default:return[]}}(qf(qe),nt==="start",pt);return At&&(zt=zt.map(Vt=>Vt+"-"+At),$e&&(zt=zt.concat(zt.map(h2)))),zt}(d,$,F,q));const Q=[d,...G],se=await fL(t,N),ee=[];let oe=((n=a.flip)==null?void 0:n.overflows)||[];if(b&&ee.push(se[Z]),E){const{main:qe,cross:$e}=_V(r,c,q);ee.push(se[qe],se[$e])}if(oe=[...oe,{placement:r,overflows:ee}],!ee.every(qe=>qe<=0)){var xe,Oe;const qe=(((xe=a.flip)==null?void 0:xe.index)||0)+1,$e=Q[qe];if($e)return{data:{index:qe,overflows:oe},reset:{placement:$e}};let nt=(Oe=oe.filter(pt=>pt.overflows[0]<=0).sort((pt,At)=>pt.overflows[1]-At.overflows[1])[0])==null?void 0:Oe.placement;if(!nt)switch(L){case"bestFit":{var Le;const pt=(Le=oe.map(At=>[At.placement,At.overflows.filter(zt=>zt>0).reduce((zt,Vt)=>zt+Vt,0)]).sort((At,zt)=>At[1]-zt[1])[0])==null?void 0:Le[0];pt&&(nt=pt);break}case"initialPlacement":nt=d}if(r!==nt)return{reset:{placement:nt}}}return{}}}},bV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,a=await async function(c,d){const{placement:l,platform:x,elements:b}=c,E=await(x.isRTL==null?void 0:x.isRTL(b.floating)),A=qf(l),L=v_(l),F=x_(l)==="x",$=["left","top"].includes(A)?-1:1,N=E&&F?-1:1,Z=typeof d=="function"?d(c):d;let{mainAxis:R,crossAxis:q,alignmentAxis:G}=typeof Z=="number"?{mainAxis:Z,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Z};return L&&typeof G=="number"&&(q=L==="end"?-1*G:G),F?{x:q*N,y:R*$}:{x:R*$,y:q*N}}(t,e);return{x:n+a.x,y:r+a.y,data:a}}}};function wV(e){return e==="x"?"y":"x"}const SV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:l={fn:Z=>{let{x:R,y:q}=Z;return{x:R,y:q}}},...x}=e,b={x:n,y:r},E=await fL(t,x),A=x_(qf(a)),L=wV(A);let F=b[A],$=b[L];if(c){const Z=A==="y"?"bottom":"right";F=dC(F+E[A==="y"?"top":"left"],F,F-E[Z])}if(d){const Z=L==="y"?"bottom":"right";$=dC($+E[L==="y"?"top":"left"],$,$-E[Z])}const N=l.fn({...t,[A]:F,[L]:$});return{...N,data:{x:N.x-n,y:N.y-r}}}}};function Za(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function iu(e){return Za(e).getComputedStyle(e)}const YT=Math.min,my=Math.max,U1=Math.round;function dL(e){const t=iu(e);let n=parseFloat(t.width),r=parseFloat(t.height);const a=e.offsetWidth,c=e.offsetHeight,d=U1(n)!==a||U1(r)!==c;return d&&(n=a,r=c),{width:n,height:r,fallback:d}}function Lh(e){return mL(e)?(e.nodeName||"").toLowerCase():""}let bv;function pL(){if(bv)return bv;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(bv=e.brands.map(t=>t.brand+"/"+t.version).join(" "),bv):navigator.userAgent}function ou(e){return e instanceof Za(e).HTMLElement}function yl(e){return e instanceof Za(e).Element}function mL(e){return e instanceof Za(e).Node}function JT(e){return typeof ShadowRoot>"u"?!1:e instanceof Za(e).ShadowRoot||e instanceof ShadowRoot}function Gx(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=iu(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function CV(e){return["table","td","th"].includes(Lh(e))}function pC(e){const t=/firefox/i.test(pL()),n=iu(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(a=>n.willChange.includes(a))||["paint","layout","strict","content"].some(a=>{const c=n.contain;return c!=null&&c.includes(a)})}function mC(){return/^((?!chrome|android).)*safari/i.test(pL())}function jk(e){return["html","body","#document"].includes(Lh(e))}function gL(e){return yl(e)?e:e.contextElement}const yL={x:1,y:1};function jp(e){const t=gL(e);if(!ou(t))return yL;const n=t.getBoundingClientRect(),{width:r,height:a,fallback:c}=dL(t);let d=(c?U1(n.width):n.width)/r,l=(c?U1(n.height):n.height)/a;return d&&Number.isFinite(d)||(d=1),l&&Number.isFinite(l)||(l=1),{x:d,y:l}}function Jf(e,t,n,r){var a,c;t===void 0&&(t=!1),n===void 0&&(n=!1);const d=e.getBoundingClientRect(),l=gL(e);let x=yL;t&&(r?yl(r)&&(x=jp(r)):x=jp(e));const b=l?Za(l):window,E=mC()&&n;let A=(d.left+(E&&((a=b.visualViewport)==null?void 0:a.offsetLeft)||0))/x.x,L=(d.top+(E&&((c=b.visualViewport)==null?void 0:c.offsetTop)||0))/x.y,F=d.width/x.x,$=d.height/x.y;if(l){const N=Za(l),Z=r&&yl(r)?Za(r):r;let R=N.frameElement;for(;R&&r&&Z!==N;){const q=jp(R),G=R.getBoundingClientRect(),Q=getComputedStyle(R);G.x+=(R.clientLeft+parseFloat(Q.paddingLeft))*q.x,G.y+=(R.clientTop+parseFloat(Q.paddingTop))*q.y,A*=q.x,L*=q.y,F*=q.x,$*=q.y,A+=G.x,L+=G.y,R=Za(R).frameElement}}return{width:F,height:$,top:L,right:A+F,bottom:L+$,left:A,x:A,y:L}}function Ah(e){return((mL(e)?e.ownerDocument:e.document)||window.document).documentElement}function Hx(e){return yl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function _L(e){return Jf(Ah(e)).left+Hx(e).scrollLeft}function Yy(e){if(Lh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||JT(e)&&e.host||Ah(e);return JT(t)?t.host:t}function vL(e){const t=Yy(e);return jk(t)?t.ownerDocument.body:ou(t)&&Gx(t)?t:vL(t)}function gy(e,t){var n;t===void 0&&(t=[]);const r=vL(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),c=Za(r);return a?t.concat(c,c.visualViewport||[],Gx(r)?r:[]):t.concat(r,gy(r))}function QT(e,t,n){let r;if(t==="viewport")r=function(d,l){const x=Za(d),b=Ah(d),E=x.visualViewport;let A=b.clientWidth,L=b.clientHeight,F=0,$=0;if(E){A=E.width,L=E.height;const N=mC();(!N||N&&l==="fixed")&&(F=E.offsetLeft,$=E.offsetTop)}return{width:A,height:L,x:F,y:$}}(e,n);else if(t==="document")r=function(d){const l=Ah(d),x=Hx(d),b=d.ownerDocument.body,E=my(l.scrollWidth,l.clientWidth,b.scrollWidth,b.clientWidth),A=my(l.scrollHeight,l.clientHeight,b.scrollHeight,b.clientHeight);let L=-x.scrollLeft+_L(d);const F=-x.scrollTop;return iu(b).direction==="rtl"&&(L+=my(l.clientWidth,b.clientWidth)-E),{width:E,height:A,x:L,y:F}}(Ah(e));else if(yl(t))r=function(d,l){const x=Jf(d,!0,l==="fixed"),b=x.top+d.clientTop,E=x.left+d.clientLeft,A=ou(d)?jp(d):{x:1,y:1};return{width:d.clientWidth*A.x,height:d.clientHeight*A.y,x:E*A.x,y:b*A.y}}(t,n);else{const d={...t};if(mC()){var a,c;const l=Za(e);d.x-=((a=l.visualViewport)==null?void 0:a.offsetLeft)||0,d.y-=((c=l.visualViewport)==null?void 0:c.offsetTop)||0}r=d}return fC(r)}function e5(e,t){return ou(e)&&iu(e).position!=="fixed"?t?t(e):e.offsetParent:null}function t5(e,t){const n=Za(e);let r=e5(e,t);for(;r&&CV(r)&&iu(r).position==="static";)r=e5(r,t);return r&&(Lh(r)==="html"||Lh(r)==="body"&&iu(r).position==="static"&&!pC(r))?n:r||function(a){let c=Yy(a);for(;ou(c)&&!jk(c);){if(pC(c))return c;c=Yy(c)}return null}(e)||n}function EV(e,t,n){const r=ou(t),a=Ah(t),c=Jf(e,!0,n==="fixed",t);let d={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(r||!r&&n!=="fixed")if((Lh(t)!=="body"||Gx(a))&&(d=Hx(t)),ou(t)){const x=Jf(t,!0);l.x=x.x+t.clientLeft,l.y=x.y+t.clientTop}else a&&(l.x=_L(a));return{x:c.left+d.scrollLeft-l.x,y:c.top+d.scrollTop-l.y,width:c.width,height:c.height}}const kV={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const c=n==="clippingAncestors"?function(b,E){const A=E.get(b);if(A)return A;let L=gy(b).filter(Z=>yl(Z)&&Lh(Z)!=="body"),F=null;const $=iu(b).position==="fixed";let N=$?Yy(b):b;for(;yl(N)&&!jk(N);){const Z=iu(N),R=pC(N);Z.position==="fixed"?F=null:($?R||F:R||Z.position!=="static"||!F||!["absolute","fixed"].includes(F.position))?F=Z:L=L.filter(q=>q!==N),N=Yy(N)}return E.set(b,L),L}(t,this._c):[].concat(n),d=[...c,r],l=d[0],x=d.reduce((b,E)=>{const A=QT(t,E,a);return b.top=my(A.top,b.top),b.right=YT(A.right,b.right),b.bottom=YT(A.bottom,b.bottom),b.left=my(A.left,b.left),b},QT(t,l,a));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const a=ou(n),c=Ah(n);if(n===c)return t;let d={scrollLeft:0,scrollTop:0},l={x:1,y:1};const x={x:0,y:0};if((a||!a&&r!=="fixed")&&((Lh(n)!=="body"||Gx(c))&&(d=Hx(n)),ou(n))){const b=Jf(n);l=jp(n),x.x=b.x+n.clientLeft,x.y=b.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-d.scrollLeft*l.x+x.x,y:t.y*l.y-d.scrollTop*l.y+x.y}},isElement:yl,getDimensions:function(e){return ou(e)?dL(e):e.getBoundingClientRect()},getOffsetParent:t5,getDocumentElement:Ah,getScale:jp,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const a=this.getOffsetParent||t5,c=this.getDimensions;return{reference:EV(t,await a(n),r),floating:{x:0,y:0,...await c(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>iu(e).direction==="rtl"};function AV(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:c=!0,elementResize:d=!0,animationFrame:l=!1}=r,x=a&&!l,b=x||c?[...yl(e)?gy(e):e.contextElement?gy(e.contextElement):[],...gy(t)]:[];b.forEach(F=>{x&&F.addEventListener("scroll",n,{passive:!0}),c&&F.addEventListener("resize",n)});let E,A=null;if(d){let F=!0;A=new ResizeObserver(()=>{F||n(),F=!1}),yl(e)&&!l&&A.observe(e),yl(e)||!e.contextElement||l||A.observe(e.contextElement),A.observe(t)}let L=l?Jf(e):null;return l&&function F(){const $=Jf(e);!L||$.x===L.x&&$.y===L.y&&$.width===L.width&&$.height===L.height||n(),L=$,E=requestAnimationFrame(F)}(),n(),()=>{var F;b.forEach($=>{x&&$.removeEventListener("scroll",n),c&&$.removeEventListener("resize",n)}),(F=A)==null||F.disconnect(),A=null,l&&cancelAnimationFrame(E)}}const TV=(e,t,n)=>{const r=new Map,a={platform:kV,...n},c={...a.platform,_c:r};return dV(e,t,{...a,platform:c})},PV=e=>{const{element:t,padding:n}=e;function r(a){return Object.prototype.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){return r(t)?t.current!=null?XT({element:t.current,padding:n}).fn(a):{}:t?XT({element:t,padding:n}).fn(a):{}}}};var Qv=typeof document<"u"?mt.useLayoutEffect:mt.useEffect;function j1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!j1(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const c=a[r];if(!(c==="_owner"&&e.$$typeof)&&!j1(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function n5(e){const t=mt.useRef(e);return Qv(()=>{t.current=e}),t}function IV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,whileElementsMounted:c,open:d}=e,[l,x]=mt.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,E]=mt.useState(r);j1(b,r)||E(r);const A=mt.useRef(null),L=mt.useRef(null),F=mt.useRef(l),$=n5(c),N=n5(a),[Z,R]=mt.useState(null),[q,G]=mt.useState(null),Q=mt.useCallback(Le=>{A.current!==Le&&(A.current=Le,R(Le))},[]),se=mt.useCallback(Le=>{L.current!==Le&&(L.current=Le,G(Le))},[]),ee=mt.useCallback(()=>{if(!A.current||!L.current)return;const Le={placement:t,strategy:n,middleware:b};N.current&&(Le.platform=N.current),TV(A.current,L.current,Le).then(qe=>{const $e={...qe,isPositioned:!0};oe.current&&!j1(F.current,$e)&&(F.current=$e,UE.flushSync(()=>{x($e)}))})},[b,t,n,N]);Qv(()=>{d===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,x(Le=>({...Le,isPositioned:!1})))},[d]);const oe=mt.useRef(!1);Qv(()=>(oe.current=!0,()=>{oe.current=!1}),[]),Qv(()=>{if(Z&&q){if($.current)return $.current(Z,q,ee);ee()}},[Z,q,ee,$]);const xe=mt.useMemo(()=>({reference:A,floating:L,setReference:Q,setFloating:se}),[Q,se]),Oe=mt.useMemo(()=>({reference:Z,floating:q}),[Z,q]);return mt.useMemo(()=>({...l,update:ee,refs:xe,elements:Oe,reference:Q,floating:se}),[l,ee,xe,Oe,Q,se])}const MV="_tooltipContainer_g6vht_4",LV="_hoverTooltip_g6vht_15",OV="_popup_g6vht_18",FV="_contentBody_g6vht_23",RV="_bodyBottom_g6vht_36",DV="_unset_g6vht_41",zV="_arrow_g6vht_45",BV="_arrowInner_g6vht_74",$V="_tooltipContent_g6vht_81",NV="_closeIcon_g6vht_88",Uu={tooltipContainer:MV,hoverTooltip:LV,popup:OV,contentBody:FV,bodyBottom:RV,unset:DV,arrow:zV,"arrow-top":"_arrow-top_g6vht_58","arrow-bottom":"_arrow-bottom_g6vht_62","arrow-left":"_arrow-left_g6vht_66","arrow-right":"_arrow-right_g6vht_70",arrowInner:BV,tooltipContent:$V,closeIcon:NV};function r5(e){switch(e){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end"}}function UV(e,t,n){if(e&&t&&console.error("You should not use both placement and deprecadedPlacement props at the same time. Placement prop will be used."),t)return t;if(n){if(typeof e=="function")return r5(e(n));if(e)return r5(e)}}const i5="top";function jV({children:e,position:t,triggerRef:n,transitionRef:r,placement:a,getPlacement:c,classes:d,hoverBehavior:l=!1,onOuterClick:x,onClose:b,open:E=!0,offset:A=7}){const L=mt.useCallback(Oe=>{if(!(x&&l===!0)){if(x){x(Oe);return}b==null||b(Oe)}},[l,x,b]),F=mt.useRef(null),$=mt.useMemo(()=>UV(c,a,t)||i5,[c,a,t]),{refs:N,x:Z,y:R,strategy:q,middlewareData:{arrow:{x:G,y:Q}={}},placement:se}=IV({placement:$,open:E,whileElementsMounted:AV,middleware:[bV(A),xV(),SV({padding:5}),PV({element:F})]}),ee=mt.useMemo(()=>({"--tooltip-arrox-x-position":G!=null?`${G}px`:"","--tooltip-arrow-y-position":Q!=null?`${Q}px`:"","--tooltip-x-position":`${Z??0}px`,"--tooltip-y-position":`${R??0}px`,"--tooltip-placement":q}),[G,Q,Z,R,q]),oe=mt.useMemo(()=>`arrow-${se.split("-")[0]||i5}`,[se]);if(mt.useLayoutEffect(()=>{if(n)N.setReference(n.current);else if(t){const{x:Oe,y:Le}=t;N.setReference({getBoundingClientRect(){return{width:0,height:0,x:Oe,y:Le,top:Le,left:Oe,right:Oe,bottom:Le}}})}},[t,N,n]),t&&n&&console.error("Both position and triggerRef are provided. Tooltip will be rendered with triggerRef"),!t&&!n)return console.error("Tooltip will not be rendered because neither position nor triggerRef are provided"),null;if(!E)return null;const xe=l?void 0:b;return Xe("div",{ref:r,className:Ci(Uu.tooltipContainer,{[Uu.hoverTooltip]:l}),onClick:L,style:ee,children:mn("div",{ref:N.setFloating,className:Uu.tooltipContent,children:[mn("div",{className:Ci(Uu.contentBody,Ci),children:[mn("div",{children:[e,Xe("div",{className:Uu.bodyBottom})]}),xe&&Xe("div",{className:Uu.closeIcon,onClick:xe,children:Xe(nV,{})})]}),Xe("div",{ref:F,className:Ci(Uu.arrow,Uu[oe]),children:Xe("div",{className:Uu.arrowInner})})]})})}const VV="_legendTitle_sgaz8_1",qV="_grid_sgaz8_6",GV="_cell_sgaz8_11",HV="_colorCell_sgaz8_17",WV="_yStepsCell_sgaz8_26",ZV="_xStepsCell_sgaz8_45",KV="_xStepsCellNoLabel_sgaz8_46",XV="_arrowX_sgaz8_70",YV="_arrowY_sgaz8_71",JV="_axisLabelX_sgaz8_88",QV="_axisLabelY_sgaz8_89",eq="_arrowHeadX_sgaz8_107",tq="_arrowHeadY_sgaz8_108",nq="_arrowHeadY_angle0_sgaz8_123",ho={legendTitle:VV,grid:qV,cell:GV,colorCell:HV,yStepsCell:WV,xStepsCell:ZV,xStepsCellNoLabel:KV,arrowX:XV,arrowY:YV,axisLabelX:JV,axisLabelY:QV,arrowHeadX:eq,arrowHeadY:tq,arrowHeadY_angle0:nq};function rq(){const e={};return{increment:t=>(typeof e[t]=="number"?e[t]+=1:e[t]=0,e[t])}}function iq(e,t){const n=[],r=rq();return e.forEach((a,c)=>{a.split(" ").forEach((d,l)=>{const x=r.increment(d),b=t[d]&&t[d][x];b&&n.push({...b,_position:{x:l,y:c}})})}),n}function o5(e){return[...e].reverse()}const oq=(e,t)=>({gridColumn:`${e+1} / ${e+2}`,gridRow:`${t+1} / ${t+2}`}),a5=({className:e,type:t})=>Xe("div",{className:e,children:t==="horizontal"?Xe("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe("path",{d:"M6,6L0,0l0,2.4L3.6,6L0,9.6L0,12L6,6z",fill:"currentColor"})}):Xe("svg",{width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe("path",{d:"M6,0L0,6l2.4,0L6,2.4L9.6,6L12,6L6,0z",fill:"currentColor"})})}),aq=({cells:e,size:t,axis:n,title:r,showAxisLabels:a=!1,showSteps:c=!0,showArrowHeads:d=!0,onCellPointerOver:l,onCellPointerLeave:x,renderXAxisLabel:b,renderYAxisLabel:E})=>{const A=mt.useMemo(()=>[`y ${new Array(t+1).fill(".").join(" ")}`,...new Array(t).fill(`y ${new Array(t).fill("c").join(" ")} .`),`. ${new Array(t+1).fill("x").join(" ")}`],[t]),L=iq(A,{x:c?n.x.steps.map(N=>({label:N.label||N.value.toFixed(1),className:ho.xStepsCell})):n.x.steps.map(N=>({label:"",className:ho.xStepsCellNoLabel})),y:c?o5(n.y.steps).map(N=>({label:N.label||N.value.toFixed(1),className:ho.yStepsCell})):o5(n.y.steps).map(N=>({label:"",className:ho.yStepsCellNoLabel})),c:e.map((N,Z)=>({label:Xe("span",{children:N.label}),className:Ci(ho.cell,ho.colorCell),style:{backgroundColor:N.color},...l&&{onPointerOver:R=>l(R,N,Z)},...x&&{onPointerLeave:R=>x(R,N,Z)}}))}),F=()=>b?b(n.x,ho.axisLabelX):Xe("div",{className:ho.axisLabelX,children:n.x.label}),$=()=>E?E(n.y,ho.axisLabelY):Xe("div",{className:ho.axisLabelY,children:n.y.label});return mn("div",{children:[r&&Xe("div",{className:ho.legendTitle,children:r}),mn("div",{className:ho.grid,style:{gridTemplateColumns:`repeat(${t+2}, auto)`,gridTemplateRows:`repeat(${t+2}, auto)`},children:[a&&n.x.label?F():null,a&&n.y.label?$():null,Xe("div",{className:ho.arrowX,children:d&&Xe(a5,{type:"horizontal",className:ho.arrowHeadX})}),Xe("div",{className:ho.arrowY,children:d&&Xe(a5,{type:"vertical",className:Ci({[ho.arrowHeadY]:!0,[ho.arrowHeadY_angle0]:!a})})}),L.map(N=>Xe("div",{style:Object.assign(oq(N._position.x,N._position.y),N.style),className:Ci(N.className,ho.cell),onPointerOver:N.onPointerOver,onPointerLeave:N.onPointerLeave,children:N.label},`${N._position.x}|${N._position.y}`))]})]})};var xL={exports:{}},Ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=Symbol.for("react.element"),qk=Symbol.for("react.portal"),Wx=Symbol.for("react.fragment"),Zx=Symbol.for("react.strict_mode"),Kx=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),sq=Symbol.for("react.server_context"),Jx=Symbol.for("react.forward_ref"),Qx=Symbol.for("react.suspense"),eb=Symbol.for("react.suspense_list"),tb=Symbol.for("react.memo"),nb=Symbol.for("react.lazy"),lq=Symbol.for("react.offscreen"),bL;bL=Symbol.for("react.module.reference");function Ls(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Vk:switch(e=e.type,e){case Wx:case Kx:case Zx:case Qx:case eb:return e;default:switch(e=e&&e.$$typeof,e){case sq:case Yx:case Jx:case nb:case tb:case Xx:return e;default:return t}}case qk:return t}}}Ar.ContextConsumer=Yx;Ar.ContextProvider=Xx;Ar.Element=Vk;Ar.ForwardRef=Jx;Ar.Fragment=Wx;Ar.Lazy=nb;Ar.Memo=tb;Ar.Portal=qk;Ar.Profiler=Kx;Ar.StrictMode=Zx;Ar.Suspense=Qx;Ar.SuspenseList=eb;Ar.isAsyncMode=function(){return!1};Ar.isConcurrentMode=function(){return!1};Ar.isContextConsumer=function(e){return Ls(e)===Yx};Ar.isContextProvider=function(e){return Ls(e)===Xx};Ar.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vk};Ar.isForwardRef=function(e){return Ls(e)===Jx};Ar.isFragment=function(e){return Ls(e)===Wx};Ar.isLazy=function(e){return Ls(e)===nb};Ar.isMemo=function(e){return Ls(e)===tb};Ar.isPortal=function(e){return Ls(e)===qk};Ar.isProfiler=function(e){return Ls(e)===Kx};Ar.isStrictMode=function(e){return Ls(e)===Zx};Ar.isSuspense=function(e){return Ls(e)===Qx};Ar.isSuspenseList=function(e){return Ls(e)===eb};Ar.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wx||e===Kx||e===Zx||e===Qx||e===eb||e===lq||typeof e=="object"&&e!==null&&(e.$$typeof===nb||e.$$typeof===tb||e.$$typeof===Xx||e.$$typeof===Yx||e.$$typeof===Jx||e.$$typeof===bL||e.getModuleId!==void 0)};Ar.typeOf=Ls;xL.exports=Ar;var uq=xL.exports;const cq=ic(uq);function V1(e,t){return V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},V1(e,t)}function Is(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,V1(e,t)}function Io(){return Io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Io.apply(this,arguments)}function wv(e){return e.charAt(0)==="/"}function f2(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}function hq(e,t){t===void 0&&(t="");var n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&wv(e),c=t&&wv(t),d=a||c;if(e&&wv(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var l;if(r.length){var x=r[r.length-1];l=x==="."||x===".."||x===""}else l=!1;for(var b=0,E=r.length;E>=0;E--){var A=r[E];A==="."?f2(r,E):A===".."?(f2(r,E),b++):b&&(f2(r,E),b--)}if(!d)for(;b--;b)r.unshift("..");d&&r[0]!==""&&(!r[0]||!wv(r[0]))&&r.unshift("");var L=r.join("/");return l&&L.substr(-1)!=="/"&&(L+="/"),L}var fq=!0,d2="Invariant failed";function od(e,t){if(!e){if(fq)throw new Error(d2);var n=typeof t=="function"?t():t,r=n?d2+": "+n:d2;throw new Error(r)}}function yy(e){return e.charAt(0)==="/"?e:"/"+e}function s5(e){return e.charAt(0)==="/"?e.substr(1):e}function dq(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function wL(e,t){return dq(e,t)?e.substr(t.length):e}function SL(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function pq(e){var t=e||"/",n="",r="",a=t.indexOf("#");a!==-1&&(r=t.substr(a),t=t.substr(0,a));var c=t.indexOf("?");return c!==-1&&(n=t.substr(c),t=t.substr(0,c)),{pathname:t,search:n==="?"?"":n,hash:r==="#"?"":r}}function ka(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function Ka(e,t,n,r){var a;typeof e=="string"?(a=pq(e),a.state=t):(a=Io({},e),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",t!==void 0&&a.state===void 0&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(c){throw c instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):c}return n&&(a.key=n),r?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=hq(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function Gk(){var e=null;function t(d){return e=d,function(){e===d&&(e=null)}}function n(d,l,x,b){if(e!=null){var E=typeof e=="function"?e(d,l):e;typeof E=="string"?typeof x=="function"?x(E,b):b(!0):b(E!==!1)}else b(!0)}var r=[];function a(d){var l=!0;function x(){l&&d.apply(void 0,arguments)}return r.push(x),function(){l=!1,r=r.filter(function(b){return b!==x})}}function c(){for(var d=arguments.length,l=new Array(d),x=0;x<d;x++)l[x]=arguments[x];r.forEach(function(b){return b.apply(void 0,l)})}return{setPrompt:t,confirmTransitionTo:n,appendListener:a,notifyListeners:c}}var CL=!!(typeof window<"u"&&window.document&&window.document.createElement);function EL(e,t){t(window.confirm(e))}function mq(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function gq(){return window.navigator.userAgent.indexOf("Trident")===-1}function yq(){return window.navigator.userAgent.indexOf("Firefox")===-1}function _q(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var l5="popstate",u5="hashchange";function c5(){try{return window.history.state||{}}catch{return{}}}function kL(e){e===void 0&&(e={}),CL||od(!1);var t=window.history,n=mq(),r=!gq(),a=e,c=a.forceRefresh,d=c===void 0?!1:c,l=a.getUserConfirmation,x=l===void 0?EL:l,b=a.keyLength,E=b===void 0?6:b,A=e.basename?SL(yy(e.basename)):"";function L(_e){var we=_e||{},K=we.key,ae=we.state,lt=window.location,gt=lt.pathname,Gt=lt.search,Dt=lt.hash,Qt=gt+Gt+Dt;return A&&(Qt=wL(Qt,A)),Ka(Qt,ae,K)}function F(){return Math.random().toString(36).substr(2,E)}var $=Gk();function N(_e){Io(Ve,_e),Ve.length=t.length,$.notifyListeners(Ve.location,Ve.action)}function Z(_e){_q(_e)||G(L(_e.state))}function R(){G(L(c5()))}var q=!1;function G(_e){if(q)q=!1,N();else{var we="POP";$.confirmTransitionTo(_e,we,x,function(K){K?N({action:we,location:_e}):Q(_e)})}}function Q(_e){var we=Ve.location,K=ee.indexOf(we.key);K===-1&&(K=0);var ae=ee.indexOf(_e.key);ae===-1&&(ae=0);var lt=K-ae;lt&&(q=!0,Le(lt))}var se=L(c5()),ee=[se.key];function oe(_e){return A+ka(_e)}function xe(_e,we){var K="PUSH",ae=Ka(_e,we,F(),Ve.location);$.confirmTransitionTo(ae,K,x,function(lt){if(lt){var gt=oe(ae),Gt=ae.key,Dt=ae.state;if(n)if(t.pushState({key:Gt,state:Dt},null,gt),d)window.location.href=gt;else{var Qt=ee.indexOf(Ve.location.key),un=ee.slice(0,Qt+1);un.push(ae.key),ee=un,N({action:K,location:ae})}else window.location.href=gt}})}function Oe(_e,we){var K="REPLACE",ae=Ka(_e,we,F(),Ve.location);$.confirmTransitionTo(ae,K,x,function(lt){if(lt){var gt=oe(ae),Gt=ae.key,Dt=ae.state;if(n)if(t.replaceState({key:Gt,state:Dt},null,gt),d)window.location.replace(gt);else{var Qt=ee.indexOf(Ve.location.key);Qt!==-1&&(ee[Qt]=ae.key),N({action:K,location:ae})}else window.location.replace(gt)}})}function Le(_e){t.go(_e)}function qe(){Le(-1)}function $e(){Le(1)}var nt=0;function pt(_e){nt+=_e,nt===1&&_e===1?(window.addEventListener(l5,Z),r&&window.addEventListener(u5,R)):nt===0&&(window.removeEventListener(l5,Z),r&&window.removeEventListener(u5,R))}var At=!1;function zt(_e){_e===void 0&&(_e=!1);var we=$.setPrompt(_e);return At||(pt(1),At=!0),function(){return At&&(At=!1,pt(-1)),we()}}function Vt(_e){var we=$.appendListener(_e);return pt(1),function(){pt(-1),we()}}var Ve={length:t.length,action:"POP",location:se,createHref:oe,push:xe,replace:Oe,go:Le,goBack:qe,goForward:$e,block:zt,listen:Vt};return Ve}var h5="hashchange",vq={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+s5(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:s5,decodePath:yy},slash:{encodePath:yy,decodePath:yy}};function AL(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function Ng(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function xq(e){window.location.hash=e}function p2(e){window.location.replace(AL(window.location.href)+"#"+e)}function bq(e){e===void 0&&(e={}),CL||od(!1);var t=window.history;yq();var n=e,r=n.getUserConfirmation,a=r===void 0?EL:r,c=n.hashType,d=c===void 0?"slash":c,l=e.basename?SL(yy(e.basename)):"",x=vq[d],b=x.encodePath,E=x.decodePath;function A(){var we=E(Ng());return l&&(we=wL(we,l)),Ka(we)}var L=Gk();function F(we){Io(_e,we),_e.length=t.length,L.notifyListeners(_e.location,_e.action)}var $=!1,N=null;function Z(we,K){return we.pathname===K.pathname&&we.search===K.search&&we.hash===K.hash}function R(){var we=Ng(),K=b(we);if(we!==K)p2(K);else{var ae=A(),lt=_e.location;if(!$&&Z(lt,ae)||N===ka(ae))return;N=null,q(ae)}}function q(we){if($)$=!1,F();else{var K="POP";L.confirmTransitionTo(we,K,a,function(ae){ae?F({action:K,location:we}):G(we)})}}function G(we){var K=_e.location,ae=oe.lastIndexOf(ka(K));ae===-1&&(ae=0);var lt=oe.lastIndexOf(ka(we));lt===-1&&(lt=0);var gt=ae-lt;gt&&($=!0,qe(gt))}var Q=Ng(),se=b(Q);Q!==se&&p2(se);var ee=A(),oe=[ka(ee)];function xe(we){var K=document.querySelector("base"),ae="";return K&&K.getAttribute("href")&&(ae=AL(window.location.href)),ae+"#"+b(l+ka(we))}function Oe(we,K){var ae="PUSH",lt=Ka(we,void 0,void 0,_e.location);L.confirmTransitionTo(lt,ae,a,function(gt){if(gt){var Gt=ka(lt),Dt=b(l+Gt),Qt=Ng()!==Dt;if(Qt){N=Gt,xq(Dt);var un=oe.lastIndexOf(ka(_e.location)),Xn=oe.slice(0,un+1);Xn.push(Gt),oe=Xn,F({action:ae,location:lt})}else F()}})}function Le(we,K){var ae="REPLACE",lt=Ka(we,void 0,void 0,_e.location);L.confirmTransitionTo(lt,ae,a,function(gt){if(gt){var Gt=ka(lt),Dt=b(l+Gt),Qt=Ng()!==Dt;Qt&&(N=Gt,p2(Dt));var un=oe.indexOf(ka(_e.location));un!==-1&&(oe[un]=Gt),F({action:ae,location:lt})}})}function qe(we){t.go(we)}function $e(){qe(-1)}function nt(){qe(1)}var pt=0;function At(we){pt+=we,pt===1&&we===1?window.addEventListener(h5,R):pt===0&&window.removeEventListener(h5,R)}var zt=!1;function Vt(we){we===void 0&&(we=!1);var K=L.setPrompt(we);return zt||(At(1),zt=!0),function(){return zt&&(zt=!1,At(-1)),K()}}function Ve(we){var K=L.appendListener(we);return At(1),function(){At(-1),K()}}var _e={length:t.length,action:"POP",location:ee,createHref:xe,push:Oe,replace:Le,go:qe,goBack:$e,goForward:nt,block:Vt,listen:Ve};return _e}function f5(e,t,n){return Math.min(Math.max(e,t),n)}function wq(e){e===void 0&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,a=r===void 0?["/"]:r,c=t.initialIndex,d=c===void 0?0:c,l=t.keyLength,x=l===void 0?6:l,b=Gk();function E(xe){Io(oe,xe),oe.length=oe.entries.length,b.notifyListeners(oe.location,oe.action)}function A(){return Math.random().toString(36).substr(2,x)}var L=f5(d,0,a.length-1),F=a.map(function(xe){return typeof xe=="string"?Ka(xe,void 0,A()):Ka(xe,void 0,xe.key||A())}),$=ka;function N(xe,Oe){var Le="PUSH",qe=Ka(xe,Oe,A(),oe.location);b.confirmTransitionTo(qe,Le,n,function($e){if($e){var nt=oe.index,pt=nt+1,At=oe.entries.slice(0);At.length>pt?At.splice(pt,At.length-pt,qe):At.push(qe),E({action:Le,location:qe,index:pt,entries:At})}})}function Z(xe,Oe){var Le="REPLACE",qe=Ka(xe,Oe,A(),oe.location);b.confirmTransitionTo(qe,Le,n,function($e){$e&&(oe.entries[oe.index]=qe,E({action:Le,location:qe}))})}function R(xe){var Oe=f5(oe.index+xe,0,oe.entries.length-1),Le="POP",qe=oe.entries[Oe];b.confirmTransitionTo(qe,Le,n,function($e){$e?E({action:Le,location:qe,index:Oe}):E()})}function q(){R(-1)}function G(){R(1)}function Q(xe){var Oe=oe.index+xe;return Oe>=0&&Oe<oe.entries.length}function se(xe){return xe===void 0&&(xe=!1),b.setPrompt(xe)}function ee(xe){return b.appendListener(xe)}var oe={length:F.length,action:"POP",location:F[L],index:L,entries:F,createHref:$,push:N,replace:Z,go:R,goBack:q,goForward:G,canGo:Q,block:se,listen:ee};return oe}var dm={exports:{}},Sq=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},q1=Sq;dm.exports=IL;dm.exports.parse=Hk;dm.exports.compile=Eq;dm.exports.tokensToFunction=TL;dm.exports.tokensToRegExp=PL;var Cq=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Hk(e,t){for(var n=[],r=0,a=0,c="",d=t&&t.delimiter||"/",l;(l=Cq.exec(e))!=null;){var x=l[0],b=l[1],E=l.index;if(c+=e.slice(a,E),a=E+x.length,b){c+=b[1];continue}var A=e[a],L=l[2],F=l[3],$=l[4],N=l[5],Z=l[6],R=l[7];c&&(n.push(c),c="");var q=L!=null&&A!=null&&A!==L,G=Z==="+"||Z==="*",Q=Z==="?"||Z==="*",se=l[2]||d,ee=$||N;n.push({name:F||r++,prefix:L||"",delimiter:se,optional:Q,repeat:G,partial:q,asterisk:!!R,pattern:ee?Tq(ee):R?".*":"[^"+e1(se)+"]+?"})}return a<e.length&&(c+=e.substr(a)),c&&n.push(c),n}function Eq(e,t){return TL(Hk(e,t),t)}function kq(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function Aq(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function TL(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",Zk(t)));return function(a,c){for(var d="",l=a||{},x=c||{},b=x.pretty?kq:encodeURIComponent,E=0;E<e.length;E++){var A=e[E];if(typeof A=="string"){d+=A;continue}var L=l[A.name],F;if(L==null)if(A.optional){A.partial&&(d+=A.prefix);continue}else throw new TypeError('Expected "'+A.name+'" to be defined');if(q1(L)){if(!A.repeat)throw new TypeError('Expected "'+A.name+'" to not repeat, but received `'+JSON.stringify(L)+"`");if(L.length===0){if(A.optional)continue;throw new TypeError('Expected "'+A.name+'" to not be empty')}for(var $=0;$<L.length;$++){if(F=b(L[$]),!n[E].test(F))throw new TypeError('Expected all "'+A.name+'" to match "'+A.pattern+'", but received `'+JSON.stringify(F)+"`");d+=($===0?A.prefix:A.delimiter)+F}continue}if(F=A.asterisk?Aq(L):b(L),!n[E].test(F))throw new TypeError('Expected "'+A.name+'" to match "'+A.pattern+'", but received "'+F+'"');d+=A.prefix+F}return d}}function e1(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Tq(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Wk(e,t){return e.keys=t,e}function Zk(e){return e&&e.sensitive?"":"i"}function Pq(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Wk(e,t)}function Iq(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(IL(e[a],t,n).source);var c=new RegExp("(?:"+r.join("|")+")",Zk(n));return Wk(c,t)}function Mq(e,t,n){return PL(Hk(e,n),t,n)}function PL(e,t,n){q1(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,a=n.end!==!1,c="",d=0;d<e.length;d++){var l=e[d];if(typeof l=="string")c+=e1(l);else{var x=e1(l.prefix),b="(?:"+l.pattern+")";t.push(l),l.repeat&&(b+="(?:"+x+b+")*"),l.optional?l.partial?b=x+"("+b+")?":b="(?:"+x+"("+b+"))?":b=x+"("+b+")",c+=b}}var E=e1(n.delimiter||"/"),A=c.slice(-E.length)===E;return r||(c=(A?c.slice(0,-E.length):c)+"(?:"+E+"(?=$))?"),a?c+="$":c+=r&&A?"":"(?="+E+"|$)",Wk(new RegExp("^"+c,Zk(n)),t)}function IL(e,t,n){return q1(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Pq(e,t):q1(e)?Iq(e,t,n):Mq(e,t,n)}var Lq=dm.exports;const Oq=ic(Lq);var Mr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=typeof Symbol=="function"&&Symbol.for,Kk=go?Symbol.for("react.element"):60103,Xk=go?Symbol.for("react.portal"):60106,rb=go?Symbol.for("react.fragment"):60107,ib=go?Symbol.for("react.strict_mode"):60108,ob=go?Symbol.for("react.profiler"):60114,ab=go?Symbol.for("react.provider"):60109,sb=go?Symbol.for("react.context"):60110,Yk=go?Symbol.for("react.async_mode"):60111,lb=go?Symbol.for("react.concurrent_mode"):60111,ub=go?Symbol.for("react.forward_ref"):60112,cb=go?Symbol.for("react.suspense"):60113,Fq=go?Symbol.for("react.suspense_list"):60120,hb=go?Symbol.for("react.memo"):60115,fb=go?Symbol.for("react.lazy"):60116,Rq=go?Symbol.for("react.block"):60121,Dq=go?Symbol.for("react.fundamental"):60117,zq=go?Symbol.for("react.responder"):60118,Bq=go?Symbol.for("react.scope"):60119;function ts(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Kk:switch(e=e.type,e){case Yk:case lb:case rb:case ob:case ib:case cb:return e;default:switch(e=e&&e.$$typeof,e){case sb:case ub:case fb:case hb:case ab:return e;default:return t}}case Xk:return t}}}function ML(e){return ts(e)===lb}Mr.AsyncMode=Yk;Mr.ConcurrentMode=lb;Mr.ContextConsumer=sb;Mr.ContextProvider=ab;Mr.Element=Kk;Mr.ForwardRef=ub;Mr.Fragment=rb;Mr.Lazy=fb;Mr.Memo=hb;Mr.Portal=Xk;Mr.Profiler=ob;Mr.StrictMode=ib;Mr.Suspense=cb;Mr.isAsyncMode=function(e){return ML(e)||ts(e)===Yk};Mr.isConcurrentMode=ML;Mr.isContextConsumer=function(e){return ts(e)===sb};Mr.isContextProvider=function(e){return ts(e)===ab};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kk};Mr.isForwardRef=function(e){return ts(e)===ub};Mr.isFragment=function(e){return ts(e)===rb};Mr.isLazy=function(e){return ts(e)===fb};Mr.isMemo=function(e){return ts(e)===hb};Mr.isPortal=function(e){return ts(e)===Xk};Mr.isProfiler=function(e){return ts(e)===ob};Mr.isStrictMode=function(e){return ts(e)===ib};Mr.isSuspense=function(e){return ts(e)===cb};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rb||e===lb||e===ob||e===ib||e===cb||e===Fq||typeof e=="object"&&e!==null&&(e.$$typeof===fb||e.$$typeof===hb||e.$$typeof===ab||e.$$typeof===sb||e.$$typeof===ub||e.$$typeof===Dq||e.$$typeof===zq||e.$$typeof===Bq||e.$$typeof===Rq)};Mr.typeOf=ts;function ad(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var LL={exports:{}},Tr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=typeof Symbol=="function"&&Symbol.for,Jk=yo?Symbol.for("react.element"):60103,Qk=yo?Symbol.for("react.portal"):60106,db=yo?Symbol.for("react.fragment"):60107,pb=yo?Symbol.for("react.strict_mode"):60108,mb=yo?Symbol.for("react.profiler"):60114,gb=yo?Symbol.for("react.provider"):60109,yb=yo?Symbol.for("react.context"):60110,e3=yo?Symbol.for("react.async_mode"):60111,_b=yo?Symbol.for("react.concurrent_mode"):60111,vb=yo?Symbol.for("react.forward_ref"):60112,xb=yo?Symbol.for("react.suspense"):60113,$q=yo?Symbol.for("react.suspense_list"):60120,bb=yo?Symbol.for("react.memo"):60115,wb=yo?Symbol.for("react.lazy"):60116,Nq=yo?Symbol.for("react.block"):60121,Uq=yo?Symbol.for("react.fundamental"):60117,jq=yo?Symbol.for("react.responder"):60118,Vq=yo?Symbol.for("react.scope"):60119;function ns(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Jk:switch(e=e.type,e){case e3:case _b:case db:case mb:case pb:case xb:return e;default:switch(e=e&&e.$$typeof,e){case yb:case vb:case wb:case bb:case gb:return e;default:return t}}case Qk:return t}}}function OL(e){return ns(e)===_b}Tr.AsyncMode=e3;Tr.ConcurrentMode=_b;Tr.ContextConsumer=yb;Tr.ContextProvider=gb;Tr.Element=Jk;Tr.ForwardRef=vb;Tr.Fragment=db;Tr.Lazy=wb;Tr.Memo=bb;Tr.Portal=Qk;Tr.Profiler=mb;Tr.StrictMode=pb;Tr.Suspense=xb;Tr.isAsyncMode=function(e){return OL(e)||ns(e)===e3};Tr.isConcurrentMode=OL;Tr.isContextConsumer=function(e){return ns(e)===yb};Tr.isContextProvider=function(e){return ns(e)===gb};Tr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jk};Tr.isForwardRef=function(e){return ns(e)===vb};Tr.isFragment=function(e){return ns(e)===db};Tr.isLazy=function(e){return ns(e)===wb};Tr.isMemo=function(e){return ns(e)===bb};Tr.isPortal=function(e){return ns(e)===Qk};Tr.isProfiler=function(e){return ns(e)===mb};Tr.isStrictMode=function(e){return ns(e)===pb};Tr.isSuspense=function(e){return ns(e)===xb};Tr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===db||e===_b||e===mb||e===pb||e===xb||e===$q||typeof e=="object"&&e!==null&&(e.$$typeof===wb||e.$$typeof===bb||e.$$typeof===gb||e.$$typeof===yb||e.$$typeof===vb||e.$$typeof===Uq||e.$$typeof===jq||e.$$typeof===Vq||e.$$typeof===Nq)};Tr.typeOf=ns;LL.exports=Tr;var qq=LL.exports,FL=qq,Gq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},RL={};RL[FL.ForwardRef]=Gq;RL[FL.Memo]=Hq;var m2=1073741823,d5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function Wq(){var e="__global_unique_id__";return d5[e]=(d5[e]||0)+1}function Zq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Kq(e){var t=[];return{on:function(r){t.push(r)},off:function(r){t=t.filter(function(a){return a!==r})},get:function(){return e},set:function(r,a){e=r,t.forEach(function(c){return c(e,a)})}}}function Xq(e){return Array.isArray(e)?e[0]:e}function Yq(e,t){var n,r,a="__create-react-context-"+Wq()+"__",c=function(l){Is(x,l);function x(){for(var E,A=arguments.length,L=new Array(A),F=0;F<A;F++)L[F]=arguments[F];return E=l.call.apply(l,[this].concat(L))||this,E.emitter=Kq(E.props.value),E}var b=x.prototype;return b.getChildContext=function(){var A;return A={},A[a]=this.emitter,A},b.componentWillReceiveProps=function(A){if(this.props.value!==A.value){var L=this.props.value,F=A.value,$;Zq(L,F)?$=0:($=typeof t=="function"?t(L,F):m2,$|=0,$!==0&&this.emitter.set(A.value,$))}},b.render=function(){return this.props.children},x}(sn.Component);c.childContextTypes=(n={},n[a]=En.object.isRequired,n);var d=function(l){Is(x,l);function x(){for(var E,A=arguments.length,L=new Array(A),F=0;F<A;F++)L[F]=arguments[F];return E=l.call.apply(l,[this].concat(L))||this,E.observedBits=void 0,E.state={value:E.getValue()},E.onUpdate=function($,N){var Z=E.observedBits|0;Z&N&&E.setState({value:E.getValue()})},E}var b=x.prototype;return b.componentWillReceiveProps=function(A){var L=A.observedBits;this.observedBits=L??m2},b.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var A=this.props.observedBits;this.observedBits=A??m2},b.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},b.getValue=function(){return this.context[a]?this.context[a].get():e},b.render=function(){return Xq(this.props.children)(this.state.value)},x}(sn.Component);return d.contextTypes=(r={},r[a]=En.object,r),{Provider:c,Consumer:d}}var Jq=sn.createContext||Yq,DL=function(t){var n=Jq();return n.displayName=t,n},Qq=DL("Router-History"),Jp=DL("Router"),Sb=function(e){Is(t,e),t.computeRootMatch=function(a){return{path:"/",url:"/",params:{},isExact:a==="/"}};function t(r){var a;return a=e.call(this,r)||this,a.state={location:r.history.location},a._isMounted=!1,a._pendingLocation=null,r.staticContext||(a.unlisten=r.history.listen(function(c){a._pendingLocation=c})),a}var n=t.prototype;return n.componentDidMount=function(){var a=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(c){a._isMounted&&a.setState({location:c})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return sn.createElement(Jp.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},sn.createElement(Qq.Provider,{children:this.props.children||null,value:this.props.history}))},t}(sn.Component);sn.Component;sn.Component;var p5={},eG=1e4,m5=0;function tG(e,t){var n=""+t.end+t.strict+t.sensitive,r=p5[n]||(p5[n]={});if(r[e])return r[e];var a=[],c=Oq(e,a,t),d={regexp:c,keys:a};return m5<eG&&(r[e]=d,m5++),d}function t3(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,c=a===void 0?!1:a,d=n.strict,l=d===void 0?!1:d,x=n.sensitive,b=x===void 0?!1:x,E=[].concat(r);return E.reduce(function(A,L){if(!L&&L!=="")return null;if(A)return A;var F=tG(L,{end:c,strict:l,sensitive:b}),$=F.regexp,N=F.keys,Z=$.exec(e);if(!Z)return null;var R=Z[0],q=Z.slice(1),G=e===R;return c&&!G?null:{path:L,url:L==="/"&&R===""?"/":R,isExact:G,params:N.reduce(function(Q,se,ee){return Q[se.name]=q[ee],Q},{})}},null)}function nG(e){return sn.Children.count(e)===0}sn.Component;function n3(e){return e.charAt(0)==="/"?e:"/"+e}function rG(e,t){return e?Io({},t,{pathname:n3(e)+t.pathname}):t}function iG(e,t){if(!e)return t;var n=n3(e);return t.pathname.indexOf(n)!==0?t:Io({},t,{pathname:t.pathname.substr(n.length)})}function g5(e){return typeof e=="string"?e:ka(e)}function g2(e){return function(){od(!1)}}function y5(){}sn.Component;sn.Component;sn.useContext;var zL=function(e){Is(t,e);function t(){for(var r,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=e.call.apply(e,[this].concat(c))||this,r.history=kL(r.props),r}var n=t.prototype;return n.render=function(){return sn.createElement(Sb,{history:this.history,children:this.props.children})},t}(sn.Component);sn.Component;var gC=function(t,n){return typeof t=="function"?t(n):t},yC=function(t,n){return typeof t=="string"?Ka(t,null,null,n):t},r3=function(t){return t},Qp=sn.forwardRef;typeof Qp>"u"&&(Qp=r3);function oG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var aG=Qp(function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,c=ad(e,["innerRef","navigate","onClick"]),d=c.target,l=Io({},c,{onClick:function(b){try{a&&a(b)}catch(E){throw b.preventDefault(),E}!b.defaultPrevented&&b.button===0&&(!d||d==="_self")&&!oG(b)&&(b.preventDefault(),r())}});return r3!==Qp?l.ref=t||n:l.ref=n,sn.createElement("a",l)}),sG=Qp(function(e,t){var n=e.component,r=n===void 0?aG:n,a=e.replace,c=e.to,d=e.innerRef,l=ad(e,["component","replace","to","innerRef"]);return sn.createElement(Jp.Consumer,null,function(x){x||od(!1);var b=x.history,E=yC(gC(c,x.location),x.location),A=E?b.createHref(E):"",L=Io({},l,{href:A,navigate:function(){var $=gC(c,x.location),N=ka(x.location)===ka(yC($)),Z=a||N?b.replace:b.push;Z($)}});return r3!==Qp?L.ref=t||d:L.innerRef=d,sn.createElement(r,L)})}),BL=function(t){return t},G1=sn.forwardRef;typeof G1>"u"&&(G1=BL);function lG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(r){return r}).join(" ")}G1(function(e,t){var n=e["aria-current"],r=n===void 0?"page":n,a=e.activeClassName,c=a===void 0?"active":a,d=e.activeStyle,l=e.className,x=e.exact,b=e.isActive,E=e.location,A=e.sensitive,L=e.strict,F=e.style,$=e.to,N=e.innerRef,Z=ad(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return sn.createElement(Jp.Consumer,null,function(R){R||od(!1);var q=E||R.location,G=yC(gC($,q),q),Q=G.pathname,se=Q&&Q.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),ee=se?t3(q.pathname,{path:se,exact:x,sensitive:A,strict:L}):null,oe=!!(b?b(ee,q):ee),xe=typeof l=="function"?l(oe):l,Oe=typeof F=="function"?F(oe):F;oe&&(xe=lG(xe,c),Oe=Io({},Oe,d));var Le=Io({"aria-current":oe&&r||null,className:xe,style:Oe,to:G},Z);return BL!==G1?Le.ref=t||N:Le.innerRef=N,sn.createElement(sG,Le)})});var i3=function(){};function $L(e){try{return e.apply(this,[].slice.call(arguments,1))}catch(t){return t=t instanceof Error?t:new Error(t),setTimeout(function(){throw t}),t}}function Jy(e){return typeof e=="string"}function H1(e){return typeof e=="object"&&e!==null}function Qy(e){return typeof e=="function"}function NL(e){return Qy(e)&&"types"in e}function UL(e){return Qy(e)&&"type"in e}function uG(e){return H1(e)&&Jy(e.type)&&"payload"in e}function cG(e,t,n){var r=e.get(t);r===void 0&&e.set(t,r=new Set),r.add(n)}function hG(e,t,n){var r=e.get(t);r!==void 0&&(r.delete(n),r.size===0&&e.delete(t))}function y2(e,t){e.includes(t)||e.push(t)}function Zu(e,t){return Object.assign(new Error("Reatom: "+e),{data:t})}function o3(e){return{atom:e,cause:"init",ctx:{},state:void 0,tracks:void 0}}function fG(e,t){var n=t===void 0?{}:t,r=n.patch,a=r===void 0?new Map:r,c=n.getCache,d=c===void 0?function(F,$){return $??o3(F)}:c,l=n.effects,x=l===void 0?[]:l,b=n.causes,E=b===void 0?[]:b;E=E.concat({actions:e,patch:a});var A=e.map(function(F){return F.type}).join(", "),L={actions:e,getCache:d,process:function(F,$){var N=a.get(F);if(N==null){$=d(F,$);var Z=(N=F(L,$)).cause,R=N.state,q=N.listeners;a.set(F,N),Object.is(R,$.state)?N.cause=$.cause:(q==null?void 0:q.size)>0&&L.schedule(function(G,Q){return q.forEach(function(se){return $L(se,R,Q)})},Z)}return N},schedule:function(F,$){$===void 0&&($=A);var N=E.concat([$]);x.push(function(Z){return F(function(R){return Z(R,N)},N)})}};return L}function _5(e,t){return t===void 0&&(t=a3),t.getState(e)}var dG=0;function b_(e,t,n){n===void 0&&(n={});var r=Jy(n)?{id:n}:n,a=r.decorators,c=a===void 0?[]:a,d=r.id,l=d===void 0?"atom"+ ++dG:d,x=r.store,b=x===void 0?a3:x,E=[],A=[],L={},F={};if(!Qy(t)||!Jy(l))throw Zu("Atom arguments");Object.entries(e).forEach(function(Z){var R=Z[0],q=Z[1];if(!Qy(q))throw Zu("Invalid atom dependencies (type "+typeof q+") at "+R,q);if(NL(q))q.types.forEach(function(se){return y2(A,se)});else{var G;if(UL(q))F[R]=G=q.type;else{var Q=function(){return{payload:q.apply(void 0,[].slice.call(arguments)),type:G,targets:[N]}};Q.type=G=R+"_"+l,Q.dispatch=function(){return b.dispatch(Q.apply(void 0,[].slice.call(arguments)))},L[R]=Q,R[0]!="_"&&(N[R]=Q)}y2(E,G),y2(A,G)}});var $=c.reduce(function(Z,R){return R(Z)},function(Z,R,q,G,Q){var se=function(ee){return G[ee].apply(G,[].slice.call(arguments,1))};return function(ee,oe){var xe,Oe=ee.actions,Le=ee.process,qe=ee.schedule,$e=oe.atom,nt=oe.ctx,pt=oe.state,At=oe.listeners,zt=[],Vt=i3,Ve=function(K,ae){Vt();var lt=Le(K,ae);return xe==null&&zt.every(function(gt){return gt.atom.id!=K.id})&&zt.push(lt),lt},_e={create:se,get:function(K){return Ve(R[K]).state},getUnlistedState:function(K){return Vt(),Le(K).state},onAction:function(K,ae){var lt,gt;if(Vt(),xe!=null)throw Zu("Can not react to action inside another reaction");var Gt=(lt=Q[K])!=null?lt:(gt=G[K])==null?void 0:gt.type;if(Gt==null)throw Zu("Unknown action",{name:K});Oe.forEach(function(Dt){Gt==Dt.type&&(xe=K,K!=Gt&&(xe+=" ("+Gt+")"),xe+=" handler",ae(Dt.payload),xe=void 0)})},onChange:function(K,ae){var lt;if(Vt(),xe!=null)throw Zu("Can not react to atom changes inside another reaction");var gt=R[K],Gt=(lt=oe.tracks)==null?void 0:lt.find(function(Qt){return Qt.atom.id==gt.id}),Dt=Ve(gt,Gt);Gt!=null&&Object.is(Gt.state,Dt.state)||(xe=K,K!=$e.id&&(xe+=" ("+$e.id+")"),xe+=" handler",ae(Dt.state,Gt==null?void 0:Gt.state),xe=void 0)},onInit:function(K){oe.tracks==null&&K()},schedule:function(K){Vt(),qe(function(ae,lt){return K(ae,nt,lt)},xe)}},we="init";return(oe.tracks==null||Oe.some(function(K){var ae=K.type;return q.includes(ae)&&(we=ae+" action",!0)})||oe.tracks.some(function(K){return!Object.is(K.state,Ve(K.atom,K).state)&&(we=K.atom.id+" atom",!0)}))&&(zt.length=0,pt=Z(_e,pt)),Vt=function(){throw Zu("Outdated track call")},{atom:$e,cause:we,ctx:nt,state:pt,tracks:zt,listeners:At}}}(t,e,E,L,F));function N(Z,R){return R===void 0&&(R=o3(N)),$(Z,R)}return N.id=l,N.getState=function(){return b.getState(N)},N.subscribe=function(Z){return b.subscribe(N,Z)},N.types=A,N}var pG=Symbol();function jL(e){var t=e===void 0?{}:e,n=t.callSafety,r=n===void 0?$L:n,a=t.createTemplateCache,c=a===void 0?o3:a,d=t.onError,l=t.onPatch,x=t.now,b=x===void 0?Date.now.bind(Date):x,E=new Map,A=new WeakMap,L=[],F=[];function $(R){if(!NL(R))throw Zu("passed thing is not an atom");(function(q,G){var Q,se=G(q);if(se.tracks===void 0)return!1;if(((Q=se.listeners)==null?void 0:Q.size)>0)return!0;for(var ee=[se.tracks];ee.length>0;)for(var oe=ee.pop(),xe=0;xe<oe.length;xe++){var Oe=oe[xe];if(Oe!=G(Oe.atom))return!1;ee.push(Oe.tracks)}return!0})(R,Z.getCache)||Z.dispatch({type:"invalidate "+R.id+" [~"+Math.random()+"]",payload:null,targets:[R]})}d&&L.push(d),l&&F.push(l);var N=function(R,q){var G,Q;return(G=(Q=A.get(R))!=null?Q:q)!=null?G:c(R)},Z={dispatch:function R(q,G){var Q=b(),se=Array.isArray(q)?q:[q];if(se.length==0||!se.every(uG))throw Zu("dispatch arguments");var ee=new Map,oe=[],xe=fG(se,{patch:ee,getCache:N,effects:oe,causes:G}),Oe=function(){return{actions:se,patch:ee,causes:G??[],start:Q,end:b()}};try{se.forEach(function($e){var nt,pt=$e.type,At=$e.targets;At==null||At.forEach(function(zt){return xe.process(zt)}),(nt=E.get(pt))==null||nt.forEach(function(zt){return xe.process(zt)})}),ee.forEach(function($e,nt){return A.set(nt,$e)})}catch($e){var Le=Oe();throw L.forEach(function(nt){return nt($e,Le)}),$e}var qe=Oe();F.forEach(function($e){return $e(qe)}),oe.forEach(function($e){return r($e,R)})},getCache:N,getState:function(R){return $(R),N(R).state},onError:function(R){return L.push(R),function(){return L=L.filter(function(q){return q!==R})}},onPatch:function(R){return F.push(R),function(){return F=F.filter(function(q){return q!==R})}},subscribe:function(R,q){var G;if(!Qy(q))throw Zu("subscribe callback is not a function");$(R);var Q=N(R),se=(G=Q.listeners)!=null?G:Q.listeners=new Set;se.size==0&&R.types.forEach(function(xe){return cG(E,xe,R)});var ee=pG,oe=function(xe,Oe){var Le=A.get(R);Object.is(ee,Le.state)||q(ee=xe,Oe)};return se.add(oe),r(q,Q.state,[]),function(){se.delete(oe),se.size==0&&R.types.forEach(function(xe){return hG(E,xe,R)})}}};return Z}var a3=jL(),VL=sn.createContext(a3),mG=function(e){return e()};function qL(e,t){return function(){var n=t.apply(void 0,[].slice.call(arguments));n&&mG(function(){e.dispatch(n)})}}function _C(e,t){t===void 0&&(t=[]);var n=sn.useContext(VL);return sn.useCallback(qL(n,e),t.concat(n))}function v5(e,t,n){var r=e;typeof t=="function"?(n!=null||(n=[]),e=sn.useMemo(function(){return b_({origin:r},function(E){return t((0,E.get)("origin"))})},n.concat(r))):n=t??[];var a=sn.useContext(VL);n=n.concat([e,a]);var c=sn.useState(function(){return _5(e,a)}),d=c[0],l=c[1],x=sn.useRef(d);x.current=d=_5(e,a);var b=sn.useMemo(function(){return Object.entries(r).reduce(function(E,A){var L=A[0],F=A[1];return UL(F)&&(E[L]=qL(a,F)),E},{})},n);return sn.useEffect(function(){return a.subscribe(e,function(E){return Object.is(E,x.current)||l(x.current=E)})},n),sn.useDebugValue(d),[d,b]}const x5=["http","https","mailto","tel"];function gG(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let a=-1;for(;++a<x5.length;){const c=x5[a];if(r===c.length&&t.slice(0,c.length).toLowerCase()===c)return t}return a=t.indexOf("?"),a!==-1&&r>a||(a=t.indexOf("#"),a!==-1&&r>a)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var yG=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const GL=ic(yG);function _y(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?b5(e.position):"start"in e||"end"in e?b5(e):"line"in e||"column"in e?vC(e):""}function vC(e){return w5(e&&e.line)+":"+w5(e&&e.column)}function b5(e){return vC(e&&e.start)+"-"+vC(e&&e.end)}function w5(e){return e&&typeof e=="number"?e:1}class Os extends Error{constructor(t,n,r){const a=[null,null];let c={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const d=r.indexOf(":");d===-1?a[1]=r:(a[0]=r.slice(0,d),a[1]=r.slice(d+1))}n&&("type"in n||"position"in n?n.position&&(c=n.position):"start"in n||"end"in n?c=n:("line"in n||"column"in n)&&(c.start=n)),this.name=_y(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=c.start.line,this.column=c.start.column,this.source=a[0],this.ruleId=a[1],this.position=c,this.actual,this.expected,this.file,this.url,this.note}}Os.prototype.file="";Os.prototype.name="";Os.prototype.reason="";Os.prototype.message="";Os.prototype.stack="";Os.prototype.fatal=null;Os.prototype.column=null;Os.prototype.line=null;Os.prototype.source=null;Os.prototype.ruleId=null;Os.prototype.position=null;const Jl={basename:_G,dirname:vG,extname:xG,join:bG,sep:"/"};function _G(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');w_(e);let n=0,r=-1,a=e.length,c;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else r<0&&(c=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let d=-1,l=t.length-1;for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else d<0&&(c=!0,d=a+1),l>-1&&(e.charCodeAt(a)===t.charCodeAt(l--)?l<0&&(r=a):(l=-1,r=d));return n===r?r=d:r<0&&(r=e.length),e.slice(n,r)}function vG(e){if(w_(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function xG(e){w_(e);let t=e.length,n=-1,r=0,a=-1,c=0,d;for(;t--;){const l=e.charCodeAt(t);if(l===47){if(d){r=t+1;break}continue}n<0&&(d=!0,n=t+1),l===46?a<0?a=t:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||n<0||c===0||c===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function bG(...e){let t=-1,n;for(;++t<e.length;)w_(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":wG(n)}function wG(e){w_(e);const t=e.charCodeAt(0)===47;let n=SG(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function SG(e,t){let n="",r=0,a=-1,c=0,d=-1,l,x;for(;++d<=e.length;){if(d<e.length)l=e.charCodeAt(d);else{if(l===47)break;l=47}if(l===47){if(!(a===d-1||c===1))if(a!==d-1&&c===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(x=n.lastIndexOf("/"),x!==n.length-1){x<0?(n="",r=0):(n=n.slice(0,x),r=n.length-1-n.lastIndexOf("/")),a=d,c=0;continue}}else if(n.length>0){n="",r=0,a=d,c=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,d):n=e.slice(a+1,d),r=d-a-1;a=d,c=0}else l===46&&c>-1?c++:c=-1}return n}function w_(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const CG={cwd:EG};function EG(){return"/"}function xC(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function kG(e){if(typeof e=="string")e=new URL(e);else if(!xC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return AG(e)}function AG(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const _2=["history","path","basename","stem","extname","dirname"];class HL{constructor(t){let n;t?typeof t=="string"||GL(t)?n={value:t}:xC(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=CG.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<_2.length;){const c=_2[r];c in n&&n[c]!==void 0&&(this[c]=c==="history"?[...n[c]]:n[c])}let a;for(a in n)_2.includes(a)||(this[a]=n[a])}get path(){return this.history[this.history.length-1]}set path(t){xC(t)&&(t=kG(t)),x2(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Jl.dirname(this.path):void 0}set dirname(t){S5(this.basename,"dirname"),this.path=Jl.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Jl.basename(this.path):void 0}set basename(t){x2(t,"basename"),v2(t,"basename"),this.path=Jl.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Jl.extname(this.path):void 0}set extname(t){if(v2(t,"extname"),S5(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Jl.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Jl.basename(this.path,this.extname):void 0}set stem(t){x2(t,"stem"),v2(t,"stem"),this.path=Jl.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const a=new Os(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=null,a}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}}function v2(e,t){if(e&&e.includes(Jl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Jl.sep+"`")}function x2(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function S5(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function C5(e){if(e)throw e}var t1=Object.prototype.hasOwnProperty,WL=Object.prototype.toString,E5=Object.defineProperty,k5=Object.getOwnPropertyDescriptor,A5=function(t){return typeof Array.isArray=="function"?Array.isArray(t):WL.call(t)==="[object Array]"},T5=function(t){if(!t||WL.call(t)!=="[object Object]")return!1;var n=t1.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&t1.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||t1.call(t,a)},P5=function(t,n){E5&&n.name==="__proto__"?E5(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},I5=function(t,n){if(n==="__proto__")if(t1.call(t,n)){if(k5)return k5(t,n).value}else return;return t[n]},TG=function e(){var t,n,r,a,c,d,l=arguments[0],x=1,b=arguments.length,E=!1;for(typeof l=="boolean"&&(E=l,l=arguments[1]||{},x=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});x<b;++x)if(t=arguments[x],t!=null)for(n in t)r=I5(l,n),a=I5(t,n),l!==a&&(E&&a&&(T5(a)||(c=A5(a)))?(c?(c=!1,d=r&&A5(r)?r:[]):d=r&&T5(r)?r:{},P5(l,{name:n,newValue:e(E,d,a)})):typeof a<"u"&&P5(l,{name:n,newValue:a}));return l};const M5=ic(TG);function bC(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function PG(){const e=[],t={run:n,use:r};return t;function n(...a){let c=-1;const d=a.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);l(null,...a);function l(x,...b){const E=e[++c];let A=-1;if(x){d(x);return}for(;++A<a.length;)(b[A]===null||b[A]===void 0)&&(b[A]=a[A]);a=b,E?IG(E,l)(...b):d(null,...b)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function IG(e,t){let n;return r;function r(...d){const l=e.length>d.length;let x;l&&d.push(a);try{x=e.apply(this,d)}catch(b){const E=b;if(l&&n)throw E;return a(E)}l||(x instanceof Promise?x.then(c,a):x instanceof Error?a(x):c(x))}function a(d,...l){n||(n=!0,t(d,...l))}function c(d){a(null,d)}}const MG=KL().freeze(),ZL={}.hasOwnProperty;function KL(){const e=PG(),t=[];let n={},r,a=-1;return c.data=d,c.Parser=void 0,c.Compiler=void 0,c.freeze=l,c.attachers=t,c.use=x,c.parse=b,c.stringify=E,c.run=A,c.runSync=L,c.process=F,c.processSync=$,c;function c(){const N=KL();let Z=-1;for(;++Z<t.length;)N.use(...t[Z]);return N.data(M5(!0,{},n)),N}function d(N,Z){return typeof N=="string"?arguments.length===2?(S2("data",r),n[N]=Z,c):ZL.call(n,N)&&n[N]||null:N?(S2("data",r),n=N,c):n}function l(){if(r)return c;for(;++a<t.length;){const[N,...Z]=t[a];if(Z[0]===!1)continue;Z[0]===!0&&(Z[0]=void 0);const R=N.call(c,...Z);typeof R=="function"&&e.use(R)}return r=!0,a=Number.POSITIVE_INFINITY,c}function x(N,...Z){let R;if(S2("use",r),N!=null)if(typeof N=="function")se(N,...Z);else if(typeof N=="object")Array.isArray(N)?Q(N):G(N);else throw new TypeError("Expected usable value, not `"+N+"`");return R&&(n.settings=Object.assign(n.settings||{},R)),c;function q(ee){if(typeof ee=="function")se(ee);else if(typeof ee=="object")if(Array.isArray(ee)){const[oe,...xe]=ee;se(oe,...xe)}else G(ee);else throw new TypeError("Expected usable value, not `"+ee+"`")}function G(ee){Q(ee.plugins),ee.settings&&(R=Object.assign(R||{},ee.settings))}function Q(ee){let oe=-1;if(ee!=null)if(Array.isArray(ee))for(;++oe<ee.length;){const xe=ee[oe];q(xe)}else throw new TypeError("Expected a list of plugins, not `"+ee+"`")}function se(ee,oe){let xe=-1,Oe;for(;++xe<t.length;)if(t[xe][0]===ee){Oe=t[xe];break}Oe?(bC(Oe[1])&&bC(oe)&&(oe=M5(!0,Oe[1],oe)),Oe[1]=oe):t.push([...arguments])}}function b(N){c.freeze();const Z=Ug(N),R=c.Parser;return b2("parse",R),L5(R,"parse")?new R(String(Z),Z).parse():R(String(Z),Z)}function E(N,Z){c.freeze();const R=Ug(Z),q=c.Compiler;return w2("stringify",q),O5(N),L5(q,"compile")?new q(N,R).compile():q(N,R)}function A(N,Z,R){if(O5(N),c.freeze(),!R&&typeof Z=="function"&&(R=Z,Z=void 0),!R)return new Promise(q);q(null,R);function q(G,Q){e.run(N,Ug(Z),se);function se(ee,oe,xe){oe=oe||N,ee?Q(ee):G?G(oe):R(null,oe,xe)}}}function L(N,Z){let R,q;return c.run(N,Z,G),F5("runSync","run",q),R;function G(Q,se){C5(Q),R=se,q=!0}}function F(N,Z){if(c.freeze(),b2("process",c.Parser),w2("process",c.Compiler),!Z)return new Promise(R);R(null,Z);function R(q,G){const Q=Ug(N);c.run(c.parse(Q),Q,(ee,oe,xe)=>{if(ee||!oe||!xe)se(ee);else{const Oe=c.stringify(oe,xe);Oe==null||(FG(Oe)?xe.value=Oe:xe.result=Oe),se(ee,xe)}});function se(ee,oe){ee||!oe?G(ee):q?q(oe):Z(null,oe)}}}function $(N){let Z;c.freeze(),b2("processSync",c.Parser),w2("processSync",c.Compiler);const R=Ug(N);return c.process(R,q),F5("processSync","process",Z),R;function q(G){Z=!0,C5(G)}}}function L5(e,t){return typeof e=="function"&&e.prototype&&(LG(e.prototype)||t in e.prototype)}function LG(e){let t;for(t in e)if(ZL.call(e,t))return!0;return!1}function b2(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function w2(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function S2(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function O5(e){if(!bC(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function F5(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ug(e){return OG(e)?e:new HL(e)}function OG(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function FG(e){return typeof e=="string"||GL(e)}function RG(e,t){var{includeImageAlt:n=!0}=t||{};return XL(e,n)}function XL(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&R5(e.children,t)||Array.isArray(e)&&R5(e,t))||""}function R5(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=XL(e[r],t);return n.join("")}function au(e,t,n,r){const a=e.length;let c=0,d;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)d=Array.from(r),d.unshift(t,n),[].splice.apply(e,d);else for(n&&[].splice.apply(e,[t,n]);c<r.length;)d=r.slice(c,c+1e4),d.unshift(t,0),[].splice.apply(e,d),c+=1e4,t+=1e4}function ws(e,t){return e.length>0?(au(e,e.length,0,t),e):t}const D5={}.hasOwnProperty;function DG(e){const t={};let n=-1;for(;++n<e.length;)zG(t,e[n]);return t}function zG(e,t){let n;for(n in t){const a=(D5.call(e,n)?e[n]:void 0)||(e[n]={}),c=t[n];let d;for(d in c){D5.call(a,d)||(a[d]=[]);const l=c[d];BG(a[d],Array.isArray(l)?l:l?[l]:[])}}}function BG(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);au(e,0,0,r)}const $G=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,eu=$h(/[A-Za-z]/),wC=$h(/\d/),NG=$h(/[\dA-Fa-f]/),Xa=$h(/[\dA-Za-z]/),UG=$h(/[!-/:-@[-`{-~]/),z5=$h(/[#-'*+\--9=?A-Z^-~]/);function SC(e){return e!==null&&(e<32||e===127)}function ks(e){return e!==null&&(e<0||e===32)}function An(e){return e!==null&&e<-2}function Vi(e){return e===-2||e===-1||e===32}const jG=$h(/\s/),VG=$h($G);function $h(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Rr(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let c=0;return d;function d(x){return Vi(x)?(e.enter(n),l(x)):t(x)}function l(x){return Vi(x)&&c++<a?(e.consume(x),l):(e.exit(n),t(x))}}const qG={tokenize:GG};function GG(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Rr(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),c(l)}function c(l){const x=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=x),n=x,d(l)}function d(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return An(l)?(e.consume(l),e.exit("chunkText"),c):(e.consume(l),d)}}const HG={tokenize:WG},B5={tokenize:ZG};function WG(e){const t=this,n=[];let r=0,a,c,d;return l;function l(G){if(r<n.length){const Q=n[r];return t.containerState=Q[1],e.attempt(Q[0].continuation,x,b)(G)}return b(G)}function x(G){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&q();const Q=t.events.length;let se=Q,ee;for(;se--;)if(t.events[se][0]==="exit"&&t.events[se][1].type==="chunkFlow"){ee=t.events[se][1].end;break}R(r);let oe=Q;for(;oe<t.events.length;)t.events[oe][1].end=Object.assign({},ee),oe++;return au(t.events,se+1,0,t.events.slice(Q)),t.events.length=oe,b(G)}return l(G)}function b(G){if(r===n.length){if(!a)return L(G);if(a.currentConstruct&&a.currentConstruct.concrete)return $(G);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(B5,E,A)(G)}function E(G){return a&&q(),R(r),L(G)}function A(G){return t.parser.lazy[t.now().line]=r!==n.length,d=t.now().offset,$(G)}function L(G){return t.containerState={},e.attempt(B5,F,$)(G)}function F(G){return r++,n.push([t.currentConstruct,t.containerState]),L(G)}function $(G){if(G===null){a&&q(),R(0),e.consume(G);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),N(G)}function N(G){if(G===null){Z(e.exit("chunkFlow"),!0),R(0),e.consume(G);return}return An(G)?(e.consume(G),Z(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(G),N)}function Z(G,Q){const se=t.sliceStream(G);if(Q&&se.push(null),G.previous=c,c&&(c.next=G),c=G,a.defineSkip(G.start),a.write(se),t.parser.lazy[G.start.line]){let ee=a.events.length;for(;ee--;)if(a.events[ee][1].start.offset<d&&(!a.events[ee][1].end||a.events[ee][1].end.offset>d))return;const oe=t.events.length;let xe=oe,Oe,Le;for(;xe--;)if(t.events[xe][0]==="exit"&&t.events[xe][1].type==="chunkFlow"){if(Oe){Le=t.events[xe][1].end;break}Oe=!0}for(R(r),ee=oe;ee<t.events.length;)t.events[ee][1].end=Object.assign({},Le),ee++;au(t.events,xe+1,0,t.events.slice(oe)),t.events.length=ee}}function R(G){let Q=n.length;for(;Q-- >G;){const se=n[Q];t.containerState=se[1],se[0].exit.call(t,e)}n.length=G}function q(){a.write([null]),c=void 0,a=void 0,t.containerState._closeFlow=void 0}}function ZG(e,t,n){return Rr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $5(e){if(e===null||ks(e)||jG(e))return 1;if(VG(e))return 2}function s3(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const c=e[a].resolveAll;c&&!r.includes(c)&&(t=c(t,n),r.push(c))}return t}const CC={name:"attention",tokenize:XG,resolveAll:KG};function KG(e,t){let n=-1,r,a,c,d,l,x,b,E;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;x=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const A=Object.assign({},e[r][1].end),L=Object.assign({},e[n][1].start);N5(A,-x),N5(L,x),d={type:x>1?"strongSequence":"emphasisSequence",start:A,end:Object.assign({},e[r][1].end)},l={type:x>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:L},c={type:x>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a={type:x>1?"strong":"emphasis",start:Object.assign({},d.start),end:Object.assign({},l.end)},e[r][1].end=Object.assign({},d.start),e[n][1].start=Object.assign({},l.end),b=[],e[r][1].end.offset-e[r][1].start.offset&&(b=ws(b,[["enter",e[r][1],t],["exit",e[r][1],t]])),b=ws(b,[["enter",a,t],["enter",d,t],["exit",d,t],["enter",c,t]]),b=ws(b,s3(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),b=ws(b,[["exit",c,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(E=2,b=ws(b,[["enter",e[n][1],t],["exit",e[n][1],t]])):E=0,au(e,r-1,n-r+3,b),n=r+b.length-E-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function XG(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=$5(r);let c;return d;function d(x){return e.enter("attentionSequence"),c=x,l(x)}function l(x){if(x===c)return e.consume(x),l;const b=e.exit("attentionSequence"),E=$5(x),A=!E||E===2&&a||n.includes(x),L=!a||a===2&&E||n.includes(r);return b._open=!!(c===42?A:A&&(a||!L)),b._close=!!(c===42?L:L&&(E||!A)),t(x)}}function N5(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const YG={name:"autolink",tokenize:JG};function JG(e,t,n){let r=1;return a;function a($){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume($),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),c}function c($){return eu($)?(e.consume($),d):z5($)?b($):n($)}function d($){return $===43||$===45||$===46||Xa($)?l($):b($)}function l($){return $===58?(e.consume($),x):($===43||$===45||$===46||Xa($))&&r++<32?(e.consume($),l):b($)}function x($){return $===62?(e.exit("autolinkProtocol"),F($)):$===null||$===32||$===60||SC($)?n($):(e.consume($),x)}function b($){return $===64?(e.consume($),r=0,E):z5($)?(e.consume($),b):n($)}function E($){return Xa($)?A($):n($)}function A($){return $===46?(e.consume($),r=0,E):$===62?(e.exit("autolinkProtocol").type="autolinkEmail",F($)):L($)}function L($){return($===45||Xa($))&&r++<63?(e.consume($),$===45?L:A):n($)}function F($){return e.enter("autolinkMarker"),e.consume($),e.exit("autolinkMarker"),e.exit("autolink"),t}}const Cb={tokenize:QG,partial:!0};function QG(e,t,n){return Rr(e,r,"linePrefix");function r(a){return a===null||An(a)?t(a):n(a)}}const YL={name:"blockQuote",tokenize:eH,continuation:{tokenize:tH},exit:nH};function eH(e,t,n){const r=this;return a;function a(d){if(d===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(d),e.exit("blockQuoteMarker"),c}return n(d)}function c(d){return Vi(d)?(e.enter("blockQuotePrefixWhitespace"),e.consume(d),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(d))}}function tH(e,t,n){return Rr(e,e.attempt(YL,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function nH(e){e.exit("blockQuote")}const JL={name:"characterEscape",tokenize:rH};function rH(e,t,n){return r;function r(c){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(c),e.exit("escapeMarker"),a}function a(c){return UG(c)?(e.enter("characterEscapeValue"),e.consume(c),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(c)}}const U5=document.createElement("i");function l3(e){const t="&"+e+";";U5.innerHTML=t;const n=U5.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const QL={name:"characterReference",tokenize:iH};function iH(e,t,n){const r=this;let a=0,c,d;return l;function l(A){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),x}function x(A){return A===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(A),e.exit("characterReferenceMarkerNumeric"),b):(e.enter("characterReferenceValue"),c=31,d=Xa,E(A))}function b(A){return A===88||A===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(A),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),c=6,d=NG,E):(e.enter("characterReferenceValue"),c=7,d=wC,E(A))}function E(A){let L;return A===59&&a?(L=e.exit("characterReferenceValue"),d===Xa&&!l3(r.sliceSerialize(L))?n(A):(e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):d(A)&&a++<c?(e.consume(A),E):n(A)}}const j5={name:"codeFenced",tokenize:oH,concrete:!0};function oH(e,t,n){const r=this,a={tokenize:se,partial:!0},c={tokenize:Q,partial:!0},d=this.events[this.events.length-1],l=d&&d[1].type==="linePrefix"?d[2].sliceSerialize(d[1],!0).length:0;let x=0,b;return E;function E(ee){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),b=ee,A(ee)}function A(ee){return ee===b?(e.consume(ee),x++,A):(e.exit("codeFencedFenceSequence"),x<3?n(ee):Rr(e,L,"whitespace")(ee))}function L(ee){return ee===null||An(ee)?Z(ee):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),F(ee))}function F(ee){return ee===null||ks(ee)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Rr(e,$,"whitespace")(ee)):ee===96&&ee===b?n(ee):(e.consume(ee),F)}function $(ee){return ee===null||An(ee)?Z(ee):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),N(ee))}function N(ee){return ee===null||An(ee)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),Z(ee)):ee===96&&ee===b?n(ee):(e.consume(ee),N)}function Z(ee){return e.exit("codeFencedFence"),r.interrupt?t(ee):R(ee)}function R(ee){return ee===null?G(ee):An(ee)?e.attempt(c,e.attempt(a,G,l?Rr(e,R,"linePrefix",l+1):R),G)(ee):(e.enter("codeFlowValue"),q(ee))}function q(ee){return ee===null||An(ee)?(e.exit("codeFlowValue"),R(ee)):(e.consume(ee),q)}function G(ee){return e.exit("codeFenced"),t(ee)}function Q(ee,oe,xe){const Oe=this;return Le;function Le($e){return ee.enter("lineEnding"),ee.consume($e),ee.exit("lineEnding"),qe}function qe($e){return Oe.parser.lazy[Oe.now().line]?xe($e):oe($e)}}function se(ee,oe,xe){let Oe=0;return Rr(ee,Le,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function Le(nt){return ee.enter("codeFencedFence"),ee.enter("codeFencedFenceSequence"),qe(nt)}function qe(nt){return nt===b?(ee.consume(nt),Oe++,qe):Oe<x?xe(nt):(ee.exit("codeFencedFenceSequence"),Rr(ee,$e,"whitespace")(nt))}function $e(nt){return nt===null||An(nt)?(ee.exit("codeFencedFence"),oe(nt)):xe(nt)}}}const C2={name:"codeIndented",tokenize:sH},aH={tokenize:lH,partial:!0};function sH(e,t,n){const r=this;return a;function a(b){return e.enter("codeIndented"),Rr(e,c,"linePrefix",4+1)(b)}function c(b){const E=r.events[r.events.length-1];return E&&E[1].type==="linePrefix"&&E[2].sliceSerialize(E[1],!0).length>=4?d(b):n(b)}function d(b){return b===null?x(b):An(b)?e.attempt(aH,d,x)(b):(e.enter("codeFlowValue"),l(b))}function l(b){return b===null||An(b)?(e.exit("codeFlowValue"),d(b)):(e.consume(b),l)}function x(b){return e.exit("codeIndented"),t(b)}}function lH(e,t,n){const r=this;return a;function a(d){return r.parser.lazy[r.now().line]?n(d):An(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),a):Rr(e,c,"linePrefix",4+1)(d)}function c(d){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(d):An(d)?a(d):n(d)}}const uH={name:"codeText",tokenize:fH,resolve:cH,previous:hH};function cH(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function hH(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fH(e,t,n){let r=0,a,c;return d;function d(A){return e.enter("codeText"),e.enter("codeTextSequence"),l(A)}function l(A){return A===96?(e.consume(A),r++,l):(e.exit("codeTextSequence"),x(A))}function x(A){return A===null?n(A):A===96?(c=e.enter("codeTextSequence"),a=0,E(A)):A===32?(e.enter("space"),e.consume(A),e.exit("space"),x):An(A)?(e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),x):(e.enter("codeTextData"),b(A))}function b(A){return A===null||A===32||A===96||An(A)?(e.exit("codeTextData"),x(A)):(e.consume(A),b)}function E(A){return A===96?(e.consume(A),a++,E):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(A)):(c.type="codeTextData",b(A))}}function eO(e){const t={};let n=-1,r,a,c,d,l,x,b;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(x=r[1]._tokenizer.events,c=0,c<x.length&&x[c][1].type==="lineEndingBlank"&&(c+=2),c<x.length&&x[c][1].type==="content"))for(;++c<x.length&&x[c][1].type!=="content";)x[c][1].type==="chunkText"&&(x[c][1]._isInFirstContentOfListItem=!0,c++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,dH(e,n)),n=t[n],b=!0);else if(r[1]._container){for(c=n,a=void 0;c--&&(d=e[c],d[1].type==="lineEnding"||d[1].type==="lineEndingBlank");)d[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),d[1].type="lineEnding",a=c);a&&(r[1].end=Object.assign({},e[a][1].start),l=e.slice(a,n),l.unshift(r),au(e,a,n-a+1,l))}}return!b}function dH(e,t){const n=e[t][1],r=e[t][2];let a=t-1;const c=[],d=n._tokenizer||r.parser[n.contentType](n.start),l=d.events,x=[],b={};let E,A,L=-1,F=n,$=0,N=0;const Z=[N];for(;F;){for(;e[++a][1]!==F;);c.push(a),F._tokenizer||(E=r.sliceStream(F),F.next||E.push(null),A&&d.defineSkip(F.start),F._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write(E),F._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),A=F,F=F.next}for(F=n;++L<l.length;)l[L][0]==="exit"&&l[L-1][0]==="enter"&&l[L][1].type===l[L-1][1].type&&l[L][1].start.line!==l[L][1].end.line&&(N=L+1,Z.push(N),F._tokenizer=void 0,F.previous=void 0,F=F.next);for(d.events=[],F?(F._tokenizer=void 0,F.previous=void 0):Z.pop(),L=Z.length;L--;){const R=l.slice(Z[L],Z[L+1]),q=c.pop();x.unshift([q,q+R.length-1]),au(e,q,2,R)}for(L=-1;++L<x.length;)b[$+x[L][0]]=$+x[L][1],$+=x[L][1]-x[L][0]-1;return b}const pH={tokenize:yH,resolve:gH},mH={tokenize:_H,partial:!0};function gH(e){return eO(e),e}function yH(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?c(l):An(l)?e.check(mH,d,c)(l):(e.consume(l),a)}function c(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function d(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function _H(e,t,n){const r=this;return a;function a(d){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Rr(e,c,"linePrefix")}function c(d){if(d===null||An(d))return n(d);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(d):e.interrupt(r.parser.constructs.flow,n,t)(d)}}function tO(e,t,n,r,a,c,d,l,x){const b=x||Number.POSITIVE_INFINITY;let E=0;return A;function A(R){return R===60?(e.enter(r),e.enter(a),e.enter(c),e.consume(R),e.exit(c),L):R===null||R===41||SC(R)?n(R):(e.enter(r),e.enter(d),e.enter(l),e.enter("chunkString",{contentType:"string"}),N(R))}function L(R){return R===62?(e.enter(c),e.consume(R),e.exit(c),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),F(R))}function F(R){return R===62?(e.exit("chunkString"),e.exit(l),L(R)):R===null||R===60||An(R)?n(R):(e.consume(R),R===92?$:F)}function $(R){return R===60||R===62||R===92?(e.consume(R),F):F(R)}function N(R){return R===40?++E>b?n(R):(e.consume(R),N):R===41?E--?(e.consume(R),N):(e.exit("chunkString"),e.exit(l),e.exit(d),e.exit(r),t(R)):R===null||ks(R)?E?n(R):(e.exit("chunkString"),e.exit(l),e.exit(d),e.exit(r),t(R)):SC(R)?n(R):(e.consume(R),R===92?Z:N)}function Z(R){return R===40||R===41||R===92?(e.consume(R),N):N(R)}}function nO(e,t,n,r,a,c){const d=this;let l=0,x;return b;function b(F){return e.enter(r),e.enter(a),e.consume(F),e.exit(a),e.enter(c),E}function E(F){return F===null||F===91||F===93&&!x||F===94&&!l&&"_hiddenFootnoteSupport"in d.parser.constructs||l>999?n(F):F===93?(e.exit(c),e.enter(a),e.consume(F),e.exit(a),e.exit(r),t):An(F)?(e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),E):(e.enter("chunkString",{contentType:"string"}),A(F))}function A(F){return F===null||F===91||F===93||An(F)||l++>999?(e.exit("chunkString"),E(F)):(e.consume(F),x=x||!Vi(F),F===92?L:A)}function L(F){return F===91||F===92||F===93?(e.consume(F),l++,A):A(F)}}function rO(e,t,n,r,a,c){let d;return l;function l(L){return e.enter(r),e.enter(a),e.consume(L),e.exit(a),d=L===40?41:L,x}function x(L){return L===d?(e.enter(a),e.consume(L),e.exit(a),e.exit(r),t):(e.enter(c),b(L))}function b(L){return L===d?(e.exit(c),x(d)):L===null?n(L):An(L)?(e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),Rr(e,b,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),E(L))}function E(L){return L===d||L===null||An(L)?(e.exit("chunkString"),b(L)):(e.consume(L),L===92?A:E)}function A(L){return L===d||L===92?(e.consume(L),E):E(L)}}function vy(e,t){let n;return r;function r(a){return An(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Vi(a)?Rr(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}function Vp(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vH={name:"definition",tokenize:bH},xH={tokenize:wH,partial:!0};function bH(e,t,n){const r=this;let a;return c;function c(x){return e.enter("definition"),nO.call(r,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function d(x){return a=Vp(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),vy(e,tO(e,e.attempt(xH,Rr(e,l,"whitespace"),Rr(e,l,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(x)}function l(x){return x===null||An(x)?(e.exit("definition"),r.parser.defined.includes(a)||r.parser.defined.push(a),t(x)):n(x)}}function wH(e,t,n){return r;function r(d){return ks(d)?vy(e,a)(d):n(d)}function a(d){return d===34||d===39||d===40?rO(e,Rr(e,c,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d):n(d)}function c(d){return d===null||An(d)?t(d):n(d)}}const SH={name:"hardBreakEscape",tokenize:CH};function CH(e,t,n){return r;function r(c){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(c),a}function a(c){return An(c)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(c)):n(c)}}const EH={name:"headingAtx",tokenize:AH,resolve:kH};function kH(e,t){let n=e.length-2,r=3,a,c;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},c={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},au(e,r,n-r+1,[["enter",a,t],["enter",c,t],["exit",c,t],["exit",a,t]])),e}function AH(e,t,n){const r=this;let a=0;return c;function c(E){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),d(E)}function d(E){return E===35&&a++<6?(e.consume(E),d):E===null||ks(E)?(e.exit("atxHeadingSequence"),r.interrupt?t(E):l(E)):n(E)}function l(E){return E===35?(e.enter("atxHeadingSequence"),x(E)):E===null||An(E)?(e.exit("atxHeading"),t(E)):Vi(E)?Rr(e,l,"whitespace")(E):(e.enter("atxHeadingText"),b(E))}function x(E){return E===35?(e.consume(E),x):(e.exit("atxHeadingSequence"),l(E))}function b(E){return E===null||E===35||ks(E)?(e.exit("atxHeadingText"),l(E)):(e.consume(E),b)}}const TH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],V5=["pre","script","style","textarea"],PH={name:"htmlFlow",tokenize:LH,resolveTo:MH,concrete:!0},IH={tokenize:OH,partial:!0};function MH(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function LH(e,t,n){const r=this;let a,c,d,l,x;return b;function b(ae){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(ae),E}function E(ae){return ae===33?(e.consume(ae),A):ae===47?(e.consume(ae),$):ae===63?(e.consume(ae),a=3,r.interrupt?t:_e):eu(ae)?(e.consume(ae),d=String.fromCharCode(ae),c=!0,N):n(ae)}function A(ae){return ae===45?(e.consume(ae),a=2,L):ae===91?(e.consume(ae),a=5,d="CDATA[",l=0,F):eu(ae)?(e.consume(ae),a=4,r.interrupt?t:_e):n(ae)}function L(ae){return ae===45?(e.consume(ae),r.interrupt?t:_e):n(ae)}function F(ae){return ae===d.charCodeAt(l++)?(e.consume(ae),l===d.length?r.interrupt?t:qe:F):n(ae)}function $(ae){return eu(ae)?(e.consume(ae),d=String.fromCharCode(ae),N):n(ae)}function N(ae){return ae===null||ae===47||ae===62||ks(ae)?ae!==47&&c&&V5.includes(d.toLowerCase())?(a=1,r.interrupt?t(ae):qe(ae)):TH.includes(d.toLowerCase())?(a=6,ae===47?(e.consume(ae),Z):r.interrupt?t(ae):qe(ae)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(ae):c?q(ae):R(ae)):ae===45||Xa(ae)?(e.consume(ae),d+=String.fromCharCode(ae),N):n(ae)}function Z(ae){return ae===62?(e.consume(ae),r.interrupt?t:qe):n(ae)}function R(ae){return Vi(ae)?(e.consume(ae),R):Oe(ae)}function q(ae){return ae===47?(e.consume(ae),Oe):ae===58||ae===95||eu(ae)?(e.consume(ae),G):Vi(ae)?(e.consume(ae),q):Oe(ae)}function G(ae){return ae===45||ae===46||ae===58||ae===95||Xa(ae)?(e.consume(ae),G):Q(ae)}function Q(ae){return ae===61?(e.consume(ae),se):Vi(ae)?(e.consume(ae),Q):q(ae)}function se(ae){return ae===null||ae===60||ae===61||ae===62||ae===96?n(ae):ae===34||ae===39?(e.consume(ae),x=ae,ee):Vi(ae)?(e.consume(ae),se):(x=null,oe(ae))}function ee(ae){return ae===null||An(ae)?n(ae):ae===x?(e.consume(ae),xe):(e.consume(ae),ee)}function oe(ae){return ae===null||ae===34||ae===39||ae===60||ae===61||ae===62||ae===96||ks(ae)?Q(ae):(e.consume(ae),oe)}function xe(ae){return ae===47||ae===62||Vi(ae)?q(ae):n(ae)}function Oe(ae){return ae===62?(e.consume(ae),Le):n(ae)}function Le(ae){return Vi(ae)?(e.consume(ae),Le):ae===null||An(ae)?qe(ae):n(ae)}function qe(ae){return ae===45&&a===2?(e.consume(ae),At):ae===60&&a===1?(e.consume(ae),zt):ae===62&&a===4?(e.consume(ae),we):ae===63&&a===3?(e.consume(ae),_e):ae===93&&a===5?(e.consume(ae),Ve):An(ae)&&(a===6||a===7)?e.check(IH,we,$e)(ae):ae===null||An(ae)?$e(ae):(e.consume(ae),qe)}function $e(ae){return e.exit("htmlFlowData"),nt(ae)}function nt(ae){return ae===null?K(ae):An(ae)?e.attempt({tokenize:pt,partial:!0},nt,K)(ae):(e.enter("htmlFlowData"),qe(ae))}function pt(ae,lt,gt){return Gt;function Gt(Qt){return ae.enter("lineEnding"),ae.consume(Qt),ae.exit("lineEnding"),Dt}function Dt(Qt){return r.parser.lazy[r.now().line]?gt(Qt):lt(Qt)}}function At(ae){return ae===45?(e.consume(ae),_e):qe(ae)}function zt(ae){return ae===47?(e.consume(ae),d="",Vt):qe(ae)}function Vt(ae){return ae===62&&V5.includes(d.toLowerCase())?(e.consume(ae),we):eu(ae)&&d.length<8?(e.consume(ae),d+=String.fromCharCode(ae),Vt):qe(ae)}function Ve(ae){return ae===93?(e.consume(ae),_e):qe(ae)}function _e(ae){return ae===62?(e.consume(ae),we):ae===45&&a===2?(e.consume(ae),_e):qe(ae)}function we(ae){return ae===null||An(ae)?(e.exit("htmlFlowData"),K(ae)):(e.consume(ae),we)}function K(ae){return e.exit("htmlFlow"),t(ae)}}function OH(e,t,n){return r;function r(a){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),e.attempt(Cb,t,n)}}const FH={name:"htmlText",tokenize:RH};function RH(e,t,n){const r=this;let a,c,d,l;return x;function x(K){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(K),b}function b(K){return K===33?(e.consume(K),E):K===47?(e.consume(K),oe):K===63?(e.consume(K),se):eu(K)?(e.consume(K),Le):n(K)}function E(K){return K===45?(e.consume(K),A):K===91?(e.consume(K),c="CDATA[",d=0,Z):eu(K)?(e.consume(K),Q):n(K)}function A(K){return K===45?(e.consume(K),L):n(K)}function L(K){return K===null||K===62?n(K):K===45?(e.consume(K),F):$(K)}function F(K){return K===null||K===62?n(K):$(K)}function $(K){return K===null?n(K):K===45?(e.consume(K),N):An(K)?(l=$,Ve(K)):(e.consume(K),$)}function N(K){return K===45?(e.consume(K),we):$(K)}function Z(K){return K===c.charCodeAt(d++)?(e.consume(K),d===c.length?R:Z):n(K)}function R(K){return K===null?n(K):K===93?(e.consume(K),q):An(K)?(l=R,Ve(K)):(e.consume(K),R)}function q(K){return K===93?(e.consume(K),G):R(K)}function G(K){return K===62?we(K):K===93?(e.consume(K),G):R(K)}function Q(K){return K===null||K===62?we(K):An(K)?(l=Q,Ve(K)):(e.consume(K),Q)}function se(K){return K===null?n(K):K===63?(e.consume(K),ee):An(K)?(l=se,Ve(K)):(e.consume(K),se)}function ee(K){return K===62?we(K):se(K)}function oe(K){return eu(K)?(e.consume(K),xe):n(K)}function xe(K){return K===45||Xa(K)?(e.consume(K),xe):Oe(K)}function Oe(K){return An(K)?(l=Oe,Ve(K)):Vi(K)?(e.consume(K),Oe):we(K)}function Le(K){return K===45||Xa(K)?(e.consume(K),Le):K===47||K===62||ks(K)?qe(K):n(K)}function qe(K){return K===47?(e.consume(K),we):K===58||K===95||eu(K)?(e.consume(K),$e):An(K)?(l=qe,Ve(K)):Vi(K)?(e.consume(K),qe):we(K)}function $e(K){return K===45||K===46||K===58||K===95||Xa(K)?(e.consume(K),$e):nt(K)}function nt(K){return K===61?(e.consume(K),pt):An(K)?(l=nt,Ve(K)):Vi(K)?(e.consume(K),nt):qe(K)}function pt(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(e.consume(K),a=K,At):An(K)?(l=pt,Ve(K)):Vi(K)?(e.consume(K),pt):(e.consume(K),a=void 0,Vt)}function At(K){return K===a?(e.consume(K),zt):K===null?n(K):An(K)?(l=At,Ve(K)):(e.consume(K),At)}function zt(K){return K===62||K===47||ks(K)?qe(K):n(K)}function Vt(K){return K===null||K===34||K===39||K===60||K===61||K===96?n(K):K===62||ks(K)?qe(K):(e.consume(K),Vt)}function Ve(K){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(K),e.exit("lineEnding"),Rr(e,_e,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _e(K){return e.enter("htmlTextData"),l(K)}function we(K){return K===62?(e.consume(K),e.exit("htmlTextData"),e.exit("htmlText"),t):n(K)}}const u3={name:"labelEnd",tokenize:UH,resolveTo:NH,resolveAll:$H},DH={tokenize:jH},zH={tokenize:VH},BH={tokenize:qH};function $H(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function NH(e,t){let n=e.length,r=0,a,c,d,l;for(;n--;)if(a=e[n][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(d){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(d=n);const x={type:e[c][1].type==="labelLink"?"link":"image",start:Object.assign({},e[c][1].start),end:Object.assign({},e[e.length-1][1].end)},b={type:"label",start:Object.assign({},e[c][1].start),end:Object.assign({},e[d][1].end)},E={type:"labelText",start:Object.assign({},e[c+r+2][1].end),end:Object.assign({},e[d-2][1].start)};return l=[["enter",x,t],["enter",b,t]],l=ws(l,e.slice(c+1,c+r+3)),l=ws(l,[["enter",E,t]]),l=ws(l,s3(t.parser.constructs.insideSpan.null,e.slice(c+r+4,d-3),t)),l=ws(l,[["exit",E,t],e[d-2],e[d-1],["exit",b,t]]),l=ws(l,e.slice(d+1)),l=ws(l,[["exit",x,t]]),au(e,c,e.length,l),e}function UH(e,t,n){const r=this;let a=r.events.length,c,d;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){c=r.events[a][1];break}return l;function l(E){return c?c._inactive?b(E):(d=r.parser.defined.includes(Vp(r.sliceSerialize({start:c.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(E),e.exit("labelMarker"),e.exit("labelEnd"),x):n(E)}function x(E){return E===40?e.attempt(DH,t,d?t:b)(E):E===91?e.attempt(zH,t,d?e.attempt(BH,t,b):b)(E):d?t(E):b(E)}function b(E){return c._balanced=!0,n(E)}}function jH(e,t,n){return r;function r(x){return e.enter("resource"),e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),vy(e,a)}function a(x){return x===41?l(x):tO(e,c,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function c(x){return ks(x)?vy(e,d)(x):l(x)}function d(x){return x===34||x===39||x===40?rO(e,vy(e,l),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):l(x)}function l(x){return x===41?(e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),e.exit("resource"),t):n(x)}}function VH(e,t,n){const r=this;return a;function a(d){return nO.call(r,e,c,n,"reference","referenceMarker","referenceString")(d)}function c(d){return r.parser.defined.includes(Vp(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(d):n(d)}}function qH(e,t,n){return r;function r(c){return e.enter("reference"),e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),a}function a(c){return c===93?(e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),e.exit("reference"),t):n(c)}}const GH={name:"labelStartImage",tokenize:HH,resolveAll:u3.resolveAll};function HH(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),c}function c(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),d):n(l)}function d(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const WH={name:"labelStartLink",tokenize:ZH,resolveAll:u3.resolveAll};function ZH(e,t,n){const r=this;return a;function a(d){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelLink"),c}function c(d){return d===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(d):t(d)}}const E2={name:"lineEnding",tokenize:KH};function KH(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Rr(e,t,"linePrefix")}}const n1={name:"thematicBreak",tokenize:XH};function XH(e,t,n){let r=0,a;return c;function c(x){return e.enter("thematicBreak"),a=x,d(x)}function d(x){return x===a?(e.enter("thematicBreakSequence"),l(x)):Vi(x)?Rr(e,d,"whitespace")(x):r<3||x!==null&&!An(x)?n(x):(e.exit("thematicBreak"),t(x))}function l(x){return x===a?(e.consume(x),r++,l):(e.exit("thematicBreakSequence"),d(x))}}const Ea={name:"list",tokenize:QH,continuation:{tokenize:eW},exit:nW},YH={tokenize:rW,partial:!0},JH={tokenize:tW,partial:!0};function QH(e,t,n){const r=this,a=r.events[r.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,d=0;return l;function l(F){const $=r.containerState.type||(F===42||F===43||F===45?"listUnordered":"listOrdered");if($==="listUnordered"?!r.containerState.marker||F===r.containerState.marker:wC(F)){if(r.containerState.type||(r.containerState.type=$,e.enter($,{_container:!0})),$==="listUnordered")return e.enter("listItemPrefix"),F===42||F===45?e.check(n1,n,b)(F):b(F);if(!r.interrupt||F===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),x(F)}return n(F)}function x(F){return wC(F)&&++d<10?(e.consume(F),x):(!r.interrupt||d<2)&&(r.containerState.marker?F===r.containerState.marker:F===41||F===46)?(e.exit("listItemValue"),b(F)):n(F)}function b(F){return e.enter("listItemMarker"),e.consume(F),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||F,e.check(Cb,r.interrupt?n:E,e.attempt(YH,L,A))}function E(F){return r.containerState.initialBlankLine=!0,c++,L(F)}function A(F){return Vi(F)?(e.enter("listItemPrefixWhitespace"),e.consume(F),e.exit("listItemPrefixWhitespace"),L):n(F)}function L(F){return r.containerState.size=c+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(F)}}function eW(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Cb,a,c);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Rr(e,t,"listItemIndent",r.containerState.size+1)(l)}function c(l){return r.containerState.furtherBlankLines||!Vi(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,d(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(JH,t,d)(l))}function d(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Rr(e,e.attempt(Ea,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function tW(e,t,n){const r=this;return Rr(e,a,"listItemIndent",r.containerState.size+1);function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===r.containerState.size?t(c):n(c)}}function nW(e){e.exit(this.containerState.type)}function rW(e,t,n){const r=this;return Rr(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function a(c){const d=r.events[r.events.length-1];return!Vi(c)&&d&&d[1].type==="listItemPrefixWhitespace"?t(c):n(c)}}const q5={name:"setextUnderline",tokenize:oW,resolveTo:iW};function iW(e,t){let n=e.length,r,a,c;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!c&&e[n][1].type==="definition"&&(c=n);const d={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",c?(e.splice(a,0,["enter",d,t]),e.splice(c+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[c][1].end)):e[r][1]=d,e.push(["exit",d,t]),e}function oW(e,t,n){const r=this;let a=r.events.length,c,d;for(;a--;)if(r.events[a][1].type!=="lineEnding"&&r.events[a][1].type!=="linePrefix"&&r.events[a][1].type!=="content"){d=r.events[a][1].type==="paragraph";break}return l;function l(E){return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),c=E,x(E)):n(E)}function x(E){return E===c?(e.consume(E),x):(e.exit("setextHeadingLineSequence"),Rr(e,b,"lineSuffix")(E))}function b(E){return E===null||An(E)?(e.exit("setextHeadingLine"),t(E)):n(E)}}const aW={tokenize:sW};function sW(e){const t=this,n=e.attempt(Cb,r,e.attempt(this.parser.constructs.flowInitial,a,Rr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(pH,a)),"linePrefix")));return n;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEndingBlank"),e.consume(c),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const lW={resolveAll:oO()},uW=iO("string"),cW=iO("text");function iO(e){return{tokenize:t,resolveAll:oO(e==="text"?hW:void 0)};function t(n){const r=this,a=this.parser.constructs[e],c=n.attempt(a,d,l);return d;function d(E){return b(E)?c(E):l(E)}function l(E){if(E===null){n.consume(E);return}return n.enter("data"),n.consume(E),x}function x(E){return b(E)?(n.exit("data"),c(E)):(n.consume(E),x)}function b(E){if(E===null)return!0;const A=a[E];let L=-1;if(A)for(;++L<A.length;){const F=A[L];if(!F.previous||F.previous.call(r,r.previous))return!0}return!1}}}function oO(e){return t;function t(n,r){let a=-1,c;for(;++a<=n.length;)c===void 0?n[a]&&n[a][1].type==="data"&&(c=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==c+2&&(n[c][1].end=n[a-1][1].end,n.splice(c+2,a-c-2),a=c+2),c=void 0);return e?e(n,r):n}}function hW(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let c=a.length,d=-1,l=0,x;for(;c--;){const b=a[c];if(typeof b=="string"){for(d=b.length;b.charCodeAt(d-1)===32;)l++,d--;if(d)break;d=-1}else if(b===-2)x=!0,l++;else if(b!==-1){c++;break}}if(l){const b={type:n===e.length||x||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+c,_bufferIndex:c?d:r.start._bufferIndex+d},end:Object.assign({},r.end)};r.end=Object.assign({},b.start),r.start.offset===r.end.offset?Object.assign(r,b):(e.splice(n,0,["enter",b,t],["exit",b,t]),n+=2)}n++}return e}function fW(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let d=[],l=[];const x={consume:q,enter:G,exit:Q,attempt:oe(se),check:oe(ee),interrupt:oe(ee,{interrupt:!0})},b={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:F,sliceSerialize:L,now:$,defineSkip:N,write:A};let E=t.tokenize.call(b,x);return t.resolveAll&&c.push(t),b;function A(qe){return d=ws(d,qe),Z(),d[d.length-1]!==null?[]:(xe(t,0),b.events=s3(c,b.events,b),b.events)}function L(qe,$e){return pW(F(qe),$e)}function F(qe){return dW(d,qe)}function $(){return Object.assign({},r)}function N(qe){a[qe.line]=qe.column,Le()}function Z(){let qe;for(;r._index<d.length;){const $e=d[r._index];if(typeof $e=="string")for(qe=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===qe&&r._bufferIndex<$e.length;)R($e.charCodeAt(r._bufferIndex));else R($e)}}function R(qe){E=E(qe)}function q(qe){An(qe)?(r.line++,r.column=1,r.offset+=qe===-3?2:1,Le()):qe!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===d[r._index].length&&(r._bufferIndex=-1,r._index++)),b.previous=qe}function G(qe,$e){const nt=$e||{};return nt.type=qe,nt.start=$(),b.events.push(["enter",nt,b]),l.push(nt),nt}function Q(qe){const $e=l.pop();return $e.end=$(),b.events.push(["exit",$e,b]),$e}function se(qe,$e){xe(qe,$e.from)}function ee(qe,$e){$e.restore()}function oe(qe,$e){return nt;function nt(pt,At,zt){let Vt,Ve,_e,we;return Array.isArray(pt)?ae(pt):"tokenize"in pt?ae([pt]):K(pt);function K(Dt){return Qt;function Qt(un){const Xn=un!==null&&Dt[un],Qn=un!==null&&Dt.null,Bn=[...Array.isArray(Xn)?Xn:Xn?[Xn]:[],...Array.isArray(Qn)?Qn:Qn?[Qn]:[]];return ae(Bn)(un)}}function ae(Dt){return Vt=Dt,Ve=0,Dt.length===0?zt:lt(Dt[Ve])}function lt(Dt){return Qt;function Qt(un){return we=Oe(),_e=Dt,Dt.partial||(b.currentConstruct=Dt),Dt.name&&b.parser.constructs.disable.null.includes(Dt.name)?Gt():Dt.tokenize.call($e?Object.assign(Object.create(b),$e):b,x,gt,Gt)(un)}}function gt(Dt){return qe(_e,we),At}function Gt(Dt){return we.restore(),++Ve<Vt.length?lt(Vt[Ve]):zt}}}function xe(qe,$e){qe.resolveAll&&!c.includes(qe)&&c.push(qe),qe.resolve&&au(b.events,$e,b.events.length-$e,qe.resolve(b.events.slice($e),b)),qe.resolveTo&&(b.events=qe.resolveTo(b.events,b))}function Oe(){const qe=$(),$e=b.previous,nt=b.currentConstruct,pt=b.events.length,At=Array.from(l);return{restore:zt,from:pt};function zt(){r=qe,b.previous=$e,b.currentConstruct=nt,b.events.length=pt,l=At,Le()}}function Le(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function dW(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,c=t.end._bufferIndex;let d;return n===a?d=[e[n].slice(r,c)]:(d=e.slice(n,a),r>-1&&(d[0]=d[0].slice(r)),c>0&&d.push(e[a].slice(0,c))),d}function pW(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const c=e[n];let d;if(typeof c=="string")d=c;else switch(c){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=t?" ":"	";break}case-1:{if(!t&&a)continue;d=" ";break}default:d=String.fromCharCode(c)}a=c===-2,r.push(d)}return r.join("")}const mW={42:Ea,43:Ea,45:Ea,48:Ea,49:Ea,50:Ea,51:Ea,52:Ea,53:Ea,54:Ea,55:Ea,56:Ea,57:Ea,62:YL},gW={91:vH},yW={[-2]:C2,[-1]:C2,32:C2},_W={35:EH,42:n1,45:[q5,n1],60:PH,61:q5,95:n1,96:j5,126:j5},vW={38:QL,92:JL},xW={[-5]:E2,[-4]:E2,[-3]:E2,33:GH,38:QL,42:CC,60:[YG,FH],91:WH,92:[SH,JL],93:u3,95:CC,96:uH},bW={null:[CC,lW]},wW={null:[42,95]},SW={null:[]},CW=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:wW,contentInitial:gW,disable:SW,document:mW,flow:_W,flowInitial:yW,insideSpan:bW,string:vW,text:xW},Symbol.toStringTag,{value:"Module"}));function EW(e={}){const t=DG([CW].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(qG),document:r(HG),flow:r(aW),string:r(uW),text:r(cW)};return n;function r(a){return c;function c(d){return fW(n,a,d)}}}const G5=/[\0\t\n\r]/g;function kW(){let e=1,t="",n=!0,r;return a;function a(c,d,l){const x=[];let b,E,A,L,F;for(c=t+c.toString(d),A=0,t="",n&&(c.charCodeAt(0)===65279&&A++,n=void 0);A<c.length;){if(G5.lastIndex=A,b=G5.exec(c),L=b&&b.index!==void 0?b.index:c.length,F=c.charCodeAt(L),!b){t=c.slice(A);break}if(F===10&&A===L&&r)x.push(-3),r=void 0;else switch(r&&(x.push(-5),r=void 0),A<L&&(x.push(c.slice(A,L)),e+=L-A),F){case 0:{x.push(65533),e++;break}case 9:{for(E=Math.ceil(e/4)*4,x.push(-2);e++<E;)x.push(-1);break}case 10:{x.push(-4),e=1;break}default:r=!0,e=1}A=L+1}return l&&(r&&x.push(-5),t&&x.push(t),x.push(null)),x}}function AW(e){for(;!eO(e););return e}function aO(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const TW=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function PW(e){return e.replace(TW,IW)}function IW(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),c=a===120||a===88;return aO(n.slice(c?2:1),c?16:10)}return l3(n)||e}const EC={}.hasOwnProperty,MW=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),LW(n)(AW(EW(n).document().write(kW()(e,t,!0))))};function LW(e={}){const t=sO({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:x(ti),autolinkProtocol:$e,autolinkEmail:$e,atxHeading:x(_n),blockQuote:x(ei),characterEscape:$e,characterReference:$e,codeFenced:x(Je),codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:x(Je,b),codeText:x(yr,b),codeTextData:$e,data:$e,codeFlowValue:$e,definition:x(Gi),definitionDestinationString:b,definitionLabelString:b,definitionTitleString:b,emphasis:x(Gn),hardBreakEscape:x(_o),hardBreakTrailing:x(_o),htmlFlow:x(Mo,b),htmlFlowData:$e,htmlText:x(Mo,b),htmlTextData:$e,image:x(Lo),label:b,link:x(ti),listItem:x(Oo),listItemValue:N,listOrdered:x(Yn,$),listUnordered:x(Yn),paragraph:x(vo),reference:Dt,referenceString:b,resourceDestinationString:b,resourceTitleString:b,setextHeading:x(_n),strong:x(vt),thematicBreak:x(We)},exit:{atxHeading:A(),atxHeadingSequence:xe,autolink:A(),autolinkEmail:Bn,autolinkProtocol:Qn,blockQuote:A(),characterEscapeValue:nt,characterReferenceMarkerHexadecimal:un,characterReferenceMarkerNumeric:un,characterReferenceValue:Xn,codeFenced:A(G),codeFencedFence:q,codeFencedFenceInfo:Z,codeFencedFenceMeta:R,codeFlowValue:nt,codeIndented:A(Q),codeText:A(Ve),codeTextData:nt,data:nt,definition:A(),definitionDestinationString:oe,definitionLabelString:se,definitionTitleString:ee,emphasis:A(),hardBreakEscape:A(At),hardBreakTrailing:A(At),htmlFlow:A(zt),htmlFlowData:nt,htmlText:A(Vt),htmlTextData:nt,image:A(we),label:ae,labelText:K,lineEnding:pt,link:A(_e),listItem:A(),listOrdered:A(),listUnordered:A(),paragraph:A(),referenceString:Qt,resourceDestinationString:lt,resourceTitleString:gt,resource:Gt,setextHeading:A(qe),setextHeadingLineSequence:Le,setextHeadingText:Oe,strong:A(),thematicBreak:A()}},e.mdastExtensions||[]),n={};return r;function r(le){let Fe={type:"root",children:[]};const Pe=[Fe],rt=[],bt=[],vn={stack:Pe,tokenStack:rt,config:t,enter:E,exit:L,buffer:b,resume:F,setData:c,getData:d};let Wt=-1;for(;++Wt<le.length;)if(le[Wt][1].type==="listOrdered"||le[Wt][1].type==="listUnordered")if(le[Wt][0]==="enter")bt.push(Wt);else{const xt=bt.pop();Wt=a(le,xt,Wt)}for(Wt=-1;++Wt<le.length;){const xt=t[le[Wt][0]];EC.call(xt,le[Wt][1].type)&&xt[le[Wt][1].type].call(Object.assign({sliceSerialize:le[Wt][2].sliceSerialize},vn),le[Wt][1])}if(rt.length>0){const xt=rt[rt.length-1];(xt[1]||H5).call(vn,void 0,xt[0])}for(Fe.position={start:l(le.length>0?le[0][1].start:{line:1,column:1,offset:0}),end:l(le.length>0?le[le.length-2][1].end:{line:1,column:1,offset:0})},Wt=-1;++Wt<t.transforms.length;)Fe=t.transforms[Wt](Fe)||Fe;return Fe}function a(le,Fe,Pe){let rt=Fe-1,bt=-1,vn=!1,Wt,xt,$n,jn;for(;++rt<=Pe;){const bn=le[rt];if(bn[1].type==="listUnordered"||bn[1].type==="listOrdered"||bn[1].type==="blockQuote"?(bn[0]==="enter"?bt++:bt--,jn=void 0):bn[1].type==="lineEndingBlank"?bn[0]==="enter"&&(Wt&&!jn&&!bt&&!$n&&($n=rt),jn=void 0):bn[1].type==="linePrefix"||bn[1].type==="listItemValue"||bn[1].type==="listItemMarker"||bn[1].type==="listItemPrefix"||bn[1].type==="listItemPrefixWhitespace"||(jn=void 0),!bt&&bn[0]==="enter"&&bn[1].type==="listItemPrefix"||bt===-1&&bn[0]==="exit"&&(bn[1].type==="listUnordered"||bn[1].type==="listOrdered")){if(Wt){let _r=rt;for(xt=void 0;_r--;){const Mn=le[_r];if(Mn[1].type==="lineEnding"||Mn[1].type==="lineEndingBlank"){if(Mn[0]==="exit")continue;xt&&(le[xt][1].type="lineEndingBlank",vn=!0),Mn[1].type="lineEnding",xt=_r}else if(!(Mn[1].type==="linePrefix"||Mn[1].type==="blockQuotePrefix"||Mn[1].type==="blockQuotePrefixWhitespace"||Mn[1].type==="blockQuoteMarker"||Mn[1].type==="listItemIndent"))break}$n&&(!xt||$n<xt)&&(Wt._spread=!0),Wt.end=Object.assign({},xt?le[xt][1].start:bn[1].end),le.splice(xt||rt,0,["exit",Wt,bn[2]]),rt++,Pe++}bn[1].type==="listItemPrefix"&&(Wt={type:"listItem",_spread:!1,start:Object.assign({},bn[1].start)},le.splice(rt,0,["enter",Wt,bn[2]]),rt++,Pe++,$n=void 0,jn=!0)}}return le[Fe][1]._spread=vn,Pe}function c(le,Fe){n[le]=Fe}function d(le){return n[le]}function l(le){return{line:le.line,column:le.column,offset:le.offset}}function x(le,Fe){return Pe;function Pe(rt){E.call(this,le(rt),rt),Fe&&Fe.call(this,rt)}}function b(){this.stack.push({type:"fragment",children:[]})}function E(le,Fe,Pe){return this.stack[this.stack.length-1].children.push(le),this.stack.push(le),this.tokenStack.push([Fe,Pe]),le.position={start:l(Fe.start)},le}function A(le){return Fe;function Fe(Pe){le&&le.call(this,Pe),L.call(this,Pe)}}function L(le,Fe){const Pe=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==le.type&&(Fe?Fe.call(this,le,rt[0]):(rt[1]||H5).call(this,le,rt[0]));else throw new Error("Cannot close `"+le.type+"` ("+_y({start:le.start,end:le.end})+"): its not open");return Pe.position.end=l(le.end),Pe}function F(){return RG(this.stack.pop())}function $(){c("expectingFirstListItemValue",!0)}function N(le){if(d("expectingFirstListItemValue")){const Fe=this.stack[this.stack.length-2];Fe.start=Number.parseInt(this.sliceSerialize(le),10),c("expectingFirstListItemValue")}}function Z(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.lang=le}function R(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.meta=le}function q(){d("flowCodeInside")||(this.buffer(),c("flowCodeInside",!0))}function G(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.value=le.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c("flowCodeInside")}function Q(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.value=le.replace(/(\r?\n|\r)$/g,"")}function se(le){const Fe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=Fe,Pe.identifier=Vp(this.sliceSerialize(le)).toLowerCase()}function ee(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.title=le}function oe(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.url=le}function xe(le){const Fe=this.stack[this.stack.length-1];if(!Fe.depth){const Pe=this.sliceSerialize(le).length;Fe.depth=Pe}}function Oe(){c("setextHeadingSlurpLineEnding",!0)}function Le(le){const Fe=this.stack[this.stack.length-1];Fe.depth=this.sliceSerialize(le).charCodeAt(0)===61?1:2}function qe(){c("setextHeadingSlurpLineEnding")}function $e(le){const Fe=this.stack[this.stack.length-1];let Pe=Fe.children[Fe.children.length-1];(!Pe||Pe.type!=="text")&&(Pe=ni(),Pe.position={start:l(le.start)},Fe.children.push(Pe)),this.stack.push(Pe)}function nt(le){const Fe=this.stack.pop();Fe.value+=this.sliceSerialize(le),Fe.position.end=l(le.end)}function pt(le){const Fe=this.stack[this.stack.length-1];if(d("atHardBreak")){const Pe=Fe.children[Fe.children.length-1];Pe.position.end=l(le.end),c("atHardBreak");return}!d("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Fe.type)&&($e.call(this,le),nt.call(this,le))}function At(){c("atHardBreak",!0)}function zt(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.value=le}function Vt(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.value=le}function Ve(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.value=le}function _e(){const le=this.stack[this.stack.length-1];d("inReference")?(le.type+="Reference",le.referenceType=d("referenceType")||"shortcut",delete le.url,delete le.title):(delete le.identifier,delete le.label),c("referenceType")}function we(){const le=this.stack[this.stack.length-1];d("inReference")?(le.type+="Reference",le.referenceType=d("referenceType")||"shortcut",delete le.url,delete le.title):(delete le.identifier,delete le.label),c("referenceType")}function K(le){const Fe=this.stack[this.stack.length-2],Pe=this.sliceSerialize(le);Fe.label=PW(Pe),Fe.identifier=Vp(Pe).toLowerCase()}function ae(){const le=this.stack[this.stack.length-1],Fe=this.resume(),Pe=this.stack[this.stack.length-1];c("inReference",!0),Pe.type==="link"?Pe.children=le.children:Pe.alt=Fe}function lt(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.url=le}function gt(){const le=this.resume(),Fe=this.stack[this.stack.length-1];Fe.title=le}function Gt(){c("inReference")}function Dt(){c("referenceType","collapsed")}function Qt(le){const Fe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=Fe,Pe.identifier=Vp(this.sliceSerialize(le)).toLowerCase(),c("referenceType","full")}function un(le){c("characterReferenceType",le.type)}function Xn(le){const Fe=this.sliceSerialize(le),Pe=d("characterReferenceType");let rt;Pe?(rt=aO(Fe,Pe==="characterReferenceMarkerNumeric"?10:16),c("characterReferenceType")):rt=l3(Fe);const bt=this.stack.pop();bt.value+=rt,bt.position.end=l(le.end)}function Qn(le){nt.call(this,le);const Fe=this.stack[this.stack.length-1];Fe.url=this.sliceSerialize(le)}function Bn(le){nt.call(this,le);const Fe=this.stack[this.stack.length-1];Fe.url="mailto:"+this.sliceSerialize(le)}function ei(){return{type:"blockquote",children:[]}}function Je(){return{type:"code",lang:null,meta:null,value:""}}function yr(){return{type:"inlineCode",value:""}}function Gi(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Gn(){return{type:"emphasis",children:[]}}function _n(){return{type:"heading",depth:void 0,children:[]}}function _o(){return{type:"break"}}function Mo(){return{type:"html",value:""}}function Lo(){return{type:"image",title:null,url:"",alt:null}}function ti(){return{type:"link",title:null,url:"",children:[]}}function Yn(le){return{type:"list",ordered:le.type==="listOrdered",start:null,spread:le._spread,children:[]}}function Oo(le){return{type:"listItem",spread:le._spread,checked:null,children:[]}}function vo(){return{type:"paragraph",children:[]}}function vt(){return{type:"strong",children:[]}}function ni(){return{type:"text",value:""}}function We(){return{type:"thematicBreak"}}}function sO(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?sO(e,r):OW(e,r)}return e}function OW(e,t){let n;for(n in t)if(EC.call(t,n)){const r=n==="canContainEols"||n==="transforms",c=(EC.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),d=t[n];d&&(r?e[n]=[...c,...d]:Object.assign(c,d))}}function H5(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+_y({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+_y({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+_y({start:t.start,end:t.end})+") is still open")}function FW(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return MW(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var ro=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const r1={}.hasOwnProperty;function RW(e,t){const n=t.data||{};return"value"in t&&!(r1.call(n,"hName")||r1.call(n,"hProperties")||r1.call(n,"hChildren"))?e.augment(t,ro("text",t.value)):e(t,"div",Xo(e,t))}function lO(e,t,n){const r=t&&t.type;let a;if(!r)throw new Error("Expected node, got `"+t+"`");return r1.call(e.handlers,r)?a=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?a=DW:a=e.unknownHandler,(typeof a=="function"?a:RW)(e,t,n)}function DW(e,t){return"children"in t?{...t,children:Xo(e,t)}:t}function Xo(e,t){const n=[];if("children"in t){const r=t.children;let a=-1;for(;++a<r.length;){const c=lO(e,r[a],t);if(c){if(a&&r[a-1].type==="break"&&(!Array.isArray(c)&&c.type==="text"&&(c.value=c.value.replace(/^\s+/,"")),!Array.isArray(c)&&c.type==="element")){const d=c.children[0];d&&d.type==="text"&&(d.value=d.value.replace(/^\s+/,""))}Array.isArray(c)?n.push(...c):n.push(c)}}}return n}const uO=function(e){if(e==null)return NW;if(typeof e=="string")return $W(e);if(typeof e=="object")return Array.isArray(e)?zW(e):BW(e);if(typeof e=="function")return Eb(e);throw new Error("Expected function, string, or object as test")};function zW(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uO(e[n]);return Eb(r);function r(...a){let c=-1;for(;++c<t.length;)if(t[c].call(this,...a))return!0;return!1}}function BW(e){return Eb(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function $W(e){return Eb(t);function t(n){return n&&n.type===e}}function Eb(e){return t;function t(...n){return!!e.call(this,...n)}}function NW(){return!0}const UW=!0,jW="skip",W5=!1,VW=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const a=uO(t),c=r?-1:1;d(e,null,[])();function d(l,x,b){const E=typeof l=="object"&&l!==null?l:{};let A;return typeof E.type=="string"&&(A=typeof E.tagName=="string"?E.tagName:typeof E.name=="string"?E.name:void 0,Object.defineProperty(L,"name",{value:"node ("+(E.type+(A?"<"+A+">":""))+")"})),L;function L(){let F=[],$,N,Z;if((!t||a(l,x,b[b.length-1]||null))&&(F=qW(n(l,b)),F[0]===W5))return F;if(l.children&&F[0]!==jW)for(N=(r?l.children.length:-1)+c,Z=b.concat(l);N>-1&&N<l.children.length;){if($=d(l.children[N],N,Z)(),$[0]===W5)return $;N=typeof $[1]=="number"?$[1]:N+c}return F}}};function qW(e){return Array.isArray(e)?e:typeof e=="number"?[UW,e]:[e]}const c3=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),VW(e,t,a,r);function a(c,d){const l=d[d.length-1];return n(c,l?l.children.indexOf(c):null,l)}},cO=fO("start"),hO=fO("end");function fO(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function GW(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const Z5={}.hasOwnProperty;function HW(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return c3(e,"definition",r=>{const a=K5(r.identifier);a&&!Z5.call(t,a)&&(t[a]=r)}),n;function n(r){const a=K5(r);return a&&Z5.call(t,a)?t[a]:null}}function K5(e){return String(e||"").toUpperCase()}const WW={'"':"quot","&":"amp","<":"lt",">":"gt"};function ZW(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+WW[n]+";"}}function dO(e,t){const n=ZW(KW(e||""));if(!t)return n;const r=n.indexOf(":"),a=n.indexOf("?"),c=n.indexOf("#"),d=n.indexOf("/");return r<0||d>-1&&r>d||a>-1&&r>a||c>-1&&r>c||t.test(n.slice(0,r))?n:""}function KW(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const c=e.charCodeAt(n);let d="";if(c===37&&Xa(e.charCodeAt(n+1))&&Xa(e.charCodeAt(n+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(d=String.fromCharCode(c));else if(c>55295&&c<57344){const l=e.charCodeAt(n+1);c<56320&&l>56319&&l<57344?(d=String.fromCharCode(c,l),a=1):d=""}else d=String.fromCharCode(c);d&&(t.push(e.slice(r,n),encodeURIComponent(d)),r=n+a+1,d=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Yu(e,t){const n=[];let r=-1;for(t&&n.push(ro("text",`
`));++r<e.length;)r&&n.push(ro("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(ro("text",`
`)),n}function XW(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const a=Xo(e,r),c=String(r.identifier),d=dO(c.toLowerCase());let l=0;const x=[];for(;++l<=e.footnoteCounts[c];){const A={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+d+(l>1?"-"+l:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};l>1&&A.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(l)}]}),x.length>0&&x.push({type:"text",value:" "}),x.push(A)}const b=a[a.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const A=b.children[b.children.length-1];A&&A.type==="text"?A.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...x)}else a.push(...x);const E={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+d},children:Yu(a,!0)};r.position&&(E.position=r.position),n.push(E)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[ro("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Yu(n,!0)},{type:"text",value:`
`}]}}function YW(e,t){return e(t,"blockquote",Yu(Xo(e,t),!0))}function JW(e,t){return[e(t,"br"),ro("text",`
`)]}function QW(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};r&&(a.className=["language-"+r]);const c=e(t,"code",a,[ro("text",n)]);return t.meta&&(c.data={meta:t.meta}),e(t.position,"pre",[c])}function eZ(e,t){return e(t,"del",Xo(e,t))}function tZ(e,t){return e(t,"em",Xo(e,t))}function pO(e,t){const n=String(t.identifier),r=dO(n.toLowerCase()),a=e.footnoteOrder.indexOf(n);let c;a===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,c=e.footnoteOrder.length):(e.footnoteCounts[n]++,c=a+1);const d=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[ro("text",String(c))])])}function nZ(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const a=String(r);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},pO(e,{type:"footnoteReference",identifier:a,position:t.position})}function rZ(e,t){return e(t,"h"+t.depth,Xo(e,t))}function iZ(e,t){return e.dangerous?e.augment(t,ro("raw",t.value)):null}var X5={};function oZ(e){var t,n,r=X5[e];if(r)return r;for(r=X5[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function kb(e,t,n){var r,a,c,d,l,x="";for(typeof t!="string"&&(n=t,t=kb.defaultChars),typeof n>"u"&&(n=!0),l=oZ(t),r=0,a=e.length;r<a;r++){if(c=e.charCodeAt(r),n&&c===37&&r+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){x+=e.slice(r,r+3),r+=2;continue}if(c<128){x+=l[c];continue}if(c>=55296&&c<=57343){if(c>=55296&&c<=56319&&r+1<a&&(d=e.charCodeAt(r+1),d>=56320&&d<=57343)){x+=encodeURIComponent(e[r]+e[r+1]),r++;continue}x+="%EF%BF%BD";continue}x+=encodeURIComponent(e[r])}return x}kb.defaultChars=";/?:@&=+$,-_.!~*'()#";kb.componentChars="-_.!~*'()";var aZ=kb;const Ab=ic(aZ);function mO(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return ro("text","!["+t.alt+r);const a=Xo(e,t),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift(ro("text","["));const d=a[a.length-1];return d&&d.type==="text"?d.value+=r:a.push(ro("text",r)),a}function sZ(e,t){const n=e.definition(t.identifier);if(!n)return mO(e,t);const r={src:Ab(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function lZ(e,t){const n={src:Ab(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function uZ(e,t){return e(t,"code",[ro("text",t.value.replace(/\r?\n|\r/g," "))])}function cZ(e,t){const n=e.definition(t.identifier);if(!n)return mO(e,t);const r={href:Ab(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,Xo(e,t))}function hZ(e,t){const n={href:Ab(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Xo(e,t))}function fZ(e,t,n){const r=Xo(e,t),a=n?dZ(n):gO(t),c={},d=[];if(typeof t.checked=="boolean"){let b;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?b=r[0]:(b=e(null,"p",[]),r.unshift(b)),b.children.length>0&&b.children.unshift(ro("text"," ")),b.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),c.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const b=r[l];(a||l!==0||b.type!=="element"||b.tagName!=="p")&&d.push(ro("text",`
`)),b.type==="element"&&b.tagName==="p"&&!a?d.push(...b.children):d.push(b)}const x=r[r.length-1];return x&&(a||!("tagName"in x)||x.tagName!=="p")&&d.push(ro("text",`
`)),e(t,"li",c,d)}function dZ(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=gO(n[r]);return!!t}function gO(e){const t=e.spread;return t??e.children.length>1}function pZ(e,t){const n={},r=t.ordered?"ol":"ul",a=Xo(e,t);let c=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++c<a.length;){const d=a[c];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Yu(a,!0))}function mZ(e,t){return e(t,"p",Xo(e,t))}function gZ(e,t){return e.augment(t,ro("root",Yu(Xo(e,t))))}function yZ(e,t){return e(t,"strong",Xo(e,t))}function _Z(e,t){const n=t.children;let r=-1;const a=t.align||[],c=[];for(;++r<n.length;){const d=n[r].children,l=r===0?"th":"td",x=[];let b=-1;const E=t.align?a.length:d.length;for(;++b<E;){const A=d[b];x.push(e(A,l,{align:a[b]},A?Xo(e,A):[]))}c[r]=e(n[r],"tr",Yu(x,!0))}return e(t,"table",Yu([e(c[0].position,"thead",Yu([c[0]],!0))].concat(c[1]?e({start:cO(c[1]),end:hO(c[c.length-1])},"tbody",Yu(c.slice(1),!0)):[]),!0))}const Y5=9,J5=32;function vZ(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const c=[];for(;r;)c.push(Q5(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return c.push(Q5(t.slice(a),a>0,!1)),c.join("")}function Q5(e,t,n){let r=0,a=e.length;if(t){let c=e.codePointAt(r);for(;c===Y5||c===J5;)r++,c=e.codePointAt(r)}if(n){let c=e.codePointAt(a-1);for(;c===Y5||c===J5;)a--,c=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function xZ(e,t){return e.augment(t,ro("text",vZ(String(t.value))))}function bZ(e,t){return e(t,"hr")}const wZ={blockquote:YW,break:JW,code:QW,delete:eZ,emphasis:tZ,footnoteReference:pO,footnote:nZ,heading:rZ,html:iZ,imageReference:sZ,image:lZ,inlineCode:uZ,linkReference:cZ,link:hZ,listItem:fZ,list:pZ,paragraph:mZ,root:gZ,strong:yZ,table:_Z,text:xZ,thematicBreak:bZ,toml:Sv,yaml:Sv,definition:Sv,footnoteDefinition:Sv};function Sv(){return null}const SZ={}.hasOwnProperty;function CZ(e,t){const n=t||{},r=n.allowDangerousHtml||!1,a={};return d.dangerous=r,d.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,d.footnoteLabel=n.footnoteLabel||"Footnotes",d.footnoteLabelTagName=n.footnoteLabelTagName||"h2",d.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},d.footnoteBackLabel=n.footnoteBackLabel||"Back to content",d.definition=HW(e),d.footnoteById=a,d.footnoteOrder=[],d.footnoteCounts={},d.augment=c,d.handlers={...wZ,...n.handlers},d.unknownHandler=n.unknownHandler,d.passThrough=n.passThrough,c3(e,"footnoteDefinition",l=>{const x=String(l.identifier).toUpperCase();SZ.call(a,x)||(a[x]=l)}),d;function c(l,x){if(l&&"data"in l&&l.data){const b=l.data;b.hName&&(x.type!=="element"&&(x={type:"element",tagName:"",properties:{},children:[]}),x.tagName=b.hName),x.type==="element"&&b.hProperties&&(x.properties={...x.properties,...b.hProperties}),"children"in x&&x.children&&b.hChildren&&(x.children=b.hChildren)}if(l){const b="type"in l?l:{position:l};GW(b)||(x.position={start:cO(b),end:hO(b)})}return x}function d(l,x,b,E){return Array.isArray(b)&&(E=b,b={}),c(l,{type:"element",tagName:x,properties:b||{},children:E||[]})}}function yO(e,t){const n=CZ(e,t),r=lO(n,e,null),a=XW(n);return a&&r.children.push(ro("text",`
`),a),Array.isArray(r)?{type:"root",children:r}:r}const EZ=function(e,t){return e&&"run"in e?AZ(e,t):TZ(e||t)},kZ=EZ;function AZ(e,t){return(n,r,a)=>{e.run(yO(n,t),r,c=>{a(c)})}}function TZ(e){return t=>yO(t,e)}class S_{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}S_.prototype.property={};S_.prototype.normal={};S_.prototype.space=null;function _O(e,t){const n={},r={};let a=-1;for(;++a<e.length;)Object.assign(n,e[a].property),Object.assign(r,e[a].normal);return new S_(n,r,t)}function kC(e){return e.toLowerCase()}class Fs{constructor(t,n){this.property=t,this.attribute=n}}Fs.prototype.space=null;Fs.prototype.boolean=!1;Fs.prototype.booleanish=!1;Fs.prototype.overloadedBoolean=!1;Fs.prototype.number=!1;Fs.prototype.commaSeparated=!1;Fs.prototype.spaceSeparated=!1;Fs.prototype.commaOrSpaceSeparated=!1;Fs.prototype.mustUseProperty=!1;Fs.prototype.defined=!1;let PZ=0;const zn=sd(),Ui=sd(),vO=sd(),kt=sd(),Kr=sd(),qp=sd(),qa=sd();function sd(){return 2**++PZ}const AC=Object.freeze(Object.defineProperty({__proto__:null,boolean:zn,booleanish:Ui,commaOrSpaceSeparated:qa,commaSeparated:qp,number:kt,overloadedBoolean:vO,spaceSeparated:Kr},Symbol.toStringTag,{value:"Module"})),k2=Object.keys(AC);class h3 extends Fs{constructor(t,n,r,a){let c=-1;if(super(t,n),e4(this,"space",a),typeof r=="number")for(;++c<k2.length;){const d=k2[c];e4(this,k2[c],(r&AC[d])===AC[d])}}}h3.prototype.defined=!0;function e4(e,t,n){n&&(e[t]=n)}const IZ={}.hasOwnProperty;function pm(e){const t={},n={};let r;for(r in e.properties)if(IZ.call(e.properties,r)){const a=e.properties[r],c=new h3(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(c.mustUseProperty=!0),t[r]=c,n[kC(r)]=r,n[kC(c.attribute)]=r}return new S_(t,n,e.space)}const xO=pm({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),bO=pm({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function wO(e,t){return t in e?e[t]:t}function SO(e,t){return wO(e,t.toLowerCase())}const CO=pm({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:SO,properties:{xmlns:null,xmlnsXLink:null}}),EO=pm({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Ui,ariaAutoComplete:null,ariaBusy:Ui,ariaChecked:Ui,ariaColCount:kt,ariaColIndex:kt,ariaColSpan:kt,ariaControls:Kr,ariaCurrent:null,ariaDescribedBy:Kr,ariaDetails:null,ariaDisabled:Ui,ariaDropEffect:Kr,ariaErrorMessage:null,ariaExpanded:Ui,ariaFlowTo:Kr,ariaGrabbed:Ui,ariaHasPopup:null,ariaHidden:Ui,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Kr,ariaLevel:kt,ariaLive:null,ariaModal:Ui,ariaMultiLine:Ui,ariaMultiSelectable:Ui,ariaOrientation:null,ariaOwns:Kr,ariaPlaceholder:null,ariaPosInSet:kt,ariaPressed:Ui,ariaReadOnly:Ui,ariaRelevant:null,ariaRequired:Ui,ariaRoleDescription:Kr,ariaRowCount:kt,ariaRowIndex:kt,ariaRowSpan:kt,ariaSelected:Ui,ariaSetSize:kt,ariaSort:null,ariaValueMax:kt,ariaValueMin:kt,ariaValueNow:kt,ariaValueText:null,role:null}}),MZ=pm({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:SO,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:qp,acceptCharset:Kr,accessKey:Kr,action:null,allow:null,allowFullScreen:zn,allowPaymentRequest:zn,allowUserMedia:zn,alt:null,as:null,async:zn,autoCapitalize:null,autoComplete:Kr,autoFocus:zn,autoPlay:zn,capture:zn,charSet:null,checked:zn,cite:null,className:Kr,cols:kt,colSpan:null,content:null,contentEditable:Ui,controls:zn,controlsList:Kr,coords:kt|qp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:zn,defer:zn,dir:null,dirName:null,disabled:zn,download:vO,draggable:Ui,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:zn,formTarget:null,headers:Kr,height:kt,hidden:zn,high:kt,href:null,hrefLang:null,htmlFor:Kr,httpEquiv:Kr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:zn,itemId:null,itemProp:Kr,itemRef:Kr,itemScope:zn,itemType:Kr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:zn,low:kt,manifest:null,max:null,maxLength:kt,media:null,method:null,min:null,minLength:kt,multiple:zn,muted:zn,name:null,nonce:null,noModule:zn,noValidate:zn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:zn,optimum:kt,pattern:null,ping:Kr,placeholder:null,playsInline:zn,poster:null,preload:null,readOnly:zn,referrerPolicy:null,rel:Kr,required:zn,reversed:zn,rows:kt,rowSpan:kt,sandbox:Kr,scope:null,scoped:zn,seamless:zn,selected:zn,shape:null,size:kt,sizes:null,slot:null,span:kt,spellCheck:Ui,src:null,srcDoc:null,srcLang:null,srcSet:null,start:kt,step:null,style:null,tabIndex:kt,target:null,title:null,translate:null,type:null,typeMustMatch:zn,useMap:null,value:Ui,width:kt,wrap:null,align:null,aLink:null,archive:Kr,axis:null,background:null,bgColor:null,border:kt,borderColor:null,bottomMargin:kt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:zn,declare:zn,event:null,face:null,frame:null,frameBorder:null,hSpace:kt,leftMargin:kt,link:null,longDesc:null,lowSrc:null,marginHeight:kt,marginWidth:kt,noResize:zn,noHref:zn,noShade:zn,noWrap:zn,object:null,profile:null,prompt:null,rev:null,rightMargin:kt,rules:null,scheme:null,scrolling:Ui,standby:null,summary:null,text:null,topMargin:kt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:kt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:zn,disableRemotePlayback:zn,prefix:null,property:null,results:kt,security:null,unselectable:null}}),LZ=pm({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:wO,properties:{about:qa,accentHeight:kt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:kt,amplitude:kt,arabicForm:null,ascent:kt,attributeName:null,attributeType:null,azimuth:kt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:kt,by:null,calcMode:null,capHeight:kt,className:Kr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:kt,diffuseConstant:kt,direction:null,display:null,dur:null,divisor:kt,dominantBaseline:null,download:zn,dx:null,dy:null,edgeMode:null,editable:null,elevation:kt,enableBackground:null,end:null,event:null,exponent:kt,externalResourcesRequired:null,fill:null,fillOpacity:kt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qp,g2:qp,glyphName:qp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:kt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:kt,horizOriginX:kt,horizOriginY:kt,id:null,ideographic:kt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:kt,k:kt,k1:kt,k2:kt,k3:kt,k4:kt,kernelMatrix:qa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:kt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:kt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:kt,overlineThickness:kt,paintOrder:null,panose1:null,path:null,pathLength:kt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Kr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:kt,pointsAtY:kt,pointsAtZ:kt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qa,rev:qa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qa,requiredFeatures:qa,requiredFonts:qa,requiredFormats:qa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:kt,specularExponent:kt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:kt,strikethroughThickness:kt,string:null,stroke:null,strokeDashArray:qa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:kt,strokeOpacity:kt,strokeWidth:null,style:null,surfaceScale:kt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qa,tabIndex:kt,tableValues:null,target:null,targetX:kt,targetY:kt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qa,to:null,transform:null,u1:null,u2:null,underlinePosition:kt,underlineThickness:kt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:kt,values:null,vAlphabetic:kt,vMathematical:kt,vectorEffect:null,vHanging:kt,vIdeographic:kt,version:null,vertAdvY:kt,vertOriginX:kt,vertOriginY:kt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:kt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),OZ=/^data[-\w.:]+$/i,t4=/-[a-z]/g,FZ=/[A-Z]/g;function RZ(e,t){const n=kC(t);let r=t,a=Fs;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&OZ.test(t)){if(t.charAt(4)==="-"){const c=t.slice(5).replace(t4,zZ);r="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=t.slice(4);if(!t4.test(c)){let d=c.replace(FZ,DZ);d.charAt(0)!=="-"&&(d="-"+d),t="data"+d}}a=h3}return new a(r,t)}function DZ(e){return"-"+e.toLowerCase()}function zZ(e){return e.charAt(1).toUpperCase()}const n4={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},BZ=_O([bO,xO,CO,EO,MZ],"html"),$Z=_O([bO,xO,CO,EO,LZ],"svg");function NZ(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{c3(t,"element",(n,r,a)=>{const c=a;let d;if(e.allowedElements?d=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(d=e.disallowedElements.includes(n.tagName)),!d&&e.allowElement&&typeof r=="number"&&(d=!e.allowElement(n,r,c)),d&&typeof r=="number")return e.unwrapDisallowed&&n.children?c.children.splice(r,1,...n.children):c.children.splice(r,1),r})}}function UZ(e){var t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function jZ(e){return e.join(" ").trim()}function VZ(e,t){var n=t||{};return e[e.length-1]===""&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var f3={exports:{}},r4=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,qZ=/\n/g,GZ=/^\s*/,HZ=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,WZ=/^:\s*/,ZZ=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,KZ=/^[;\s]*/,XZ=/^\s+|\s+$/g,YZ=`
`,i4="/",o4="*",Df="",JZ="comment",QZ="declaration",eK=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a($){var N=$.match(qZ);N&&(n+=N.length);var Z=$.lastIndexOf(YZ);r=~Z?$.length-Z:r+$.length}function c(){var $={line:n,column:r};return function(N){return N.position=new d($),b(),N}}function d($){this.start=$,this.end={line:n,column:r},this.source=t.source}d.prototype.content=e;function l($){var N=new Error(t.source+":"+n+":"+r+": "+$);if(N.reason=$,N.filename=t.source,N.line=n,N.column=r,N.source=e,!t.silent)throw N}function x($){var N=$.exec(e);if(N){var Z=N[0];return a(Z),e=e.slice(Z.length),N}}function b(){x(GZ)}function E($){var N;for($=$||[];N=A();)N!==!1&&$.push(N);return $}function A(){var $=c();if(!(i4!=e.charAt(0)||o4!=e.charAt(1))){for(var N=2;Df!=e.charAt(N)&&(o4!=e.charAt(N)||i4!=e.charAt(N+1));)++N;if(N+=2,Df===e.charAt(N-1))return l("End of comment missing");var Z=e.slice(2,N-2);return r+=2,a(Z),e=e.slice(N),r+=2,$({type:JZ,comment:Z})}}function L(){var $=c(),N=x(HZ);if(N){if(A(),!x(WZ))return l("property missing ':'");var Z=x(ZZ),R=$({type:QZ,property:a4(N[0].replace(r4,Df)),value:Z?a4(Z[0].replace(r4,Df)):Df});return x(KZ),R}}function F(){var $=[];E($);for(var N;N=L();)N!==!1&&($.push(N),E($));return $}return b(),F()};function a4(e){return e?e.replace(XZ,Df):Df}var tK=eK;function kO(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,a=tK(e),c=typeof t=="function",d,l,x=0,b=a.length;x<b;x++)r=a[x],d=r.property,l=r.value,c?t(d,l,r):l&&(n||(n={}),n[d]=l);return n}f3.exports=kO;f3.exports.default=kO;var nK=f3.exports;const rK=ic(nK),TC={}.hasOwnProperty,iK=new Set(["table","thead","tbody","tfoot","tr"]);function AO(e,t){const n=[];let r=-1,a;for(;++r<t.children.length;)a=t.children[r],a.type==="element"?n.push(oK(e,a,r,t)):a.type==="text"?(t.type!=="element"||!iK.has(t.tagName)||!UZ(a))&&n.push(a.value):a.type==="raw"&&!e.options.skipHtml&&n.push(a.value);return n}function oK(e,t,n,r){const a=e.options,c=a.transformLinkUri===void 0?gG:a.transformLinkUri,d=e.schema,l=t.tagName,x={};let b=d,E;if(d.space==="html"&&l==="svg"&&(b=$Z,e.schema=b),t.properties)for(E in t.properties)TC.call(t.properties,E)&&sK(x,E,t.properties[E],e);(l==="ol"||l==="ul")&&e.listDepth++;const A=AO(e,t);(l==="ol"||l==="ul")&&e.listDepth--,e.schema=d;const L=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},F=a.components&&TC.call(a.components,l)?a.components[l]:l,$=typeof F=="string"||F===sn.Fragment;if(!cq.isValidElementType(F))throw new TypeError(`Component for name \`${l}\` not defined or is not renderable`);if(x.key=[l,L.start.line,L.start.column,n].join("-"),l==="a"&&a.linkTarget&&(x.target=typeof a.linkTarget=="function"?a.linkTarget(String(x.href||""),t.children,typeof x.title=="string"?x.title:null):a.linkTarget),l==="a"&&c&&(x.href=c(String(x.href||""),t.children,typeof x.title=="string"?x.title:null)),!$&&l==="code"&&r.type==="element"&&r.tagName!=="pre"&&(x.inline=!0),!$&&(l==="h1"||l==="h2"||l==="h3"||l==="h4"||l==="h5"||l==="h6")&&(x.level=Number.parseInt(l.charAt(1),10)),l==="img"&&a.transformImageUri&&(x.src=a.transformImageUri(String(x.src||""),String(x.alt||""),typeof x.title=="string"?x.title:null)),!$&&l==="li"&&r.type==="element"){const N=aK(t);x.checked=N&&N.properties?!!N.properties.checked:null,x.index=A2(r,t),x.ordered=r.tagName==="ol"}return!$&&(l==="ol"||l==="ul")&&(x.ordered=l==="ol",x.depth=e.listDepth),(l==="td"||l==="th")&&(x.align&&(x.style||(x.style={}),x.style.textAlign=x.align,delete x.align),$||(x.isHeader=l==="th")),!$&&l==="tr"&&r.type==="element"&&(x.isHeader=r.tagName==="thead"),a.sourcePos&&(x["data-sourcepos"]=cK(L)),!$&&a.rawSourcePos&&(x.sourcePosition=t.position),!$&&a.includeElementIndex&&(x.index=A2(r,t),x.siblingCount=A2(r)),$||(x.node=t),A.length>0?sn.createElement(F,x,A):sn.createElement(F,x)}function aK(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function A2(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function sK(e,t,n,r){const a=RZ(r.schema,t);let c=n;c==null||c!==c||(Array.isArray(c)&&(c=a.commaSeparated?VZ(c):jZ(c)),a.property==="style"&&typeof c=="string"&&(c=lK(c)),a.space&&a.property?e[TC.call(n4,a.property)?n4[a.property]:a.property]=c:a.attribute&&(e[a.attribute]=c))}function lK(e){const t={};try{rK(e,n)}catch{}return t;function n(r,a){const c=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[c.replace(/-([a-z])/g,uK)]=a}}function uK(e,t){return t.toUpperCase()}function cK(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const s4={}.hasOwnProperty,hK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Cv={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function TO(e){for(const c in Cv)if(s4.call(Cv,c)&&s4.call(e,c)){const d=Cv[c];console.warn(`[react-markdown] Warning: please ${d.to?`use \`${d.to}\` instead of`:"remove"} \`${c}\` (see <${hK}#${d.id}> for more info)`),delete Cv[c]}const t=MG().use(FW).use(e.remarkPlugins||[]).use(kZ,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(NZ,e),n=new HL;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let a=sn.createElement(sn.Fragment,{},AO({options:e,schema:BZ,listDepth:0},r));return e.className&&(a=sn.createElement("div",{className:e.className},a)),a}TO.propTypes={children:En.string,className:En.string,allowElement:En.func,allowedElements:En.arrayOf(En.string),disallowedElements:En.arrayOf(En.string),unwrapDisallowed:En.bool,remarkPlugins:En.arrayOf(En.oneOfType([En.object,En.func,En.arrayOf(En.oneOfType([En.bool,En.string,En.object,En.func,En.arrayOf(En.any)]))])),rehypePlugins:En.arrayOf(En.oneOfType([En.object,En.func,En.arrayOf(En.oneOfType([En.bool,En.string,En.object,En.func,En.arrayOf(En.any)]))])),sourcePos:En.bool,rawSourcePos:En.bool,skipHtml:En.bool,includeElementIndex:En.bool,transformLinkUri:En.oneOfType([En.func,En.bool]),linkTarget:En.oneOfType([En.func,En.string]),transformImageUri:En.func,components:En.object};function PC(){return PC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PC.apply(this,arguments)}var fK=["decorators"],dK=0;function pK(e,t,n){n===void 0&&(n="primitive"+ ++dK),t!=null||(t={set:function(E,A){return A},change:function(E,A){return A(E)}});var r=Jy(n)?{id:n}:n,a=r.decorators,c=a===void 0?[]:a,d=function(E,A){if(E==null)return{};var L,F,$={},N=Object.keys(E);for(F=0;F<N.length;F++)A.indexOf(L=N[F])>=0||($[L]=E[L]);return $}(r,fK);(c=c.slice()).unshift(function(E){return function(A,L){var F;return L.tracks==null&&(L.tracks=[],(F=L).state!=null||(F.state=e)),A.actions.forEach(function($){var N,Z=b.indexOf($.type);Z!=-1&&(L==L&&(L=Object.assign({},L)),L.state=(N=t)[l[Z]].apply(N,[L.state].concat($.payload)))}),L}});var l=Object.keys(t),x=b_(l.reduce(function(E,A){return E[A]=function(){return[].slice.call(arguments)},E},{}),i3,PC({decorators:c},d)),b=l.map(function(E){return x[E].type});return x}var mK=0;function gK(e,t){return e===void 0&&(e=!1),t===void 0&&(t="boolean"+ ++mK),pK(e,{toggle:function(n){return!n},setTrue:function(){return!0},setFalse:function(){return!1},change:function(n,r){return r(n)},set:function(n,r){return r}},t)}function IC(){return IC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IC.apply(this,arguments)}var yK=["decorators"],_K=0;function PO(e,t,n){n===void 0&&(n="primitive"+ ++_K),t!=null||(t={set:function(E,A){return A},change:function(E,A){return A(E)}});var r=Jy(n)?{id:n}:n,a=r.decorators,c=a===void 0?[]:a,d=function(E,A){if(E==null)return{};var L,F,$={},N=Object.keys(E);for(F=0;F<N.length;F++)A.indexOf(L=N[F])>=0||($[L]=E[L]);return $}(r,yK);(c=c.slice()).unshift(function(E){return function(A,L){var F;return L.tracks==null&&(L.tracks=[],(F=L).state!=null||(F.state=e)),A.actions.forEach(function($){var N,Z=b.indexOf($.type);Z!=-1&&(L==L&&(L=Object.assign({},L)),L.state=(N=t)[l[Z]].apply(N,[L.state].concat($.payload)))}),L}});var l=Object.keys(t),x=b_(l.reduce(function(E,A){return E[A]=function(){return[].slice.call(arguments)},E},{}),i3,IC({decorators:c},d)),b=l.map(function(E){return x[E].type});return x}const vK={APP_LOGIN:"app_login",ANALYTICS_PANEL:"analytics_panel",ADVANCED_ANALYTICS_PANEL:"advanced_analytics_panel",EVENTS_LIST:"events_list",FEED_SELECTOR:"feed_selector",EVENTS_LIST__FEED_SELECTOR:"events_list__feed_selector",EVENTS_LIST__BBOX_FILTER:"events_list__bbox_filter",MAP_LAYERS_PANEL:"map_layers_panel",SIDE_BAR:"side_bar",BIVARIATE_MANAGER:"bivariate_manager",CURRENT_EVENT:"current_event",FOCUSED_GEOMETRY_LAYER:"focused_geometry_layer",LAYERS_IN_AREA:"layers_in_area",MAP_RULER:"map_ruler",TOASTS:"toasts",BOUNDARY_SELECTOR:"boundary_selector",DRAW_TOOLS:"draw_tools",FOCUSED_GEOMETRY_EDITOR:"focused_geometry_editor",GEOMETRY_UPLOADER:"geometry_uploader",LEGEND_PANEL:"legend_panel",REPORTS:"reports",INTERACTIVE_MAP:"interactive_map",CURRENT_EPISODE:"current_episode",GEOCODER:"geocoder",EPISODE_LIST:"episode_list",COMMUNITIES:"communities",FEATURE_SETTINGS:"feature_settings",OSM_EDIT_LINK:"osm_edit_link",TOOLTIP:"tooltip",CREATE_LAYER:"create_layer",HEADER:"header",INTERCOM:"intercom",BIVARIATE_COLOR_MANAGER:"bivariate_color_manager",EPISODES_TIMELINE:"episodes_timeline",LOCATE_ME:"locate_me",USE_3RDPARTY_ANALYTICS:"use_3rdparty_analytics",LIVE_SENSOR:"live_sensor",MCDA:"mcda"},xK="METRICS";function bK(e,t){if(!globalThis.CustomEvent)return;const n=new CustomEvent(xK,{detail:{name:e,payload:t}});globalThis.dispatchEvent(n)}class wK{constructor(){an(this,"storage",new Map)}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}get length(){return this.storage.size}key(t){return this.storage.keys()[t]??null}}class IO{constructor(t){an(this,"storage");this.storageAvailable(t)?this.storage=globalThis[t]:(console.warn("Switching to in memory storage"),this.storage=new wK)}storageAvailable(t){try{const n=globalThis[t],r="__storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(n){console.warn(`${t} in not available.`),console.debug(n)}}setItem(t,n){return this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}get length(){return this.storage.length}clear(){return this.storage.clear()}key(t){return this.storage.key(t)}removeItem(t){return this.storage.removeItem(t)}}new IO("sessionStorage");const Oh=new IO("localStorage"),d3=!!Oh.getItem("KONTUR_DEBUG");Oh.getItem("KONTUR_METRICS_DEBUG");Oh.getItem("KONTUR_WARN");const l4=Oh.getItem("KONTUR_TRACE_TYPE"),SK=!!Oh.getItem("KONTUR_TRACE_PATCH");function CK(e){var n;const t=`\x1B[94m${Math.trunc(performance.now())}\x1B[m `;(n=e.actions.filter(r=>!r.type.startsWith("invalidate ")))==null||n.map(r=>{var a;if(((a=r.targets)==null?void 0:a.length)===1){const c=String(r.targets[0].id);if(r.type.endsWith(c)){const d=r.type.substring(0,r.type.length-c.length-1),l={_error:"\x1B[30;101m",_done:"\x1B[30;102m"}[d]??"\x1B[22;31m";console.warn(`${t}\x1B[1;32m${c} ${l}${d}\x1B[m`,r.payload,{"+":e.causes})}}else console.warn(`${t}\x1B[1;32m${r.type}\x1B[m`,r.payload,r.targets,{"+":e.causes})})}function EK(){return jL({onPatch:e=>{{SK&&CK(e);for(const t of e.actions)t.type.includes("invalidate")||(bK(t.type,t.payload),l4&&t.type.includes(l4)&&console.trace("TRACE:",t.type,e))}}})}const MO=EK(),Tb=e=>({store:MO,...typeof e=="string"?{id:e}:e}),Qr=(e,t,n)=>b_(e,t,Tb(n)),LO=(e,t)=>gK(e,Tb(t));let OO=0;function FO(e=new Set,t=`set${++OO}`){return PO(e,{set:(n,r)=>n.has(r)?n:new Set(n).add(r),delete:(n,r)=>{const a=n=new Set(n);return a.delete(r)?a:n},clear:()=>new Set,change:(n,r)=>r(new Set(n))},Tb(t))}function mm(e=new Map,t=`map${++OO}`){return PO(e,{set:(n,r,a)=>n.get(r)===a?n:new Map(n).set(r,a),delete:(n,r)=>{const a=n=new Map(n);return a.delete(r)?a:n},clear:()=>new Map,change:(n,r)=>r(new Map(n))},Tb(t))}const e_=Qr({setCurrentTooltip:e=>e,resetCurrentTooltip:()=>null,turnOffById:e=>e},({onAction:e},t=null)=>(e("setCurrentTooltip",n=>t=n),e("resetCurrentTooltip",()=>t=null),e("turnOffById",n=>{(t==null?void 0:t.initiatorId)===n&&(t=null)}),t),"[Shared state] currentTooltipAtom");function kK(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function AK(e,t){e.classList?e.classList.add(t):kK(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function u4(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function TK(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=u4(e.className,t):e.setAttribute("class",u4(e.className&&e.className.baseVal||"",t))}const c4={disabled:!1},RO=sn.createContext(null);var DO=function(t){return t.scrollTop},ny="unmounted",Of="exited",Ff="entering",yp="entered",MC="exiting",ac=function(e){Is(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var d=a,l=d&&!d.isMounting?r.enter:r.appear,x;return c.appearStatus=null,r.in?l?(x=Of,c.appearStatus=Ff):x=yp:r.unmountOnExit||r.mountOnEnter?x=ny:x=Of,c.state={status:x},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var d=a.in;return d&&c.status===ny?{status:Of}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var c=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==Ff&&d!==yp&&(c=Ff):(d===Ff||d===yp)&&(c=MC)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,c,d,l;return c=d=l=a,a!=null&&typeof a!="number"&&(c=a.exit,d=a.enter,l=a.appear!==void 0?a.appear:d),{exit:c,enter:d,appear:l}},n.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===Ff){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:sv.findDOMNode(this);d&&DO(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Of&&this.setState({status:ny})},n.performEnter=function(a){var c=this,d=this.props.enter,l=this.context?this.context.isMounting:a,x=this.props.nodeRef?[l]:[sv.findDOMNode(this),l],b=x[0],E=x[1],A=this.getTimeouts(),L=l?A.appear:A.enter;if(!a&&!d||c4.disabled){this.safeSetState({status:yp},function(){c.props.onEntered(b)});return}this.props.onEnter(b,E),this.safeSetState({status:Ff},function(){c.props.onEntering(b,E),c.onTransitionEnd(L,function(){c.safeSetState({status:yp},function(){c.props.onEntered(b,E)})})})},n.performExit=function(){var a=this,c=this.props.exit,d=this.getTimeouts(),l=this.props.nodeRef?void 0:sv.findDOMNode(this);if(!c||c4.disabled){this.safeSetState({status:Of},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:MC},function(){a.props.onExiting(l),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:Of},function(){a.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},n.setNextCallback=function(a){var c=this,d=!0;return this.nextCallback=function(l){d&&(d=!1,c.nextCallback=null,a(l))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(a,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:sv.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!d||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],b=x[0],E=x[1];this.props.addEndListener(b,E)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===ny)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var l=ad(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sn.createElement(RO.Provider,{value:null},typeof d=="function"?d(a,l):sn.cloneElement(sn.Children.only(d),l))},t}(sn.Component);ac.contextType=RO;ac.propTypes={};function up(){}ac.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:up,onEntering:up,onEntered:up,onExit:up,onExiting:up,onExited:up};ac.UNMOUNTED=ny;ac.EXITED=Of;ac.ENTERING=Ff;ac.ENTERED=yp;ac.EXITING=MC;const PK=ac;var IK=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return AK(t,r)})},T2=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return TK(t,r)})},p3=function(e){Is(t,e);function t(){for(var r,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=e.call.apply(e,[this].concat(c))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(l,x){var b=r.resolveArguments(l,x),E=b[0],A=b[1];r.removeClasses(E,"exit"),r.addClass(E,A?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(l,x)},r.onEntering=function(l,x){var b=r.resolveArguments(l,x),E=b[0],A=b[1],L=A?"appear":"enter";r.addClass(E,L,"active"),r.props.onEntering&&r.props.onEntering(l,x)},r.onEntered=function(l,x){var b=r.resolveArguments(l,x),E=b[0],A=b[1],L=A?"appear":"enter";r.removeClasses(E,L),r.addClass(E,L,"done"),r.props.onEntered&&r.props.onEntered(l,x)},r.onExit=function(l){var x=r.resolveArguments(l),b=x[0];r.removeClasses(b,"appear"),r.removeClasses(b,"enter"),r.addClass(b,"exit","base"),r.props.onExit&&r.props.onExit(l)},r.onExiting=function(l){var x=r.resolveArguments(l),b=x[0];r.addClass(b,"exit","active"),r.props.onExiting&&r.props.onExiting(l)},r.onExited=function(l){var x=r.resolveArguments(l),b=x[0];r.removeClasses(b,"exit"),r.addClass(b,"exit","done"),r.props.onExited&&r.props.onExited(l)},r.resolveArguments=function(l,x){return r.props.nodeRef?[r.props.nodeRef.current,l]:[l,x]},r.getClassNames=function(l){var x=r.props.classNames,b=typeof x=="string",E=b&&x?x+"-":"",A=b?""+E+l:x[l],L=b?A+"-active":x[l+"Active"],F=b?A+"-done":x[l+"Done"];return{baseClassName:A,activeClassName:L,doneClassName:F}},r}var n=t.prototype;return n.addClass=function(a,c,d){var l=this.getClassNames(c)[d+"ClassName"],x=this.getClassNames("enter"),b=x.doneClassName;c==="appear"&&d==="done"&&b&&(l+=" "+b),d==="active"&&a&&DO(a),l&&(this.appliedClasses[c][d]=l,IK(a,l))},n.removeClasses=function(a,c){var d=this.appliedClasses[c],l=d.base,x=d.active,b=d.done;this.appliedClasses[c]={},l&&T2(a,l),x&&T2(a,x),b&&T2(a,b)},n.render=function(){var a=this.props;a.classNames;var c=ad(a,["classNames"]);return sn.createElement(PK,Io({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(sn.Component);p3.defaultProps={classNames:""};p3.propTypes={};const MK=p3;function Th(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}const LK="_fadeEnter_1fjeq_1",OK="_fadeEnterActive_1fjeq_5",FK="_fadeExit_1fjeq_10",RK="_fadeExitActive_1fjeq_14",Ev={fadeEnter:LK,fadeEnterActive:OK,fadeExit:FK,fadeExitActive:RK},DK={enter:Ev.fadeEnter,enterActive:Ev.fadeEnterActive,exit:Ev.fadeExit,exitActive:Ev.fadeExitActive},zK=({children:e,...t})=>{const n=mt.useRef(null);return Xe(MK,{...t,nodeRef:n,children:e(n)})};function BK(e){if(!e)return"";let t=e;const n=/(.?.?https|.?.?http)(:\/\/)([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/gm,r=e.matchAll(n);let a=0;return[...r].forEach(c=>{const[d,l,,x,b]=c,E=c.index??0,A=d.length;if(d.startsWith("](")||d.indexOf("[http")>-1)return;const L=d.indexOf("http"),F=d.substring(L),$=d.substring(0,L),N=x.replace("www.",""),Z=`${$}[${N}${b??""}](${F})`,R=$K(t)(E+a,A,Z);a+=Z.length-A,t=R}),t}function $K(e){return function(t,n,r){return t<0&&(t+=e.length,t<0&&(t=0)),e.slice(0,t)+(r||"")+e.slice(t+n)}}const zO=mt.memo(function(e){return Xe("a",{href:e.href,target:"_blank",rel:"noreferrer",onClick:NK,children:e.children})});function NK(e){e.stopPropagation()}zO.displayName="LinkRenderer";const LC=kL(),UK=Qr({_set:e=>e},({onAction:e,onInit:t,schedule:n,create:r},a=LC.location)=>(t(()=>{n(c=>{LC.listen(d=>{c(r("_set",d))})})}),e("_set",c=>a=c),a),"currentLocationAtom"),jK=Qr({currentLocationAtom:UK},({onChange:e,schedule:t,getUnlistedState:n})=>{e("currentLocationAtom",(r,a)=>{const c=n(e_);r.pathname!==(a==null?void 0:a.pathname)&&(c!=null&&c.position)&&t(d=>{d(e_.resetCurrentTooltip())})})},"closeOnLocationChangeAtom"),VK="_markdown_mj6ia_1",qK={markdown:VK};function BO(){const[e,{resetCurrentTooltip:t}]=v5(e_);v5(jK);const n=mt.useCallback(a=>{var c;t(),(c=e==null?void 0:e.onClose)==null||c.call(e,a,t)},[t,e]),r=mt.useCallback(a=>{var c;(c=e==null?void 0:e.onOuterClick)==null||c.call(e,a,t)},[t,e]);return Xe(zK,{in:!!e,timeout:300,classNames:DK,children:a=>Xe(qx,{children:e&&Xe(jV,{transitionRef:a,position:e.position,hoverBehavior:e.hoverBehavior,getPlacement:e.position.predefinedPosition,classes:e.popupClasses,onClose:n,onOuterClick:r,children:typeof e.popup=="string"?Xe(TO,{components:{a:zO},className:qK.markdown,children:BK(e.popup)}):e.popup})})})}function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function Rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GK(e,t){if(_l(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_l(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $O(e){var t=GK(e,"string");return _l(t)==="symbol"?t:String(t)}function h4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$O(r.key),r)}}function Ds(e,t,n){return t&&h4(e.prototype,t),n&&h4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V1(e,t)}function C_(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Th(e)}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},su(e)}function sc(e,t,n){return t=$O(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HK(e){if(Array.isArray(e))return e}function WK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZK(e,t){if(e){if(typeof e=="string")return f4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f4(e,t)}}function KK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XK(e){return HK(e)||WK(e)||ZK(e)||KK()}function d4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function p4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var YK={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,n){console&&console[t]&&console[t].apply(console,n)}},JK=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rs(this,e),this.init(t,n)}return Ds(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||YK,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,r,a,c){return c&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(a).concat(this.prefix," ").concat(n[0])),this.logger[r](n))}},{key:"create",value:function(n){return new e(this.logger,p4(p4({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new e(this.logger,n)}}]),e}(),tu=new JK,Fh=function(){function e(){Rs(this,e),this.observers={}}return Ds(e,[{key:"on",value:function(n,r){var a=this;return n.split(" ").forEach(function(c){a.observers[c]=a.observers[c]||[],a.observers[c].push(r)}),this}},{key:"off",value:function(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(a){return a!==r})}}},{key:"emit",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];if(this.observers[n]){var d=[].concat(this.observers[n]);d.forEach(function(x){x.apply(void 0,a)})}if(this.observers["*"]){var l=[].concat(this.observers["*"]);l.forEach(function(x){x.apply(x,[n].concat(a))})}}}]),e}();function jg(){var e,t,n=new Promise(function(r,a){e=r,t=a});return n.resolve=e,n.reject=t,n}function m4(e){return e==null?"":""+e}function QK(e,t,n){e.forEach(function(r){t[r]&&(n[r]=t[r])})}function m3(e,t,n){function r(l){return l&&l.indexOf("###")>-1?l.replace(/###/g,"."):l}function a(){return!e||typeof e=="string"}for(var c=typeof t!="string"?[].concat(t):t.split(".");c.length>1;){if(a())return{};var d=r(c.shift());!e[d]&&n&&(e[d]=new n),Object.prototype.hasOwnProperty.call(e,d)?e=e[d]:e={}}return a()?{}:{obj:e,k:r(c.shift())}}function g4(e,t,n){var r=m3(e,t,Object),a=r.obj,c=r.k;a[c]=n}function eX(e,t,n,r){var a=m3(e,t,Object),c=a.obj,d=a.k;c[d]=c[d]||[],r&&(c[d]=c[d].concat(n)),r||c[d].push(n)}function W1(e,t){var n=m3(e,t),r=n.obj,a=n.k;if(r)return r[a]}function y4(e,t,n){var r=W1(e,n);return r!==void 0?r:W1(t,n)}function NO(e,t,n){for(var r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):NO(e[r],t[r],n):e[r]=t[r]);return e}function cp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var tX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function nX(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return tX[t]}):e}var Ib=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,rX=[" ",",","?","!",";"];function iX(e,t,n){t=t||"",n=n||"";var r=rX.filter(function(l){return t.indexOf(l)<0&&n.indexOf(l)<0});if(r.length===0)return!0;var a=new RegExp("(".concat(r.map(function(l){return l==="?"?"\\?":l}).join("|"),")")),c=!a.test(e);if(!c){var d=e.indexOf(n);d>0&&!a.test(e.substring(0,d))&&(c=!0)}return c}function _4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oX(e){var t=aX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function aX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UO(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),a=e,c=0;c<r.length;++c){if(!a||typeof a[r[c]]=="string"&&c+1<r.length)return;if(a[r[c]]===void 0){for(var d=2,l=r.slice(c,c+d).join(n),x=a[l];x===void 0&&r.length>c+d;)d++,l=r.slice(c,c+d).join(n),x=a[l];if(x===void 0)return;if(x===null)return null;if(t.endsWith(l)){if(typeof x=="string")return x;if(l&&typeof x[l]=="string")return x[l]}var b=r.slice(c+d).join(n);return b?UO(x,b,n):void 0}a=a[r[c]]}return a}}var sX=function(e){Pb(n,e);var t=oX(n);function n(r){var a,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Rs(this,n),a=t.call(this),Ib&&Fh.call(Th(a)),a.data=r||{},a.options=c,a.options.keySeparator===void 0&&(a.options.keySeparator="."),a.options.ignoreJSONStructure===void 0&&(a.options.ignoreJSONStructure=!0),a}return Ds(n,[{key:"addNamespaces",value:function(a){this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}},{key:"removeNamespaces",value:function(a){var c=this.options.ns.indexOf(a);c>-1&&this.options.ns.splice(c,1)}},{key:"getResource",value:function(a,c,d){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},x=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,b=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure,E=[a,c];d&&typeof d!="string"&&(E=E.concat(d)),d&&typeof d=="string"&&(E=E.concat(x?d.split(x):d)),a.indexOf(".")>-1&&(E=a.split("."));var A=W1(this.data,E);return A||!b||typeof d!="string"?A:UO(this.data&&this.data[a]&&this.data[a][c],d,x)}},{key:"addResource",value:function(a,c,d,l){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},b=this.options.keySeparator;b===void 0&&(b=".");var E=[a,c];d&&(E=E.concat(b?d.split(b):d)),a.indexOf(".")>-1&&(E=a.split("."),l=c,c=E[1]),this.addNamespaces(c),g4(this.data,E,l),x.silent||this.emit("added",a,c,d,l)}},{key:"addResources",value:function(a,c,d){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var x in d)(typeof d[x]=="string"||Object.prototype.toString.apply(d[x])==="[object Array]")&&this.addResource(a,c,x,d[x],{silent:!0});l.silent||this.emit("added",a,c,d)}},{key:"addResourceBundle",value:function(a,c,d,l,x){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},E=[a,c];a.indexOf(".")>-1&&(E=a.split("."),l=d,d=c,c=E[1]),this.addNamespaces(c);var A=W1(this.data,E)||{};l?NO(A,d,x):A=kv(kv({},A),d),g4(this.data,E,A),b.silent||this.emit("added",a,c,d)}},{key:"removeResourceBundle",value:function(a,c){this.hasResourceBundle(a,c)&&delete this.data[a][c],this.removeNamespaces(c),this.emit("removed",a,c)}},{key:"hasResourceBundle",value:function(a,c){return this.getResource(a,c)!==void 0}},{key:"getResourceBundle",value:function(a,c){return c||(c=this.options.defaultNS),this.options.compatibilityAPI==="v1"?kv(kv({},{}),this.getResource(a,c)):this.getResource(a,c)}},{key:"getDataByLanguage",value:function(a){return this.data[a]}},{key:"hasLanguageSomeTranslations",value:function(a){var c=this.getDataByLanguage(a),d=c&&Object.keys(c)||[];return!!d.find(function(l){return c[l]&&Object.keys(c[l]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(Fh),jO={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,n,r,a,c){var d=this;return t.forEach(function(l){d.processors[l]&&(n=d.processors[l].process(n,r,a,c))}),n}};function v4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lX(e){var t=uX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function uX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x4={},b4=function(e){Pb(n,e);var t=lX(n);function n(r){var a,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Rs(this,n),a=t.call(this),Ib&&Fh.call(Th(a)),QK(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,Th(a)),a.options=c,a.options.keySeparator===void 0&&(a.options.keySeparator="."),a.logger=tu.create("translator"),a}return Ds(n,[{key:"changeLanguage",value:function(a){a&&(this.language=a)}},{key:"exists",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(a==null)return!1;var d=this.resolve(a,c);return d&&d.res!==void 0}},{key:"extractFromKey",value:function(a,c){var d=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");var l=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,x=c.ns||this.options.defaultNS||[],b=d&&a.indexOf(d)>-1,E=!this.options.userDefinedKeySeparator&&!c.keySeparator&&!this.options.userDefinedNsSeparator&&!c.nsSeparator&&!iX(a,d,l);if(b&&!E){var A=a.match(this.interpolator.nestingRegexp);if(A&&A.length>0)return{key:a,namespaces:x};var L=a.split(d);(d!==l||d===l&&this.options.ns.indexOf(L[0])>-1)&&(x=L.shift()),a=L.join(l)}return typeof x=="string"&&(x=[x]),{key:a,namespaces:x}}},{key:"translate",value:function(a,c,d){var l=this;if(_l(c)!=="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),c||(c={}),a==null)return"";Array.isArray(a)||(a=[String(a)]);var x=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,b=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,E=this.extractFromKey(a[a.length-1],c),A=E.key,L=E.namespaces,F=L[L.length-1],$=c.lng||this.language,N=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if($&&$.toLowerCase()==="cimode"){if(N){var Z=c.nsSeparator||this.options.nsSeparator;return x?(R.res="".concat(F).concat(Z).concat(A),R):"".concat(F).concat(Z).concat(A)}return x?(R.res=A,R):A}var R=this.resolve(a,c),q=R&&R.res,G=R&&R.usedKey||A,Q=R&&R.exactUsedKey||A,se=Object.prototype.toString.apply(q),ee=["[object Number]","[object Function]","[object RegExp]"],oe=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,xe=!this.i18nFormat||this.i18nFormat.handleAsObject,Oe=typeof q!="string"&&typeof q!="boolean"&&typeof q!="number";if(xe&&q&&Oe&&ee.indexOf(se)<0&&!(typeof oe=="string"&&se==="[object Array]")){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var Le=this.options.returnedObjectHandler?this.options.returnedObjectHandler(G,q,sa(sa({},c),{},{ns:L})):"key '".concat(A," (").concat(this.language,")' returned an object instead of string.");return x?(R.res=Le,R):Le}if(b){var qe=se==="[object Array]",$e=qe?[]:{},nt=qe?Q:G;for(var pt in q)if(Object.prototype.hasOwnProperty.call(q,pt)){var At="".concat(nt).concat(b).concat(pt);$e[pt]=this.translate(At,sa(sa({},c),{joinArrays:!1,ns:L})),$e[pt]===At&&($e[pt]=q[pt])}q=$e}}else if(xe&&typeof oe=="string"&&se==="[object Array]")q=q.join(oe),q&&(q=this.extendTranslation(q,a,c,d));else{var zt=!1,Vt=!1,Ve=c.count!==void 0&&typeof c.count!="string",_e=n.hasDefaultValue(c),we=Ve?this.pluralResolver.getSuffix($,c.count,c):"",K=c["defaultValue".concat(we)]||c.defaultValue;!this.isValidLookup(q)&&_e&&(zt=!0,q=K),this.isValidLookup(q)||(Vt=!0,q=A);var ae=c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,lt=ae&&Vt?void 0:q,gt=_e&&K!==q&&this.options.updateMissing;if(Vt||zt||gt){if(this.logger.log(gt?"updateKey":"missingKey",$,F,A,gt?K:q),b){var Gt=this.resolve(A,sa(sa({},c),{},{keySeparator:!1}));Gt&&Gt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Dt=[],Qt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Qt&&Qt[0])for(var un=0;un<Qt.length;un++)Dt.push(Qt[un]);else this.options.saveMissingTo==="all"?Dt=this.languageUtils.toResolveHierarchy(c.lng||this.language):Dt.push(c.lng||this.language);var Xn=function(Bn,ei,Je){var yr=_e&&Je!==q?Je:lt;l.options.missingKeyHandler?l.options.missingKeyHandler(Bn,F,ei,yr,gt,c):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(Bn,F,ei,yr,gt,c),l.emit("missingKey",Bn,F,ei,q)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Ve?Dt.forEach(function(Qn){l.pluralResolver.getSuffixes(Qn,c).forEach(function(Bn){Xn([Qn],A+Bn,c["defaultValue".concat(Bn)]||K)})}):Xn(Dt,A,K))}q=this.extendTranslation(q,a,c,R,d),Vt&&q===A&&this.options.appendNamespaceToMissingKey&&(q="".concat(F,":").concat(A)),(Vt||zt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?q=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(F,":").concat(A):A,zt?q:void 0):q=this.options.parseMissingKeyHandler(q))}return x?(R.res=q,R):q}},{key:"extendTranslation",value:function(a,c,d,l,x){var b=this;if(this.i18nFormat&&this.i18nFormat.parse)a=this.i18nFormat.parse(a,sa(sa({},this.options.interpolation.defaultVariables),d),l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!d.skipInterpolation){d.interpolation&&this.interpolator.init(sa(sa({},d),{interpolation:sa(sa({},this.options.interpolation),d.interpolation)}));var E=typeof a=="string"&&(d&&d.interpolation&&d.interpolation.skipOnVariables!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),A;if(E){var L=a.match(this.interpolator.nestingRegexp);A=L&&L.length}var F=d.replace&&typeof d.replace!="string"?d.replace:d;if(this.options.interpolation.defaultVariables&&(F=sa(sa({},this.options.interpolation.defaultVariables),F)),a=this.interpolator.interpolate(a,F,d.lng||this.language,d),E){var $=a.match(this.interpolator.nestingRegexp),N=$&&$.length;A<N&&(d.nest=!1)}d.nest!==!1&&(a=this.interpolator.nest(a,function(){for(var q=arguments.length,G=new Array(q),Q=0;Q<q;Q++)G[Q]=arguments[Q];return x&&x[0]===G[0]&&!d.context?(b.logger.warn("It seems you are nesting recursively key: ".concat(G[0]," in key: ").concat(c[0])),null):b.translate.apply(b,G.concat([c]))},d)),d.interpolation&&this.interpolator.reset()}var Z=d.postProcess||this.options.postProcess,R=typeof Z=="string"?[Z]:Z;return a!=null&&R&&R.length&&d.applyPostProcessor!==!1&&(a=jO.handle(R,a,c,this.options&&this.options.postProcessPassResolved?sa({i18nResolved:l},d):d,this)),a}},{key:"resolve",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,x,b,E,A;return typeof a=="string"&&(a=[a]),a.forEach(function(L){if(!c.isValidLookup(l)){var F=c.extractFromKey(L,d),$=F.key;x=$;var N=F.namespaces;c.options.fallbackNS&&(N=N.concat(c.options.fallbackNS));var Z=d.count!==void 0&&typeof d.count!="string",R=Z&&!d.ordinal&&d.count===0&&c.pluralResolver.shouldUseIntlApi(),q=d.context!==void 0&&(typeof d.context=="string"||typeof d.context=="number")&&d.context!=="",G=d.lngs?d.lngs:c.languageUtils.toResolveHierarchy(d.lng||c.language,d.fallbackLng);N.forEach(function(Q){c.isValidLookup(l)||(A=Q,!x4["".concat(G[0],"-").concat(Q)]&&c.utils&&c.utils.hasLoadedNamespace&&!c.utils.hasLoadedNamespace(A)&&(x4["".concat(G[0],"-").concat(Q)]=!0,c.logger.warn('key "'.concat(x,'" for languages "').concat(G.join(", "),`" won't get resolved as namespace "`).concat(A,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),G.forEach(function(se){if(!c.isValidLookup(l)){E=se;var ee=[$];if(c.i18nFormat&&c.i18nFormat.addLookupKeys)c.i18nFormat.addLookupKeys(ee,$,se,Q,d);else{var oe;Z&&(oe=c.pluralResolver.getSuffix(se,d.count,d));var xe="".concat(c.options.pluralSeparator,"zero");if(Z&&(ee.push($+oe),R&&ee.push($+xe)),q){var Oe="".concat($).concat(c.options.contextSeparator).concat(d.context);ee.push(Oe),Z&&(ee.push(Oe+oe),R&&ee.push(Oe+xe))}}for(var Le;Le=ee.pop();)c.isValidLookup(l)||(b=Le,l=c.getResource(se,Q,Le,d))}}))})}}),{res:l,usedKey:x,exactUsedKey:b,usedLng:E,usedNS:A}}},{key:"isValidLookup",value:function(a){return a!==void 0&&!(!this.options.returnNull&&a===null)&&!(!this.options.returnEmptyString&&a==="")}},{key:"getResource",value:function(a,c,d){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(a,c,d,l):this.resourceStore.getResource(a,c,d,l)}}],[{key:"hasDefaultValue",value:function(a){var c="defaultValue";for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&c===d.substring(0,c.length)&&a[d]!==void 0)return!0;return!1}}]),n}(Fh);function P2(e){return e.charAt(0).toUpperCase()+e.slice(1)}var w4=function(){function e(t){Rs(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=tu.create("languageUtils")}return Ds(e,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var r=n.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],a=n.split("-");return this.options.lowerCaseLng?a=a.map(function(c){return c.toLowerCase()}):a.length===2?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),r.indexOf(a[1].toLowerCase())>-1&&(a[1]=P2(a[1].toLowerCase()))):a.length===3&&(a[0]=a[0].toLowerCase(),a[1].length===2&&(a[1]=a[1].toUpperCase()),a[0]!=="sgn"&&a[2].length===2&&(a[2]=a[2].toUpperCase()),r.indexOf(a[1].toLowerCase())>-1&&(a[1]=P2(a[1].toLowerCase())),r.indexOf(a[2].toLowerCase())>-1&&(a[2]=P2(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var r=this;if(!n)return null;var a;return n.forEach(function(c){if(!a){var d=r.formatLanguageCode(c);(!r.options.supportedLngs||r.isSupportedCode(d))&&(a=d)}}),!a&&this.options.supportedLngs&&n.forEach(function(c){if(!a){var d=r.getLanguagePartFromCode(c);if(r.isSupportedCode(d))return a=d;a=r.options.supportedLngs.find(function(l){if(l.indexOf(d)===0)return l})}}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}},{key:"getFallbackCodes",value:function(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];var a=n[r];return a||(a=n[this.getScriptPartFromCode(r)]),a||(a=n[this.formatLanguageCode(r)]),a||(a=n[this.getLanguagePartFromCode(r)]),a||(a=n.default),a||[]}},{key:"toResolveHierarchy",value:function(n,r){var a=this,c=this.getFallbackCodes(r||this.options.fallbackLng||[],n),d=[],l=function(b){b&&(a.isSupportedCode(b)?d.push(b):a.logger.warn("rejecting language code not found in supportedLngs: ".concat(b)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(n))):typeof n=="string"&&l(this.formatLanguageCode(n)),c.forEach(function(x){d.indexOf(x)<0&&l(a.formatLanguageCode(x))}),d}}]),e}(),cX=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],hX={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}},fX=["v1","v2","v3"],S4={zero:0,one:1,two:2,few:3,many:4,other:5};function dX(){var e={};return cX.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:hX[t.fc]}})}),e}var pX=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rs(this,e),this.languageUtils=t,this.options=n,this.logger=tu.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=dX()}return Ds(e,[{key:"addRule",value:function(n,r){this.rules[n]=r}},{key:"getRule",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(n,r);return this.shouldUseIntlApi()?a&&a.resolvedOptions().pluralCategories.length>1:a&&a.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,a).map(function(c){return"".concat(r).concat(c)})}},{key:"getSuffixes",value:function(n){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.getRule(n,a);return c?this.shouldUseIntlApi()?c.resolvedOptions().pluralCategories.sort(function(d,l){return S4[d]-S4[l]}).map(function(d){return"".concat(r.options.prepend).concat(d)}):c.numbers.map(function(d){return r.getSuffix(n,d,a)}):[]}},{key:"getSuffix",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=this.getRule(n,a);return c?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(c.select(r)):this.getSuffixRetroCompatible(c,r):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,r){var a=this,c=n.noAbs?n.plurals(r):n.plurals(Math.abs(r)),d=n.numbers[c];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(d===2?d="plural":d===1&&(d=""));var l=function(){return a.options.prepend&&d.toString()?a.options.prepend+d.toString():d.toString()};return this.options.compatibilityJSON==="v1"?d===1?"":typeof d=="number"?"_plural_".concat(d.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?l():this.options.prepend&&c.toString()?this.options.prepend+c.toString():c.toString()}},{key:"shouldUseIntlApi",value:function(){return!fX.includes(this.options.compatibilityJSON)}}]),e}();function C4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var mX=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rs(this,e),this.logger=tu.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(n){return n},this.init(t)}return Ds(e,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var r=n.interpolation;this.escape=r.escape!==void 0?r.escape:nX,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?cp(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?cp(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?cp(r.nestingPrefix):r.nestingPrefixEscaped||cp("$t("),this.nestingSuffix=r.nestingSuffix?cp(r.nestingSuffix):r.nestingSuffixEscaped||cp(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var a="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(a,"g")}},{key:"interpolate",value:function(n,r,a,c){var d=this,l,x,b,E=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function A(Z){return Z.replace(/\$/g,"$$$$")}var L=function(R){if(R.indexOf(d.formatSeparator)<0){var q=y4(r,E,R);return d.alwaysFormat?d.format(q,void 0,a,cl(cl(cl({},c),r),{},{interpolationkey:R})):q}var G=R.split(d.formatSeparator),Q=G.shift().trim(),se=G.join(d.formatSeparator).trim();return d.format(y4(r,E,Q),se,a,cl(cl(cl({},c),r),{},{interpolationkey:Q}))};this.resetRegExp();var F=c&&c.missingInterpolationHandler||this.options.missingInterpolationHandler,$=c&&c.interpolation&&c.interpolation.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,N=[{regex:this.regexpUnescape,safeValue:function(R){return A(R)}},{regex:this.regexp,safeValue:function(R){return d.escapeValue?A(d.escape(R)):A(R)}}];return N.forEach(function(Z){for(b=0;l=Z.regex.exec(n);){var R=l[1].trim();if(x=L(R),x===void 0)if(typeof F=="function"){var q=F(n,l,c);x=typeof q=="string"?q:""}else if(c&&c.hasOwnProperty(R))x="";else if($){x=l[0];continue}else d.logger.warn("missed to pass in variable ".concat(R," for interpolating ").concat(n)),x="";else typeof x!="string"&&!d.useRawValueToEscape&&(x=m4(x));var G=Z.safeValue(x);if(n=n.replace(l[0],G),$?(Z.regex.lastIndex+=x.length,Z.regex.lastIndex-=l[0].length):Z.regex.lastIndex=0,b++,b>=d.maxReplaces)break}}),n}},{key:"nest",value:function(n,r){var a=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d,l,x;function b(F,$){var N=this.nestingOptionsSeparator;if(F.indexOf(N)<0)return F;var Z=F.split(new RegExp("".concat(N,"[ ]*{"))),R="{".concat(Z[1]);F=Z[0],R=this.interpolate(R,x);var q=R.match(/'/g),G=R.match(/"/g);(q&&q.length%2===0&&!G||G.length%2!==0)&&(R=R.replace(/'/g,'"'));try{x=JSON.parse(R),$&&(x=cl(cl({},$),x))}catch(Q){return this.logger.warn("failed parsing options string in nesting for key ".concat(F),Q),"".concat(F).concat(N).concat(R)}return delete x.defaultValue,F}for(;d=this.nestingRegexp.exec(n);){var E=[];x=cl({},c),x=x.replace&&typeof x.replace!="string"?x.replace:x,x.applyPostProcessor=!1,delete x.defaultValue;var A=!1;if(d[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(d[1])){var L=d[1].split(this.formatSeparator).map(function(F){return F.trim()});d[1]=L.shift(),E=L,A=!0}if(l=r(b.call(this,d[1].trim(),x),x),l&&d[0]===n&&typeof l!="string")return l;typeof l!="string"&&(l=m4(l)),l||(this.logger.warn("missed to resolve ".concat(d[1]," for nesting ").concat(n)),l=""),A&&(l=E.reduce(function(F,$){return a.format(F,$,c.lng,cl(cl({},c),{},{interpolationkey:d[1].trim()}))},l.trim())),n=n.replace(d[0],l),this.regexp.lastIndex=0}return n}}]),e}();function E4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ah(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gX(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var a=r[1].substring(0,r[1].length-1);if(t==="currency"&&a.indexOf(":")<0)n.currency||(n.currency=a.trim());else if(t==="relativetime"&&a.indexOf(":")<0)n.range||(n.range=a.trim());else{var c=a.split(";");c.forEach(function(d){if(d){var l=d.split(":"),x=XK(l),b=x[0],E=x.slice(1),A=E.join(":").trim().replace(/^'+|'+$/g,"");n[b.trim()]||(n[b.trim()]=A),A==="false"&&(n[b.trim()]=!1),A==="true"&&(n[b.trim()]=!0),isNaN(A)||(n[b.trim()]=parseInt(A,10))}})}}return{formatName:t,formatOptions:n}}function hp(e){var t={};return function(r,a,c){var d=a+JSON.stringify(c),l=t[d];return l||(l=e(a,c),t[d]=l),l(r)}}var yX=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rs(this,e),this.logger=tu.create("formatter"),this.options=t,this.formats={number:hp(function(n,r){var a=new Intl.NumberFormat(n,r);return function(c){return a.format(c)}}),currency:hp(function(n,r){var a=new Intl.NumberFormat(n,ah(ah({},r),{},{style:"currency"}));return function(c){return a.format(c)}}),datetime:hp(function(n,r){var a=new Intl.DateTimeFormat(n,ah({},r));return function(c){return a.format(c)}}),relativetime:hp(function(n,r){var a=new Intl.RelativeTimeFormat(n,ah({},r));return function(c){return a.format(c,r.range||"day")}}),list:hp(function(n,r){var a=new Intl.ListFormat(n,ah({},r));return function(c){return a.format(c)}})},this.init(t)}return Ds(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},a=r.interpolation;this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||","}},{key:"add",value:function(n,r){this.formats[n.toLowerCase().trim()]=r}},{key:"addCached",value:function(n,r){this.formats[n.toLowerCase().trim()]=hp(r)}},{key:"format",value:function(n,r,a,c){var d=this,l=r.split(this.formatSeparator),x=l.reduce(function(b,E){var A=gX(E),L=A.formatName,F=A.formatOptions;if(d.formats[L]){var $=b;try{var N=c&&c.formatParams&&c.formatParams[c.interpolationkey]||{},Z=N.locale||N.lng||c.locale||c.lng||a;$=d.formats[L](b,Z,ah(ah(ah({},F),c),N))}catch(R){d.logger.warn(R)}return $}else d.logger.warn("there was no format function for ".concat(L));return b},n);return x}}]),e}();function k4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function A4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _X(e){var t=vX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function vX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xX(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var bX=function(e){Pb(n,e);var t=_X(n);function n(r,a,c){var d,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Rs(this,n),d=t.call(this),Ib&&Fh.call(Th(d)),d.backend=r,d.store=a,d.services=c,d.languageUtils=c.languageUtils,d.options=l,d.logger=tu.create("backendConnector"),d.waitingReads=[],d.maxParallelReads=l.maxParallelReads||10,d.readingCalls=0,d.maxRetries=l.maxRetries>=0?l.maxRetries:5,d.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,d.state={},d.queue=[],d.backend&&d.backend.init&&d.backend.init(c,l.backend,l),d}return Ds(n,[{key:"queueLoad",value:function(a,c,d,l){var x=this,b={},E={},A={},L={};return a.forEach(function(F){var $=!0;c.forEach(function(N){var Z="".concat(F,"|").concat(N);!d.reload&&x.store.hasResourceBundle(F,N)?x.state[Z]=2:x.state[Z]<0||(x.state[Z]===1?E[Z]===void 0&&(E[Z]=!0):(x.state[Z]=1,$=!1,E[Z]===void 0&&(E[Z]=!0),b[Z]===void 0&&(b[Z]=!0),L[N]===void 0&&(L[N]=!0)))}),$||(A[F]=!0)}),(Object.keys(b).length||Object.keys(E).length)&&this.queue.push({pending:E,pendingCount:Object.keys(E).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(b),pending:Object.keys(E),toLoadLanguages:Object.keys(A),toLoadNamespaces:Object.keys(L)}}},{key:"loaded",value:function(a,c,d){var l=a.split("|"),x=l[0],b=l[1];c&&this.emit("failedLoading",x,b,c),d&&this.store.addResourceBundle(x,b,d),this.state[a]=c?-1:2;var E={};this.queue.forEach(function(A){eX(A.loaded,[x],b),xX(A,a),c&&A.errors.push(c),A.pendingCount===0&&!A.done&&(Object.keys(A.loaded).forEach(function(L){E[L]||(E[L]={});var F=A.loaded[L];F.length&&F.forEach(function($){E[L][$]===void 0&&(E[L][$]=!0)})}),A.done=!0,A.errors.length?A.callback(A.errors):A.callback())}),this.emit("loaded",E),this.queue=this.queue.filter(function(A){return!A.done})}},{key:"read",value:function(a,c,d){var l=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,E=arguments.length>5?arguments[5]:void 0;if(!a.length)return E(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:a,ns:c,fcName:d,tried:x,wait:b,callback:E});return}this.readingCalls++;var A=function(N,Z){if(l.readingCalls--,l.waitingReads.length>0){var R=l.waitingReads.shift();l.read(R.lng,R.ns,R.fcName,R.tried,R.wait,R.callback)}if(N&&Z&&x<l.maxRetries){setTimeout(function(){l.read.call(l,a,c,d,x+1,b*2,E)},b);return}E(N,Z)},L=this.backend[d].bind(this.backend);if(L.length===2){try{var F=L(a,c);F&&typeof F.then=="function"?F.then(function($){return A(null,$)}).catch(A):A(null,F)}catch($){A($)}return}return L(a,c,A)}},{key:"prepareLoading",value:function(a,c){var d=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),x&&x();typeof a=="string"&&(a=this.languageUtils.toResolveHierarchy(a)),typeof c=="string"&&(c=[c]);var b=this.queueLoad(a,c,l,x);if(!b.toLoad.length)return b.pending.length||x(),null;b.toLoad.forEach(function(E){d.loadOne(E)})}},{key:"load",value:function(a,c,d){this.prepareLoading(a,c,{},d)}},{key:"reload",value:function(a,c,d){this.prepareLoading(a,c,{reload:!0},d)}},{key:"loadOne",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.split("|"),x=l[0],b=l[1];this.read(x,b,"read",void 0,void 0,function(E,A){E&&c.logger.warn("".concat(d,"loading namespace ").concat(b," for language ").concat(x," failed"),E),!E&&A&&c.logger.log("".concat(d,"loaded namespace ").concat(b," for language ").concat(x),A),c.loaded(a,E,A)})}},{key:"saveMissing",value:function(a,c,d,l,x){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},E=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(c)){this.logger.warn('did not save key "'.concat(d,'" as the namespace "').concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(d==null||d==="")){if(this.backend&&this.backend.create){var A=A4(A4({},b),{},{isUpdate:x}),L=this.backend.create.bind(this.backend);if(L.length<6)try{var F;L.length===5?F=L(a,c,d,l,A):F=L(a,c,d,l),F&&typeof F.then=="function"?F.then(function($){return E(null,$)}).catch(E):E(null,F)}catch($){E($)}else L(a,c,d,l,E,A)}!a||!a[0]||this.store.addResource(a[0],c,d,l)}}}]),n}(Fh);function T4(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var n={};if(_l(t[1])==="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),_l(t[2])==="object"||_l(t[3])==="object"){var r=t[3]||t[2];Object.keys(r).forEach(function(a){n[a]=r[a]})}return n},interpolation:{escapeValue:!0,format:function(t,n,r,a){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function P4(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function I4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wX(e){var t=SX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function SX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Av(){}function CX(e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(function(n){typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}var Z1=function(e){Pb(n,e);var t=wX(n);function n(){var r,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;if(Rs(this,n),r=t.call(this),Ib&&Fh.call(Th(r)),r.options=P4(a),r.services={},r.logger=tu,r.modules={external:[]},CX(Th(r)),c&&!r.isInitialized&&!a.isClone){if(!r.options.initImmediate)return r.init(a,c),C_(r,Th(r));setTimeout(function(){r.init(a,c)},0)}return r}return Ds(n,[{key:"init",value:function(){var a=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;typeof c=="function"&&(d=c,c={}),!c.defaultNS&&c.defaultNS!==!1&&c.ns&&(typeof c.ns=="string"?c.defaultNS=c.ns:c.ns.indexOf("translation")<0&&(c.defaultNS=c.ns[0]));var l=T4();this.options=Xl(Xl(Xl({},l),this.options),P4(c)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Xl(Xl({},l.interpolation),this.options.interpolation)),c.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=c.keySeparator),c.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=c.nsSeparator);function x(R){return R?typeof R=="function"?new R:R:null}if(!this.options.isClone){this.modules.logger?tu.init(x(this.modules.logger),this.options):tu.init(null,this.options);var b;this.modules.formatter?b=this.modules.formatter:typeof Intl<"u"&&(b=yX);var E=new w4(this.options);this.store=new sX(this.options.resources,this.options);var A=this.services;A.logger=tu,A.resourceStore=this.store,A.languageUtils=E,A.pluralResolver=new pX(E,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(A.formatter=x(b),A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new mX(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new bX(x(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",function(R){for(var q=arguments.length,G=new Array(q>1?q-1:0),Q=1;Q<q;Q++)G[Q-1]=arguments[Q];a.emit.apply(a,[R].concat(G))}),this.modules.languageDetector&&(A.languageDetector=x(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=x(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new b4(this.services,this.options),this.translator.on("*",function(R){for(var q=arguments.length,G=new Array(q>1?q-1:0),Q=1;Q<q;Q++)G[Q-1]=arguments[Q];a.emit.apply(a,[R].concat(G))}),this.modules.external.forEach(function(R){R.init&&R.init(a)})}if(this.format=this.options.interpolation.format,d||(d=Av),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var L=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);L.length>0&&L[0]!=="dev"&&(this.options.lng=L[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var F=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];F.forEach(function(R){a[R]=function(){var q;return(q=a.store)[R].apply(q,arguments)}});var $=["addResource","addResources","addResourceBundle","removeResourceBundle"];$.forEach(function(R){a[R]=function(){var q;return(q=a.store)[R].apply(q,arguments),a}});var N=jg(),Z=function(){var q=function(Q,se){a.isInitialized&&!a.initializedStoreOnce&&a.logger.warn("init: i18next is already initialized. You should call init just once!"),a.isInitialized=!0,a.options.isClone||a.logger.log("initialized",a.options),a.emit("initialized",a.options),N.resolve(se),d(Q,se)};if(a.languages&&a.options.compatibilityAPI!=="v1"&&!a.isInitialized)return q(null,a.t.bind(a));a.changeLanguage(a.options.lng,q)};return this.options.resources||!this.options.initImmediate?Z():setTimeout(Z,0),N}},{key:"loadResources",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Av,l=d,x=typeof a=="string"?a:this.language;if(typeof a=="function"&&(l=a),!this.options.resources||this.options.partialBundledLanguages){if(x&&x.toLowerCase()==="cimode")return l();var b=[],E=function(F){if(F){var $=c.services.languageUtils.toResolveHierarchy(F);$.forEach(function(N){b.indexOf(N)<0&&b.push(N)})}};if(x)E(x);else{var A=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);A.forEach(function(L){return E(L)})}this.options.preload&&this.options.preload.forEach(function(L){return E(L)}),this.services.backendConnector.load(b,this.options.ns,function(L){!L&&!c.resolvedLanguage&&c.language&&c.setResolvedLanguage(c.language),l(L)})}else l(null)}},{key:"reloadResources",value:function(a,c,d){var l=jg();return a||(a=this.languages),c||(c=this.options.ns),d||(d=Av),this.services.backendConnector.reload(a,c,function(x){l.resolve(),d(x)}),l}},{key:"use",value:function(a){if(!a)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!a.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return a.type==="backend"&&(this.modules.backend=a),(a.type==="logger"||a.log&&a.warn&&a.error)&&(this.modules.logger=a),a.type==="languageDetector"&&(this.modules.languageDetector=a),a.type==="i18nFormat"&&(this.modules.i18nFormat=a),a.type==="postProcessor"&&jO.addPostProcessor(a),a.type==="formatter"&&(this.modules.formatter=a),a.type==="3rdParty"&&this.modules.external.push(a),this}},{key:"setResolvedLanguage",value:function(a){if(!(!a||!this.languages)&&!(["cimode","dev"].indexOf(a)>-1))for(var c=0;c<this.languages.length;c++){var d=this.languages[c];if(!(["cimode","dev"].indexOf(d)>-1)&&this.store.hasLanguageSomeTranslations(d)){this.resolvedLanguage=d;break}}}},{key:"changeLanguage",value:function(a,c){var d=this;this.isLanguageChangingTo=a;var l=jg();this.emit("languageChanging",a);var x=function(L){d.language=L,d.languages=d.services.languageUtils.toResolveHierarchy(L),d.resolvedLanguage=void 0,d.setResolvedLanguage(L)},b=function(L,F){F?(x(F),d.translator.changeLanguage(F),d.isLanguageChangingTo=void 0,d.emit("languageChanged",F),d.logger.log("languageChanged",F)):d.isLanguageChangingTo=void 0,l.resolve(function(){return d.t.apply(d,arguments)}),c&&c(L,function(){return d.t.apply(d,arguments)})},E=function(L){!a&&!L&&d.services.languageDetector&&(L=[]);var F=typeof L=="string"?L:d.services.languageUtils.getBestMatchFromCodes(L);F&&(d.language||x(F),d.translator.language||d.translator.changeLanguage(F),d.services.languageDetector&&d.services.languageDetector.cacheUserLanguage&&d.services.languageDetector.cacheUserLanguage(F)),d.loadResources(F,function($){b($,F)})};return!a&&this.services.languageDetector&&!this.services.languageDetector.async?E(this.services.languageDetector.detect()):!a&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(E):this.services.languageDetector.detect(E):E(a),l}},{key:"getFixedT",value:function(a,c,d){var l=this,x=function b(E,A){var L;if(_l(A)!=="object"){for(var F=arguments.length,$=new Array(F>2?F-2:0),N=2;N<F;N++)$[N-2]=arguments[N];L=l.options.overloadTranslationOptionHandler([E,A].concat($))}else L=Xl({},A);L.lng=L.lng||b.lng,L.lngs=L.lngs||b.lngs,L.ns=L.ns||b.ns,L.keyPrefix=L.keyPrefix||d||b.keyPrefix;var Z=l.options.keySeparator||".",R;return L.keyPrefix&&Array.isArray(E)?R=E.map(function(q){return"".concat(L.keyPrefix).concat(Z).concat(q)}):R=L.keyPrefix?"".concat(L.keyPrefix).concat(Z).concat(E):E,l.t(R,L)};return typeof a=="string"?x.lng=a:x.lngs=a,x.ns=c,x.keyPrefix=d,x}},{key:"t",value:function(){var a;return this.translator&&(a=this.translator).translate.apply(a,arguments)}},{key:"exists",value:function(){var a;return this.translator&&(a=this.translator).exists.apply(a,arguments)}},{key:"setDefaultNamespace",value:function(a){this.options.defaultNS=a}},{key:"hasLoadedNamespace",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.resolvedLanguage||this.languages[0],x=this.options?this.options.fallbackLng:!1,b=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var E=function(F,$){var N=c.services.backendConnector.state["".concat(F,"|").concat($)];return N===-1||N===2};if(d.precheck){var A=d.precheck(this,E);if(A!==void 0)return A}return!!(this.hasResourceBundle(l,a)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||E(l,a)&&(!x||E(b,a)))}},{key:"loadNamespaces",value:function(a,c){var d=this,l=jg();return this.options.ns?(typeof a=="string"&&(a=[a]),a.forEach(function(x){d.options.ns.indexOf(x)<0&&d.options.ns.push(x)}),this.loadResources(function(x){l.resolve(),c&&c(x)}),l):(c&&c(),Promise.resolve())}},{key:"loadLanguages",value:function(a,c){var d=jg();typeof a=="string"&&(a=[a]);var l=this.options.preload||[],x=a.filter(function(b){return l.indexOf(b)<0});return x.length?(this.options.preload=l.concat(x),this.loadResources(function(b){d.resolve(),c&&c(b)}),d):(c&&c(),Promise.resolve())}},{key:"dir",value:function(a){if(a||(a=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!a)return"rtl";var c=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],d=this.services&&this.services.languageUtils||new w4(T4());return c.indexOf(d.getLanguagePartFromCode(a))>-1||a.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var a=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Av,l=Xl(Xl(Xl({},this.options),c),{isClone:!0}),x=new n(l);(c.debug!==void 0||c.prefix!==void 0)&&(x.logger=x.logger.clone(c));var b=["store","services","language"];return b.forEach(function(E){x[E]=a[E]}),x.services=Xl({},this.services),x.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x.translator=new b4(x.services,x.options),x.translator.on("*",function(E){for(var A=arguments.length,L=new Array(A>1?A-1:0),F=1;F<A;F++)L[F-1]=arguments[F];x.emit.apply(x,[E].concat(L))}),x.init(l,d),x.translator.options=x.options,x.translator.backendConnector.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(Fh);sc(Z1,"createInstance",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Z1(e,t)});var mo=Z1.createInstance();mo.createInstance=Z1.createInstance;mo.createInstance;mo.dir;mo.init;mo.loadResources;mo.reloadResources;mo.use;mo.changeLanguage;mo.getFixedT;mo.t;mo.exists;mo.setDefaultNamespace;mo.hasLoadedNamespace;mo.loadNamespaces;mo.loadLanguages;var EX=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,kX={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},AX=function(t){return kX[t]},TX=function(t){return t.replace(EX,AX)};function M4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function L4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var O4={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:TX};function PX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};O4=L4(L4({},O4),e)}var IX={type:"3rdParty",init:function(t){PX(t.options.react)}};mt.createContext();(function(){function e(){Rs(this,e),this.usedNamespaces={}}return Ds(e,[{key:"addUsedNamespaces",value:function(n){var r=this;n.forEach(function(a){r.usedNamespaces[a]||(r.usedNamespaces[a]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e})();var VO=[],MX=VO.forEach,LX=VO.slice;function OX(e){return MX.call(LX.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var F4=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,FX=function(t,n,r){var a=r||{};a.path=a.path||"/";var c=encodeURIComponent(n),d="".concat(t,"=").concat(c);if(a.maxAge>0){var l=a.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");d+="; Max-Age=".concat(Math.floor(l))}if(a.domain){if(!F4.test(a.domain))throw new TypeError("option domain is invalid");d+="; Domain=".concat(a.domain)}if(a.path){if(!F4.test(a.path))throw new TypeError("option path is invalid");d+="; Path=".concat(a.path)}if(a.expires){if(typeof a.expires.toUTCString!="function")throw new TypeError("option expires is invalid");d+="; Expires=".concat(a.expires.toUTCString())}if(a.httpOnly&&(d+="; HttpOnly"),a.secure&&(d+="; Secure"),a.sameSite){var x=typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite;switch(x){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return d},R4={create:function(t,n,r,a){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(c.expires=new Date,c.expires.setTime(c.expires.getTime()+r*60*1e3)),a&&(c.domain=a),document.cookie=FX(t,encodeURIComponent(n),c)},read:function(t){for(var n="".concat(t,"="),r=document.cookie.split(";"),a=0;a<r.length;a++){for(var c=r[a];c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(n)===0)return c.substring(n.length,c.length)}return null},remove:function(t){this.create(t,"",-1)}},RX={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var r=R4.read(t.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&R4.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},DX={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var a=r.substring(1),c=a.split("&"),d=0;d<c.length;d++){var l=c[d].indexOf("=");if(l>0){var x=c[d].substring(0,l);x===t.lookupQuerystring&&(n=c[d].substring(l+1))}}}return n}},Vg=null,D4=function(){if(Vg!==null)return Vg;try{Vg=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Vg=!1}return Vg},zX={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&D4()){var r=window.localStorage.getItem(t.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&D4()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},qg=null,z4=function(){if(qg!==null)return qg;try{qg=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{qg=!1}return qg},BX={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&z4()){var r=window.sessionStorage.getItem(t.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&z4()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},$X={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},NX={name:"htmlTag",lookup:function(t){var n,r=t.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},UX={name:"path",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof r[t.lookupFromPathIndex]!="string")return;n=r[t.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},jX={name:"subdomain",lookup:function(t){var n=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function VX(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var qO=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rs(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return Ds(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=OX(r,this.options||{},VX()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(RX),this.addDetector(DX),this.addDetector(zX),this.addDetector(BX),this.addDetector($X),this.addDetector(NX),this.addDetector(UX),this.addDetector(jX)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var a=[];return n.forEach(function(c){if(r.detectors[c]){var d=r.detectors[c].lookup(r.options);d&&typeof d=="string"&&(d=[d]),d&&(a=a.concat(d))}}),this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var a=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(c){a.detectors[c]&&a.detectors[c].cacheUserLanguage(n,a.options)}))}}]),e}();qO.type="languageDetector";const qX="km",GX="m",HX="to",WX="Logout",ZX="Save",KX="Cancel",XX="Create",YX="Disasters",JX="Loading...",QX="Loading events",eY="Legend",tY="maps",nY="Vertical direction",rY="Horizontal direction",iY="Legend presentation",oY="Layers",aY="Feed",sY="Deselect",lY="Gathering data",uY="Updated",cY="No data received",hY="Wrong data received",fY="Error",dY="Sort Icon",pY={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"The feed contains real-time data about Cyclones, Droughts, Earthquakes, Floods, Volcanoes, Wildfires."},mY={default:"Sorry, we are having issues, which will be fixed soon",timeout:"Request Timeout",cannot_connect:"Can't connect to server",forbidden:"Forbidden",not_found:"Not found",unknown:"Unknown",server_error:"Server Error"},gY={overlays:"Overlays",basemap:"Basemap"},yY={layers_in_selected_area:"Layers in selected area",your_layers:"Your Layers",kontur_analytics:"Kontur Analytics",qa:"QA",osmbasedmap:"OpenStreetMap Based",other:"Other",elevation:"Elevation",photo:"Photo",map:"Map"},_Y={load_world_data:"Load World Data",numerator:"Numerator",normalized_by:"Normalized By",sum:"Sum",min:"Min",max:"Max",mean:"Mean",stddev:"Stddev",median:"Median",filter_numerator:"Filter Numerator",filter_denominator:"Filter Denominator"},vY={title:"Multi-criteria decision analysis",name:"MCDA"},xY={warning_title:"Can't use map as filter",warning_description:"Map not ready yet, try later",bbox_filter_button:"Use map view as filter",analytics:{affected_people:{tooltip:"Affected People",value:"No humanitarian impact"},settled_area_tooltip:"Settled Area",loss_tooltip:"Estimated loss"},no_event_in_feed:"Event not found in the current event feed",no_selected_disaster:"No disaster selected",chose_disaster:"Choose disaster",no_historical_disasters:"No historical disasters in this area",no_feed_disasters:"No disasters in this feed",no_disasters:"No disasters",severity_unknown:"Unknown",severity_termination:"Termination",severity_minor:"Minor",severity_moderate:"Moderate",severity_severe:"Severe",severity_extreme:"Extreme",open_timeline_button:"Open timeline"},bY={edit_layer:"Edit Layer",edit_features:"Edit Features",delete_layer:"Delete Layer",create_layer:"Create Layer",saving_layer:"Saving layer...",field_name:"Field name",layer_name:"Layer name",marker_icon:"Marker icon",type:"Type",select:"Select",short_text:"Short Text",long_text:"Long Text",link:"Link",image:"Image",fields:"Fields",add_field:"Add field",location:"Location",edit_feature_placeholder:"Select some feature for start edit feature properties"},wY={header_title:"Analytics",error_loading:"Error while fetching analytics data",info_short:"Calculations are made for the selected area."},SY={header_title:"Advanced analytics",error:"Error while fetching advanced analytics data"},CY={not_found:"Sorry, requested event not found.",error:"An error occured!",analytics_for_selected:"Analytics for a selected area",will_be_provided:"will be provided here",no_analytics:"No analytics for the selected area"},EY={area:"Area",line:"Line",point:"Point",finish_drawing:"Finish Drawing",caption:"Click on the map to begin drawing",no_geometry_error:"No drawn geometry to download",overlap_error:"Polygon should not overlap itself",save_features:"Save features"},kY={title:"Focus to administrative boundary"},AY={title:"Focus to uploaded geometry",error:"Error while reading uploaded file"},TY={title:"Focus to freehand geometry"},PY={settings:{name:"Selected Area"}},IY={self_directions_not_supported:"Self intersections are not supported!"},MY={panel:{header:"Bivariate Matrix"},matrix:{caption:{base_axis:"Base axis",annex_axis:"Annex axis",tooltip:{p1:"Charts involving the Base and Annex axes help establish a relationship between two data sets.",li1:"Annex axis - parameters that we analyse",li2:"Base axis - reference point in the analysis",b:"Ex: the best location to open a cafe",p2:"We can explore the number of eatery places (Annex axis) against Population density (Base axis).",p3:"In this scenario, we are first interested in a small number of eatery places, and the number of people in that place gives us additional information."}},header:{title:"Choose two layers to explore correlations",hint:"Layers and correlations are displayed for the current Selected Area"},icon:{population:"Value divided by Population",area_km2:"Value divided by Area",total_building_count:"Value divided by Total Buildings Estimate",populated_area_km2:"Value divided by Populated Area",one:"Without divider",roads:"Value divided by Total Roads Length"},progress:{rendering:"Rendering",applied:"Applied on the map"},loading_error:"Unfortunately, we cannot display the matrix. Try refreshing the page or come back later."},legend:{high:"High",low:"Low",medium:"Medium"},color_manager:{not_defined:"Not defined",sentiments_combinations_filter:"Sentiments combinations",layers_filter:"Layers",no_legends:"There are no legends satisfying the conditions.",no_data:"No Data.",sentiments_tab:"Sentiments",color_legends_tab:"Color Legends",layers_tab:"Layers (indicators)"}},LY={biv_color_manager:"olor manager",edit_osm:"Edit in OpenStreetMap",ruler:"Ruler",collapse:"Collapse",expand:"Expand",icon_alt:"Application logo"},OY={email:"Email",password:"Password",login_button:"Login",sign_up:"Sign up",logging_in:"Logging in...",log_in:"Log in",description:"Please log in to change your settings",error:{email_empty:"Email has not to be empty!",email_invalid:"Email has to be valid!",password:"Password has not to be empty!",connect:"Couldn't connect to authentication service"}},FY={title:"Disaster Ninja Reports",no_data:"No data for this report",sorting:"Sorting data...",loading:"Loading data",search_location:"Search location",open_josm:"Open via JOSM remote control",josm_logo_alt:"JOSM logo",see_all:"See all reports",wrong_id:"Wrong report ID",description:"<0>Kontur </0> generates several reports that help validate OpenStreetMap quality. They contain links to areas on <4>osm.org </4> and links to open them in the JOSM editor with enabled remote control for editing."},RY={map:"Map",about:"About",reports:"Reports",profile:"Profile",privacy:"Privacy"},DY={title:"Welcome to Disaster Ninja!",intro:"Do you want to be notified about ongoing disasters? Are you interested in instant population data and other analytics for any region in the world? Disaster Ninja showcases some of <2>Kontur</2>s capabilities in addressing these needs.<br/><br/>We initially designed it as a decision support tool for humanitarian mappers. Now it has grown in functionality and use cases. Whether you work in disaster management, build a smart city, or perform research on climate change, Disaster Ninja can help you to:",l1:"1. Stay up to date with the latest hazard events globally.",p1:"The Disasters panel continually refreshes to inform you about ongoing events. It consumes data from the <2>Kontur Event Feed</2>, which you can also access via an API.",l2:"2. Focus on your area of interest.",p2:"The Drawing Tools panel allows you to draw or upload your own geometry on the map. You can also focus on a disaster-exposed area or an administrative unit  a country, city, or region.",l3:"3. Get analytics for the focused area.",p3:"The Analytics panel shows the number of people living in that area per <2>Kontur Population</2> and estimated mapping gaps in OpenStreetMap. Konturs customers have access to hundreds of other indicators through Advanced Analytics.",l4:"4. Explore data on the map and make conclusions.",p4:"The Layers panel gives you various options to display two indicators simultaneously on a bivariate map, e.g., population density and distance to the nearest fire station. Use the color legend to assess which areas require attention. <br/>Hint: in general, green indicates low risk / few gaps, red  high risk / many gaps.",p5:"In addition, you can switch to Reports in the left panel to access data on potential errors and inconsistencies in OpenStreetMap and help fix them by mapping the respective area with the JOSM editor.",goToMap:"Go to the map now",p6:"We hope you find this tool valuable. Use the chatbox on Disaster Ninja for any questions about the functionality, and we will be happy to guide you. You can also contact us by email at <1>hello@kontur.io</1> if you have feedback or suggestions on improving the tool.<br/><br/>Disaster Ninja is an open-source project. Find the code in <8>Konturs GitHub account</8>."},zY={interfaceTheme:"Theme",interfaceLanguage:"Language",units:"Units",fullName:"Full Name",email:"Email",metric:"metric",imperialBeta:"imperial (beta)",profileSettingsHeader:"Profile",appSettingsHeader:"Settings",saveButton:"Save changes",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Default disaster feed",defaultOSMeditor:"Default OpenStreetMap editor (beta)",successNotification:"All changes have been applied successfully",languageOption:{en:"English",es:"Spanish",ar:"Arabic",ko:"Korean",id:"Indonesian",de:"German",uk:"Ukrainian"}},BY={not_found_request:"Sorry, requested event not found."},$Y={get_location_error:"Error while getting location",feature_title:"Locate me"},NY="Episode",UY="Loading Episodes",jY={header:"We value your privacy",body:`We use absolutely necessary cookies to provide you personalized services and optional cookies to improve Disaster Ninja and your experience. You can manage cookies settings or withdraw consent to optional cookies at any time.
For more information, please, check our [Privacy Policy](about/privacy)`,decline_all:"Decline optional cookies",accept_all:"Accept optional cookies"},VY={start:"Start sensor recording",finish:"Stop sensor recording",finishMessage:"Recording has been finished",startMessage:"Recording has been started",noSensorsError:"Your device desn't have the required sensors"},qY={km:qX,m:GX,to:HX,logout:WX,save:ZX,cancel:KX,create:XX,disasters:YX,loading:JX,loading_events:QX,legend:eY,maps:tY,vertical_direction:nY,horizontal_direction:rY,legend_presentation:iY,layers:oY,feed:aY,deselect:sY,spinner_text:lY,updated:uY,no_data_received:cY,wrong_data_received:hY,error:fY,sort_icon:dY,configs:pY,errors:mY,categories:gY,groups:yY,advanced_analytics_data_list:_Y,mcda:vY,event_list:xY,create_layer:bY,analytics_panel:wY,advanced_analytics_panel:SY,advanced_analytics_empty:CY,draw_tools:EY,boundary_selector:kY,geometry_uploader:AY,focus_geometry:TY,focus_geometry_layer:PY,drawings:IY,bivariate:MY,sidebar:LY,login:OY,reports:FY,modes:RY,about:DY,profile:zY,current_event:BY,locate_me:$Y,episode:NY,loading_episodes:UY,cookie_banner:jY,live_sensor:VY},GY="km",HY="m",WY="a",ZY="mapas",KY="Cierre de sesin",XY="Guardar",YY="Cancelar",JY="Crear",QY="Desastres",eJ="Cargando...",tJ="Cargando eventos",nJ="Leyenda",rJ="Direccin vertical",iJ="Direccin horizontal",oJ="Presentacin de la leyenda",aJ="Capas",sJ={color_manager:{layers_filter:"Capas",not_defined:"No definido",sentiments_combinations_filter:"Combinaciones de sentimientos",no_legends:"No hay leyendas que cumplan las condiciones.",no_data:"No hay datos.",sentiments_tab:"Sentimientos",color_legends_tab:"Leyendas de colores",layers_tab:"Capas (indicadores)"},panel:{header:"Matriz bivariada"},matrix:{caption:{base_axis:"Eje base",annex_axis:"Eje anexo",tooltip:{p1:"Las grficas que incluyen los ejes base y anexo ayudan a establecer una relacin entre dos conjuntos de datos.",li1:"Eje anexo: parmetros que analizamos",li2:"Eje base: punto de referencia en el anlisis",b:"Ej.: la mejor ubicacin para abrir una cafetera",p2:"Podemos explorar el nmero de locales de comida (eje anexo) frente a la densidad de poblacin (eje base).",p3:"En este escenario, en primer lugar nos interesa un nmero reducido de locales de comida, y la cantidad de personas presentes nos da informacin adicional."}},header:{title:"Elija dos capas para explorar las correlaciones",hint:"Las capas y correlaciones se muestran para el rea seleccionada actual"},icon:{population:"Valor dividido por la poblacin",area_km2:"Valor dividido por el rea",total_building_count:"Valor dividido por la estimacin total de edificios",populated_area_km2:"Valor dividido por el rea poblada",one:"Sin divisor",roads:"Valor dividido por la longitud total de las carreteras"},progress:{rendering:"Renderizado",applied:"Aplicado en el mapa"}},legend:{high:"Alto",low:"Bajo",medium:"Medio"}},lJ="Fuente",uJ="Anular la seleccin",cJ="Recopilacin de datos",hJ="Actualizado",fJ="No se han recibido datos",dJ="Se han recibido datos errneos",pJ="Error",mJ="Icono de ordenar",gJ={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"El feed contiene datos en tiempo real sobre Ciclones, Sequas, Terremotos, Inundaciones, Volcanes, Incendios forestales."},yJ={default:"Lo sentimos, estamos teniendo problemas, que pronto se solucionarn",timeout:"Se agot el tiempo de espera de la solicitud",cannot_connect:"No se puede conectar al servidor",forbidden:"Prohibido",not_found:"No encontrado",unknown:"Desconocido",server_error:"Error del servidor"},_J={severity_unknown:"Desconocido",warning_title:"No se puede utilizar el mapa como filtro",warning_description:"El mapa an no est listo, intntelo ms tarde",bbox_filter_button:"Usar la vista del mapa como filtro",analytics:{affected_people:{tooltip:"Personas afectadas",value:"Sin impacto humanitario"},settled_area_tooltip:"rea habitada",loss_tooltip:"Prdida estimada"},no_event_in_feed:"Evento no encontrado en el feed de eventos actual",no_selected_disaster:"No se ha seleccionado ningn desastre",chose_disaster:"Seleccione el desastre"},vJ={overlays:"Superposiciones",basemap:"Mapa base"},xJ={layers_in_selected_area:"Capas en el rea seleccionada",your_layers:"Sus capas",kontur_analytics:"Anlisis de Kontur",qa:"Certificacin de calidad",osmbasedmap:"Basado en OpenStreetMap",other:"Otros",elevation:"Elevacin",photo:"Foto",map:"Mapa"},bJ={map:"Mapa",about:"Acerca de",reports:"Informes",profile:"Perfil"},wJ={load_world_data:"Cargar datos mundiales",numerator:"Numerador",normalized_by:"Normalizado por",sum:"Suma",min:"Mn.",max:"Mx.",mean:"Media",stddev:"Desv. est.",median:"Mediana",filter_denominator:"Filtrar Denominador"},SJ={},CJ={edit_layer:"Editar capa",edit_features:"Editar caractersticas",delete_layer:"Eliminar capa",create_layer:"Crear capa",saving_layer:"Guardando capa...",field_name:"Nombre de campo",layer_name:"Nombre de la capa",marker_icon:"Icono de marcador",type:"Tipo",select:"Seleccionar",short_text:"Texto corto",long_text:"Texto largo",link:"Enlace",image:"Imagen",fields:"Campos",add_field:"Agregar campo",location:"Ubicacin",edit_feature_placeholder:"Seleccione una caracterstica para comenzar a editar las propiedades de la misma"},EJ={header_title:"Anlisis",error_loading:"Error en la obtencin de datos de anlisis"},kJ={header_title:"Anlisis avanzado",error:"Error en la obtencin de datos de anlisis Avanzado"},AJ={not_found:"Lo sentimos, el evento solicitado no se ha encontrado.",error:"Se produjo un error!"},TJ={not_found_request:"Lo sentimos, el evento solicitado no se ha encontrado."},PJ={area:"rea",line:"Lnea",point:"Punto",finish_drawing:"Terminar el dibujo",caption:"Haga clic en el mapa para empezar a dibujar",no_geometry_error:"No hay geometra dibujada para descargar",overlap_error:"El polgono no debe superponerse sobre s mismo",save_features:"Guardar caractersticas"},IJ={title:"Enfocar en el lmite administrativo"},MJ={title:"Enfocar en la geometra cargada",error:"Error al leer el archivo cargado"},LJ={title:"Enfocar en la geometra a mano"},OJ={settings:{name:"rea seleccionada"}},FJ={self_directions_not_supported:"No se admiten las autointersecciones!"},RJ={biv_color_manager:"Administrador de color",edit_osm:"Editar en OpenStreetMap",ruler:"Regla",collapse:"Contraer",expand:"Expandir",icon_alt:"Logotipo de la aplicacin"},DJ={email:"Correo electrnico",password:"Contrasea",login_button:"Inicio de sesin",sign_up:"Registrarse",logging_in:"Iniciando sesin...",log_in:"Iniciar sesin",description:"Acceda a su cuenta para cambiar los ajustes",error:{email_empty:"El correo electrnico no debe estar vaco!",email_invalid:"El correo electrnico debe ser vlido!",password:"La contrasea no debe estar vaca!",connect:"No se pudo conectar con el servicio de autenticacin"}},zJ={email:"Correo electrnico",profileSettingsHeader:"Perfil",interfaceTheme:"Tema",interfaceLanguage:"Idioma",units:"Unidades",fullName:"Nombre completo",metric:"mtricas",imperialBeta:"imperiales (beta)",appSettingsHeader:"Ajustes",saveButton:"Guardar cambios",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Feed de desastres predeterminado",defaultOSMeditor:"Editor predeterminado de OpenStreetMap (beta)",successNotification:"Todos los cambios se han aplicado correctamente",languageOption:{en:"Ingls",es:"Espaol",ar:"rabe",ko:"oreano",id:"Indonesio",de:"Alemn",uk:"Ucranio"}},BJ={title:"Informes de Disaster Ninja",no_data:"No hay datos para este informe",sorting:"Ordenando datos...",loading:"Cargando datos",search_location:"Buscar ubicacin",open_josm:"Abrir a travs del control remoto JOSM",josm_logo_alt:"Logotipo de JOSM",see_all:"Ver todos los informes",wrong_id:"ID de informe incorrecto",description:"<0>Kontur </0> genera una serie de informes tiles para validar la calidad de OpenStreetMap. Contienen enlaces a zonas en <4>osm.org </4> y enlaces para abrirlas en el editor JOSM con control remoto habilitado para la edicin."},$J={title:"Bienvenido a Disaster Ninja!",intro:"Desea recibir notificaciones sobre desastres en curso? Le interesan los datos de poblacin instantneos y otros datos analticos de alguna regin del mundo? Disaster Ninja muestra algunas de las capacidades de <2>Kontur</2> para ocuparse de estas necesidades.<br/><br/> Inicialmente la diseamos como una herramienta de apoyo a los mapeadores de servicios humanitarios. Ahora ha ampliado sus funcionalidades y aplicaciones prcticas. Tanto si trabaja en la gestin de desastres como si construye una ciudad inteligente o realiza investigaciones sobre el cambio climtico, Disaster Ninja puede ayudarle a:",l1:"1. Estar al da con los ltimos eventos peligrosos a nivel mundial.",p1:"El panel de Desastres se actualiza continuamente para informarle sobre los acontecimientos en curso. Utiliza la informacin proporcionada por <2>Kontur Event Feed</2>, a la que tambin puede acceder a travs de la interfaz de la aplicacin.",l2:"2. Centrarse en su rea de inters.",p2:"El panel de Herramientas de Dibujo le permite dibujar o subir su propia geometra en el mapa. Tambin puede centrarse en un rea o en una unidad administrativa - pas, ciudad o regin  expuesta a desastres.",l3:"3. Recibir anlisis de su rea de inters.",p3:"El panel de Anlisis le muestra el nmero de personas que viven en la zona segn <2>Kontur Population</2> y segn una estimacin de las zonas sin mapear en OpenStreetMap. Los clientes de Kontur tienen acceso a cientos de otros indicadores a travs de Advance Analytics.",l4:"4. Explorar los datos del mapa y sacar sus propias conclusiones.",p4:"El panel Capas le ofrece varias opciones para mostrar dos indicadores en simultneo en un mapa bivariado, p. ej:, la densidad de poblacin y la distancia a la estacin de bomberos ms cercana. Utilice las leyendas de colores para evaluar qu reas requieren atencin. <br/>Consejo: en general, el verde indica riesgo bajo / pocas zonas sin mapear, el rojo  riesgo alto / muchas zonas sin mapear.",p5:"Adems, puede cambiar a Informes en el panel de la izquierda para acceder a los datos sobre posibles errores e inconsistencias en OpenStreetMap y ayudarle a realizar correcciones mapeando la zona correspondiente con el editor JOSM.",goToMap:"Ir al mapa ahora",p6:"Esperamos que esta herramienta le resulte valiosa. Utilice el chat de Disaster Ninja si tiene alguna pregunta sobre sus funcionalidades y estaremos encantados de ayudarle. Tambin puede contactarnos por correo electrnico en <1>hello@kontur.io</1> si tiene algn comentario o sugerencia para mejorar la herramienta.<br/><br/> Disaster Ninja es un proyecto de cdigo abierto. Encuentre el cdigo en la <8>cuenta de GitHub de Kontur</8>."},NJ={get_location_error:"Error al obtener la ubicacin",feature_title:"Localizarme"},UJ="Episodio",jJ="Cargando episodios",VJ={},qJ={},GJ={km:GY,m:HY,to:WY,maps:ZY,logout:KY,save:XY,cancel:YY,create:JY,disasters:QY,loading:eJ,loading_events:tJ,legend:nJ,vertical_direction:rJ,horizontal_direction:iJ,legend_presentation:oJ,layers:aJ,bivariate:sJ,feed:lJ,deselect:uJ,spinner_text:cJ,updated:hJ,no_data_received:fJ,wrong_data_received:dJ,error:pJ,sort_icon:mJ,configs:gJ,errors:yJ,event_list:_J,categories:vJ,groups:xJ,modes:bJ,advanced_analytics_data_list:wJ,mcda:SJ,create_layer:CJ,analytics_panel:EJ,advanced_analytics_panel:kJ,advanced_analytics_empty:AJ,current_event:TJ,draw_tools:PJ,boundary_selector:IJ,geometry_uploader:MJ,focus_geometry:LJ,focus_geometry_layer:OJ,drawings:FJ,sidebar:RJ,login:DJ,profile:zJ,reports:BJ,about:$J,locate_me:NJ,episode:UJ,loading_episodes:jJ,cookie_banner:VJ,live_sensor:qJ},HJ="",WJ="",ZJ="",KJ="",XJ=" ",YJ="",JJ="",QJ="",eQ="",tQ=" ...",nQ="  ",rQ=" ",iQ=" ",oQ=" ",aQ="  ",sQ="",lQ={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:"    .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:" ()"},panel:{header:"  "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:"            .",li1:"  -    ",li2:"  -    ",b:":    ",p2:"     ( )    ( ).",p3:"                  ."}},header:{title:"   ",hint:"      "},icon:{population:"    ",area_km2:"   ",total_building_count:"     ",populated_area_km2:"    ",one:" ",roads:"     "},progress:{rendering:"",applied:"  "}},legend:{high:"",low:"",medium:""}},uQ="",cQ="",hQ=" ",fQ="",dQ="   ",pQ="   ",mQ="",gQ=" ",yQ={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"            ."},_Q={default:"     ",timeout:"  ",cannot_connect:"   ",forbidden:"",not_found:"   ",unknown:" ",server_error:"  "},vQ={severity_unknown:" ",warning_title:"     ",warning_description:"     ",bbox_filter_button:"    ",analytics:{affected_people:{tooltip:" ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"        ",no_selected_disaster:"   ",chose_disaster:" "},xQ={overlays:"",basemap:" "},bQ={layers_in_selected_area:"   ",your_layers:"",kontur_analytics:" ",qa:" ",osmbasedmap:"    ",other:"",elevation:"",photo:"",map:""},wQ={map:"",about:"",reports:"",profile:" "},SQ={load_world_data:"  ",numerator:"",normalized_by:" ",sum:"",min:" ",max:" ",mean:"",stddev:"Stddev",median:"",filter_denominator:" "},CQ={},EQ={edit_layer:" ",edit_features:" ",delete_layer:" ",create_layer:" ",saving_layer:" ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:" ",long_text:" ",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"      "},kQ={header_title:"",error_loading:"    "},AQ={header_title:" ",error:"     "},TQ={not_found:"    .",error:" !"},PQ={not_found_request:"    ."},IQ={area:"",line:"",point:"",finish_drawing:" ",caption:"    ",no_geometry_error:"    ",overlap_error:"     ",save_features:" "},MQ={title:"   "},LQ={title:"   ",error:"      "},OQ={title:"   "},FQ={settings:{name:" "}},RQ={self_directions_not_supported:"   !"},DQ={biv_color_manager:" ",edit_osm:"  OpenStreetMap",ruler:"",collapse:"",expand:"",icon_alt:" "},zQ={email:" ",password:" ",login_button:" ",sign_up:" ",logging_in:"  ...",log_in:" ",description:"    ",error:{email_empty:"      !",email_invalid:"     !",password:"      !",connect:"    "}},BQ={email:" ",profileSettingsHeader:" ",interfaceTheme:"",interfaceLanguage:"",units:"",fullName:" ",metric:"",imperialBeta:" ()",appSettingsHeader:"",saveButton:" ",konturTheme:"Kontur",HOTTheme:"","userBio(about)":"",defaultDisasterFeed:"  ",defaultOSMeditor:" OpenStreetMap  ()",successNotification:"    ",languageOption:{en:"",es:"",ar:"",ko:"",id:"",de:"",uk:""}},$Q={title:" Disaster Ninja",no_data:"    ",sorting:"  ...",loading:"  ",search_location:"  ",open_josm:"     JOSM  ",josm_logo_alt:" JOSM",see_all:"  ",wrong_id:"  ",description:" <0> Kontur</0>        OpenStreetMap.        <4> osm.org </4>      JOSM      ."},NQ={title:"  Disaster Ninja!",intro:"                    Disaster Ninja   <2>Kontur</2>    .<br/><br/>          .     .                    Disaster Ninja :",l1:"1.          .",p1:"       .     <2>Kontur Event Feed</2>         .",l2:"2.    .",p2:"             .           -     .",l3:"3.     .",p3:"           <2>Kontur Population</2>     OpenStreetMap.   Kontur         .",l4:"4.       .",p4:"  Layers                     .         . <br/>        /    -   /   .",p5:"                   OpenStreetMap            JOSM.",goToMap:"   ",p6:"      .     Disaster Ninja       .       <1>hello@kontur.io</1>         .<br/><br/> Disaster Ninja   .      <8>Kontur</8>  <8>GitHub</8>."},UQ={get_location_error:"     ",feature_title:" "},jQ="",VQ="  ",qQ={},GQ={},HQ={km:HJ,m:WJ,to:ZJ,maps:KJ,logout:XJ,save:YJ,cancel:JJ,create:QJ,disasters:eQ,loading:tQ,loading_events:nQ,legend:rQ,vertical_direction:iQ,horizontal_direction:oQ,legend_presentation:aQ,layers:sQ,bivariate:lQ,feed:uQ,deselect:cQ,spinner_text:hQ,updated:fQ,no_data_received:dQ,wrong_data_received:pQ,error:mQ,sort_icon:gQ,configs:yQ,errors:_Q,event_list:vQ,categories:xQ,groups:bQ,modes:wQ,advanced_analytics_data_list:SQ,mcda:CQ,create_layer:EQ,analytics_panel:kQ,advanced_analytics_panel:AQ,advanced_analytics_empty:TQ,current_event:PQ,draw_tools:IQ,boundary_selector:MQ,geometry_uploader:LQ,focus_geometry:OQ,focus_geometry_layer:FQ,drawings:RQ,sidebar:DQ,login:zQ,profile:BQ,reports:$Q,about:NQ,locate_me:UQ,episode:jQ,loading_episodes:VQ,cookie_banner:qQ,live_sensor:GQ},WQ="",ZQ="",KQ="",XQ="",YQ="",JQ="",QQ="",eee="",tee="",nee=" ...",ree="  ",iee="",oee=" ",aee=" ",see=" ",lee="",uee={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:"   .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:"()"},panel:{header:" "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:"              .",li1:"  -   ",li2:"  -  ",b:":    ",p2:" ( )   ( )   .",p3:"       ,         ."}},header:{title:"      .",hint:"      ."},icon:{population:"  ",area_km2:"  ",total_building_count:"    ",populated_area_km2:"    ",one:" ",roads:"    "},progress:{rendering:"",applied:" "}},legend:{high:"",low:"",medium:""}},cee="",hee=" ",fee=" ",dee="",pee="  ",mee="  ",gee="",yee=" ",_ee={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:" , , , ,  ,     ."},vee={default:".  .   .",timeout:"  ",cannot_connect:"   .",forbidden:"  ",not_found:"  ",unknown:"  ",server_error:" "},xee={severity_unknown:"  ",warning_title:"    .",warning_description:"    .     .",bbox_filter_button:"   ",analytics:{affected_people:{tooltip:"  ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"      ",no_selected_disaster:"  ",chose_disaster:" "},bee={overlays:"",basemap:""},wee={layers_in_selected_area:"   ",your_layers:"",kontur_analytics:"Kontur Analytics",qa:"QA",osmbasedmap:"OpenStreetMap ",other:"",elevation:"",photo:"",map:""},See={map:"",about:"",reports:"",profile:""},Cee={load_world_data:"   ",numerator:"",normalized_by:" :",sum:"",min:"",max:"",mean:"",stddev:"  ",median:"",filter_denominator:" "},Eee={},kee={edit_layer:" ",edit_features:" ",delete_layer:" ",create_layer:" ",saving_layer:"  ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:" ",long_text:" ",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"      ."},Aee={header_title:"",error_loading:"     ."},Tee={header_title:" ",error:"      ."},Pee={not_found:".     .",error:" ."},Iee={not_found_request:".     ."},Mee={area:"",line:"",point:"",finish_drawing:" ",caption:"   .",no_geometry_error:"     .",overlap_error:"     .",save_features:" "},Lee={title:"   "},Oee={title:"    ",error:"     ."},Fee={title:"      "},Ree={settings:{name:" "}},Dee={self_directions_not_supported:"   ."},zee={biv_color_manager:" ",edit_osm:"OpenStreetMap ",ruler:"",collapse:"",expand:"",icon_alt:" "},Bee={email:"",password:"",login_button:"",sign_up:"",logging_in:" ...",log_in:"",description:"  .",error:{email_empty:"   .",email_invalid:"   .",password:"   .",connect:"    ."}},$ee={email:"",profileSettingsHeader:"",interfaceTheme:"",interfaceLanguage:"",units:"",fullName:" ",metric:"",imperialBeta:" ()",appSettingsHeader:"",saveButton:"  ",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"  ",defaultOSMeditor:" OpenStreetMap ()",successNotification:"    .",languageOption:{en:"",es:"",ar:"",ko:"",id:" ",de:" ",uk:" "}},Nee={title:"Disaster Ninja ",no_data:"   .",sorting:"  ...",loading:"  ",search_location:" ",open_josm:"JOSM    ",josm_logo_alt:"JOSM ",see_all:"  ",wrong_id:"  ID",description:"<0>Kontur</0>     OpenStreetMap   .  <4>osm.org </4>   ,    JOSM          ."},Uee={title:"Disaster Ninja   !",intro:"      ?            ? Disaster Ninja        <2>Kontur</2>  .<br/><br/>         ,      .  ,   ,               .",l1:"1.        .",p1:"           . <2>Kontur  </2>  , API      .",l2:"2.     .",p2:"           .     (: , , )    .",l3:"3.     .",p3:"  <2>Kontur </2>      OpenStreetMap     .   Kontur          .",l4:"4.       .",p4:"               (:  ,    ).       . <br/>:   /    /  .",p5:",     OpenStreetMap      , JOSM          .",goToMap:"   .",p6:"     .     Disaster Ninja       .        , <1>hello@kontur.io</1>    .<br/><br/>Disaster Ninja   . <8>Kontur GitHub </8>  ."},jee={get_location_error:"    .",feature_title:"  "},Vee="",qee="  ",Gee={},Hee={},Wee={km:WQ,m:ZQ,to:KQ,maps:XQ,logout:YQ,save:JQ,cancel:QQ,create:eee,disasters:tee,loading:nee,loading_events:ree,legend:iee,vertical_direction:oee,horizontal_direction:aee,legend_presentation:see,layers:lee,bivariate:uee,feed:cee,deselect:hee,spinner_text:fee,updated:dee,no_data_received:pee,wrong_data_received:mee,error:gee,sort_icon:yee,configs:_ee,errors:vee,event_list:xee,categories:bee,groups:wee,modes:See,advanced_analytics_data_list:Cee,mcda:Eee,create_layer:kee,analytics_panel:Aee,advanced_analytics_panel:Tee,advanced_analytics_empty:Pee,current_event:Iee,draw_tools:Mee,boundary_selector:Lee,geometry_uploader:Oee,focus_geometry:Fee,focus_geometry_layer:Ree,drawings:Dee,sidebar:zee,login:Bee,profile:$ee,reports:Nee,about:Uee,locate_me:jee,episode:Vee,loading_episodes:qee,cookie_banner:Gee,live_sensor:Hee},Zee="km",Kee="m",Xee="ke",Yee="peta",Jee="Keluar",Qee="Simpan",ete="Batalkan",tte="Buat",nte="Bencana",rte="Memuat...",ite="Memuat kejadian",ote="Legenda",ate="Arah vertikal",ste="Arah horizontal",lte="Penyajian legenda",ute="Lapisan",cte={color_manager:{layers_filter:"Lapisan",not_defined:"Tidak terdefinisi",sentiments_combinations_filter:"Gabungan sentimen",no_legends:"Tidak ada legenda yang memenuhi kondisi ini.",no_data:"Tidak Ada Data.",sentiments_tab:"Sentimen",color_legends_tab:"Legenda Warna",layers_tab:"Lapisan (indikator)"},panel:{header:"Matriks Bivariat"},matrix:{caption:{base_axis:"Sumbu Dasar",annex_axis:"Sumbu Tambahan",tooltip:{p1:"Diagram yang mencakup sumbu Dasar dan sumbu Tambahan membantu menetapkan hubungan antara dua kumpulan data.",li1:"Sumbu Tambahan - parameter yang kita analisis",li2:"Sumbu Dasar - titik referensi dalam analisis",b:"Contoh: lokasi terbaik untuk membuka kafe",p2:"Kita dapat menyelidiki jumlah tempat makan (sumbu Tambahan) terhadap Kerapatan populasi (sumbu Dasar).",p3:"Dalam skenario ini, pada awalnya kita tertarik dengan beberapa tempat makan, lalu kita mendapatkan informasi tambahan dari jumlah orang di tempat itu."}},header:{title:"Pilih dua lapisan untuk memeriksa korelasi",hint:"Lapisan dan korelasi ditampilkan untuk Area Pilihan terkini"},icon:{population:"Nilai dibagi dengan Populasi",area_km2:"Nilai dibagi dengan Area",total_building_count:"Nilai dibagi dengan Perkiraan Jumlah Bangunan",populated_area_km2:"Nilai dibagi dengan Area Berpenduduk",one:"Tanpa pembagi",roads:"Nilai dibagi dengan Total Panjang Jalan"},progress:{rendering:"Merender",applied:"Diterapkan pada peta"}},legend:{high:"Tinggi",low:"Rendah",medium:"Sedang"}},hte="Feed",fte="Batalkan Pilihan",dte="Mengumpulkan data",pte="Diperbarui",mte="Tidak ada data yang diterima",gte="Data yang diterima salah",yte="Kesalahan",_te="Sortir Ikon",vte={Kontur_public_feed:"Publik Kontur",Kontur_public_feed_description:"Feed berisi data waktu-nyata tentang Angin Topan, Kekeringan, Gempa, Banjir, Gunung Meletus, Kebakaran Hutan."},xte={default:"Maaf, kami mengalami masalah yang akan segera diperbaiki",timeout:"Waktu Permintaan Habis",cannot_connect:"Tidak dapat terhubung ke server",forbidden:"Terlarang",not_found:"Tidak ditemukan",unknown:"Tidak diketahui",server_error:"Kesalahan Server"},bte={severity_unknown:"Tidak diketahui",warning_title:"Tidak dapat menggunakan peta sebagai filter",warning_description:"Peta belum siap, coba nanti",bbox_filter_button:"Gunakan tampilan peta sebagai filter",analytics:{affected_people:{tooltip:"Orang yang Terdampak",value:"Tidak berdampak kemanusiaan"},settled_area_tooltip:"Area yang Ditempati",loss_tooltip:"Estimasi kerugian"},no_event_in_feed:"Kejadian tidak ditemukan di feed kejadian terkini",no_selected_disaster:"Tidak ada bencana yang dipilih",chose_disaster:"Pilih bencana"},wte={overlays:"Tumpang Susun",basemap:"Peta Dasar"},Ste={layers_in_selected_area:"Lapisan di area pilihan",your_layers:"Lapisan Anda",kontur_analytics:"Analitik Kontur",qa:"QA",osmbasedmap:"Berbasis OpenStreetMap",other:"Lainnya",elevation:"Elevasi",photo:"Foto",map:"Peta"},Cte={map:"Peta",about:"Tentang",reports:"Laporan",profile:"Profil"},Ete={load_world_data:"Memuat Data Dunia",numerator:"Pembilang",normalized_by:"Dinormalkan Dengan",sum:"Jumlah",min:"Min",max:"Maks",mean:"Rerata",stddev:"Simpangan baku",median:"Median",filter_denominator:"Filter Penyebut"},kte={},Ate={edit_layer:"Edit Lapisan",edit_features:"Edit Fitur",delete_layer:"Hapus Lapisan",create_layer:"Buat Lapisan",saving_layer:"Menyimpan lapisan...",field_name:"Nama bidang",layer_name:"Nama lapisan",marker_icon:"Ikon penanda",type:"Jenis",select:"Pilih",short_text:"Teks Singkat",long_text:"Teks Panjang",link:"Tautan",image:"Gambar",fields:"Bidang",add_field:"Tambahkan bidang",location:"Lokasi",edit_feature_placeholder:"Pilih beberapa fitur untuk mulai mengedit properti fitur"},Tte={header_title:"Analitik",error_loading:"Kesalahan saat mengambil data analitik"},Pte={header_title:"Analitik tingkat lanjut",error:"Kesalahan saat mengambil data analitik tingkat lanjut"},Ite={not_found:"Maaf, kejadian yang diminta tidak ditemukan.",error:"Terjadi kesalahan!"},Mte={not_found_request:"Maaf, kejadian yang diminta tidak ditemukan."},Lte={area:"Area",line:"Garis",point:"Titik",finish_drawing:"Selesai Menggambar",caption:"Klik peta untuk mulai menggambar",no_geometry_error:"Tidak ada gambar geometri untuk diunduh",overlap_error:"Poligon tidak boleh bertumpang-tindih sendiri",save_features:"Simpan fitur"},Ote={title:"Fokus ke batas administratif"},Fte={title:"Fokus ke geometri unggahan",error:"Kesalahan saat membaca file unggahan"},Rte={title:"Fokus ke geometri bebas"},Dte={settings:{name:"Area Pilihan"}},zte={self_directions_not_supported:"Tidak mendukung perpotongan dengan dirinya sendiri!"},Bte={biv_color_manager:"Pengelola warna",edit_osm:"Edit di OpenStreetMap",ruler:"Penggaris",collapse:"Ciutkan",expand:"Bentangkan",icon_alt:"Logo aplikasi"},$te={email:"Email",password:"Kata Sandi",login_button:"Masuk",sign_up:"Daftar",logging_in:"Masuk...",log_in:"Masuk",description:"Masuk untuk mengubah pengaturan Anda",error:{email_empty:"Email tidak boleh kosong!",email_invalid:"Email harus valid!",password:"Kata sandi tidak boleh kosong!",connect:"Tidak dapat terhubung ke layanan autentikasi"}},Nte={email:"Email",profileSettingsHeader:"Profil",interfaceTheme:"Tema",interfaceLanguage:"Bahasa",units:"Satuan",fullName:"Nama Lengkap",metric:"metrik",imperialBeta:"imperial (beta)",appSettingsHeader:"Pengaturan",saveButton:"Simpan perubahan",konturTheme:"Kontur",HOTTheme:"HANGAT","userBio(about)":"Bio",defaultDisasterFeed:"Feed bencana bawaan",defaultOSMeditor:"Editor OpenStreetMap bawaan (beta)",successNotification:"Semua perubahan telah berhasil diterapkan",languageOption:{en:"Inggris",es:"Spanyol",ar:"Arab",ko:"Korea",id:"Indonesia",de:"Jerman",uk:"Orang Ukraina"}},Ute={title:"Laporan Disaster Ninja",no_data:"Tidak ada data untuk laporan ini",sorting:"Menyortir data...",loading:"Memuat data",search_location:"Cari lokasi",open_josm:"Buka melalui kendali jarak jaruh JOSM",josm_logo_alt:"Logo JOSM",see_all:"Lihat semua laporan",wrong_id:"ID laporan salah",description:"<0>Kontur </0> menghasilkan beberapa laporan yang membantu memvalidasi kualitas OpenStreetMap. Laporan tersebut berisi tautan ke area di <4>osm.org </4> dan tautan untuk membukanya di editor JOSM dengan kendali jarak jauh untuk pengeditan yang diaktifkan."},jte={title:"Selamat datang di Disaster Ninja!",intro:"Apakah Anda ingin menerima kabar tentang bencana yang sedang terjadi? Anda tertarik dengan data populasi dan analitik lainnya yang tersaji seketika untuk wilayah mana pun di dunia? Disaster Ninja menampilkan beberapa kemampuan dari <2>Kontur</2> dalam mengatasi berbagai kebutuhan ini.<br/><br/>Pada awalnya, kami merancang alat ini sebagai alat bantu untuk pemetaan kemanusiaan. Kini, fungsionalitas dan kasus penggunaannya telah bertambah. Apakah Anda bekerja pada pengelolaan bencana, membangun kota cerdas, ataupun meneliti perubahan iklim, Disaster Ninja dapat membantu Anda untuk:",l1:"1. Selalu mendapatkan kabar terbaru tentang kejadian berbahaya terkini di seluruh dunia.",p1:"Panel Bencana disegarkan secara terus-menerus untuk memberi tahu Anda kejadian yang sedang berlangsung. Panel ini memakai data dari <2>Feed Kejadian Kontur</2>, yang juga dapat diakses melalui API.",l2:"2. Fokus pada area perhatian Anda.",p2:"Panel Peralatan Gambar memungkinkan Anda menggambar atau mengunggah geometri Anda sendiri pada peta. Anda juga dapat berfokus pada area yang terpapar bencana atau satuan administratif  negara, kota, atau wilayah.",l3:"3. Dapatkan analitik untuk area yang menjadi fokus.",p3:"Panel Analitik memperlihatkan jumlah orang yang tinggal di area tersebut untuk setiap <2>Populasi Kontur</2> dan perkiraan kesenjangan pemetaan di OpenStreetMap. Pelanggan Kontur memiliki akses ke ratusan indikator lainnya melalui Analitik Lanjut.",l4:"4. Selidiki data pada peta dan buat kesimpulan.",p4:"Panel Lapisan memberi Anda berbagai opsi untuk menampilkan dua indikator secara serentak pada peta bivariat, misalnya kepadatan populasi dan jarak ke stasiun pemadam kebakaran terdekat. Gunakan legenda warna untuk menilai area mana yang perlu diperhatikan. <br/>Petunjuk: secara umum, warna hijau menunjukkan risiko rendah/sedikit kesenjangan, warna merah  risiko tinggi/banyak kesenjangan.",p5:"Selain itu, Anda dapat beralih ke Laporan di panel kiri untuk mengakses data tentang potensi kesalahan dan inkonsistensi di OpenStreetMap serta membantu memperbaikinya dengan memetakan masing-masing area menggunakan editor JOSM.",goToMap:"Buka peta sekarang",p6:"Kami berharap agar alat ini bermanfaat bagi Anda. Gunakan kotak obrolan di Disaster Ninja untuk setiap pertanyaan tentang fungsionalitas, dan kami dengan senang hati akan memandu Anda. Anda juga dapat menghubungi kami melalui email di <1>hello@kontur.io</1> jika Anda memiliki tanggapan atau saran untuk meningkatkan alat ini.<br/><br/>Disaster Ninja adalah proyek sumber terbuka. Temukan kodenya di <8>akun GitHub Kontur</8>."},Vte={get_location_error:"Kesalahan saat memperoleh lokasi",feature_title:"Temukan saya"},qte="Episode",Gte="Memuat Episode",Hte={},Wte={},Zte={km:Zee,m:Kee,to:Xee,maps:Yee,logout:Jee,save:Qee,cancel:ete,create:tte,disasters:nte,loading:rte,loading_events:ite,legend:ote,vertical_direction:ate,horizontal_direction:ste,legend_presentation:lte,layers:ute,bivariate:cte,feed:hte,deselect:fte,spinner_text:dte,updated:pte,no_data_received:mte,wrong_data_received:gte,error:yte,sort_icon:_te,configs:vte,errors:xte,event_list:bte,categories:wte,groups:Ste,modes:Cte,advanced_analytics_data_list:Ete,mcda:kte,create_layer:Ate,analytics_panel:Tte,advanced_analytics_panel:Pte,advanced_analytics_empty:Ite,current_event:Mte,draw_tools:Lte,boundary_selector:Ote,geometry_uploader:Fte,focus_geometry:Rte,focus_geometry_layer:Dte,drawings:zte,sidebar:Bte,login:$te,profile:Nte,reports:Ute,about:jte,locate_me:Vte,episode:qte,loading_episodes:Gte,cookie_banner:Hte,live_sensor:Wte},Kte="km",Xte="m",Yte="bis",Jte="Karten",Qte="Abmelden",ene="Speichern",tne="Abbrechen",nne="Erstellen",rne="Katastrophen",ine="Wird geladen...",one="Ereignisse werden geladen",ane="Legende",sne="Vertikale Richtung",lne="Horizontale Richtung",une="Darstellung der Legende",cne="Ebenen",hne={color_manager:{layers_filter:"Ebenen",not_defined:"Nicht definiert",sentiments_combinations_filter:"Stimmungs-Kombinationen",no_legends:"Es gibt keine Legenden, die den Kriterien entsprechen.",no_data:"Keine Daten.",sentiments_tab:"Stimmungen",color_legends_tab:"Farbe Legenden",layers_tab:"Ebenen (Indikatoren)"},panel:{header:"Bivariate Matrix"},matrix:{caption:{base_axis:"Basisachse",annex_axis:"Hilfsachse",tooltip:{p1:"Diagramme mit der Basis- und der Hilfsachse helfen, eine Beziehung zwischen zwei Datenstzen herzustellen.",li1:"Hilfsachse - Parameter, die wir analysieren",li2:"Basisachse - Referenzpunkt in der Analyse",b:"Beispiel: der beste Standort fr die Erffnung eines Cafs",p2:"Wir knnen die Anzahl der Lokale (Hilfsachse) gegen die Bevlkerungsdichte (Basisachse) untersuchen.",p3:"In diesem Szenario liegt unser Interesse zunchst auf einer kleinen Anzahl von Lokalen, wobei uns die Anzahl der Personen in diesem Ort zustzliche Informationen liefert."}},header:{title:"Whlen Sie zwei Ebenen, um Zusammenhnge zu untersuchen",hint:"Die Ebenen und Zusammenhnge werden fr den aktuellen ausgewhlten Bereich angezeigt"},icon:{population:"Wert geteilt durch Einwohnerzahl",area_km2:"Wert geteilt durch Flche",total_building_count:"Wert geteilt durch geschtzte Gesamtbebauung",populated_area_km2:"Wert geteilt durch bevlkerte Flche",one:"Ohne Teilung",roads:"Wert geteilt durch die Gesamtlnge der Straen"},progress:{rendering:"bertragung",applied:"Wird auf die Karte angewendet"}},legend:{high:"Hoch",low:"Niedrig",medium:"Mittel"}},fne="Feed",dne="Auswahl aufheben",pne="Daten sammeln",mne="Aktualisiert",gne="Keine Daten erhalten",yne="Falsche Daten empfangen",_ne="Fehler",vne="Sortiersymbol",xne={Kontur_public_feed:"Kontur ffentlichkeit",Kontur_public_feed_description:"Der Feed enthlt Echtzeitdaten ber Wirbelstrme, Drren, Erdbeben, berschwemmungen, Vulkanausbrche und Waldbrnde."},bne={default:"Leider gibt es derzeit ein paar Probleme, die wir in Krze beheben werden",timeout:"Zeitberschreitung der Anfrage",cannot_connect:"Die Verbindung zum Server kann nicht hergestellt werden",forbidden:"Verboten",not_found:"Nicht gefunden",unknown:"Unbekannt",server_error:"Serverfehler"},wne={severity_unknown:"Unbekannt",warning_title:"Die Karte kann nicht als Filter verwendet werden",warning_description:"Die Karte ist noch nicht bereit. Bitte versuchen Sie es spter.",bbox_filter_button:"Kartenansicht als Filter verwenden",analytics:{affected_people:{tooltip:"Betroffene Menschen",value:"Keine humanitren Auswirkungen"},settled_area_tooltip:"Besiedeltes Gebiet",loss_tooltip:"Geschtzter Verlust"},no_event_in_feed:"Das Ereignis wurde nicht im aktuellen Ereignis-Feed gefunden",no_selected_disaster:"Keine Katastrophe ausgewhlt",chose_disaster:"Katastrophe auswhlen"},Sne={overlays:"berlagerungen",basemap:"Basiskarte"},Cne={layers_in_selected_area:"Ebenen im ausgewhlten Bereich",your_layers:"Ihre Ebenen",kontur_analytics:"Kontur Analytik",qa:"QS",osmbasedmap:"Basierend auf OpenStreetMap",other:"Andere",elevation:"Hhe",photo:"Foto",map:"Karte"},Ene={map:"Karte",about:"ber uns",reports:"Berichte",profile:"Profil"},kne={load_world_data:"Weltdaten laden",numerator:"Zhler",normalized_by:"Normalisiert auf",sum:"Summe",min:"Min",max:"Max",mean:"Mittelwert",stddev:"SD",median:"Median",filter_denominator:"Filter Nenner"},Ane={},Tne={edit_layer:"Ebene bearbeiten",edit_features:"Merkmale bearbeiten",delete_layer:"Ebene lschen",create_layer:"Ebene erstellen",saving_layer:"Ebene wird gespeichert...",field_name:"Feldname",layer_name:"Name der Ebene",marker_icon:"Markierungssymbol",type:"Typ",select:"Auswhlen",short_text:"Kurzer Text",long_text:"Langer Text",link:"Link",image:"Bild",fields:"Felder",add_field:"Feld hinzufgen",location:"Standort",edit_feature_placeholder:"Whlen Sie einige Merkmale aus, um Merkmalseigenschaften zu bearbeiten"},Pne={header_title:"Analytik",error_loading:"Fehler beim Abrufen von Analysedaten"},Ine={header_title:"Erweiterte Analytik",error:"Fehler beim Abrufen von erweiterten Analysedaten"},Mne={not_found:"Leider wurde das gewnschte Ereignis nicht gefunden.",error:"Es ist ein Fehler aufgetreten!"},Lne={not_found_request:"Leider wurde das gewnschte Ereignis nicht gefunden."},One={area:"Gebiet",line:"Linie",point:"Punkt",finish_drawing:"Zeichnen beenden",caption:"Klicken Sie auf die Karte, um mit dem Zeichnen zu beginnen",no_geometry_error:"Keine gezeichnete Formen zum Herunterladen",overlap_error:"Das Polygon darf sich nicht berschneiden",save_features:"Merkmale speichern"},Fne={title:"Fokus auf die Verwaltungsgrenze"},Rne={title:"Fokus auf die hochgeladene geometrische Form",error:"Fehler beim Lesen der hochgeladenen Datei"},Dne={title:"Fokus auf freihndig gezeichnete Formen"},zne={settings:{name:"Ausgewhltes Gebiet"}},Bne={self_directions_not_supported:"berschneidungen werden nicht untersttzt!"},$ne={biv_color_manager:"Farbmanager",edit_osm:"In OpenStreetMap bearbeiten",ruler:"Lineal",collapse:"Zusammenklappen",expand:"Erweitern",icon_alt:"Logo der Anwendung"},Nne={email:"E-Mail",password:"Passwort",login_button:"Anmelden",sign_up:"Registrieren",logging_in:"Anmelden...",log_in:"Einloggen",description:"Bitte melden Sie sich an, um Ihre Einstellungen zu ndern",error:{email_empty:"E-Mail darf nicht leer sein!",email_invalid:"E-Mail muss gltig sein!",password:"Passwort darf nicht leer sein!",connect:"Die Verbindung zum Authentifizierungsdienst konnte nicht hergestellt werden"}},Une={email:"E-Mail",profileSettingsHeader:"Profil",interfaceTheme:"Thema",interfaceLanguage:"Sprache",units:"Einheiten",fullName:"Vollstndiger Name",metric:"metrisch",imperialBeta:"imperial (beta)",appSettingsHeader:"Einstellungen",saveButton:"nderungen speichern",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Standardmige Katastrophenmeldung",defaultOSMeditor:"Standardmiger OpenStreetMap-Editor (Beta)",successNotification:"Alle nderungen wurden erfolgreich bernommen",languageOption:{en:"Englisch",es:"Spanisch",ar:"Arabisch",ko:"Koreanisch",id:"Indonesisch",de:"Deutsch",uk:"Ukrainisch"}},jne={title:"Disaster Ninja Berichte",no_data:"Keine Daten fr diesen Bericht",sorting:"Daten werden sortiert...",loading:"Daten werden geladen",search_location:"Standort suchen",open_josm:"ffnen ber die JOSM-Fernsteuerung",josm_logo_alt:"JOSM-Logo",see_all:"Alle Berichte anzeigen",wrong_id:"Falsche Berichts-ID",description:"<0>Kontur </0> generiert verschiedene Berichte, die bei der berprfung der Qualitt von OpenStreetMap helfen. Sie enthalten Links zu Gebieten auf <4>osm.org </4> und Links, um sie im JOSM-Editor mit aktivierter Fernsteuerung zur Bearbeitung ffnen zu knnen."},Vne={title:"Willkommen bei Disaster Ninja!",intro:"Mchten Sie ber aktuelle Katastrophen informiert werden? Sind Sie an sofortigen Bevlkerungsdaten und anderen Analysen fr eine beliebige Region auf der Welt interessiert? Disaster Ninja zeigt Ihnen einige der Funktionen von <2>Kontur</2>, mit denen diese Anforderungen umgesetzt werden knnen.<br/><br/>Ursprnglich haben wir es als Entscheidungshilfe fr Kartografen im humanitren Bereich entwickelt. Mittlerweile ist der Funktionsumfang und der Anwendungsbereich des Programms erweitert worden. Ganz gleich, ob Sie im Katastrophenmanagement ttig sind, eine intelligente Stadt bauen oder ber den Klimawandel forschen, Disaster Ninja kann Ihnen dabei helfen:",l1:"1. ber die aktuellen Gefahrenereignisse weltweit auf dem Laufenden zu bleiben.",p1:"Das Bedienfeld von Disasters wird kontinuierlich aktualisiert, um Sie ber aktuelle Ereignisse zu informieren. Es bezieht die Daten aus dem <2>Kontur Ereignis-Feed</2>, auf den Sie auch ber eine API zugreifen knnen.",l2:"2. Den Fokus auf Ihr Interessengebiet zu legen.",p2:"Mit den Zeichenwerkzeugen knnen Sie Ihre eigene geometrische Form auf die Karte zeichnen oder hochladen. Sie knnen sich auch auf ein von einer Katastrophe betroffenes Gebiet oder eine Verwaltungseinheit - ein Land, eine Stadt oder eine Region - konzentrieren.",l3:"3. Die Analytik fr den ausgewhlten Bereich aufrufen.",p3:"Das Bedienfeld Analytik zeigt die Anzahl der in diesem Gebiet lebenden Menschen pro <2>Kontur Bevlkerung</2> und geschtzte Kartierungslcken in OpenStreetMap. Kontur-Kunden haben ber Erweiterte Analytik Zugang zu Hunderten von weiteren Indikatoren.",l4:"4. Die Daten auf der Karte entdecken und Schlussfolgerungen ziehen.",p4:"Das Ebenen-Panel bietet Ihnen verschiedene Optionen, um zwei Indikatoren gleichzeitig auf einer bivariaten Karte anzuzeigen, z. B. die Bevlkerungsdichte und die Entfernung zur nchsten Feuerwache. Verwenden Sie die Farblegende, um zu beurteilen, welche Bereiche Aufmerksamkeit erfordern. <br/>Tipp: Im Allgemeinen bedeutet grn ein geringes Risiko / wenige Lcken, rot ein hohes Risiko / viele Lcken.",p5:"Auerdem knnen Sie im linken Bereich zu Berichte wechseln, um auf Daten zu potenziellen Fehlern und Unstimmigkeiten in OpenStreetMap zuzugreifen und dabei zu helfen, diese zu beheben, indem Sie das entsprechende Gebiet mit dem JOSM-Editor kartieren.",goToMap:"Jetzt die Karte aufrufen",p6:"Wir hoffen, dass dieses Tool Ihnen von Nutzen ist. Wenn Sie Fragen zur Funktionalitt haben, knnen Sie die Chatbox auf Disaster Ninja nutzen, und wir helfen Ihnen gerne weiter. Sie knnen uns auch eine E-Mail an <1>hello@kontur.io</1> schreiben, wenn Sie Feedback oder Vorschlge zur Verbesserung des Tools haben.<br/><br/>Disaster Ninja ist ein Open-Source-Projekt. Sie finden den Code in <8>Konturs GitHub-Konto</8>."},qne={get_location_error:"Fehler beim Abrufen des Standorts",feature_title:"Standort finden"},Gne="Episode",Hne="Episoden werden geladen",Wne={},Zne={},Kne={km:Kte,m:Xte,to:Yte,maps:Jte,logout:Qte,save:ene,cancel:tne,create:nne,disasters:rne,loading:ine,loading_events:one,legend:ane,vertical_direction:sne,horizontal_direction:lne,legend_presentation:une,layers:cne,bivariate:hne,feed:fne,deselect:dne,spinner_text:pne,updated:mne,no_data_received:gne,wrong_data_received:yne,error:_ne,sort_icon:vne,configs:xne,errors:bne,event_list:wne,categories:Sne,groups:Cne,modes:Ene,advanced_analytics_data_list:kne,mcda:Ane,create_layer:Tne,analytics_panel:Pne,advanced_analytics_panel:Ine,advanced_analytics_empty:Mne,current_event:Lne,draw_tools:One,boundary_selector:Fne,geometry_uploader:Rne,focus_geometry:Dne,focus_geometry_layer:zne,drawings:Bne,sidebar:$ne,login:Nne,profile:Une,reports:jne,about:Vne,locate_me:qne,episode:Gne,loading_episodes:Hne,cookie_banner:Wne,live_sensor:Zne},Xne="",Yne="",Jne="",Qne="",ere="",tre="",nre="",rre="",ire="",ore="...",are=" ",sre="",lre=" ",ure=" ",cre=" ",hre="",fre={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:" ,   .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:" ()"},panel:{header:" "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:",      ,       .",li1:"  - ,   ",li2:"  -   ",b:":     ",p2:"      ( )    ( ).",p3:"         ,          ."}},header:{title:"  ,    ",hint:"      "},icon:{population:",    ",area_km2:",   ",total_building_count:",     ",populated_area_km2:",    ",one:" ",roads:",     "},progress:{rendering:"",applied:"  "},loading_error:" ,     .     ."},legend:{high:"",low:"",medium:""}},dre="",pre=" ",mre=" ",gre="",yre=" ",_re="  ",vre="",xre=" ",bre={Kontur_public_feed_description:"       , , , , ,  ."},wre={default:",    ,    ",timeout:"   ",cannot_connect:"  '  ",forbidden:"",not_found:" ",unknown:"",server_error:" "},Sre={severity_unknown:"",warning_title:"     ",warning_description:"   ,  ",bbox_filter_button:"    ",analytics:{affected_people:{tooltip:"  ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"      ",no_selected_disaster:"  ",chose_disaster:" ",no_historical_disasters:"     ",no_feed_disasters:"   ",no_disasters:" ",severity_termination:"",severity_minor:"",severity_moderate:"",severity_severe:"",severity_extreme:"",open_timeline_button:"  "},Cre={overlays:"",basemap:" "},Ere={layers_in_selected_area:"   ",your_layers:" ",kontur_analytics:" Kontur",qa:" ",osmbasedmap:"  OpenStreetMap",other:"",elevation:"'",photo:"",map:""},kre={map:"",about:" ",reports:"",profile:"",privacy:""},Are={load_world_data:"    ",numerator:"",normalized_by:" ",sum:"",min:".",max:".",mean:"",stddev:" ",median:"",filter_numerator:" ",filter_denominator:" "},Tre={},Pre={edit_layer:" ",edit_features:" '",delete_layer:" ",create_layer:" ",saving_layer:" ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:"()",long_text:"()",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"     "},Ire={header_title:"",error_loading:"     "},Mre={header_title:" ",error:"      "},Lre={not_found:",   .",error:" !",analytics_for_selected:"   ",will_be_provided:"  "},Ore={not_found_request:",   ."},Fre={area:"",line:"",point:"",finish_drawing:" ",caption:"  ,   ",no_geometry_error:"   ",overlap_error:"     ",save_features:" '"},Rre={title:"   "},Dre={title:"   ",error:"    "},zre={title:"   "},Bre={settings:{name:" "}},$re={self_directions_not_supported:"  !"},Nre={biv_color_manager:" ",edit_osm:"  OpenStreetMap",ruler:"",collapse:"",expand:"",icon_alt:" "},Ure={email:" ",password:"",login_button:"",sign_up:"",logging_in:"...",log_in:"",description:",   ",error:{email_empty:"     !",email_invalid:"    !",password:"    !",connect:"  '   "}},jre={email:" ",profileSettingsHeader:"",interfaceTheme:"",interfaceLanguage:"",units:" ",fullName:" '",metric:" ",imperialBeta:"  ()",appSettingsHeader:"",saveButton:" ","userBio(about)":" ",defaultDisasterFeed:"   ",defaultOSMeditor:" OpenStreetMap   ()",successNotification:"   ",languageOption:{en:"",es:"",ar:"",ko:"",id:"",de:"",uk:""}},Vre={title:" Disaster Ninja",no_data:"   ",sorting:" ...",loading:" ",search_location:" ",open_josm:"  JOSM",josm_logo_alt:" JOSM",see_all:"  ",wrong_id:" ID ",description:"<0>Kontur </0>         OpenStreetMap.     <4>osm.org</4>  ,      JOSM  ."},qre={title:"  Disaster Ninja!",intro:"     ?           -  ? Disaster Ninja  <2>Kontur</2>    .<br/><br/>           .    .   ,         ,         , Disaster Ninja   :",l1:"1.        .",p1:"   ,      .      <2>Kontur</2>,        API.",l2:"2.     .",p2:' " "        .      ,     ,      ,   .',l3:"3.     .",p3:"    ,        <2> Kontur</2>      OpenStreetMap.  Kontur          .",l4:"4.       .",p4:' ""          , ,        .   ,  ,    . <br/>:       /  ,     /  .',p5:" ,        ,             OpenStreetMap    ,     JOSM.",goToMap:"  ",p6:" ,     .     Disaster Ninja,   -   ,      .         <1>hello@kontur.io</1>          .<br/><br/> Disaster Ninja     .      GitHub <8>Kontur</8>."},Gre={get_location_error:"    ",feature_title:" "},Hre="",Wre=" ",Zre={header:"   ",body:`     cookies,     ,    cookies,   Disaster Ninja   .   -    cookies        cookies.
  ,   [ ]( /)`,decline_all:"  cookies",accept_all:"  cookies"},Kre={start:"    ",finish:"    ",finishMessage:"  ",startMessage:"  ",noSensorsError:"     "},Xre={km:Xne,m:Yne,to:Jne,maps:Qne,logout:ere,save:tre,cancel:nre,create:rre,disasters:ire,loading:ore,loading_events:are,legend:sre,vertical_direction:lre,horizontal_direction:ure,legend_presentation:cre,layers:hre,bivariate:fre,feed:dre,deselect:pre,spinner_text:mre,updated:gre,no_data_received:yre,wrong_data_received:_re,error:vre,sort_icon:xre,configs:bre,errors:wre,event_list:Sre,categories:Cre,groups:Ere,modes:kre,advanced_analytics_data_list:Are,mcda:Tre,create_layer:Pre,analytics_panel:Ire,advanced_analytics_panel:Mre,advanced_analytics_empty:Lre,current_event:Ore,draw_tools:Fre,boundary_selector:Rre,geometry_uploader:Dre,focus_geometry:zre,focus_geometry_layer:Bre,drawings:$re,sidebar:Nre,login:Ure,profile:jre,reports:Vre,about:qre,locate_me:Gre,episode:Hre,loading_episodes:Wre,cookie_banner:Zre,live_sensor:Kre},Yre="en";mo.use(qO).use(IX).init({fallbackLng:Yre,debug:!1,defaultNS:"common",interpolation:{escapeValue:!1},contextSeparator:":",pluralSeparator:":",resources:{en:{common:qY},es:{common:GJ},ar:{common:HQ},ko:{common:Wee},id:{common:Zte},de:{common:Kne},uk:{common:Xre}}});const lr={t:(e,t)=>{const n=mo.t(e,t);return typeof n=="string"?n:(console.error(`Not supported translation result for key: ${e}`),e)},instance:mo},Ao=3,GO=[0,Ao-1,Ao*Ao-Ao,Ao*Ao-1],K1=`${lr.t("bivariate.legend.low")}`,X1=`${lr.t("bivariate.legend.high")}`,HO=lr.t("bivariate.legend.medium"),Jre=e=>Array.from(Array(Ao),(t,n)=>n).includes(e),OC=e=>{const t=Ao*Ao-Ao;return Array.from(Array(Ao),(n,r)=>t+r).includes(e)},FC=e=>Array.from(Array(Ao),(t,n)=>n*Ao).includes(e),Qre=e=>Array.from(Array(Ao),(t,n)=>n*Ao+(Ao-1)).includes(e);const Mb=mt.memo(({children:e,tooltipText:t,renderTooltip:n,tooltipId:r,hoverBehavior:a=!0,popupClasses:c})=>{const d=_C(e_.setCurrentTooltip),l=_C(e_.resetCurrentTooltip),x=A=>{t&&d({popupClasses:c,popup:t,position:{x:A.clientX,y:A.clientY},onOuterClick(L,F){F()},initiatorId:r,hoverBehavior:a})};return e({showTooltip:(A,...L)=>{n?n(A,d,...L):x(A)},hideTooltip:()=>{l()}})});Mb.displayName="TooltipWrapper";function Uf(e){return["get",e]}function eie(e){return["var",e]}function B4(e,t){return["<",e,t]}function RC(e,t){return["!=",e,t]}function tie(e,t){return["==",e,t]}function DC(e,t){return[e,t]}function zC(...e){const t=e.pop();return["case",...e.flat(2),t]}function nie(...e){return["concat",...e]}function rie(e,t,n){return["let",e,t,n]}function WO(...e){return["any",...e]}function BC(e){return typeof e=="string"?e==="1"?1:Uf(e):Array.isArray(e)?e.map((t,n)=>n===0?t:BC(t)):e}const iie=64,$C=e=>String.fromCharCode(iie+e);function oie(e,t){const n=BC(e.propName),r=BC(t.propName);return nie(zC(e.borders.map((a,c)=>DC(B4(n,a),$C(c))),$C(e.borders.length)),zC(t.borders.map((a,c)=>DC(B4(r,a),c)),t.borders.length))}function aie(e,t,n){return zC(Object.entries(t).map(([r,a])=>DC(tie(eie(e),r),a)),n)}function sie(e){return Object.fromEntries(e.map(Object.values))}function lie(e,t){return WO(RC(["/",Uf(e.quotient[0]),Uf(e.quotient[1])],0),RC(["/",Uf(t.quotient[0]),Uf(t.quotient[1])],0))}function uie(e,t,n){return rie("class",oie({propName:["/",...e.quotient],borders:e.steps.reduce((r,{value:a})=>(r.push(a),r),[])},{propName:["/",...t.quotient],borders:t.steps.reduce((r,{value:a})=>(r.push(a),r),[])}),aie("class",n,"transparent"))}function ZO({x:e,y:t,colors:n,source:r,sourceLayer:a,id:c="bivariate"}){const d={id:c,type:"fill",layout:{},filter:lie(e,t),paint:{"fill-color":uie(e,t,sie(n)),"fill-opacity":1,"fill-antialias":!1}};return r&&(d.source=r),a&&(d["source-layer"]=a),d}function cie(e,t="id"){const n=e.reduce((r,a)=>{const c=a[t].slice(0,1);return r[c]?r[c].push(a):r[c]=[a],r},{});return Object.values(n)}function hie(e,t="id"){return[...cie(e,t)].reverse().reduce((r,a)=>r.concat(a),[])}const fie=e=>e!==null&&typeof e=="object"&&"message"in e,g3=e=>e.charAt(0).toUpperCase()+e.slice(1),die=e=>e.map(g3).join(", "),NC=(e,t)=>e.reduce((n,r)=>n+r[t],0),pie=e=>e!=null,mie=e=>Array.isArray(e)?die(e):g3(e),$4=e=>{if(!e)return"";const[t,n]=e;return N4(t.unit.id)?n.name==="one"?`${t.label} (${t.unit.shortName})`:N4(n.unit.id)?n.name==="area_km2"?`${t.label} (${t.unit.shortName}/${n.unit.shortName})`:`${t.label} to ${n.label} (${t.unit.shortName}/${n.unit.shortName})`:`${t.label} to ${n.label} (${t.unit.shortName})`:`${t.label} to ${n.label}`},N4=e=>!!(e&&e!=="other"),gie="_tooltipRoot_zjmcz_1",yie="_tooltipRow_zjmcz_11",_ie="_sentimentDirection_zjmcz_17",vie="_sentimentLabel_zjmcz_21",xie="_sentimentInfo_zjmcz_25",bie="_indicator_zjmcz_29",fp={tooltipRoot:gie,tooltipRow:yie,sentimentDirection:_ie,sentimentLabel:vie,sentimentInfo:xie,indicator:bie},wie=({children:e,hints:t})=>{const n=(r,a,c,d)=>{t&&GO.includes(d)&&a({popup:Xe(Sie,{cellIndex:d,hints:t}),position:{x:r.clientX,y:r.clientY},hoverBehavior:!0})};return mt.isValidElement(e)?Xe(Mb,{renderTooltip:n,children:({showTooltip:r,hideTooltip:a})=>mt.cloneElement(e,{onCellPointerOver:r,onCellPointerLeave:a})}):null},Sie=({hints:e,cellIndex:t})=>{var r,a,c,d,l,x;if(!e)return null;const n=[{label:(r=e.x)==null?void 0:r.label,direction:(c=(a=e.x)==null?void 0:a.direction)==null?void 0:c[OC(t)?0:1],indicator:OC(t)?K1:X1},{label:(d=e.y)==null?void 0:d.label,direction:(x=(l=e.y)==null?void 0:l.direction)==null?void 0:x[FC(t)?0:1],indicator:FC(t)?K1:X1}];return Xe("div",{className:Ci(fp.tooltipRoot),children:n.map(({label:b,direction:E,indicator:A},L)=>mn("div",{className:Ci(fp.tooltipRow),children:[Xe("span",{className:Ci(fp.indicator),children:A}),mn("span",{className:Ci(fp.sentimentInfo),children:[mn("span",{className:Ci(fp.sentimentLabel),children:[b," "]}),E&&Xe("span",{className:Ci(fp.sentimentDirection),children:mie(E)})]})]},L))})},Cie={hints:{x:{label:"Average NDVI, JUN 2019",direction:[["bad"],["good"]]},y:{label:"Multi-hazard exposure PDC GRVA",direction:[["unimportant"],["bad","important"]]}}},Eie={x:{label:"Multi-hazard exposure PDC GRVA to 1",steps:[{label:"",value:0},{label:"",value:.48},{label:"",value:.62},{label:"",value:1}],quality:.997101882904748,quotient:["mhe_index","one"]},y:{label:"Average NDVI, JUN 2019 to 1",steps:[{label:"",value:-1},{label:"",value:.3625118070036407},{label:"",value:.6441754083082613},{label:"",value:1}],quality:.9410965072118505,quotient:["avg_ndvi","one"]}},kie=[{label:"C1",color:"rgba(90,200,127,0.5)"},{label:"C2",color:"rgba(179,165,130,0.5)"},{label:"C3",color:"rgba(153,153,153,0.5)"},{label:"B1",color:"rgba(169,218,122,0.5)"},{label:"B2",color:"rgba(195,163,111,0.5)"},{label:"B3",color:"rgba(204,103,116,0.5)"},{label:"A1",color:"rgba(232,232,157,0.5)"},{label:"A2",color:"rgba(216,159,88,0.5)"},{label:"A3",color:"rgba(228,26,28,0.5)"}];function Aie(){return mn(zL,{children:[Xe(BO,{}),Xe(wie,{meta:Cie,children:Xe(aq,{showAxisLabels:!0,size:Ao,axis:Eie,cells:kie})})]})}const Tie="_LegendGrid_1ko5k_1",Pie="_LegendGridCell_1ko5k_10",Iie="_LegendGridCellChanged_1ko5k_17",Mie="_LegendGridCellUndefinedChanged_1ko5k_22",Lie="_CircleIndicator_1ko5k_26",Oie="_UndefinedColorsIndicator_1ko5k_36",dp={LegendGrid:Tie,LegendGridCell:Pie,LegendGridCellChanged:Iie,LegendGridCellUndefinedChanged:Mie,CircleIndicator:Lie,UndefinedColorsIndicator:Oie},Gg=({legendSteps:e,changes:t={}})=>{const n=GO.map(a=>e[a]),r=e.some(a=>a.isFallbackColor);return mn("div",{className:dp.LegendGrid,children:[n.map(a=>{var b;let c=a.color,d=!1,l,x;if(t[a.label]){d=!0;const E=(b=t[a.label])==null?void 0:b.color;c=E,l=E?dp.LegendGridCellChanged:dp.LegendGridCellUndefinedChanged}return c&&(x={backgroundColor:c}),Xe("div",{className:Ci(dp.LegendGridCell,l),style:x,children:d&&Xe("div",{className:dp.CircleIndicator})},a.label)}),r&&Xe("div",{className:dp.UndefinedColorsIndicator,children:Xe(Fie,{})})]})},Fie=()=>mn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[Xe("circle",{cx:"10",cy:"10",r:"10",fill:"white"}),Xe("path",{d:"M10 3C6.13438 3 3 6.13438 3 10C3 13.8656 6.13438 17 10 17C13.8656 17 17 13.8656 17 10C17 6.13438 13.8656 3 10 3ZM10 15.8125C6.79063 15.8125 4.1875 13.2094 4.1875 10C4.1875 6.79063 6.79063 4.1875 10 4.1875C13.2094 4.1875 15.8125 6.79063 15.8125 10C15.8125 13.2094 13.2094 15.8125 10 15.8125Z",fill:"#F5222D"}),Xe("path",{d:"M9.25 12.75C9.25 12.9489 9.32902 13.1397 9.46967 13.2803C9.61032 13.421 9.80109 13.5 10 13.5C10.1989 13.5 10.3897 13.421 10.5303 13.2803C10.671 13.1397 10.75 12.9489 10.75 12.75C10.75 12.5511 10.671 12.3603 10.5303 12.2197C10.3897 12.079 10.1989 12 10 12C9.80109 12 9.61032 12.079 9.46967 12.2197C9.32902 12.3603 9.25 12.5511 9.25 12.75ZM9.625 11H10.375C10.4438 11 10.5 10.9438 10.5 10.875V6.625C10.5 6.55625 10.4438 6.5 10.375 6.5H9.625C9.55625 6.5 9.5 6.55625 9.5 6.625V10.875C9.5 10.9438 9.55625 11 9.625 11Z",fill:"#F5222D"})]}),Hg=[{label:"A1",color:"rgba(232,232,157,0.5)"},{label:"A2",color:"rgba(216,159,88,0.5)"},{label:"A3",color:"rgba(228,26,28,0.5)"},{label:"B1",color:"rgba(169,218,122,0.5)"},{label:"B2",color:"rgba(159,171,87,0.5)"},{label:"B3",color:"rgba(140,127,57,0.5)"},{label:"C1",color:"rgba(90,200,127,0.5)"},{label:"C2",color:"rgba(88,176,117,0.5)"},{label:"C3",color:"rgba(83,152,106,0.5)"}],Rie=mn("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:["All next colors - undefined",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:void 0},A3:{color:void 0},C1:{color:void 0},C3:{color:void 0}}}),"No changes",Xe(Gg,{legendSteps:Hg,changes:{}}),"All changed",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:"rgba(173, 169, 200, 0.5)"},A3:{color:"rgba(12, 155, 237, 0.5)"},C1:{color:"rgba(171, 216, 237, 0.5)"},C3:{color:"rgba(83, 152, 106, 0.5)"}}}),"Half of cells changed",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:"rgba(173, 169, 200, 0.5)"},C3:{color:"rgba(83, 152, 106, 0.5)"}}}),"Half of cells changed, half comes incorrect",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:void 0},A3:{color:"rgba(12, 155, 237, 0.5)"},C1:{color:"rgba(173, 169, 200, 0.5)"},C3:{color:void 0}}})]}),Die="modulepreload",zie=function(e,t){return new URL(e,t).href},U4={},Bie=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(c=>{if(c=zie(c,r),c in U4)return;U4[c]=!0;const d=c.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!r)for(let E=a.length-1;E>=0;E--){const A=a[E];if(A.href===c&&(!d||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${l}`))return;const b=document.createElement("link");if(b.rel=d?"stylesheet":Die,d||(b.as="script",b.crossOrigin=""),b.href=c,document.head.appendChild(b),d)return new Promise((E,A)=>{b.addEventListener("load",E),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t()).catch(c=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c})},$ie=e=>new Proxy({},{get:(t,n)=>{if(typeof n=="string")return mt.lazy(()=>e(n).then(r=>({default:r[n]})))}}),j4="bivariate-greetings-disabled",Nie="_container_zzzsn_1",Uie="_closeButton_zzzsn_8",V4={container:Nie,closeButton:Uie},{BivariateGreetings:jie}=$ie(()=>Bie(()=>import("./BivariateGreetings-fa46a9eb.js"),[],import.meta.url)),Vie=({className:e})=>{const[t,n]=mt.useState(!1);mt.useEffect(()=>{!Oh.getItem(j4)&&!t&&n(!0)},[]);const r=()=>{n(!1),Oh.setItem(j4,"true")};return t?mn("div",{className:Ci(e,V4.container),children:[Xe(mt.Suspense,{fallback:null,children:Xe(jie,{})}),Xe("div",{onClick:r,className:V4.closeButton,children:Xe(eV,{})})]}):null},qie=()=>Xe(Vie,{});var Gie=0;function Hie(e){var t=e.get,n=e.set,r=e.throttle,a=r===void 0?0:r;return function(c){var d="__persistIntervalId"+ ++Gie;return function(l){return function(x,b){var E=b.atom.id;b.tracks==null&&(b.state=t(c??E));var A=l(x,b);return n!=null&&x.schedule(function(){var L;a==0?n(c??E,A.state):((L=A.ctx[d])!=null?L:null)===null&&(A.ctx[d]=setTimeout(function(){A.ctx[d]=null,n(c??E,x.getCache(A.atom).state)},150))}),A}}}}var Wie={get:function(e){var t,n=(t=globalThis.localStorage)==null?void 0:t.getItem(e);return n?JSON.parse(n):void 0},set:function(e,t){var n;return(n=globalThis.localStorage)==null?void 0:n.setItem(e,JSON.stringify(t))},throttle:150};Hie(Wie);function Zie(e,t){if(Object.is(e,t))return!0;if(H1(e)&&H1(t)){var n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(function(a){return Object.is(e[a],t[a])})}return!1}function KO(e){return e===void 0&&(e=Zie),function(t){return function(n,r){var a=t(n,r);return r.tracks!=null&&e(r.state,a.state)&&(a.state=r.state),a}}}class em extends Error{constructor(n,r,a=0){super(n);an(this,"problem");an(this,"status",0);this.problem=r,this.status=a,Object.setPrototypeOf(this,em.prototype)}}function XO(e){return e.problem?typeof e.problem=="object":!1}const YO="Abort error",q4=e=>e?typeof e=="string"?e===YO:XO(e)?e.problem.kind==="canceled":e instanceof DOMException?e.name==="AbortError":!1:!1;async function Kie(e,t){return new Promise((n,r)=>{if(e.signal.aborted)return Promise.reject(new DOMException("Aborted","AbortError"));const a=()=>{e.signal.removeEventListener("abort",a),r(new DOMException("Aborted","AbortError"))};e.signal.addEventListener("abort",a),t.then(n).catch(r).finally(()=>e.signal.removeEventListener("abort",a))})}function Xie(e){return"loading"in e||"error"in e}const Yie="",Jie=e=>(...t)=>{e===Yie&&console.log(...t)},I2={inheritState:!1,store:MO,auto:!0},JO=(e=>t=>{if(!e.has(t))return e.add(t),t;console.warn(`Atom with name ${t} already exist. Full page reload recommended`);const n=t+performance.now();return JO(n)})(new Set);function QO(e,t,n,r={}){const a=Jie(n),c={...r,auto:r.auto??I2.auto,inheritState:r.inheritState??I2.inheritState,store:r.store??I2.store},d={request:x=>x,refetch:()=>null,cancel:()=>null,_done:(x,b)=>({params:x,data:b}),_error:(x,b)=>({params:x,error:b}),_loading:x=>({params:x})};return e&&(d.depsAtom=e),Qr(d,({onAction:x,schedule:b,create:E,onChange:A,get:L},F={loading:!1,data:null,error:null,lastParams:null,dirty:!1})=>{const $={...F};return x("request",N=>{$.dirty=!0,b(async(Z,R)=>{if(a("1. Request",N),R.abortController){a("2. Cancel flow"),R.abortController.abort(),delete R.abortController;let G=!1;try{a("2.1. Cancel flow: await activeRequest"),await R.activeRequest}catch(Q){a("2.2. Cancel flow: activeRequest have error"),G=q4(Q)}G&&(a("2.3. Cancel flow: activeRequest was canceled"),a("2.4. Repeat request"),Z(E("request",N)));return}a("3. Set loading state"),Z(E("_loading",N));const q=new AbortController;try{R.abortController=q,R.activeRequest=Kie(q,t(N,q)),a("4. Wait result");const G=await R.activeRequest;G===void 0&&console.warn("resourceAtom: fetcherResult undefined"),delete R.activeRequest,a("5. Check that it was aborted:"),q.signal.throwIfAborted(),a("5.1.A. request was not aborted"),R.abortController===q&&(a("5.1.A.1. Done"),delete R.abortController,Z(E("_done",N,G)),c.onSuccess&&c.onSuccess(Z,N,G))}catch(G){if(q4(G))a("5.1.B. request was aborted"),a("5.1.B.1. Error"),Z(E("_error",N,YO));else if(R.abortController===q){delete R.abortController,a("5.1.C Not abort error"),console.error(`[${n}]:`,G);const Q=fie(G)?G.message:typeof G=="string"?G:"Unknown";Z(E("_error",N,Q))}}})}),x("refetch",()=>{b((N,Z)=>{F.dirty&&!F.loading?N(E("request",$.lastParams)):console.error(`[${n}]:`,"Do not call refetch before request")})}),x("cancel",()=>{b(async(N,Z)=>{Z.abortController&&(Z.abortController.abort(),delete Z.abortController)})}),x("_loading",({params:N})=>{$.loading=!0,$.error=null,$.lastParams=N}),x("_error",({params:N,error:Z})=>{$.error=Z,$.lastParams=N,$.loading=!1}),x("_done",({data:N,params:Z})=>{$.data=N,$.error=null,$.loading=!1,$.lastParams=Z}),d.depsAtom?A("depsAtom",N=>{var Z;H1(N)?(c.inheritState&&($.loading=N.loading||$.loading,$.error=N.error||$.error),Xie(N)?!N.loading&&!N.error&&N.dirty&&b(R=>R(E("request",N.data))):b(R=>R(E("request",N)))):N!==null?b(R=>R(E("request",N))):console.warn(`Resource atom with name ${n} skips running as its dependency state ${(Z=d==null?void 0:d.depsAtom)==null?void 0:Z.id} is null`)}):c.auto&&!$.dirty&&b(N=>N(E("request",null))),$},{id:JO(n),store:c.store,decorators:[KO()]})}const yh={global:{},custom:{},overrides:{},merged:{}};function Qie(){const e=globalThis.konturAppConfig??{},t={apiGateway:e.API_GATEWAY,reportsApi:e.REPORTS_API,bivariateTilesRelativeUrl:e.BIVARIATE_TILES_RELATIVE_URL,bivariateTilesServer:e.BIVARIATE_TILES_SERVER,bivariateTilesIndicatorsClass:e.BIVARIATE_TILES_INDICATORS_CLASS,refreshIntervalSec:e.REFRESH_INTERVAL_SEC,mapBaseStyle:e.MAP_BASE_STYLE,featuresByDefault:e.FEATURES_BY_DEFAULT,defaultFeed:e.DEFAULT_FEED,keycloakUrl:e.KEYCLOAK_URL,keycloakRealm:e.KEYCLOAK_REALM,keycloakClientId:e.KEYCLOAK_CLIENT_ID,yandexMetricaId:e.YANDEX_METRICA_ID,baseUrl:{BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_BASE_PATH,mapBlankSpaceId:e.MAP_BLANK_SPACE_ID,autoFocus:{maxZoom:e.AUTOFOCUS_ZOOM},intercom:{name:e.INTERCOM_DEFAULT_NAME,app_id:e.INTERCOM_APP_ID,custom_launcher_selector:e.INTERCOM_SELECTOR},osmEditors:e.OSM_EDITORS||[{id:"josm",title:"JOSM",url:"https://www.openstreetmap.org/edit?editor=remote#map="}],effectiveFeatures:{}};return yh.global=t,t}function eoe(e){return e.features&&e.features.length>0?Object.fromEntries((e.features??[]).map(t=>[t.name,t.configuration||!0])):Object.fromEntries((e.featuresByDefault??[]).map(t=>[t,!0]))}function toe(){Qie();const e={defaultLayers:[],...yh.global,...yh.custom,...yh.overrides};return e.effectiveFeatures=eoe(e),Object.assign(yh.merged,e),e}toe();const Jr=new Proxy(yh.merged,{get(e,t){return d3&&console.warn("\x1B[1;35m appConfig\x1B[0m",t,yh.merged[t]),yh.merged[t]}});console.info(`%c Disaster Ninja ${{}.PACKAGE_VERSION} deployment:
  - Build Time: ${{}.BUILD_TIME}
  - Git Branch: ${{}.GIT_BRANCH}
  - Git Commit: #${{}.GIT_COMMIT_HASH}
  - Git Commit Time: ${{}.GIT_COMMIT_TIME}
  `,"color: #bada55");const noe=e=>e.replace(/^\/|\/$/g,""),roe=(...e)=>e.map(noe).filter(t=>t.length!==0).join("/"),eF=(e,t=Jr.baseUrl)=>typeof e=="string"?"/"+roe(t,e):eF(e.parentRoute?`${e.parentRoute}/${e.slug}`:e.slug,t),ioe=e=>{LC.push(eF(e)+globalThis.location.search)},ooe="application/json",tF="Content-Type",M2=Symbol();function G4(e={}){var t;return(t=Object.entries(e).find(([n])=>n.toLowerCase()===tF.toLowerCase()))===null||t===void 0?void 0:t[1]}function H4(e){return/^application\/.*json.*/.test(e)}const Gf=function(e,t,n=!1){return Object.entries(t).reduce((r,[a,c])=>{const d=e[a];return Array.isArray(d)&&Array.isArray(c)?r[a]=n?[...d,...c]:c:typeof d=="object"&&typeof c=="object"?r[a]=Gf(d,c,n):r[a]=c,r},{...e})},tm={options:{},errorType:"text",polyfills:{},polyfill(e,t=!0,n=!1,...r){const a=this.polyfills[e]||(typeof self<"u"?self[e]:null)||(typeof global<"u"?global[e]:null);if(t&&!a)throw new Error(e+" is not defined");return n&&a?new a(...r):a}};function aoe(e,t=!1){tm.options=t?e:Gf(tm.options,e)}function soe(e,t=!1){tm.polyfills=t?e:Gf(tm.polyfills,e)}function loe(e){tm.errorType=e}const uoe=e=>t=>e.reduceRight((n,r)=>r(n),t)||t;class nF extends Error{}const coe=e=>{const t=Object.create(null);e=e._addons.reduce((G,Q)=>Q.beforeRequest&&Q.beforeRequest(G,e._options,t)||G,e);const{_url:n,_options:r,_config:a,_catchers:c,_resolvers:d,_middlewares:l,_addons:x}=e,b=new Map(c),E=Gf(a.options,r);let A=n;const L=uoe(l)((G,Q)=>(A=G,a.polyfill("fetch")(G,Q)))(n,E),F=new Error,$=L.catch(G=>{throw{__wrap:G}}).then(G=>{if(!G.ok){const Q=new nF;if(Q.cause=F,Q.stack=Q.stack+`
CAUSE: `+F.stack,Q.response=G,Q.url=A,G.type==="opaque")throw Q;return G.text().then(se=>{var ee;if(Q.message=se,a.errorType==="json"||((ee=G.headers.get("Content-Type"))===null||ee===void 0?void 0:ee.split(";")[0])==="application/json")try{Q.json=JSON.parse(se)}catch{}throw Q.text=se,Q.status=G.status,Q})}return G}),N=G=>G.catch(Q=>{const se=Q.__wrap||Q,ee=se.status&&b.get(se.status)||b.get(se.name)||Q.__wrap&&b.has(M2)&&b.get(M2);if(ee)return ee(se,e);throw se}),Z=G=>Q=>N(G?$.then(se=>se&&se[G]()).then(se=>Q?Q(se):se):$.then(se=>Q?Q(se):se)),R={_wretchReq:e,_fetchReq:L,_sharedState:t,res:Z(null),json:Z("json"),blob:Z("blob"),formData:Z("formData"),arrayBuffer:Z("arrayBuffer"),text:Z("text"),error(G,Q){return b.set(G,Q),this},badRequest(G){return this.error(400,G)},unauthorized(G){return this.error(401,G)},forbidden(G){return this.error(403,G)},notFound(G){return this.error(404,G)},timeout(G){return this.error(408,G)},internalError(G){return this.error(500,G)},fetchError(G){return this.error(M2,G)}},q=x.reduce((G,Q)=>({...G,...Q.resolver}),R);return d.reduce((G,Q)=>Q(G,e),q)},hoe={_url:"",_options:{},_config:tm,_catchers:new Map,_resolvers:[],_deferred:[],_middlewares:[],_addons:[],addon(e){return{...this,_addons:[...this._addons,e],...e.wretch}},errorType(e){return{...this,_config:{...this._config,errorType:e}}},polyfills(e,t=!1){return{...this,_config:{...this._config,polyfills:t?e:Gf(this._config.polyfills,e)}}},url(e,t=!1){if(t)return{...this,_url:e};const n=this._url.split("?");return{...this,_url:n.length>1?n[0]+e+"?"+n[1]:this._url+e}},options(e,t=!1){return{...this,_options:t?e:Gf(this._options,e)}},headers(e){return{...this,_options:Gf(this._options,{headers:e||{}})}},accept(e){return this.headers({Accept:e})},content(e){return this.headers({[tF]:e})},auth(e){return this.headers({Authorization:e})},catcher(e,t){const n=new Map(this._catchers);return n.set(e,t),{...this,_catchers:n}},resolve(e,t=!1){return{...this,_resolvers:t?[e]:[...this._resolvers,e]}},defer(e,t=!1){return{...this,_deferred:t?[e]:[...this._deferred,e]}},middlewares(e,t=!1){return{...this,_middlewares:t?e:[...this._middlewares,...e]}},fetch(e=this._options.method,t="",n=null){let r=this.url(t).options({method:e});const a=G4(r._options.headers),c=typeof n=="object"&&(!r._options.headers||!a||H4(a));return r=n?c?r.json(n,a):r.body(n):r,coe(r._deferred.reduce((d,l)=>l(d,d._url,d._options),r))},get(e=""){return this.fetch("GET",e)},delete(e=""){return this.fetch("DELETE",e)},put(e,t=""){return this.fetch("PUT",t,e)},post(e,t=""){return this.fetch("POST",t,e)},patch(e,t=""){return this.fetch("PATCH",t,e)},head(e=""){return this.fetch("HEAD",e)},opts(e=""){return this.fetch("OPTIONS",e)},body(e){return{...this,_options:{...this._options,body:e}}},json(e,t){const n=G4(this._options.headers);return this.content(t||H4(n)&&n||ooe).body(JSON.stringify(e))}};function rc(e="",t={}){return{...hoe,_url:e,_options:t}}rc.default=rc;rc.options=aoe;rc.errorType=loe;rc.polyfills=soe;rc.WretchError=nF;function W4(e){return typeof e<"u"?e:""}const foe=(e,t,n,r)=>{let a;if(typeof t=="string")a=t;else{const d=r.polyfill("URLSearchParams",!0,!0);for(const l in t){const x=t[l];if(t[l]instanceof Array)for(const b of x)d.append(l,W4(b));else d.append(l,W4(x))}a=d.toString()}const c=e.split("?");return a?n||c.length<2?c[0]+"?"+a:e+"&"+a:n?c[0]:e},doe={wretch:{query(e,t=!1){return{...this,_url:foe(this._url,e,t,this._config)}}}},poe=doe;function Z4(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(typeof t=="object"?JSON.stringify(t):""+t)}function moe(e){return Object.keys(e).map(t=>{const n=e[t];return n instanceof Array?n.map(r=>Z4(t,r)).join("&"):Z4(t,n)}).join("&")}const goe={wretch:{formUrl(e){return this.body(typeof e=="string"?e:moe(e)).content("application/x-www-form-urlencoded")}}},yoe=goe;function UC(e){this.message=e}UC.prototype=new Error,UC.prototype.name="InvalidCharacterError";var K4=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new UC("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,c=0,d="";r=t.charAt(c++);~r&&(n=a%4?64*n+r:r,a++%4)?d+=String.fromCharCode(255&n>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return d};function _oe(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(K4(n).replace(/(.)/g,function(r,a){var c=a.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}(t)}catch{return K4(t)}}function Y1(e){this.message=e}function X4(e,t){if(typeof e!="string")throw new Y1("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(_oe(e.split(".")[n]))}catch(r){throw new Y1("Invalid token specified: "+r.message)}}Y1.prototype=new Error,Y1.prototype.name="InvalidTokenError";function voe(e){if(e!=null&&e.json){const t=e==null?void 0:e.json;if(t!==null){if(Array.isArray(t))return t.map(n=>n.name&&n.message?`${n.name}: ${n.message}`:n).join("<br/>");if(t!=null&&t.error)return t.error;if(t!=null&&t.errors&&Array.isArray(t.errors))return t.errors.reduce((n,r)=>(r!=null&&r.message&&n.push(r.message),n),[]).join("<br/>")}return String(t)}return(e==null?void 0:e.text)??(e==null?void 0:e.message)??"Unknown Error"}function Y4(e){var a,c;let t="",n={kind:"unknown",temporary:!0},r=0;return e instanceof em?e:(d3&&console.error(e),e instanceof rc.WretchError?(r=e.status,r===400?n={kind:"bad-request"}:r===401?(t=((a=e.json)==null?void 0:a.error_description)??(e==null?void 0:e.message)??"Auth error",n={kind:"unauthorized",data:(c=e.json)==null?void 0:c.error}):r===403?n={kind:"forbidden"}:r===404?n={kind:"not-found"}:r===408?n={kind:"timeout",temporary:!0}:r>=500&&(n={kind:"server",data:(e==null?void 0:e.json)??(e==null?void 0:e.text)})):xoe(e)?n={kind:"canceled"}:n={kind:"client-unknown"},t||(t=voe(e)),new em(t||"Unknown error",n,r))}function xoe(e){var t;return(e==null?void 0:e.name)==="AbortError"||((t=e==null?void 0:e.problem)==null?void 0:t.kind)==="canceled"}const Wg={GET:"get",POST:"post",PUT:"put",PATCH:"patch",DELETE:"delete"},L2="auth_token",Hu=class Hu{constructor({instanceId:t="default",notificationService:n,loginApiPath:r="",refreshTokenApiPath:a="",keycloakClientId:c="",expiredTokenCallback:d,unauthorizedCallback:l,disableAuth:x=!1,storage:b=Oh,baseURL:E}){an(this,"instanceId");an(this,"notificationService");an(this,"expiredTokenCallback");an(this,"unauthorizedCallback");an(this,"loginApiPath");an(this,"refreshTokenApiPath");an(this,"disableAuth");an(this,"storage");an(this,"token","");an(this,"refreshToken","");an(this,"tokenExpirationDate");an(this,"tokenRefreshFlowPromise");an(this,"keycloakClientId");an(this,"baseURL");an(this,"timeToRefresh",1e3*60*3);this.instanceId=t,this.notificationService=n,this.loginApiPath=r,this.refreshTokenApiPath=a,this.keycloakClientId=c,this.disableAuth=x,this.storage=b,this.expiredTokenCallback=d,this.unauthorizedCallback=l,this.baseURL=E}static getInstance(t="default"){if(Hu.instances[t])return Hu.instances[t];throw new Error("You have to initialize api client first!")}static init(t){const n=t.instanceId||"default";if(Hu.instances[n])throw new Error(`Api client instance with Id: ${n} already initialized`);return Hu.instances[n]=new Hu(t),Hu.instances[n]}storeTokens(t,n){let r="";try{const a=X4(t);if(d3&&console.debug({decodedToken:a,now:new Date().getTime()}),a&&a.exp){const c=new Date(a.exp*1e3);if(c>new Date)return this.setAuth(t,n,c),this.storage.setItem(L2,JSON.stringify({token:t,refreshToken:n})),!0;r="Token is expired right after receiving, clock is out of sync"}}catch{r="Token decode error"}throw new em(r||"Token error",{kind:"bad-data"})}checkLocalAuthToken(){if(this.token&&this.refreshToken)return!0;try{const t=this.storage.getItem(L2);if(t){const{token:n,refreshToken:r}=JSON.parse(t);if(n&&r){const a=X4(n),c=new Date(a.exp*1e3);return this.setAuth(n,r,c),!0}}}catch(t){console.debug("checkLocalAuthToken:",t)}return this.resetAuth(),!1}resetAuth(){this.token="",this.refreshToken="",this.tokenExpirationDate=void 0,this.storage.removeItem(L2)}setAuth(t,n,r){this.token=t,this.refreshToken=n,this.tokenExpirationDate=r}async _tokenRefreshFlow(){if(!this.tokenExpirationDate)return!1;if(this.tokenExpirationDate.getTime()-new Date().getTime()<this.timeToRefresh)try{await this.refreshAuthToken()}catch{return!1}return!0}async isTokenOk(){this.tokenRefreshFlowPromise||(this.tokenRefreshFlowPromise=this._tokenRefreshFlow());const t=await this.tokenRefreshFlowPromise;return this.tokenRefreshFlowPromise=void 0,t}async login(t,n){const r={username:t,password:n,client_id:this.keycloakClientId,grant_type:"password"};return await this.requestTokenOrThrow(this.loginApiPath,r)}async refreshAuthToken(){const t={client_id:this.keycloakClientId,refresh_token:this.refreshToken,grant_type:"refresh_token"};return await this.requestTokenOrThrow(this.refreshTokenApiPath,t)}async requestTokenOrThrow(t,n){var r,a;try{const c=await rc(t).addon(yoe).formUrl(n).errorType("json").post().res(O2);if((r=c==null?void 0:c.data)!=null&&r.access_token)return this.storeTokens(c.data.access_token,c.data.refresh_token);throw new em("Token error",{kind:"bad-data"})}catch(c){throw this.resetAuth(),(a=this.expiredTokenCallback)==null||a.call(this),Y4(c)}}async logout(){this.resetAuth()}async call(t,n,r,a=!this.disableAuth,c={}){var x;const d=["post","put","patch"];let l=rc(this.baseURL,{mode:"cors"}).addon(poe).url(n);c.signal&&(l=l.options({signal:c.signal})),c.headers&&(l=l.headers(c.headers)),!this.disableAuth&&a&&this.token&&await this.isTokenOk()&&(l=l.auth(`Bearer ${this.token}`).catcher(401,async(E,A)=>(await this.refreshAuthToken(),A.auth(`Bearer ${this.token}`).fetch().unauthorized(L=>{throw L}).res(O2)))),r&&(l=d.includes(t)?l.json(r):l.query(r));try{return(await l[t]().res(O2)).data}catch(b){const E=Y4(b);if(E.problem.kind==="canceled")throw E;E.problem.kind==="unauthorized"&&(this.resetAuth(),(x=this.unauthorizedCallback)==null||x.call(this,this));const A=c.errorsConfig;throw A&&A.messages&&(typeof A.messages!="string"?E.status in A.messages&&(E.message=A.messages[E.status]):E.message=A.messages),(A==null?void 0:A.hideErrors)!==!0&&this.notificationService.error({title:"Error",description:E.message}),E}}async get(t,n,r=!this.disableAuth,a){return this.call(Wg.GET,t,n,r,a)}async post(t,n,r=!this.disableAuth,a){return this.call(Wg.POST,t,n,r,a)}async put(t,n,r=!this.disableAuth,a){return this.call(Wg.PUT,t,n,r,a)}async patch(t,n,r=!this.disableAuth,a){return this.call(Wg.PATCH,t,n,r,a)}async delete(t,n=!this.disableAuth,r){return this.call(Wg.DELETE,t,void 0,n,r)}};an(Hu,"instances",{});let nm=Hu;async function O2(e){return e.status===204?(e.data=null,e):(e.ok?(e.headers.get("content-type")??"").includes("application/json")?e.data=await e.json():e.data=await e.text():console.debug("autoParseBody",e),e)}const ry=Qr({showNotification:(e,t,n)=>({type:e,message:t,lifetimeSec:n}),removeNotification:e=>e},({onAction:e,schedule:t,create:n},r=[])=>(e("showNotification",({type:a,message:c,lifetimeSec:d})=>{const l=fV(4),x=()=>ry.removeNotification.dispatch(l);r=[...r,{id:l,type:a,message:c,lifetimeSec:d,onClose:x}],t(b=>{setTimeout(x,d*1e3)})}),e("removeNotification",a=>r=r.filter(({id:c})=>c!==a)),[...r]),"[Shared state] currentNotificationAtom"),zf=class zf{constructor(){an(this,"defaultLifetimeSec",10)}static getInstance(){if(zf.instance)return zf.instance;throw new Error("You have to initialize api client first!")}static init(){zf.instance=new zf}error(t,n){ry.showNotification.dispatch("error",t,n||this.defaultLifetimeSec)}warning(t,n){ry.showNotification.dispatch("warning",t,n||this.defaultLifetimeSec)}info(t,n){ry.showNotification.dispatch("info",t,n||this.defaultLifetimeSec)}success(t,n){ry.showNotification.dispatch("success",t,n||this.defaultLifetimeSec)}};an(zf,"instance");let J1=zf;J1.init();const rF=J1.getInstance();nm.init({notificationService:rF,baseURL:Jr.apiGateway,loginApiPath:`${Jr.keycloakUrl}/auth/realms/${Jr.keycloakRealm}/protocol/openid-connect/token`,refreshTokenApiPath:`${Jr.keycloakUrl}/auth/realms/${Jr.keycloakRealm}/protocol/openid-connect/token`,keycloakClientId:Jr.keycloakClientId,expiredTokenCallback(){alert("Session expired. Please login again"),ioe("/profile"),location.reload()},unauthorizedCallback(e){var t;(t=e==null?void 0:e.expiredTokenCallback)==null||t.call(e)}});const iF=nm.getInstance();nm.init({instanceId:"reports",notificationService:rF,baseURL:Jr.reportsApi,disableAuth:!0});nm.getInstance("reports");/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function xy(e,t,n,r){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function l(E){try{b(r.next(E))}catch(A){d(A)}}function x(E){try{b(r.throw(E))}catch(A){d(A)}}function b(E){E.done?c(E.value):a(E.value).then(l,x)}b((r=r.apply(e,t||[])).next())})}class gi{constructor(){this.mutex=Promise.resolve()}lock(){let t=()=>{};return this.mutex=this.mutex.then(()=>new Promise(t)),new Promise(n=>{t=n})}dispatch(t){return xy(this,void 0,void 0,function*(){const n=yield this.lock();try{return yield Promise.resolve(t())}finally{n()}})}}var F2;function boe(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}const jC=boe(),R2=(F2=jC.Buffer)!==null&&F2!==void 0?F2:null,woe=jC.TextEncoder?new jC.TextEncoder:null;function oF(e,t){return(e&15)+(e>>6|e>>3&8)<<4|(t&15)+(t>>6|t>>3&8)}function Soe(e,t){const n=t.length>>1;for(let r=0;r<n;r++){const a=r<<1;e[r]=oF(t.charCodeAt(a),t.charCodeAt(a+1))}}function Coe(e,t){if(e.length!==t.length*2)return!1;for(let n=0;n<t.length;n++){const r=n<<1;if(t[n]!==oF(e.charCodeAt(r),e.charCodeAt(r+1)))return!1}return!0}const J4="a".charCodeAt(0)-10,Q4="0".charCodeAt(0);function eP(e,t,n){let r=0;for(let a=0;a<n;a++){let c=t[a]>>>4;e[r++]=c>9?c+J4:c+Q4,c=t[a]&15,e[r++]=c>9?c+J4:c+Q4}return String.fromCharCode.apply(null,e)}const tP=R2!==null?e=>{if(typeof e=="string"){const t=R2.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(R2.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return woe.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},nP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iy=new Uint8Array(256);for(let e=0;e<nP.length;e++)iy[nP.charCodeAt(e)]=e;function Eoe(e){let t=Math.floor(e.length*.75);const n=e.length;return e[n-1]==="="&&(t-=1,e[n-2]==="="&&(t-=1)),t}function koe(e){const t=Eoe(e),n=e.length,r=new Uint8Array(t);let a=0;for(let c=0;c<n;c+=4){const d=iy[e.charCodeAt(c)],l=iy[e.charCodeAt(c+1)],x=iy[e.charCodeAt(c+2)],b=iy[e.charCodeAt(c+3)];r[a]=d<<2|l>>4,a+=1,r[a]=(l&15)<<4|x>>2,a+=1,r[a]=(x&3)<<6|b&63,a+=1}return r}const Tv=16*1024,Zg=4,Aoe=new gi,D2=new Map;function Toe(e,t){return xy(this,void 0,void 0,function*(){let n=null,r=null,a=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");const c=(ee,oe=0)=>{r.set(ee,oe)},d=()=>r,l=()=>n.exports,x=ee=>{n.exports.Hash_SetMemorySize(ee);const oe=n.exports.Hash_GetBuffer(),xe=n.exports.memory.buffer;r=new Uint8Array(xe,oe,ee)},b=()=>new DataView(n.exports.memory.buffer).getUint32(n.exports.STATE_SIZE,!0),E=Aoe.dispatch(()=>xy(this,void 0,void 0,function*(){if(!D2.has(e.name)){const oe=koe(e.data),xe=WebAssembly.compile(oe);D2.set(e.name,xe)}const ee=yield D2.get(e.name);n=yield WebAssembly.instantiate(ee,{})})),A=()=>xy(this,void 0,void 0,function*(){n||(yield E);const ee=n.exports.Hash_GetBuffer(),oe=n.exports.memory.buffer;r=new Uint8Array(oe,ee,Tv)}),L=(ee=null)=>{a=!0,n.exports.Hash_Init(ee)},F=ee=>{let oe=0;for(;oe<ee.length;){const xe=ee.subarray(oe,oe+Tv);oe+=xe.length,r.set(xe),n.exports.Hash_Update(xe.length)}},$=ee=>{if(!a)throw new Error("update() called before init()");const oe=tP(ee);F(oe)},N=new Uint8Array(t*2),Z=(ee,oe=null)=>{if(!a)throw new Error("digest() called before init()");return a=!1,n.exports.Hash_Final(oe),ee==="binary"?r.slice(0,t):eP(N,r,t)},R=()=>{if(!a)throw new Error("save() can only be called after init() and before digest()");const ee=n.exports.Hash_GetState(),oe=b(),xe=n.exports.memory.buffer,Oe=new Uint8Array(xe,ee,oe),Le=new Uint8Array(Zg+oe);return Soe(Le,e.hash),Le.set(Oe,Zg),Le},q=ee=>{if(!(ee instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const oe=n.exports.Hash_GetState(),xe=b(),Oe=Zg+xe,Le=n.exports.memory.buffer;if(ee.length!==Oe)throw new Error(`Bad state length (expected ${Oe} bytes, got ${ee.length})`);if(!Coe(e.hash,ee.subarray(0,Zg)))throw new Error("This state was written by an incompatible hash implementation");const qe=ee.subarray(Zg);new Uint8Array(Le,oe,xe).set(qe),a=!0},G=ee=>typeof ee=="string"?ee.length<Tv/4:ee.byteLength<Tv;let Q=G;switch(e.name){case"argon2":case"scrypt":Q=()=>!0;break;case"blake2b":case"blake2s":Q=(ee,oe)=>oe<=512&&G(ee);break;case"blake3":Q=(ee,oe)=>oe===0&&G(ee);break;case"xxhash64":case"xxhash3":case"xxhash128":Q=()=>!1;break}const se=(ee,oe=null,xe=null)=>{if(!Q(ee,oe))return L(oe),$(ee),Z("hex",xe);const Oe=tP(ee);return r.set(Oe),n.exports.Hash_Calculate(Oe.length,oe,xe),eP(N,r,t)};return yield A(),{getMemory:d,writeMemory:c,getExports:l,setMemorySize:x,init:L,update:$,digest:Z,save:R,load:q,calculate:se,hashLength:t}})}function Poe(e,t,n){return xy(this,void 0,void 0,function*(){const r=yield e.lock(),a=yield Toe(t,n);return r(),a})}new gi;new gi;new gi;new gi;var Ioe="crc32",Moe="AGFzbQEAAAABEQRgAAF/YAF/AGAAAGACf38AAwgHAAEBAQIAAwQFAXABAQEFBAEBAgIGDgJ/AUGQyQULfwBBgAgLB3AIBm1lbW9yeQIADkhhc2hfR2V0QnVmZmVyAAAJSGFzaF9Jbml0AAILSGFzaF9VcGRhdGUAAwpIYXNoX0ZpbmFsAAQNSGFzaF9HZXRTdGF0ZQAFDkhhc2hfQ2FsY3VsYXRlAAYKU1RBVEVfU0laRQMBCq0HBwUAQYAJC8MDAQN/QYCJASEBQQAhAgNAIAFBAEEAQQBBAEEAQQBBAEEAIAJBAXFrIABxIAJBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzNgIAIAFBBGohASACQQFqIgJBgAJHDQALQQAhAANAIABBhJEBaiAAQYSJAWooAgAiAkH/AXFBAnRBgIkBaigCACACQQh2cyICNgIAIABBhJkBaiACQf8BcUECdEGAiQFqKAIAIAJBCHZzIgI2AgAgAEGEoQFqIAJB/wFxQQJ0QYCJAWooAgAgAkEIdnMiAjYCACAAQYSpAWogAkH/AXFBAnRBgIkBaigCACACQQh2cyICNgIAIABBhLEBaiACQf8BcUECdEGAiQFqKAIAIAJBCHZzIgI2AgAgAEGEuQFqIAJB/wFxQQJ0QYCJAWooAgAgAkEIdnMiAjYCACAAQYTBAWogAkH/AXFBAnRBgIkBaigCACACQQh2czYCACAAQQRqIgBB/AdHDQALCycAAkBBACgCgMkBIABGDQAgABABQQAgADYCgMkBC0EAQQA2AoTJAQuhAgEDf0EAKAKEyQFBf3MhAUGACSECAkAgAEEISQ0AQYAJIQIDQCACQQRqKAIAIgNBDnZB/AdxQYCRAWooAgAgA0EWdkH8B3FBgIkBaigCAHMgA0EGdkH8B3FBgJkBaigCAHMgA0H/AXFBAnRBgKEBaigCAHMgAigCACABcyIBQRZ2QfwHcUGAqQFqKAIAcyABQQ52QfwHcUGAsQFqKAIAcyABQQZ2QfwHcUGAuQFqKAIAcyABQf8BcUECdEGAwQFqKAIAcyEBIAJBCGohAiAAQXhqIgBBB0sNAAsLAkAgAEUNAANAIAFB/wFxIAItAABzQQJ0QYCJAWooAgAgAUEIdnMhASACQQFqIQIgAEF/aiIADQALC0EAIAFBf3M2AoTJAQszAQF/QQBBACgChMkBIgBBGHQgAEEIdEGAgPwHcXIgAEEIdkGA/gNxIABBGHZycjYCgAkLBgBBhMkBC1oAAkBBACgCgMkBIAFGDQAgARABQQAgATYCgMkBC0EAQQA2AoTJASAAEANBAEEAKAKEyQEiAUEYdCABQQh0QYCA/AdxciABQQh2QYD+A3EgAUEYdnJyNgKACQsLCwEAQYAICwQEAAAA",Loe="749723dc",Ooe={name:Ioe,data:Moe,hash:Loe};const Foe=new gi;let Pv=null;function Roe(e){if(Pv===null)return Poe(Foe,Ooe,4).then(t=>(Pv=t,Pv.calculate(e,3988292384)));try{const t=Pv.calculate(e,3988292384);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;const Doe={username:"",email:"",fullName:"",language:"en",useMetricUnits:!0,subscribedToKonturUpdates:!1,bio:"",osmEditor:Jr.osmEditors[0].id,defaultFeed:Jr.defaultFeed,theme:"kontur"},z2={...Doe},E_=mm(new Map,"layersSettings"),Ph=mm(new Map,"mountedLayers");let VC=Ph.getState();Ph.subscribe(e=>{VC=e});const aF=Qr({setMap:e=>e,resetMap:()=>null},({onAction:e,schedule:t},n=null)=>(e("setMap",r=>{n=r,t(a=>{a(Ph.clear())})}),e("resetMap",()=>{n=null}),n),"[Shared state] currentMapAtom");function zoe(e,t){const n=new Blob([JSON.stringify(e)],{type:"json"}),r=document.createElement("a"),a=URL.createObjectURL(n);r.href=a,r.download=t,document.body.appendChild(r),r.click(),clearTimeout(setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(a)},0))}const Hf=FO(new Set,"enabledLayers"),by=FO(new Set,"hiddenLayers"),y3=mm(new Map,"layersLegends"),sF=mm(new Map,"layersMeta"),lF=mm(new Map,"layersSources"),uF=mm(new Map,"layersMenus");function _p(e){if(e&&typeof e=="object"){const t=Object.getOwnPropertyNames(e);for(const n of t){const r=e[n];_p(r)}return Object.freeze(e)}return e}const rP="bivariate-layer-",Boe="bivariate-source-",$oe={overlay:{name:lr.t("categories.overlays"),openByDefault:!0,mutuallyExclusive:!1,order:1},base:{name:lr.t("categories.basemap"),openByDefault:!1,mutuallyExclusive:!0,order:2}},Noe={layersInSelectedArea:{name:lr.t("groups.layers_in_selected_area"),openByDefault:!0,mutuallyExclusive:!1,order:0},user_layers:{name:lr.t("groups.your_layers"),openByDefault:!0,mutuallyExclusive:!1,order:1},bivariate:{name:lr.t("groups.kontur_analytics"),openByDefault:!0,mutuallyExclusive:!0,order:2},qa:{name:lr.t("groups.qa"),openByDefault:!0,mutuallyExclusive:!1,order:3},osmbasedmap:{name:lr.t("groups.osmbasedmap"),openByDefault:!1,mutuallyExclusive:!1,order:4},other:{name:lr.t("groups.other"),openByDefault:!1,mutuallyExclusive:!1,order:999},elevation:{name:lr.t("groups.elevation"),openByDefault:!0,mutuallyExclusive:!1},photo:{name:lr.t("groups.photo"),openByDefault:!0,mutuallyExclusive:!1},map:{name:lr.t("groups.map"),openByDefault:!0,mutuallyExclusive:!1}},Uoe=Noe,joe=new Proxy(Uoe,{get(e,t,n){const r=Reflect.get(e,t,n);return r||{name:t,openByDefault:!0,mutuallyExclusive:!1,order:100}},set(e,t,n,r){return Reflect.set(e,t,n,r)}}),Voe=Qr({},({},e=joe)=>e,"layersGroupsSettingsAtom"),qoe=$oe,Goe=new Proxy(qoe,{get(e,t,n){const r=Reflect.get(e,t,n);return r||{name:t,openByDefault:!0,mutuallyExclusive:!1,order:100}},set(e,t,n,r){return Reflect.set(e,t,n,r)}}),Hoe=Qr({},({},e=Goe)=>e,"layersCategoriesSettingsAtom"),Woe=(()=>{let e=null;Voe.subscribe(a=>e=a);let t=null;Hoe.subscribe(a=>t=a);let n=null;Hf.subscribe(a=>n=a);let r=null;return E_.subscribe(a=>r=a),a=>{var E,A,L,F;if(!e||!t||!n||!r)return[];const c=(E=a.settings)==null?void 0:E.category,d=(A=a.settings)==null?void 0:A.group,l=c&&((L=t[c])==null?void 0:L.mutuallyExclusive),x=d&&((F=e[d])==null?void 0:F.mutuallyExclusive);if(!l&&!x)return[];const b=new Set;return n.forEach($=>{var Z,R;if(a.id===$)return;const N=r.get($);N&&(l?((Z=N.data)==null?void 0:Z.category)===c&&b.add($):x&&((R=N.data)==null?void 0:R.group)===d&&b.add($))}),Array.from(b).map($=>Hf.delete($))}})(),Zoe={enable:()=>null,disable:()=>null,hide:()=>null,show:()=>null,download:()=>null,destroy:()=>null},Koe=e=>(...t)=>console.error(`[Logical layer: ${e}]:`,...t);function Xoe(e,t,n,r){let a=!1;const c=Qr({...Zoe,layersSettingsAtom:E_,layersLegendsAtom:y3,layersMetaAtom:sF,layersSourcesAtom:lF,enabledLayersAtom:Hf,mountedLayersAtom:Ph,hiddenLayersAtom:by,layersMenusAtom:uF,_patchState:d=>d},({get:d,onAction:l,getUnlistedState:x,onInit:b,schedule:E,create:A},L={id:e,error:null,isEnabled:!1,isLoading:!1,isMounted:!1,isVisible:!0,isDownloadable:!1,settings:null,meta:null,legend:null,source:null,contextMenu:null,style:null})=>{var Le,qe;const F=[],$=r||x(aF),N={isLoading:!1,data:null,error:null},Z=d("layersSettingsAtom").get(e)??N,R=d("layersMetaAtom").get(e)??N,q=d("layersLegendsAtom").get(e)??N,G=d("layersSourcesAtom").get(e)??N,Q=d("layersMenusAtom").get(e)??null,se=Koe(L.id);let ee=d("mountedLayersAtom");VC!==ee&&Jr.id==="8906feaf-fc18-4180-bb5f-ff545cf65100"&&(console.debug("Apply workaround"),ee=VC);const oe={id:L.id,error:L.error,isLoading:[Z,R,q,G].some($e=>$e.isLoading),isEnabled:d("enabledLayersAtom").has(e),isMounted:ee.has(e),isVisible:!d("hiddenLayersAtom").has(e),isDownloadable:((Le=G.data)==null?void 0:Le.source.type)==="geojson",settings:_p(Z.data),meta:_p(R.data),legend:_p(q.data),source:_p(G.data),contextMenu:_p(Q),style:((qe=G.data)==null?void 0:qe.style)??null};b(()=>{try{t.willInit({map:$,state:{...oe}})}catch($e){se($e),oe.error=$e}}),l("enable",()=>{oe.isEnabled=!0,F.push(Hf.set(e),...Woe(L))}),l("disable",()=>{oe.isEnabled=!1,F.push(Hf.delete(e))}),l("hide",()=>{if($)try{t.willHide({map:$,state:{...oe}}),oe.isVisible=!1,F.push(by.set(e))}catch($e){se($e),oe.error=$e}}),l("show",()=>{if($)try{t.willUnhide({map:$,state:{...oe}}),oe.isVisible=!0,F.push(by.delete(e))}catch($e){se($e),oe.error=$e}}),l("download",()=>{var $e,nt;try{if(!L.isDownloadable)return;if(!(($e=L.source)!=null&&$e.source)){se("Download failed, source unavailable");return}L.source.source.type==="geojson"?zoe(L.source.source.data,`${((nt=L.settings)==null?void 0:nt.name)||L.id||"Disaster Ninja map layer"}-${new Date().toISOString()}.json`):se("Only geojson layers can be downloaded")}catch(pt){se(pt),oe.error=pt}});const xe=!a&&oe.isEnabled!==oe.isMounted;if(!(L.isMounted!==oe.isMounted)&&xe&&!oe.isLoading)try{oe.isMounted?$&&(t.willUnMount({map:$,state:{...oe}}),oe.isMounted=!1,F.push(Ph.delete(e))):$&&(t.willMount({map:$,state:{...oe}}),oe.isMounted=!0,F.push(Ph.set(e,c)))}catch($e){se($e),oe.error=$e}if(L.isMounted&&oe.isMounted){if(L.legend!==oe.legend&&$)try{t.willLegendUpdate({map:$,state:{...oe}})}catch(pt){se(pt),oe.error=pt}if(L.source!==oe.source&&$)try{t.willSourceUpdate({map:$,state:{...oe}})}catch(pt){se(pt),oe.error=pt}}return l("destroy",()=>{a=!0;try{t.willDestroy({map:$,state:{...oe}}),x(n).has(L.id)&&F.push(n.unregister(L.id,{notifyLayerAboutDestroy:!1}))}catch($e){se($e),oe.error=$e}}),l("_patchState",$e=>{Object.assign(oe,$e)}),F.length&&E($e=>{$e(F),t.setErrorState(nt=>{se(nt),$e(A("_patchState",{error:nt.message}))})}),oe},{id:e,decorators:[KO()]});return c}const iP=new WeakMap,oP=new WeakMap,Yoe=e=>{const t=Qr({register:n=>Array.isArray(n)?n:[n],unregister:(n,{notifyLayerAboutDestroy:r}={})=>({ids:Array.isArray(n)?n:[n],notifyLayerAboutDestroy:r}),_delete:n=>Array.isArray(n)?n:[n]},({onAction:n,create:r,schedule:a},c=new Map)=>(n("register",d=>{const l=new Map(c);d.forEach(({id:x,renderer:b,cleanUpActions:E,map:A})=>{const L=Xoe(x,b,t,A);l.set(x,L),E&&iP.set(L,E),oP.set(L,L.subscribe(()=>null))}),c=l}),n("unregister",({ids:d,notifyLayerAboutDestroy:l})=>{d.forEach(x=>{const b=c.get(x);b?a(E=>{oP.get(b)();const L=[...iP.get(b)||[],Ph.delete(x),by.delete(x),l&&b.destroy(),r("_delete",x)].filter(F=>!!F);E(L)}):console.error(`Attempt unregister not existing layer with id: ${x}`)})}),n("_delete",d=>{const l=new Map(c);d.forEach(x=>{l.delete(x)}),c=l}),c),e);return t},vp=Yoe("layersRegistryAtom"),aP=Qr({setUser:(e=z2)=>e},({onAction:e,schedule:t,getUnlistedState:n},r=z2)=>(e("setUser",a=>{a?r=a:r=z2;const c=Array.from(n(E_)).filter(([,x])=>{var b;return(b=x==null?void 0:x.data)==null?void 0:b.ownedByUser}).map(([x])=>x);if(!c.length)return;const d=Array.from(n(vp)).filter(([x])=>c.includes(x)).map(([x,b])=>b);if(!d.length)return;const l=d.map(x=>x.destroy());t(x=>{x(l)})}),r),"[Shared state] currentUserAtom"),Joe=Qr({open:()=>null,close:()=>null},({onAction:e},t={isOpen:!1})=>(e("open",()=>t={...t,isOpen:!0}),e("close",()=>t={...t,isOpen:!1}),t),"episodesPanelState"),cF=Qr({setFocusedGeometry:(e,t)=>({source:e,geometry:t}),_update:e=>e,reset:()=>null,currentUserAtom:aP,episodesPanelState:Joe},({onAction:e,schedule:t,create:n,getUnlistedState:r,onChange:a},c=null)=>(e("setFocusedGeometry",({source:d,geometry:l})=>{const x=r(aP);d&&l?t(async(b,E)=>{const A=await Roe(JSON.stringify({geometry:l,source:d,user:x.email}));if(!c||!E.hash||E.hash!==A){E.hash=A;const L={...l,hash:A};b(n("_update",{source:d,geometry:L}))}}):c=null}),e("reset",()=>{c=null}),e("_update",d=>{c=d}),a("currentUserAtom",()=>{var d;c&&((d=c.source)==null?void 0:d.type)!=="event"&&(c={...c})}),c),"[Shared state] focusedGeometryAtom"),Qoe=[["count","area_km2"],["building_count","area_km2"],["highway_length","area_km2"],["local_hours","area_km2"],["avgmax_ts","one"],["days_mintemp_above_25c_1c","one"],["population","area_km2"],["total_hours","area_km2"],["view_count","area_km2"]];function hF(e){const t=Array.isArray(e)?[]:{};for(const n in e){const r=e[n];r&&typeof r=="object"?t[n]=hF(r):t[n]=r}return t}const eae=window.structuredClone??hF;function fF(e){var n;const t=eae(e);return"properties"in t&&(t.properties={}),"features"in t&&((n=t.features)!=null&&n.length)&&(t.features=t.features.map(r=>fF(r))),t}function dF(e){return!e||!e.geometry||e.geometry.type==="FeatureCollection"&&!e.geometry.features.length}function tae(e){const t={importantLayers:Qoe};return e&&!dF(e)&&(t.geoJSON=fF(e==null?void 0:e.geometry)),t}function nae(e){if(e.hasOwnProperty("errors")&&Array.isArray(e.errors))return e.errors.reduce((t,n)=>(n.hasOwnProperty("message")&&t.push(n.message),t),[]).join("<br/>")}const rae=b_({focusedGeometryAtom:cF},({onChange:e},t={focusedGeometry:null})=>(e("focusedGeometryAtom",n=>{t={focusedGeometry:n}}),t),"bivariateStatisticsDependencyAtom");let Iv;const pF=QO(rae,async({focusedGeometry:e},t)=>{var r,a,c;if(!(e!=null&&e.geometry)&&Iv)return Iv;let n;try{const d=tae(e);n=await iF.post("/bivariate_matrix",d,!0,{signal:t.signal})}catch(d){if(XO(d)&&d.problem.kind==="canceled")return null;throw d}if(!n)throw new Error(lr.t("no_data_received"));if(!(n!=null&&n.data)){const d=nae(n);throw new Error(d||lr.t("no_data_received"))}if(!Array.isArray((c=(a=(r=n==null?void 0:n.data)==null?void 0:r.polygonStatistic)==null?void 0:a.bivariateStatistic)==null?void 0:c.correlationRates))throw new Error(lr.t("wrong_data_received"));return dF(e)&&!Iv&&(Iv=n.data),n.data},"bivariateStatisticsResource");class Ct{constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}static toLinear(t){return t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92}static yToL(t){return t<=Ct.epsilon?t/Ct.refY*Ct.kappa:116*Math.pow(t/Ct.refY,1/3)-16}static lToY(t){return t<=8?Ct.refY*t/Ct.kappa:Ct.refY*Math.pow((t+16)/116,3)}static rgbChannelToHex(t){const n=Math.round(t*255),r=n%16,a=(n-r)/16|0;return Ct.hexChars.charAt(a)+Ct.hexChars.charAt(r)}static hexToRgbChannel(t,n){const r=Ct.hexChars.indexOf(t.charAt(n)),a=Ct.hexChars.indexOf(t.charAt(n+1));return(r*16+a)/255}static distanceFromOriginAngle(t,n,r){const a=n/(Math.sin(r)-t*Math.cos(r));return a<0?1/0:a}static distanceFromOrigin(t,n){return Math.abs(n)/Math.sqrt(Math.pow(t,2)+1)}static min6(t,n,r,a,c,d){return Math.min(t,Math.min(n,Math.min(r,Math.min(a,Math.min(c,d)))))}rgbToHex(){this.hex="#",this.hex+=Ct.rgbChannelToHex(this.rgb_r),this.hex+=Ct.rgbChannelToHex(this.rgb_g),this.hex+=Ct.rgbChannelToHex(this.rgb_b)}hexToRgb(){this.hex=this.hex.toLowerCase(),this.rgb_r=Ct.hexToRgbChannel(this.hex,1),this.rgb_g=Ct.hexToRgbChannel(this.hex,3),this.rgb_b=Ct.hexToRgbChannel(this.hex,5)}xyzToRgb(){this.rgb_r=Ct.fromLinear(Ct.m_r0*this.xyz_x+Ct.m_r1*this.xyz_y+Ct.m_r2*this.xyz_z),this.rgb_g=Ct.fromLinear(Ct.m_g0*this.xyz_x+Ct.m_g1*this.xyz_y+Ct.m_g2*this.xyz_z),this.rgb_b=Ct.fromLinear(Ct.m_b0*this.xyz_x+Ct.m_b1*this.xyz_y+Ct.m_b2*this.xyz_z)}rgbToXyz(){const t=Ct.toLinear(this.rgb_r),n=Ct.toLinear(this.rgb_g),r=Ct.toLinear(this.rgb_b);this.xyz_x=.41239079926595*t+.35758433938387*n+.18048078840183*r,this.xyz_y=.21263900587151*t+.71516867876775*n+.072192315360733*r,this.xyz_z=.019330818715591*t+.11919477979462*n+.95053215224966*r}xyzToLuv(){const t=this.xyz_x+15*this.xyz_y+3*this.xyz_z;let n=4*this.xyz_x,r=9*this.xyz_y;t!==0?(n/=t,r/=t):(n=NaN,r=NaN),this.luv_l=Ct.yToL(this.xyz_y),this.luv_l===0?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(n-Ct.refU),this.luv_v=13*this.luv_l*(r-Ct.refV))}luvToXyz(){if(this.luv_l===0){this.xyz_x=0,this.xyz_y=0,this.xyz_z=0;return}const t=this.luv_u/(13*this.luv_l)+Ct.refU,n=this.luv_v/(13*this.luv_l)+Ct.refV;this.xyz_y=Ct.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*t/((t-4)*n-t*n),this.xyz_z=(9*this.xyz_y-15*n*this.xyz_y-n*this.xyz_x)/(3*n)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{const t=Math.atan2(this.luv_v,this.luv_u);this.lch_h=t*180/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){const t=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(t)*this.lch_c,this.luv_v=Math.sin(t)*this.lch_c}calculateBoundingLines(t){const n=Math.pow(t+16,3)/1560896,r=n>Ct.epsilon?n:t/Ct.kappa,a=r*(284517*Ct.m_r0-94839*Ct.m_r2),c=r*(838422*Ct.m_r2+769860*Ct.m_r1+731718*Ct.m_r0),d=r*(632260*Ct.m_r2-126452*Ct.m_r1),l=r*(284517*Ct.m_g0-94839*Ct.m_g2),x=r*(838422*Ct.m_g2+769860*Ct.m_g1+731718*Ct.m_g0),b=r*(632260*Ct.m_g2-126452*Ct.m_g1),E=r*(284517*Ct.m_b0-94839*Ct.m_b2),A=r*(838422*Ct.m_b2+769860*Ct.m_b1+731718*Ct.m_b0),L=r*(632260*Ct.m_b2-126452*Ct.m_b1);this.r0s=a/d,this.r0i=c*t/d,this.r1s=a/(d+126452),this.r1i=(c-769860)*t/(d+126452),this.g0s=l/b,this.g0i=x*t/b,this.g1s=l/(b+126452),this.g1i=(x-769860)*t/(b+126452),this.b0s=E/L,this.b0i=A*t/L,this.b1s=E/(L+126452),this.b1i=(A-769860)*t/(L+126452)}calcMaxChromaHpluv(){const t=Ct.distanceFromOrigin(this.r0s,this.r0i),n=Ct.distanceFromOrigin(this.r1s,this.r1i),r=Ct.distanceFromOrigin(this.g0s,this.g0i),a=Ct.distanceFromOrigin(this.g1s,this.g1i),c=Ct.distanceFromOrigin(this.b0s,this.b0i),d=Ct.distanceFromOrigin(this.b1s,this.b1i);return Ct.min6(t,n,r,a,c,d)}calcMaxChromaHsluv(t){const n=t/360*Math.PI*2,r=Ct.distanceFromOriginAngle(this.r0s,this.r0i,n),a=Ct.distanceFromOriginAngle(this.r1s,this.r1i,n),c=Ct.distanceFromOriginAngle(this.g0s,this.g0i,n),d=Ct.distanceFromOriginAngle(this.g1s,this.g1i,n),l=Ct.distanceFromOriginAngle(this.b0s,this.b0i,n),x=Ct.distanceFromOriginAngle(this.b1s,this.b1i,n);return Ct.min6(r,a,c,d,l,x)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);const t=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=t/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);const t=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/t*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hpluvToLch(){if(this.hpluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hpluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hpluv_l,this.calculateBoundingLines(this.hpluv_l);const t=this.calcMaxChromaHpluv();this.lch_c=t/100*this.hpluv_p}this.lch_h=this.hpluv_h}lchToHpluv(){if(this.lch_l>99.9999999)this.hpluv_p=0,this.hpluv_l=100;else if(this.lch_l<1e-8)this.hpluv_p=0,this.hpluv_l=0;else{this.calculateBoundingLines(this.lch_l);const t=this.calcMaxChromaHpluv();this.hpluv_p=this.lch_c/t*100,this.hpluv_l=this.lch_l}this.hpluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hpluvToRgb(){this.hpluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}hpluvToHex(){this.hpluvToRgb(),this.rgbToHex()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHsluv()}rgbToHpluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHpluv()}hexToHsluv(){this.hexToRgb(),this.rgbToHsluv()}hexToHpluv(){this.hexToRgb(),this.rgbToHpluv()}}Ct.hexChars="0123456789abcdef";Ct.refY=1;Ct.refU=.19783000664283;Ct.refV=.46831999493879;Ct.kappa=903.2962962;Ct.epsilon=.0088564516;Ct.m_r0=3.240969941904521;Ct.m_r1=-1.537383177570093;Ct.m_r2=-.498610760293;Ct.m_g0=-.96924363628087;Ct.m_g1=1.87596750150772;Ct.m_g2=.041555057407175;Ct.m_b0=.055630079696993;Ct.m_b1=-.20397695888897;Ct.m_b2=1.056971514242878;function Q1(e){const t=/https?:/;t.test(e)?e=window.location.protocol+e.replace(t,""):e=`${Jr.bivariateTilesServer??`${window.location.protocol}${window.location.host}${Jr.baseUrl}`}${e}`,e=e.replace("{bbox}","{bbox-epsg-3857}").replace("{proj}","EPSG:3857").replace("{width}","256").replace("{height}","256").replace("{zoom}","{z}").replace("{-y}","{y}");const n=(e.match(/{switch:(.*?)}/)||["",""])[1].split(",")[0];return e=e.replace(/{switch:(.*?)}/,n),e}function iae(e,t){return e+(((t-e)%360+540)%360-180)*.5}function sP(e,t){return(e+t)/2}function Kg(e,t){return[iae(e[0],t[0]),sP(e[1],t[1]),sP(e[2],t[2])]}function Xg(e){if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)){let t=e.substring(1).split("");t.length===3&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]);const n=parseInt(`0x${t.join("")}`,0);return`rgba(${[n>>16&255,n>>8&255,n&255].join(",")},0.5)`}throw new Error("Bad Hex")}function Mv(e,t){const n=(Array.isArray(t[0])?[...t[0]]:[t[0]]).sort(),r=(Array.isArray(t[1])?[...t[1]]:[t[1]]).sort(),a=Array.from(new Set(n.concat(r))),c=e.combinations.find(({corner:d})=>{if(a.length!==d.length)return!1;for(let l=0;l<a.length;l+=1)if(a[l]!==d[l])return!1;return!0});return c!=null&&c.color?{color:c.color}:{color:e.fallback,isFallbackColor:!0}}function oae(e,t,n,r,a,c){var N,Z;const{indicators:d,colors:l,axis:x}=a,b=x.find(R=>R.quotient[0]===e&&R.quotient[1]===t),E=x.find(R=>R.quotient[0]===n&&R.quotient[1]===r);if(!b||!E)return;const A=(N=d.find(R=>R.name===e))==null?void 0:N.direction,L=(Z=d.find(R=>R.name===n))==null?void 0:Z.direction;if(!A||!L)return;const F=sae(l,A,L),$=aae(b,E,F,a==null?void 0:a.meta,c);return[F,$]}const aae=(e,t,n,r,a)=>ZO({id:`${e.quotient.join("&")}|${t.quotient.join("&")}`,x:e,y:t,colors:n,sourceLayer:a,source:{type:"vector",tiles:[`${Q1(Jr.bivariateTilesRelativeUrl)}{z}/{x}/{y}.mvt?indicatorsClass=${Jr.bivariateTilesIndicatorsClass}`],maxzoom:r.max_zoom,minzoom:0}}),sae=(e,t,n)=>{const r=new Ct,a=Mv(e,[t[0],n[0]]),c=Mv(e,[t[0],n[1]]),d=Mv(e,[t[1],n[0]]),l=Mv(e,[t[1],n[1]]),x=[a,c,d,l].map(Q=>(r.hex=Q.color,r.hexToHsluv(),[r.hsluv_h,r.hsluv_s,r.hsluv_l])),b=Kg(x[0],x[1]),E=Kg(x[0],x[2]),A=Kg(x[1],x[3]),L=Kg(x[2],x[3]),F=Kg(E,A),[$,N,Z,R,q]=[b,E,F,A,L].map(([Q,se,ee])=>(r.hsluv_h=Q,r.hsluv_s=se,r.hsluv_l=ee,r.hsluvToHex(),Xg(r.hex)));return[{id:"A1",color:Xg(a.color),isFallbackColor:a.isFallbackColor},{id:"A2",color:$},{id:"A3",color:Xg(c.color),isFallbackColor:c.isFallbackColor},{id:"B1",color:N},{id:"B2",color:Z},{id:"B3",color:R},{id:"C1",color:Xg(d.color),isFallbackColor:d.isFallbackColor},{id:"C2",color:q},{id:"C3",color:Xg(l.color),isFallbackColor:l.isFallbackColor}]};function lae(e,t){return ZO({id:`${e.axis.x.quotient.join("&")}|${e.axis.y.quotient.join("&")}`,x:e.axis.x,y:e.axis.y,colors:[...e.steps].sort((n,r)=>n.label>r.label?1:-1).map(n=>({id:n.label,color:n.color})),sourceLayer:t})}function uae(e,t,n,r,a,c,d){const l=d.axis.find(b=>b.quotient[0]===n&&b.quotient[1]===r),x=d.axis.find(b=>b.quotient[0]===a&&b.quotient[1]===c);if(!(!l||!x))return cae(e,l,x,t)}const cae=(e,t,n,r)=>({name:e,axis:{x:t,y:n},type:"bivariate",steps:r.map(({id:a,color:c,isFallbackColor:d})=>({label:a,color:c,isFallbackColor:d}))});function hae(e,t,n,r,a){var F,$,N,Z;const c=a.indicators.find(R=>R.name===e),d=a.indicators.find(R=>R.name===n),l=c==null?void 0:c.label,x=d==null?void 0:d.label,b=(F=a.indicators.find(R=>R.name===t))==null?void 0:F.label,E=($=a.indicators.find(R=>R.name===r))==null?void 0:$.label;let A=[];return(N=c==null?void 0:c.copyrights)!=null&&N.length&&(A=A.concat(c.copyrights)),(Z=d==null?void 0:d.copyrights)!=null&&Z.length&&(A=A.concat(d.copyrights)),{description:`This map shows relation of ${l} (normalized by ${b}) to the base of ${x} (normalized by ${E}).`,copyrights:A,hints:{x:{label:l,direction:c==null?void 0:c.direction},y:{label:x,direction:d==null?void 0:d.direction}}}}function fae(e,t,n,r){const a=e.findIndex(l=>{if(n<l.value)return!0}),c=$C(a),d=t.findIndex(l=>{if(r<l.value)return!0});return c+d}const dae=e=>{const{correlationRates:t}=e,n=[],r=[];for(const a of t){const c=a.x.quotient,d=a.x.parent||c;let l=n.find(A=>A.parent===JSON.stringify(d));l?l.quotients.find(A=>JSON.stringify(A)===JSON.stringify(c))||l.quotients.push(c):(l={parent:JSON.stringify(d),quotients:[c],selectedQuotient:c},n.push(l));const x=a.y.quotient,b=a.y.parent||x;let E=r.find(A=>A.parent===JSON.stringify(b));E?E.quotients.find(A=>JSON.stringify(A)===JSON.stringify(x))||E.quotients.push(x):(E={parent:JSON.stringify(b),quotients:[x],selectedQuotient:x},r.push(E))}for(const a of n){const c=a.quotients.find(d=>JSON.stringify(d)===a.parent);c&&(a.selectedQuotient=c)}for(const a of r){const c=a.quotients.find(d=>JSON.stringify(d)===a.parent);c&&(a.selectedQuotient=c)}return{x:n,y:r}},Lv=Qr({setNumerators:(e,t)=>({xGroups:e,yGroups:t}),bivariateStatisticsResourceAtom:pF},({get:e,onAction:t,onChange:n},r={xGroups:[],yGroups:[]})=>(n("bivariateStatisticsResourceAtom",({data:a,loading:c})=>{if(a&&!c){const d=a.polygonStatistic.bivariateStatistic,l=dae(d);r={xGroups:l.x,yGroups:l.y}}}),t("setNumerators",a=>{r=a}),r),"bivariateNumerators"),pae=()=>({legend:[],source:[],meta:[],settings:[],menu:[]}),Ov=([e,t])=>[e,{data:t,isLoading:!1,error:null}];function lP(e){const t=e.reduce((a,{id:c,...d})=>(Object.keys(d).forEach(l=>{a[l].push([c,d[l]])}),a),pae()),n=[],r=[];if(t.legend.length){const a=t.legend.map(Ov);n.push(y3.change(c=>new Map([...c,...a])))}if(t.source.length){const a=t.source.map(Ov);n.push(lF.change(c=>new Map([...c,...a])))}if(t.meta.length){const a=t.meta.map(Ov);n.push(sF.change(c=>new Map([...c,...a])))}if(t.settings.length){const a=t.settings.map(Ov);n.push(E_.change(c=>new Map([...c,...a])))}if(t.menu.length){const a=t.menu;n.push(uF.change(c=>new Map([...c,...a])))}return[n,r]}var mF={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ss,function(){var n,r,a;function c(l,x){if(!n)n=x;else if(!r)r=x;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",E={};n(E),a=x(E),typeof window<"u"&&(a.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}c(["exports"],function(l){function x(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var b=E;function E(s,i){this.x=s,this.y=i}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,u=s.y-this.y;return i*i+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),u=Math.sin(s),p=u*this.x+i*this.y;return this.x=i*this.x-u*this.y,this.y=p,this},_rotateAround:function(s,i){var u=Math.cos(s),p=Math.sin(s),g=i.y+p*(this.x-i.x)+u*(this.y-i.y);return this.x=i.x+u*(this.x-i.x)-p*(this.y-i.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(s){return s instanceof E?s:Array.isArray(s)?new E(s[0],s[1]):s};var A=x(b),L=F;function F(s,i,u,p){this.cx=3*s,this.bx=3*(u-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=u,this.p2y=p}F.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var u=s,p=0;p<8;p++){var g=this.sampleCurveX(u)-s;if(Math.abs(g)<i)return u;var S=this.sampleCurveDerivativeX(u);if(Math.abs(S)<1e-6)break;u-=g/S}var C=0,T=1;for(u=s,p=0;p<20&&(g=this.sampleCurveX(u),!(Math.abs(g-s)<i));p++)s>g?C=u:T=u,u=.5*(T-C)+C;return u},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var $=x(L);function N(s,i,u,p){const g=new $(s,i,u,p);return function(S){return g.solve(S)}}const Z=N(.25,.1,.25,1);function R(s,i,u){return Math.min(u,Math.max(i,s))}function q(s,i,u){const p=u-i,g=((s-i)%p+p)%p+i;return g===i?u:g}function G(s,...i){for(const u of i)for(const p in u)s[p]=u[p];return s}let Q=1;function se(s,i,u){const p={};for(const g in s)p[g]=i.call(u||this,s[g],g,s);return p}function ee(s,i,u){const p={};for(const g in s)i.call(u||this,s[g],g,s)&&(p[g]=s[g]);return p}function oe(s){return Array.isArray(s)?s.map(oe):typeof s=="object"&&s?se(s,oe):s}const xe={};function Oe(s){xe[s]||(typeof console<"u"&&console.warn(s),xe[s]=!0)}function Le(s,i,u){return(u.y-s.y)*(i.x-s.x)>(i.y-s.y)*(u.x-s.x)}function qe(s){let i=0;for(let u,p,g=0,S=s.length,C=S-1;g<S;C=g++)u=s[g],p=s[C],i+=(p.x-u.x)*(u.y+p.y);return i}function $e(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let nt=null;function pt(s){if(nt==null){const i=s.navigator?s.navigator.userAgent:null;nt=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return nt}function At(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Vt,Ve;const _e={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const i=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(s,i=0){return this.getImageCanvasContext(s).getImageData(-i,-i,s.width+2*i,s.height+2*i)},getImageCanvasContext(s){const i=window.document.createElement("canvas"),u=i.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return i.width=s.width,i.height=s.height,u.drawImage(s,0,0,s.width,s.height),u},resolveURL:s=>(Vt||(Vt=document.createElement("a")),Vt.href=s,Vt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ve==null&&(Ve=matchMedia("(prefers-reduced-motion: reduce)")),Ve.matches)}},we={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class K extends Error{constructor(i,u,p,g){super(`AJAXError: ${u} (${i}): ${p}`),this.status=i,this.statusText=u,this.url=p,this.body=g}}const ae=$e()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,lt=s=>we.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function gt(s,i){const u=new AbortController,p=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:ae(),signal:u.signal});let g=!1,S=!1;return s.type==="json"&&p.headers.set("Accept","application/json"),S||fetch(p).then(C=>C.ok?(T=>{(s.type==="arrayBuffer"||s.type==="image"?T.arrayBuffer():s.type==="json"?T.json():T.text()).then(M=>{S||(g=!0,i(null,M,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(M=>{S||i(new Error(M.message))})})(C):C.blob().then(T=>i(new K(C.status,C.statusText,s.url,T)))).catch(C=>{C.code!==20&&i(new Error(C.message))}),{cancel:()=>{S=!0,g||u.abort()}}}const Gt=function(s,i){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if($e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i);if(!$e())return(lt(s.url)||gt)(s,i)}if(!(/^file:/.test(u=s.url)||/^file:/.test(ae())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return gt(s,i);if($e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var u;return function(p,g){const S=new XMLHttpRequest;S.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(S.responseType="arraybuffer");for(const C in p.headers)S.setRequestHeader(C,p.headers[C]);return p.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=p.credentials==="include",S.onerror=()=>{g(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let C=S.response;if(p.type==="json")try{C=JSON.parse(S.response)}catch(T){return g(T)}g(null,C,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const C=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});g(new K(S.status,S.statusText,p.url,C))}},S.send(p.body),{cancel:()=>S.abort()}}(s,i)},Dt=function(s,i){return Gt(G(s,{type:"arrayBuffer"}),i)};function Qt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const i=new URL(s),u=window.location;return i.protocol===u.protocol&&i.host===u.host}function un(s,i,u){u[s]&&u[s].indexOf(i)!==-1||(u[s]=u[s]||[],u[s].push(i))}function Xn(s,i,u){if(u&&u[s]){const p=u[s].indexOf(i);p!==-1&&u[s].splice(p,1)}}class Qn{constructor(i,u={}){G(this,u),this.type=i}}class Bn extends Qn{constructor(i,u={}){super("error",G({error:i},u))}}class ei{on(i,u){return this._listeners=this._listeners||{},un(i,u,this._listeners),this}off(i,u){return Xn(i,u,this._listeners),Xn(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},un(i,u,this._oneTimeListeners),this):new Promise(p=>this.once(i,p))}fire(i,u){typeof i=="string"&&(i=new Qn(i,u||{}));const p=i.type;if(this.listens(p)){i.target=this;const g=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const T of g)T.call(this,i);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const T of S)Xn(p,T,this._oneTimeListeners),T.call(this,i);const C=this._eventedParent;C&&(G(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(i))}else i instanceof Bn&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}var Je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const yr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Gi(s,i){const u={};for(const p in s)p!=="ref"&&(u[p]=s[p]);return yr.forEach(p=>{p in i&&(u[p]=i[p])}),u}function Gn(s,i){if(Array.isArray(s)){if(!Array.isArray(i)||s.length!==i.length)return!1;for(let u=0;u<s.length;u++)if(!Gn(s[u],i[u]))return!1;return!0}if(typeof s=="object"&&s!==null&&i!==null){if(typeof i!="object"||Object.keys(s).length!==Object.keys(i).length)return!1;for(const u in s)if(!Gn(s[u],i[u]))return!1;return!0}return s===i}const _n={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function _o(s,i,u){u.push({command:_n.addSource,args:[s,i[s]]})}function Mo(s,i,u){i.push({command:_n.removeSource,args:[s]}),u[s]=!0}function Lo(s,i,u,p){Mo(s,u,p),_o(s,i,u)}function ti(s,i,u){let p;for(p in s[u])if(Object.prototype.hasOwnProperty.call(s[u],p)&&p!=="data"&&!Gn(s[u][p],i[u][p]))return!1;for(p in i[u])if(Object.prototype.hasOwnProperty.call(i[u],p)&&p!=="data"&&!Gn(s[u][p],i[u][p]))return!1;return!0}function Yn(s,i,u,p,g,S){let C;for(C in i=i||{},s=s||{})Object.prototype.hasOwnProperty.call(s,C)&&(Gn(s[C],i[C])||u.push({command:S,args:[p,C,i[C],g]}));for(C in i)Object.prototype.hasOwnProperty.call(i,C)&&!Object.prototype.hasOwnProperty.call(s,C)&&(Gn(s[C],i[C])||u.push({command:S,args:[p,C,i[C],g]}))}function Oo(s){return s.id}function vo(s,i){return s[i.id]=i,s}class vt{constructor(i,u,p,g){this.message=(i?`${i}: `:"")+p,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function ni(s,...i){for(const u of i)for(const p in u)s[p]=u[p];return s}class We extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class le{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[p,g]of u)this.bindings[p]=g}concat(i){return new le(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Fe={kind:"null"},Pe={kind:"number"},rt={kind:"string"},bt={kind:"boolean"},vn={kind:"color"},Wt={kind:"object"},xt={kind:"value"},$n={kind:"collator"},jn={kind:"formatted"},bn={kind:"padding"},_r={kind:"resolvedImage"};function Mn(s,i){return{kind:"array",itemType:s,N:i}}function On(s){if(s.kind==="array"){const i=On(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const La=[Fe,Pe,rt,bt,vn,jn,Wt,Mn(xt),bn,_r];function ri(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!ri(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const u of La)if(!ri(u,i))return null}}return`Expected ${On(s)} but found ${On(i)} instead.`}function wr(s,i){return i.some(u=>u.kind===s.kind)}function ye(s,i){return i.some(u=>u==="null"?s===null:u==="array"?Array.isArray(s):u==="object"?s&&!Array.isArray(s)&&typeof s=="object":u===typeof s)}function W(s,i){return s.kind==="array"&&i.kind==="array"?s.itemType.kind===i.itemType.kind&&typeof s.N=="number":s.kind===i.kind}const J=.96422,ce=.82521,Se=4/29,Ce=6/29,Re=3*Ce*Ce,Te=Ce*Ce*Ce,Ae=Math.PI/180,Ne=180/Math.PI;function ot(s){return(s%=360)<0&&(s+=360),s}function at([s,i,u,p]){let g,S;const C=Jt((.2225045*(s=st(s))+.7168786*(i=st(i))+.0606169*(u=st(u)))/1);s===i&&i===u?g=S=C:(g=Jt((.4360747*s+.3850649*i+.1430804*u)/J),S=Jt((.0139322*s+.0971045*i+.7141733*u)/ce));const T=116*C-16;return[T<0?0:T,500*(g-C),200*(C-S),p]}function st(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Jt(s){return s>Te?Math.pow(s,1/3):s/Re+Se}function fn([s,i,u,p]){let g=(s+16)/116,S=isNaN(i)?g:g+i/500,C=isNaN(u)?g:g-u/200;return g=1*Zt(g),S=J*Zt(S),C=ce*Zt(C),[jt(3.1338561*S-1.6168667*g-.4906146*C),jt(-.9787684*S+1.9161415*g+.033454*C),jt(.0719453*S-.2289914*g+1.4052427*C),p]}function jt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Zt(s){return s>Ce?s*s*s:Re*(s-Se)}function rn(s){return parseInt(s.padEnd(2,s),16)/255}function Hn(s,i){return Wn(i?s/100:s,0,1)}function Wn(s,i,u){return Math.min(Math.max(i,s),u)}function Fn(s){return!s.some(Number.isNaN)}const Nn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class wn{constructor(i,u,p,g=1,S=!0){this.r=i,this.g=u,this.b=p,this.a=g,S||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,u,p,g]))}static parse(i){if(i instanceof wn)return i;if(typeof i!="string")return;const u=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Nn[p];if(g){const[C,T,M]=g;return[C/255,T/255,M/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const C=p.length<6?1:2;let T=1;return[rn(p.slice(T,T+=C)),rn(p.slice(T,T+=C)),rn(p.slice(T,T+=C)),rn(p.slice(T,T+C)||"ff")]}if(p.startsWith("rgb")){const C=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[T,M,B,j,H,Y,te,re,ge,ve,pe,Be]=C,ke=[j||" ",te||" ",ve].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const ze=[B,Y,ge].join(""),He=ze==="%%%"?100:ze===""?255:0;if(He){const et=[Wn(+M/He,0,1),Wn(+H/He,0,1),Wn(+re/He,0,1),pe?Hn(+pe,Be):1];if(Fn(et))return et}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[C,T,M,B,j,H,Y,te,re]=S,ge=[M||" ",j||" ",Y].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const ve=[+T,Wn(+B,0,100),Wn(+H,0,100),te?Hn(+te,re):1];if(Fn(ve))return function([pe,Be,ke,ze]){function He(et){const Rt=(et+pe/30)%12,$t=Be*Math.min(ke,1-ke);return ke-$t*Math.max(-1,Math.min(Rt-3,9-Rt,1))}return pe=ot(pe),Be/=100,ke/=100,[He(0),He(8),He(4),ze]}(ve)}}}(i);return u?new wn(...u,!1):void 0}get rgb(){const{r:i,g:u,b:p,a:g}=this,S=g||1/0;return this.overwriteGetter("rgb",[i/S,u/S,p/S,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[u,p,g,S]=at(i),C=Math.sqrt(p*p+g*g);return[Math.round(1e4*C)?ot(Math.atan2(g,p)*Ne):NaN,C,u,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",at(this.rgb))}overwriteGetter(i,u){return Object.defineProperty(this,i,{value:u}),u}toString(){const[i,u,p,g]=this.rgb;return`rgba(${[i,u,p].map(S=>Math.round(255*S)).join(",")},${g})`}}wn.black=new wn(0,0,0,1),wn.white=new wn(1,1,1,1),wn.transparent=new wn(0,0,0,0),wn.red=new wn(1,0,0,1);class cr{constructor(i,u,p){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lr{constructor(i,u,p,g,S){this.text=i,this.image=u,this.scale=p,this.fontStack=g,this.textColor=S}}class pr{constructor(i){this.sections=i}static fromString(i){return new pr([new Lr(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof pr?i:pr.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Pr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Pr)return i;if(typeof i=="number")return new Pr([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const u of i)if(typeof u!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Pr(i)}}toString(){return JSON.stringify(this.values)}}class Fo{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Fo({name:i,available:!1}):null}}function ld(s,i,u,p){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,i,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,i,u,p]:[s,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rs(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof wn||s instanceof cr||s instanceof pr||s instanceof Pr||s instanceof Fo)return!0;if(Array.isArray(s)){for(const i of s)if(!rs(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!rs(s[i]))return!1;return!0}return!1}function jr(s){if(s===null)return Fe;if(typeof s=="string")return rt;if(typeof s=="boolean")return bt;if(typeof s=="number")return Pe;if(s instanceof wn)return vn;if(s instanceof cr)return $n;if(s instanceof pr)return jn;if(s instanceof Pr)return bn;if(s instanceof Fo)return _r;if(Array.isArray(s)){const i=s.length;let u;for(const p of s){const g=jr(p);if(u){if(u===g)continue;u=xt;break}u=g}return Mn(u||xt,i)}return Wt}function Sl(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof wn||s instanceof pr||s instanceof Pr||s instanceof Fo?s.toString():JSON.stringify(s)}class is{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!rs(i[1]))return u.error("invalid value");const p=i[1];let g=jr(p);const S=u.expectedType;return g.kind!=="array"||g.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(g=S),new is(g,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ii{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const zs={string:rt,number:Pe,boolean:bt,object:Wt};class Yo{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let p,g=1;const S=i[0];if(S==="array"){let T,M;if(i.length>2){const B=i[1];if(typeof B!="string"||!(B in zs)||B==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);T=zs[B],g++}else T=xt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);M=i[2],g++}p=Mn(T,M)}else{if(!zs[S])throw new Error(`Types doesn't contain name = ${S}`);p=zs[S]}const C=[];for(;g<i.length;g++){const T=u.parse(i[g],g,xt);if(!T)return null;C.push(T)}return new Yo(p,C)}evaluate(i){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(i);if(!ri(this.type,jr(p)))return p;if(u===this.args.length-1)throw new ii(`Expected value to be of type ${On(this.type)}, but found ${On(jr(p))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const ud={"to-boolean":bt,"to-color":vn,"to-number":Pe,"to-string":rt};class Oa{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const p=i[0];if(!ud[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&i.length!==2)return u.error("Expected one argument.");const g=ud[p],S=[];for(let C=1;C<i.length;C++){const T=u.parse(i[C],C,xt);if(!T)return null;S.push(T)}return new Oa(g,S)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let u,p;for(const g of this.args){if(u=g.evaluate(i),p=null,u instanceof wn)return u;if(typeof u=="string"){const S=i.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ld(u[0],u[1],u[2],u[3]),!p))return new wn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ii(p||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="padding"){let u;for(const p of this.args){u=p.evaluate(i);const g=Pr.parse(u);if(g)return g}throw new ii(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="number"){let u=null;for(const p of this.args){if(u=p.evaluate(i),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new ii(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?pr.fromString(Sl(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Fo.fromString(Sl(this.args[0].evaluate(i))):Sl(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Bs=["Unknown","Point","LineString","Polygon"];class cu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=wn.parse(i)),u}}class os{constructor(i,u,p=[],g,S=new le,C=[]){this.registry=i,this.path=p,this.key=p.map(T=>`[${T}]`).join(""),this.scope=S,this.errors=C,this.expectedType=g,this._isConstant=u}parse(i,u,p,g,S={}){return u?this.concat(u,p,g)._parse(i,S):this._parse(i,S)}_parse(i,u){function p(g,S,C){return C==="assert"?new Yo(S,[g]):C==="coerce"?new Oa(S,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[g];if(S){let C=S.parse(i,this);if(!C)return null;if(this.expectedType){const T=this.expectedType,M=C.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(T.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array"){if(this.checkSubtype(T,M))return null}else C=p(C,T,u.typeAnnotation||"coerce");else C=p(C,T,u.typeAnnotation||"coerce");else C=p(C,T,u.typeAnnotation||"assert")}if(!(C instanceof is)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const T=new cu;try{C=new is(C.type,C.evaluate(T))}catch(M){return this.error(M.message),null}}return C}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,p){const g=typeof i=="number"?this.path.concat(i):this.path,S=p?this.scope.concat(p):this.scope;return new os(this.registry,this._isConstant,g,u||null,S,this.errors)}error(i,...u){const p=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new We(p,i))}checkSubtype(i,u){const p=ri(i,u);return p&&this.error(p),p}}class as{constructor(i,u,p){this.type=$n,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const g=u.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,bt);if(!g)return null;const S=u.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,bt);if(!S)return null;let C=null;return p.locale&&(C=u.parse(p.locale,1,rt),!C)?null:new as(g,S,C)}evaluate(i){return new cr(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}const Ln=8192;function Cl(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function $s(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function gm(s,i){const u=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(u*g*Ln),Math.round(p*g*Ln)]}function Nh(s,i,u){const p=s[0]-i[0],g=s[1]-i[1],S=s[0]-u[0],C=s[1]-u[1];return p*C-S*g==0&&p*S<=0&&g*C<=0}function hu(s,i){let u=!1;for(let C=0,T=i.length;C<T;C++){const M=i[C];for(let B=0,j=M.length;B<j-1;B++){if(Nh(s,M[B],M[B+1]))return!1;(g=M[B])[1]>(p=s)[1]!=(S=M[B+1])[1]>p[1]&&p[0]<(S[0]-g[0])*(p[1]-g[1])/(S[1]-g[1])+g[0]&&(u=!u)}}var p,g,S;return u}function Uh(s,i){for(let u=0;u<i.length;u++)if(hu(s,i[u]))return!0;return!1}function jh(s,i,u,p){const g=p[0]-u[0],S=p[1]-u[1],C=(s[0]-u[0])*S-g*(s[1]-u[1]),T=(i[0]-u[0])*S-g*(i[1]-u[1]);return C>0&&T<0||C<0&&T>0}function Vh(s,i,u){for(const B of u)for(let j=0;j<B.length-1;++j)if((T=[(C=B[j+1])[0]-(S=B[j])[0],C[1]-S[1]])[0]*(M=[(g=i)[0]-(p=s)[0],g[1]-p[1]])[1]-T[1]*M[0]!=0&&jh(p,g,S,C)&&jh(S,C,p,g))return!0;var p,g,S,C,T,M;return!1}function lc(s,i){for(let u=0;u<s.length;++u)if(!hu(s[u],i))return!1;for(let u=0;u<s.length-1;++u)if(Vh(s[u],s[u+1],i))return!1;return!0}function qh(s,i){for(let u=0;u<i.length;u++)if(lc(s,i[u]))return!0;return!1}function ss(s,i,u){const p=[];for(let g=0;g<s.length;g++){const S=[];for(let C=0;C<s[g].length;C++){const T=gm(s[g][C],u);Cl(i,T),S.push(T)}p.push(S)}return p}function Gh(s,i,u){const p=[];for(let g=0;g<s.length;g++){const S=ss(s[g],i,u);p.push(S)}return p}function uc(s,i,u,p){if(s[0]<u[0]||s[0]>u[2]){const g=.5*p;let S=s[0]-u[0]>g?-p:u[0]-s[0]>g?p:0;S===0&&(S=s[0]-u[2]>g?-p:u[2]-s[0]>g?p:0),s[0]+=S}Cl(i,s)}function Hh(s,i,u,p){const g=Math.pow(2,p.z)*Ln,S=[p.x*Ln,p.y*Ln],C=[];for(const T of s)for(const M of T){const B=[M.x+S[0],M.y+S[1]];uc(B,i,u,g),C.push(B)}return C}function Wh(s,i,u,p){const g=Math.pow(2,p.z)*Ln,S=[p.x*Ln,p.y*Ln],C=[];for(const M of s){const B=[];for(const j of M){const H=[j.x+S[0],j.y+S[1]];Cl(i,H),B.push(H)}C.push(B)}if(i[2]-i[0]<=g/2){(T=i)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const M of C)for(const B of M)uc(B,i,u,g)}var T;return C}class ls{constructor(i,u){this.type=bt,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(rs(i[1])){const p=i[1];if(p.type==="FeatureCollection")for(let g=0;g<p.features.length;++g){const S=p.features[g].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new ls(p,p.features[g].geometry)}else if(p.type==="Feature"){const g=p.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ls(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new ls(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,p){const g=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(p.type==="Polygon"){const T=ss(p.coordinates,S,C),M=Hh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!hu(B,T))return!1}if(p.type==="MultiPolygon"){const T=Gh(p.coordinates,S,C),M=Hh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!Uh(B,T))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,p){const g=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(p.type==="Polygon"){const T=ss(p.coordinates,S,C),M=Wh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!lc(B,T))return!1}if(p.type==="MultiPolygon"){const T=Gh(p.coordinates,S,C),M=Wh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!qh(B,T))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ns{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=i[1];return u.scope.has(p)?new Ns(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class xo{constructor(i,u,p,g){this.name=i,this.type=u,this._evaluate=p,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,u){const p=i[0],g=xo.definitions[p];if(!g)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(g)?g[0]:g.type,C=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,T=C.filter(([B])=>!Array.isArray(B)||B.length===i.length-1);let M=null;for(const[B,j]of T){M=new os(u.registry,cc,u.path,null,u.scope);const H=[];let Y=!1;for(let te=1;te<i.length;te++){const re=i[te],ge=Array.isArray(B)?B[te-1]:B.type,ve=M.parse(re,1+H.length,ge);if(!ve){Y=!0;break}H.push(ve)}if(!Y)if(Array.isArray(B)&&B.length!==H.length)M.error(`Expected ${B.length} arguments, but found ${H.length} instead.`);else{for(let te=0;te<H.length;te++){const re=Array.isArray(B)?B[te]:B.type,ge=H[te];M.concat(te+1).checkSubtype(re,ge.type)}if(M.errors.length===0)return new xo(p,S,j,H)}}if(T.length===1)u.errors.push(...M.errors);else{const B=(T.length?T:C).map(([H])=>{return Y=H,Array.isArray(Y)?`(${Y.map(On).join(", ")})`:`(${On(Y.type)}...)`;var Y}).join(" | "),j=[];for(let H=1;H<i.length;H++){const Y=u.parse(i[H],1+j.length);if(!Y)return null;j.push(On(Y.type))}u.error(`Expected arguments of type ${B}, but found (${j.join(", ")}) instead.`)}return null}static register(i,u){xo.definitions=u;for(const p in u)i[p]=xo}}function cc(s){if(s instanceof Ns)return cc(s.boundExpression);if(s instanceof xo&&s.name==="error"||s instanceof as||s instanceof ls)return!1;const i=s instanceof Oa||s instanceof Yo;let u=!0;return s.eachChild(p=>{u=i?u&&cc(p):u&&p instanceof is}),!!u&&hc(s)&&kl(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function hc(s){if(s instanceof xo&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ls)return!1;let i=!0;return s.eachChild(u=>{i&&!hc(u)&&(i=!1)}),i}function El(s){if(s instanceof xo&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(u=>{i&&!El(u)&&(i=!1)}),i}function kl(s,i){if(s instanceof xo&&i.indexOf(s.name)>=0)return!1;let u=!0;return s.eachChild(p=>{u&&!kl(p,i)&&(u=!1)}),u}function fc(s,i){const u=s.length-1;let p,g,S=0,C=u,T=0;for(;S<=C;)if(T=Math.floor((S+C)/2),p=s[T],g=s[T+1],p<=i){if(T===u||i<g)return T;S=T+1}else{if(!(p>i))throw new ii("Input is not a number.");C=T-1}return 0}class fu{constructor(i,u,p){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[g,S]of p)this.labels.push(g),this.outputs.push(S)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(i[1],1,Pe);if(!p)return null;const g=[];let S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let C=1;C<i.length;C+=2){const T=C===1?-1/0:i[C],M=i[C+1],B=C,j=C+1;if(typeof T!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(g.length&&g[g.length-1][0]>=T)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const H=u.parse(M,j,S);if(!H)return null;S=S||H.type,g.push([T,H])}return new fu(S,p,g)}evaluate(i){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(i);const g=this.input.evaluate(i);if(g<=u[0])return p[0].evaluate(i);const S=u.length;return g>=u[S-1]?p[S-1].evaluate(i):p[fc(u,g)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Al(s,i,u){return s+u*(i-s)}function du(s,i,u){return s.map((p,g)=>Al(p,i[g],u))}const Hi={number:Al,color:function(s,i,u,p="rgb"){switch(p){case"rgb":{const[g,S,C,T]=du(s.rgb,i.rgb,u);return new wn(g,S,C,T,!1)}case"hcl":{const[g,S,C,T]=s.hcl,[M,B,j,H]=i.hcl;let Y,te;if(isNaN(g)||isNaN(M))isNaN(g)?isNaN(M)?Y=NaN:(Y=M,C!==1&&C!==0||(te=B)):(Y=g,j!==1&&j!==0||(te=S));else{let Be=M-g;M>g&&Be>180?Be-=360:M<g&&g-M>180&&(Be+=360),Y=g+u*Be}const[re,ge,ve,pe]=function([Be,ke,ze,He]){return Be=isNaN(Be)?0:Be*Ae,fn([ze,Math.cos(Be)*ke,Math.sin(Be)*ke,He])}([Y,te??Al(S,B,u),Al(C,j,u),Al(T,H,u)]);return new wn(re,ge,ve,pe,!1)}case"lab":{const[g,S,C,T]=fn(du(s.lab,i.lab,u));return new wn(g,S,C,T,!1)}}},array:du,padding:function(s,i,u){return new Pr(du(s.values,i.values,u))}};class bo{constructor(i,u,p,g,S){this.type=i,this.operator=u,this.interpolation=p,this.input=g,this.labels=[],this.outputs=[];for(const[C,T]of S)this.labels.push(C),this.outputs.push(T)}static interpolationFactor(i,u,p,g){let S=0;if(i.name==="exponential")S=Zh(u,i.base,p,g);else if(i.name==="linear")S=Zh(u,1,p,g);else if(i.name==="cubic-bezier"){const C=i.controlPoints;S=new $(C[0],C[1],C[2],C[3]).solve(Zh(u,1,p,g))}return S}static parse(i,u){let[p,g,S,...C]=i;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const B=g[1];if(typeof B!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:B}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const B=g.slice(1);if(B.length!==4||B.some(j=>typeof j!="number"||j<0||j>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:B}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,Pe),!S)return null;const T=[];let M=null;p==="interpolate-hcl"||p==="interpolate-lab"?M=vn:u.expectedType&&u.expectedType.kind!=="value"&&(M=u.expectedType);for(let B=0;B<C.length;B+=2){const j=C[B],H=C[B+1],Y=B+3,te=B+4;if(typeof j!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(T.length&&T[T.length-1][0]>=j)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const re=u.parse(H,te,M);if(!re)return null;M=M||re.type,T.push([j,re])}return W(M,Pe)||W(M,vn)||W(M,bn)||W(M,Mn(Pe))?new bo(M,p,g,S,T):u.error(`Type ${On(M)} is not interpolatable.`)}evaluate(i){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(i);const g=this.input.evaluate(i);if(g<=u[0])return p[0].evaluate(i);const S=u.length;if(g>=u[S-1])return p[S-1].evaluate(i);const C=fc(u,g),T=bo.interpolationFactor(this.interpolation,g,u[C],u[C+1]),M=p[C].evaluate(i),B=p[C+1].evaluate(i);switch(this.operator){case"interpolate":return Hi[this.type.kind](M,B,T);case"interpolate-hcl":return Hi.color(M,B,T,"hcl");case"interpolate-lab":return Hi.color(M,B,T,"lab")}}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Zh(s,i,u,p){const g=p-u,S=s-u;return g===0?0:i===1?S/g:(Math.pow(i,S)-1)/(Math.pow(i,g)-1)}class dc{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let p=null;const g=u.expectedType;g&&g.kind!=="value"&&(p=g);const S=[];for(const T of i.slice(1)){const M=u.parse(T,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!M)return null;p=p||M.type,S.push(M)}if(!p)throw new Error("No output type");const C=g&&S.some(T=>ri(g,T.type));return new dc(C?xt:p,S)}evaluate(i){let u,p=null,g=0;for(const S of this.args)if(g++,p=S.evaluate(i),p&&p instanceof Fo&&!p.available&&(u||(u=p.name),p=null,g===this.args.length&&(p=u)),p!==null)break;return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}class pc{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let S=1;S<i.length-1;S+=2){const C=i[S];if(typeof C!="string")return u.error(`Expected string, but found ${typeof C} instead.`,S);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);const T=u.parse(i[S+1],S+1);if(!T)return null;p.push([C,T])}const g=u.parse(i[i.length-1],i.length-1,u.expectedType,p);return g?new pc(p,g):null}outputDefined(){return this.result.outputDefined()}}class Kh{constructor(i,u,p){this.type=i,this.index=u,this.input=p}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,Pe),g=u.parse(i[2],2,Mn(u.expectedType||xt));return p&&g?new Kh(g.type.itemType,p,g):null}evaluate(i){const u=this.index.evaluate(i),p=this.input.evaluate(i);if(u<0)throw new ii(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new ii(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new ii(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class mr{constructor(i,u){this.type=bt,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,xt),g=u.parse(i[2],2,xt);return p&&g?wr(p.type,[bt,rt,Pe,Fe,xt])?new mr(p,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(p.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!p)return!1;if(!ye(u,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${On(jr(u))} instead.`);if(!ye(p,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${On(jr(p))} instead.`);return p.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class er{constructor(i,u,p){this.type=Pe,this.needle=i,this.haystack=u,this.fromIndex=p}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,xt),g=u.parse(i[2],2,xt);if(!p||!g)return null;if(!wr(p.type,[bt,rt,Pe,Fe,xt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(p.type)} instead`);if(i.length===4){const S=u.parse(i[3],3,Pe);return S?new er(p,g,S):null}return new er(p,g)}evaluate(i){const u=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!ye(u,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${On(jr(u))} instead.`);if(!ye(p,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${On(jr(p))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(i);return p.indexOf(u,g)}return p.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Tl{constructor(i,u,p,g,S,C){this.inputType=i,this.type=u,this.input=p,this.cases=g,this.outputs=S,this.otherwise=C}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let p,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const S={},C=[];for(let B=2;B<i.length-1;B+=2){let j=i[B];const H=i[B+1];Array.isArray(j)||(j=[j]);const Y=u.concat(B);if(j.length===0)return Y.error("Expected at least one branch label.");for(const re of j){if(typeof re!="number"&&typeof re!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return Y.error("Numeric branch labels must be integer values.");if(p){if(Y.checkSubtype(p,jr(re)))return null}else p=jr(re);if(S[String(re)]!==void 0)return Y.error("Branch labels must be unique.");S[String(re)]=C.length}const te=u.parse(H,B,g);if(!te)return null;g=g||te.type,C.push(te)}const T=u.parse(i[1],1,xt);if(!T)return null;const M=u.parse(i[i.length-1],i.length-1,g);return M?T.type.kind!=="value"&&u.concat(1).checkSubtype(p,T.type)?null:new Tl(p,g,T,S,C,M):null}evaluate(i){const u=this.input.evaluate(i);return(jr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Vn{constructor(i,u,p){this.type=i,this.branches=u,this.otherwise=p}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const g=[];for(let C=1;C<i.length-1;C+=2){const T=u.parse(i[C],C,bt);if(!T)return null;const M=u.parse(i[C+1],C+1,p);if(!M)return null;g.push([T,M]),p=p||M.type}const S=u.parse(i[i.length-1],i.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new Vn(p,g,S)}evaluate(i){for(const[u,p]of this.branches)if(u.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,p]of this.branches)i(u),i(p);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class mc{constructor(i,u,p,g){this.type=i,this.input=u,this.beginIndex=p,this.endIndex=g}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,xt),g=u.parse(i[2],2,Pe);if(!p||!g)return null;if(!wr(p.type,[Mn(xt),rt,xt]))return u.error(`Expected first argument to be of type array or string, but found ${On(p.type)} instead`);if(i.length===4){const S=u.parse(i[3],3,Pe);return S?new mc(p.type,p,g,S):null}return new mc(p.type,p,g)}evaluate(i){const u=this.input.evaluate(i),p=this.beginIndex.evaluate(i);if(!ye(u,["string","array"]))throw new ii(`Expected first argument to be of type array or string, but found ${On(jr(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(i);return u.slice(p,g)}return u.slice(p)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function cd(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function hd(s,i,u,p){return p.compare(i,u)===0}function Pl(s,i,u){const p=s!=="=="&&s!=="!=";return class gF{constructor(S,C,T){this.type=bt,this.lhs=S,this.rhs=C,this.collator=T,this.hasUntypedArgument=S.type.kind==="value"||C.type.kind==="value"}static parse(S,C){if(S.length!==3&&S.length!==4)return C.error("Expected two or three arguments.");const T=S[0];let M=C.parse(S[1],1,xt);if(!M)return null;if(!cd(T,M.type))return C.concat(1).error(`"${T}" comparisons are not supported for type '${On(M.type)}'.`);let B=C.parse(S[2],2,xt);if(!B)return null;if(!cd(T,B.type))return C.concat(2).error(`"${T}" comparisons are not supported for type '${On(B.type)}'.`);if(M.type.kind!==B.type.kind&&M.type.kind!=="value"&&B.type.kind!=="value")return C.error(`Cannot compare types '${On(M.type)}' and '${On(B.type)}'.`);p&&(M.type.kind==="value"&&B.type.kind!=="value"?M=new Yo(B.type,[M]):M.type.kind!=="value"&&B.type.kind==="value"&&(B=new Yo(M.type,[B])));let j=null;if(S.length===4){if(M.type.kind!=="string"&&B.type.kind!=="string"&&M.type.kind!=="value"&&B.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(j=C.parse(S[3],3,$n),!j)return null}return new gF(M,B,j)}evaluate(S){const C=this.lhs.evaluate(S),T=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const M=jr(C),B=jr(T);if(M.kind!==B.kind||M.kind!=="string"&&M.kind!=="number")throw new ii(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${M.kind}, ${B.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const M=jr(C),B=jr(T);if(M.kind!=="string"||B.kind!=="string")return i(S,C,T)}return this.collator?u(S,C,T,this.collator.evaluate(S)):i(S,C,T)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const fd=Pl("==",function(s,i,u){return i===u},hd),ym=Pl("!=",function(s,i,u){return i!==u},function(s,i,u,p){return!hd(0,i,u,p)}),Ei=Pl("<",function(s,i,u){return i<u},function(s,i,u,p){return p.compare(i,u)<0}),Xh=Pl(">",function(s,i,u){return i>u},function(s,i,u,p){return p.compare(i,u)>0}),Us=Pl("<=",function(s,i,u){return i<=u},function(s,i,u,p){return p.compare(i,u)<=0}),dd=Pl(">=",function(s,i,u){return i>=u},function(s,i,u,p){return p.compare(i,u)>=0});class pu{constructor(i,u,p,g,S){this.type=rt,this.number=i,this.locale=u,this.currency=p,this.minFractionDigits=g,this.maxFractionDigits=S}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const p=u.parse(i[1],1,Pe);if(!p)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let S=null;if(g.locale&&(S=u.parse(g.locale,1,rt),!S))return null;let C=null;if(g.currency&&(C=u.parse(g.currency,1,rt),!C))return null;let T=null;if(g["min-fraction-digits"]&&(T=u.parse(g["min-fraction-digits"],1,Pe),!T))return null;let M=null;return g["max-fraction-digits"]&&(M=u.parse(g["max-fraction-digits"],1,Pe),!M)?null:new pu(p,S,C,T,M)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Wi{constructor(i){this.type=jn,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const g=[];let S=!1;for(let C=1;C<=i.length-1;++C){const T=i[C];if(S&&typeof T=="object"&&!Array.isArray(T)){S=!1;let M=null;if(T["font-scale"]&&(M=u.parse(T["font-scale"],1,Pe),!M))return null;let B=null;if(T["text-font"]&&(B=u.parse(T["text-font"],1,Mn(rt)),!B))return null;let j=null;if(T["text-color"]&&(j=u.parse(T["text-color"],1,vn),!j))return null;const H=g[g.length-1];H.scale=M,H.font=B,H.textColor=j}else{const M=u.parse(i[C],1,xt);if(!M)return null;const B=M.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,g.push({content:M,scale:null,font:null,textColor:null})}}return new Wi(g)}evaluate(i){return new pr(this.sections.map(u=>{const p=u.content.evaluate(i);return jr(p)===_r?new Lr("",p,null,null,null):new Lr(Sl(p),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}}class gc{constructor(i){this.type=_r,this.input=i}static parse(i,u){if(i.length!==2)return u.error("Expected two arguments.");const p=u.parse(i[1],1,rt);return p?new gc(p):u.error("No image name provided.")}evaluate(i){const u=this.input.evaluate(i),p=Fo.fromString(u);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(u)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}}class yc{constructor(i){this.type=Pe,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=u.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${On(p.type)} instead.`):new yc(p):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new ii(`Expected value to be of type string or array, but found ${On(jr(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const js={"==":fd,"!=":ym,">":Xh,"<":Ei,">=":dd,"<=":Us,array:Yo,at:Kh,boolean:Yo,case:Vn,coalesce:dc,collator:as,format:Wi,image:gc,in:mr,"index-of":er,interpolate:bo,"interpolate-hcl":bo,"interpolate-lab":bo,length:yc,let:pc,literal:is,match:Tl,number:Yo,"number-format":pu,object:Yo,slice:mc,step:fu,string:Yo,"to-boolean":Oa,"to-color":Oa,"to-number":Oa,"to-string":Oa,var:Ns,within:ls};function Yh(s,[i,u,p,g]){i=i.evaluate(s),u=u.evaluate(s),p=p.evaluate(s);const S=g?g.evaluate(s):1,C=ld(i,u,p,S);if(C)throw new ii(C);return new wn(i/255,u/255,p/255,S,!1)}function Jh(s,i){return s in i}function _c(s,i){const u=i[s];return u===void 0?null:u}function oi(s){return{type:s}}function pd(s){return{result:"success",value:s}}function ki(s){return{result:"error",value:s}}function Il(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Qh(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function pa(s){return!!s.expression&&s.expression.interpolated}function qn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Ml(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Ir(s){return s}function Fa(s,i){const u=i.type==="color",p=s.stops&&typeof s.stops[0][0]=="object",g=p||!(p||s.property!==void 0),S=s.type||(pa(i)?"exponential":"interval");if(u||i.type==="padding"){const j=u?wn.parse:Pr.parse;(s=ni({},s)).stops&&(s.stops=s.stops.map(H=>[H[0],j(H[1])])),s.default=j(s.default?s.default:i.default)}if(s.colorSpace&&(C=s.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var C;let T,M,B;if(S==="exponential")T=vc;else if(S==="interval")T=ef;else if(S==="categorical"){T=_m,M=Object.create(null);for(const j of s.stops)M[j[0]]=j[1];B=typeof s.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);T=vm}if(p){const j={},H=[];for(let re=0;re<s.stops.length;re++){const ge=s.stops[re],ve=ge[0].zoom;j[ve]===void 0&&(j[ve]={zoom:ve,type:s.type,property:s.property,default:s.default,stops:[]},H.push(ve)),j[ve].stops.push([ge[0].value,ge[1]])}const Y=[];for(const re of H)Y.push([j[re].zoom,Fa(j[re],i)]);const te={name:"linear"};return{kind:"composite",interpolationType:te,interpolationFactor:bo.interpolationFactor.bind(void 0,te),zoomStops:Y.map(re=>re[0]),evaluate:({zoom:re},ge)=>vc({stops:Y,base:s.base},i,re).evaluate(re,ge)}}if(g){const j=S==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:bo.interpolationFactor.bind(void 0,j),zoomStops:s.stops.map(H=>H[0]),evaluate:({zoom:H})=>T(s,i,H,M,B)}}return{kind:"source",evaluate(j,H){const Y=H&&H.properties?H.properties[s.property]:void 0;return Y===void 0?Vs(s.default,i.default):T(s,i,Y,M,B)}}}function Vs(s,i,u){return s!==void 0?s:i!==void 0?i:u!==void 0?u:void 0}function _m(s,i,u,p,g){return Vs(typeof u===g?p[u]:void 0,s.default,i.default)}function ef(s,i,u){if(qn(u)!=="number")return Vs(s.default,i.default);const p=s.stops.length;if(p===1||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[p-1][0])return s.stops[p-1][1];const g=fc(s.stops.map(S=>S[0]),u);return s.stops[g][1]}function vc(s,i,u){const p=s.base!==void 0?s.base:1;if(qn(u)!=="number")return Vs(s.default,i.default);const g=s.stops.length;if(g===1||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[g-1][0])return s.stops[g-1][1];const S=fc(s.stops.map(j=>j[0]),u),C=function(j,H,Y,te){const re=te-Y,ge=j-Y;return re===0?0:H===1?ge/re:(Math.pow(H,ge)-1)/(Math.pow(H,re)-1)}(u,p,s.stops[S][0],s.stops[S+1][0]),T=s.stops[S][1],M=s.stops[S+1][1],B=Hi[i.type]||Ir;return typeof T.evaluate=="function"?{evaluate(...j){const H=T.evaluate.apply(void 0,j),Y=M.evaluate.apply(void 0,j);if(H!==void 0&&Y!==void 0)return B(H,Y,C,s.colorSpace)}}:B(T,M,C,s.colorSpace)}function vm(s,i,u){switch(i.type){case"color":u=wn.parse(u);break;case"formatted":u=pr.fromString(u.toString());break;case"resolvedImage":u=Fo.fromString(u.toString());break;case"padding":u=Pr.parse(u);break;default:qn(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0)}return Vs(u,s.default,i.default)}xo.register(js,{error:[{kind:"error"},[rt],(s,[i])=>{throw new ii(i.evaluate(s))}],typeof:[rt,[xt],(s,[i])=>On(jr(i.evaluate(s)))],"to-rgba":[Mn(Pe,4),[vn],(s,[i])=>{const[u,p,g,S]=i.evaluate(s).rgb;return[255*u,255*p,255*g,S]}],rgb:[vn,[Pe,Pe,Pe],Yh],rgba:[vn,[Pe,Pe,Pe,Pe],Yh],has:{type:bt,overloads:[[[rt],(s,[i])=>Jh(i.evaluate(s),s.properties())],[[rt,Wt],(s,[i,u])=>Jh(i.evaluate(s),u.evaluate(s))]]},get:{type:xt,overloads:[[[rt],(s,[i])=>_c(i.evaluate(s),s.properties())],[[rt,Wt],(s,[i,u])=>_c(i.evaluate(s),u.evaluate(s))]]},"feature-state":[xt,[rt],(s,[i])=>_c(i.evaluate(s),s.featureState||{})],properties:[Wt,[],s=>s.properties()],"geometry-type":[rt,[],s=>s.geometryType()],id:[xt,[],s=>s.id()],zoom:[Pe,[],s=>s.globals.zoom],"heatmap-density":[Pe,[],s=>s.globals.heatmapDensity||0],"line-progress":[Pe,[],s=>s.globals.lineProgress||0],accumulated:[xt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Pe,oi(Pe),(s,i)=>{let u=0;for(const p of i)u+=p.evaluate(s);return u}],"*":[Pe,oi(Pe),(s,i)=>{let u=1;for(const p of i)u*=p.evaluate(s);return u}],"-":{type:Pe,overloads:[[[Pe,Pe],(s,[i,u])=>i.evaluate(s)-u.evaluate(s)],[[Pe],(s,[i])=>-i.evaluate(s)]]},"/":[Pe,[Pe,Pe],(s,[i,u])=>i.evaluate(s)/u.evaluate(s)],"%":[Pe,[Pe,Pe],(s,[i,u])=>i.evaluate(s)%u.evaluate(s)],ln2:[Pe,[],()=>Math.LN2],pi:[Pe,[],()=>Math.PI],e:[Pe,[],()=>Math.E],"^":[Pe,[Pe,Pe],(s,[i,u])=>Math.pow(i.evaluate(s),u.evaluate(s))],sqrt:[Pe,[Pe],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Pe,[Pe],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Pe,[Pe],(s,[i])=>Math.log(i.evaluate(s))],log2:[Pe,[Pe],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Pe,[Pe],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Pe,[Pe],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Pe,[Pe],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Pe,[Pe],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Pe,[Pe],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Pe,[Pe],(s,[i])=>Math.atan(i.evaluate(s))],min:[Pe,oi(Pe),(s,i)=>Math.min(...i.map(u=>u.evaluate(s)))],max:[Pe,oi(Pe),(s,i)=>Math.max(...i.map(u=>u.evaluate(s)))],abs:[Pe,[Pe],(s,[i])=>Math.abs(i.evaluate(s))],round:[Pe,[Pe],(s,[i])=>{const u=i.evaluate(s);return u<0?-Math.round(-u):Math.round(u)}],floor:[Pe,[Pe],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Pe,[Pe],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[bt,[rt,xt],(s,[i,u])=>s.properties()[i.value]===u.value],"filter-id-==":[bt,[xt],(s,[i])=>s.id()===i.value],"filter-type-==":[bt,[rt],(s,[i])=>s.geometryType()===i.value],"filter-<":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p<g}],"filter-id-<":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u<p}],"filter->":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p>g}],"filter-id->":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u>p}],"filter-<=":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p<=g}],"filter-id-<=":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u<=p}],"filter->=":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p>=g}],"filter-id->=":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u>=p}],"filter-has":[bt,[xt],(s,[i])=>i.value in s.properties()],"filter-has-id":[bt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[bt,[Mn(rt)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[bt,[Mn(xt)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[bt,[rt,Mn(xt)],(s,[i,u])=>u.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[bt,[rt,Mn(xt)],(s,[i,u])=>function(p,g,S,C){for(;S<=C;){const T=S+C>>1;if(g[T]===p)return!0;g[T]>p?C=T-1:S=T+1}return!1}(s.properties()[i.value],u.value,0,u.value.length-1)],all:{type:bt,overloads:[[[bt,bt],(s,[i,u])=>i.evaluate(s)&&u.evaluate(s)],[oi(bt),(s,i)=>{for(const u of i)if(!u.evaluate(s))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],(s,[i,u])=>i.evaluate(s)||u.evaluate(s)],[oi(bt),(s,i)=>{for(const u of i)if(u.evaluate(s))return!0;return!1}]]},"!":[bt,[bt],(s,[i])=>!i.evaluate(s)],"is-supported-script":[bt,[rt],(s,[i])=>{const u=s.globals&&s.globals.isSupportedScript;return!u||u(i.evaluate(s))}],upcase:[rt,[rt],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[rt,[rt],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[rt,oi(xt),(s,i)=>i.map(u=>Sl(u.evaluate(s))).join("")],"resolved-locale":[rt,[$n],(s,[i])=>i.evaluate(s).resolvedLocale()]});class tf{constructor(i,u){var p;this.expression=i,this._warningHistory={},this._evaluator=new cu,this._defaultValue=u?(p=u).type==="color"&&Ml(p.default)?new wn(0,0,0,0):p.type==="color"?wn.parse(p.default)||null:p.type==="padding"?Pr.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(i,u,p,g,S,C){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=g,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(i,u,p,g,S,C){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=g,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ii(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function mu(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in js}function qs(s,i){const u=new os(js,cc,[],i?function(g){const S={color:vn,string:rt,number:Pe,enum:rt,boolean:bt,formatted:jn,padding:bn,resolvedImage:_r};return g.type==="array"?Mn(S[g.value]||xt,g.length):S[g.type]}(i):void 0),p=u.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?pd(new tf(p,i)):ki(u.errors)}class hr{constructor(i,u){this.kind=i,this._styleExpression=u,this.isStateDependent=i!=="constant"&&!El(u.expression)}evaluateWithoutErrorHandling(i,u,p,g,S,C){return this._styleExpression.evaluateWithoutErrorHandling(i,u,p,g,S,C)}evaluate(i,u,p,g,S,C){return this._styleExpression.evaluate(i,u,p,g,S,C)}}class nf{constructor(i,u,p,g){this.kind=i,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!El(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,u,p,g,S,C){return this._styleExpression.evaluateWithoutErrorHandling(i,u,p,g,S,C)}evaluate(i,u,p,g,S,C){return this._styleExpression.evaluate(i,u,p,g,S,C)}interpolationFactor(i,u,p){return this.interpolationType?bo.interpolationFactor(this.interpolationType,i,u,p):0}}function Pn(s,i){const u=qs(s,i);if(u.result==="error")return u;const p=u.value.expression,g=hc(p);if(!g&&!Il(i))return ki([new We("","data expressions not supported")]);const S=kl(p,["zoom"]);if(!S&&!Qh(i))return ki([new We("","zoom expressions not supported")]);const C=or(p);return C||S?C instanceof We?ki([C]):C instanceof bo&&!pa(i)?ki([new We("",'"interpolate" expressions cannot be used with this property')]):pd(C?new nf(g?"camera":"composite",u.value,C.labels,C instanceof bo?C.interpolation:void 0):new hr(g?"constant":"source",u.value)):ki([new We("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gs{constructor(i,u){this._parameters=i,this._specification=u,ni(this,Fa(this._parameters,this._specification))}static deserialize(i){return new Gs(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function or(s){let i=null;if(s instanceof pc)i=or(s.result);else if(s instanceof dc){for(const u of s.args)if(i=or(u),i)break}else(s instanceof fu||s instanceof bo)&&s.input instanceof xo&&s.input.name==="zoom"&&(i=s);return i instanceof We||s.eachChild(u=>{const p=or(u);p instanceof We?i=p:!i&&p?i=new We("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new We("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function ar(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!ar(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const gu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xc(s){if(s==null)return{filter:()=>!0,needGeometry:!1};ar(s)||(s=wc(s));const i=qs(s,gu);if(i.result==="error")throw new Error(i.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,p,g)=>i.value.evaluate(u,p,{},g),needGeometry:bc(s)}}function rf(s,i){return s<i?-1:s>i?1:0}function bc(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(bc(s[i]))return!0;return!1}function wc(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?Sc(s[1],s[2],"=="):i==="!="?Ra(Sc(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Sc(s[1],s[2],i):i==="any"?(u=s.slice(1),["any"].concat(u.map(wc))):i==="all"?["all"].concat(s.slice(1).map(wc)):i==="none"?["all"].concat(s.slice(1).map(wc).map(Ra)):i==="in"?Zi(s[1],s.slice(2)):i==="!in"?Ra(Zi(s[1],s.slice(2))):i==="has"?yu(s[1]):i==="!has"?Ra(yu(s[1])):i!=="within"||s;var u}function Sc(s,i,u){switch(s){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,s,i]}}function Zi(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",s,["literal",i.sort(rf)]]:["filter-in-small",s,["literal",i]]}}function yu(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ra(s){return["!",s]}function _u(s){const i=typeof s;if(i==="number"||i==="boolean"||i==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const S of s)g+=`${_u(S)},`;return`${g}]`}const u=Object.keys(s).sort();let p="{";for(let g=0;g<u.length;g++)p+=`${JSON.stringify(u[g])}:${_u(s[u[g]])},`;return`${p}}`}function Cc(s){let i="";for(const u of yr)i+=`/${_u(s[u])}`;return i}function md(s){const i=s.value;return i?[new vt(s.key,i,"constants have been deprecated as of v8")]:[]}function Vr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Hs(s){if(Array.isArray(s))return s.map(Hs);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const u in s)i[u]=Hs(s[u]);return i}return Vr(s)}function Ro(s){const i=s.key,u=s.value,p=s.valueSpec||{},g=s.objectElementValidators||{},S=s.style,C=s.styleSpec,T=s.validateSpec;let M=[];const B=qn(u);if(B!=="object")return[new vt(i,u,`object expected, ${B} found`)];for(const j in u){const H=j.split(".")[0],Y=p[H]||p["*"];let te;if(g[H])te=g[H];else if(p[H])te=T;else if(g["*"])te=g["*"];else{if(!p["*"]){M.push(new vt(i,u[j],`unknown property "${j}"`));continue}te=T}M=M.concat(te({key:(i&&`${i}.`)+j,value:u[j],valueSpec:Y,style:S,styleSpec:C,object:u,objectKey:j,validateSpec:T},u))}for(const j in p)g[j]||p[j].required&&p[j].default===void 0&&u[j]===void 0&&M.push(new vt(i,u,`missing required property "${j}"`));return M}function gd(s){const i=s.value,u=s.valueSpec,p=s.style,g=s.styleSpec,S=s.key,C=s.arrayElementValidator||s.validateSpec;if(qn(i)!=="array")return[new vt(S,i,`array expected, ${qn(i)} found`)];if(u.length&&i.length!==u.length)return[new vt(S,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new vt(S,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let T={type:u.value,values:u.values};g.$version<7&&(T.function=u.function),qn(u.value)==="object"&&(T=u.value);let M=[];for(let B=0;B<i.length;B++)M=M.concat(C({array:i,arrayIndex:B,value:i[B],valueSpec:T,validateSpec:s.validateSpec,style:p,styleSpec:g,key:`${S}[${B}]`}));return M}function us(s){const i=s.key,u=s.value,p=s.valueSpec;let g=qn(u);return g==="number"&&u!=u&&(g="NaN"),g!=="number"?[new vt(i,u,`number expected, ${g} found`)]:"minimum"in p&&u<p.minimum?[new vt(i,u,`${u} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&u>p.maximum?[new vt(i,u,`${u} is greater than the maximum value ${p.maximum}`)]:[]}function yd(s){const i=s.valueSpec,u=Vr(s.value.type);let p,g,S,C={};const T=u!=="categorical"&&s.value.property===void 0,M=!T,B=qn(s.value.stops)==="array"&&qn(s.value.stops[0])==="array"&&qn(s.value.stops[0][0])==="object",j=Ro({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(te){if(u==="identity")return[new vt(te.key,te.value,'identity function may not have a "stops" property')];let re=[];const ge=te.value;return re=re.concat(gd({key:te.key,value:ge,valueSpec:te.valueSpec,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:H})),qn(ge)==="array"&&ge.length===0&&re.push(new vt(te.key,ge,"array must have at least one stop")),re},default:function(te){return te.validateSpec({key:te.key,value:te.value,valueSpec:i,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec})}}});return u==="identity"&&T&&j.push(new vt(s.key,s.value,'missing required property "property"')),u==="identity"||s.value.stops||j.push(new vt(s.key,s.value,'missing required property "stops"')),u==="exponential"&&s.valueSpec.expression&&!pa(s.valueSpec)&&j.push(new vt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(M&&!Il(s.valueSpec)?j.push(new vt(s.key,s.value,"property functions not supported")):T&&!Qh(s.valueSpec)&&j.push(new vt(s.key,s.value,"zoom functions not supported"))),u!=="categorical"&&!B||s.value.property!==void 0||j.push(new vt(s.key,s.value,'"property" property is required')),j;function H(te){let re=[];const ge=te.value,ve=te.key;if(qn(ge)!=="array")return[new vt(ve,ge,`array expected, ${qn(ge)} found`)];if(ge.length!==2)return[new vt(ve,ge,`array length 2 expected, length ${ge.length} found`)];if(B){if(qn(ge[0])!=="object")return[new vt(ve,ge,`object expected, ${qn(ge[0])} found`)];if(ge[0].zoom===void 0)return[new vt(ve,ge,"object stop key must have zoom")];if(ge[0].value===void 0)return[new vt(ve,ge,"object stop key must have value")];if(S&&S>Vr(ge[0].zoom))return[new vt(ve,ge[0].zoom,"stop zoom values must appear in ascending order")];Vr(ge[0].zoom)!==S&&(S=Vr(ge[0].zoom),g=void 0,C={}),re=re.concat(Ro({key:`${ve}[0]`,value:ge[0],valueSpec:{zoom:{}},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:us,value:Y}}))}else re=re.concat(Y({key:`${ve}[0]`,value:ge[0],valueSpec:{},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec},ge));return mu(Hs(ge[1]))?re.concat([new vt(`${ve}[1]`,ge[1],"expressions are not allowed in function stops.")]):re.concat(te.validateSpec({key:`${ve}[1]`,value:ge[1],valueSpec:i,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec}))}function Y(te,re){const ge=qn(te.value),ve=Vr(te.value),pe=te.value!==null?te.value:re;if(p){if(ge!==p)return[new vt(te.key,pe,`${ge} stop domain type must match previous stop domain type ${p}`)]}else p=ge;if(ge!=="number"&&ge!=="string"&&ge!=="boolean")return[new vt(te.key,pe,"stop domain value must be a number, string, or boolean")];if(ge!=="number"&&u!=="categorical"){let Be=`number expected, ${ge} found`;return Il(i)&&u===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(te.key,pe,Be)]}return u!=="categorical"||ge!=="number"||isFinite(ve)&&Math.floor(ve)===ve?u!=="categorical"&&ge==="number"&&g!==void 0&&ve<g?[new vt(te.key,pe,"stop domain values must appear in ascending order")]:(g=ve,u==="categorical"&&ve in C?[new vt(te.key,pe,"stop domain values must be unique")]:(C[ve]=!0,[])):[new vt(te.key,pe,`integer expected, found ${ve}`)]}}function Ll(s){const i=(s.expressionContext==="property"?Pn:qs)(Hs(s.value),s.valueSpec);if(i.result==="error")return i.value.map(p=>new vt(`${s.key}${p.key}`,s.value,p.message));const u=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!u.outputDefined())return[new vt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!El(u))return[new vt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!El(u))return[new vt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!kl(u,["zoom","feature-state"]))return[new vt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!hc(u))return[new vt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ws(s){const i=s.key,u=s.value,p=s.valueSpec,g=[];return Array.isArray(p.values)?p.values.indexOf(Vr(u))===-1&&g.push(new vt(i,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(Vr(u))===-1&&g.push(new vt(i,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function vu(s){return ar(Hs(s.value))?Ll(ni({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Do(s)}function Do(s){const i=s.value,u=s.key;if(qn(i)!=="array")return[new vt(u,i,`array expected, ${qn(i)} found`)];const p=s.styleSpec;let g,S=[];if(i.length<1)return[new vt(u,i,"filter array must have at least 1 element")];switch(S=S.concat(Ws({key:`${u}[0]`,value:i[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),Vr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Vr(i[1])==="$type"&&S.push(new vt(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&S.push(new vt(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=qn(i[1]),g!=="string"&&S.push(new vt(`${u}[1]`,i[1],`string expected, ${g} found`)));for(let C=2;C<i.length;C++)g=qn(i[C]),Vr(i[1])==="$type"?S=S.concat(Ws({key:`${u}[${C}]`,value:i[C],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&S.push(new vt(`${u}[${C}]`,i[C],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let C=1;C<i.length;C++)S=S.concat(Do({key:`${u}[${C}]`,value:i[C],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=qn(i[1]),i.length!==2?S.push(new vt(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&S.push(new vt(`${u}[1]`,i[1],`string expected, ${g} found`));break;case"within":g=qn(i[1]),i.length!==2?S.push(new vt(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="object"&&S.push(new vt(`${u}[1]`,i[1],`object expected, ${g} found`))}return S}function xu(s,i){const u=s.key,p=s.validateSpec,g=s.style,S=s.styleSpec,C=s.value,T=s.objectKey,M=S[`${i}_${s.layerType}`];if(!M)return[];const B=T.match(/^(.*)-transition$/);if(i==="paint"&&B&&M[B[1]]&&M[B[1]].transition)return p({key:u,value:C,valueSpec:S.transition,style:g,styleSpec:S});const j=s.valueSpec||M[T];if(!j)return[new vt(u,C,`unknown property "${T}"`)];let H;if(qn(C)==="string"&&Il(j)&&!j.tokens&&(H=/^{([^}]+)}$/.exec(C)))return[new vt(u,C,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const Y=[];return s.layerType==="symbol"&&(T==="text-field"&&g&&!g.glyphs&&Y.push(new vt(u,C,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Ml(Hs(C))&&Vr(C.type)==="identity"&&Y.push(new vt(u,C,'"text-font" does not support identity functions'))),Y.concat(p({key:s.key,value:C,valueSpec:j,style:g,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:T}))}function of(s){return xu(s,"paint")}function _d(s){return xu(s,"layout")}function Ec(s){let i=[];const u=s.value,p=s.key,g=s.style,S=s.styleSpec;u.type||u.ref||i.push(new vt(p,u,'either "type" or "ref" is required'));let C=Vr(u.type);const T=Vr(u.ref);if(u.id){const M=Vr(u.id);for(let B=0;B<s.arrayIndex;B++){const j=g.layers[B];Vr(j.id)===M&&i.push(new vt(p,u.id,`duplicate layer id "${u.id}", previously used at line ${j.id.__line__}`))}}if("ref"in u){let M;["type","source","source-layer","filter","layout"].forEach(B=>{B in u&&i.push(new vt(p,u[B],`"${B}" is prohibited for ref layers`))}),g.layers.forEach(B=>{Vr(B.id)===T&&(M=B)}),M?M.ref?i.push(new vt(p,u.ref,"ref cannot reference another ref layer")):C=Vr(M.type):i.push(new vt(p,u.ref,`ref layer "${T}" not found`))}else if(C!=="background")if(u.source){const M=g.sources&&g.sources[u.source],B=M&&Vr(M.type);M?B==="vector"&&C==="raster"?i.push(new vt(p,u.source,`layer "${u.id}" requires a raster source`)):B==="raster"&&C!=="raster"?i.push(new vt(p,u.source,`layer "${u.id}" requires a vector source`)):B!=="vector"||u["source-layer"]?B==="raster-dem"&&C!=="hillshade"?i.push(new vt(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!u.paint||!u.paint["line-gradient"]||B==="geojson"&&M.lineMetrics||i.push(new vt(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new vt(p,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new vt(p,u.source,`source "${u.source}" not found`))}else i.push(new vt(p,u,'missing required property "source"'));return i=i.concat(Ro({key:p,value:u,valueSpec:S.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:u.type,valueSpec:S.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:u,objectKey:"type"}),filter:vu,layout:M=>Ro({layer:u,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":B=>_d(ni({layerType:C},B))}}),paint:M=>Ro({layer:u,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":B=>of(ni({layerType:C},B))}})}})),i}function Ki(s){const i=s.value,u=s.key,p=qn(i);return p!=="string"?[new vt(u,i,`string expected, ${p} found`)]:[]}const io={promoteId:function({key:s,value:i}){if(qn(i)==="string")return Ki({key:s,value:i});{const u=[];for(const p in i)u.push(...Ki({key:`${s}.${p}`,value:i[p]}));return u}}};function bu(s){const i=s.value,u=s.key,p=s.styleSpec,g=s.style,S=s.validateSpec;if(!i.type)return[new vt(u,i,'"type" is required')];const C=Vr(i.type);let T;switch(C){case"vector":case"raster":case"raster-dem":return T=Ro({key:u,value:i,valueSpec:p[`source_${C.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:io,validateSpec:S}),T;case"geojson":if(T=Ro({key:u,value:i,valueSpec:p.source_geojson,style:g,styleSpec:p,validateSpec:S,objectElementValidators:io}),i.cluster)for(const M in i.clusterProperties){const[B,j]=i.clusterProperties[M],H=typeof B=="string"?[B,["accumulated"],["get",M]]:B;T.push(...Ll({key:`${u}.${M}.map`,value:j,validateSpec:S,expressionContext:"cluster-map"})),T.push(...Ll({key:`${u}.${M}.reduce`,value:H,validateSpec:S,expressionContext:"cluster-reduce"}))}return T;case"video":return Ro({key:u,value:i,valueSpec:p.source_video,style:g,validateSpec:S,styleSpec:p});case"image":return Ro({key:u,value:i,valueSpec:p.source_image,style:g,validateSpec:S,styleSpec:p});case"canvas":return[new vt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ws({key:`${u}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:S,styleSpec:p})}}function vd(s){const i=s.value,u=s.styleSpec,p=u.light,g=s.style;let S=[];const C=qn(i);if(i===void 0)return S;if(C!=="object")return S=S.concat([new vt("light",i,`object expected, ${C} found`)]),S;for(const T in i){const M=T.match(/^(.*)-transition$/);S=S.concat(M&&p[M[1]]&&p[M[1]].transition?s.validateSpec({key:T,value:i[T],valueSpec:u.transition,validateSpec:s.validateSpec,style:g,styleSpec:u}):p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],validateSpec:s.validateSpec,style:g,styleSpec:u}):[new vt(T,i[T],`unknown property "${T}"`)])}return S}function wu(s){const i=s.value,u=s.styleSpec,p=u.terrain,g=s.style;let S=[];const C=qn(i);if(i===void 0)return S;if(C!=="object")return S=S.concat([new vt("terrain",i,`object expected, ${C} found`)]),S;for(const T in i)S=S.concat(p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],validateSpec:s.validateSpec,style:g,styleSpec:u}):[new vt(T,i[T],`unknown property "${T}"`)]);return S}function xd(s){let i=[];const u=s.value,p=s.key;if(Array.isArray(u)){const g=[],S=[];for(const C in u)u[C].id&&g.includes(u[C].id)&&i.push(new vt(p,u,`all the sprites' ids must be unique, but ${u[C].id} is duplicated`)),g.push(u[C].id),u[C].url&&S.includes(u[C].url)&&i.push(new vt(p,u,`all the sprites' URLs must be unique, but ${u[C].url} is duplicated`)),S.push(u[C].url),i=i.concat(Ro({key:`${p}[${C}]`,value:u[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return i}return Ki({key:p,value:u})}const bd={"*":()=>[],array:gd,boolean:function(s){const i=s.value,u=s.key,p=qn(i);return p!=="boolean"?[new vt(u,i,`boolean expected, ${p} found`)]:[]},number:us,color:function(s){const i=s.key,u=s.value,p=qn(u);return p!=="string"?[new vt(i,u,`color expected, ${p} found`)]:wn.parse(String(u))?[]:[new vt(i,u,`color expected, "${u}" found`)]},constants:md,enum:Ws,filter:vu,function:yd,layer:Ec,object:Ro,source:bu,light:vd,terrain:wu,string:Ki,formatted:function(s){return Ki(s).length===0?[]:Ll(s)},resolvedImage:function(s){return Ki(s).length===0?[]:Ll(s)},padding:function(s){const i=s.key,u=s.value;if(qn(u)==="array"){if(u.length<1||u.length>4)return[new vt(i,u,`padding requires 1 to 4 values; ${u.length} values found`)];const p={type:"number"};let g=[];for(let S=0;S<u.length;S++)g=g.concat(s.validateSpec({key:`${i}[${S}]`,value:u[S],validateSpec:s.validateSpec,valueSpec:p}));return g}return us({key:i,value:u,valueSpec:{}})},sprite:xd};function Su(s){const i=s.value,u=s.valueSpec,p=s.styleSpec;return s.validateSpec=Su,u.expression&&Ml(Vr(i))?yd(s):u.expression&&mu(Hs(i))?Ll(s):u.type&&bd[u.type]?bd[u.type](s):Ro(ni({},s,{valueSpec:u.type?p[u.type]:u}))}function Zs(s){const i=s.value,u=s.key,p=Ki(s);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new vt(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new vt(u,i,'"glyphs" url must include a "{range}" token'))),p}function De(s,i=Je){let u=[];return u=u.concat(Su({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,validateSpec:Su,objectElementValidators:{glyphs:Zs,"*":()=>[]}})),s.constants&&(u=u.concat(md({key:"constants",value:s.constants,style:s,styleSpec:i,validateSpec:Su}))),Ye(u)}function Qe(s){return function(i){return s({...i,validateSpec:Su})}}function Ye(s){return[].concat(s).sort((i,u)=>i.line-u.line)}function Tt(s){return function(...i){return Ye(s.apply(this,i))}}De.source=Tt(Qe(bu)),De.sprite=Tt(Qe(xd)),De.glyphs=Tt(Qe(Zs)),De.light=Tt(Qe(vd)),De.terrain=Tt(Qe(wu)),De.layer=Tt(Qe(Ec)),De.filter=Tt(Qe(vu)),De.paintProperty=Tt(Qe(of)),De.layoutProperty=Tt(Qe(_d));const ln=De,tr=ln.light,ai=ln.paintProperty,gr=ln.layoutProperty;function cs(s,i){let u=!1;if(i&&i.length)for(const p of i)s.fire(new Bn(new Error(p.message))),u=!0;return u}class Cu{constructor(i,u,p){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const C=new Int32Array(this.arrayBuffer);i=C[0],this.d=(u=C[1])+2*(p=C[2]);for(let M=0;M<this.d*this.d;M++){const B=C[3+M],j=C[3+M+1];g.push(B===j?null:C.subarray(B,j))}const T=C[3+g.length+1];this.keys=C.subarray(C[3+g.length],T),this.bboxes=C.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*p;for(let C=0;C<this.d*this.d;C++)g.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=i,this.padding=p,this.scale=u/i,this.uid=0;const S=p/u*i;this.min=-S,this.max=i+S}insert(i,u,p,g,S){this._forEachCell(u,p,g,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,u,p,g,S,C){this.cells[S].push(C)}query(i,u,p,g,S){const C=this.min,T=this.max;if(i<=C&&u<=C&&T<=p&&T<=g&&!S)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(i,u,p,g,this._queryCell,M,{},S),M}}_queryCell(i,u,p,g,S,C,T,M){const B=this.cells[S];if(B!==null){const j=this.keys,H=this.bboxes;for(let Y=0;Y<B.length;Y++){const te=B[Y];if(T[te]===void 0){const re=4*te;(M?M(H[re+0],H[re+1],H[re+2],H[re+3]):i<=H[re+2]&&u<=H[re+3]&&p>=H[re+0]&&g>=H[re+1])?(T[te]=!0,C.push(j[te])):T[te]=!1}}}}_forEachCell(i,u,p,g,S,C,T,M){const B=this._convertToCellCoord(i),j=this._convertToCellCoord(u),H=this._convertToCellCoord(p),Y=this._convertToCellCoord(g);for(let te=B;te<=H;te++)for(let re=j;re<=Y;re++){const ge=this.d*re+te;if((!M||M(this._convertFromCellCoord(te),this._convertFromCellCoord(re),this._convertFromCellCoord(te+1),this._convertFromCellCoord(re+1)))&&S.call(this,i,u,p,g,ge,C,T,M))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,u=3+this.cells.length+1+1;let p=0;for(let C=0;C<this.cells.length;C++)p+=this.cells[C].length;const g=new Int32Array(u+p+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let S=u;for(let C=0;C<i.length;C++){const T=i[C];g[3+C]=S,g.set(T,S),S+=T.length}return g[3+i.length]=S,g.set(this.keys,S),S+=this.keys.length,g[3+i.length+1]=S,g.set(this.bboxes,S),S+=this.bboxes.length,g.buffer}static serialize(i,u){const p=i.toArrayBuffer();return u&&u.push(p),{buffer:p}}static deserialize(i){return new Cu(i.buffer)}}const qr={};function Bt(s,i,u={}){if(qr[s])throw new Error(`${s} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:s,writeable:!1}),qr[s]={klass:i,omit:u.omit||[],shallow:u.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Cu),Bt("Color",wn),Bt("Error",Error),Bt("AJAXError",K),Bt("ResolvedImage",Fo),Bt("StylePropertyFunction",Gs),Bt("StyleExpression",tf,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",nf),Bt("ZoomConstantExpression",hr),Bt("CompoundExpression",xo,{omit:["_evaluate"]});for(const s in js)js[s]._classRegistryKey||Bt(`Expression_${s}`,js[s]);function kc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ma(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(kc(s)||At(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const u=s;return i&&i.push(u.buffer),u}if(s instanceof ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const u=[];for(const p of s)u.push(ma(p,i));return u}if(typeof s=="object"){const u=s.constructor,p=u._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!qr[p])throw new Error(`${p} is not registered.`);const g=u.serialize?u.serialize(s,i):{};if(u.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in s){if(!s.hasOwnProperty(S)||qr[p].omit.indexOf(S)>=0)continue;const C=s[S];g[S]=qr[p].shallow.indexOf(S)>=0?C:ma(C,i)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(g.$name=p),g}throw new Error("can't serialize object of type "+typeof s)}function zo(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||kc(s)||At(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(zo);if(typeof s=="object"){const i=s.$name||"Object";if(!qr[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:u}=qr[i];if(!u)throw new Error(`can't deserialize unregistered class ${i}`);if(u.deserialize)return u.deserialize(s);const p=Object.create(u.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const S=s[g];p[g]=qr[i].shallow.indexOf(g)>=0?S:zo(S)}return p}throw new Error("can't deserialize object of type "+typeof s)}class Eu{constructor(){this.first=!0}update(i,u){const p=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=p,!0))}}const ht={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Ac(s){for(const i of s)if(Pc(i.charCodeAt(0)))return!0;return!1}function Tc(s){for(const i of s)if(!ku(i.charCodeAt(0)))return!1;return!0}function ku(s){return!(ht.Arabic(s)||ht["Arabic Supplement"](s)||ht["Arabic Extended-A"](s)||ht["Arabic Presentation Forms-A"](s)||ht["Arabic Presentation Forms-B"](s))}function Pc(s){return!(s!==746&&s!==747&&(s<4352||!(ht["Bopomofo Extended"](s)||ht.Bopomofo(s)||ht["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||ht["CJK Compatibility Ideographs"](s)||ht["CJK Compatibility"](s)||ht["CJK Radicals Supplement"](s)||ht["CJK Strokes"](s)||!(!ht["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||ht["CJK Unified Ideographs Extension A"](s)||ht["CJK Unified Ideographs"](s)||ht["Enclosed CJK Letters and Months"](s)||ht["Hangul Compatibility Jamo"](s)||ht["Hangul Jamo Extended-A"](s)||ht["Hangul Jamo Extended-B"](s)||ht["Hangul Jamo"](s)||ht["Hangul Syllables"](s)||ht.Hiragana(s)||ht["Ideographic Description Characters"](s)||ht.Kanbun(s)||ht["Kangxi Radicals"](s)||ht["Katakana Phonetic Extensions"](s)||ht.Katakana(s)&&s!==12540||!(!ht["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!ht["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||ht["Unified Canadian Aboriginal Syllabics"](s)||ht["Unified Canadian Aboriginal Syllabics Extended"](s)||ht["Vertical Forms"](s)||ht["Yijing Hexagram Symbols"](s)||ht["Yi Syllables"](s)||ht["Yi Radicals"](s))))}function wd(s){return!(Pc(s)||function(i){return!!(ht["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ht["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ht["Letterlike Symbols"](i)||ht["Number Forms"](i)||ht["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ht["Control Pictures"](i)&&i!==9251||ht["Optical Character Recognition"](i)||ht["Enclosed Alphanumerics"](i)||ht["Geometric Shapes"](i)||ht["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ht["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ht["CJK Symbols and Punctuation"](i)||ht.Katakana(i)||ht["Private Use Area"](i)||ht["CJK Compatibility Forms"](i)||ht["Small Form Variants"](i)||ht["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function Ic(s){return s>=1424&&s<=2303||ht["Arabic Presentation Forms-A"](s)||ht["Arabic Presentation Forms-B"](s)}function Ks(s,i){return!(!i&&Ic(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||ht.Khmer(s))}function Da(s){for(const i of s)if(Ic(i.charCodeAt(0)))return!0;return!1}const Ol="deferred",Au="loading",Fl="loaded";let Rl=null,Xi="unavailable",Jo=null;const af=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(Xi="error"),Rl&&Rl(s)};function Xs(){ga.fire(new Qn("pluginStateChange",{pluginStatus:Xi,pluginURL:Jo}))}const ga=new ei,Dl=function(){return Xi},Sd=function(){if(Xi!==Ol||!Jo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xi=Au,Xs(),Jo&&Dt({url:Jo},s=>{s?af(s):(Xi=Fl,Xs())})},Bo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Xi===Fl||Bo.applyArabicShaping!=null,isLoading:()=>Xi===Au,setState(s){if(!$e())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Xi=s.pluginStatus,Jo=s.pluginURL},isParsed(){if(!$e())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Bo.applyArabicShaping!=null&&Bo.processBidirectionalText!=null&&Bo.processStyledBidirectionalText!=null},getPluginURL(){if(!$e())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Jo}};class Sr{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Eu,this.transition={})}isSupportedScript(i){return function(u,p){for(const g of u)if(!Ks(g.charCodeAt(0),p))return!1;return!0}(i,Bo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,u=i-Math.floor(i),p=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}}}class Ys{constructor(i,u){this.property=i,this.value=u,this.expression=function(p,g){if(Ml(p))return new Gs(p,g);if(mu(p)){const S=Pn(p,g);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=p;return g.type==="color"&&typeof p=="string"?S=wn.parse(p):g.type!=="padding"||typeof p!="number"&&!Array.isArray(p)||(S=Pr.parse(p)),{kind:"constant",evaluate:()=>S}}}(u===void 0?i.specification.default:u,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,p){return this.property.possiblyEvaluate(this,i,u,p)}}class zl{constructor(i){this.property=i,this.value=new Ys(i,void 0)}transitioned(i,u){return new Tu(this.property,this.value,u,G({},i.transition,this.transition),i.now)}untransitioned(){return new Tu(this.property,this.value,null,{},0)}}class Mc{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return oe(this._values[i].value.value)}setValue(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new zl(this._values[i].property)),this._values[i].value=new Ys(this._values[i].property,u===null?void 0:oe(u))}getTransition(i){return oe(this._values[i].transition)}setTransition(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new zl(this._values[i].property)),this._values[i].transition=oe(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(i[u]=p);const g=this.getTransition(u);g!==void 0&&(i[`${u}-transition`]=g)}return i}transitioned(i,u){const p=new sf(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].transitioned(i,u._values[g]);return p}untransitioned(){const i=new sf(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class Tu{constructor(i,u,p,g,S){this.property=i,this.value=u,this.begin=S+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=p)}possiblyEvaluate(i,u,p){const g=i.now||0,S=this.value.possiblyEvaluate(i,u,p),C=this.prior;if(C){if(g>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(g<this.begin)return C.possiblyEvaluate(i,u,p);{const T=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(i,u,p),S,function(M){if(M<=0)return 0;if(M>=1)return 1;const B=M*M,j=B*M;return 4*(M<.5?j:3*(M-B)+j-.75)}(T))}}return S}}class sf{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,p){const g=new zr(this._properties);for(const S of Object.keys(this._values))g._values[S]=this._values[S].possiblyEvaluate(i,u,p);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class lf{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return oe(this._values[i].value)}setValue(i,u){this._values[i]=new Ys(this._values[i].property,u===null?void 0:oe(u))}serialize(){const i={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(i[u]=p)}return i}possiblyEvaluate(i,u,p){const g=new zr(this._properties);for(const S of Object.keys(this._values))g._values[S]=this._values[S].possiblyEvaluate(i,u,p);return g}}class ya{constructor(i,u,p){this.property=i,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,p,g){return this.property.evaluate(this.value,this.parameters,i,u,p,g)}}class zr{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Lt{constructor(i){this.specification=i}possiblyEvaluate(i,u){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(u)}interpolate(i,u,p){const g=Hi[this.specification.type];return g?g(i,u,p):i}}class en{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,p,g){return new ya(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},p,g)}:i.expression,u)}interpolate(i,u,p){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new ya(this,{kind:"constant",value:void 0},i.parameters);const g=Hi[this.specification.type];if(g){const S=g(i.value.value,u.value.value,p);return new ya(this,{kind:"constant",value:S},i.parameters)}return i}evaluate(i,u,p,g,S,C){return i.kind==="constant"?i.value:i.evaluate(u,p,g,S,C)}}class Lc extends en{possiblyEvaluate(i,u,p,g){if(i.value===void 0)return new ya(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){const S=i.expression.evaluate(u,null,{},p,g),C=i.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,T=this._calculate(C,C,C,u);return new ya(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){const S=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new ya(this,{kind:"constant",value:S},u)}return new ya(this,i.expression,u)}evaluate(i,u,p,g,S,C){if(i.kind==="source"){const T=i.evaluate(u,p,g,S,C);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},p,g),i.evaluate({zoom:Math.floor(u.zoom)},p,g),i.evaluate({zoom:Math.floor(u.zoom)+1},p,g),u):i.value}_calculate(i,u,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:p,to:u}}interpolate(i){return i}}class Oc{constructor(i){this.specification=i}possiblyEvaluate(i,u,p,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const S=i.expression.evaluate(u,null,{},p,g);return this._calculate(S,S,S,u)}return this._calculate(i.expression.evaluate(new Sr(Math.floor(u.zoom-1),u)),i.expression.evaluate(new Sr(Math.floor(u.zoom),u)),i.expression.evaluate(new Sr(Math.floor(u.zoom+1),u)),u)}}_calculate(i,u,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:p,to:u}}interpolate(i){return i}}class uf{constructor(i){this.specification=i}possiblyEvaluate(i,u,p,g){return!!i.expression.evaluate(u,null,{},p,g)}interpolate(){return!1}}class Mi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in i){const p=i[u];p.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new Ys(p,void 0),S=this.defaultTransitionablePropertyValues[u]=new zl(p);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate({})}}}Bt("DataDrivenProperty",en),Bt("DataConstantProperty",Lt),Bt("CrossFadedDataDrivenProperty",Lc),Bt("CrossFadedProperty",Oc),Bt("ColorRampProperty",uf);const Bl="-transition";class $o extends ei{constructor(i,u){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new lf(u.layout)),u.paint)){this._transitionablePaint=new Mc(u.paint);for(const p in i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(const p in i.layout)this.setLayoutProperty(p,i.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u,p={}){u!=null&&this._validate(gr,`layers.${this.id}.layout.${i}`,i,u,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)}getPaintProperty(i){return i.endsWith(Bl)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u,p={}){if(u!=null&&this._validate(ai,`layers.${this.id}.paint.${i}`,i,u,p))return!1;if(i.endsWith(Bl))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;{const g=this._transitionablePaint._values[i],S=g.property.specification["property-type"]==="cross-faded-data-driven",C=g.value.isDataDriven(),T=g.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);const M=this._transitionablePaint._values[i].value;return M.isDataDriven()||C||S||this._handleOverridablePaintPropertyUpdate(i,T,M)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,u,p){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),ee(i,(u,p)=>!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length))}_validate(i,u,p,g,S={}){return(!S||S.validate!==!1)&&cs(this,i.call(ln,{key:u,layerType:this.type,objectKey:p,value:g,styleSpec:Je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof ya&&Il(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const Qo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hs{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Or(s,i=1){let u=0,p=0;return{members:s.map(g=>{const S=Qo[g.type].BYTES_PER_ELEMENT,C=u=fs(u,Math.max(i,S)),T=g.components||1;return p=Math.max(p,S),u+=S*T,{name:g.name,type:g.type,components:T,offset:C}}),size:fs(u,Math.max(p,i)),alignment:i}}function fs(s,i){return Math.ceil(s/i)*i}class Pu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const g=2*i;return this.int16[g+0]=u,this.int16[g+1]=p,i}}Pu.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",Pu);class Fc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=3*i;return this.int16[S+0]=u,this.int16[S+1]=p,this.int16[S+2]=g,i}}Fc.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Fc);class _a extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,g)}emplace(i,u,p,g,S){const C=4*i;return this.int16[C+0]=u,this.int16[C+1]=p,this.int16[C+2]=g,this.int16[C+3]=S,i}}_a.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",_a);class Rc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,p,g,S,C)}emplace(i,u,p,g,S,C,T){const M=6*i;return this.int16[M+0]=u,this.int16[M+1]=p,this.int16[M+2]=g,this.int16[M+3]=S,this.int16[M+4]=C,this.int16[M+5]=T,i}}Rc.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",Rc);class Iu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,p,g,S,C)}emplace(i,u,p,g,S,C,T){const M=4*i,B=8*i;return this.int16[M+0]=u,this.int16[M+1]=p,this.uint8[B+4]=g,this.uint8[B+5]=S,this.uint8[B+6]=C,this.uint8[B+7]=T,i}}Iu.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",Iu);class za extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const g=2*i;return this.float32[g+0]=u,this.float32[g+1]=p,i}}za.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",za);class Ba extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j){const H=this.length;return this.resize(H+1),this.emplace(H,i,u,p,g,S,C,T,M,B,j)}emplace(i,u,p,g,S,C,T,M,B,j,H){const Y=10*i;return this.uint16[Y+0]=u,this.uint16[Y+1]=p,this.uint16[Y+2]=g,this.uint16[Y+3]=S,this.uint16[Y+4]=C,this.uint16[Y+5]=T,this.uint16[Y+6]=M,this.uint16[Y+7]=B,this.uint16[Y+8]=j,this.uint16[Y+9]=H,i}}Ba.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",Ba);class Dc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j,H,Y){const te=this.length;return this.resize(te+1),this.emplace(te,i,u,p,g,S,C,T,M,B,j,H,Y)}emplace(i,u,p,g,S,C,T,M,B,j,H,Y,te){const re=12*i;return this.int16[re+0]=u,this.int16[re+1]=p,this.int16[re+2]=g,this.int16[re+3]=S,this.uint16[re+4]=C,this.uint16[re+5]=T,this.uint16[re+6]=M,this.uint16[re+7]=B,this.int16[re+8]=j,this.int16[re+9]=H,this.int16[re+10]=Y,this.int16[re+11]=te,i}}Dc.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",Dc);class ie extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=3*i;return this.float32[S+0]=u,this.float32[S+1]=p,this.float32[S+2]=g,i}}ie.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",ie);class No extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}No.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",No);class $l extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B){const j=this.length;return this.resize(j+1),this.emplace(j,i,u,p,g,S,C,T,M,B)}emplace(i,u,p,g,S,C,T,M,B,j){const H=10*i,Y=5*i;return this.int16[H+0]=u,this.int16[H+1]=p,this.int16[H+2]=g,this.int16[H+3]=S,this.int16[H+4]=C,this.int16[H+5]=T,this.uint32[Y+3]=M,this.uint16[H+8]=B,this.uint16[H+9]=j,i}}$l.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",$l);class Yi extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,p,g,S,C)}emplace(i,u,p,g,S,C,T){const M=6*i;return this.int16[M+0]=u,this.int16[M+1]=p,this.int16[M+2]=g,this.int16[M+3]=S,this.int16[M+4]=C,this.int16[M+5]=T,i}}Yi.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",Yi);class Sn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S){const C=this.length;return this.resize(C+1),this.emplace(C,i,u,p,g,S)}emplace(i,u,p,g,S,C){const T=4*i,M=8*i;return this.float32[T+0]=u,this.float32[T+1]=p,this.float32[T+2]=g,this.int16[M+6]=S,this.int16[M+7]=C,i}}Sn.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",Sn);class cf extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,g)}emplace(i,u,p,g,S){const C=12*i,T=3*i;return this.uint8[C+0]=u,this.uint8[C+1]=p,this.float32[T+1]=g,this.float32[T+2]=S,i}}cf.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",cf);class zc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=3*i;return this.uint16[S+0]=u,this.uint16[S+1]=p,this.uint16[S+2]=g,i}}zc.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",zc);class Bc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge,ve,pe){const Be=this.length;return this.resize(Be+1),this.emplace(Be,i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge,ve,pe)}emplace(i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge,ve,pe,Be){const ke=24*i,ze=12*i,He=48*i;return this.int16[ke+0]=u,this.int16[ke+1]=p,this.uint16[ke+2]=g,this.uint16[ke+3]=S,this.uint32[ze+2]=C,this.uint32[ze+3]=T,this.uint32[ze+4]=M,this.uint16[ke+10]=B,this.uint16[ke+11]=j,this.uint16[ke+12]=H,this.float32[ze+7]=Y,this.float32[ze+8]=te,this.uint8[He+36]=re,this.uint8[He+37]=ge,this.uint8[He+38]=ve,this.uint32[ze+10]=pe,this.int16[ke+22]=Be,i}}Bc.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bc);class $a extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge,ve,pe,Be,ke,ze,He,et,Rt,$t,Ft,Pt,wt,Mt){const It=this.length;return this.resize(It+1),this.emplace(It,i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge,ve,pe,Be,ke,ze,He,et,Rt,$t,Ft,Pt,wt,Mt)}emplace(i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge,ve,pe,Be,ke,ze,He,et,Rt,$t,Ft,Pt,wt,Mt,It){const ct=34*i,Yt=17*i;return this.int16[ct+0]=u,this.int16[ct+1]=p,this.int16[ct+2]=g,this.int16[ct+3]=S,this.int16[ct+4]=C,this.int16[ct+5]=T,this.int16[ct+6]=M,this.int16[ct+7]=B,this.uint16[ct+8]=j,this.uint16[ct+9]=H,this.uint16[ct+10]=Y,this.uint16[ct+11]=te,this.uint16[ct+12]=re,this.uint16[ct+13]=ge,this.uint16[ct+14]=ve,this.uint16[ct+15]=pe,this.uint16[ct+16]=Be,this.uint16[ct+17]=ke,this.uint16[ct+18]=ze,this.uint16[ct+19]=He,this.uint16[ct+20]=et,this.uint16[ct+21]=Rt,this.uint16[ct+22]=$t,this.uint32[Yt+12]=Ft,this.float32[Yt+13]=Pt,this.float32[Yt+14]=wt,this.float32[Yt+15]=Mt,this.float32[Yt+16]=It,i}}$a.prototype.bytesPerElement=68,Bt("StructArrayLayout8i15ui1ul4f68",$a);class $c extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}$c.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",$c);class Zn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=4*i;return this.uint32[2*i+0]=u,this.uint16[S+2]=p,this.uint16[S+3]=g,i}}Zn.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",Zn);class v extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const g=2*i;return this.uint16[g+0]=u,this.uint16[g+1]=p,i}}v.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",v);class o extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}o.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",o);class h extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,g)}emplace(i,u,p,g,S){const C=4*i;return this.float32[C+0]=u,this.float32[C+1]=p,this.float32[C+2]=g,this.float32[C+3]=S,i}}h.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",h);class m extends hs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}m.prototype.size=20;class _ extends $l{get(i){return new m(this,i)}}Bt("CollisionBoxArray",_);class w extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}w.prototype.size=48;class P extends Bc{get(i){return new w(this,i)}}Bt("PlacedSymbolArray",P);class I extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}I.prototype.size=68;class O extends $a{get(i){return new I(this,i)}}Bt("SymbolInstanceArray",O);class D extends $c{getoffsetX(i){return this.float32[1*i+0]}}Bt("GlyphOffsetArray",D);class U extends Fc{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Bt("SymbolLineVertexArray",U);class V extends hs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}V.prototype.size=8;class ne extends Zn{get(i){return new V(this,i)}}Bt("FeatureIndexArray",ne);class fe extends Pu{}class he extends Pu{}class de extends Pu{}class me extends Rc{}class Me extends Iu{}class je extends za{}class be extends Ba{}class Ue extends Dc{}class Ze extends ie{}class Ke extends No{}class tt extends Yi{}class ut extends cf{}class it extends zc{}class Et extends v{}const Nt=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:xn}=Nt;class _t{constructor(i=[]){this.segments=i}prepareSegment(i,u,p,g){let S=this.segments[this.segments.length-1];return i>_t.MAX_VERTEX_ARRAY_LENGTH&&Oe(`Max vertices per segment is ${_t.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!S||S.vertexLength+i>_t.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==g)&&(S={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},g!==void 0&&(S.sortKey=g),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,p,g){return new _t([{vertexOffset:i,primitiveOffset:u,vertexLength:p,primitiveLength:g,vaos:{},sortKey:0}])}}function Xt(s,i){return 256*(s=R(Math.floor(s),0,255))+R(Math.floor(i),0,255)}_t.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",_t);const Ot=Or([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Un={exports:{}},Rn={exports:{}};Rn.exports=function(s,i){var u,p,g,S,C,T,M,B;for(p=s.length-(u=3&s.length),g=i,C=3432918353,T=461845907,B=0;B<p;)M=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24,++B,g=27492+(65535&(S=5*(65535&(g=(g^=M=(65535&(M=(M=(65535&M)*C+(((M>>>16)*C&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(M=0,u){case 3:M^=(255&s.charCodeAt(B+2))<<16;case 2:M^=(255&s.charCodeAt(B+1))<<8;case 1:g^=M=(65535&(M=(M=(65535&(M^=255&s.charCodeAt(B)))*C+(((M>>>16)*C&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var dn=Rn.exports,nn={exports:{}};nn.exports=function(s,i){for(var u,p=s.length,g=i^p,S=0;p>=4;)u=1540483477*(65535&(u=255&s.charCodeAt(S)|(255&s.charCodeAt(++S))<<8|(255&s.charCodeAt(++S))<<16|(255&s.charCodeAt(++S))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++S;switch(p){case 3:g^=(255&s.charCodeAt(S+2))<<16;case 2:g^=(255&s.charCodeAt(S+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(S)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ir=dn,fr=nn.exports;Un.exports=ir,Un.exports.murmur3=ir,Un.exports.murmur2=fr;var Gr=x(Un.exports);class si{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,u,p,g){this.ids.push(oo(i)),this.positions.push(u,p,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=oo(i);let p=0,g=this.ids.length-1;for(;p<g;){const C=p+g>>1;this.ids[C]>=u?g=C:p=C+1}const S=[];for(;this.ids[p]===u;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(i,u){const p=new Float64Array(i.ids),g=new Uint32Array(i.positions);return Ji(p,g,0,p.length-1),u&&u.push(p.buffer,g.buffer),{ids:p,positions:g}}static deserialize(i){const u=new si;return u.ids=i.ids,u.positions=i.positions,u.indexed=!0,u}}function oo(s){const i=+s;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Gr(String(s))}function Ji(s,i,u,p){for(;u<p;){const g=s[u+p>>1];let S=u-1,C=p+1;for(;;){do S++;while(s[S]<g);do C--;while(s[C]>g);if(S>=C)break;yi(s,S,C),yi(i,3*S,3*C),yi(i,3*S+1,3*C+1),yi(i,3*S+2,3*C+2)}C-u<p-C?(Ji(s,i,u,C),u=C+1):(Ji(s,i,C+1,p),p=C)}}function yi(s,i,u){const p=s[i];s[i]=s[u],s[u]=p}Bt("FeaturePositionMap",si);class Li{constructor(i,u){this.gl=i.gl,this.location=u}}class va extends Li{constructor(i,u){super(i,u),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class ds extends Li{constructor(i,u){super(i,u),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Oi extends Li{constructor(i,u){super(i,u),this.current=wn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const li=new Float32Array(16);function cn(s){return[Xt(255*s.r,255*s.g),Xt(255*s.b,255*s.a)]}class Hr{constructor(i,u,p){this.value=i,this.uniformNames=u.map(g=>`u_${g}`),this.type=p}setUniform(i,u,p){i.set(p.constantOr(this.value))}getBinding(i,u,p){return this.type==="color"?new Oi(i,u):new va(i,u)}}class ui{constructor(i,u){this.uniformNames=u.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=i.tlbr}setUniform(i,u,p,g){const S=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&i.set(S)}getBinding(i,u,p){return p.substr(0,9)==="u_pattern"?new ds(i,u):new va(i,u)}}class kn{constructor(i,u,p,g){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,u,p,g,S){const C=this.paintVertexArray.length,T=this.expression.evaluate(new Sr(0),u,{},g,[],S);this.paintVertexArray.resize(i),this._setPaintValue(C,i,T)}updatePaintArray(i,u,p,g){const S=this.expression.evaluate({zoom:0},p,g);this._setPaintValue(i,u,S)}_setPaintValue(i,u,p){if(this.type==="color"){const g=cn(p);for(let S=i;S<u;S++)this.paintVertexArray.emplace(S,g[0],g[1])}else{for(let g=i;g<u;g++)this.paintVertexArray.emplace(g,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wr{constructor(i,u,p,g,S,C){this.expression=i,this.uniformNames=u.map(T=>`u_${T}_t`),this.type=p,this.useIntegerZoom=g,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(i,u,p,g,S){const C=this.expression.evaluate(new Sr(this.zoom),u,{},g,[],S),T=this.expression.evaluate(new Sr(this.zoom+1),u,{},g,[],S),M=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(M,i,C,T)}updatePaintArray(i,u,p,g){const S=this.expression.evaluate({zoom:this.zoom},p,g),C=this.expression.evaluate({zoom:this.zoom+1},p,g);this._setPaintValue(i,u,S,C)}_setPaintValue(i,u,p,g){if(this.type==="color"){const S=cn(p),C=cn(g);for(let T=i;T<u;T++)this.paintVertexArray.emplace(T,S[0],S[1],C[0],C[1])}else{for(let S=i;S<u;S++)this.paintVertexArray.emplace(S,p,g);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u){const p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,g=R(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,u,p){return new va(i,u)}}class Fi{constructor(i,u,p,g,S,C){this.expression=i,this.type=u,this.useIntegerZoom=p,this.zoom=g,this.layerId=C,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(i,u,p){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(i,u,p,g,S){this._setPaintValues(i,u,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(i,u,p,g){if(!g||!p)return;const{min:S,mid:C,max:T}=p,M=g[S],B=g[C],j=g[T];if(M&&B&&j)for(let H=i;H<u;H++)this.zoomInPaintVertexArray.emplace(H,B.tl[0],B.tl[1],B.br[0],B.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],B.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,B.tl[0],B.tl[1],B.br[0],B.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],B.pixelRatio,j.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Ot.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Ot.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class xa{constructor(i,u,p){this.binders={},this._buffers=[];const g=[];for(const S in i.paint._values){if(!p(S))continue;const C=i.paint.get(S);if(!(C instanceof ya&&Il(C.property.specification)))continue;const T=Qi(S,i.type),M=C.value,B=C.property.specification.type,j=C.property.useIntegerZoom,H=C.property.specification["property-type"],Y=H==="cross-faded"||H==="cross-faded-data-driven";if(M.kind==="constant")this.binders[S]=Y?new ui(M.value,T):new Hr(M.value,T,B),g.push(`/u_${S}`);else if(M.kind==="source"||Y){const te=Nc(S,B,"source");this.binders[S]=Y?new Fi(M,B,j,u,te,i.id):new kn(M,T,B,te),g.push(`/a_${S}`)}else{const te=Nc(S,B,"composite");this.binders[S]=new Wr(M,T,B,j,u,te),g.push(`/z_${S}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof kn||u instanceof Wr?u.maxValue:0}populatePaintArrays(i,u,p,g,S){for(const C in this.binders){const T=this.binders[C];(T instanceof kn||T instanceof Wr||T instanceof Fi)&&T.populatePaintArray(i,u,p,g,S)}}setConstantPatternPositions(i,u){for(const p in this.binders){const g=this.binders[p];g instanceof ui&&g.setConstantPatternPositions(i,u)}}updatePaintArrays(i,u,p,g,S){let C=!1;for(const T in i){const M=u.getPositions(T);for(const B of M){const j=p.feature(B.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof kn||Y instanceof Wr||Y instanceof Fi)&&Y.expression.isStateDependent===!0){const te=g.paint.get(H);Y.expression=te.value,Y.updatePaintArray(B.start,B.end,j,i[T],S),C=!0}}}}return C}defines(){const i=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Hr||p instanceof ui)&&i.push(...p.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof kn||p instanceof Wr)for(let g=0;g<p.paintVertexAttributes.length;g++)i.push(p.paintVertexAttributes[g].name);else if(p instanceof Fi)for(let g=0;g<Ot.members.length;g++)i.push(Ot.members[g].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Hr||p instanceof ui||p instanceof Wr)for(const g of p.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,u){const p=[];for(const g in this.binders){const S=this.binders[g];if(S instanceof Hr||S instanceof ui||S instanceof Wr){for(const C of S.uniformNames)if(u[C]){const T=S.getBinding(i,u[C],C);p.push({name:C,property:g,binding:T})}}}return p}setUniforms(i,u,p,g){for(const{name:S,property:C,binding:T}of u)this.binders[C].setUniform(T,g,p.get(C),S)}updatePaintBuffers(i){this._buffers=[];for(const u in this.binders){const p=this.binders[u];if(i&&p instanceof Fi){const g=i.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(p instanceof kn||p instanceof Wr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(i){for(const u in this.binders){const p=this.binders[u];(p instanceof kn||p instanceof Wr||p instanceof Fi)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof kn||u instanceof Wr||u instanceof Fi)&&u.destroy()}}}class ba{constructor(i,u,p=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new xa(g,u,p);this.needsUpload=!1,this._featureMap=new si,this._bufferOffset=0}populatePaintArrays(i,u,p,g,S,C){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(i,u,g,S,C);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,p,g){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(i,this._featureMap,u,S,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Qi(s,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}function Nc(s,i,u){const p={color:{source:za,composite:h},number:{source:$c,composite:za}},g=function(S){return{"line-pattern":{source:be,composite:be},"fill-pattern":{source:be,composite:be},"fill-extrusion-pattern":{source:be,composite:be}}[S]}(s);return g&&g[u]||p[i][u]}Bt("ConstantBinder",Hr),Bt("CrossFadedConstantBinder",ui),Bt("SourceExpressionBinder",kn),Bt("CrossFadedCompositeBinder",Fi),Bt("CompositeExpressionBinder",Wr),Bt("ProgramConfiguration",xa,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",ba);const xr=8192,hf=Math.pow(2,14)-1,Mu=-hf-1;function ea(s){const i=xr/s.extent,u=s.loadGeometry();for(let p=0;p<u.length;p++){const g=u[p];for(let S=0;S<g.length;S++){const C=g[S],T=Math.round(C.x*i),M=Math.round(C.y*i);C.x=R(T,Mu,hf),C.y=R(M,Mu,hf),(T<C.x||T>C.x+1||M<C.y||M>C.y+1)&&Oe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Lu(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?ea(s):[]}}function Nl(s,i,u,p,g){s.emplaceBack(2*i+(p+1)/2,2*u+(g+1)/2)}class Cd{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new he,this.indexArray=new it,this.segments=new _t,this.programConfigurations=new ba(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){const g=this.layers[0],S=[];let C=null,T=!1;g.type==="circle"&&(C=g.layout.get("circle-sort-key"),T=!C.isConstant());for(const{feature:M,id:B,index:j,sourceLayerIndex:H}of i){const Y=this.layers[0]._featureFilter.needGeometry,te=Lu(M,Y);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),te,p))continue;const re=T?C.evaluate(te,{},p):void 0,ge={id:B,properties:M.properties,type:M.type,sourceLayerIndex:H,index:j,geometry:Y?te.geometry:ea(M),patterns:{},sortKey:re};S.push(ge)}T&&S.sort((M,B)=>M.sortKey-B.sortKey);for(const M of S){const{geometry:B,index:j,sourceLayerIndex:H}=M,Y=i[j].feature;this.addFeature(M,B,j,p),u.featureIndex.insert(Y,B,j,H,this.index)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,xn),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,p,g){for(const S of u)for(const C of S){const T=C.x,M=C.y;if(T<0||T>=xr||M<0||M>=xr)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),j=B.vertexLength;Nl(this.layoutVertexArray,T,M,-1,-1),Nl(this.layoutVertexArray,T,M,1,-1),Nl(this.layoutVertexArray,T,M,1,1),Nl(this.layoutVertexArray,T,M,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{},g)}}function k_(s,i){for(let u=0;u<s.length;u++)if(jc(i,s[u]))return!0;for(let u=0;u<i.length;u++)if(jc(s,i[u]))return!0;return!!xm(s,i)}function Lb(s,i,u){return!!jc(s,i)||!!Ed(i,s,u)}function Uc(s,i){if(s.length===1)return T_(i,s[0]);for(let u=0;u<i.length;u++){const p=i[u];for(let g=0;g<p.length;g++)if(jc(s,p[g]))return!0}for(let u=0;u<s.length;u++)if(T_(i,s[u]))return!0;for(let u=0;u<i.length;u++)if(xm(s,i[u]))return!0;return!1}function Ob(s,i,u){if(s.length>1){if(xm(s,i))return!0;for(let p=0;p<i.length;p++)if(Ed(i[p],s,u))return!0}for(let p=0;p<s.length;p++)if(Ed(s[p],i,u))return!0;return!1}function xm(s,i){if(s.length===0||i.length===0)return!1;for(let u=0;u<s.length-1;u++){const p=s[u],g=s[u+1];for(let S=0;S<i.length-1;S++)if(bm(p,g,i[S],i[S+1]))return!0}return!1}function bm(s,i,u,p){return Le(s,u,p)!==Le(i,u,p)&&Le(s,i,u)!==Le(s,i,p)}function Ed(s,i,u){const p=u*u;if(i.length===1)return s.distSqr(i[0])<p;for(let g=1;g<i.length;g++)if(A_(s,i[g-1],i[g])<p)return!0;return!1}function A_(s,i,u){const p=i.distSqr(u);if(p===0)return s.distSqr(i);const g=((s.x-i.x)*(u.x-i.x)+(s.y-i.y)*(u.y-i.y))/p;return s.distSqr(g<0?i:g>1?u:u.sub(i)._mult(g)._add(i))}function T_(s,i){let u,p,g,S=!1;for(let C=0;C<s.length;C++){u=s[C];for(let T=0,M=u.length-1;T<u.length;M=T++)p=u[T],g=u[M],p.y>i.y!=g.y>i.y&&i.x<(g.x-p.x)*(i.y-p.y)/(g.y-p.y)+p.x&&(S=!S)}return S}function jc(s,i){let u=!1;for(let p=0,g=s.length-1;p<s.length;g=p++){const S=s[p],C=s[g];S.y>i.y!=C.y>i.y&&i.x<(C.x-S.x)*(i.y-S.y)/(C.y-S.y)+S.x&&(u=!u)}return u}function P_(s,i,u){const p=u[0],g=u[2];if(s.x<p.x&&i.x<p.x||s.x>g.x&&i.x>g.x||s.y<p.y&&i.y<p.y||s.y>g.y&&i.y>g.y)return!1;const S=Le(s,i,u[0]);return S!==Le(s,i,u[1])||S!==Le(s,i,u[2])||S!==Le(s,i,u[3])}function Ou(s,i,u){const p=i.paint.get(s).value;return p.kind==="constant"?p.value:u.programConfigurations.get(i.id).getMaxValue(s)}function kd(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Vc(s,i,u,p,g){if(!i[0]&&!i[1])return s;const S=A.convert(i)._mult(g);u==="viewport"&&S._rotate(-p);const C=[];for(let T=0;T<s.length;T++)C.push(s[T].sub(S));return C}let wm,Sm;Bt("CircleBucket",Cd,{omit:["layers"]});var I_={get paint(){return Sm=Sm||new Mi({"circle-radius":new en(Je.paint_circle["circle-radius"]),"circle-color":new en(Je.paint_circle["circle-color"]),"circle-blur":new en(Je.paint_circle["circle-blur"]),"circle-opacity":new en(Je.paint_circle["circle-opacity"]),"circle-translate":new Lt(Je.paint_circle["circle-translate"]),"circle-translate-anchor":new Lt(Je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lt(Je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lt(Je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new en(Je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new en(Je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new en(Je.paint_circle["circle-stroke-opacity"])})},get layout(){return wm=wm||new Mi({"circle-sort-key":new en(Je.layout_circle["circle-sort-key"])})}},Ai=1e-6,qc=typeof Float32Array<"u"?Float32Array:Array;function Ad(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Cm(s,i,u){var p=i[0],g=i[1],S=i[2],C=i[3],T=i[4],M=i[5],B=i[6],j=i[7],H=i[8],Y=i[9],te=i[10],re=i[11],ge=i[12],ve=i[13],pe=i[14],Be=i[15],ke=u[0],ze=u[1],He=u[2],et=u[3];return s[0]=ke*p+ze*T+He*H+et*ge,s[1]=ke*g+ze*M+He*Y+et*ve,s[2]=ke*S+ze*B+He*te+et*pe,s[3]=ke*C+ze*j+He*re+et*Be,s[4]=(ke=u[4])*p+(ze=u[5])*T+(He=u[6])*H+(et=u[7])*ge,s[5]=ke*g+ze*M+He*Y+et*ve,s[6]=ke*S+ze*B+He*te+et*pe,s[7]=ke*C+ze*j+He*re+et*Be,s[8]=(ke=u[8])*p+(ze=u[9])*T+(He=u[10])*H+(et=u[11])*ge,s[9]=ke*g+ze*M+He*Y+et*ve,s[10]=ke*S+ze*B+He*te+et*pe,s[11]=ke*C+ze*j+He*re+et*Be,s[12]=(ke=u[12])*p+(ze=u[13])*T+(He=u[14])*H+(et=u[15])*ge,s[13]=ke*g+ze*M+He*Y+et*ve,s[14]=ke*S+ze*B+He*te+et*pe,s[15]=ke*C+ze*j+He*re+et*Be,s}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var ff,M_=Cm;function Td(s,i,u){var p=i[0],g=i[1],S=i[2],C=i[3];return s[0]=u[0]*p+u[4]*g+u[8]*S+u[12]*C,s[1]=u[1]*p+u[5]*g+u[9]*S+u[13]*C,s[2]=u[2]*p+u[6]*g+u[10]*S+u[14]*C,s[3]=u[3]*p+u[7]*g+u[11]*S+u[15]*C,s}ff=new qc(4),qc!=Float32Array&&(ff[0]=0,ff[1]=0,ff[2]=0,ff[3]=0);class Em extends $o{constructor(i){super(i,I_)}createBucket(i){return new Cd(i)}queryRadius(i){const u=i;return Ou("circle-radius",this,u)+Ou("circle-stroke-width",this,u)+kd(this.paint.get("circle-translate"))}queryIntersectsFeature(i,u,p,g,S,C,T,M){const B=Vc(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,T),j=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),H=this.paint.get("circle-pitch-alignment")==="map",Y=H?B:function(re,ge){return re.map(ve=>km(ve,ge))}(B,M),te=H?j*T:j;for(const re of g)for(const ge of re){const ve=H?ge:km(ge,M);let pe=te;const Be=Td([],[ge.x,ge.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Be[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=C.cameraToCenterDistance/Be[3]),Lb(Y,ve,pe))return!0}return!1}}function km(s,i){const u=Td([],[s.x,s.y,0,1],i);return new A(u[0]/u[3],u[1]/u[3])}class Pd extends Cd{}let L_;Bt("HeatmapBucket",Pd,{omit:["layers"]});var Am={get paint(){return L_=L_||new Mi({"heatmap-radius":new en(Je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new en(Je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lt(Je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uf(Je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lt(Je.paint_heatmap["heatmap-opacity"])})}};function In(s,{width:i,height:u},p,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*u*p)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*u*p}`)}else g=new Uint8Array(i*u*p);return s.width=i,s.height=u,s.data=g,s}function O_(s,{width:i,height:u},p){if(i===s.width&&u===s.height)return;const g=In({},{width:i,height:u},p);Tm(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,i),height:Math.min(s.height,u)},p),s.width=i,s.height=u,s.data=g.data}function Tm(s,i,u,p,g,S){if(g.width===0||g.height===0)return i;if(g.width>s.width||g.height>s.height||u.x>s.width-g.width||u.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||p.x>i.width-g.width||p.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const C=s.data,T=i.data;if(C===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<g.height;M++){const B=((u.y+M)*s.width+u.x)*S,j=((p.y+M)*i.width+p.x)*S;for(let H=0;H<g.width*S;H++)T[j+H]=C[B+H]}return i}class Js{constructor(i,u){In(this,i,1,u)}resize(i){O_(this,i,1)}clone(){return new Js({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,p,g,S){Tm(i,u,p,g,S,1)}}class Uo{constructor(i,u){In(this,i,4,u)}resize(i){O_(this,i,4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Uo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,p,g,S){Tm(i,u,p,g,S,4)}}function F_(s){const i={},u=s.resolution||256,p=s.clips?s.clips.length:1,g=s.image||new Uo({width:u,height:p});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const S=(C,T,M)=>{i[s.evaluationKey]=M;const B=s.expression.evaluate(i);g.data[C+T+0]=Math.floor(255*B.r/B.a),g.data[C+T+1]=Math.floor(255*B.g/B.a),g.data[C+T+2]=Math.floor(255*B.b/B.a),g.data[C+T+3]=Math.floor(255*B.a)};if(s.clips)for(let C=0,T=0;C<p;++C,T+=4*u)for(let M=0,B=0;M<u;M++,B+=4){const j=M/(u-1),{start:H,end:Y}=s.clips[C];S(T,B,H*(1-j)+Y*j)}else for(let C=0,T=0;C<u;C++,T+=4)S(0,T,C/(u-1));return g}Bt("AlphaImage",Js),Bt("RGBAImage",Uo);class Fb extends $o{createBucket(i){return new Pd(i)}constructor(i){super(i,Am),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=F_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ta;var Rb={get paint(){return ta=ta||new Mi({"hillshade-illumination-direction":new Lt(Je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Lt(Je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lt(Je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lt(Je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lt(Je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lt(Je.paint_hillshade["hillshade-accent-color"])})}};class Id extends $o{constructor(i){super(i,Rb)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Pm=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:R_}=Pm;var Md={exports:{}};function ao(s,i,u){u=u||2;var p,g,S,C,T,M,B,j=i&&i.length,H=j?i[0]*u:s.length,Y=Qs(s,0,H,u,!0),te=[];if(!Y||Y.next===Y.prev)return te;if(j&&(Y=function(ge,ve,pe,Be){var ke,ze,He,et=[];for(ke=0,ze=ve.length;ke<ze;ke++)(He=Qs(ge,ve[ke]*Be,ke<ze-1?ve[ke+1]*Be:ge.length,Be,!1))===He.next&&(He.steiner=!0),et.push(jl(He));for(et.sort(Mm),ke=0;ke<et.length;ke++)pe=Lm(et[ke],pe);return pe}(s,i,Y,u)),s.length>80*u){p=S=s[0],g=C=s[1];for(var re=u;re<H;re+=u)(T=s[re])<p&&(p=T),(M=s[re+1])<g&&(g=M),T>S&&(S=T),M>C&&(C=M);B=(B=Math.max(S-p,C-g))!==0?32767/B:0}return Gc(Y,te,u,p,g,B,0),te}function Qs(s,i,u,p,g){var S,C;if(g===wa(s,i,u,p)>0)for(S=i;S<u;S+=p)C=Fm(S,s[S],s[S+1],C);else for(S=u-p;S>=i;S-=p)C=Fm(S,s[S],s[S+1],C);return C&&Od(C,C.next)&&(Wc(C),C=C.next),C}function el(s,i){if(!s)return s;i||(i=s);var u,p=s;do if(u=!1,p.steiner||!Od(p,p.next)&&Fr(p.prev,p,p.next)!==0)p=p.next;else{if(Wc(p),(p=i=p.prev)===p.next)break;u=!0}while(u||p!==i);return i}function Gc(s,i,u,p,g,S,C){if(s){!C&&S&&function(j,H,Y,te){var re=j;do re.z===0&&(re.z=Om(re.x,re.y,H,Y,te)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==j);re.prevZ.nextZ=null,re.prevZ=null,function(ge){var ve,pe,Be,ke,ze,He,et,Rt,$t=1;do{for(pe=ge,ge=null,ze=null,He=0;pe;){for(He++,Be=pe,et=0,ve=0;ve<$t&&(et++,Be=Be.nextZ);ve++);for(Rt=$t;et>0||Rt>0&&Be;)et!==0&&(Rt===0||!Be||pe.z<=Be.z)?(ke=pe,pe=pe.nextZ,et--):(ke=Be,Be=Be.nextZ,Rt--),ze?ze.nextZ=ke:ge=ke,ke.prevZ=ze,ze=ke;pe=Be}ze.nextZ=null,$t*=2}while(He>1)}(re)}(s,p,g,S);for(var T,M,B=s;s.prev!==s.next;)if(T=s.prev,M=s.next,S?D_(s,p,g,S):Ld(s))i.push(T.i/u|0),i.push(s.i/u|0),i.push(M.i/u|0),Wc(s),s=M.next,B=M.next;else if((s=M)===B){C?C===1?Gc(s=Im(el(s),i,u),i,u,p,g,S,2):C===2&&z_(s,i,u,p,g,S):Gc(el(s),i,u,p,g,S,1);break}}}function Ld(s){var i=s.prev,u=s,p=s.next;if(Fr(i,u,p)>=0)return!1;for(var g=i.x,S=u.x,C=p.x,T=i.y,M=u.y,B=p.y,j=g<S?g<C?g:C:S<C?S:C,H=T<M?T<B?T:B:M<B?M:B,Y=g>S?g>C?g:C:S>C?S:C,te=T>M?T>B?T:B:M>B?M:B,re=p.next;re!==i;){if(re.x>=j&&re.x<=Y&&re.y>=H&&re.y<=te&&Fu(g,T,S,M,C,B,re.x,re.y)&&Fr(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function D_(s,i,u,p){var g=s.prev,S=s,C=s.next;if(Fr(g,S,C)>=0)return!1;for(var T=g.x,M=S.x,B=C.x,j=g.y,H=S.y,Y=C.y,te=T<M?T<B?T:B:M<B?M:B,re=j<H?j<Y?j:Y:H<Y?H:Y,ge=T>M?T>B?T:B:M>B?M:B,ve=j>H?j>Y?j:Y:H>Y?H:Y,pe=Om(te,re,i,u,p),Be=Om(ge,ve,i,u,p),ke=s.prevZ,ze=s.nextZ;ke&&ke.z>=pe&&ze&&ze.z<=Be;){if(ke.x>=te&&ke.x<=ge&&ke.y>=re&&ke.y<=ve&&ke!==g&&ke!==C&&Fu(T,j,M,H,B,Y,ke.x,ke.y)&&Fr(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,ze.x>=te&&ze.x<=ge&&ze.y>=re&&ze.y<=ve&&ze!==g&&ze!==C&&Fu(T,j,M,H,B,Y,ze.x,ze.y)&&Fr(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;ke&&ke.z>=pe;){if(ke.x>=te&&ke.x<=ge&&ke.y>=re&&ke.y<=ve&&ke!==g&&ke!==C&&Fu(T,j,M,H,B,Y,ke.x,ke.y)&&Fr(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;ze&&ze.z<=Be;){if(ze.x>=te&&ze.x<=ge&&ze.y>=re&&ze.y<=ve&&ze!==g&&ze!==C&&Fu(T,j,M,H,B,Y,ze.x,ze.y)&&Fr(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function Im(s,i,u){var p=s;do{var g=p.prev,S=p.next.next;!Od(g,S)&&$_(g,p,p.next,S)&&Hc(g,S)&&Hc(S,g)&&(i.push(g.i/u|0),i.push(p.i/u|0),i.push(S.i/u|0),Wc(p),Wc(p.next),p=s=S),p=p.next}while(p!==s);return el(p)}function z_(s,i,u,p,g,S){var C=s;do{for(var T=C.next.next;T!==C.prev;){if(C.i!==T.i&&B_(C,T)){var M=N_(C,T);return C=el(C,C.next),M=el(M,M.next),Gc(C,i,u,p,g,S,0),void Gc(M,i,u,p,g,S,0)}T=T.next}C=C.next}while(C!==s)}function Mm(s,i){return s.x-i.x}function Lm(s,i){var u=function(g,S){var C,T=S,M=g.x,B=g.y,j=-1/0;do{if(B<=T.y&&B>=T.next.y&&T.next.y!==T.y){var H=T.x+(B-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(H<=M&&H>j&&(j=H,C=T.x<T.next.x?T:T.next,H===M))return C}T=T.next}while(T!==S);if(!C)return null;var Y,te=C,re=C.x,ge=C.y,ve=1/0;T=C;do M>=T.x&&T.x>=re&&M!==T.x&&Fu(B<ge?M:j,B,re,ge,B<ge?j:M,B,T.x,T.y)&&(Y=Math.abs(B-T.y)/(M-T.x),Hc(T,g)&&(Y<ve||Y===ve&&(T.x>C.x||T.x===C.x&&Ul(C,T)))&&(C=T,ve=Y)),T=T.next;while(T!==te);return C}(s,i);if(!u)return i;var p=N_(u,s);return el(p,p.next),el(u,u.next)}function Ul(s,i){return Fr(s.prev,s,i.prev)<0&&Fr(i.next,s,s.next)<0}function Om(s,i,u,p,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-u)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function jl(s){var i=s,u=s;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==s);return u}function Fu(s,i,u,p,g,S,C,T){return(g-C)*(i-T)>=(s-C)*(S-T)&&(s-C)*(p-T)>=(u-C)*(i-T)&&(u-C)*(S-T)>=(g-C)*(p-T)}function B_(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(u,p){var g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==p.i&&g.next.i!==p.i&&$_(g,g.next,u,p))return!0;g=g.next}while(g!==u);return!1}(s,i)&&(Hc(s,i)&&Hc(i,s)&&function(u,p){var g=u,S=!1,C=(u.x+p.x)/2,T=(u.y+p.y)/2;do g.y>T!=g.next.y>T&&g.next.y!==g.y&&C<(g.next.x-g.x)*(T-g.y)/(g.next.y-g.y)+g.x&&(S=!S),g=g.next;while(g!==u);return S}(s,i)&&(Fr(s.prev,s,i.prev)||Fr(s,i.prev,i))||Od(s,i)&&Fr(s.prev,s,s.next)>0&&Fr(i.prev,i,i.next)>0)}function Fr(s,i,u){return(i.y-s.y)*(u.x-i.x)-(i.x-s.x)*(u.y-i.y)}function Od(s,i){return s.x===i.x&&s.y===i.y}function $_(s,i,u,p){var g=df(Fr(s,i,u)),S=df(Fr(s,i,p)),C=df(Fr(u,p,s)),T=df(Fr(u,p,i));return g!==S&&C!==T||!(g!==0||!Fd(s,u,i))||!(S!==0||!Fd(s,p,i))||!(C!==0||!Fd(u,s,p))||!(T!==0||!Fd(u,i,p))}function Fd(s,i,u){return i.x<=Math.max(s.x,u.x)&&i.x>=Math.min(s.x,u.x)&&i.y<=Math.max(s.y,u.y)&&i.y>=Math.min(s.y,u.y)}function df(s){return s>0?1:s<0?-1:0}function Hc(s,i){return Fr(s.prev,s,s.next)<0?Fr(s,i,s.next)>=0&&Fr(s,s.prev,i)>=0:Fr(s,i,s.prev)<0||Fr(s,s.next,i)<0}function N_(s,i){var u=new so(s.i,s.x,s.y),p=new so(i.i,i.x,i.y),g=s.next,S=i.prev;return s.next=i,i.prev=s,u.next=g,g.prev=u,p.next=u,u.prev=p,S.next=p,p.prev=S,p}function Fm(s,i,u,p){var g=new so(s,i,u);return p?(g.next=p.next,g.prev=p,p.next.prev=g,p.next=g):(g.prev=g,g.next=g),g}function Wc(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function so(s,i,u){this.i=s,this.x=i,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wa(s,i,u,p){for(var g=0,S=i,C=u-p;S<u;S+=p)g+=(s[C]-s[S])*(s[S+1]+s[C+1]),C=S;return g}Md.exports=ao,Md.exports.default=ao,ao.deviation=function(s,i,u,p){var g=i&&i.length,S=Math.abs(wa(s,0,g?i[0]*u:s.length,u));if(g)for(var C=0,T=i.length;C<T;C++)S-=Math.abs(wa(s,i[C]*u,C<T-1?i[C+1]*u:s.length,u));var M=0;for(C=0;C<p.length;C+=3){var B=p[C]*u,j=p[C+1]*u,H=p[C+2]*u;M+=Math.abs((s[B]-s[H])*(s[j+1]-s[B+1])-(s[B]-s[j])*(s[H+1]-s[B+1]))}return S===0&&M===0?0:Math.abs((M-S)/S)},ao.flatten=function(s){for(var i=s[0][0].length,u={vertices:[],holes:[],dimensions:i},p=0,g=0;g<s.length;g++){for(var S=0;S<s[g].length;S++)for(var C=0;C<i;C++)u.vertices.push(s[g][S][C]);g>0&&u.holes.push(p+=s[g-1].length)}return u};var U_=x(Md.exports);function Db(s,i,u,p,g){pf(s,i,u||0,p||s.length-1,g||j_)}function pf(s,i,u,p,g){for(;p>u;){if(p-u>600){var S=p-u+1,C=i-u+1,T=Math.log(S),M=.5*Math.exp(2*T/3),B=.5*Math.sqrt(T*M*(S-M)/S)*(C-S/2<0?-1:1);pf(s,i,Math.max(u,Math.floor(i-C*M/S+B)),Math.min(p,Math.floor(i+(S-C)*M/S+B)),g)}var j=s[i],H=u,Y=p;for(ps(s,u,i),g(s[p],j)>0&&ps(s,u,p);H<Y;){for(ps(s,H,Y),H++,Y--;g(s[H],j)<0;)H++;for(;g(s[Y],j)>0;)Y--}g(s[u],j)===0?ps(s,u,Y):ps(s,++Y,p),Y<=i&&(u=Y+1),i<=Y&&(p=Y-1)}}function ps(s,i,u){var p=s[i];s[i]=s[u],s[u]=p}function j_(s,i){return s<i?-1:s>i?1:0}function Rd(s,i){const u=s.length;if(u<=1)return[s];const p=[];let g,S;for(let C=0;C<u;C++){const T=qe(s[C]);T!==0&&(s[C].area=Math.abs(T),S===void 0&&(S=T<0),S===T<0?(g&&p.push(g),g=[s[C]]):g.push(s[C]))}if(g&&p.push(g),i>1)for(let C=0;C<p.length;C++)p[C].length<=i||(Db(p[C],i,1,p[C].length-1,zb),p[C]=p[C].slice(0,i));return p}function zb(s,i){return i.area-s.area}function Dd(s,i,u){const p=u.patternDependencies;let g=!1;for(const S of i){const C=S.paint.get(`${s}-pattern`);C.isConstant()||(g=!0);const T=C.constantOr(null);T&&(g=!0,p[T.to]=!0,p[T.from]=!0)}return g}function Vl(s,i,u,p,g){const S=g.patternDependencies;for(const C of i){const T=C.paint.get(`${s}-pattern`).value;if(T.kind!=="constant"){let M=T.evaluate({zoom:p-1},u,{},g.availableImages),B=T.evaluate({zoom:p},u,{},g.availableImages),j=T.evaluate({zoom:p+1},u,{},g.availableImages);M=M&&M.name?M.name:M,B=B&&B.name?B.name:B,j=j&&j.name?j.name:j,S[M]=!0,S[B]=!0,S[j]=!0,u.patterns[C.id]={min:M,mid:B,max:j}}}return u}class Ru{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new de,this.indexArray=new it,this.indexArray2=new Et,this.programConfigurations=new ba(i.layers,i.zoom),this.segments=new _t,this.segments2=new _t,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){this.hasPattern=Dd("fill",this.layers,u);const g=this.layers[0].layout.get("fill-sort-key"),S=!g.isConstant(),C=[];for(const{feature:T,id:M,index:B,sourceLayerIndex:j}of i){const H=this.layers[0]._featureFilter.needGeometry,Y=Lu(T,H);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),Y,p))continue;const te=S?g.evaluate(Y,{},p,u.availableImages):void 0,re={id:M,properties:T.properties,type:T.type,sourceLayerIndex:j,index:B,geometry:H?Y.geometry:ea(T),patterns:{},sortKey:te};C.push(re)}S&&C.sort((T,M)=>T.sortKey-M.sortKey);for(const T of C){const{geometry:M,index:B,sourceLayerIndex:j}=T;if(this.hasPattern){const H=Vl("fill",this.layers,T,this.zoom,u);this.patternFeatures.push(H)}else this.addFeature(T,M,B,p,{});u.featureIndex.insert(i[B].feature,M,B,j,this.index)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}addFeatures(i,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,R_),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,u,p,g,S){for(const C of Rd(u,500)){let T=0;for(const te of C)T+=te.length;const M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),B=M.vertexLength,j=[],H=[];for(const te of C){if(te.length===0)continue;te!==C[0]&&H.push(j.length/2);const re=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),ge=re.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(ge+te.length-1,ge),j.push(te[0].x),j.push(te[0].y);for(let ve=1;ve<te.length;ve++)this.layoutVertexArray.emplaceBack(te[ve].x,te[ve].y),this.indexArray2.emplaceBack(ge+ve-1,ge+ve),j.push(te[ve].x),j.push(te[ve].y);re.vertexLength+=te.length,re.primitiveLength+=te.length}const Y=U_(j,H);for(let te=0;te<Y.length;te+=3)this.indexArray.emplaceBack(B+Y[te],B+Y[te+1],B+Y[te+2]);M.vertexLength+=T,M.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,g)}}let V_,Rm;Bt("FillBucket",Ru,{omit:["layers","patternFeatures"]});var q_={get paint(){return Rm=Rm||new Mi({"fill-antialias":new Lt(Je.paint_fill["fill-antialias"]),"fill-opacity":new en(Je.paint_fill["fill-opacity"]),"fill-color":new en(Je.paint_fill["fill-color"]),"fill-outline-color":new en(Je.paint_fill["fill-outline-color"]),"fill-translate":new Lt(Je.paint_fill["fill-translate"]),"fill-translate-anchor":new Lt(Je.paint_fill["fill-translate-anchor"]),"fill-pattern":new Lc(Je.paint_fill["fill-pattern"])})},get layout(){return V_=V_||new Mi({"fill-sort-key":new en(Je.layout_fill["fill-sort-key"])})}};class zd extends $o{constructor(i){super(i,q_)}recalculate(i,u){super.recalculate(i,u);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Ru(i)}queryRadius(){return kd(this.paint.get("fill-translate"))}queryIntersectsFeature(i,u,p,g,S,C,T){return Uc(Vc(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,T),g)}isTileClipped(){return!0}}const G_=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Bd=Or([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Dm}=G_;var Na={},Bb=b,zm=tl;function tl(s,i,u,p,g){this.properties={},this.extent=u,this.type=0,this._pbf=s,this._geometry=-1,this._keys=p,this._values=g,s.readFields(H_,this,i)}function H_(s,i,u){s==1?i.id=u.readVarint():s==2?function(p,g){for(var S=p.readVarint()+p.pos;p.pos<S;){var C=g._keys[p.readVarint()],T=g._values[p.readVarint()];g.properties[C]=T}}(u,i):s==3?i.type=u.readVarint():s==4&&(i._geometry=u.pos)}function Bm(s){for(var i,u,p=0,g=0,S=s.length,C=S-1;g<S;C=g++)p+=((u=s[C]).x-(i=s[g]).x)*(i.y+u.y);return p}tl.types=["Unknown","Point","LineString","Polygon"],tl.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,u=s.readVarint()+s.pos,p=1,g=0,S=0,C=0,T=[];s.pos<u;){if(g<=0){var M=s.readVarint();p=7&M,g=M>>3}if(g--,p===1||p===2)S+=s.readSVarint(),C+=s.readSVarint(),p===1&&(i&&T.push(i),i=[]),i.push(new Bb(S,C));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&T.push(i),T},tl.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,u=1,p=0,g=0,S=0,C=1/0,T=-1/0,M=1/0,B=-1/0;s.pos<i;){if(p<=0){var j=s.readVarint();u=7&j,p=j>>3}if(p--,u===1||u===2)(g+=s.readSVarint())<C&&(C=g),g>T&&(T=g),(S+=s.readSVarint())<M&&(M=S),S>B&&(B=S);else if(u!==7)throw new Error("unknown command "+u)}return[C,M,T,B]},tl.prototype.toGeoJSON=function(s,i,u){var p,g,S=this.extent*Math.pow(2,u),C=this.extent*s,T=this.extent*i,M=this.loadGeometry(),B=tl.types[this.type];function j(te){for(var re=0;re<te.length;re++){var ge=te[re];te[re]=[360*(ge.x+C)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(ge.y+T)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(p=0;p<M.length;p++)H[p]=M[p][0];j(M=H);break;case 2:for(p=0;p<M.length;p++)j(M[p]);break;case 3:for(M=function(te){var re=te.length;if(re<=1)return[te];for(var ge,ve,pe=[],Be=0;Be<re;Be++){var ke=Bm(te[Be]);ke!==0&&(ve===void 0&&(ve=ke<0),ve===ke<0?(ge&&pe.push(ge),ge=[te[Be]]):ge.push(te[Be]))}return ge&&pe.push(ge),pe}(M),p=0;p<M.length;p++)for(g=0;g<M[p].length;g++)j(M[p][g])}M.length===1?M=M[0]:B="Multi"+B;var Y={type:"Feature",geometry:{type:B,coordinates:M},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var $b=zm,$m=ms;function ms(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(W_,this,i),this.length=this._features.length}function W_(s,i,u){s===15?i.version=u.readVarint():s===1?i.name=u.readString():s===5?i.extent=u.readVarint():s===2?i._features.push(u.pos):s===3?i._keys.push(u.readString()):s===4&&i._values.push(function(p){for(var g=null,S=p.readVarint()+p.pos;p.pos<S;){var C=p.readVarint()>>3;g=C===1?p.readString():C===2?p.readFloat():C===3?p.readDouble():C===4?p.readVarint64():C===5?p.readVarint():C===6?p.readSVarint():C===7?p.readBoolean():null}return g}(u))}ms.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new $b(this._pbf,i,this.extent,this._keys,this._values)};var Z_=$m;function Nb(s,i,u){if(s===3){var p=new Z_(u,u.readVarint()+u.pos);p.length&&(i[p.name]=p)}}Na.VectorTile=function(s,i){this.layers=s.readFields(Nb,{},i)},Na.VectorTileFeature=zm,Na.VectorTileLayer=$m;const K_=Na.VectorTileFeature.types,Nm=Math.pow(2,13);function mf(s,i,u,p,g,S,C,T){s.emplaceBack(i,u,2*Math.floor(p*Nm)+C,g*Nm*2,S*Nm*2,Math.round(T))}class Ua{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new me,this.centroidVertexArray=new fe,this.indexArray=new it,this.programConfigurations=new ba(i.layers,i.zoom),this.segments=new _t,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){this.features=[],this.hasPattern=Dd("fill-extrusion",this.layers,u);for(const{feature:g,id:S,index:C,sourceLayerIndex:T}of i){const M=this.layers[0]._featureFilter.needGeometry,B=Lu(g,M);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),B,p))continue;const j={id:S,sourceLayerIndex:T,index:C,geometry:M?B.geometry:ea(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Vl("fill-extrusion",this.layers,j,this.zoom,u)):this.addFeature(j,j.geometry,C,p,{}),u.featureIndex.insert(g,j.geometry,C,T,this.index,!0)}}addFeatures(i,u,p){for(const g of this.features){const{geometry:S}=g;this.addFeature(g,S,g.index,u,p)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Dm),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Bd.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,u,p,g,S){const C={x:0,y:0,vertexCount:0};for(const T of Rd(u,500)){let M=0;for(const re of T)M+=re.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const re of T){if(re.length===0||jm(re))continue;let ge=0;for(let ve=0;ve<re.length;ve++){const pe=re[ve];if(ve>=1){const Be=re[ve-1];if(!Um(pe,Be)){B.vertexLength+4>_t.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=pe.sub(Be)._perp()._unit(),ze=Be.dist(pe);ge+ze>32768&&(ge=0),mf(this.layoutVertexArray,pe.x,pe.y,ke.x,ke.y,0,0,ge),mf(this.layoutVertexArray,pe.x,pe.y,ke.x,ke.y,0,1,ge),C.x+=2*pe.x,C.y+=2*pe.y,C.vertexCount+=2,ge+=ze,mf(this.layoutVertexArray,Be.x,Be.y,ke.x,ke.y,0,0,ge),mf(this.layoutVertexArray,Be.x,Be.y,ke.x,ke.y,0,1,ge),C.x+=2*Be.x,C.y+=2*Be.y,C.vertexCount+=2;const He=B.vertexLength;this.indexArray.emplaceBack(He,He+2,He+1),this.indexArray.emplaceBack(He+1,He+2,He+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+M>_t.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),K_[i.type]!=="Polygon")continue;const j=[],H=[],Y=B.vertexLength;for(const re of T)if(re.length!==0){re!==T[0]&&H.push(j.length/2);for(let ge=0;ge<re.length;ge++){const ve=re[ge];mf(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),C.x+=ve.x,C.y+=ve.y,C.vertexCount+=1,j.push(ve.x),j.push(ve.y)}}const te=U_(j,H);for(let re=0;re<te.length;re+=3)this.indexArray.emplaceBack(Y+te[re],Y+te[re+2],Y+te[re+1]);B.primitiveLength+=te.length/3,B.vertexLength+=M}for(let T=0;T<C.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,g)}}function Um(s,i){return s.x===i.x&&(s.x<0||s.x>xr)||s.y===i.y&&(s.y<0||s.y>xr)}function jm(s){return s.every(i=>i.x<0)||s.every(i=>i.x>xr)||s.every(i=>i.y<0)||s.every(i=>i.y>xr)}let $d;Bt("FillExtrusionBucket",Ua,{omit:["layers","features"]});var Nd={get paint(){return $d=$d||new Mi({"fill-extrusion-opacity":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new en(Je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Lc(Je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new en(Je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new en(Je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Zc extends $o{constructor(i){super(i,Nd)}createBucket(i){return new Ua(i)}queryRadius(){return kd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,u,p,g,S,C,T,M){const B=Vc(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,T),j=this.paint.get("fill-extrusion-height").evaluate(u,p),H=this.paint.get("fill-extrusion-base").evaluate(u,p),Y=function(re,ge,ve,pe){const Be=[];for(const ke of re){const ze=[ke.x,ke.y,0,1];Td(ze,ze,ge),Be.push(new A(ze[0]/ze[3],ze[1]/ze[3]))}return Be}(B,M),te=function(re,ge,ve,pe){const Be=[],ke=[],ze=pe[8]*ge,He=pe[9]*ge,et=pe[10]*ge,Rt=pe[11]*ge,$t=pe[8]*ve,Ft=pe[9]*ve,Pt=pe[10]*ve,wt=pe[11]*ve;for(const Mt of re){const It=[],ct=[];for(const Yt of Mt){const qt=Yt.x,Ht=Yt.y,pn=pe[0]*qt+pe[4]*Ht+pe[12],br=pe[1]*qt+pe[5]*Ht+pe[13],hi=pe[2]*qt+pe[6]*Ht+pe[14],Vo=pe[3]*qt+pe[7]*Ht+pe[15],uo=hi+et,Br=Vo+Rt,_i=pn+$t,Ri=br+Ft,co=hi+Pt,vi=Vo+wt,$r=new A((pn+ze)/Br,(br+He)/Br);$r.z=uo/Br,It.push($r);const fi=new A(_i/vi,Ri/vi);fi.z=co/vi,ct.push(fi)}Be.push(It),ke.push(ct)}return[Be,ke]}(g,H,j,M);return function(re,ge,ve){let pe=1/0;Uc(ve,ge)&&(pe=gf(ve,ge[0]));for(let Be=0;Be<ge.length;Be++){const ke=ge[Be],ze=re[Be];for(let He=0;He<ke.length-1;He++){const et=ke[He],Rt=[et,ke[He+1],ze[He+1],ze[He],et];k_(ve,Rt)&&(pe=Math.min(pe,gf(ve,Rt)))}}return pe!==1/0&&pe}(te[0],te[1],Y)}}function on(s,i){return s.x*i.x+s.y*i.y}function gf(s,i){if(s.length===1){let u=0;const p=i[u++];let g;for(;!g||p.equals(g);)if(g=i[u++],!g)return 1/0;for(;u<i.length;u++){const S=i[u],C=s[0],T=g.sub(p),M=S.sub(p),B=C.sub(p),j=on(T,T),H=on(T,M),Y=on(M,M),te=on(B,T),re=on(B,M),ge=j*Y-H*H,ve=(Y*te-H*re)/ge,pe=(j*re-H*te)/ge,Be=p.z*(1-ve-pe)+g.z*ve+S.z*pe;if(isFinite(Be))return Be}return 1/0}{let u=1/0;for(const p of i)u=Math.min(u,p.z);return u}}const Vm=Or([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Du}=Vm,Ub=Or([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:qm}=Ub,X_=Na.VectorTileFeature.types,lo=Math.cos(Math.PI/180*37.5),Y_=Math.pow(2,14)/.5;class Gm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new je,this.indexArray=new it,this.programConfigurations=new ba(i.layers,i.zoom),this.segments=new _t,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){this.hasPattern=Dd("line",this.layers,u);const g=this.layers[0].layout.get("line-sort-key"),S=!g.isConstant(),C=[];for(const{feature:T,id:M,index:B,sourceLayerIndex:j}of i){const H=this.layers[0]._featureFilter.needGeometry,Y=Lu(T,H);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),Y,p))continue;const te=S?g.evaluate(Y,{},p):void 0,re={id:M,properties:T.properties,type:T.type,sourceLayerIndex:j,index:B,geometry:H?Y.geometry:ea(T),patterns:{},sortKey:te};C.push(re)}S&&C.sort((T,M)=>T.sortKey-M.sortKey);for(const T of C){const{geometry:M,index:B,sourceLayerIndex:j}=T;if(this.hasPattern){const H=Vl("line",this.layers,T,this.zoom,u);this.patternFeatures.push(H)}else this.addFeature(T,M,B,p,{});u.featureIndex.insert(i[B].feature,M,B,j,this.index)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}addFeatures(i,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,qm)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Du),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,p,g,S){const C=this.layers[0].layout,T=C.get("line-join").evaluate(i,{}),M=C.get("line-cap"),B=C.get("line-miter-limit"),j=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const H of u)this.addLine(H,i,T,M,B,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,g)}addLine(i,u,p,g,S,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<i.length-1;pe++)this.totalDistance+=i[pe].dist(i[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=X_[u.type]==="Polygon";let M=i.length;for(;M>=2&&i[M-1].equals(i[M-2]);)M--;let B=0;for(;B<M-1&&i[B].equals(i[B+1]);)B++;if(M<(T?3:2))return;p==="bevel"&&(S=1.05);const j=this.overscaling<=16?15*xr/(512*this.overscaling):0,H=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let Y,te,re,ge,ve;this.e1=this.e2=-1,T&&(Y=i[M-2],ve=i[B].sub(Y)._unit()._perp());for(let pe=B;pe<M;pe++){if(re=pe===M-1?T?i[B+1]:void 0:i[pe+1],re&&i[pe].equals(re))continue;ve&&(ge=ve),Y&&(te=Y),Y=i[pe],ve=re?re.sub(Y)._unit()._perp():ge,ge=ge||ve;let Be=ge.add(ve);Be.x===0&&Be.y===0||Be._unit();const ke=ge.x*ve.x+ge.y*ve.y,ze=Be.x*ve.x+Be.y*ve.y,He=ze!==0?1/ze:1/0,et=2*Math.sqrt(2-2*ze),Rt=ze<lo&&te&&re,$t=ge.x*ve.y-ge.y*ve.x>0;if(Rt&&pe>B){const wt=Y.dist(te);if(wt>2*j){const Mt=Y.sub(Y.sub(te)._mult(j/wt)._round());this.updateDistance(te,Mt),this.addCurrentVertex(Mt,ge,0,0,H),te=Mt}}const Ft=te&&re;let Pt=Ft?p:T?"butt":g;if(Ft&&Pt==="round"&&(He<C?Pt="miter":He<=2&&(Pt="fakeround")),Pt==="miter"&&He>S&&(Pt="bevel"),Pt==="bevel"&&(He>2&&(Pt="flipbevel"),He<S&&(Pt="miter")),te&&this.updateDistance(te,Y),Pt==="miter")Be._mult(He),this.addCurrentVertex(Y,Be,0,0,H);else if(Pt==="flipbevel"){if(He>100)Be=ve.mult(-1);else{const wt=He*ge.add(ve).mag()/ge.sub(ve).mag();Be._perp()._mult(wt*($t?-1:1))}this.addCurrentVertex(Y,Be,0,0,H),this.addCurrentVertex(Y,Be.mult(-1),0,0,H)}else if(Pt==="bevel"||Pt==="fakeround"){const wt=-Math.sqrt(He*He-1),Mt=$t?wt:0,It=$t?0:wt;if(te&&this.addCurrentVertex(Y,ge,Mt,It,H),Pt==="fakeround"){const ct=Math.round(180*et/Math.PI/20);for(let Yt=1;Yt<ct;Yt++){let qt=Yt/ct;if(qt!==.5){const pn=qt-.5;qt+=qt*pn*(qt-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*pn*pn+(.848013+ke*(.215638*ke-1.06021)))}const Ht=ve.sub(ge)._mult(qt)._add(ge)._unit()._mult($t?-1:1);this.addHalfVertex(Y,Ht.x,Ht.y,!1,$t,0,H)}}re&&this.addCurrentVertex(Y,ve,-Mt,-It,H)}else if(Pt==="butt")this.addCurrentVertex(Y,Be,0,0,H);else if(Pt==="square"){const wt=te?1:-1;this.addCurrentVertex(Y,Be,wt,wt,H)}else Pt==="round"&&(te&&(this.addCurrentVertex(Y,ge,0,0,H),this.addCurrentVertex(Y,ge,1,1,H,!0)),re&&(this.addCurrentVertex(Y,ve,-1,-1,H,!0),this.addCurrentVertex(Y,ve,0,0,H)));if(Rt&&pe<M-1){const wt=Y.dist(re);if(wt>2*j){const Mt=Y.add(re.sub(Y)._mult(j/wt)._round());this.updateDistance(Y,Mt),this.addCurrentVertex(Mt,ve,0,0,H),Y=Mt}}}}addCurrentVertex(i,u,p,g,S,C=!1){const T=u.y*g-u.x,M=-u.y-u.x*g;this.addHalfVertex(i,u.x+u.y*p,u.y-u.x*p,C,!1,p,S),this.addHalfVertex(i,T,M,C,!0,-g,S),this.distance>Y_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,u,p,g,S,C))}addHalfVertex({x:i,y:u},p,g,S,C,T,M){const B=.5*(this.lineClips?this.scaledDistance*(Y_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(S?1:0),(u<<1)+(C?1:0),Math.round(63*p)+128,Math.round(63*g)+128,1+(T===0?0:T<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),M.primitiveLength++),C?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,u){this.distance+=i.dist(u),this.updateScaledDistance()}}let Hm,J_;Bt("LineBucket",Gm,{omit:["layers","patternFeatures"]});var Wm={get paint(){return J_=J_||new Mi({"line-opacity":new en(Je.paint_line["line-opacity"]),"line-color":new en(Je.paint_line["line-color"]),"line-translate":new Lt(Je.paint_line["line-translate"]),"line-translate-anchor":new Lt(Je.paint_line["line-translate-anchor"]),"line-width":new en(Je.paint_line["line-width"]),"line-gap-width":new en(Je.paint_line["line-gap-width"]),"line-offset":new en(Je.paint_line["line-offset"]),"line-blur":new en(Je.paint_line["line-blur"]),"line-dasharray":new Oc(Je.paint_line["line-dasharray"]),"line-pattern":new Lc(Je.paint_line["line-pattern"]),"line-gradient":new uf(Je.paint_line["line-gradient"])})},get layout(){return Hm=Hm||new Mi({"line-cap":new Lt(Je.layout_line["line-cap"]),"line-join":new en(Je.layout_line["line-join"]),"line-miter-limit":new Lt(Je.layout_line["line-miter-limit"]),"line-round-limit":new Lt(Je.layout_line["line-round-limit"]),"line-sort-key":new en(Je.layout_line["line-sort-key"])})}};class jb extends en{possiblyEvaluate(i,u){return u=new Sr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(i,u)}evaluate(i,u,p,g){return u=G({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(i,u,p,g)}}let Ud;class Vb extends $o{constructor(i){super(i,Wm),this.gradientVersion=0,Ud||(Ud=new jb(Wm.paint.properties["line-width"].specification),Ud.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,u){super.recalculate(i,u),this.paint._values["line-floorwidth"]=Ud.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Gm(i)}queryRadius(i){const u=i,p=gs(Ou("line-width",this,u),Ou("line-gap-width",this,u)),g=Ou("line-offset",this,u);return p/2+Math.abs(g)+kd(this.paint.get("line-translate"))}queryIntersectsFeature(i,u,p,g,S,C,T){const M=Vc(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,T),B=T/2*gs(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),j=this.paint.get("line-offset").evaluate(u,p);return j&&(g=function(H,Y){const te=[];for(let re=0;re<H.length;re++){const ge=H[re],ve=[];for(let pe=0;pe<ge.length;pe++){const Be=ge[pe-1],ke=ge[pe],ze=ge[pe+1],He=pe===0?new A(0,0):ke.sub(Be)._unit()._perp(),et=pe===ge.length-1?new A(0,0):ze.sub(ke)._unit()._perp(),Rt=He._add(et)._unit(),$t=Rt.x*et.x+Rt.y*et.y;$t!==0&&Rt._mult(1/$t),ve.push(Rt._mult(Y)._add(ke))}te.push(ve)}return te}(g,j*T)),function(H,Y,te){for(let re=0;re<Y.length;re++){const ge=Y[re];if(H.length>=3){for(let ve=0;ve<ge.length;ve++)if(jc(H,ge[ve]))return!0}if(Ob(H,ge,te))return!0}return!1}(M,g,B)}isTileClipped(){return!0}}function gs(s,i){return i>0?i+2*s:s}const wo=Or([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zm=Or([{name:"a_projected_pos",components:3,type:"Float32"}],4);Or([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qb=Or([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Or([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jd=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gb=Or([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Hb(s,i,u){return s.sections.forEach(p=>{p.text=function(g,S,C){const T=S.layout.get("text-transform").evaluate(C,{});return T==="uppercase"?g=g.toLocaleUpperCase():T==="lowercase"&&(g=g.toLocaleLowerCase()),Bo.applyArabicShaping&&(g=Bo.applyArabicShaping(g)),g}(p.text,i,u)}),s}Or([{name:"triangle",components:3,type:"Uint16"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Or([{type:"Float32",name:"offsetX"}]),Or([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const nl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ci=24,Km=sr,Q_=function(s,i,u,p,g){var S,C,T=8*g-p-1,M=(1<<T)-1,B=M>>1,j=-7,H=u?g-1:0,Y=u?-1:1,te=s[i+H];for(H+=Y,S=te&(1<<-j)-1,te>>=-j,j+=T;j>0;S=256*S+s[i+H],H+=Y,j-=8);for(C=S&(1<<-j)-1,S>>=-j,j+=p;j>0;C=256*C+s[i+H],H+=Y,j-=8);if(S===0)S=1-B;else{if(S===M)return C?NaN:1/0*(te?-1:1);C+=Math.pow(2,p),S-=B}return(te?-1:1)*C*Math.pow(2,S-p)},e0=function(s,i,u,p,g,S){var C,T,M,B=8*S-g-1,j=(1<<B)-1,H=j>>1,Y=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=p?0:S-1,re=p?1:-1,ge=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,C=j):(C=Math.floor(Math.log(i)/Math.LN2),i*(M=Math.pow(2,-C))<1&&(C--,M*=2),(i+=C+H>=1?Y/M:Y*Math.pow(2,1-H))*M>=2&&(C++,M/=2),C+H>=j?(T=0,C=j):C+H>=1?(T=(i*M-1)*Math.pow(2,g),C+=H):(T=i*Math.pow(2,H-1)*Math.pow(2,g),C=0));g>=8;s[u+te]=255&T,te+=re,T/=256,g-=8);for(C=C<<g|T,B+=g;B>0;s[u+te]=255&C,te+=re,C/=256,B-=8);s[u+te-re]|=128*ge};function sr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}sr.Varint=0,sr.Fixed64=1,sr.Bytes=2,sr.Fixed32=5;var Xm=4294967296,Ym=1/Xm,Jm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function rl(s){return s.type===sr.Bytes?s.readVarint()+s.pos:s.pos+1}function ql(s,i,u){return u?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function Qm(s,i,u){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));u.realloc(p);for(var g=u.pos-1;g>=s;g--)u.buf[g+p]=u.buf[g]}function yf(s,i){for(var u=0;u<s.length;u++)i.writeVarint(s[u])}function eg(s,i){for(var u=0;u<s.length;u++)i.writeSVarint(s[u])}function t0(s,i){for(var u=0;u<s.length;u++)i.writeFloat(s[u])}function n0(s,i){for(var u=0;u<s.length;u++)i.writeDouble(s[u])}function Vd(s,i){for(var u=0;u<s.length;u++)i.writeBoolean(s[u])}function r0(s,i){for(var u=0;u<s.length;u++)i.writeFixed32(s[u])}function ys(s,i){for(var u=0;u<s.length;u++)i.writeSFixed32(s[u])}function zu(s,i){for(var u=0;u<s.length;u++)i.writeFixed64(s[u])}function Wb(s,i){for(var u=0;u<s.length;u++)i.writeSFixed64(s[u])}function _f(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function Kc(s,i,u){s[u]=i,s[u+1]=i>>>8,s[u+2]=i>>>16,s[u+3]=i>>>24}function i0(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}sr.prototype={destroy:function(){this.buf=null},readFields:function(s,i,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),g=p>>3,S=this.pos;this.type=7&p,s(g,i,this),this.pos===S&&this.skip(p)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=_f(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=i0(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=_f(this.buf,this.pos)+_f(this.buf,this.pos+4)*Xm;return this.pos+=8,s},readSFixed64:function(){var s=_f(this.buf,this.pos)+i0(this.buf,this.pos+4)*Xm;return this.pos+=8,s},readFloat:function(){var s=Q_(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Q_(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,u,p=this.buf;return i=127&(u=p[this.pos++]),u<128?i:(i|=(127&(u=p[this.pos++]))<<7,u<128?i:(i|=(127&(u=p[this.pos++]))<<14,u<128?i:(i|=(127&(u=p[this.pos++]))<<21,u<128?i:function(g,S,C){var T,M,B=C.buf;if(T=(112&(M=B[C.pos++]))>>4,M<128||(T|=(127&(M=B[C.pos++]))<<3,M<128)||(T|=(127&(M=B[C.pos++]))<<10,M<128)||(T|=(127&(M=B[C.pos++]))<<17,M<128)||(T|=(127&(M=B[C.pos++]))<<24,M<128)||(T|=(1&(M=B[C.pos++]))<<31,M<128))return ql(g,T,S);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(u=p[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&Jm?function(u,p,g){return Jm.decode(u.subarray(p,g))}(this.buf,i,s):function(u,p,g){for(var S="",C=p;C<g;){var T,M,B,j=u[C],H=null,Y=j>239?4:j>223?3:j>191?2:1;if(C+Y>g)break;Y===1?j<128&&(H=j):Y===2?(192&(T=u[C+1]))==128&&(H=(31&j)<<6|63&T)<=127&&(H=null):Y===3?(M=u[C+2],(192&(T=u[C+1]))==128&&(192&M)==128&&((H=(15&j)<<12|(63&T)<<6|63&M)<=2047||H>=55296&&H<=57343)&&(H=null)):Y===4&&(M=u[C+2],B=u[C+3],(192&(T=u[C+1]))==128&&(192&M)==128&&(192&B)==128&&((H=(15&j)<<18|(63&T)<<12|(63&M)<<6|63&B)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,Y=1):H>65535&&(H-=65536,S+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),S+=String.fromCharCode(H),C+=Y}return S}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==sr.Bytes)return s.push(this.readVarint(i));var u=rl(this);for(s=s||[];this.pos<u;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==sr.Bytes)return s.push(this.readSVarint());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==sr.Bytes)return s.push(this.readBoolean());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==sr.Bytes)return s.push(this.readFloat());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==sr.Bytes)return s.push(this.readDouble());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==sr.Bytes)return s.push(this.readFixed32());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==sr.Bytes)return s.push(this.readSFixed32());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==sr.Bytes)return s.push(this.readFixed64());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==sr.Bytes)return s.push(this.readSFixed64());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===sr.Varint)for(;this.buf[this.pos++]>127;);else if(i===sr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===sr.Fixed32)this.pos+=4;else{if(i!==sr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var u=new Uint8Array(i);u.set(this.buf),this.buf=u,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Kc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Kc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Kc(this.buf,-1&s,this.pos),Kc(this.buf,Math.floor(s*Ym),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Kc(this.buf,-1&s,this.pos),Kc(this.buf,Math.floor(s*Ym),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,u){var p,g;if(i>=0?(p=i%4294967296|0,g=i/4294967296|0):(g=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(S,C,T){T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,T.buf[T.pos]=127&(S>>>=7)}(p,0,u),function(S,C){var T=(7&S)<<4;C.buf[C.pos++]|=T|((S>>>=3)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S)))))}(g,u)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(p,g,S){for(var C,T,M=0;M<g.length;M++){if((C=g.charCodeAt(M))>55295&&C<57344){if(!T){C>56319||M+1===g.length?(p[S++]=239,p[S++]=191,p[S++]=189):T=C;continue}if(C<56320){p[S++]=239,p[S++]=191,p[S++]=189,T=C;continue}C=T-55296<<10|C-56320|65536,T=null}else T&&(p[S++]=239,p[S++]=191,p[S++]=189,T=null);C<128?p[S++]=C:(C<2048?p[S++]=C>>6|192:(C<65536?p[S++]=C>>12|224:(p[S++]=C>>18|240,p[S++]=C>>12&63|128),p[S++]=C>>6&63|128),p[S++]=63&C|128)}return S}(this.buf,s,this.pos);var u=this.pos-i;u>=128&&Qm(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeFloat:function(s){this.realloc(4),e0(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),e0(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var u=0;u<i;u++)this.buf[this.pos++]=s[u]},writeRawMessage:function(s,i){this.pos++;var u=this.pos;s(i,this);var p=this.pos-u;p>=128&&Qm(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(s,i,u){this.writeTag(s,sr.Bytes),this.writeRawMessage(i,u)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,yf,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,eg,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,Vd,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,t0,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,n0,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,r0,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,ys,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,zu,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,Wb,i)},writeBytesField:function(s,i){this.writeTag(s,sr.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,sr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,sr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,sr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,sr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,sr.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,sr.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,sr.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,sr.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,sr.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,!!i)}};var tg=x(Km);const ng=3;function Zb(s,i,u){s===1&&u.readMessage(Kb,i)}function Kb(s,i,u){if(s===3){const{id:p,bitmap:g,width:S,height:C,left:T,top:M,advance:B}=u.readMessage(Xb,{});i.push({id:p,bitmap:new Js({width:S+2*ng,height:C+2*ng},g),metrics:{width:S,height:C,left:T,top:M,advance:B}})}}function Xb(s,i,u){s===1?i.id=u.readVarint():s===2?i.bitmap=u.readBytes():s===3?i.width=u.readVarint():s===4?i.height=u.readVarint():s===5?i.left=u.readSVarint():s===6?i.top=u.readSVarint():s===7&&(i.advance=u.readVarint())}const o0=ng;function a0(s){let i=0,u=0;for(const C of s)i+=C.w*C.h,u=Math.max(u,C.w);s.sort((C,T)=>T.h-C.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let g=0,S=0;for(const C of s)for(let T=p.length-1;T>=0;T--){const M=p[T];if(!(C.w>M.w||C.h>M.h)){if(C.x=M.x,C.y=M.y,S=Math.max(S,C.y+C.h),g=Math.max(g,C.x+C.w),C.w===M.w&&C.h===M.h){const B=p.pop();T<p.length&&(p[T]=B)}else C.h===M.h?(M.x+=C.w,M.w-=C.w):C.w===M.w?(M.y+=C.h,M.h-=C.h):(p.push({x:M.x+C.w,y:M.y,w:M.w-C.w,h:C.h}),M.y+=C.h,M.h-=C.h);break}}return{w:g,h:S,fill:i/(g*S)||0}}const So=1;class rg{constructor(i,{pixelRatio:u,version:p,stretchX:g,stretchY:S,content:C}){this.paddedRect=i,this.pixelRatio=u,this.stretchX=g,this.stretchY=S,this.content=C,this.version=p}get tl(){return[this.paddedRect.x+So,this.paddedRect.y+So]}get br(){return[this.paddedRect.x+this.paddedRect.w-So,this.paddedRect.y+this.paddedRect.h-So]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*So)/this.pixelRatio,(this.paddedRect.h-2*So)/this.pixelRatio]}}class ig{constructor(i,u){const p={},g={};this.haveRenderCallbacks=[];const S=[];this.addImages(i,p,S),this.addImages(u,g,S);const{w:C,h:T}=a0(S),M=new Uo({width:C||1,height:T||1});for(const B in i){const j=i[B],H=p[B].paddedRect;Uo.copy(j.data,M,{x:0,y:0},{x:H.x+So,y:H.y+So},j.data)}for(const B in u){const j=u[B],H=g[B].paddedRect,Y=H.x+So,te=H.y+So,re=j.data.width,ge=j.data.height;Uo.copy(j.data,M,{x:0,y:0},{x:Y,y:te},j.data),Uo.copy(j.data,M,{x:0,y:ge-1},{x:Y,y:te-1},{width:re,height:1}),Uo.copy(j.data,M,{x:0,y:0},{x:Y,y:te+ge},{width:re,height:1}),Uo.copy(j.data,M,{x:re-1,y:0},{x:Y-1,y:te},{width:1,height:ge}),Uo.copy(j.data,M,{x:0,y:0},{x:Y+re,y:te},{width:1,height:ge})}this.image=M,this.iconPositions=p,this.patternPositions=g}addImages(i,u,p){for(const g in i){const S=i[g],C={x:0,y:0,w:S.data.width+2*So,h:S.data.height+2*So};p.push(C),u[g]=new rg(C,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,u){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),u)}patchUpdatedImage(i,u,p){if(!i||!u||i.version===u.version)return;i.version=u.version;const[g,S]=i.tl;p.update(u.data,void 0,{x:g,y:S})}}var il;Bt("ImagePosition",rg),Bt("ImageAtlas",ig),l.WritingMode=void 0,(il=l.WritingMode||(l.WritingMode={}))[il.none=0]="none",il[il.horizontal=1]="horizontal",il[il.vertical=2]="vertical",il[il.horizontalOnly=3]="horizontalOnly";const Xc=-17;class vf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,u){const p=new vf;return p.scale=i||1,p.fontStack=u,p}static forImage(i){const u=new vf;return u.imageName=i,u}}class Yc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u){const p=new Yc;for(let g=0;g<i.sections.length;g++){const S=i.sections[g];S.image?p.addImageSection(S):p.addTextSection(S,u)}return p}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let u="";for(let p=0;p<i.length;p++){const g=i.charCodeAt(p+1)||null,S=i.charCodeAt(p-1)||null;u+=g&&wd(g)&&!nl[i[p+1]]||S&&wd(S)&&!nl[i[p-1]]||!nl[i[p]]?i[p]:nl[i[p]]}return u}(this.text)}trim(){let i=0;for(let p=0;p<this.text.length&&xf[this.text.charCodeAt(p)];p++)i++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=i&&xf[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const p=new Yc;return p.text=this.text.substring(i,u),p.sectionIndex=this.sectionIndex.slice(i,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(vf.forText(i.scale,i.fontStack||u));const p=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(p)}addImageSection(i){const u=i.image?i.image.name:"";if(u.length===0)return void Oe("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(vf.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Oe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qd(s,i,u,p,g,S,C,T,M,B,j,H,Y,te,re,ge){const ve=Yc.fromFeature(s,g);let pe;H===l.WritingMode.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Be,processStyledBidirectionalText:ke}=Bo;if(Be&&ve.sections.length===1){pe=[];const et=Be(ve.toString(),jo(ve,B,S,i,p,te,re));for(const Rt of et){const $t=new Yc;$t.text=Rt,$t.sections=ve.sections;for(let Ft=0;Ft<Rt.length;Ft++)$t.sectionIndex.push(0);pe.push($t)}}else if(ke){pe=[];const et=ke(ve.text,ve.sectionIndex,jo(ve,B,S,i,p,te,re));for(const Rt of et){const $t=new Yc;$t.text=Rt[0],$t.sectionIndex=Rt[1],$t.sections=ve.sections,pe.push($t)}}else pe=function(et,Rt){const $t=[],Ft=et.text;let Pt=0;for(const wt of Rt)$t.push(et.substring(Pt,wt)),Pt=wt;return Pt<Ft.length&&$t.push(et.substring(Pt,Ft.length)),$t}(ve,jo(ve,B,S,i,p,te,re));const ze=[],He={positionedLines:ze,text:ve.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(et,Rt,$t,Ft,Pt,wt,Mt,It,ct,Yt,qt,Ht){let pn=0,br=Xc,hi=0,Vo=0;const uo=It==="right"?1:It==="left"?0:.5;let Br=0;for(const $r of Pt){$r.trim();const fi=$r.getMaxScale(),Di=(fi-1)*ci,Ti={positionedGlyphs:[],lineOffset:0};et.positionedLines[Br]=Ti;const Cr=Ti.positionedGlyphs;let xi=0;if(!$r.length()){br+=wt,++Br;continue}for(let zi=0;zi<$r.length();zi++){const Tn=$r.getSection(zi),qo=$r.getSectionIndex(zi),Bi=$r.getCharCode(zi);let $i=0,bi=null,hn=null,Sa=null,wi=ci;const ra=!(ct===l.WritingMode.horizontal||!qt&&!Pc(Bi)||qt&&(xf[Bi]||(_i=Bi,ht.Arabic(_i)||ht["Arabic Supplement"](_i)||ht["Arabic Extended-A"](_i)||ht["Arabic Presentation Forms-A"](_i)||ht["Arabic Presentation Forms-B"](_i))));if(Tn.imageName){const ia=Ft[Tn.imageName];if(!ia)continue;Sa=Tn.imageName,et.iconsInText=et.iconsInText||!0,hn=ia.paddedRect;const Cn=ia.displaySize;Tn.scale=Tn.scale*ci/Ht,bi={width:Cn[0],height:Cn[1],left:So,top:-o0,advance:ra?Cn[1]:Cn[0]},$i=Di+(ci-Cn[1]*Tn.scale),wi=bi.advance;const ol=ra?Cn[0]*Tn.scale-ci*fi:Cn[1]*Tn.scale-ci*fi;ol>0&&ol>xi&&(xi=ol)}else{const ia=$t[Tn.fontStack],Cn=ia&&ia[Bi];if(Cn&&Cn.rect)hn=Cn.rect,bi=Cn.metrics;else{const ol=Rt[Tn.fontStack],rh=ol&&ol[Bi];if(!rh)continue;bi=rh.metrics}$i=(fi-Tn.scale)*ci}ra?(et.verticalizable=!0,Cr.push({glyph:Bi,imageName:Sa,x:pn,y:br+$i,vertical:ra,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:qo,metrics:bi,rect:hn}),pn+=wi*Tn.scale+Yt):(Cr.push({glyph:Bi,imageName:Sa,x:pn,y:br+$i,vertical:ra,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:qo,metrics:bi,rect:hn}),pn+=bi.advance*Tn.scale+Yt)}Cr.length!==0&&(hi=Math.max(pn-Yt,hi),Qb(Cr,0,Cr.length-1,uo,xi)),pn=0;const Nr=wt*fi+xi;Ti.lineOffset=Math.max(xi,Di),br+=Nr,Vo=Math.max(Nr,Vo),++Br}var _i;const Ri=br-Xc,{horizontalAlign:co,verticalAlign:vi}=og(Mt);(function($r,fi,Di,Ti,Cr,xi,Nr,zi,Tn){const qo=(fi-Di)*Cr;let Bi=0;Bi=xi!==Nr?-zi*Ti-Xc:(-Ti*Tn+.5)*Nr;for(const $i of $r)for(const bi of $i.positionedGlyphs)bi.x+=qo,bi.y+=Bi})(et.positionedLines,uo,co,vi,hi,Vo,wt,Ri,Pt.length),et.top+=-vi*Ri,et.bottom=et.top+Ri,et.left+=-co*hi,et.right=et.left+hi}(He,i,u,p,pe,C,T,M,H,B,Y,ge),!function(et){for(const Rt of et)if(Rt.positionedGlyphs.length!==0)return!1;return!0}(ze)&&He}const xf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function s0(s,i,u,p,g,S){if(i.imageName){const C=p[i.imageName];return C?C.displaySize[0]*i.scale*ci/S+g:0}{const C=u[i.fontStack],T=C&&C[s];return T?T.metrics.advance*i.scale+g:0}}function l0(s,i,u,p){const g=Math.pow(s-i,2);return p?s<i?g/2:2*g:g+Math.abs(u)*u}function Jb(s,i,u){let p=0;return s===10&&(p-=1e4),u&&(p+=150),s!==40&&s!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function u0(s,i,u,p,g,S){let C=null,T=l0(i,u,g,S);for(const M of p){const B=l0(i-M.x,u,g,S)+M.badness;B<=T&&(C=M,T=B)}return{index:s,x:i,priorBreak:C,badness:T}}function c0(s){return s?c0(s.priorBreak).concat(s.index):[]}function jo(s,i,u,p,g,S,C){if(S!=="point")return[];if(!s)return[];const T=[],M=function(Y,te,re,ge,ve,pe){let Be=0;for(let ke=0;ke<Y.length();ke++){const ze=Y.getSection(ke);Be+=s0(Y.getCharCode(ke),ze,ge,ve,te,pe)}return Be/Math.max(1,Math.ceil(Be/re))}(s,i,u,p,g,C),B=s.text.indexOf("")>=0;let j=0;for(let Y=0;Y<s.length();Y++){const te=s.getSection(Y),re=s.getCharCode(Y);if(xf[re]||(j+=s0(re,te,p,g,i,C)),Y<s.length()-1){const ge=!((H=re)<11904||!(ht["Bopomofo Extended"](H)||ht.Bopomofo(H)||ht["CJK Compatibility Forms"](H)||ht["CJK Compatibility Ideographs"](H)||ht["CJK Compatibility"](H)||ht["CJK Radicals Supplement"](H)||ht["CJK Strokes"](H)||ht["CJK Symbols and Punctuation"](H)||ht["CJK Unified Ideographs Extension A"](H)||ht["CJK Unified Ideographs"](H)||ht["Enclosed CJK Letters and Months"](H)||ht["Halfwidth and Fullwidth Forms"](H)||ht.Hiragana(H)||ht["Ideographic Description Characters"](H)||ht["Kangxi Radicals"](H)||ht["Katakana Phonetic Extensions"](H)||ht.Katakana(H)||ht["Vertical Forms"](H)||ht["Yi Radicals"](H)||ht["Yi Syllables"](H)));(Yb[re]||ge||te.imageName)&&T.push(u0(Y+1,j,M,T,Jb(re,s.getCharCode(Y+1),ge&&B),!1))}}var H;return c0(u0(s.length(),j,M,T,0,!0))}function og(s){let i=.5,u=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function Qb(s,i,u,p,g){if(!p&&!g)return;const S=s[u],C=(s[u].x+S.metrics.advance*S.scale)*p;for(let T=i;T<=u;T++)s[T].x-=C,s[T].y+=g}function ew(s,i,u){const{horizontalAlign:p,verticalAlign:g}=og(u),S=i[0]-s.displaySize[0]*p,C=i[1]-s.displaySize[1]*g;return{image:s,top:C,bottom:C+s.displaySize[1],left:S,right:S+s.displaySize[0]}}function ag(s,i,u,p,g,S){const C=s.image;let T;if(C.content){const ve=C.content,pe=C.pixelRatio||1;T=[ve[0]/pe,ve[1]/pe,C.displaySize[0]-ve[2]/pe,C.displaySize[1]-ve[3]/pe]}const M=i.left*S,B=i.right*S;let j,H,Y,te;u==="width"||u==="both"?(te=g[0]+M-p[3],H=g[0]+B+p[1]):(te=g[0]+(M+B-C.displaySize[0])/2,H=te+C.displaySize[0]);const re=i.top*S,ge=i.bottom*S;return u==="height"||u==="both"?(j=g[1]+re-p[0],Y=g[1]+ge+p[2]):(j=g[1]+(re+ge-C.displaySize[1])/2,Y=j+C.displaySize[1]),{image:C,top:j,right:H,bottom:Y,left:te,collisionPadding:T}}const bf=255,_s=128,Gl=bf*_s;function h0(s,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Sr(s+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:g}=u;let S=0;for(;S<p.length&&p[S]<=s;)S++;S=Math.max(0,S-1);let C=S;for(;C<p.length&&p[C]<s+1;)C++;C=Math.min(p.length-1,C);const T=p[S],M=p[C];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:g}:{kind:"camera",minZoom:T,maxZoom:M,minSize:u.evaluate(new Sr(T)),maxSize:u.evaluate(new Sr(M)),interpolationType:g}}}function wf(s,i,u){let p="never";const g=s.get(i);return g?p=g:s.get(u)&&(p="always"),p}const tw=Na.VectorTileFeature.types,nw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gd(s,i,u,p,g,S,C,T,M,B,j,H,Y){const te=T?Math.min(Gl,Math.round(T[0])):0,re=T?Math.min(Gl,Math.round(T[1])):0;s.emplaceBack(i,u,Math.round(32*p),Math.round(32*g),S,C,(te<<1)+(M?1:0),re,16*B,16*j,256*H,256*Y)}function sg(s,i,u){s.emplaceBack(i.x,i.y,u),s.emplaceBack(i.x,i.y,u),s.emplaceBack(i.x,i.y,u),s.emplaceBack(i.x,i.y,u)}function rw(s){for(const i of s.sections)if(Da(i.text))return!0;return!1}class lg{constructor(i){this.layoutVertexArray=new Ue,this.indexArray=new it,this.programConfigurations=i,this.segments=new _t,this.dynamicLayoutVertexArray=new Ze,this.opacityVertexArray=new Ke,this.hasVisibleVertices=!1,this.placedSymbolArray=new P}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,u,p,g){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wo.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Zm.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,nw,!0),this.opacityVertexBuffer.itemSize=1),(p||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",lg);class ug{constructor(i,u,p){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new p,this.segments=new _t,this.collisionVertexArray=new ut}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,qb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",ug);class Jc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(C=>C.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ad([]),this.placementViewportMatrix=Ad([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=h0(this.zoom,u["text-size"]),this.iconSizeData=h0(this.zoom,u["icon-size"]);const p=this.layers[0].layout,g=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=wf(p,"text-overlap","text-allow-overlap")!=="never"||wf(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(C=>l.WritingMode[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=i.sourceID}createArrays(){this.text=new lg(new ba(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new lg(new ba(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new D,this.lineVertexArray=new U,this.symbolInstances=new O}calculateGlyphDependencies(i,u,p,g,S){for(let C=0;C<i.length;C++)if(u[i.charCodeAt(C)]=!0,(p||g)&&S){const T=nl[i.charAt(C)];T&&(u[T.charCodeAt(0)]=!0)}}populate(i,u,p){const g=this.layers[0],S=g.layout,C=S.get("text-font"),T=S.get("text-field"),M=S.get("icon-image"),B=(T.value.kind!=="constant"||T.value.value instanceof pr&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),j=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,H=S.get("symbol-sort-key");if(this.features=[],!B&&!j)return;const Y=u.iconDependencies,te=u.glyphDependencies,re=u.availableImages,ge=new Sr(this.zoom);for(const{feature:ve,id:pe,index:Be,sourceLayerIndex:ke}of i){const ze=g._featureFilter.needGeometry,He=Lu(ve,ze);if(!g._featureFilter.filter(ge,He,p))continue;let et,Rt;if(ze||(He.geometry=ea(ve)),B){const Ft=g.getValueAndResolveTokens("text-field",He,p,re),Pt=pr.factory(Ft);rw(Pt)&&(this.hasRTLText=!0),(!this.hasRTLText||Dl()==="unavailable"||this.hasRTLText&&Bo.isParsed())&&(et=Hb(Pt,g,He))}if(j){const Ft=g.getValueAndResolveTokens("icon-image",He,p,re);Rt=Ft instanceof Fo?Ft:Fo.fromString(Ft)}if(!et&&!Rt)continue;const $t=this.sortFeaturesByKey?H.evaluate(He,{},p):void 0;if(this.features.push({id:pe,text:et,icon:Rt,index:Be,sourceLayerIndex:ke,geometry:He.geometry,properties:ve.properties,type:tw[ve.type],sortKey:$t}),Rt&&(Y[Rt.name]=!0),et){const Ft=C.evaluate(He,{},p).join(","),Pt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const wt of et.sections)if(wt.image)Y[wt.image.name]=!0;else{const Mt=Ac(et.toString()),It=wt.fontStack||Ft,ct=te[It]=te[It]||{};this.calculateGlyphDependencies(wt.text,ct,Pt,this.allowVerticalPlacement,Mt)}}}S.get("symbol-placement")==="line"&&(this.features=function(ve){const pe={},Be={},ke=[];let ze=0;function He(Ft){ke.push(ve[Ft]),ze++}function et(Ft,Pt,wt){const Mt=Be[Ft];return delete Be[Ft],Be[Pt]=Mt,ke[Mt].geometry[0].pop(),ke[Mt].geometry[0]=ke[Mt].geometry[0].concat(wt[0]),Mt}function Rt(Ft,Pt,wt){const Mt=pe[Pt];return delete pe[Pt],pe[Ft]=Mt,ke[Mt].geometry[0].shift(),ke[Mt].geometry[0]=wt[0].concat(ke[Mt].geometry[0]),Mt}function $t(Ft,Pt,wt){const Mt=wt?Pt[0][Pt[0].length-1]:Pt[0][0];return`${Ft}:${Mt.x}:${Mt.y}`}for(let Ft=0;Ft<ve.length;Ft++){const Pt=ve[Ft],wt=Pt.geometry,Mt=Pt.text?Pt.text.toString():null;if(!Mt){He(Ft);continue}const It=$t(Mt,wt),ct=$t(Mt,wt,!0);if(It in Be&&ct in pe&&Be[It]!==pe[ct]){const Yt=Rt(It,ct,wt),qt=et(It,ct,ke[Yt].geometry);delete pe[It],delete Be[ct],Be[$t(Mt,ke[qt].geometry,!0)]=qt,ke[Yt].geometry=null}else It in Be?et(It,ct,wt):ct in pe?Rt(It,ct,wt):(He(Ft),pe[It]=ze-1,Be[ct]=ze-1)}return ke.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,pe)=>ve.sortKey-pe.sortKey)}update(i,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(i,u,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const p=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(u[i.segment+1]),S=i.dist(u[i.segment]);const C={};for(let T=i.segment+1;T<u.length;T++)C[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:g},T<u.length-1&&(g+=u[T+1].dist(u[T]));for(let T=i.segment||0;T>=0;T--)C[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:S},T>0&&(S+=u[T-1].dist(u[T]));for(let T=0;T<u.length;T++){const M=C[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,u,p,g,S,C,T,M,B,j,H,Y){const te=i.indexArray,re=i.layoutVertexArray,ge=i.segments.prepareSegment(4*u.length,re,te,this.canOverlap?C.sortKey:void 0),ve=this.glyphOffsetArray.length,pe=ge.vertexLength,Be=this.allowVerticalPlacement&&T===l.WritingMode.vertical?Math.PI/2:0,ke=C.text&&C.text.sections;for(let ze=0;ze<u.length;ze++){const{tl:He,tr:et,bl:Rt,br:$t,tex:Ft,pixelOffsetTL:Pt,pixelOffsetBR:wt,minFontScaleX:Mt,minFontScaleY:It,glyphOffset:ct,isSDF:Yt,sectionIndex:qt}=u[ze],Ht=ge.vertexLength,pn=ct[1];Gd(re,M.x,M.y,He.x,pn+He.y,Ft.x,Ft.y,p,Yt,Pt.x,Pt.y,Mt,It),Gd(re,M.x,M.y,et.x,pn+et.y,Ft.x+Ft.w,Ft.y,p,Yt,wt.x,Pt.y,Mt,It),Gd(re,M.x,M.y,Rt.x,pn+Rt.y,Ft.x,Ft.y+Ft.h,p,Yt,Pt.x,wt.y,Mt,It),Gd(re,M.x,M.y,$t.x,pn+$t.y,Ft.x+Ft.w,Ft.y+Ft.h,p,Yt,wt.x,wt.y,Mt,It),sg(i.dynamicLayoutVertexArray,M,Be),te.emplaceBack(Ht,Ht+1,Ht+2),te.emplaceBack(Ht+1,Ht+2,Ht+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),ze!==u.length-1&&qt===u[ze+1].sectionIndex||i.programConfigurations.populatePaintArrays(re.length,C,C.index,{},Y,ke&&ke[qt])}i.placedSymbolArray.emplaceBack(M.x,M.y,ve,this.glyphOffsetArray.length-ve,pe,B,j,M.segment,p?p[0]:0,p?p[1]:0,g[0],g[1],T,0,!1,0,H)}_addCollisionDebugVertex(i,u,p,g,S,C){return u.emplaceBack(0,0),i.emplaceBack(p.x,p.y,g,S,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(i,u,p,g,S,C,T){const M=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),B=M.vertexLength,j=S.layoutVertexArray,H=S.collisionVertexArray,Y=T.anchorX,te=T.anchorY;this._addCollisionDebugVertex(j,H,C,Y,te,new A(i,u)),this._addCollisionDebugVertex(j,H,C,Y,te,new A(p,u)),this._addCollisionDebugVertex(j,H,C,Y,te,new A(p,g)),this._addCollisionDebugVertex(j,H,C,Y,te,new A(i,g)),M.vertexLength+=4;const re=S.indexArray;re.emplaceBack(B,B+1),re.emplaceBack(B+1,B+2),re.emplaceBack(B+2,B+3),re.emplaceBack(B+3,B),M.primitiveLength+=4}addDebugCollisionBoxes(i,u,p,g){for(let S=i;S<u;S++){const C=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,g?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ug(tt,jd.members,Et),this.iconCollisionBox=new ug(tt,jd.members,Et);for(let i=0;i<this.symbolInstances.length;i++){const u=this.symbolInstances.get(i);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(i,u,p,g,S,C,T,M,B){const j={};for(let H=u;H<p;H++){const Y=i.get(H);j.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.textFeatureIndex=Y.featureIndex;break}for(let H=g;H<S;H++){const Y=i.get(H);j.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.verticalTextFeatureIndex=Y.featureIndex;break}for(let H=C;H<T;H++){const Y=i.get(H);j.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.iconFeatureIndex=Y.featureIndex;break}for(let H=M;H<B;H++){const Y=i.get(H);j.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.verticalIconFeatureIndex=Y.featureIndex;break}return j}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,u){const p=i.placedSymbolArray.get(u),g=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<g;S+=4)i.indexArray.emplaceBack(S,S+1,S+2),i.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),p=Math.cos(i),g=[],S=[],C=[];for(let T=0;T<this.symbolInstances.length;++T){C.push(T);const M=this.symbolInstances.get(T);g.push(0|Math.round(u*M.anchorX+p*M.anchorY)),S.push(M.featureIndex)}return C.sort((T,M)=>g[T]-g[M]||S[M]-S[T]),C}addToSortKeyRanges(i,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((g,S,C)=>{g>=0&&C.indexOf(g)===S&&this.addIndicesForPlacedSymbol(this.text,g)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let f0,d0;Bt("SymbolBucket",Jc,{omit:["layers","collisionBoxArray","features","compareText"]}),Jc.MAX_GLYPHS=65535,Jc.addDynamicAttributes=sg;var cg={get paint(){return d0=d0||new Mi({"icon-opacity":new en(Je.paint_symbol["icon-opacity"]),"icon-color":new en(Je.paint_symbol["icon-color"]),"icon-halo-color":new en(Je.paint_symbol["icon-halo-color"]),"icon-halo-width":new en(Je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new en(Je.paint_symbol["icon-halo-blur"]),"icon-translate":new Lt(Je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lt(Je.paint_symbol["icon-translate-anchor"]),"text-opacity":new en(Je.paint_symbol["text-opacity"]),"text-color":new en(Je.paint_symbol["text-color"],{runtimeType:vn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new en(Je.paint_symbol["text-halo-color"]),"text-halo-width":new en(Je.paint_symbol["text-halo-width"]),"text-halo-blur":new en(Je.paint_symbol["text-halo-blur"]),"text-translate":new Lt(Je.paint_symbol["text-translate"]),"text-translate-anchor":new Lt(Je.paint_symbol["text-translate-anchor"])})},get layout(){return f0=f0||new Mi({"symbol-placement":new Lt(Je.layout_symbol["symbol-placement"]),"symbol-spacing":new Lt(Je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lt(Je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new en(Je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lt(Je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lt(Je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Lt(Je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Lt(Je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lt(Je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lt(Je.layout_symbol["icon-rotation-alignment"]),"icon-size":new en(Je.layout_symbol["icon-size"]),"icon-text-fit":new Lt(Je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lt(Je.layout_symbol["icon-text-fit-padding"]),"icon-image":new en(Je.layout_symbol["icon-image"]),"icon-rotate":new en(Je.layout_symbol["icon-rotate"]),"icon-padding":new en(Je.layout_symbol["icon-padding"]),"icon-keep-upright":new Lt(Je.layout_symbol["icon-keep-upright"]),"icon-offset":new en(Je.layout_symbol["icon-offset"]),"icon-anchor":new en(Je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lt(Je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lt(Je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lt(Je.layout_symbol["text-rotation-alignment"]),"text-field":new en(Je.layout_symbol["text-field"]),"text-font":new en(Je.layout_symbol["text-font"]),"text-size":new en(Je.layout_symbol["text-size"]),"text-max-width":new en(Je.layout_symbol["text-max-width"]),"text-line-height":new Lt(Je.layout_symbol["text-line-height"]),"text-letter-spacing":new en(Je.layout_symbol["text-letter-spacing"]),"text-justify":new en(Je.layout_symbol["text-justify"]),"text-radial-offset":new en(Je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lt(Je.layout_symbol["text-variable-anchor"]),"text-anchor":new en(Je.layout_symbol["text-anchor"]),"text-max-angle":new Lt(Je.layout_symbol["text-max-angle"]),"text-writing-mode":new Lt(Je.layout_symbol["text-writing-mode"]),"text-rotate":new en(Je.layout_symbol["text-rotate"]),"text-padding":new Lt(Je.layout_symbol["text-padding"]),"text-keep-upright":new Lt(Je.layout_symbol["text-keep-upright"]),"text-transform":new en(Je.layout_symbol["text-transform"]),"text-offset":new en(Je.layout_symbol["text-offset"]),"text-allow-overlap":new Lt(Je.layout_symbol["text-allow-overlap"]),"text-overlap":new Lt(Je.layout_symbol["text-overlap"]),"text-ignore-placement":new Lt(Je.layout_symbol["text-ignore-placement"]),"text-optional":new Lt(Je.layout_symbol["text-optional"])})}};class p0{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Fe,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",p0,{omit:["defaultValue"]});class Hd extends $o{constructor(i){super(i,cg)}recalculate(i,u){if(super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const g=[];for(const S of p)g.indexOf(S)<0&&g.push(S);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,u,p,g){const S=this.layout.get(i).evaluate(u,{},p,g),C=this._unevaluatedLayout._values[i];return C.isDataDriven()||mu(C.value)||!S?S:function(T,M){return M.replace(/{([^{}]+)}/g,(B,j)=>j in T?String(T[j]):"")}(u.properties,S)}createBucket(i){return new Jc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of cg.paint.overridableProperties){if(!Hd.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),p=new p0(u),g=new tf(p,u.property.specification);let S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new hr("source",g):new nf("composite",g,u.value.zoomStops),this.paint._values[i]=new ya(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&Hd.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const p=i.get("text-field"),g=cg.paint.properties[u];let S=!1;const C=T=>{for(const M of T)if(g.overrides&&g.overrides.hasOverride(M))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof pr)C(p.value.value.sections);else if(p.value.kind==="source"){const T=B=>{S||(B instanceof is&&jr(B.value)===jn?C(B.value.sections):B instanceof Wi?C(B.sections):B.eachChild(T))},M=p.value;M._styleExpression&&T(M._styleExpression.expression)}return S}}let m0;var iw={get paint(){return m0=m0||new Mi({"background-color":new Lt(Je.paint_background["background-color"]),"background-pattern":new Oc(Je.paint_background["background-pattern"]),"background-opacity":new Lt(Je.paint_background["background-opacity"])})}};class ow extends $o{constructor(i){super(i,iw)}}let g0;var aw={get paint(){return g0=g0||new Mi({"raster-opacity":new Lt(Je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lt(Je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lt(Je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lt(Je.paint_raster["raster-brightness-max"]),"raster-saturation":new Lt(Je.paint_raster["raster-saturation"]),"raster-contrast":new Lt(Je.paint_raster["raster-contrast"]),"raster-resampling":new Lt(Je.paint_raster["raster-resampling"]),"raster-fade-duration":new Lt(Je.paint_raster["raster-fade-duration"])})}};class sw extends $o{constructor(i){super(i,aw)}}class lw extends $o{constructor(i){super(i,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class hg{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Wd=63710088e-1;class Hl{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Hl(q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,p=this.lat*u,g=i.lat*u,S=Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos((i.lng-this.lng)*u);return Wd*Math.acos(Math.min(S,1))}static convert(i){if(i instanceof Hl)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Hl(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Hl(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const y0=2*Math.PI*Wd;function _0(s){return y0*Math.cos(s*Math.PI/180)}function v0(s){return(180+s)/360}function x0(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function b0(s,i){return s/_0(i)}function fg(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Zd{constructor(i,u,p=0){this.x=+i,this.y=+u,this.z=+p}static fromLngLat(i,u=0){const p=Hl.convert(i);return new Zd(v0(p.lng),x0(p.lat),b0(u,p.lat))}toLngLat(){return new Hl(360*this.x-180,fg(this.y))}toAltitude(){return this.z*_0(fg(this.y))}meterInMercatorCoordinateUnits(){return 1/y0*(i=fg(this.y),1/Math.cos(i*Math.PI/180));var i}}function dg(s,i,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[s*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class pg{constructor(i,u,p){if(i<0||i>25||p<0||p>=Math.pow(2,i)||u<0||u>=Math.pow(2,i))throw new Error(`x=${u}, y=${p}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=u,this.y=p,this.key=Cf(0,i,i,u,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u,p){const g=(C=this.y,T=this.z,M=dg(256*(S=this.x),256*(C=Math.pow(2,T)-C-1),T),B=dg(256*(S+1),256*(C+1),T),M[0]+","+M[1]+","+B[0]+","+B[1]);var S,C,T,M,B;const j=function(H,Y,te){let re,ge="";for(let ve=H;ve>0;ve--)re=1<<ve-1,ge+=(Y&re?1:0)+(te&re?2:0);return ge}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const u=this.z-i.z;return u>0&&i.x===this.x>>u&&i.y===this.y>>u}getTilePoint(i){const u=Math.pow(2,this.z);return new A((i.x*u-this.x)*xr,(i.y*u-this.y)*xr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Sf{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Cf(i,u.z,u.z,u.x,u.y)}}class na{constructor(i,u,p,g,S){if(i<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${p}`);this.overscaledZ=i,this.wrap=u,this.canonical=new pg(p,+g,+S),this.key=Cf(u,i,p,g,S)}clone(){return new na(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-i;return i>this.canonical.z?new na(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new na(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-i;return i>this.canonical.z?Cf(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y):Cf(this.wrap*+u,i,i,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,g=2*this.canonical.y;return[new na(u,this.wrap,u,p,g),new na(u,this.wrap,u,p+1,g),new na(u,this.wrap,u,p,g+1),new na(u,this.wrap,u,p+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new na(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Sf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Zd(i.x-this.wrap,i.y))}}function Cf(s,i,u,p,g){(s*=2)<0&&(s=-1*s-1);const S=1<<u;return(S*S*s+S*g+p).toString(36)+u.toString(36)+i.toString(36)}Bt("CanonicalTileID",pg),Bt("OverscaledTileID",na,{omit:["posMatrix"]});class w0{constructor(i,u,p){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void Oe(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const g=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=p||"mapbox";for(let S=0;S<g;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(g,S)]=this.data[this._idx(g-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,g)]=this.data[this._idx(S,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<g;S++)for(let C=0;C<g;C++){const T=this.get(S,C);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(i,u){const p=new Uint8Array(this.data.buffer),g=4*this._idx(i,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(p[g],p[g+1],p[g+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}_unpackMapbox(i,u,p){return(256*i*256+256*u+p)/10-1e4}_unpackTerrarium(i,u,p){return 256*i+u+p/256-32768}getPixels(){return new Uo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,u,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,S=u*this.dim+this.dim,C=p*this.dim,T=p*this.dim+this.dim;switch(u){case-1:g=S-1;break;case 1:S=g+1}switch(p){case-1:C=T-1;break;case 1:T=C+1}const M=-u*this.dim,B=-p*this.dim;for(let j=C;j<T;j++)for(let H=g;H<S;H++)this.data[this._idx(H,j)]=i.data[this._idx(H+M,j+B)]}}Bt("DEMData",w0);class S0{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const p=i[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class C0{constructor(i,u,p,g,S){this.type="Feature",this._vectorTileFeature=i,i._z=u,i._x=p,i._y=g,this.properties=i.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(i[u]=this[u]);return i}}class E0{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Cu(xr,16,0),this.grid3D=new Cu(xr,16,0),this.featureIndexArray=new ne,this.promoteId=u}insert(i,u,p,g,S,C){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,g,S);const M=C?this.grid3D:this.grid;for(let B=0;B<u.length;B++){const j=u[B],H=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<j.length;Y++){const te=j[Y];H[0]=Math.min(H[0],te.x),H[1]=Math.min(H[1],te.y),H[2]=Math.max(H[2],te.x),H[3]=Math.max(H[3],te.y)}H[0]<xr&&H[1]<xr&&H[2]>=0&&H[3]>=0&&M.insert(T,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Na.VectorTile(new tg(this.rawTileData)).layers,this.sourceLayerCoder=new S0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,u,p,g){this.loadVTLayers();const S=i.params||{},C=xr/i.tileSize/i.scale,T=xc(S.filter),M=i.queryGeometry,B=i.queryPadding*C,j=A0(M),H=this.grid.query(j.minX-B,j.minY-B,j.maxX+B,j.maxY+B),Y=A0(i.cameraQueryGeometry),te=this.grid3D.query(Y.minX-B,Y.minY-B,Y.maxX+B,Y.maxY+B,(ve,pe,Be,ke)=>function(ze,He,et,Rt,$t){for(const Pt of ze)if(He<=Pt.x&&et<=Pt.y&&Rt>=Pt.x&&$t>=Pt.y)return!0;const Ft=[new A(He,et),new A(He,$t),new A(Rt,$t),new A(Rt,et)];if(ze.length>2){for(const Pt of Ft)if(jc(ze,Pt))return!0}for(let Pt=0;Pt<ze.length-1;Pt++)if(P_(ze[Pt],ze[Pt+1],Ft))return!0;return!1}(i.cameraQueryGeometry,ve-B,pe-B,Be+B,ke+B));for(const ve of te)H.push(ve);H.sort(uw);const re={};let ge;for(let ve=0;ve<H.length;ve++){const pe=H[ve];if(pe===ge)continue;ge=pe;const Be=this.featureIndexArray.get(pe);let ke=null;this.loadMatchingFeature(re,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,T,S.layers,S.availableImages,u,p,g,(ze,He,et)=>(ke||(ke=ea(ze)),He.queryIntersectsFeature(M,ze,et,ke,this.z,i.transform,C,i.pixelPosMatrix)))}return re}loadMatchingFeature(i,u,p,g,S,C,T,M,B,j,H){const Y=this.bucketLayerIDs[u];if(C&&!function(ve,pe){for(let Be=0;Be<ve.length;Be++)if(pe.indexOf(ve[Be])>=0)return!0;return!1}(C,Y))return;const te=this.sourceLayerCoder.decode(p),re=this.vtLayers[te].feature(g);if(S.needGeometry){const ve=Lu(re,!0);if(!S.filter(new Sr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!S.filter(new Sr(this.tileID.overscaledZ),re))return;const ge=this.getId(re,te);for(let ve=0;ve<Y.length;ve++){const pe=Y[ve];if(C&&C.indexOf(pe)<0)continue;const Be=M[pe];if(!Be)continue;let ke={};ge&&j&&(ke=j.getState(Be.sourceLayer||"_geojsonTileLayer",ge));const ze=G({},B[pe]);ze.paint=k0(ze.paint,Be.paint,re,ke,T),ze.layout=k0(ze.layout,Be.layout,re,ke,T);const He=!H||H(re,Be,ke);if(!He)continue;const et=new C0(re,this.z,this.x,this.y,ge);et.layer=ze;let Rt=i[pe];Rt===void 0&&(Rt=i[pe]=[]),Rt.push({featureIndex:g,feature:et,intersectionZ:He})}}lookupSymbolFeatures(i,u,p,g,S,C,T,M){const B={};this.loadVTLayers();const j=xc(S);for(const H of i)this.loadMatchingFeature(B,p,g,H,j,C,T,M,u);return B}hasLayer(i){for(const u of this.bucketLayerIDs)for(const p of u)if(i===p)return!0;return!1}getId(i,u){let p=i.id;return this.promoteId&&(p=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof p=="boolean"&&(p=Number(p))),p}}function k0(s,i,u,p,g){return se(s,(S,C)=>{const T=i instanceof zr?i.get(C):null;return T&&T.evaluate?T.evaluate(u,p,g):T})}function A0(s){let i=1/0,u=1/0,p=-1/0,g=-1/0;for(const S of s)i=Math.min(i,S.x),u=Math.min(u,S.y),p=Math.max(p,S.x),g=Math.max(g,S.y);return{minX:i,minY:u,maxX:p,maxY:g}}function uw(s,i){return i-s}function T0(s,i,u,p,g){const S=[];for(let C=0;C<s.length;C++){const T=s[C];let M;for(let B=0;B<T.length-1;B++){let j=T[B],H=T[B+1];j.x<i&&H.x<i||(j.x<i?j=new A(i,j.y+(i-j.x)/(H.x-j.x)*(H.y-j.y))._round():H.x<i&&(H=new A(i,j.y+(i-j.x)/(H.x-j.x)*(H.y-j.y))._round()),j.y<u&&H.y<u||(j.y<u?j=new A(j.x+(u-j.y)/(H.y-j.y)*(H.x-j.x),u)._round():H.y<u&&(H=new A(j.x+(u-j.y)/(H.y-j.y)*(H.x-j.x),u)._round()),j.x>=p&&H.x>=p||(j.x>=p?j=new A(p,j.y+(p-j.x)/(H.x-j.x)*(H.y-j.y))._round():H.x>=p&&(H=new A(p,j.y+(p-j.x)/(H.x-j.x)*(H.y-j.y))._round()),j.y>=g&&H.y>=g||(j.y>=g?j=new A(j.x+(g-j.y)/(H.y-j.y)*(H.x-j.x),g)._round():H.y>=g&&(H=new A(j.x+(g-j.y)/(H.y-j.y)*(H.x-j.x),g)._round()),M&&j.equals(M[M.length-1])||(M=[j],S.push(M)),M.push(H)))))}}return S}Bt("FeatureIndex",E0,{omit:["rawTileData","sourceLayerCoder"]});class Wl extends A{constructor(i,u,p,g){super(i,u),this.angle=p,g!==void 0&&(this.segment=g)}clone(){return new Wl(this.x,this.y,this.angle,this.segment)}}function P0(s,i,u,p,g){if(i.segment===void 0||u===0)return!0;let S=i,C=i.segment+1,T=0;for(;T>-u/2;){if(C--,C<0)return!1;T-=s[C].dist(S),S=s[C]}T+=s[C].dist(s[C+1]),C++;const M=[];let B=0;for(;T<u/2;){const j=s[C],H=s[C+1];if(!H)return!1;let Y=s[C-1].angleTo(j)-j.angleTo(H);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:Y}),B+=Y;T-M[0].distance>p;)B-=M.shift().angleDelta;if(B>g)return!1;C++,T+=j.dist(H)}return!0}function I0(s){let i=0;for(let u=0;u<s.length-1;u++)i+=s[u].dist(s[u+1]);return i}function M0(s,i,u){return s?.6*i*u:0}function L0(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function cw(s,i,u,p,g,S){const C=M0(u,g,S),T=L0(u,p)*S;let M=0;const B=I0(s)/2;for(let j=0;j<s.length-1;j++){const H=s[j],Y=s[j+1],te=H.dist(Y);if(M+te>B){const re=(B-M)/te,ge=Hi.number(H.x,Y.x,re),ve=Hi.number(H.y,Y.y,re),pe=new Wl(ge,ve,Y.angleTo(H),j);return pe._round(),!C||P0(s,pe,T,C,i)?pe:void 0}M+=te}}function O0(s,i,u,p,g,S,C,T,M){const B=M0(p,S,C),j=L0(p,g),H=j*C,Y=s[0].x===0||s[0].x===M||s[0].y===0||s[0].y===M;return i-H<i/4&&(i=H+i/4),mg(s,Y?i/2*T%i:(j/2+2*S)*C*T%i,i,B,u,H,Y,!1,M)}function mg(s,i,u,p,g,S,C,T,M){const B=S/2,j=I0(s);let H=0,Y=i-u,te=[];for(let re=0;re<s.length-1;re++){const ge=s[re],ve=s[re+1],pe=ge.dist(ve),Be=ve.angleTo(ge);for(;Y+u<H+pe;){Y+=u;const ke=(Y-H)/pe,ze=Hi.number(ge.x,ve.x,ke),He=Hi.number(ge.y,ve.y,ke);if(ze>=0&&ze<M&&He>=0&&He<M&&Y-B>=0&&Y+B<=j){const et=new Wl(ze,He,Be,re);et._round(),p&&!P0(s,et,S,p,g)||te.push(et)}}H+=pe}return T||te.length||C||(te=mg(s,H/2,u,p,g,S,C,!0,M)),te}Bt("Anchor",Wl);const Qc=So;function F0(s,i,u,p){const g=[],S=s.image,C=S.pixelRatio,T=S.paddedRect.w-2*Qc,M=S.paddedRect.h-2*Qc,B=s.right-s.left,j=s.bottom-s.top,H=S.stretchX||[[0,T]],Y=S.stretchY||[[0,M]],te=(wt,Mt)=>wt+Mt[1]-Mt[0],re=H.reduce(te,0),ge=Y.reduce(te,0),ve=T-re,pe=M-ge;let Be=0,ke=re,ze=0,He=ge,et=0,Rt=ve,$t=0,Ft=pe;if(S.content&&p){const wt=S.content;Be=Kd(H,0,wt[0]),ze=Kd(Y,0,wt[1]),ke=Kd(H,wt[0],wt[2]),He=Kd(Y,wt[1],wt[3]),et=wt[0]-Be,$t=wt[1]-ze,Rt=wt[2]-wt[0]-ke,Ft=wt[3]-wt[1]-He}const Pt=(wt,Mt,It,ct)=>{const Yt=Bu(wt.stretch-Be,ke,B,s.left),qt=Xd(wt.fixed-et,Rt,wt.stretch,re),Ht=Bu(Mt.stretch-ze,He,j,s.top),pn=Xd(Mt.fixed-$t,Ft,Mt.stretch,ge),br=Bu(It.stretch-Be,ke,B,s.left),hi=Xd(It.fixed-et,Rt,It.stretch,re),Vo=Bu(ct.stretch-ze,He,j,s.top),uo=Xd(ct.fixed-$t,Ft,ct.stretch,ge),Br=new A(Yt,Ht),_i=new A(br,Ht),Ri=new A(br,Vo),co=new A(Yt,Vo),vi=new A(qt/C,pn/C),$r=new A(hi/C,uo/C),fi=i*Math.PI/180;if(fi){const Cr=Math.sin(fi),xi=Math.cos(fi),Nr=[xi,-Cr,Cr,xi];Br._matMult(Nr),_i._matMult(Nr),co._matMult(Nr),Ri._matMult(Nr)}const Di=wt.stretch+wt.fixed,Ti=Mt.stretch+Mt.fixed;return{tl:Br,tr:_i,bl:co,br:Ri,tex:{x:S.paddedRect.x+Qc+Di,y:S.paddedRect.y+Qc+Ti,w:It.stretch+It.fixed-Di,h:ct.stretch+ct.fixed-Ti},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vi,pixelOffsetBR:$r,minFontScaleX:Rt/C/B,minFontScaleY:Ft/C/j,isSDF:u}};if(p&&(S.stretchX||S.stretchY)){const wt=R0(H,ve,re),Mt=R0(Y,pe,ge);for(let It=0;It<wt.length-1;It++){const ct=wt[It],Yt=wt[It+1];for(let qt=0;qt<Mt.length-1;qt++)g.push(Pt(ct,Mt[qt],Yt,Mt[qt+1]))}}else g.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return g}function Kd(s,i,u){let p=0;for(const g of s)p+=Math.max(i,Math.min(u,g[1]))-Math.max(i,Math.min(u,g[0]));return p}function R0(s,i,u){const p=[{fixed:-Qc,stretch:0}];for(const[g,S]of s){const C=p[p.length-1];p.push({fixed:g-C.stretch,stretch:C.stretch}),p.push({fixed:g-C.stretch,stretch:C.stretch+(S-g)})}return p.push({fixed:i+Qc,stretch:u}),p}function Bu(s,i,u,p){return s/i*u+p}function Xd(s,i,u,p){return s-i*u/p}class Yd{constructor(i,u,p,g,S,C,T,M,B,j){if(this.boxStartIndex=i.length,B){let H=C.top,Y=C.bottom;const te=C.collisionPadding;te&&(H-=te[1],Y+=te[3]);let re=Y-H;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let H=C.top*T-M[0],Y=C.bottom*T+M[2],te=C.left*T-M[3],re=C.right*T+M[1];const ge=C.collisionPadding;if(ge&&(te-=ge[0]*T,H-=ge[1]*T,re+=ge[2]*T,Y+=ge[3]*T),j){const ve=new A(te,H),pe=new A(re,H),Be=new A(te,Y),ke=new A(re,Y),ze=j*Math.PI/180;ve._rotate(ze),pe._rotate(ze),Be._rotate(ze),ke._rotate(ze),te=Math.min(ve.x,pe.x,Be.x,ke.x),re=Math.max(ve.x,pe.x,Be.x,ke.x),H=Math.min(ve.y,pe.y,Be.y,ke.y),Y=Math.max(ve.y,pe.y,Be.y,ke.y)}i.emplaceBack(u.x,u.y,te,H,re,Y,p,g,S)}this.boxEndIndex=i.length}}class hw{constructor(i=[],u=fw){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:p}=this,g=u[i];for(;i>0;){const S=i-1>>1,C=u[S];if(p(g,C)>=0)break;u[i]=C,i=S}u[i]=g}_down(i){const{data:u,compare:p}=this,g=this.length>>1,S=u[i];for(;i<g;){let C=1+(i<<1),T=u[C];const M=C+1;if(M<this.length&&p(u[M],T)<0&&(C=M,T=u[M]),p(T,S)>=0)break;u[i]=T,i=C}u[i]=S}}function fw(s,i){return s<i?-1:s>i?1:0}function dw(s,i=1,u=!1){let p=1/0,g=1/0,S=-1/0,C=-1/0;const T=s[0];for(let te=0;te<T.length;te++){const re=T[te];(!te||re.x<p)&&(p=re.x),(!te||re.y<g)&&(g=re.y),(!te||re.x>S)&&(S=re.x),(!te||re.y>C)&&(C=re.y)}const M=Math.min(S-p,C-g);let B=M/2;const j=new hw([],pw);if(M===0)return new A(p,g);for(let te=p;te<S;te+=M)for(let re=g;re<C;re+=M)j.push(new eh(te+B,re+B,B,s));let H=function(te){let re=0,ge=0,ve=0;const pe=te[0];for(let Be=0,ke=pe.length,ze=ke-1;Be<ke;ze=Be++){const He=pe[Be],et=pe[ze],Rt=He.x*et.y-et.x*He.y;ge+=(He.x+et.x)*Rt,ve+=(He.y+et.y)*Rt,re+=3*Rt}return new eh(ge/re,ve/re,0,te)}(s),Y=j.length;for(;j.length;){const te=j.pop();(te.d>H.d||!H.d)&&(H=te,u&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,Y)),te.max-H.d<=i||(B=te.h/2,j.push(new eh(te.p.x-B,te.p.y-B,B,s)),j.push(new eh(te.p.x+B,te.p.y-B,B,s)),j.push(new eh(te.p.x-B,te.p.y+B,B,s)),j.push(new eh(te.p.x+B,te.p.y+B,B,s)),Y+=4)}return u&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${H.d}`)),H.p}function pw(s,i){return i.max-s.max}function eh(s,i,u,p){this.p=new A(s,i),this.h=u,this.d=function(g,S){let C=!1,T=1/0;for(let M=0;M<S.length;M++){const B=S[M];for(let j=0,H=B.length,Y=H-1;j<H;Y=j++){const te=B[j],re=B[Y];te.y>g.y!=re.y>g.y&&g.x<(re.x-te.x)*(g.y-te.y)/(re.y-te.y)+te.x&&(C=!C),T=Math.min(T,A_(g,te,re))}}return(C?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const gg=Number.POSITIVE_INFINITY;function D0(s,i){return i[1]!==gg?function(u,p,g){let S=0,C=0;switch(p=Math.abs(p),g=Math.abs(g),u){case"top-right":case"top-left":case"top":C=g-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-g}switch(u){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,C]}(s,i[0],i[1]):function(u,p){let g=0,S=0;p<0&&(p=0);const C=p/Math.sqrt(2);switch(u){case"top-right":case"top-left":S=C-7;break;case"bottom-right":case"bottom-left":S=7-C;break;case"bottom":S=7-p;break;case"top":S=p-7}switch(u){case"top-right":case"bottom-right":g=-C;break;case"top-left":case"bottom-left":g=C;break;case"left":g=p;break;case"right":g=-p}return[g,S]}(s,i[0])}function yg(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function mw(s,i,u,p,g,S,C,T,M,B,j){let H=S.textMaxSize.evaluate(i,{});H===void 0&&(H=C);const Y=s.layers[0].layout,te=Y.get("icon-offset").evaluate(i,{},j),re=z0(u.horizontal),ge=C/24,ve=s.tilePixelRatio*ge,pe=s.tilePixelRatio*H/24,Be=s.tilePixelRatio*T,ke=s.tilePixelRatio*Y.get("symbol-spacing"),ze=Y.get("text-padding")*s.tilePixelRatio,He=function(ct,Yt,qt,Ht=1){const pn=ct.get("icon-padding").evaluate(Yt,{},qt),br=pn&&pn.values;return[br[0]*Ht,br[1]*Ht,br[2]*Ht,br[3]*Ht]}(Y,i,j,s.tilePixelRatio),et=Y.get("text-max-angle")/180*Math.PI,Rt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",$t=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Ft=Y.get("symbol-placement"),Pt=ke/2,wt=Y.get("icon-text-fit");let Mt;p&&wt!=="none"&&(s.allowVerticalPlacement&&u.vertical&&(Mt=ag(p,u.vertical,wt,Y.get("icon-text-fit-padding"),te,ge)),re&&(p=ag(p,re,wt,Y.get("icon-text-fit-padding"),te,ge)));const It=(ct,Yt)=>{Yt.x<0||Yt.x>=xr||Yt.y<0||Yt.y>=xr||function(qt,Ht,pn,br,hi,Vo,uo,Br,_i,Ri,co,vi,$r,fi,Di,Ti,Cr,xi,Nr,zi,Tn,qo,Bi,$i,bi){const hn=qt.addToLineVertexArray(Ht,pn);let Sa,wi,ra,ia,Cn=0,ol=0,rh=0,Af=0,Cg=-1,Eg=-1;const al={};let N0=Gr(""),kg=0,Ag=0;if(Br._unevaluatedLayout.getValue("text-radial-offset")===void 0?[kg,Ag]=Br.layout.get("text-offset").evaluate(Tn,{},$i).map(Co=>Co*ci):(kg=Br.layout.get("text-radial-offset").evaluate(Tn,{},$i)*ci,Ag=gg),qt.allowVerticalPlacement&&br.vertical){const Co=Br.layout.get("text-rotate").evaluate(Tn,{},$i)+90;ra=new Yd(_i,Ht,Ri,co,vi,br.vertical,$r,fi,Di,Co),uo&&(ia=new Yd(_i,Ht,Ri,co,vi,uo,Cr,xi,Di,Co))}if(hi){const Co=Br.layout.get("icon-rotate").evaluate(Tn,{}),Er=Br.layout.get("icon-text-fit")!=="none",Ni=F0(hi,Co,Bi,Er),Tf=uo?F0(uo,Co,Bi,Er):void 0;wi=new Yd(_i,Ht,Ri,co,vi,hi,Cr,xi,!1,Co),Cn=4*Ni.length;const V0=qt.iconSizeData;let $u=null;V0.kind==="source"?($u=[_s*Br.layout.get("icon-size").evaluate(Tn,{})],$u[0]>Gl&&Oe(`${qt.layerIds[0]}: Value for "icon-size" is >= ${bf}. Reduce your "icon-size".`)):V0.kind==="composite"&&($u=[_s*qo.compositeIconSizes[0].evaluate(Tn,{},$i),_s*qo.compositeIconSizes[1].evaluate(Tn,{},$i)],($u[0]>Gl||$u[1]>Gl)&&Oe(`${qt.layerIds[0]}: Value for "icon-size" is >= ${bf}. Reduce your "icon-size".`)),qt.addSymbols(qt.icon,Ni,$u,zi,Nr,Tn,l.WritingMode.none,Ht,hn.lineStartIndex,hn.lineLength,-1,$i),Cg=qt.icon.placedSymbolArray.length-1,Tf&&(ol=4*Tf.length,qt.addSymbols(qt.icon,Tf,$u,zi,Nr,Tn,l.WritingMode.vertical,Ht,hn.lineStartIndex,hn.lineLength,-1,$i),Eg=qt.icon.placedSymbolArray.length-1)}const U0=Object.keys(br.horizontal);for(const Co of U0){const Er=br.horizontal[Co];if(!Sa){N0=Gr(Er.text);const Tf=Br.layout.get("text-rotate").evaluate(Tn,{},$i);Sa=new Yd(_i,Ht,Ri,co,vi,Er,$r,fi,Di,Tf)}const Ni=Er.positionedLines.length===1;if(rh+=Ef(qt,Ht,Er,Vo,Br,Di,Tn,Ti,hn,br.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Ni?U0:[Co],al,Cg,qo,$i),Ni)break}br.vertical&&(Af+=Ef(qt,Ht,br.vertical,Vo,Br,Di,Tn,Ti,hn,l.WritingMode.vertical,["vertical"],al,Eg,qo,$i));const gw=Sa?Sa.boxStartIndex:qt.collisionBoxArray.length,yw=Sa?Sa.boxEndIndex:qt.collisionBoxArray.length,_w=ra?ra.boxStartIndex:qt.collisionBoxArray.length,vw=ra?ra.boxEndIndex:qt.collisionBoxArray.length,xw=wi?wi.boxStartIndex:qt.collisionBoxArray.length,bw=wi?wi.boxEndIndex:qt.collisionBoxArray.length,Tg=ia?ia.boxStartIndex:qt.collisionBoxArray.length,ww=ia?ia.boxEndIndex:qt.collisionBoxArray.length;let oa=-1;const tp=(Co,Er)=>Co&&Co.circleDiameter?Math.max(Co.circleDiameter,Er):Er;oa=tp(Sa,oa),oa=tp(ra,oa),oa=tp(wi,oa),oa=tp(ia,oa);const j0=oa>-1?1:0;j0&&(oa*=bi/ci),qt.glyphOffsetArray.length>=Jc.MAX_GLYPHS&&Oe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&qt.addToSortKeyRanges(qt.symbolInstances.length,Tn.sortKey),qt.symbolInstances.emplaceBack(Ht.x,Ht.y,al.right>=0?al.right:-1,al.center>=0?al.center:-1,al.left>=0?al.left:-1,al.vertical||-1,Cg,Eg,N0,gw,yw,_w,vw,xw,bw,Tg,ww,Ri,rh,Af,Cn,ol,j0,0,$r,kg,Ag,oa)}(s,Yt,ct,u,p,g,Mt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,ve,[ze,ze,ze,ze],Rt,M,Be,He,$t,te,i,S,B,j,C)};if(Ft==="line")for(const ct of T0(i.geometry,0,0,xr,xr)){const Yt=O0(ct,ke,et,u.vertical||re,p,24,pe,s.overscaling,xr);for(const qt of Yt)re&&B0(s,re.text,Pt,qt)||It(ct,qt)}else if(Ft==="line-center"){for(const ct of i.geometry)if(ct.length>1){const Yt=cw(ct,et,u.vertical||re,p,24,pe);Yt&&It(ct,Yt)}}else if(i.type==="Polygon")for(const ct of Rd(i.geometry,0)){const Yt=dw(ct,16);It(ct[0],new Wl(Yt.x,Yt.y,0))}else if(i.type==="LineString")for(const ct of i.geometry)It(ct,new Wl(ct[0].x,ct[0].y,0));else if(i.type==="Point")for(const ct of i.geometry)for(const Yt of ct)It([Yt],new Wl(Yt.x,Yt.y,0))}function Ef(s,i,u,p,g,S,C,T,M,B,j,H,Y,te,re){const ge=function(Be,ke,ze,He,et,Rt,$t,Ft){const Pt=He.layout.get("text-rotate").evaluate(Rt,{})*Math.PI/180,wt=[];for(const Mt of ke.positionedLines)for(const It of Mt.positionedGlyphs){if(!It.rect)continue;const ct=It.rect||{};let Yt=o0+1,qt=!0,Ht=1,pn=0;const br=(et||Ft)&&It.vertical,hi=It.metrics.advance*It.scale/2;if(Ft&&ke.verticalizable&&(pn=Mt.lineOffset/2-(It.imageName?-(ci-It.metrics.width*It.scale)/2:(It.scale-1)*ci)),It.imageName){const Nr=$t[It.imageName];qt=Nr.sdf,Ht=Nr.pixelRatio,Yt=So/Ht}const Vo=et?[It.x+hi,It.y]:[0,0];let uo=et?[0,0]:[It.x+hi+ze[0],It.y+ze[1]-pn],Br=[0,0];br&&(Br=uo,uo=[0,0]);const _i=(It.metrics.left-Yt)*It.scale-hi+uo[0],Ri=(-It.metrics.top-Yt)*It.scale+uo[1],co=_i+ct.w*It.scale/Ht,vi=Ri+ct.h*It.scale/Ht,$r=new A(_i,Ri),fi=new A(co,Ri),Di=new A(_i,vi),Ti=new A(co,vi);if(br){const Nr=new A(-hi,hi-Xc),zi=-Math.PI/2,Tn=ci/2-hi,qo=new A(5-Xc-Tn,-(It.imageName?Tn:0)),Bi=new A(...Br);$r._rotateAround(zi,Nr)._add(qo)._add(Bi),fi._rotateAround(zi,Nr)._add(qo)._add(Bi),Di._rotateAround(zi,Nr)._add(qo)._add(Bi),Ti._rotateAround(zi,Nr)._add(qo)._add(Bi)}if(Pt){const Nr=Math.sin(Pt),zi=Math.cos(Pt),Tn=[zi,-Nr,Nr,zi];$r._matMult(Tn),fi._matMult(Tn),Di._matMult(Tn),Ti._matMult(Tn)}const Cr=new A(0,0),xi=new A(0,0);wt.push({tl:$r,tr:fi,bl:Di,br:Ti,tex:ct,writingMode:ke.writingMode,glyphOffset:Vo,sectionIndex:It.sectionIndex,isSDF:qt,pixelOffsetTL:Cr,pixelOffsetBR:xi,minFontScaleX:0,minFontScaleY:0})}return wt}(0,u,T,g,S,C,p,s.allowVerticalPlacement),ve=s.textSizeData;let pe=null;ve.kind==="source"?(pe=[_s*g.layout.get("text-size").evaluate(C,{})],pe[0]>Gl&&Oe(`${s.layerIds[0]}: Value for "text-size" is >= ${bf}. Reduce your "text-size".`)):ve.kind==="composite"&&(pe=[_s*te.compositeTextSizes[0].evaluate(C,{},re),_s*te.compositeTextSizes[1].evaluate(C,{},re)],(pe[0]>Gl||pe[1]>Gl)&&Oe(`${s.layerIds[0]}: Value for "text-size" is >= ${bf}. Reduce your "text-size".`)),s.addSymbols(s.text,ge,pe,T,S,C,B,i,M.lineStartIndex,M.lineLength,Y,re);for(const Be of j)H[Be]=s.text.placedSymbolArray.length-1;return 4*ge.length}function z0(s){for(const i in s)return s[i];return null}function B0(s,i,u,p){const g=s.compareText;if(i in g){const S=g[i];for(let C=S.length-1;C>=0;C--)if(p.dist(S[C])<u)return!0}else g[i]=[];return g[i].push(p),!1}const _g=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kf{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=p>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const S=_g[15&p];if(!S)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(i,2,1),[T]=new Uint32Array(i,4,1);return new kf(T,C,S,i)}constructor(i,u=64,p=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const S=_g.indexOf(this.ArrayType),C=2*i*this.ArrayType.BYTES_PER_ELEMENT,T=i*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+M,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+C+T+M),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+M,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=u,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Jd(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:C,nodeSize:T}=this,M=[0,S.length-1,0],B=[];for(;M.length;){const j=M.pop()||0,H=M.pop()||0,Y=M.pop()||0;if(H-Y<=T){for(let ve=Y;ve<=H;ve++){const pe=C[2*ve],Be=C[2*ve+1];pe>=i&&pe<=p&&Be>=u&&Be<=g&&B.push(S[ve])}continue}const te=Y+H>>1,re=C[2*te],ge=C[2*te+1];re>=i&&re<=p&&ge>=u&&ge<=g&&B.push(S[te]),(j===0?i<=re:u<=ge)&&(M.push(Y),M.push(te-1),M.push(1-j)),(j===0?p>=re:g>=ge)&&(M.push(te+1),M.push(H),M.push(1-j))}return B}within(i,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:S,nodeSize:C}=this,T=[0,g.length-1,0],M=[],B=p*p;for(;T.length;){const j=T.pop()||0,H=T.pop()||0,Y=T.pop()||0;if(H-Y<=C){for(let ve=Y;ve<=H;ve++)$0(S[2*ve],S[2*ve+1],i,u)<=B&&M.push(g[ve]);continue}const te=Y+H>>1,re=S[2*te],ge=S[2*te+1];$0(re,ge,i,u)<=B&&M.push(g[te]),(j===0?i-p<=re:u-p<=ge)&&(T.push(Y),T.push(te-1),T.push(1-j)),(j===0?i+p>=re:u+p>=ge)&&(T.push(te+1),T.push(H),T.push(1-j))}return M}}function Jd(s,i,u,p,g,S){if(g-p<=u)return;const C=p+g>>1;vg(s,i,C,p,g,S),Jd(s,i,u,p,C-1,1-S),Jd(s,i,u,C+1,g,1-S)}function vg(s,i,u,p,g,S){for(;g>p;){if(g-p>600){const B=g-p+1,j=u-p+1,H=Math.log(B),Y=.5*Math.exp(2*H/3),te=.5*Math.sqrt(H*Y*(B-Y)/B)*(j-B/2<0?-1:1);vg(s,i,u,Math.max(p,Math.floor(u-j*Y/B+te)),Math.min(g,Math.floor(u+(B-j)*Y/B+te)),S)}const C=i[2*u+S];let T=p,M=g;for(th(s,i,p,u),i[2*g+S]>C&&th(s,i,p,g);T<M;){for(th(s,i,T,M),T++,M--;i[2*T+S]<C;)T++;for(;i[2*M+S]>C;)M--}i[2*p+S]===C?th(s,i,p,M):(M++,th(s,i,M,g)),M<=u&&(p=M+1),u<=M&&(g=M-1)}}function th(s,i,u,p){Qd(s,u,p),Qd(i,2*u,2*p),Qd(i,2*u+1,2*p+1)}function Qd(s,i,u){const p=s[i];s[i]=s[u],s[u]=p}function $0(s,i,u,p){const g=s-u,S=i-p;return g*g+S*S}var xg;l.PerformanceMarkers=void 0,(xg=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",xg.load="load",xg.fullLoad="fullLoad";let ep=null,Zl=[];const nh=1e3/60,bg="loadTime",wg="fullLoadTime",Sg={mark(s){performance.mark(s)},frame(s){const i=s;ep!=null&&Zl.push(i-ep),ep=i},clearMetrics(){ep=null,Zl=[],performance.clearMeasures(bg),performance.clearMeasures(wg);for(const s in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[s])},getPerformanceMetrics(){performance.measure(bg,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(wg,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const s=performance.getEntriesByName(bg)[0].duration,i=performance.getEntriesByName(wg)[0].duration,u=Zl.length,p=1/(Zl.reduce((S,C)=>S+C,0)/u/1e3),g=Zl.filter(S=>S>nh).reduce((S,C)=>S+(C-nh)/nh,0);return{loadTime:s,fullLoadTime:i,fps:p,percentDroppedFrames:g/(u+g)*100,totalFrames:u}}};l.AJAXError=K,l.ARRAY_TYPE=qc,l.Actor=class{constructor(s,i,u){this.receive=p=>{const g=p.data,S=g.id;if(S&&(!g.targetMapId||this.mapId===g.targetMapId))if(g.type==="<cancel>"){delete this.tasks[S];const C=this.cancelCallbacks[S];delete this.cancelCallbacks[S],C&&C()}else $e()||g.mustQueue?(this.tasks[S]=g,this.taskQueue.push(S),this.invoker.trigger()):this.processTask(S,g)},this.process=()=>{if(!this.taskQueue.length)return;const p=this.taskQueue.shift(),g=this.tasks[p];delete this.tasks[p],this.taskQueue.length&&this.invoker.trigger(),g&&this.processTask(p,g)},this.target=s,this.parent=i,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new hg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=$e()?s:window}send(s,i,u,p,g=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[S]=u);const C=pt(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:s,hasCallback:!!u,targetMapId:p,mustQueue:g,sourceMapId:this.mapId,data:ma(i,C)},C),{cancel:()=>{u&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}processTask(s,i){if(i.type==="<response>"){const u=this.callbacks[s];delete this.callbacks[s],u&&(i.error?u(zo(i.error)):u(null,zo(i.data)))}else{let u=!1;const p=pt(this.globalScope)?void 0:[],g=i.hasCallback?(T,M)=>{u=!0,delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:T?ma(T):null,data:ma(M,p)},p)}:T=>{u=!0};let S=null;const C=zo(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,C,g);else if(this.parent.getWorkerSource){const T=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,T[0],C.source)[T[1]](C,g)}else g(new Error(`Could not find function ${i.type}`));!u&&S&&S.cancel&&(this.cancelCallbacks[s]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Js,l.CanonicalTileID=pg,l.CollisionBoxArray=_,l.CollisionCircleLayoutArray=class extends Sn{},l.Color=wn,l.DEMData=w0,l.DataConstantProperty=Lt,l.DictionaryCoder=S0,l.EXTENT=xr,l.ErrorEvent=Bn,l.EvaluationParameters=Sr,l.Event=Qn,l.Evented=ei,l.FeatureIndex=E0,l.FillBucket=Ru,l.FillExtrusionBucket=Ua,l.GeoJSONFeature=C0,l.ImageAtlas=ig,l.ImagePosition=rg,l.KDBush=kf,l.LineBucket=Gm,l.LineStripIndexArray=class extends o{},l.LngLat=Hl,l.MercatorCoordinate=Zd,l.ONE_EM=ci,l.OverscaledTileID=na,l.PerformanceUtils=Sg,l.Point=A,l.Pos3dArray=class extends Fc{},l.PosArray=fe,l.Properties=Mi,l.Protobuf=tg,l.QuadTriangleArray=class extends zc{},l.RGBAImage=Uo,l.RasterBoundsArray=class extends _a{},l.RequestPerformance=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},l.SegmentVector=_t,l.SymbolBucket=Jc,l.Transitionable=Mc,l.TriangleIndexArray=it,l.Uniform1f=va,l.Uniform1i=class extends Li{constructor(s,i){super(s,i),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},l.Uniform2f=class extends Li{constructor(s,i){super(s,i),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},l.Uniform3f=class extends Li{constructor(s,i){super(s,i),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},l.Uniform4f=ds,l.UniformColor=Oi,l.UniformMatrix4f=class extends Li{constructor(s,i){super(s,i),this.current=li}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let i=1;i<16;i++)if(s[i]!==this.current[i]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},l.UnwrappedTileID=Sf,l.ValidationError=vt,l.ZoomHistory=Eu,l.addDynamicAttributes=sg,l.arrayBufferToImage=function(s,i){const u=new Image;u.onload=()=>{i(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=zt})},u.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(s)],{type:"image/png"});u.src=s.byteLength?URL.createObjectURL(p):zt},l.arrayBufferToImageBitmap=function(s,i){const u=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(u).then(p=>{i(null,p)}).catch(p=>{i(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(s,i,u){if(!s.length)return u(null,[]);let p=s.length;const g=new Array(s.length);let S=null;s.forEach((C,T)=>{i(C,(M,B)=>{M&&(S=M),g[T]=B,--p==0&&u(S,g)})})},l.bezier=N,l.browser=_e,l.clamp=R,l.clipLine=T0,l.clone=function(s){var i=new qc(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},l.clone$1=oe,l.collisionCircleLayout=Gb,l.config=we,l.copy=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},l.create=function(){var s=new qc(16);return qc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},l.createExpression=qs,l.createFilter=xc,l.createLayout=Or,l.createStyleLayer=function(s){if(s.type==="custom")return new lw(s);switch(s.type){case"background":return new ow(s);case"circle":return new Em(s);case"fill":return new zd(s);case"fill-extrusion":return new Zc(s);case"heatmap":return new Fb(s);case"hillshade":return new Id(s);case"line":return new Vb(s);case"raster":return new sw(s);case"symbol":return new Hd(s)}},l.deepEqual=function s(i,u){if(Array.isArray(i)){if(!Array.isArray(u)||i.length!==u.length)return!1;for(let p=0;p<i.length;p++)if(!s(i[p],u[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&u!==null){if(typeof u!="object"||Object.keys(i).length!==Object.keys(u).length)return!1;for(const p in i)if(!s(i[p],u[p]))return!1;return!0}return i===u},l.defaultEasing=Z,l.derefLayers=function(s){s=s.slice();const i=Object.create(null);for(let u=0;u<s.length;u++)i[s[u].id]=s[u];for(let u=0;u<s.length;u++)"ref"in s[u]&&(s[u]=Gi(s[u],i[s[u].ref]));return s},l.diffStyles=function(s,i){if(!s)return[{command:_n.setStyle,args:[i]}];let u=[];try{if(!Gn(s.version,i.version))return[{command:_n.setStyle,args:[i]}];Gn(s.center,i.center)||u.push({command:_n.setCenter,args:[i.center]}),Gn(s.zoom,i.zoom)||u.push({command:_n.setZoom,args:[i.zoom]}),Gn(s.bearing,i.bearing)||u.push({command:_n.setBearing,args:[i.bearing]}),Gn(s.pitch,i.pitch)||u.push({command:_n.setPitch,args:[i.pitch]}),Gn(s.sprite,i.sprite)||u.push({command:_n.setSprite,args:[i.sprite]}),Gn(s.glyphs,i.glyphs)||u.push({command:_n.setGlyphs,args:[i.glyphs]}),Gn(s.transition,i.transition)||u.push({command:_n.setTransition,args:[i.transition]}),Gn(s.light,i.light)||u.push({command:_n.setLight,args:[i.light]});const p={},g=[];(function(C,T,M,B){let j;for(j in T=T||{},C=C||{})Object.prototype.hasOwnProperty.call(C,j)&&(Object.prototype.hasOwnProperty.call(T,j)||Mo(j,M,B));for(j in T)Object.prototype.hasOwnProperty.call(T,j)&&(Object.prototype.hasOwnProperty.call(C,j)?Gn(C[j],T[j])||(C[j].type==="geojson"&&T[j].type==="geojson"&&ti(C,T,j)?M.push({command:_n.setGeoJSONSourceData,args:[j,T[j].data]}):Lo(j,T,M,B)):_o(j,T,M))})(s.sources,i.sources,g,p);const S=[];s.layers&&s.layers.forEach(C=>{p[C.source]?u.push({command:_n.removeLayer,args:[C.id]}):S.push(C)}),u=u.concat(g),function(C,T,M){T=T||[];const B=(C=C||[]).map(Oo),j=T.map(Oo),H=C.reduce(vo,{}),Y=T.reduce(vo,{}),te=B.slice(),re=Object.create(null);let ge,ve,pe,Be,ke,ze,He;for(ge=0,ve=0;ge<B.length;ge++)pe=B[ge],Object.prototype.hasOwnProperty.call(Y,pe)?ve++:(M.push({command:_n.removeLayer,args:[pe]}),te.splice(te.indexOf(pe,ve),1));for(ge=0,ve=0;ge<j.length;ge++)pe=j[j.length-1-ge],te[te.length-1-ge]!==pe&&(Object.prototype.hasOwnProperty.call(H,pe)?(M.push({command:_n.removeLayer,args:[pe]}),te.splice(te.lastIndexOf(pe,te.length-ve),1)):ve++,ze=te[te.length-ge],M.push({command:_n.addLayer,args:[Y[pe],ze]}),te.splice(te.length-ge,0,pe),re[pe]=!0);for(ge=0;ge<j.length;ge++)if(pe=j[ge],Be=H[pe],ke=Y[pe],!re[pe]&&!Gn(Be,ke))if(Gn(Be.source,ke.source)&&Gn(Be["source-layer"],ke["source-layer"])&&Gn(Be.type,ke.type)){for(He in Yn(Be.layout,ke.layout,M,pe,null,_n.setLayoutProperty),Yn(Be.paint,ke.paint,M,pe,null,_n.setPaintProperty),Gn(Be.filter,ke.filter)||M.push({command:_n.setFilter,args:[pe,ke.filter]}),Gn(Be.minzoom,ke.minzoom)&&Gn(Be.maxzoom,ke.maxzoom)||M.push({command:_n.setLayerZoomRange,args:[pe,ke.minzoom,ke.maxzoom]}),Be)Object.prototype.hasOwnProperty.call(Be,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Yn(Be[He],ke[He],M,pe,He.slice(6),_n.setPaintProperty):Gn(Be[He],ke[He])||M.push({command:_n.setLayerProperty,args:[pe,He,ke[He]]}));for(He in ke)Object.prototype.hasOwnProperty.call(ke,He)&&!Object.prototype.hasOwnProperty.call(Be,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Yn(Be[He],ke[He],M,pe,He.slice(6),_n.setPaintProperty):Gn(Be[He],ke[He])||M.push({command:_n.setLayerProperty,args:[pe,He,ke[He]]}))}else M.push({command:_n.removeLayer,args:[pe]}),ze=te[te.lastIndexOf(pe)+1],M.push({command:_n.addLayer,args:[ke,ze]})}(S,i.layers,u)}catch(p){console.warn("Unable to compute style diff:",p),u=[{command:_n.setStyle,args:[i]}]}return u},l.dot=function(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]+s[3]*i[3]},l.earthRadius=Wd,l.emitValidationErrors=cs,l.emptyStyle=function(){const s={},i=Je.$version;for(const u in Je.$root){const p=Je.$root[u];if(p.required){let g=null;g=u==="version"?i:p.type==="array"?[]:{},g!=null&&(s[u]=g)}}return s},l.equals=function(s,i){var u=s[0],p=s[1],g=s[2],S=s[3],C=s[4],T=s[5],M=s[6],B=s[7],j=s[8],H=s[9],Y=s[10],te=s[11],re=s[12],ge=s[13],ve=s[14],pe=s[15],Be=i[0],ke=i[1],ze=i[2],He=i[3],et=i[4],Rt=i[5],$t=i[6],Ft=i[7],Pt=i[8],wt=i[9],Mt=i[10],It=i[11],ct=i[12],Yt=i[13],qt=i[14],Ht=i[15];return Math.abs(u-Be)<=Ai*Math.max(1,Math.abs(u),Math.abs(Be))&&Math.abs(p-ke)<=Ai*Math.max(1,Math.abs(p),Math.abs(ke))&&Math.abs(g-ze)<=Ai*Math.max(1,Math.abs(g),Math.abs(ze))&&Math.abs(S-He)<=Ai*Math.max(1,Math.abs(S),Math.abs(He))&&Math.abs(C-et)<=Ai*Math.max(1,Math.abs(C),Math.abs(et))&&Math.abs(T-Rt)<=Ai*Math.max(1,Math.abs(T),Math.abs(Rt))&&Math.abs(M-$t)<=Ai*Math.max(1,Math.abs(M),Math.abs($t))&&Math.abs(B-Ft)<=Ai*Math.max(1,Math.abs(B),Math.abs(Ft))&&Math.abs(j-Pt)<=Ai*Math.max(1,Math.abs(j),Math.abs(Pt))&&Math.abs(H-wt)<=Ai*Math.max(1,Math.abs(H),Math.abs(wt))&&Math.abs(Y-Mt)<=Ai*Math.max(1,Math.abs(Y),Math.abs(Mt))&&Math.abs(te-It)<=Ai*Math.max(1,Math.abs(te),Math.abs(It))&&Math.abs(re-ct)<=Ai*Math.max(1,Math.abs(re),Math.abs(ct))&&Math.abs(ge-Yt)<=Ai*Math.max(1,Math.abs(ge),Math.abs(Yt))&&Math.abs(ve-qt)<=Ai*Math.max(1,Math.abs(ve),Math.abs(qt))&&Math.abs(pe-Ht)<=Ai*Math.max(1,Math.abs(pe),Math.abs(Ht))},l.evaluateSizeForFeature=function(s,{uSize:i,uSizeT:u},{lowerSize:p,upperSize:g}){return s.kind==="source"?p/_s:s.kind==="composite"?Hi.number(p/_s,g/_s,u):i},l.evaluateSizeForZoom=function(s,i){let u=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:S,maxZoom:C}=s,T=g?R(bo.interpolationFactor(g,i,S,C),0,1):0;s.kind==="camera"?p=Hi.number(s.minSize,s.maxSize,T):u=T}return{uSizeT:u,uSize:p}},l.evaluateVariableOffset=D0,l.evented=ga,l.extend=G,l.filterObject=ee,l.findLineIntersection=function(s,i,u,p){const g=i.y-s.y,S=i.x-s.x,C=p.y-u.y,T=p.x-u.x,M=C*S-T*g;if(M===0)return null;const B=(T*(s.y-u.y)-C*(s.x-u.x))/M;return new A(s.x+B*S,s.y+B*g)},l.fromScaling=function(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},l.getAnchorAlignment=og,l.getAnchorJustification=yg,l.getArrayBuffer=Dt,l.getDefaultExportFromCjs=x,l.getJSON=function(s,i){return Gt(G(s,{type:"json"}),i)},l.getOverlapMode=wf,l.getProtocolAction=lt,l.getRTLTextPluginStatus=Dl,l.getReferrer=ae,l.getVideo=function(s,i){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let p=0;p<s.length;p++){const g=window.document.createElement("source");Qt(s[p])||(u.crossOrigin="Anonymous"),g.src=s[p],u.appendChild(g)}return{cancel:()=>{}}},l.groupByLayout=function(s,i){const u={};for(let g=0;g<s.length;g++){const S=i&&i[s[g].id]||Cc(s[g]);i&&(i[s[g].id]=S);let C=u[S];C||(C=u[S]=[]),C.push(s[g])}const p=[];for(const g in u)p.push(u[g]);return p},l.identity=Ad,l.interpolate=Hi,l.invert=function(s,i){var u=i[0],p=i[1],g=i[2],S=i[3],C=i[4],T=i[5],M=i[6],B=i[7],j=i[8],H=i[9],Y=i[10],te=i[11],re=i[12],ge=i[13],ve=i[14],pe=i[15],Be=u*T-p*C,ke=u*M-g*C,ze=u*B-S*C,He=p*M-g*T,et=p*B-S*T,Rt=g*B-S*M,$t=j*ge-H*re,Ft=j*ve-Y*re,Pt=j*pe-te*re,wt=H*ve-Y*ge,Mt=H*pe-te*ge,It=Y*pe-te*ve,ct=Be*It-ke*Mt+ze*wt+He*Pt-et*Ft+Rt*$t;return ct?(s[0]=(T*It-M*Mt+B*wt)*(ct=1/ct),s[1]=(g*Mt-p*It-S*wt)*ct,s[2]=(ge*Rt-ve*et+pe*He)*ct,s[3]=(Y*et-H*Rt-te*He)*ct,s[4]=(M*Pt-C*It-B*Ft)*ct,s[5]=(u*It-g*Pt+S*Ft)*ct,s[6]=(ve*ze-re*Rt-pe*ke)*ct,s[7]=(j*Rt-Y*ze+te*ke)*ct,s[8]=(C*Mt-T*Pt+B*$t)*ct,s[9]=(p*Pt-u*Mt-S*$t)*ct,s[10]=(re*et-ge*ze+pe*Be)*ct,s[11]=(H*ze-j*et-te*Be)*ct,s[12]=(T*Ft-C*wt-M*$t)*ct,s[13]=(u*wt-p*Ft+g*$t)*ct,s[14]=(ge*ke-re*He-ve*Be)*ct,s[15]=(j*He-H*ke+Y*Be)*ct,s):null},l.isImageBitmap=At,l.isSafari=pt,l.isWorker=$e,l.keysDifference=function(s,i){const u=[];for(const p in s)p in i||u.push(p);return u},l.lazyLoadRTLTextPlugin=function(){Bo.isLoading()||Bo.isLoaded()||Dl()!=="deferred"||Sd()},l.makeRequest=Gt,l.mapObject=se,l.mercatorXfromLng=v0,l.mercatorYfromLat=x0,l.mercatorZfromAltitude=b0,l.mul=M_,l.mul$1=function(s,i,u){return s[0]=i[0]*u[0],s[1]=i[1]*u[1],s[2]=i[2]*u[2],s[3]=i[3]*u[3],s},l.multiply=Cm,l.nextPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},l.operations=_n,l.ortho=function(s,i,u,p,g,S,C){var T=1/(i-u),M=1/(p-g),B=1/(S-C);return s[0]=-2*T,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*M,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*B,s[11]=0,s[12]=(i+u)*T,s[13]=(g+p)*M,s[14]=(C+S)*B,s[15]=1,s},l.parseCacheControl=function(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,g,S)=>{const C=g||S;return i[p]=!C||C.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i},l.parseGlyphPbf=function(s){return new tg(s).readFields(Zb,[])},l.pbf=Km,l.performSymbolLayout=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=xr/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const i=s.bucket.layers[0].layout,u=s.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:u["icon-size"].possiblyEvaluate(new Sr(s.bucket.zoom+1),s.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new Sr(s.bucket.zoom+1),s.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new Sr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:B}=s.bucket.textSizeData;p.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Sr(M),s.canonical),u["text-size"].possiblyEvaluate(new Sr(B),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:B}=s.bucket.iconSizeData;p.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Sr(M),s.canonical),u["icon-size"].possiblyEvaluate(new Sr(B),s.canonical)]}const g=i.get("text-line-height")*ci,S=i.get("text-rotation-alignment")!=="viewport"&&i.get("symbol-placement")!=="point",C=i.get("text-keep-upright"),T=i.get("text-size");for(const M of s.bucket.features){const B=i.get("text-font").evaluate(M,{},s.canonical).join(","),j=T.evaluate(M,{},s.canonical),H=p.layoutTextSize.evaluate(M,{},s.canonical),Y=p.layoutIconSize.evaluate(M,{},s.canonical),te={horizontal:{},vertical:void 0},re=M.text;let ge,ve=[0,0];if(re){const ke=re.toString(),ze=i.get("text-letter-spacing").evaluate(M,{},s.canonical)*ci,He=Tc(ke)?ze:0,et=i.get("text-anchor").evaluate(M,{},s.canonical),Rt=i.get("text-variable-anchor");if(!Rt){const Mt=i.get("text-radial-offset").evaluate(M,{},s.canonical);ve=Mt?D0(et,[Mt*ci,gg]):i.get("text-offset").evaluate(M,{},s.canonical).map(It=>It*ci)}let $t=S?"center":i.get("text-justify").evaluate(M,{},s.canonical);const Ft=i.get("symbol-placement"),Pt=Ft==="point"?i.get("text-max-width").evaluate(M,{},s.canonical)*ci:0,wt=()=>{s.bucket.allowVerticalPlacement&&Ac(ke)&&(te.vertical=qd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,et,"left",He,ve,l.WritingMode.vertical,!0,Ft,H,j))};if(!S&&Rt){const Mt=$t==="auto"?Rt.map(ct=>yg(ct)):[$t];let It=!1;for(let ct=0;ct<Mt.length;ct++){const Yt=Mt[ct];if(!te.horizontal[Yt])if(It)te.horizontal[Yt]=te.horizontal[0];else{const qt=qd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,"center",Yt,He,ve,l.WritingMode.horizontal,!1,Ft,H,j);qt&&(te.horizontal[Yt]=qt,It=qt.positionedLines.length===1)}}wt()}else{$t==="auto"&&($t=yg(et));const Mt=qd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,et,$t,He,ve,l.WritingMode.horizontal,!1,Ft,H,j);Mt&&(te.horizontal[$t]=Mt),wt(),Ac(ke)&&S&&C&&(te.vertical=qd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,et,$t,He,ve,l.WritingMode.vertical,!1,Ft,H,j))}}let pe=!1;if(M.icon&&M.icon.name){const ke=s.imageMap[M.icon.name];ke&&(ge=ew(s.imagePositions[M.icon.name],i.get("icon-offset").evaluate(M,{},s.canonical),i.get("icon-anchor").evaluate(M,{},s.canonical)),pe=!!ke.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=pe:s.bucket.sdfIcons!==pe&&Oe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==s.bucket.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const Be=z0(te.horizontal)||te.vertical;s.bucket.iconsInText=!!Be&&Be.iconsInText,(Be||ge)&&mw(s.bucket,M,te,ge,s.imageMap,p,H,Y,ve,pe,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},l.perspective=function(s,i,u,p,g){var S,C=1/Math.tan(i/2);return s[0]=C/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=C,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+p)*(S=1/(p-g)),s[14]=2*g*p*S):(s[10]=-1,s[14]=-2*p),s},l.pick=function(s,i){const u={};for(let p=0;p<i.length;p++){const g=i[p];g in s&&(u[g]=s[g])}return u},l.plugin=Bo,l.pointGeometry=b,l.polygonIntersectsPolygon=k_,l.potpack=a0,l.register=Bt,l.registerForPluginStateChange=function(s){return s({pluginStatus:Xi,pluginURL:Jo}),ga.on("pluginStateChange",s),s},l.renderColorRamp=F_,l.rotateX=function(s,i,u){var p=Math.sin(u),g=Math.cos(u),S=i[4],C=i[5],T=i[6],M=i[7],B=i[8],j=i[9],H=i[10],Y=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=S*g+B*p,s[5]=C*g+j*p,s[6]=T*g+H*p,s[7]=M*g+Y*p,s[8]=B*g-S*p,s[9]=j*g-C*p,s[10]=H*g-T*p,s[11]=Y*g-M*p,s},l.rotateZ=function(s,i,u){var p=Math.sin(u),g=Math.cos(u),S=i[0],C=i[1],T=i[2],M=i[3],B=i[4],j=i[5],H=i[6],Y=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=S*g+B*p,s[1]=C*g+j*p,s[2]=T*g+H*p,s[3]=M*g+Y*p,s[4]=B*g-S*p,s[5]=j*g-C*p,s[6]=H*g-T*p,s[7]=Y*g-M*p,s},l.sameOrigin=Qt,l.scale=function(s,i,u){var p=u[0],g=u[1],S=u[2];return s[0]=i[0]*p,s[1]=i[1]*p,s[2]=i[2]*p,s[3]=i[3]*p,s[4]=i[4]*g,s[5]=i[5]*g,s[6]=i[6]*g,s[7]=i[7]*g,s[8]=i[8]*S,s[9]=i[9]*S,s[10]=i[10]*S,s[11]=i[11]*S,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},l.setRTLTextPlugin=function(s,i,u=!1){if(Xi===Ol||Xi===Au||Xi===Fl)throw new Error("setRTLTextPlugin cannot be called multiple times.");Jo=_e.resolveURL(s),Xi=Ol,Rl=i,Xs(),u||Sd()},l.sphericalToCartesian=function([s,i,u]){return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:s*Math.cos(i)*Math.sin(u),y:s*Math.sin(i)*Math.sin(u),z:s*Math.cos(u)}},l.toEvaluationFeature=Lu,l.transformMat4=Td,l.translate=function(s,i,u){var p,g,S,C,T,M,B,j,H,Y,te,re,ge=u[0],ve=u[1],pe=u[2];return i===s?(s[12]=i[0]*ge+i[4]*ve+i[8]*pe+i[12],s[13]=i[1]*ge+i[5]*ve+i[9]*pe+i[13],s[14]=i[2]*ge+i[6]*ve+i[10]*pe+i[14],s[15]=i[3]*ge+i[7]*ve+i[11]*pe+i[15]):(g=i[1],S=i[2],C=i[3],T=i[4],M=i[5],B=i[6],j=i[7],H=i[8],Y=i[9],te=i[10],re=i[11],s[0]=p=i[0],s[1]=g,s[2]=S,s[3]=C,s[4]=T,s[5]=M,s[6]=B,s[7]=j,s[8]=H,s[9]=Y,s[10]=te,s[11]=re,s[12]=p*ge+T*ve+H*pe+i[12],s[13]=g*ge+M*ve+Y*pe+i[13],s[14]=S*ge+B*ve+te*pe+i[14],s[15]=C*ge+j*ve+re*pe+i[15]),s},l.triggerPluginCompletionEvent=af,l.unicodeBlockLookup=ht,l.uniqueId=function(){return Q++},l.v8Spec=Je,l.validateCustomStyleLayer=function(s){const i=[],u=s.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},l.validateLight=tr,l.validateStyle=ln,l.vectorTile=Na,l.warnOnce=Oe,l.wrap=q}),c(["./shared"],function(l){class x{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,J){for(const Se of W){this._layerConfigs[Se.id]=Se;const Ce=this._layers[Se.id]=l.createStyleLayer(Se);Ce._featureFilter=l.createFilter(Ce.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of J)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const ce=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Se of ce){const Ce=Se.map(at=>this._layers[at.id]),Re=Ce[0];if(Re.visibility==="none")continue;const Te=Re.source||"";let Ae=this.familiesBySource[Te];Ae||(Ae=this.familiesBySource[Te]={});const Ne=Re.sourceLayer||"_geojsonTileLayer";let ot=Ae[Ne];ot||(ot=Ae[Ne]=[]),ot.push(Ce)}}}class b{constructor(W){const J={},ce=[];for(const Te in W){const Ae=W[Te],Ne=J[Te]={};for(const ot in Ae){const at=Ae[+ot];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const st={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};ce.push(st),Ne[ot]={rect:st,metrics:at.metrics}}}const{w:Se,h:Ce}=l.potpack(ce),Re=new l.AlphaImage({width:Se||1,height:Ce||1});for(const Te in W){const Ae=W[Te];for(const Ne in Ae){const ot=Ae[+Ne];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const at=J[Te][Ne].rect;l.AlphaImage.copy(ot.bitmap,Re,{x:0,y:0},{x:at.x+1,y:at.y+1},ot.bitmap)}}this.image=Re,this.positions=J}}l.register("GlyphAtlas",b);class E{constructor(W){this.tileID=new l.OverscaledTileID(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(W,J,ce,Se,Ce){this.status="parsing",this.data=W,this.collisionBoxArray=new l.CollisionBoxArray;const Re=new l.DictionaryCoder(Object.keys(W.layers).sort()),Te=new l.FeatureIndex(this.tileID,this.promoteId);Te.bucketLayerIDs=[];const Ae={},Ne={featureIndex:Te,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ce},ot=J.familiesBySource[this.source];for(const Fn in ot){const Nn=W.layers[Fn];if(!Nn)continue;Nn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wn=Re.encode(Fn),cr=[];for(let Lr=0;Lr<Nn.length;Lr++){const pr=Nn.feature(Lr),Pr=Te.getId(pr,Fn);cr.push({feature:pr,id:Pr,index:Lr,sourceLayerIndex:wn})}for(const Lr of ot[Fn]){const pr=Lr[0];pr.source!==this.source&&l.warnOnce(`layer.source = ${pr.source} does not equal this.source = ${this.source}`),pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||pr.visibility!=="none"&&(A(Lr,this.zoom,ce),(Ae[pr.id]=pr.createBucket({index:Te.bucketLayerIDs.length,layers:Lr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wn,sourceID:this.source})).populate(cr,Ne,this.tileID.canonical),Te.bucketLayerIDs.push(Lr.map(Pr=>Pr.id)))}}let at,st,Jt,fn;const jt=l.mapObject(Ne.glyphDependencies,Fn=>Object.keys(Fn).map(Number));this.inFlightDependencies.forEach(Fn=>Fn==null?void 0:Fn.cancel()),this.inFlightDependencies=[];const Zt=++this.dependencySentinel;Object.keys(jt).length?this.inFlightDependencies.push(Se.send("getGlyphs",{uid:this.uid,stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"},(Fn,Nn)=>{Zt===this.dependencySentinel&&(at||(at=Fn,st=Nn,Wn.call(this)))})):st={};const rn=Object.keys(Ne.iconDependencies);rn.length?this.inFlightDependencies.push(Se.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},(Fn,Nn)=>{Zt===this.dependencySentinel&&(at||(at=Fn,Jt=Nn,Wn.call(this)))})):Jt={};const Hn=Object.keys(Ne.patternDependencies);function Wn(){if(at)return Ce(at);if(st&&Jt&&fn){const Fn=new b(st),Nn=new l.ImageAtlas(Jt,fn);for(const wn in Ae){const cr=Ae[wn];cr instanceof l.SymbolBucket?(A(cr.layers,this.zoom,ce),l.performSymbolLayout({bucket:cr,glyphMap:st,glyphPositions:Fn.positions,imageMap:Jt,imagePositions:Nn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):cr.hasPattern&&(cr instanceof l.LineBucket||cr instanceof l.FillBucket||cr instanceof l.FillExtrusionBucket)&&(A(cr.layers,this.zoom,ce),cr.addFeatures(Ne,this.tileID.canonical,Nn.patternPositions))}this.status="done",Ce(null,{buckets:Object.values(Ae).filter(wn=>!wn.isEmpty()),featureIndex:Te,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fn.image,imageAtlas:Nn,glyphMap:this.returnDependencies?st:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?Fn.positions:null})}}Hn.length?this.inFlightDependencies.push(Se.send("getImages",{icons:Hn,source:this.source,tileID:this.tileID,type:"patterns"},(Fn,Nn)=>{Zt===this.dependencySentinel&&(at||(at=Fn,fn=Nn,Wn.call(this)))})):fn={},Wn.call(this)}}function A(ye,W,J){const ce=new l.EvaluationParameters(W);for(const Se of ye)Se.recalculate(ce,J)}function L(ye,W){const J=l.getArrayBuffer(ye.request,(ce,Se,Ce,Re)=>{ce?W(ce):Se&&W(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Se)),rawData:Se,cacheControl:Ce,expires:Re})});return()=>{J.cancel(),W()}}class F{constructor(W,J,ce,Se){this.actor=W,this.layerIndex=J,this.availableImages=ce,this.loadVectorData=Se||L,this.loading={},this.loaded={}}loadTile(W,J){const ce=W.uid;this.loading||(this.loading={});const Se=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.RequestPerformance(W.request),Ce=this.loading[ce]=new E(W);Ce.abort=this.loadVectorData(W,(Re,Te)=>{if(delete this.loading[ce],Re||!Te)return Ce.status="done",this.loaded[ce]=Ce,J(Re);const Ae=Te.rawData,Ne={};Te.expires&&(Ne.expires=Te.expires),Te.cacheControl&&(Ne.cacheControl=Te.cacheControl);const ot={};if(Se){const at=Se.finish();at&&(ot.resourceTiming=JSON.parse(JSON.stringify(at)))}Ce.vectorTile=Te.vectorTile,Ce.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,(at,st)=>{if(at||!st)return J(at);J(null,l.extend({rawTileData:Ae.slice(0)},st,Ne,ot))}),this.loaded=this.loaded||{},this.loaded[ce]=Ce})}reloadTile(W,J){const ce=this.loaded,Se=W.uid;if(ce&&ce[Se]){const Ce=ce[Se];Ce.showCollisionBoxes=W.showCollisionBoxes,Ce.status==="parsing"?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,J):Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,J):J())}}abortTile(W,J){const ce=this.loading,Se=W.uid;ce&&ce[Se]&&ce[Se].abort&&(ce[Se].abort(),delete ce[Se]),J()}removeTile(W,J){const ce=this.loaded,Se=W.uid;ce&&ce[Se]&&delete ce[Se],J()}}class ${constructor(){this.loaded={}}loadTile(W,J){const{uid:ce,encoding:Se,rawImageData:Ce}=W,Re=l.isImageBitmap(Ce)?this.getImageData(Ce):Ce,Te=new l.DEMData(ce,Re,Se);this.loaded=this.loaded||{},this.loaded[ce]=Te,J(null,Te)}getImageData(W){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const J=this.offscreenCanvasContext.getImageData(-1,-1,W.width+2,W.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:J.width,height:J.height},J.data)}removeTile(W){const J=this.loaded,ce=W.uid;J&&J[ce]&&delete J[ce]}}function N(ye,W){if(ye.length!==0){Z(ye[0],W);for(var J=1;J<ye.length;J++)Z(ye[J],!W)}}function Z(ye,W){for(var J=0,ce=0,Se=0,Ce=ye.length,Re=Ce-1;Se<Ce;Re=Se++){var Te=(ye[Se][0]-ye[Re][0])*(ye[Re][1]+ye[Se][1]),Ae=J+Te;ce+=Math.abs(J)>=Math.abs(Te)?J-Ae+Te:Te-Ae+J,J=Ae}J+ce>=0!=!!W&&ye.reverse()}var R=l.getDefaultExportFromCjs(function ye(W,J){var ce,Se=W&&W.type;if(Se==="FeatureCollection")for(ce=0;ce<W.features.length;ce++)ye(W.features[ce],J);else if(Se==="GeometryCollection")for(ce=0;ce<W.geometries.length;ce++)ye(W.geometries[ce],J);else if(Se==="Feature")ye(W.geometry,J);else if(Se==="Polygon")N(W.coordinates,J);else if(Se==="MultiPolygon")for(ce=0;ce<W.coordinates.length;ce++)N(W.coordinates[ce],J);return W});const q=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},Q=l.pointGeometry,se=l.vectorTile.VectorTileFeature,ee=oe;function oe(ye,W){this.options=W||{},this.features=ye,this.length=ye.length}function xe(ye,W){this.id=typeof ye.id=="number"?ye.id:void 0,this.type=ye.type,this.rawGeometry=ye.type===1?[ye.geometry]:ye.geometry,this.properties=ye.tags,this.extent=W||4096}oe.prototype.feature=function(ye){return new xe(this.features[ye],this.options.extent)},xe.prototype.loadGeometry=function(){var ye=this.rawGeometry;this.geometry=[];for(var W=0;W<ye.length;W++){for(var J=ye[W],ce=[],Se=0;Se<J.length;Se++)ce.push(new Q(J[Se][0],J[Se][1]));this.geometry.push(ce)}return this.geometry},xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ye=this.geometry,W=1/0,J=-1/0,ce=1/0,Se=-1/0,Ce=0;Ce<ye.length;Ce++)for(var Re=ye[Ce],Te=0;Te<Re.length;Te++){var Ae=Re[Te];W=Math.min(W,Ae.x),J=Math.max(J,Ae.x),ce=Math.min(ce,Ae.y),Se=Math.max(Se,Ae.y)}return[W,ce,J,Se]},xe.prototype.toGeoJSON=se.prototype.toGeoJSON;var Oe=l.pbf,Le=ee;function qe(ye){var W=new Oe;return function(J,ce){for(var Se in J.layers)ce.writeMessage(3,$e,J.layers[Se])}(ye,W),W.finish()}function $e(ye,W){var J;W.writeVarintField(15,ye.version||1),W.writeStringField(1,ye.name||""),W.writeVarintField(5,ye.extent||4096);var ce={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<ye.length;J++)ce.feature=ye.feature(J),W.writeMessage(2,nt,ce);var Se=ce.keys;for(J=0;J<Se.length;J++)W.writeStringField(3,Se[J]);var Ce=ce.values;for(J=0;J<Ce.length;J++)W.writeMessage(4,Ve,Ce[J])}function nt(ye,W){var J=ye.feature;J.id!==void 0&&W.writeVarintField(1,J.id),W.writeMessage(2,pt,ye),W.writeVarintField(3,J.type),W.writeMessage(4,Vt,J)}function pt(ye,W){var J=ye.feature,ce=ye.keys,Se=ye.values,Ce=ye.keycache,Re=ye.valuecache;for(var Te in J.properties){var Ae=J.properties[Te],Ne=Ce[Te];if(Ae!==null){Ne===void 0&&(ce.push(Te),Ce[Te]=Ne=ce.length-1),W.writeVarint(Ne);var ot=typeof Ae;ot!=="string"&&ot!=="boolean"&&ot!=="number"&&(Ae=JSON.stringify(Ae));var at=ot+":"+Ae,st=Re[at];st===void 0&&(Se.push(Ae),Re[at]=st=Se.length-1),W.writeVarint(st)}}}function At(ye,W){return(W<<3)+(7&ye)}function zt(ye){return ye<<1^ye>>31}function Vt(ye,W){for(var J=ye.loadGeometry(),ce=ye.type,Se=0,Ce=0,Re=J.length,Te=0;Te<Re;Te++){var Ae=J[Te],Ne=1;ce===1&&(Ne=Ae.length),W.writeVarint(At(1,Ne));for(var ot=ce===3?Ae.length-1:Ae.length,at=0;at<ot;at++){at===1&&ce!==1&&W.writeVarint(At(2,ot-1));var st=Ae[at].x-Se,Jt=Ae[at].y-Ce;W.writeVarint(zt(st)),W.writeVarint(zt(Jt)),Se+=st,Ce+=Jt}ce===3&&W.writeVarint(At(7,1))}}function Ve(ye,W){var J=typeof ye;J==="string"?W.writeStringField(1,ye):J==="boolean"?W.writeBooleanField(7,ye):J==="number"&&(ye%1!=0?W.writeDoubleField(3,ye):ye<0?W.writeSVarintField(6,ye):W.writeVarintField(5,ye))}G.exports=qe,G.exports.fromVectorTileJs=qe,G.exports.fromGeojsonVt=function(ye,W){W=W||{};var J={};for(var ce in ye)J[ce]=new Le(ye[ce].features,W),J[ce].name=ce,J[ce].version=W.version,J[ce].extent=W.extent;return qe({layers:J})},G.exports.GeoJSONWrapper=Le;var _e=l.getDefaultExportFromCjs(G.exports);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},K=Math.fround||(ae=new Float32Array(1),ye=>(ae[0]=+ye,ae[0]));var ae;const lt=3,gt=5,Gt=6;class Dt{constructor(W){this.options=Object.assign(Object.create(we),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:J,minZoom:ce,maxZoom:Se}=this.options;J&&console.time("total time");const Ce=`prepare ${W.length} points`;J&&console.time(Ce),this.points=W;const Re=[];for(let Ae=0;Ae<W.length;Ae++){const Ne=W[Ae];if(!Ne.geometry)continue;const[ot,at]=Ne.geometry.coordinates,st=K(Xn(ot)),Jt=K(Qn(at));Re.push(st,Jt,1/0,Ae,-1,1),this.options.reduce&&Re.push(0)}let Te=this.trees[Se+1]=this._createTree(Re);J&&console.timeEnd(Ce);for(let Ae=Se;Ae>=ce;Ae--){const Ne=+Date.now();Te=this.trees[Ae]=this._createTree(this._cluster(Te,Ae)),J&&console.log("z%d: %d clusters in %dms",Ae,Te.numItems,+Date.now()-Ne)}return J&&console.timeEnd("total time"),this}getClusters(W,J){let ce=((W[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,W[1]));let Ce=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ce=-180,Ce=180;else if(ce>Ce){const at=this.getClusters([ce,Se,180,Re],J),st=this.getClusters([-180,Se,Ce,Re],J);return at.concat(st)}const Te=this.trees[this._limitZoom(J)],Ae=Te.range(Xn(ce),Qn(Re),Xn(Ce),Qn(Se)),Ne=Te.data,ot=[];for(const at of Ae){const st=this.stride*at;ot.push(Ne[st+gt]>1?Qt(Ne,st,this.clusterProps):this.points[Ne[st+lt]])}return ot}getChildren(W){const J=this._getOriginId(W),ce=this._getOriginZoom(W),Se="No cluster with the specified id.",Ce=this.trees[ce];if(!Ce)throw new Error(Se);const Re=Ce.data;if(J*this.stride>=Re.length)throw new Error(Se);const Te=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Ae=Ce.within(Re[J*this.stride],Re[J*this.stride+1],Te),Ne=[];for(const ot of Ae){const at=ot*this.stride;Re[at+4]===W&&Ne.push(Re[at+gt]>1?Qt(Re,at,this.clusterProps):this.points[Re[at+lt]])}if(Ne.length===0)throw new Error(Se);return Ne}getLeaves(W,J,ce){const Se=[];return this._appendLeaves(Se,W,J=J||10,ce=ce||0,0),Se}getTile(W,J,ce){const Se=this.trees[this._limitZoom(W)],Ce=Math.pow(2,W),{extent:Re,radius:Te}=this.options,Ae=Te/Re,Ne=(ce-Ae)/Ce,ot=(ce+1+Ae)/Ce,at={features:[]};return this._addTileFeatures(Se.range((J-Ae)/Ce,Ne,(J+1+Ae)/Ce,ot),Se.data,J,ce,Ce,at),J===0&&this._addTileFeatures(Se.range(1-Ae/Ce,Ne,1,ot),Se.data,Ce,ce,Ce,at),J===Ce-1&&this._addTileFeatures(Se.range(0,Ne,Ae/Ce,ot),Se.data,-1,ce,Ce,at),at.features.length?at:null}getClusterExpansionZoom(W){let J=this._getOriginZoom(W)-1;for(;J<=this.options.maxZoom;){const ce=this.getChildren(W);if(J++,ce.length!==1)break;W=ce[0].properties.cluster_id}return J}_appendLeaves(W,J,ce,Se,Ce){const Re=this.getChildren(J);for(const Te of Re){const Ae=Te.properties;if(Ae&&Ae.cluster?Ce+Ae.point_count<=Se?Ce+=Ae.point_count:Ce=this._appendLeaves(W,Ae.cluster_id,ce,Se,Ce):Ce<Se?Ce++:W.push(Te),W.length===ce)break}return Ce}_createTree(W){const J=new l.KDBush(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ce=0;ce<W.length;ce+=this.stride)J.add(W[ce],W[ce+1]);return J.finish(),J.data=W,J}_addTileFeatures(W,J,ce,Se,Ce,Re){for(const Te of W){const Ae=Te*this.stride,Ne=J[Ae+gt]>1;let ot,at,st;if(Ne)ot=un(J,Ae,this.clusterProps),at=J[Ae],st=J[Ae+1];else{const jt=this.points[J[Ae+lt]];ot=jt.properties;const[Zt,rn]=jt.geometry.coordinates;at=Xn(Zt),st=Qn(rn)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(at*Ce-ce)),Math.round(this.options.extent*(st*Ce-Se))]],tags:ot};let fn;fn=Ne||this.options.generateId?J[Ae+lt]:this.points[J[Ae+lt]].id,fn!==void 0&&(Jt.id=fn),Re.features.push(Jt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,J){const{radius:ce,extent:Se,reduce:Ce,minPoints:Re}=this.options,Te=ce/(Se*Math.pow(2,J)),Ae=W.data,Ne=[],ot=this.stride;for(let at=0;at<Ae.length;at+=ot){if(Ae[at+2]<=J)continue;Ae[at+2]=J;const st=Ae[at],Jt=Ae[at+1],fn=W.within(Ae[at],Ae[at+1],Te),jt=Ae[at+gt];let Zt=jt;for(const rn of fn){const Hn=rn*ot;Ae[Hn+2]>J&&(Zt+=Ae[Hn+gt])}if(Zt>jt&&Zt>=Re){let rn,Hn=st*jt,Wn=Jt*jt,Fn=-1;const Nn=((at/ot|0)<<5)+(J+1)+this.points.length;for(const wn of fn){const cr=wn*ot;if(Ae[cr+2]<=J)continue;Ae[cr+2]=J;const Lr=Ae[cr+gt];Hn+=Ae[cr]*Lr,Wn+=Ae[cr+1]*Lr,Ae[cr+4]=Nn,Ce&&(rn||(rn=this._map(Ae,at,!0),Fn=this.clusterProps.length,this.clusterProps.push(rn)),Ce(rn,this._map(Ae,cr)))}Ae[at+4]=Nn,Ne.push(Hn/Zt,Wn/Zt,1/0,Nn,-1,Zt),Ce&&Ne.push(Fn)}else{for(let rn=0;rn<ot;rn++)Ne.push(Ae[at+rn]);if(Zt>1)for(const rn of fn){const Hn=rn*ot;if(!(Ae[Hn+2]<=J)){Ae[Hn+2]=J;for(let Wn=0;Wn<ot;Wn++)Ne.push(Ae[Hn+Wn])}}}}return Ne}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,J,ce){if(W[J+gt]>1){const Re=this.clusterProps[W[J+Gt]];return ce?Object.assign({},Re):Re}const Se=this.points[W[J+lt]].properties,Ce=this.options.map(Se);return ce&&Ce===Se?Object.assign({},Ce):Ce}}function Qt(ye,W,J){return{type:"Feature",id:ye[W+lt],properties:un(ye,W,J),geometry:{type:"Point",coordinates:[(ce=ye[W],360*(ce-.5)),Bn(ye[W+1])]}};var ce}function un(ye,W,J){const ce=ye[W+gt],Se=ce>=1e4?`${Math.round(ce/1e3)}k`:ce>=1e3?Math.round(ce/100)/10+"k":ce,Ce=ye[W+Gt],Re=Ce===-1?{}:Object.assign({},J[Ce]);return Object.assign(Re,{cluster:!0,cluster_id:ye[W+lt],point_count:ce,point_count_abbreviated:Se})}function Xn(ye){return ye/360+.5}function Qn(ye){const W=Math.sin(ye*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function Bn(ye){const W=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function ei(ye,W,J,ce){for(var Se,Ce=ce,Re=J-W>>1,Te=J-W,Ae=ye[W],Ne=ye[W+1],ot=ye[J],at=ye[J+1],st=W+3;st<J;st+=3){var Jt=Je(ye[st],ye[st+1],Ae,Ne,ot,at);if(Jt>Ce)Se=st,Ce=Jt;else if(Jt===Ce){var fn=Math.abs(st-Re);fn<Te&&(Se=st,Te=fn)}}Ce>ce&&(Se-W>3&&ei(ye,W,Se,ce),ye[Se+2]=Ce,J-Se>3&&ei(ye,Se,J,ce))}function Je(ye,W,J,ce,Se,Ce){var Re=Se-J,Te=Ce-ce;if(Re!==0||Te!==0){var Ae=((ye-J)*Re+(W-ce)*Te)/(Re*Re+Te*Te);Ae>1?(J=Se,ce=Ce):Ae>0&&(J+=Re*Ae,ce+=Te*Ae)}return(Re=ye-J)*Re+(Te=W-ce)*Te}function yr(ye,W,J,ce){var Se={id:ye===void 0?null:ye,type:W,geometry:J,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var Re=Ce.geometry,Te=Ce.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Gi(Ce,Re);else if(Te==="Polygon"||Te==="MultiLineString")for(var Ae=0;Ae<Re.length;Ae++)Gi(Ce,Re[Ae]);else if(Te==="MultiPolygon")for(Ae=0;Ae<Re.length;Ae++)for(var Ne=0;Ne<Re[Ae].length;Ne++)Gi(Ce,Re[Ae][Ne])}(Se),Se}function Gi(ye,W){for(var J=0;J<W.length;J+=3)ye.minX=Math.min(ye.minX,W[J]),ye.minY=Math.min(ye.minY,W[J+1]),ye.maxX=Math.max(ye.maxX,W[J]),ye.maxY=Math.max(ye.maxY,W[J+1])}function Gn(ye,W,J,ce){if(W.geometry){var Se=W.geometry.coordinates,Ce=W.geometry.type,Re=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),Te=[],Ae=W.id;if(J.promoteId?Ae=W.properties[J.promoteId]:J.generateId&&(Ae=ce||0),Ce==="Point")_n(Se,Te);else if(Ce==="MultiPoint")for(var Ne=0;Ne<Se.length;Ne++)_n(Se[Ne],Te);else if(Ce==="LineString")_o(Se,Te,Re,!1);else if(Ce==="MultiLineString"){if(J.lineMetrics){for(Ne=0;Ne<Se.length;Ne++)_o(Se[Ne],Te=[],Re,!1),ye.push(yr(Ae,"LineString",Te,W.properties));return}Mo(Se,Te,Re,!1)}else if(Ce==="Polygon")Mo(Se,Te,Re,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(Ne=0;Ne<W.geometry.geometries.length;Ne++)Gn(ye,{id:Ae,geometry:W.geometry.geometries[Ne],properties:W.properties},J,ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ne=0;Ne<Se.length;Ne++){var ot=[];Mo(Se[Ne],ot,Re,!0),Te.push(ot)}}ye.push(yr(Ae,Ce,Te,W.properties))}}function _n(ye,W){W.push(Lo(ye[0])),W.push(ti(ye[1])),W.push(0)}function _o(ye,W,J,ce){for(var Se,Ce,Re=0,Te=0;Te<ye.length;Te++){var Ae=Lo(ye[Te][0]),Ne=ti(ye[Te][1]);W.push(Ae),W.push(Ne),W.push(0),Te>0&&(Re+=ce?(Se*Ne-Ae*Ce)/2:Math.sqrt(Math.pow(Ae-Se,2)+Math.pow(Ne-Ce,2))),Se=Ae,Ce=Ne}var ot=W.length-3;W[2]=1,ei(W,0,ot,J),W[ot+2]=1,W.size=Math.abs(Re),W.start=0,W.end=W.size}function Mo(ye,W,J,ce){for(var Se=0;Se<ye.length;Se++){var Ce=[];_o(ye[Se],Ce,J,ce),W.push(Ce)}}function Lo(ye){return ye/360+.5}function ti(ye){var W=Math.sin(ye*Math.PI/180),J=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return J<0?0:J>1?1:J}function Yn(ye,W,J,ce,Se,Ce,Re,Te){if(ce/=W,Ce>=(J/=W)&&Re<ce)return ye;if(Re<J||Ce>=ce)return null;for(var Ae=[],Ne=0;Ne<ye.length;Ne++){var ot=ye[Ne],at=ot.geometry,st=ot.type,Jt=Se===0?ot.minX:ot.minY,fn=Se===0?ot.maxX:ot.maxY;if(Jt>=J&&fn<ce)Ae.push(ot);else if(!(fn<J||Jt>=ce)){var jt=[];if(st==="Point"||st==="MultiPoint")Oo(at,jt,J,ce,Se);else if(st==="LineString")vo(at,jt,J,ce,Se,!1,Te.lineMetrics);else if(st==="MultiLineString")ni(at,jt,J,ce,Se,!1);else if(st==="Polygon")ni(at,jt,J,ce,Se,!0);else if(st==="MultiPolygon")for(var Zt=0;Zt<at.length;Zt++){var rn=[];ni(at[Zt],rn,J,ce,Se,!0),rn.length&&jt.push(rn)}if(jt.length){if(Te.lineMetrics&&st==="LineString"){for(Zt=0;Zt<jt.length;Zt++)Ae.push(yr(ot.id,st,jt[Zt],ot.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(jt.length===1?(st="LineString",jt=jt[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=jt.length===3?"Point":"MultiPoint"),Ae.push(yr(ot.id,st,jt,ot.tags))}}}return Ae.length?Ae:null}function Oo(ye,W,J,ce,Se){for(var Ce=0;Ce<ye.length;Ce+=3){var Re=ye[Ce+Se];Re>=J&&Re<=ce&&(W.push(ye[Ce]),W.push(ye[Ce+1]),W.push(ye[Ce+2]))}}function vo(ye,W,J,ce,Se,Ce,Re){for(var Te,Ae,Ne=vt(ye),ot=Se===0?le:Fe,at=ye.start,st=0;st<ye.length-3;st+=3){var Jt=ye[st],fn=ye[st+1],jt=ye[st+2],Zt=ye[st+3],rn=ye[st+4],Hn=Se===0?Jt:fn,Wn=Se===0?Zt:rn,Fn=!1;Re&&(Te=Math.sqrt(Math.pow(Jt-Zt,2)+Math.pow(fn-rn,2))),Hn<J?Wn>J&&(Ae=ot(Ne,Jt,fn,Zt,rn,J),Re&&(Ne.start=at+Te*Ae)):Hn>ce?Wn<ce&&(Ae=ot(Ne,Jt,fn,Zt,rn,ce),Re&&(Ne.start=at+Te*Ae)):We(Ne,Jt,fn,jt),Wn<J&&Hn>=J&&(Ae=ot(Ne,Jt,fn,Zt,rn,J),Fn=!0),Wn>ce&&Hn<=ce&&(Ae=ot(Ne,Jt,fn,Zt,rn,ce),Fn=!0),!Ce&&Fn&&(Re&&(Ne.end=at+Te*Ae),W.push(Ne),Ne=vt(ye)),Re&&(at+=Te)}var Nn=ye.length-3;Jt=ye[Nn],fn=ye[Nn+1],jt=ye[Nn+2],(Hn=Se===0?Jt:fn)>=J&&Hn<=ce&&We(Ne,Jt,fn,jt),Nn=Ne.length-3,Ce&&Nn>=3&&(Ne[Nn]!==Ne[0]||Ne[Nn+1]!==Ne[1])&&We(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&W.push(Ne)}function vt(ye){var W=[];return W.size=ye.size,W.start=ye.start,W.end=ye.end,W}function ni(ye,W,J,ce,Se,Ce){for(var Re=0;Re<ye.length;Re++)vo(ye[Re],W,J,ce,Se,Ce,!1)}function We(ye,W,J,ce){ye.push(W),ye.push(J),ye.push(ce)}function le(ye,W,J,ce,Se,Ce){var Re=(Ce-W)/(ce-W);return ye.push(Ce),ye.push(J+(Se-J)*Re),ye.push(1),Re}function Fe(ye,W,J,ce,Se,Ce){var Re=(Ce-J)/(Se-J);return ye.push(W+(ce-W)*Re),ye.push(Ce),ye.push(1),Re}function Pe(ye,W){for(var J=[],ce=0;ce<ye.length;ce++){var Se,Ce=ye[ce],Re=Ce.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")Se=rt(Ce.geometry,W);else if(Re==="MultiLineString"||Re==="Polygon"){Se=[];for(var Te=0;Te<Ce.geometry.length;Te++)Se.push(rt(Ce.geometry[Te],W))}else if(Re==="MultiPolygon")for(Se=[],Te=0;Te<Ce.geometry.length;Te++){for(var Ae=[],Ne=0;Ne<Ce.geometry[Te].length;Ne++)Ae.push(rt(Ce.geometry[Te][Ne],W));Se.push(Ae)}J.push(yr(Ce.id,Re,Se,Ce.tags))}return J}function rt(ye,W){var J=[];J.size=ye.size,ye.start!==void 0&&(J.start=ye.start,J.end=ye.end);for(var ce=0;ce<ye.length;ce+=3)J.push(ye[ce]+W,ye[ce+1],ye[ce+2]);return J}function bt(ye,W){if(ye.transformed)return ye;var J,ce,Se,Ce=1<<ye.z,Re=ye.x,Te=ye.y;for(J=0;J<ye.features.length;J++){var Ae=ye.features[J],Ne=Ae.geometry,ot=Ae.type;if(Ae.geometry=[],ot===1)for(ce=0;ce<Ne.length;ce+=2)Ae.geometry.push(vn(Ne[ce],Ne[ce+1],W,Ce,Re,Te));else for(ce=0;ce<Ne.length;ce++){var at=[];for(Se=0;Se<Ne[ce].length;Se+=2)at.push(vn(Ne[ce][Se],Ne[ce][Se+1],W,Ce,Re,Te));Ae.geometry.push(at)}}return ye.transformed=!0,ye}function vn(ye,W,J,ce,Se,Ce){return[Math.round(J*(ye*ce-Se)),Math.round(J*(W*ce-Ce))]}function Wt(ye,W,J,ce,Se){for(var Ce=W===Se.maxZoom?0:Se.tolerance/((1<<W)*Se.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ce,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Te=0;Te<ye.length;Te++){Re.numFeatures++,xt(Re,ye[Te],Ce,Se);var Ae=ye[Te].minX,Ne=ye[Te].minY,ot=ye[Te].maxX,at=ye[Te].maxY;Ae<Re.minX&&(Re.minX=Ae),Ne<Re.minY&&(Re.minY=Ne),ot>Re.maxX&&(Re.maxX=ot),at>Re.maxY&&(Re.maxY=at)}return Re}function xt(ye,W,J,ce){var Se=W.geometry,Ce=W.type,Re=[];if(Ce==="Point"||Ce==="MultiPoint")for(var Te=0;Te<Se.length;Te+=3)Re.push(Se[Te]),Re.push(Se[Te+1]),ye.numPoints++,ye.numSimplified++;else if(Ce==="LineString")$n(Re,Se,ye,J,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(Te=0;Te<Se.length;Te++)$n(Re,Se[Te],ye,J,Ce==="Polygon",Te===0);else if(Ce==="MultiPolygon")for(var Ae=0;Ae<Se.length;Ae++){var Ne=Se[Ae];for(Te=0;Te<Ne.length;Te++)$n(Re,Ne[Te],ye,J,!0,Te===0)}if(Re.length){var ot=W.tags||null;if(Ce==="LineString"&&ce.lineMetrics){for(var at in ot={},W.tags)ot[at]=W.tags[at];ot.mapbox_clip_start=Se.start/Se.size,ot.mapbox_clip_end=Se.end/Se.size}var st={geometry:Re,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:ot};W.id!==null&&(st.id=W.id),ye.features.push(st)}}function $n(ye,W,J,ce,Se,Ce){var Re=ce*ce;if(ce>0&&W.size<(Se?Re:ce))J.numPoints+=W.length/3;else{for(var Te=[],Ae=0;Ae<W.length;Ae+=3)(ce===0||W[Ae+2]>Re)&&(J.numSimplified++,Te.push(W[Ae]),Te.push(W[Ae+1])),J.numPoints++;Se&&function(Ne,ot){for(var at=0,st=0,Jt=Ne.length,fn=Jt-2;st<Jt;fn=st,st+=2)at+=(Ne[st]-Ne[fn])*(Ne[st+1]+Ne[fn+1]);if(at>0===ot)for(st=0,Jt=Ne.length;st<Jt/2;st+=2){var jt=Ne[st],Zt=Ne[st+1];Ne[st]=Ne[Jt-2-st],Ne[st+1]=Ne[Jt-1-st],Ne[Jt-2-st]=jt,Ne[Jt-1-st]=Zt}}(Te,Ce),ye.push(Te)}}function jn(ye,W){var J=(W=this.options=function(Se,Ce){for(var Re in Ce)Se[Re]=Ce[Re];return Se}(Object.create(this.options),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var ce=function(Se,Ce){var Re=[];if(Se.type==="FeatureCollection")for(var Te=0;Te<Se.features.length;Te++)Gn(Re,Se.features[Te],Ce,Te);else Gn(Re,Se.type==="Feature"?Se:{geometry:Se},Ce);return Re}(ye,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ce=function(Se,Ce){var Re=Ce.buffer/Ce.extent,Te=Se,Ae=Yn(Se,1,-1-Re,Re,0,-1,2,Ce),Ne=Yn(Se,1,1-Re,2+Re,0,-1,2,Ce);return(Ae||Ne)&&(Te=Yn(Se,1,-Re,1+Re,0,-1,2,Ce)||[],Ae&&(Te=Pe(Ae,1).concat(Te)),Ne&&(Te=Te.concat(Pe(Ne,-1)))),Te}(ce,W),ce.length&&this.splitTile(ce,0,0,0),J&&(ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bn(ye,W,J){return 32*((1<<ye)*J+W)+ye}function _r(ye,W){return W?ye.properties[W]:ye.id}function Mn(ye,W){if(ye==null)return!0;if(ye.type==="Feature")return _r(ye,W)!=null;if(ye.type==="FeatureCollection"){const J=new Set;for(const ce of ye.features){const Se=_r(ce,W);if(Se==null||J.has(Se))return!1;J.add(Se)}return!0}return!1}function On(ye,W){const J=new Map;if(ye!=null)if(ye.type==="Feature")J.set(_r(ye,W),ye);else for(const ce of ye.features)J.set(_r(ce,W),ce);return J}function La(ye,W){const J=ye.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const ce=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ce)return W(null,null);const Se=new class{constructor(Re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Re.length,this._features=Re}feature(Re){return new class{constructor(Te){this._feature=Te,this.extent=l.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const Ae of this._feature.geometry)Te.push([new l.Point(Ae[0],Ae[1])]);return Te}{const Te=[];for(const Ae of this._feature.geometry){const Ne=[];for(const ot of Ae)Ne.push(new l.Point(ot[0],ot[1]));Te.push(Ne)}return Te}}toGeoJSON(Te,Ae,Ne){return q.call(this,Te,Ae,Ne)}}(this._features[Re])}}(ce.features);let Ce=_e(Se);Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),W(null,{vectorTile:Se,rawData:Ce.buffer})}jn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},jn.prototype.splitTile=function(ye,W,J,ce,Se,Ce,Re){for(var Te=[ye,W,J,ce],Ae=this.options,Ne=Ae.debug;Te.length;){ce=Te.pop(),J=Te.pop(),W=Te.pop(),ye=Te.pop();var ot=1<<W,at=bn(W,J,ce),st=this.tiles[at];if(!st&&(Ne>1&&console.time("creation"),st=this.tiles[at]=Wt(ye,W,J,ce,Ae),this.tileCoords.push({z:W,x:J,y:ce}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,ce,st.numFeatures,st.numPoints,st.numSimplified),console.timeEnd("creation"));var Jt="z"+W;this.stats[Jt]=(this.stats[Jt]||0)+1,this.total++}if(st.source=ye,Se){if(W===Ae.maxZoom||W===Se)continue;var fn=1<<Se-W;if(J!==Math.floor(Ce/fn)||ce!==Math.floor(Re/fn))continue}else if(W===Ae.indexMaxZoom||st.numPoints<=Ae.indexMaxPoints)continue;if(st.source=null,ye.length!==0){Ne>1&&console.time("clipping");var jt,Zt,rn,Hn,Wn,Fn,Nn=.5*Ae.buffer/Ae.extent,wn=.5-Nn,cr=.5+Nn,Lr=1+Nn;jt=Zt=rn=Hn=null,Wn=Yn(ye,ot,J-Nn,J+cr,0,st.minX,st.maxX,Ae),Fn=Yn(ye,ot,J+wn,J+Lr,0,st.minX,st.maxX,Ae),ye=null,Wn&&(jt=Yn(Wn,ot,ce-Nn,ce+cr,1,st.minY,st.maxY,Ae),Zt=Yn(Wn,ot,ce+wn,ce+Lr,1,st.minY,st.maxY,Ae),Wn=null),Fn&&(rn=Yn(Fn,ot,ce-Nn,ce+cr,1,st.minY,st.maxY,Ae),Hn=Yn(Fn,ot,ce+wn,ce+Lr,1,st.minY,st.maxY,Ae),Fn=null),Ne>1&&console.timeEnd("clipping"),Te.push(jt||[],W+1,2*J,2*ce),Te.push(Zt||[],W+1,2*J,2*ce+1),Te.push(rn||[],W+1,2*J+1,2*ce),Te.push(Hn||[],W+1,2*J+1,2*ce+1)}}},jn.prototype.getTile=function(ye,W,J){var ce=this.options,Se=ce.extent,Ce=ce.debug;if(ye<0||ye>24)return null;var Re=1<<ye,Te=bn(ye,W=(W%Re+Re)%Re,J);if(this.tiles[Te])return bt(this.tiles[Te],Se);Ce>1&&console.log("drilling down to z%d-%d-%d",ye,W,J);for(var Ae,Ne=ye,ot=W,at=J;!Ae&&Ne>0;)Ne--,ot=Math.floor(ot/2),at=Math.floor(at/2),Ae=this.tiles[bn(Ne,ot,at)];return Ae&&Ae.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",Ne,ot,at),Ce>1&&console.time("drilling down"),this.splitTile(Ae.source,Ne,ot,at,ye,W,J),Ce>1&&console.timeEnd("drilling down"),this.tiles[Te]?bt(this.tiles[Te],Se):null):null};class ri extends F{constructor(W,J,ce,Se){super(W,J,ce,La),this._dataUpdateable=new Map,this.loadGeoJSON=(Ce,Re)=>{const{promoteId:Te}=Ce;if(Ce.request)return l.getJSON(Ce.request,(Ae,Ne,ot,at)=>{this._dataUpdateable=Mn(Ne,Te)?On(Ne,Te):void 0,Re(Ae,Ne,ot,at)});if(typeof Ce.data=="string")try{const Ae=JSON.parse(Ce.data);this._dataUpdateable=Mn(Ae,Te)?On(Ae,Te):void 0,Re(null,Ae)}catch{Re(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`))}else Ce.dataDiff?this._dataUpdateable?(function(Ae,Ne,ot){var at,st,Jt,fn;if(Ne.removeAll&&Ae.clear(),Ne.remove)for(const jt of Ne.remove)Ae.delete(jt);if(Ne.add)for(const jt of Ne.add){const Zt=_r(jt,ot);Zt!=null&&Ae.set(Zt,jt)}if(Ne.update)for(const jt of Ne.update){let Zt=Ae.get(jt.id);if(Zt==null)continue;const rn=!jt.removeAllProperties&&(((at=jt.removeProperties)===null||at===void 0?void 0:at.length)>0||((st=jt.addOrUpdateProperties)===null||st===void 0?void 0:st.length)>0);if((jt.newGeometry||jt.removeAllProperties||rn)&&(Zt={...Zt},Ae.set(jt.id,Zt),rn&&(Zt.properties={...Zt.properties})),jt.newGeometry&&(Zt.geometry=jt.newGeometry),jt.removeAllProperties)Zt.properties={};else if(((Jt=jt.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const Hn of jt.removeProperties)Object.prototype.hasOwnProperty.call(Zt.properties,Hn)&&delete Zt.properties[Hn];if(((fn=jt.addOrUpdateProperties)===null||fn===void 0?void 0:fn.length)>0)for(const{key:Hn,value:Wn}of jt.addOrUpdateProperties)Zt.properties[Hn]=Wn}}(this._dataUpdateable,Ce.dataDiff,Te),Re(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Re(new Error(`Cannot update existing geojson data in ${Ce.source}`)):Re(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Se&&(this.loadGeoJSON=Se)}loadData(W,J){var ce;(ce=this._pendingRequest)===null||ce===void 0||ce.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Se=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.RequestPerformance(W.request);this._pendingCallback=J,this._pendingRequest=this.loadGeoJSON(W,(Ce,Re)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ce||!Re)return J(Ce);if(typeof Re!="object")return J(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{R(Re,!0);try{if(W.filter){const Ae=l.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ae.result==="error")throw new Error(Ae.value.map(ot=>`${ot.key}: ${ot.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(ot=>Ae.value.evaluate({zoom:0},ot))}}this._geoJSONIndex=W.cluster?new Dt(function({superclusterOptions:Ae,clusterProperties:Ne}){if(!Ne||!Ae)return Ae;const ot={},at={},st={accumulated:null,zoom:0},Jt={properties:null},fn=Object.keys(Ne);for(const jt of fn){const[Zt,rn]=Ne[jt],Hn=l.createExpression(rn),Wn=l.createExpression(typeof Zt=="string"?[Zt,["accumulated"],["get",jt]]:Zt);ot[jt]=Hn.value,at[jt]=Wn.value}return Ae.map=jt=>{Jt.properties=jt;const Zt={};for(const rn of fn)Zt[rn]=ot[rn].evaluate(st,Jt);return Zt},Ae.reduce=(jt,Zt)=>{Jt.properties=Zt;for(const rn of fn)st.accumulated=jt[rn],jt[rn]=at[rn].evaluate(st,Jt)},Ae}(W)).load(Re.features):function(Ae,Ne){return new jn(Ae,Ne)}(Re,W.geojsonVtOptions)}catch(Ae){return J(Ae)}this.loaded={};const Te={};if(Se){const Ae=Se.finish();Ae&&(Te.resourceTiming={},Te.resourceTiming[W.source]=JSON.parse(JSON.stringify(Ae)))}J(null,Te)}})}reloadTile(W,J){const ce=this.loaded;return ce&&ce[W.uid]?super.reloadTile(W,J):this.loadTile(W,J)}removeSource(W,J){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),J()}getClusterExpansionZoom(W,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(ce){J(ce)}}getClusterChildren(W,J){try{J(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(ce){J(ce)}}getClusterLeaves(W,J){try{J(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(ce){J(ce)}}}class wr{constructor(W){this.self=W,this.actor=new l.Actor(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:F,geojson:ri},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ce)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ce},this.self.registerRTLTextPlugin=J=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=J.applyArabicShaping,l.plugin.processBidirectionalText=J.processBidirectionalText,l.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}setReferrer(W,J){this.referrer=J}setImages(W,J,ce){this.availableImages[W]=J;for(const Se in this.workerSources[W]){const Ce=this.workerSources[W][Se];for(const Re in Ce)Ce[Re].availableImages=J}ce()}setLayers(W,J,ce){this.getLayerIndex(W).replace(J),ce()}updateLayers(W,J,ce){this.getLayerIndex(W).update(J.layers,J.removedIds),ce()}loadTile(W,J,ce){this.getWorkerSource(W,J.type,J.source).loadTile(J,ce)}loadDEMTile(W,J,ce){this.getDEMWorkerSource(W,J.source).loadTile(J,ce)}reloadTile(W,J,ce){this.getWorkerSource(W,J.type,J.source).reloadTile(J,ce)}abortTile(W,J,ce){this.getWorkerSource(W,J.type,J.source).abortTile(J,ce)}removeTile(W,J,ce){this.getWorkerSource(W,J.type,J.source).removeTile(J,ce)}removeDEMTile(W,J){this.getDEMWorkerSource(W,J.source).removeTile(J)}removeSource(W,J,ce){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;const Se=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],Se.removeSource!==void 0?Se.removeSource(J,ce):ce()}loadWorkerSource(W,J,ce){try{this.self.importScripts(J.url),ce()}catch(Se){ce(Se.toString())}}syncRTLPluginState(W,J,ce){try{l.plugin.setState(J);const Se=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const Ce=l.plugin.isParsed();ce(Ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),Ce)}}catch(Se){ce(Se.toString())}}getAvailableImages(W){let J=this.availableImages[W];return J||(J=[]),J}getLayerIndex(W){let J=this.layerIndexes[W];return J||(J=this.layerIndexes[W]=new x),J}getWorkerSource(W,J,ce){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][J]||(this.workerSources[W][J]={}),!this.workerSources[W][J][ce]){const Se={send:(Ce,Re,Te)=>{this.actor.send(Ce,Re,Te,W)}};this.workerSources[W][J][ce]=new this.workerSourceTypes[J](Se,this.getLayerIndex(W),this.getAvailableImages(W))}return this.workerSources[W][J][ce]}getDEMWorkerSource(W,J){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][J]||(this.demWorkerSources[W][J]=new $),this.demWorkerSources[W][J]}}return l.isWorker()&&(self.worker=new wr(self)),wr}),c(["./shared"],function(l){var x="3.2.1";class b{static testProp(o){if(!b.docStyle)return o[0];for(let h=0;h<o.length;h++)if(o[h]in b.docStyle)return o[h];return o[0]}static create(o,h,m){const _=window.document.createElement(o);return h!==void 0&&(_.className=h),m&&m.appendChild(_),_}static createNS(o,h){return window.document.createElementNS(o,h)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(o,h){o.style[b.transformProp]=h}static addEventListener(o,h,m,_={}){o.addEventListener(h,m,"passive"in _?_:_.capture)}static removeEventListener(o,h,m,_={}){o.removeEventListener(h,m,"passive"in _?_:_.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(o,h){const m=o.getBoundingClientRect();return new l.Point(h.clientX-m.left-o.clientLeft,h.clientY-m.top-o.clientTop)}static touchPos(o,h){const m=o.getBoundingClientRect(),_=[];for(let w=0;w<h.length;w++)_.push(new l.Point(h[w].clientX-m.left-o.clientLeft,h[w].clientY-m.top-o.clientTop));return _}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function(v){!F&&L&&($?N(v):A=v)}};let A,L,F=!1,$=!1;function N(v){const o=v.createTexture();v.bindTexture(v.TEXTURE_2D,o);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,L),v.isContextLost())return;E.supported=!0}catch{}v.deleteTexture(o),F=!0}var Z,R;typeof document<"u"&&(L=document.createElement("img"),L.onload=function(){A&&N(A),A=null,$=!0},L.onerror=function(){F=!0,A=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let o,h,m,_;v.resetRequestQueue=()=>{o=[],h=0,m=0,_={}},v.addThrottleControl=D=>{const U=m++;return _[U]=D,U},v.removeThrottleControl=D=>{delete _[D],I()},v.getImage=(D,U,V=!0)=>{E.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const ne={requestParameters:D,supportImageRefresh:V,callback:U,cancelled:!1,completed:!1,cancel:()=>{ne.completed||ne.cancelled||(ne.cancelled=!0,ne.innerRequest&&(ne.innerRequest.cancel(),h--),I())}};return o.push(ne),I(),ne};const w=D=>{const{requestParameters:U,supportImageRefresh:V,callback:ne}=D;return l.extend(U,{type:"image"}),(V!==!1||l.isWorker()||l.getProtocolAction(U.url)||U.headers&&!Object.keys(U.headers).reduce((fe,he)=>fe&&he==="accept",!0)?l.makeRequest:O)(U,(fe,he,de,me)=>{P(D,ne,fe,he,de,me)})},P=(D,U,V,ne,fe,he)=>{V?U(V):ne instanceof HTMLImageElement||ne instanceof ImageBitmap?U(null,ne):ne&&((de,me)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(de,me):l.arrayBufferToImage(de,me)})(ne,(de,me)=>{de!=null?U(de):me!=null&&U(null,me,{cacheControl:fe,expires:he})}),D.cancelled||(D.completed=!0,h--,I())},I=()=>{const D=(()=>{const U=Object.keys(_);let V=!1;if(U.length>0){for(const ne of U)if(V=_[ne](),V)break}return V})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=h;U<D&&o.length>0;U++){const V=o.shift();if(V.cancelled){U--;continue}const ne=w(V);h++,V.innerRequest=ne}},O=(D,U)=>{const V=new Image,ne=D.url;let fe=!1;const he=D.credentials;return he&&he==="include"?V.crossOrigin="use-credentials":(he&&he==="same-origin"||!l.sameOrigin(ne))&&(V.crossOrigin="anonymous"),V.fetchPriority="high",V.onload=()=>{U(null,V),V.onerror=V.onload=null},V.onerror=()=>{fe||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),V.onerror=V.onload=null},V.src=ne,{cancel:()=>{fe=!0,V.src=""}}}}(Z||(Z={})),Z.resetRequestQueue(),function(v){v.Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown"}(R||(R={}));class q{constructor(o){this._transformRequestFn=o}transformRequest(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}}normalizeSpriteURL(o,h,m){const _=function(w){const P=w.match(G);if(!P)throw new Error(`Unable to parse URL "${w}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(o);return _.path+=`${h}${m}`,function(w){const P=w.params.length?`?${w.params.join("&")}`:"";return`${w.protocol}://${w.authority}${w.path}${P}`}(_)}setTransformRequest(o){this._transformRequestFn=o}}const G=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(v){var o=new l.ARRAY_TYPE(3);return o[0]=v[0],o[1]=v[1],o[2]=v[2],o}var se,ee=function(v,o,h){return v[0]=o[0]-h[0],v[1]=o[1]-h[1],v[2]=o[2]-h[2],v};se=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(se[0]=0,se[1]=0,se[2]=0);var oe=function(v){var o=v[0],h=v[1];return o*o+h*h};function xe(v){const o=[];if(typeof v=="string")o.push({id:"default",url:v});else if(v&&v.length>0){const h=[];for(const{id:m,url:_}of v){const w=`${m}${_}`;h.indexOf(w)===-1&&(h.push(w),o.push({id:m,url:_}))}}return o}function Oe(v,o,h,m,_){if(m)return void v(m);if(_!==Object.values(o).length||_!==Object.values(h).length)return;const w={};for(const P in o){w[P]={};const I=l.browser.getImageCanvasContext(h[P]),O=o[P];for(const D in O){const{width:U,height:V,x:ne,y:fe,sdf:he,pixelRatio:de,stretchX:me,stretchY:Me,content:je}=O[D];w[P][D]={data:null,pixelRatio:de,sdf:he,stretchX:me,stretchY:Me,content:je,spriteData:{width:U,height:V,x:ne,y:fe,context:I}}}}v(null,w)}(function(){var v=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(v[0]=0,v[1]=0)})();class Le{constructor(o,h,m,_){this.context=o,this.format=m,this.texture=o.gl.createTexture(),this.update(h,_)}update(o,h,m){const{width:_,height:w}=o,P=!(this.size&&this.size[0]===_&&this.size[1]===w||m),{context:I}=this,{gl:O}=I;if(this.useMipmap=!!(h&&h.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!h||h.premultiply!==!1)),P)this.size=[_,w],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,o):O.texImage2D(O.TEXTURE_2D,0,this.format,_,w,0,this.format,O.UNSIGNED_BYTE,o.data);else{const{x:D,y:U}=m||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texSubImage2D(O.TEXTURE_2D,0,D,U,O.RGBA,O.UNSIGNED_BYTE,o):O.texSubImage2D(O.TEXTURE_2D,0,D,U,_,w,O.RGBA,O.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(o,h,m){const{context:_}=this,{gl:w}=_;w.bindTexture(w.TEXTURE_2D,this.texture),m!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=w.LINEAR),o!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,o),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,m||o),this.filter=o),h!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,h),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function qe(v){const{userImage:o}=v;return!!(o&&o.render&&o.render())&&(v.data.replace(new Uint8Array(o.data.buffer)),!0)}class $e extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:h,callback:m}of this.requestors)this._notify(h,m);this.requestors=[]}}getImage(o){const h=this.images[o];if(h&&!h.data&&h.spriteData){const m=h.spriteData;h.data=new l.RGBAImage({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),h.spriteData=null}return h}addImage(o,h){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,h)&&(this.images[o]=h)}_validate(o,h){let m=!0;const _=h.data||h.spriteData;return this._validateStretch(h.stretchX,_&&_.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),m=!1),this._validateStretch(h.stretchY,_&&_.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),m=!1),this._validateContent(h.content,h)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),m=!1),m}_validateStretch(o,h){if(!o)return!0;let m=0;for(const _ of o){if(_[0]<m||_[1]<_[0]||h<_[1])return!1;m=_[1]}return!0}_validateContent(o,h){if(!o)return!0;if(o.length!==4)return!1;const m=h.spriteData,_=m&&m.width||h.data.width,w=m&&m.height||h.data.height;return!(o[0]<0||_<o[0]||o[1]<0||w<o[1]||o[2]<0||_<o[2]||o[3]<0||w<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,h,m=!0){const _=this.getImage(o);if(m&&(_.data.width!==h.data.width||_.data.height!==h.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[o]=h,this.updatedImages[o]=!0}removeImage(o){const h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,h){let m=!0;if(!this.isLoaded())for(const _ of o)this.images[_]||(m=!1);this.isLoaded()||m?this._notify(o,h):this.requestors.push({ids:o,callback:h})}_notify(o,h){const m={};for(const _ of o){let w=this.getImage(_);w||(this.fire(new l.Event("styleimagemissing",{id:_})),w=this.getImage(_)),w?m[_]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:l.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,m)}getPixelSize(){const{width:o,height:h}=this.atlasImage;return{width:o,height:h}}getPattern(o){const h=this.patterns[o],m=this.getImage(o);if(!m)return null;if(h&&h.position.version===m.version)return h.position;if(h)h.position.version=m.version;else{const _={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new l.ImagePosition(_,m);this.patterns[o]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Le(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const w in this.patterns)o.push(this.patterns[w].bin);const{w:h,h:m}=l.potpack(o),_=this.atlasImage;_.resize({width:h||1,height:m||1});for(const w in this.patterns){const{bin:P}=this.patterns[w],I=P.x+1,O=P.y+1,D=this.getImage(w).data,U=D.width,V=D.height;l.RGBAImage.copy(D,_,{x:0,y:0},{x:I,y:O},{width:U,height:V}),l.RGBAImage.copy(D,_,{x:0,y:V-1},{x:I,y:O-1},{width:U,height:1}),l.RGBAImage.copy(D,_,{x:0,y:0},{x:I,y:O+V},{width:U,height:1}),l.RGBAImage.copy(D,_,{x:U-1,y:0},{x:I-1,y:O},{width:1,height:V}),l.RGBAImage.copy(D,_,{x:0,y:0},{x:I+U,y:O},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const h of o){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const m=this.getImage(h);m||l.warnOnce(`Image with ID: "${h}" was not found`),qe(m)&&this.updateImage(h,m)}}}const nt=1e20;function pt(v,o,h,m,_,w,P,I,O){for(let D=o;D<o+m;D++)At(v,h*w+D,w,_,P,I,O);for(let D=h;D<h+_;D++)At(v,D*w+o,1,m,P,I,O)}function At(v,o,h,m,_,w,P){w[0]=0,P[0]=-nt,P[1]=nt,_[0]=v[o];for(let I=1,O=0,D=0;I<m;I++){_[I]=v[o+I*h];const U=I*I;do{const V=w[O];D=(_[I]-_[V]+U-V*V)/(I-V)/2}while(D<=P[O]&&--O>-1);O++,w[O]=I,P[O]=D,P[O+1]=nt}for(let I=0,O=0;I<m;I++){for(;P[O+1]<I;)O++;const D=w[O],U=I-D;v[o+I*h]=_[D]+U*U}}class zt{constructor(o,h){this.requestManager=o,this.localIdeographFontFamily=h,this.entries={}}setURL(o){this.url=o}getGlyphs(o,h){const m=[];for(const _ in o)for(const w of o[_])m.push({stack:_,id:w});l.asyncAll(m,({stack:_,id:w},P)=>{let I=this.entries[_];I||(I=this.entries[_]={glyphs:{},requests:{},ranges:{}});let O=I.glyphs[w];if(O!==void 0)return void P(null,{stack:_,id:w,glyph:O});if(O=this._tinySDF(I,_,w),O)return I.glyphs[w]=O,void P(null,{stack:_,id:w,glyph:O});const D=Math.floor(w/256);if(256*D>65535)return void P(new Error("glyphs > 65535 not supported"));if(I.ranges[D])return void P(null,{stack:_,id:w,glyph:O});if(!this.url)return void P(new Error("glyphsUrl is not set"));let U=I.requests[D];U||(U=I.requests[D]=[],zt.loadGlyphRange(_,D,this.url,this.requestManager,(V,ne)=>{if(ne){for(const fe in ne)this._doesCharSupportLocalGlyph(+fe)||(I.glyphs[+fe]=ne[+fe]);I.ranges[D]=!0}for(const fe of U)fe(V,ne);delete I.requests[D]})),U.push((V,ne)=>{V?P(V):ne&&P(null,{stack:_,id:w,glyph:ne[w]||null})})},(_,w)=>{if(_)h(_);else if(w){const P={};for(const{stack:I,id:O,glyph:D}of w)(P[I]||(P[I]={}))[O]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};h(null,P)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](o)||l.unicodeBlockLookup["Hangul Syllables"](o)||l.unicodeBlockLookup.Hiragana(o)||l.unicodeBlockLookup.Katakana(o))}_tinySDF(o,h,m){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(m))return;let w=o.tinySDF;if(!w){let I="400";/bold/i.test(h)?I="900":/medium/i.test(h)?I="500":/light/i.test(h)&&(I="200"),w=o.tinySDF=new zt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:_,fontWeight:I})}const P=w.draw(String.fromCharCode(m));return{id:m,bitmap:new l.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}zt.loadGlyphRange=function(v,o,h,m,_){const w=256*o,P=w+255,I=m.transformRequest(h.replace("{fontstack}",v).replace("{range}",`${w}-${P}`),R.Glyphs);l.getArrayBuffer(I,(O,D)=>{if(O)_(O);else if(D){const U={};for(const V of l.parseGlyphPbf(D))U[V.id]=V;_(null,U)}})},zt.TinySDF=class{constructor({fontSize:v=24,buffer:o=3,radius:h=8,cutoff:m=.25,fontFamily:_="sans-serif",fontWeight:w="normal",fontStyle:P="normal"}={}){this.buffer=o,this.cutoff=m,this.radius=h;const I=this.size=v+4*o,O=this._createCanvas(I),D=this.ctx=O.getContext("2d",{willReadFrequently:!0});D.font=`${P} ${w} ${v}px ${_}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(v){const o=document.createElement("canvas");return o.width=o.height=v,o}draw(v){const{width:o,actualBoundingBoxAscent:h,actualBoundingBoxDescent:m,actualBoundingBoxLeft:_,actualBoundingBoxRight:w}=this.ctx.measureText(v),P=Math.ceil(h),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-_))),O=Math.min(this.size-this.buffer,P+Math.ceil(m)),D=I+2*this.buffer,U=O+2*this.buffer,V=Math.max(D*U,0),ne=new Uint8ClampedArray(V),fe={data:ne,width:D,height:U,glyphWidth:I,glyphHeight:O,glyphTop:P,glyphLeft:0,glyphAdvance:o};if(I===0||O===0)return fe;const{ctx:he,buffer:de,gridInner:me,gridOuter:Me}=this;he.clearRect(de,de,I,O),he.fillText(v,de,de+P);const je=he.getImageData(de,de,I,O);Me.fill(nt,0,V),me.fill(0,0,V);for(let be=0;be<O;be++)for(let Ue=0;Ue<I;Ue++){const Ze=je.data[4*(be*I+Ue)+3]/255;if(Ze===0)continue;const Ke=(be+de)*D+Ue+de;if(Ze===1)Me[Ke]=0,me[Ke]=nt;else{const tt=.5-Ze;Me[Ke]=tt>0?tt*tt:0,me[Ke]=tt<0?tt*tt:0}}pt(Me,0,0,D,U,D,this.f,this.v,this.z),pt(me,de,de,I,O,D,this.f,this.v,this.z);for(let be=0;be<V;be++){const Ue=Math.sqrt(Me[be])-Math.sqrt(me[be]);ne[be]=Math.round(255-255*(Ue/this.radius+this.cutoff))}return fe}};class Vt{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(o,h){return l.sphericalToCartesian(o.expression.evaluate(h))}interpolate(o,h,m){return{x:l.interpolate.number(o.x,h.x,m),y:l.interpolate.number(o.y,h.y,m),z:l.interpolate.number(o.z,h.z,m)}}}let Ve,_e;class we extends l.Evented{constructor(o){super(),Ve=Ve||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new Vt,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable(Ve),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,h={}){if(!this._validate(l.validateLight,o,h))for(const m in o){const _=o[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),_):this._transitionable.setValue(m,_)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,h,m){return(!m||m.validate!==!1)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class K{constructor(o,h){this.width=o,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,h){const m=o.join(",")+String(h);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(o,h)),this.dashEntry[m]}getDashRanges(o,h,m){const _=[];let w=o.length%2==1?-o[o.length-1]*m:0,P=o[0]*m,I=!0;_.push({left:w,right:P,isDash:I,zeroLength:o[0]===0});let O=o[0];for(let D=1;D<o.length;D++){I=!I;const U=o[D];w=O*m,O+=U,P=O*m,_.push({left:w,right:P,isDash:I,zeroLength:U===0})}return _}addRoundDash(o,h,m){const _=h/2;for(let w=-m;w<=m;w++){const P=this.width*(this.nextRow+m+w);let I=0,O=o[I];for(let D=0;D<this.width;D++){D/O.right>1&&(O=o[++I]);const U=Math.abs(D-O.left),V=Math.abs(D-O.right),ne=Math.min(U,V);let fe;const he=w/m*(_+1);if(O.isDash){const de=_-Math.abs(he);fe=Math.sqrt(ne*ne+de*de)}else fe=_-Math.sqrt(ne*ne+he*he);this.data[P+D]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(o){for(let I=o.length-1;I>=0;--I){const O=o[I],D=o[I+1];O.zeroLength?o.splice(I,1):D&&D.isDash===O.isDash&&(D.left=O.left,o.splice(I,1))}const h=o[0],m=o[o.length-1];h.isDash===m.isDash&&(h.left=m.left-this.width,m.right=h.right+this.width);const _=this.width*this.nextRow;let w=0,P=o[w];for(let I=0;I<this.width;I++){I/P.right>1&&(P=o[++w]);const O=Math.abs(I-P.left),D=Math.abs(I-P.right),U=Math.min(O,D);this.data[_+I]=Math.max(0,Math.min(255,(P.isDash?U:-U)+128))}}addDash(o,h){const m=h?7:0,_=2*m+1;if(this.nextRow+_>this.height)return l.warnOnce("LineAtlas out of space"),null;let w=0;for(let I=0;I<o.length;I++)w+=o[I];if(w!==0){const I=this.width/w,O=this.getDashRanges(o,this.width,I);h?this.addRoundDash(O,I,m):this.addRegularDash(O)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:w};return this.nextRow+=_,this.dirty=!0,P}bind(o){const h=o.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class ae{constructor(o,h,m){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=m;const _=this.workerPool.acquire(m);for(let w=0;w<_.length;w++){const P=new ae.Actor(_[w],h,m);P.name=`Worker ${w}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,h,m){l.asyncAll(this.actors,(_,w)=>{_.send(o,h,w)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}}function lt(v,o,h){const m=function(_,w){if(_)return h(_);if(w){const P=l.pick(l.extend(w,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(P.vectorLayers=w.vector_layers,P.vectorLayerIds=P.vectorLayers.map(I=>I.id)),h(null,P)}};return v.url?l.getJSON(o.transformRequest(v.url,R.Source),m):l.browser.frame(()=>m(null,v))}ae.Actor=l.Actor;class gt{constructor(o,h){o&&(h?this.setSouthWest(o).setNorthEast(h):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}setSouthWest(o){return this._sw=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}extend(o){const h=this._sw,m=this._ne;let _,w;if(o instanceof l.LngLat)_=o,w=o;else{if(!(o instanceof gt))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(gt.convert(o)):this.extend(l.LngLat.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(l.LngLat.convert(o)):this;if(_=o._sw,w=o._ne,!_||!w)return this}return h||m?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),m.lng=Math.max(w.lng,m.lng),m.lat=Math.max(w.lat,m.lat)):(this._sw=new l.LngLat(_.lng,_.lat),this._ne=new l.LngLat(w.lng,w.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:h,lat:m}=l.LngLat.convert(o);let _=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&_}static convert(o){return o instanceof gt?o:o&&new gt(o)}static fromLngLat(o,h=0){const m=360*h/40075017,_=m/Math.cos(Math.PI/180*o.lat);return new gt(new l.LngLat(o.lng-_,o.lat-m),new l.LngLat(o.lng+_,o.lat+m))}}class Gt{constructor(o,h,m){this.bounds=gt.convert(this.validateBounds(o)),this.minzoom=h||0,this.maxzoom=m||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const h=Math.pow(2,o.z),m=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*h),_=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*h),P=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*h);return o.x>=m&&o.x<w&&o.y>=_&&o.y<P}}class Dt extends l.Evented{constructor(o,h,m,_){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,(w,P)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),w?this.fire(new l.ErrorEvent(w)):P&&(l.extend(this,P),P.bounds&&(this.tileBounds=new Gt(P.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.extend({},this._options),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(h,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(o,h){const m=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(m,R.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(P,I){return delete o.request,o.aborted?h(null):P&&P.status!==404?h(P):(I&&I.resourceTiming&&(o.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&o.setExpiryData(I),o.loadVectorData(I,this.map.painter),h(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=h:o.request=o.actor.send("reloadTile",_,w.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",_,w.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Qt extends l.Evented{constructor(o,h,m,_){super(),this.id=o,this.dispatcher=m,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},h),l.extend(this,l.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new l.ErrorEvent(o)):h&&(l.extend(this,h),h.bounds&&(this.tileBounds=new Gt(h.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,h){const m=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=Z.getImage(this.map._requestManager.transformRequest(m,R.Tile),(_,w,P)=>{if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(_)o.state="errored",h(_);else if(w){this.map._refreshExpiredTiles&&P&&o.setExpiryData(P);const I=this.map.painter.context,O=I.gl;o.texture=this.map.painter.getTileTexture(w.width),o.texture?o.texture.update(w,{useMipmap:!0}):(o.texture=new Le(I,w,O.RGBA,{useMipmap:!0}),o.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),o.state="loaded",h(null)}},this.map._refreshExpiredTiles)}abortTile(o,h){o.request&&(o.request.cancel(),delete o.request),h()}unloadTile(o,h){o.texture&&this.map.painter.saveTileTexture(o.texture),h()}hasTransition(){return!1}}class un extends Qt{constructor(o,h,m,_){super(o,h,m,_),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}loadTile(o,h){const m=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function _(w,P){w&&(o.state="errored",h(w)),P&&(o.dem=P,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",h(null))}o.request=Z.getImage(this.map._requestManager.transformRequest(m,R.Tile),(function(w,P){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(w)o.state="errored",h(w);else if(P){this.map._refreshExpiredTiles&&o.setExpiryData(P),delete P.cacheControl,delete P.expires;const I=l.isImageBitmap(P)&&(_e==null&&(_e=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_e)?P:l.browser.getImageData(P,1),O={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:I,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",O,_.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const h=o.canonical,m=Math.pow(2,h.z),_=(h.x-1+m)%m,w=h.x===0?o.wrap-1:o.wrap,P=(h.x+1+m)%m,I=h.x+1===m?o.wrap+1:o.wrap,O={};return O[new l.OverscaledTileID(o.overscaledZ,w,h.z,_,h.y).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,I,h.z,P,h.y).key]={backfilled:!1},h.y>0&&(O[new l.OverscaledTileID(o.overscaledZ,w,h.z,_,h.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,I,h.z,P,h.y-1).key]={backfilled:!1}),h.y+1<m&&(O[new l.OverscaledTileID(o.overscaledZ,w,h.z,_,h.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,I,h.z,P,h.y+1).key]={backfilled:!1}),O}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class Xn extends l.Evented{constructor(o,h,m,_){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.extend({},this._options,{type:this.type,data:this._data}),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(_),this._data=h.data,this._options=l.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const w=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*w,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*w,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:l.EXTENT,radius:(h.clusterRadius||50)*w,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},h),this}getClusterChildren(o,h){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},h),this}getClusterLeaves(o,h,m,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:h,offset:m},_),this}_updateWorkerData(o){const h=l.extend({},this.workerOptions);o?h.dataDiff=o:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(l.browser.resolveURL(this._data),R.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(m,_)=>{if(this._pendingLoads--,this._removed||_&&_.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let w=null;if(_&&_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0)),m)return void this.fire(new l.ErrorEvent(m));const P={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&l.extend(P,{resourceTiming:w}),this.fire(new l.Event("data",{...P,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...P,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(o,h){const m=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const _={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(m,_,(w,P)=>(delete o.request,o.unloadVectorData(),o.aborted?h(null):w?h(w):(o.loadVectorData(P,this.map.painter,m==="reloadTile"),h(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Qn=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Bn extends l.Evented{constructor(o,h,m,_){super(),this.load=(w,P)=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Z.getImage(this.map._requestManager.transformRequest(this.url,R.Image),(I,O)=>{this._request=null,this._loaded=!0,I?this.fire(new l.ErrorEvent(I)):O&&(this.image=O,w&&(this.coordinates=w),P&&P(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Le(w,this.image,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let I=!1;for(const O in this.tiles){const D=this.tiles[O];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=o,this.dispatcher=m,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(o){this.coordinates=o;const h=o.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(_){let w=1/0,P=1/0,I=-1/0,O=-1/0;for(const ne of _)w=Math.min(w,ne.x),P=Math.min(P,ne.y),I=Math.max(I,ne.x),O=Math.max(O,ne.y);const D=Math.max(I-w,O-P),U=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),V=Math.pow(2,U);return new l.CanonicalTileID(U,Math.floor((w+I)/2*V),Math.floor((P+O)/2*V))}(h),this.minzoom=this.maxzoom=this.tileID.z;const m=h.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(o,h){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},h(null)):(o.state="errored",h(null))}hasTransition(){return!1}}class ei extends Bn{constructor(o,h,m,_){super(o,h,m,_),this.load=()=>{this._loaded=!1;const w=this.options;this.urls=[];for(const P of w.urls)this.urls.push(this.map._requestManager.transformRequest(P,R.Source).url);l.getVideo(this.urls,(P,I)=>{this._loaded=!0,P?this.fire(new l.ErrorEvent(P)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.texSubImage2D(P.TEXTURE_2D,0,0,0,P.RGBA,P.UNSIGNED_BYTE,this.video)):(this.texture=new Le(w,this.video,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let I=!1;for(const O in this.tiles){const D=this.tiles[O];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=h}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Je extends Bn{constructor(o,h,m,_){super(o,h,m,_),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const P=this.map.painter.context,I=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Le(P,this.canvas,I.RGBA,{premultiply:!0});let O=!1;for(const D in this.tiles){const U=this.tiles[D];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,O=!0)}O&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(P=>typeof P!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const yr={},Gi=v=>{switch(v){case"geojson":return Xn;case"image":return Bn;case"raster":return Qt;case"raster-dem":return un;case"vector":return Dt;case"video":return ei;case"canvas":return Je}return yr[v]};function Gn(v,o){const h=l.create();return l.translate(h,h,[1,1,0]),l.scale(h,h,[.5*v.width,.5*v.height,1]),l.multiply(h,h,v.calculatePosMatrix(o.toUnwrapped()))}function _n(v,o,h,m,_,w){const P=function(V,ne,fe){if(V)for(const he of V){const de=ne[he];if(de&&de.source===fe&&de.type==="fill-extrusion")return!0}else for(const he in ne){const de=ne[he];if(de.source===fe&&de.type==="fill-extrusion")return!0}return!1}(_&&_.layers,o,v.id),I=w.maxPitchScaleFactor(),O=v.tilesIn(m,I,P);O.sort(_o);const D=[];for(const V of O)D.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(o,h,v._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,_,w,I,Gn(v.transform,V.tileID))});const U=function(V){const ne={},fe={};for(const he of V){const de=he.queryResults,me=he.wrappedTileID,Me=fe[me]=fe[me]||{};for(const je in de){const be=de[je],Ue=Me[je]=Me[je]||{},Ze=ne[je]=ne[je]||[];for(const Ke of be)Ue[Ke.featureIndex]||(Ue[Ke.featureIndex]=!0,Ze.push(Ke))}}return ne}(D);for(const V in U)U[V].forEach(ne=>{const fe=ne.feature,he=v.getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=he});return U}function _o(v,o){const h=v.tileID,m=o.tileID;return h.overscaledZ-m.overscaledZ||h.canonical.y-m.canonical.y||h.wrap-m.wrap||h.canonical.x-m.canonical.x}class Mo{constructor(o,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=l.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const h=o+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,h,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(_,w){const P={};if(!w)return P;for(const I of _){const O=I.layerIds.map(D=>w.getLayer(D)).filter(Boolean);if(O.length!==0){I.layers=O,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(D=>O.filter(U=>U.id===D)[0]));for(const D of O)P[D.id]=I}}return P}(o.buckets,h.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof l.SymbolBucket&&w.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(_).queryRadius(w))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const m in this.buckets){const _=this.buckets[m];_.uploadPending()&&_.upload(o)}const h=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Le(o,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Le(o,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,h,m,_,w,P,I,O,D,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:w,scale:P,tileSize:this.tileSize,pixelPosMatrix:U,transform:O,params:I,queryPadding:this.queryPadding*D},o,h,m):{}}querySourceFeatures(o,h){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const _=m.loadVTLayers(),w=h&&h.sourceLayer?h.sourceLayer:"",P=_._geojsonTileLayer||_[w];if(!P)return;const I=l.createFilter(h&&h.filter),{z:O,x:D,y:U}=this.tileID.canonical,V={z:O,x:D,y:U};for(let ne=0;ne<P.length;ne++){const fe=P.feature(ne);if(I.needGeometry){const me=l.toEvaluationFeature(fe,!0);if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),fe))continue;const he=m.getId(fe,w),de=new l.GeoJSONFeature(fe,O,D,U,he);de.tile=V,o.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const h=this.expirationTime;if(o.cacheControl){const m=l.parseCacheControl(o.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const m=Date.now();let _=!1;if(this.expirationTime>m)_=!1;else if(h)if(this.expirationTime<h)_=!0;else{const w=this.expirationTime-h;w?this.expirationTime=m+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!h.style.hasLayer(_))continue;const w=this.buckets[_],P=w.layers[0].sourceLayer||"_geojsonTileLayer",I=m[P],O=o[P];if(!I||!O||Object.keys(O).length===0)continue;w.update(O,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=h&&h.style&&h.style.getLayer(_);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=l.browser.now()+o}setDependencies(o,h){const m={};for(const _ of h)m[_]=!0;this.dependencies[o]=m}hasDependency(o,h){for(const m of o){const _=this.dependencies[m];if(_){for(const w of h)if(_[w])return!0}}return!1}}class Lo{constructor(o,h){this.max=o,this.onRemove=h,this.reset()}reset(){for(const o in this.data)for(const h of this.data[o])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(o,h,m){const _=o.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:h,timeout:void 0};if(m!==void 0&&(w.timeout=setTimeout(()=>{this.remove(o,w)},m)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const h=this.data[o].shift();return h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),h.value}getByKey(o){const h=this.data[o];return h?h[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,h){if(!this.has(o))return this;const m=o.wrapped().key,_=h===void 0?0:this.data[m].indexOf(h),w=this.data[m][_];return this.data[m].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(w.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(o){const h=[];for(const m in this.data)for(const _ of this.data[m])o(_.value)||h.push(_);for(const m of h)this.remove(m.value.tileID,m)}}class ti{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,h,m){const _=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][_]=this.stateChanges[o][_]||{},l.extend(this.stateChanges[o][_],m),this.deletedStates[o]===null){this.deletedStates[o]={};for(const w in this.state[o])w!==_&&(this.deletedStates[o][w]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][_]===null){this.deletedStates[o][_]={};for(const w in this.state[o][_])m[w]||(this.deletedStates[o][_][w]=null)}else for(const w in m)this.deletedStates[o]&&this.deletedStates[o][_]&&this.deletedStates[o][_][w]===null&&delete this.deletedStates[o][_][w]}removeFeatureState(o,h,m){if(this.deletedStates[o]===null)return;const _=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},m&&h!==void 0)this.deletedStates[o][_]!==null&&(this.deletedStates[o][_]=this.deletedStates[o][_]||{},this.deletedStates[o][_][m]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][_])for(m in this.deletedStates[o][_]={},this.stateChanges[o][_])this.deletedStates[o][_][m]=null;else this.deletedStates[o][_]=null;else this.deletedStates[o]=null}getState(o,h){const m=String(h),_=l.extend({},(this.state[o]||{})[m],(this.stateChanges[o]||{})[m]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const w=this.deletedStates[o][h];if(w===null)return{};for(const P in w)delete _[P]}return _}initializeTileState(o,h){o.setFeatureState(this.state,h)}coalesceChanges(o,h){const m={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const P in this.stateChanges[_])this.state[_][P]||(this.state[_][P]={}),l.extend(this.state[_][P],this.stateChanges[_][P]),w[P]=this.state[_][P];m[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const P in this.state[_])w[P]={},this.state[_][P]={};else for(const P in this.deletedStates[_]){if(this.deletedStates[_][P]===null)this.state[_][P]={};else for(const I of Object.keys(this.deletedStates[_][P]))delete this.state[_][P][I];w[P]=this.state[_][P]}m[_]=m[_]||{},l.extend(m[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const _ in o)o[_].setFeatureState(m,h)}}class Yn extends l.Evented{constructor(o,h,m){super(),this.id=o,this.dispatcher=m,this.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,w,P,I)=>{const O=new(Gi(w.type))(_,w,P,I);if(O.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${O.id}`);return O})(o,h,m,this),this._tiles={},this._cache=new Lo(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ti,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,h){return this._source.loadTile(o,h)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new l.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const m=this._tiles[h];m.upload(o),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Oo).map(o=>o.key)}getRenderableIds(o){const h=[];for(const m in this._tiles)this._isIdRenderable(m,o)&&h.push(this._tiles[m]);return o?h.sort((m,_)=>{const w=m.tileID,P=_.tileID,I=new l.Point(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),O=new l.Point(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-P.overscaledZ||O.y-I.y||O.x-I.x}).map(m=>m.tileID.key):h.map(m=>m.tileID).sort(Oo).map(m=>m.key)}hasRenderableParent(o){const h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,h){const m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=h),this._loadTile(m,this._tileLoaded.bind(this,m,o,h)))}_tileLoaded(o,h,m,_){if(_)return o.state="errored",void(_.status!==404?this._source.fire(new l.ErrorEvent(_,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=l.browser.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const h=this.getRenderableIds();for(let _=0;_<h.length;_++){const w=h[_];if(o.neighboringTiles&&o.neighboringTiles[w]){const P=this.getTileByID(w);m(o,P),m(P,o)}}function m(_,w){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let P=w.tileID.canonical.x-_.tileID.canonical.x;const I=w.tileID.canonical.y-_.tileID.canonical.y,O=Math.pow(2,_.tileID.canonical.z),D=w.tileID.key;P===0&&I===0||Math.abs(I)>1||(Math.abs(P)>1&&(Math.abs(P+O)===1?P+=O:Math.abs(P-O)===1&&(P-=O)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,P,I),_.neighboringTiles&&_.neighboringTiles[D]&&(_.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,h,m,_){for(const w in this._tiles){let P=this._tiles[w];if(_[w]||!P.hasData()||P.tileID.overscaledZ<=h||P.tileID.overscaledZ>m)continue;let I=P.tileID;for(;P&&P.tileID.overscaledZ>h+1;){const D=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[D.key],P&&P.hasData()&&(I=D)}let O=I;for(;O.overscaledZ>h;)if(O=O.scaledTo(O.overscaledZ-1),o[O.key]){_[I.key]=I;break}}}findLoadedParent(o,h){if(o.key in this._loadedParentTiles){const m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=h?m:null}for(let m=o.overscaledZ-1;m>=h;m--){const _=o.scaledTo(m),w=this._getLoadedTile(_);if(w)return w}}_getLoadedTile(o){const h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const h=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,_=Math.floor(h*m*(this._maxTileCacheZoomLevels===null?l.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(o){const h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){const m={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+h),m[w.tileID.key]=w}this._tiles=m;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(o,h){if(this.transform=o,this.terrain=h,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new l.OverscaledTileID(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(m=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(m=m.filter(U=>this._source.hasTile(U)))):m=[];const _=o.coveringZoomLevel(this._source),w=Math.max(_-Yn.maxOverzooming,this._source.minzoom),P=Math.max(_+Yn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const V of m)if(V.canonical.z>this._source.minzoom){const ne=V.scaledTo(V.canonical.z-1);U[ne.key]=ne;const fe=V.scaledTo(Math.max(this._source.minzoom,Math.min(V.canonical.z,5)));U[fe.key]=fe}m=m.concat(Object.values(U))}const I=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(m,_);if(vo(this._source.type)){const U={},V={},ne=Object.keys(O),fe=l.browser.now();for(const he of ne){const de=O[he],me=this._tiles[he];if(!me||me.fadeEndTime!==0&&me.fadeEndTime<=fe)continue;const Me=this.findLoadedParent(de,w);Me&&(this._addTile(Me.tileID),U[Me.tileID.key]=Me.tileID),V[he]=de}this._retainLoadedChildren(V,_,P,O);for(const he in U)O[he]||(this._coveredTiles[he]=!0,O[he]=U[he]);if(h){const he={},de={};for(const me of m)this._tiles[me.key].hasData()?he[me.key]=me:de[me.key]=me;for(const me in de){const Me=de[me].children(this._source.maxzoom);this._tiles[Me[0].key]&&this._tiles[Me[1].key]&&this._tiles[Me[2].key]&&this._tiles[Me[3].key]&&(he[Me[0].key]=O[Me[0].key]=Me[0],he[Me[1].key]=O[Me[1].key]=Me[1],he[Me[2].key]=O[Me[2].key]=Me[2],he[Me[3].key]=O[Me[3].key]=Me[3],delete de[me])}for(const me in de){const Me=this.findLoadedParent(de[me],this._source.minzoom);if(Me){he[Me.tileID.key]=O[Me.tileID.key]=Me.tileID;for(const je in he)he[je].isChildOf(Me.tileID)&&delete he[je]}}for(const me in this._tiles)he[me]||(this._coveredTiles[me]=!0)}}for(const U in O)this._tiles[U].clearFadeHold();const D=l.keysDifference(this._tiles,O);for(const U of D){const V=this._tiles[U];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,h){const m={},_={},w=Math.max(h-Yn.maxOverzooming,this._source.minzoom),P=Math.max(h+Yn.maxUnderzooming,this._source.minzoom),I={};for(const O of o){const D=this._addTile(O);m[O.key]=O,D.hasData()||h<this._source.maxzoom&&(I[O.key]=O)}this._retainLoadedChildren(I,h,P,m);for(const O of o){let D=this._tiles[O.key];if(D.hasData())continue;if(h+1>this._source.maxzoom){const V=O.children(this._source.maxzoom)[0],ne=this.getTile(V);if(ne&&ne.hasData()){m[V.key]=V;continue}}else{const V=O.children(this._source.maxzoom);if(m[V[0].key]&&m[V[1].key]&&m[V[2].key]&&m[V[3].key])continue}let U=D.wasRequested();for(let V=O.overscaledZ-1;V>=w;--V){const ne=O.scaledTo(V);if(_[ne.key])break;if(_[ne.key]=!0,D=this.getTile(ne),!D&&U&&(D=this._addTile(ne)),D){const fe=D.hasData();if((U||fe)&&(m[ne.key]=ne),U=D.wasRequested(),fe)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const h=[];let m,_=this._tiles[o].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){m=this._loadedParentTiles[_.key];break}h.push(_.key);const w=_.scaledTo(_.overscaledZ-1);if(m=this._getLoadedTile(w),m)break;_=w}for(const w of h)this._loadedParentTiles[w]=m}}_addTile(o){let h=this._tiles[o.key];if(h)return h;h=this._cache.getAndRemove(o),h&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));const m=h;return h||(h=new Mo(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,o.key,h.state))),h.uses++,this._tiles[o.key]=h,m||this._source.fire(new l.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(o,h){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const m=h.getExpiryTimeout();m&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},m))}_removeTile(o){const h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,h,m){const _=[],w=this.transform;if(!w)return _;const P=m?w.getCameraQueryGeometry(o):o,I=o.map(he=>w.pointCoordinate(he,this.terrain)),O=P.map(he=>w.pointCoordinate(he,this.terrain)),D=this.getIds();let U=1/0,V=1/0,ne=-1/0,fe=-1/0;for(const he of O)U=Math.min(U,he.x),V=Math.min(V,he.y),ne=Math.max(ne,he.x),fe=Math.max(fe,he.y);for(let he=0;he<D.length;he++){const de=this._tiles[D[he]];if(de.holdingForFade())continue;const me=de.tileID,Me=Math.pow(2,w.zoom-de.tileID.overscaledZ),je=h*de.queryPadding*l.EXTENT/de.tileSize/Me,be=[me.getTilePoint(new l.MercatorCoordinate(U,V)),me.getTilePoint(new l.MercatorCoordinate(ne,fe))];if(be[0].x-je<l.EXTENT&&be[0].y-je<l.EXTENT&&be[1].x+je>=0&&be[1].y+je>=0){const Ue=I.map(Ke=>me.getTilePoint(Ke)),Ze=O.map(Ke=>me.getTilePoint(Ke));_.push({tile:de,tileID:me,queryGeometry:Ue,cameraQueryGeometry:Ze,scale:Me})}}return _}getVisibleCoordinates(o){const h=this.getRenderableIds(o).map(m=>this._tiles[m].tileID);for(const m of h)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(vo(this._source.type)){const o=l.browser.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=o)return!0}return!1}setFeatureState(o,h,m){this._state.updateState(o=o||"_geojsonTileLayer",h,m)}removeFeatureState(o,h,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,m)}getFeatureState(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)}setDependencies(o,h,m){const _=this._tiles[o];_&&_.setDependencies(h,m)}reloadTilesForDependencies(o,h){for(const m in this._tiles)this._tiles[m].hasDependency(o,h)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(o,h))}}function Oo(v,o){const h=Math.abs(2*v.wrap)-+(v.wrap<0),m=Math.abs(2*o.wrap)-+(o.wrap<0);return v.overscaledZ-o.overscaledZ||m-h||o.canonical.y-v.canonical.y||o.canonical.x-v.canonical.x}function vo(v){return v==="raster"||v==="image"||v==="video"}Yn.maxOverzooming=10,Yn.maxUnderzooming=3;const vt="mapboxgl_preloaded_worker_pool";class ni{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<ni.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[vt]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(l.browser.hardwareConcurrency/2);let le;function Fe(){return le||(le=new ni),le}ni.workerCount=l.isSafari(globalThis)?Math.max(Math.min(We,3),1):1;class Pe{constructor(o,h){this.reset(o,h)}reset(o,h){this.points=o||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);let h=1,m=this._distances[h];const _=o*this.paddedLength+this.padding;for(;m<_&&h<this._distances.length;)m=this._distances[++h];const w=h-1,P=this._distances[w],I=m-P,O=I>0?(_-P)/I:0;return this.points[w].mult(1-O).add(this.points[h].mult(O))}}function rt(v,o){let h=!0;return v==="always"||v!=="never"&&o!=="never"||(h=!1),h}class bt{constructor(o,h,m){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(h/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,h,m,_,w){this._forEachCell(h,m,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(o,h,m,_){this._forEachCell(h-_,m-_,h+_,m+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(m),this.circles.push(_)}_insertBoxCell(o,h,m,_,w,P){this.boxCells[w].push(P)}_insertCircleCell(o,h,m,_,w,P){this.circleCells[w].push(P)}_query(o,h,m,_,w,P,I){if(m<0||o>this.width||_<0||h>this.height)return[];const O=[];if(o<=0&&h<=0&&this.width<=m&&this.height<=_){if(w)return[{key:null,x1:o,y1:h,x2:m,y2:_}];for(let D=0;D<this.boxKeys.length;D++)O.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const U=this.circles[3*D],V=this.circles[3*D+1],ne=this.circles[3*D+2];O.push({key:this.circleKeys[D],x1:U-ne,y1:V-ne,x2:U+ne,y2:V+ne})}}else this._forEachCell(o,h,m,_,this._queryCell,O,{hitTest:w,overlapMode:P,seenUids:{box:{},circle:{}}},I);return O}query(o,h,m,_){return this._query(o,h,m,_,!1,null)}hitTest(o,h,m,_,w,P){return this._query(o,h,m,_,!0,w,P).length>0}hitTestCircle(o,h,m,_,w){const P=o-m,I=o+m,O=h-m,D=h+m;if(I<0||P>this.width||D<0||O>this.height)return!1;const U=[];return this._forEachCell(P,O,I,D,this._queryCellCircle,U,{hitTest:!0,overlapMode:_,circle:{x:o,y:h,radius:m},seenUids:{box:{},circle:{}}},w),U.length>0}_queryCell(o,h,m,_,w,P,I,O){const{seenUids:D,hitTest:U,overlapMode:V}=I,ne=this.boxCells[w];if(ne!==null){const he=this.bboxes;for(const de of ne)if(!D.box[de]){D.box[de]=!0;const me=4*de,Me=this.boxKeys[de];if(o<=he[me+2]&&h<=he[me+3]&&m>=he[me+0]&&_>=he[me+1]&&(!O||O(Me))&&(!U||!rt(V,Me.overlapMode))&&(P.push({key:Me,x1:he[me],y1:he[me+1],x2:he[me+2],y2:he[me+3]}),U))return!0}}const fe=this.circleCells[w];if(fe!==null){const he=this.circles;for(const de of fe)if(!D.circle[de]){D.circle[de]=!0;const me=3*de,Me=this.circleKeys[de];if(this._circleAndRectCollide(he[me],he[me+1],he[me+2],o,h,m,_)&&(!O||O(Me))&&(!U||!rt(V,Me.overlapMode))){const je=he[me],be=he[me+1],Ue=he[me+2];if(P.push({key:Me,x1:je-Ue,y1:be-Ue,x2:je+Ue,y2:be+Ue}),U)return!0}}}return!1}_queryCellCircle(o,h,m,_,w,P,I,O){const{circle:D,seenUids:U,overlapMode:V}=I,ne=this.boxCells[w];if(ne!==null){const he=this.bboxes;for(const de of ne)if(!U.box[de]){U.box[de]=!0;const me=4*de,Me=this.boxKeys[de];if(this._circleAndRectCollide(D.x,D.y,D.radius,he[me+0],he[me+1],he[me+2],he[me+3])&&(!O||O(Me))&&!rt(V,Me.overlapMode))return P.push(!0),!0}}const fe=this.circleCells[w];if(fe!==null){const he=this.circles;for(const de of fe)if(!U.circle[de]){U.circle[de]=!0;const me=3*de,Me=this.circleKeys[de];if(this._circlesCollide(he[me],he[me+1],he[me+2],D.x,D.y,D.radius)&&(!O||O(Me))&&!rt(V,Me.overlapMode))return P.push(!0),!0}}}_forEachCell(o,h,m,_,w,P,I,O){const D=this._convertToXCellCoord(o),U=this._convertToYCellCoord(h),V=this._convertToXCellCoord(m),ne=this._convertToYCellCoord(_);for(let fe=D;fe<=V;fe++)for(let he=U;he<=ne;he++)if(w.call(this,o,h,m,_,this.xCellCount*he+fe,P,I,O))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,h,m,_,w,P){const I=_-o,O=w-h,D=m+P;return D*D>I*I+O*O}_circleAndRectCollide(o,h,m,_,w,P,I){const O=(P-_)/2,D=Math.abs(o-(_+O));if(D>O+m)return!1;const U=(I-w)/2,V=Math.abs(h-(w+U));if(V>U+m)return!1;if(D<=O||V<=U)return!0;const ne=D-O,fe=V-U;return ne*ne+fe*fe<=m*m}}function vn(v,o,h,m,_){const w=l.create();return o?(l.scale(w,w,[1/_,1/_,1]),h||l.rotateZ(w,w,m.angle)):l.multiply(w,m.labelPlaneMatrix,v),w}function Wt(v,o,h,m,_){if(o){const w=l.clone(v);return l.scale(w,w,[_,_,1]),h||l.rotateZ(w,w,-m.angle),w}return m.glCoordMatrix}function xt(v,o,h){let m;h?(m=[v.x,v.y,h(v.x,v.y),1],l.transformMat4(m,m,o)):(m=[v.x,v.y,0,1],Se(m,m,o));const _=m[3];return{point:new l.Point(m[0]/_,m[1]/_),signedDistanceFromCamera:_}}function $n(v,o){return .5+v/o*.5}function jn(v,o){const h=v[0]/v[3],m=v[1]/v[3];return h>=-o[0]&&h<=o[0]&&m>=-o[1]&&m<=o[1]}function bn(v,o,h,m,_,w,P,I,O,D){const U=m?v.textSizeData:v.iconSizeData,V=l.evaluateSizeForZoom(U,h.transform.zoom),ne=[256/h.width*2+1,256/h.height*2+1],fe=m?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;fe.clear();const he=v.lineVertexArray,de=m?v.text.placedSymbolArray:v.icon.placedSymbolArray,me=h.transform.width/h.transform.height;let Me=!1;for(let je=0;je<de.length;je++){const be=de.get(je);if(be.hidden||be.writingMode===l.WritingMode.vertical&&!Me){ce(be.numGlyphs,fe);continue}let Ue;if(Me=!1,D?(Ue=[be.anchorX,be.anchorY,D(be.anchorX,be.anchorY),1],l.transformMat4(Ue,Ue,o)):(Ue=[be.anchorX,be.anchorY,0,1],Se(Ue,Ue,o)),!jn(Ue,ne)){ce(be.numGlyphs,fe);continue}const Ze=$n(h.transform.cameraToCenterDistance,Ue[3]),Ke=l.evaluateSizeForFeature(U,V,be),tt=P?Ke/Ze:Ke*Ze,ut=new l.Point(be.anchorX,be.anchorY),it=xt(ut,_,D).point,Et={projections:{},offsets:{}},Nt=On(be,tt,!1,I,o,_,w,v.glyphOffsetArray,he,fe,it,ut,Et,me,O,D);Me=Nt.useVertical,(Nt.notEnoughRoom||Me||Nt.needsFlipping&&On(be,tt,!0,I,o,_,w,v.glyphOffsetArray,he,fe,it,ut,Et,me,O,D).notEnoughRoom)&&ce(be.numGlyphs,fe)}m?v.text.dynamicLayoutVertexBuffer.updateData(fe):v.icon.dynamicLayoutVertexBuffer.updateData(fe)}function _r(v,o,h,m,_,w,P,I,O,D,U,V,ne){const fe=I.glyphStartIndex+I.numGlyphs,he=I.lineStartIndex,de=I.lineStartIndex+I.lineLength,me=o.getoffsetX(I.glyphStartIndex),Me=o.getoffsetX(fe-1),je=W(v*me,h,m,_,w,P,I.segment,he,de,O,D,U,V,ne);if(!je)return null;const be=W(v*Me,h,m,_,w,P,I.segment,he,de,O,D,U,V,ne);return be?{first:je,last:be}:null}function Mn(v,o,h,m){return v===l.WritingMode.horizontal&&Math.abs(h.y-o.y)>Math.abs(h.x-o.x)*m?{useVertical:!0}:(v===l.WritingMode.vertical?o.y<h.y:o.x>h.x)?{needsFlipping:!0}:null}function On(v,o,h,m,_,w,P,I,O,D,U,V,ne,fe,he,de){const me=o/24,Me=v.lineOffsetX*me,je=v.lineOffsetY*me;let be;if(v.numGlyphs>1){const Ue=v.glyphStartIndex+v.numGlyphs,Ze=v.lineStartIndex,Ke=v.lineStartIndex+v.lineLength,tt=_r(me,I,Me,je,h,U,V,v,O,w,ne,he,de);if(!tt)return{notEnoughRoom:!0};const ut=xt(tt.first.point,P,de).point,it=xt(tt.last.point,P,de).point;if(m&&!h){const Et=Mn(v.writingMode,ut,it,fe);if(Et)return Et}be=[tt.first];for(let Et=v.glyphStartIndex+1;Et<Ue-1;Et++)be.push(W(me*I.getoffsetX(Et),Me,je,h,U,V,v.segment,Ze,Ke,O,w,ne,he,de));be.push(tt.last)}else{if(m&&!h){const Ze=xt(V,_,de).point,Ke=v.lineStartIndex+v.segment+1,tt=new l.Point(O.getx(Ke),O.gety(Ke)),ut=xt(tt,_,de),it=ut.signedDistanceFromCamera>0?ut.point:La(V,tt,Ze,1,_,de),Et=Mn(v.writingMode,Ze,it,fe);if(Et)return Et}const Ue=W(me*I.getoffsetX(v.glyphStartIndex),Me,je,h,U,V,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,O,w,ne,he,de);if(!Ue)return{notEnoughRoom:!0};be=[Ue]}for(const Ue of be)l.addDynamicAttributes(D,Ue.point,Ue.angle);return{}}function La(v,o,h,m,_,w){const P=xt(v.add(v.sub(o)._unit()),_,w).point,I=h.sub(P);return h.add(I._mult(m/I.mag()))}function ri(v,o){const{projectionCache:h,lineVertexArray:m,labelPlaneMatrix:_,tileAnchorPoint:w,distanceFromAnchor:P,getElevation:I,previousVertex:O,direction:D,absOffsetX:U}=o;if(h.projections[v])return h.projections[v];const V=new l.Point(m.getx(v),m.gety(v)),ne=xt(V,_,I);if(ne.signedDistanceFromCamera>0)return h.projections[v]=ne.point,ne.point;const fe=v-D;return La(P===0?w:new l.Point(m.getx(fe),m.gety(fe)),V,O,U-P+1,_,I)}function wr(v,o,h){return v._unit()._perp()._mult(o*h)}function ye(v,o,h,m,_,w,P,I){const{projectionCache:O,direction:D}=I;if(O.offsets[v])return O.offsets[v];const U=h.add(o);if(v+D<m||v+D>=_)return O.offsets[v]=U,U;const V=ri(v+D,I),ne=wr(V.sub(h),P,D),fe=h.add(ne),he=V.add(ne);return O.offsets[v]=l.findLineIntersection(w,U,fe,he)||U,O.offsets[v]}function W(v,o,h,m,_,w,P,I,O,D,U,V,ne,fe){const he=m?v-o:v+o;let de=he>0?1:-1,me=0;m&&(de*=-1,me=Math.PI),de<0&&(me+=Math.PI);let Me,je,be=de>0?I+P:I+P+1,Ue=_,Ze=_,Ke=0,tt=0;const ut=Math.abs(he),it=[];let Et;for(;Ke+tt<=ut;){if(be+=de,be<I||be>=O)return null;Ke+=tt,Ze=Ue,je=Me;const _t={projectionCache:V,lineVertexArray:D,labelPlaneMatrix:U,tileAnchorPoint:w,distanceFromAnchor:Ke,getElevation:fe,previousVertex:Ze,direction:de,absOffsetX:ut};if(Ue=ri(be,_t),h===0)it.push(Ze),Et=Ue.sub(Ze);else{let Xt;const Ot=Ue.sub(Ze);Xt=Ot.mag()===0?wr(ri(be+de,_t).sub(Ue),h,de):wr(Ot,h,de),je||(je=Ze.add(Xt)),Me=ye(be,Xt,Ue,I,O,je,h,_t),it.push(je),Et=Me.sub(je)}tt=Et.mag()}const Nt=Et._mult((ut-Ke)/tt)._add(je||Ze),xn=me+Math.atan2(Ue.y-Ze.y,Ue.x-Ze.x);return it.push(Nt),{point:Nt,angle:ne?xn:0,path:it}}const J=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(v,o){for(let h=0;h<v;h++){const m=o.length;o.resize(m+4),o.float32.set(J,3*m)}}function Se(v,o,h){const m=o[0],_=o[1];return v[0]=h[0]*m+h[4]*_+h[12],v[1]=h[1]*m+h[5]*_+h[13],v[3]=h[3]*m+h[7]*_+h[15],v}const Ce=100;class Re{constructor(o,h=new bt(o.width+200,o.height+200,25),m=new bt(o.width+200,o.height+200,25)){this.transform=o,this.grid=h,this.ignoredGrid=m,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ce,this.screenBottomBoundary=o.height+Ce,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,h,m,_,w,P){const I=this.projectAndGetPerspectiveRatio(_,o.anchorPointX,o.anchorPointY,P),O=m*I.perspectiveRatio,D=o.x1*O+I.point.x,U=o.y1*O+I.point.y,V=o.x2*O+I.point.x,ne=o.y2*O+I.point.y;return!this.isInsideGrid(D,U,V,ne)||h!=="always"&&this.grid.hitTest(D,U,V,ne,h,w)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,U,V,ne],offscreen:this.isOffscreen(D,U,V,ne)}}placeCollisionCircles(o,h,m,_,w,P,I,O,D,U,V,ne,fe,he){const de=[],me=new l.Point(h.anchorX,h.anchorY),Me=xt(me,P,he),je=$n(this.transform.cameraToCenterDistance,Me.signedDistanceFromCamera),be=(U?w/je:w*je)/l.ONE_EM,Ue=xt(me,I,he).point,Ze=_r(be,_,h.lineOffsetX*be,h.lineOffsetY*be,!1,Ue,me,h,m,I,{projections:{},offsets:{}},!1,he);let Ke=!1,tt=!1,ut=!0;if(Ze){const it=.5*ne*je+fe,Et=new l.Point(-100,-100),Nt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),xn=new Pe,_t=Ze.first,Xt=Ze.last;let Ot=[];for(let dn=_t.path.length-1;dn>=1;dn--)Ot.push(_t.path[dn]);for(let dn=1;dn<Xt.path.length;dn++)Ot.push(Xt.path[dn]);const Un=2.5*it;if(O){const dn=Ot.map(nn=>xt(nn,O,he));Ot=dn.some(nn=>nn.signedDistanceFromCamera<=0)?[]:dn.map(nn=>nn.point)}let Rn=[];if(Ot.length>0){const dn=Ot[0].clone(),nn=Ot[0].clone();for(let ir=1;ir<Ot.length;ir++)dn.x=Math.min(dn.x,Ot[ir].x),dn.y=Math.min(dn.y,Ot[ir].y),nn.x=Math.max(nn.x,Ot[ir].x),nn.y=Math.max(nn.y,Ot[ir].y);Rn=dn.x>=Et.x&&nn.x<=Nt.x&&dn.y>=Et.y&&nn.y<=Nt.y?[Ot]:nn.x<Et.x||dn.x>Nt.x||nn.y<Et.y||dn.y>Nt.y?[]:l.clipLine([Ot],Et.x,Et.y,Nt.x,Nt.y)}for(const dn of Rn){xn.reset(dn,.25*it);let nn=0;nn=xn.length<=.5*it?1:Math.ceil(xn.paddedLength/Un)+1;for(let ir=0;ir<nn;ir++){const fr=ir/Math.max(nn-1,1),Gr=xn.lerp(fr),si=Gr.x+Ce,oo=Gr.y+Ce;de.push(si,oo,it,0);const Ji=si-it,yi=oo-it,Li=si+it,va=oo+it;if(ut=ut&&this.isOffscreen(Ji,yi,Li,va),tt=tt||this.isInsideGrid(Ji,yi,Li,va),o!=="always"&&this.grid.hitTestCircle(si,oo,it,o,V)&&(Ke=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ke}}}}return{circles:!D&&Ke||!tt||je<this.perspectiveRatioCutoff?[]:de,offscreen:ut,collisionDetected:Ke}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let m=1/0,_=1/0,w=-1/0,P=-1/0;for(const U of o){const V=new l.Point(U.x+Ce,U.y+Ce);m=Math.min(m,V.x),_=Math.min(_,V.y),w=Math.max(w,V.x),P=Math.max(P,V.y),h.push(V)}const I=this.grid.query(m,_,w,P).concat(this.ignoredGrid.query(m,_,w,P)),O={},D={};for(const U of I){const V=U.key;if(O[V.bucketInstanceId]===void 0&&(O[V.bucketInstanceId]={}),O[V.bucketInstanceId][V.featureIndex])continue;const ne=[new l.Point(U.x1,U.y1),new l.Point(U.x2,U.y1),new l.Point(U.x2,U.y2),new l.Point(U.x1,U.y2)];l.polygonIntersectsPolygon(h,ne)&&(O[V.bucketInstanceId][V.featureIndex]=!0,D[V.bucketInstanceId]===void 0&&(D[V.bucketInstanceId]=[]),D[V.bucketInstanceId].push(V.featureIndex))}return D}insertCollisionBox(o,h,m,_,w,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:w,collisionGroupID:P,overlapMode:h},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,h,m,_,w,P){const I=m?this.ignoredGrid:this.grid,O={bucketInstanceId:_,featureIndex:w,collisionGroupID:P,overlapMode:h};for(let D=0;D<o.length;D+=4)I.insertCircle(O,o[D],o[D+1],o[D+2])}projectAndGetPerspectiveRatio(o,h,m,_){let w;return _?(w=[h,m,_(h,m),1],l.transformMat4(w,w,o)):(w=[h,m,0,1],Se(w,w,o)),{point:new l.Point((w[0]/w[3]+1)/2*this.transform.width+Ce,(-w[1]/w[3]+1)/2*this.transform.height+Ce),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}}isOffscreen(o,h,m,_){return m<Ce||o>=this.screenRightBoundary||_<Ce||h>this.screenBottomBoundary}isInsideGrid(o,h,m,_){return m>=0&&o<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o}}function Te(v,o,h){return o*(l.EXTENT/(v.tileSize*Math.pow(2,h-v.tileID.overscaledZ)))}class Ae{constructor(o,h,m,_){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?h:-h))):_&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Ne{constructor(o,h,m,_,w){this.text=new Ae(o?o.text:null,h,m,w),this.icon=new Ae(o?o.icon:null,h,_,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ot{constructor(o,h,m){this.text=o,this.icon=h,this.skipFade=m}}class at{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class st{constructor(o,h,m,_,w){this.bucketInstanceId=o,this.featureIndex=h,this.sourceLayerIndex=m,this.bucketIndex=_,this.tileID=w}}class Jt{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const h=++this.maxGroupID;this.collisionGroups[o]={ID:h,predicate:m=>m.collisionGroupID===h}}return this.collisionGroups[o]}}function fn(v,o,h,m,_){const{horizontalAlign:w,verticalAlign:P}=l.getAnchorAlignment(v),I=-(w-.5)*o,O=-(P-.5)*h,D=l.evaluateVariableOffset(v,m);return new l.Point(I+D[0]*_,O+D[1]*_)}function jt(v,o,h,m,_,w){const{x1:P,x2:I,y1:O,y2:D,anchorPointX:U,anchorPointY:V}=v,ne=new l.Point(o,h);return m&&ne._rotate(_?w:-w),{x1:P+ne.x,y1:O+ne.y,x2:I+ne.x,y2:D+ne.y,anchorPointX:U,anchorPointY:V}}class Zt{constructor(o,h,m,_,w){this.transform=o.clone(),this.terrain=h,this.collisionIndex=new Re(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Jt(_),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,h,m,_){const w=m.getBucket(h),P=m.latestFeatureIndex;if(!w||!P||h.id!==w.layerIds[0])return;const I=m.collisionBoxArray,O=w.layers[0].layout,D=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/l.EXTENT,V=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),ne=O.get("text-pitch-alignment")==="map",fe=O.get("text-rotation-alignment")==="map",he=Te(m,1,this.transform.zoom),de=vn(V,ne,fe,this.transform,he);let me=null;if(ne){const je=Wt(V,ne,fe,this.transform,he);me=l.multiply([],this.transform.labelPlaneMatrix,je)}this.retainedQueryData[w.bucketInstanceId]=new st(w.bucketInstanceId,P,w.sourceLayerIndex,w.index,m.tileID);const Me={bucket:w,layout:O,posMatrix:V,textLabelPlaneMatrix:de,labelToScreenMatrix:me,scale:D,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const je of w.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Ue,symbolInstanceEnd:Ze}=je;o.push({sortKey:be,symbolInstanceStart:Ue,symbolInstanceEnd:Ze,parameters:Me})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(o,h,m,_,w,P,I,O,D,U,V,ne,fe,he,de,me){const Me=[ne.textOffset0,ne.textOffset1],je=fn(o,m,_,Me,w),be=this.collisionIndex.placeCollisionBox(jt(h,je.x,je.y,P,I,this.transform.angle),V,O,D,U.predicate,me);if((!de||this.collisionIndex.placeCollisionBox(jt(de,je.x,je.y,P,I,this.transform.angle),V,O,D,U.predicate,me).box.length!==0)&&be.box.length>0){let Ue;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(Ue=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:Me,width:m,height:_,anchor:o,textBoxScale:w,prevAnchor:Ue},this.markUsedJustification(fe,o,ne,he),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,he,ne),this.placedOrientations[ne.crossTileID]=he),{shift:je,placedGlyphBoxes:be}}}placeLayerBucketPart(o,h,m){const{bucket:_,layout:w,posMatrix:P,textLabelPlaneMatrix:I,labelToScreenMatrix:O,textPixelRatio:D,holdingForFade:U,collisionBoxArray:V,partiallyEvaluatedTextSize:ne,collisionGroup:fe}=o.parameters,he=w.get("text-optional"),de=w.get("icon-optional"),me=l.getOverlapMode(w,"text-overlap","text-allow-overlap"),Me=me==="always",je=l.getOverlapMode(w,"icon-overlap","icon-allow-overlap"),be=je==="always",Ue=w.get("text-rotation-alignment")==="map",Ze=w.get("text-pitch-alignment")==="map",Ke=w.get("icon-text-fit")!=="none",tt=w.get("symbol-z-order")==="viewport-y",ut=Me&&(be||!_.hasIconData()||de),it=be&&(Me||!_.hasTextData()||he);!_.collisionArrays&&V&&_.deserializeCollisionBoxes(V);const Et=this.retainedQueryData[_.bucketInstanceId].tileID,Nt=this.terrain?(_t,Xt)=>this.terrain.getElevation(Et,_t,Xt):null,xn=(_t,Xt)=>{if(h[_t.crossTileID])return;if(U)return void(this.placements[_t.crossTileID]=new ot(!1,!1,!1));let Ot=!1,Un=!1,Rn=!0,dn=null,nn={box:null,offscreen:null},ir={box:null,offscreen:null},fr=null,Gr=null,si=null,oo=0,Ji=0,yi=0;Xt.textFeatureIndex?oo=Xt.textFeatureIndex:_t.useRuntimeCollisionCircles&&(oo=_t.featureIndex),Xt.verticalTextFeatureIndex&&(Ji=Xt.verticalTextFeatureIndex);const Li=Xt.textBox;if(Li){const Oi=cn=>{let Hr=l.WritingMode.horizontal;if(_.allowVerticalPlacement&&!cn&&this.prevPlacement){const ui=this.prevPlacement.placedOrientations[_t.crossTileID];ui&&(this.placedOrientations[_t.crossTileID]=ui,Hr=ui,this.markUsedOrientation(_,Hr,_t))}return Hr},li=(cn,Hr)=>{if(_.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&Xt.verticalTextBox){for(const ui of _.writingModes)if(ui===l.WritingMode.vertical?(nn=Hr(),ir=nn):nn=cn(),nn&&nn.box&&nn.box.length)break}else nn=cn()};if(w.get("text-variable-anchor")){let cn=w.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[_t.crossTileID]){const kn=this.prevPlacement.variableOffsets[_t.crossTileID];cn.indexOf(kn.anchor)>0&&(cn=cn.filter(Wr=>Wr!==kn.anchor),cn.unshift(kn.anchor))}const Hr=(kn,Wr,Fi)=>{const xa=kn.x2-kn.x1,ba=kn.y2-kn.y1,Qi=_t.textBoxScale,Nc=Ke&&je==="never"?Wr:null;let xr={box:[],offscreen:!1};const hf=me!=="never"?2*cn.length:cn.length;for(let Mu=0;Mu<hf;++Mu){const ea=this.attemptAnchorPlacement(cn[Mu%cn.length],kn,xa,ba,Qi,Ue,Ze,D,P,fe,Mu>=cn.length?me:"never",_t,_,Fi,Nc,Nt);if(ea&&(xr=ea.placedGlyphBoxes,xr&&xr.box&&xr.box.length)){Ot=!0,dn=ea.shift;break}}return xr};li(()=>Hr(Li,Xt.iconBox,l.WritingMode.horizontal),()=>{const kn=Xt.verticalTextBox;return _.allowVerticalPlacement&&!(nn&&nn.box&&nn.box.length)&&_t.numVerticalGlyphVertices>0&&kn?Hr(kn,Xt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),nn&&(Ot=nn.box,Rn=nn.offscreen);const ui=Oi(nn&&nn.box);if(!Ot&&this.prevPlacement){const kn=this.prevPlacement.variableOffsets[_t.crossTileID];kn&&(this.variableOffsets[_t.crossTileID]=kn,this.markUsedJustification(_,kn.anchor,_t,ui))}}else{const cn=(Hr,ui)=>{const kn=this.collisionIndex.placeCollisionBox(Hr,me,D,P,fe.predicate,Nt);return kn&&kn.box&&kn.box.length&&(this.markUsedOrientation(_,ui,_t),this.placedOrientations[_t.crossTileID]=ui),kn};li(()=>cn(Li,l.WritingMode.horizontal),()=>{const Hr=Xt.verticalTextBox;return _.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&Hr?cn(Hr,l.WritingMode.vertical):{box:null,offscreen:null}}),Oi(nn&&nn.box&&nn.box.length)}}if(fr=nn,Ot=fr&&fr.box&&fr.box.length>0,Rn=fr&&fr.offscreen,_t.useRuntimeCollisionCircles){const Oi=_.text.placedSymbolArray.get(_t.centerJustifiedTextSymbolIndex),li=l.evaluateSizeForFeature(_.textSizeData,ne,Oi),cn=w.get("text-padding");Gr=this.collisionIndex.placeCollisionCircles(me,Oi,_.lineVertexArray,_.glyphOffsetArray,li,P,I,O,m,Ze,fe.predicate,_t.collisionCircleDiameter,cn,Nt),Gr.circles.length&&Gr.collisionDetected&&!m&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Ot=Me||Gr.circles.length>0&&!Gr.collisionDetected,Rn=Rn&&Gr.offscreen}if(Xt.iconFeatureIndex&&(yi=Xt.iconFeatureIndex),Xt.iconBox){const Oi=li=>{const cn=Ke&&dn?jt(li,dn.x,dn.y,Ue,Ze,this.transform.angle):li;return this.collisionIndex.placeCollisionBox(cn,je,D,P,fe.predicate,Nt)};ir&&ir.box&&ir.box.length&&Xt.verticalIconBox?(si=Oi(Xt.verticalIconBox),Un=si.box.length>0):(si=Oi(Xt.iconBox),Un=si.box.length>0),Rn=Rn&&si.offscreen}const va=he||_t.numHorizontalGlyphVertices===0&&_t.numVerticalGlyphVertices===0,ds=de||_t.numIconVertices===0;if(va||ds?ds?va||(Un=Un&&Ot):Ot=Un&&Ot:Un=Ot=Un&&Ot,Ot&&fr&&fr.box&&this.collisionIndex.insertCollisionBox(fr.box,me,w.get("text-ignore-placement"),_.bucketInstanceId,ir&&ir.box&&Ji?Ji:oo,fe.ID),Un&&si&&this.collisionIndex.insertCollisionBox(si.box,je,w.get("icon-ignore-placement"),_.bucketInstanceId,yi,fe.ID),Gr&&(Ot&&this.collisionIndex.insertCollisionCircles(Gr.circles,me,w.get("text-ignore-placement"),_.bucketInstanceId,oo,fe.ID),m)){const Oi=_.bucketInstanceId;let li=this.collisionCircleArrays[Oi];li===void 0&&(li=this.collisionCircleArrays[Oi]=new at);for(let cn=0;cn<Gr.circles.length;cn+=4)li.circles.push(Gr.circles[cn+0]),li.circles.push(Gr.circles[cn+1]),li.circles.push(Gr.circles[cn+2]),li.circles.push(Gr.collisionDetected?1:0)}if(_t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_t.crossTileID]=new ot(Ot||ut,Un||it,Rn||_.justReloaded),h[_t.crossTileID]=!0};if(tt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _t=_.getSortedSymbolIndexes(this.transform.angle);for(let Xt=_t.length-1;Xt>=0;--Xt){const Ot=_t[Xt];xn(_.symbolInstances.get(Ot),_.collisionArrays[Ot])}}else for(let _t=o.symbolInstanceStart;_t<o.symbolInstanceEnd;_t++)xn(_.symbolInstances.get(_t),_.collisionArrays[_t]);if(m&&_.bucketInstanceId in this.collisionCircleArrays){const _t=this.collisionCircleArrays[_.bucketInstanceId];l.invert(_t.invProjMatrix,P),_t.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}markUsedJustification(o,h,m,_){let w;w=_===l.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(h)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const I of P)I>=0&&(o.text.placedSymbolArray.get(I).crossTileID=w>=0&&I!==w?0:m.crossTileID)}markUsedOrientation(o,h,m){const _=h===l.WritingMode.horizontal||h===l.WritingMode.horizontalOnly?h:0,w=h===l.WritingMode.vertical?h:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const I of P)o.text.placedSymbolArray.get(I).placedOrientation=_;m.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let m=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const _=h?h.symbolFadeChange(o):1,w=h?h.opacities:{},P=h?h.variableOffsets:{},I=h?h.placedOrientations:{};for(const O in this.placements){const D=this.placements[O],U=w[O];U?(this.opacities[O]=new Ne(U,_,D.text,D.icon),m=m||D.text!==U.text.placed||D.icon!==U.icon.placed):(this.opacities[O]=new Ne(null,_,D.text,D.icon,D.skipFade),m=m||D.text||D.icon)}for(const O in w){const D=w[O];if(!this.opacities[O]){const U=new Ne(D,_,!1,!1);U.isHidden()||(this.opacities[O]=U,m=m||D.text.placed||D.icon.placed)}}for(const O in P)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=P[O]);for(const O in I)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=I[O]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:o)}updateLayerOpacities(o,h){const m={};for(const _ of h){const w=_.getBucket(o);w&&_.latestFeatureIndex&&o.id===w.layerIds[0]&&this.updateBucketOpacities(w,m,_.collisionBoxArray)}}updateBucketOpacities(o,h,m){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const _=o.layers[0].layout,w=new Ne(null,0,!1,!1,!0),P=_.get("text-allow-overlap"),I=_.get("icon-allow-overlap"),O=_.get("text-variable-anchor"),D=_.get("text-rotation-alignment")==="map",U=_.get("text-pitch-alignment")==="map",V=_.get("icon-text-fit")!=="none",ne=new Ne(null,0,P&&(I||!o.hasIconData()||_.get("icon-optional")),I&&(P||!o.hasTextData()||_.get("text-optional")),!0);!o.collisionArrays&&m&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(m);const fe=(he,de,me)=>{for(let Me=0;Me<de/4;Me++)he.opacityVertexArray.emplaceBack(me);he.hasVisibleVertices=he.hasVisibleVertices||me!==Pr};for(let he=0;he<o.symbolInstances.length;he++){const de=o.symbolInstances.get(he),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:Me,crossTileID:je}=de;let be=this.opacities[je];h[je]?be=w:be||(be=ne,this.opacities[je]=be),h[je]=!0;const Ue=de.numIconVertices>0,Ze=this.placedOrientations[de.crossTileID],Ke=Ze===l.WritingMode.vertical,tt=Ze===l.WritingMode.horizontal||Ze===l.WritingMode.horizontalOnly;if(me>0||Me>0){const ut=pr(be.text);fe(o.text,me,Ke?Pr:ut),fe(o.text,Me,tt?Pr:ut);const it=be.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach(xn=>{xn>=0&&(o.text.placedSymbolArray.get(xn).hidden=it||Ke?1:0)}),de.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=it||tt?1:0);const Et=this.variableOffsets[de.crossTileID];Et&&this.markUsedJustification(o,Et.anchor,de,Ze);const Nt=this.placedOrientations[de.crossTileID];Nt&&(this.markUsedJustification(o,"left",de,Nt),this.markUsedOrientation(o,Nt,de))}if(Ue){const ut=pr(be.icon),it=!(V&&de.verticalPlacedIconSymbolIndex&&Ke);de.placedIconSymbolIndex>=0&&(fe(o.icon,de.numIconVertices,it?ut:Pr),o.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=be.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(fe(o.icon,de.numVerticalIconVertices,it?Pr:ut),o.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const ut=o.collisionArrays[he];if(ut){let it=new l.Point(0,0);if(ut.textBox||ut.verticalTextBox){let Nt=!0;if(O){const xn=this.variableOffsets[je];xn?(it=fn(xn.anchor,xn.width,xn.height,xn.textOffset,xn.textBoxScale),D&&it._rotate(U?this.transform.angle:-this.transform.angle)):Nt=!1}ut.textBox&&rn(o.textCollisionBox.collisionVertexArray,be.text.placed,!Nt||Ke,it.x,it.y),ut.verticalTextBox&&rn(o.textCollisionBox.collisionVertexArray,be.text.placed,!Nt||tt,it.x,it.y)}const Et=!!(!tt&&ut.verticalIconBox);ut.iconBox&&rn(o.iconCollisionBox.collisionVertexArray,be.icon.placed,Et,V?it.x:0,V?it.y:0),ut.verticalIconBox&&rn(o.iconCollisionBox.collisionVertexArray,be.icon.placed,!Et,V?it.x:0,V?it.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const he=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=he.invProjMatrix,o.placementViewportMatrix=he.viewportMatrix,o.collisionCircleArray=he.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,h){const m=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*m>o}setStale(){this.stale=!0}}function rn(v,o,h,m,_){v.emplaceBack(o?1:0,h?1:0,m||0,_||0),v.emplaceBack(o?1:0,h?1:0,m||0,_||0),v.emplaceBack(o?1:0,h?1:0,m||0,_||0),v.emplaceBack(o?1:0,h?1:0,m||0,_||0)}const Hn=Math.pow(2,25),Wn=Math.pow(2,24),Fn=Math.pow(2,17),Nn=Math.pow(2,16),wn=Math.pow(2,9),cr=Math.pow(2,8),Lr=Math.pow(2,1);function pr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const o=v.placed?1:0,h=Math.floor(127*v.opacity);return h*Hn+o*Wn+h*Fn+o*Nn+h*wn+o*cr+h*Lr+o}const Pr=0;class Fo{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,h,m,_,w){const P=this._bucketParts;for(;this._currentTileIndex<o.length;)if(h.getBucketParts(P,_,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((I,O)=>I.sortKey-O.sortKey));this._currentPartIndex<P.length;)if(h.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,w())return!0;return!1}}class ld{constructor(o,h,m,_,w,P,I,O){this.placement=new Zt(o,h,P,I,O),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(o,h,m){const _=l.browser.now(),w=()=>!this._forceFullPlacement&&l.browser.now()-_>2;for(;this._currentPlacementIndex>=0;){const P=h[o[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=I)&&(!P.maxzoom||P.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Fo(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const rs=512/l.EXTENT/2;class jr{constructor(o,h,m){this.tileID=o,this.bucketInstanceId=m,this._symbolsByKey={};const _=new Map;for(let w=0;w<h.length;w++){const P=h.get(w),I=P.key,O=_.get(I);O?O.push(P):_.set(I,[P])}for(const[w,P]of _){const I={positions:P.map(O=>({x:Math.floor(O.anchorX*rs),y:Math.floor(O.anchorY*rs)})),crossTileIDs:P.map(O=>O.crossTileID)};if(I.positions.length>128){const O=new l.KDBush(I.positions.length,16,Uint16Array);for(const{x:D,y:U}of I.positions)O.add(D,U);O.finish(),delete I.positions,I.index=O}this._symbolsByKey[w]=I}}getScaledCoordinates(o,h){const{x:m,y:_,z:w}=this.tileID.canonical,{x:P,y:I,z:O}=h.canonical,D=rs/Math.pow(2,O-w),U=(I*l.EXTENT+o.anchorY)*D,V=_*l.EXTENT*rs;return{x:Math.floor((P*l.EXTENT+o.anchorX)*D-m*l.EXTENT*rs),y:Math.floor(U-V)}}findMatches(o,h,m){const _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let w=0;w<o.length;w++){const P=o.get(w);if(P.crossTileID)continue;const I=this._symbolsByKey[P.key];if(!I)continue;const O=this.getScaledCoordinates(P,h);if(I.index){const D=I.index.range(O.x-_,O.y-_,O.x+_,O.y+_).sort();for(const U of D){const V=I.crossTileIDs[U];if(!m[V]){m[V]=!0,P.crossTileID=V;break}}}else if(I.positions)for(let D=0;D<I.positions.length;D++){const U=I.positions[D],V=I.crossTileIDs[D];if(Math.abs(U.x-O.x)<=_&&Math.abs(U.y-O.y)<=_&&!m[V]){m[V]=!0,P.crossTileID=V;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class Sl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class is{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const h=Math.round((o-this.lng)/360);if(h!==0)for(const m in this.indexes){const _=this.indexes[m],w={};for(const P in _){const I=_[P];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+h),w[I.tileID.key]=I}this.indexes[m]=w}this.lng=o}addBucket(o,h,m){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const _=this.usedCrossTileIDs[o.overscaledZ];for(const w in this.indexes){const P=this.indexes[w];if(Number(w)>o.overscaledZ)for(const I in P){const O=P[I];O.tileID.isChildOf(o)&&O.findMatches(h.symbolInstances,o,_)}else{const I=P[o.scaledTo(Number(w)).key];I&&I.findMatches(h.symbolInstances,o,_)}}for(let w=0;w<h.symbolInstances.length;w++){const P=h.symbolInstances.get(w);P.crossTileID||(P.crossTileID=m.generate(),_[P.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new jr(o,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(o,h){for(const m of h.getCrossTileIDsLists())for(const _ of m)delete this.usedCrossTileIDs[o][_]}removeStaleBuckets(o){let h=!1;for(const m in this.indexes){const _=this.indexes[m];for(const w in _)o[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,_[w]),delete _[w],h=!0)}return h}}class ii{constructor(){this.layerIndexes={},this.crossTileIDs=new Sl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,h,m){let _=this.layerIndexes[o.id];_===void 0&&(_=this.layerIndexes[o.id]=new is);let w=!1;const P={};_.handleWrapJump(m);for(const I of h){const O=I.getBucket(o);O&&o.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,O,this.crossTileIDs)&&(w=!0),P[O.bucketInstanceId]=!0)}return _.removeStaleBuckets(P)&&(w=!0),w}pruneUnusedLayers(o){const h={};o.forEach(m=>{h[m]=!0});for(const m in this.layerIndexes)h[m]||delete this.layerIndexes[m]}}const zs=(v,o)=>l.emitValidationErrors(v,o&&o.filter(h=>h.identifier!=="source.canvas")),Yo=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ud=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),Oa=l.emptyStyle();class Bs extends l.Evented{constructor(o,h={}){super(),this.map=o,this.dispatcher=new ae(Fe(),this,o._getMapId()),this.imageManager=new $e,this.imageManager.setEventedParent(this),this.glyphManager=new zt(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new K(256,512),this.crossTileSymbolIndex=new ii,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const m=this;this._rtlTextPluginCallback=Bs.registerForPluginStateChange(_=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(w,P)=>{if(l.triggerPluginCompletionEvent(w),P&&P.every(I=>I))for(const I in m.sourceCaches){const O=m.sourceCaches[I].getSource().type;O!=="vector"&&O!=="geojson"||m.sourceCaches[I].reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.sourceCaches[_.sourceId];if(!w)return;const P=w.getSource();if(P&&P.vectorLayerIds)for(const I in this._layers){const O=this._layers[I];O.source===P.id&&this._validateLayer(O)}})}loadURL(o,h={},m){this.fire(new l.Event("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const _=this.map._requestManager.transformRequest(o,R.Style);this._request=l.getJSON(_,(w,P)=>{this._request=null,w?this.fire(new l.ErrorEvent(w)):P&&this._load(P,h,m)})}loadJSON(o,h={},m){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(()=>{this._request=null,h.validate=h.validate!==!1,this._load(o,h,m)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Oa,{validate:!1})}_load(o,h,m){const _=h.transformStyle?h.transformStyle(m,o):o;if(!h.validate||!zs(this,l.validateStyle(_))){this._loaded=!0,this.stylesheet=_;for(const w in _.sources)this.addSource(w,_.sources[w],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new we(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const o=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",o),this._order=o.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of o){const m=l.createStyleLayer(h);m.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=m}}_loadSprite(o,h=!1,m=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(_,w,P,I){const O=xe(_),D=O.length,U=P>1?"@2x":"",V={},ne={},fe={};for(const{id:he,url:de}of O){const me=w.transformRequest(w.normalizeSpriteURL(de,U,".json"),R.SpriteJSON),Me=`${he}_${me.url}`;V[Me]=l.getJSON(me,(Ue,Ze)=>{delete V[Me],ne[he]=Ze,Oe(I,ne,fe,Ue,D)});const je=w.transformRequest(w.normalizeSpriteURL(de,U,".png"),R.SpriteImage),be=`${he}_${je.url}`;V[be]=Z.getImage(je,(Ue,Ze)=>{delete V[be],fe[he]=Ze,Oe(I,ne,fe,Ue,D)})}return{cancel(){for(const he of Object.values(V))he.cancel()}}}(o,this.map._requestManager,this.map.getPixelRatio(),(_,w)=>{if(this._spriteRequest=null,_)this.fire(new l.ErrorEvent(_));else if(w)for(const P in w){this._spritesImagesIds[P]=[];const I=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(O=>!(O in w)):[];for(const O of I)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in w[P]){const D=P==="default"?O:`${P}:${O}`;this._spritesImagesIds[P].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,w[P][O],!1):this.imageManager.addImage(D,w[P][O]),h&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),m&&m(_)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(o){const h=this.sourceCaches[o.source];if(!h)return;const m=o.sourceLayer;if(!m)return;const _=h.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(m)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${_.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){const h=this._serializedAllLayers();if(!o||o.length===0)return Object.values(h);const m=[];for(const _ of o)h[_]&&m.push(h[_]);return m}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const h=Object.keys(this._layers);for(const m of h){const _=this._layers[m];_.type!=="custom"&&(o[m]=_.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const h=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const P in this._updatedSources){const I=this._updatedSources[P];if(I==="reload")this._reloadSource(P);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const m={};for(const _ in this.sourceCaches){const w=this.sourceCaches[_];m[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];w.recalculate(o,this._availableImages),!w.isHidden(o.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const _ in m){const w=this.sourceCaches[_];m[_]!==w.used&&w.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(o),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,h={}){this._checkLoaded();const m=this.serialize();if(o=h.transformStyle?h.transformStyle(m,o):o,zs(this,l.validateStyle(o)))return!1;(o=l.clone$1(o)).layers=l.derefLayers(o.layers);const _=l.diffStyles(m,o).filter(P=>!(P.command in ud));if(_.length===0)return!1;const w=_.filter(P=>!(P.command in Yo));if(w.length>0)throw new Error(`Unimplemented: ${w.map(P=>P.command).join(", ")}.`);for(const P of _)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=o,!0}addImage(o,h){if(this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,h),this._afterImageUpdated(o)}updateImage(o,h){this.imageManager.updateImage(o,h)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,h,m={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(l.validateStyle.source,`sources.${o}`,h,null,m))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const _=this.sourceCaches[o]=new Yn(o,h,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:o})),_.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===o)return this.fire(new l.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${m}" is using it.`)));const h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,h){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const m=this.sourceCaches[o].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(h),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,h,m={}){this._checkLoaded();const _=o.id;if(this.getLayer(_))return void this.fire(new l.ErrorEvent(new Error(`Layer "${_}" already exists on this map.`)));let w;if(o.type==="custom"){if(zs(this,l.validateCustomStyleLayer(o)))return;w=l.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(_,o.source),o=l.clone$1(o),o=l.extend(o,{source:_})),this._validate(l.validateStyle.layer,`layers.${_}`,o,{arrayIndex:-1},m))return;w=l.createStyleLayer(o),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}})}const P=h?this._order.indexOf(h):this._order.length;if(h&&P===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${_}" before non-existing layer "${h}".`)));else{if(this._order.splice(P,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&w.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(o,h){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===h)return;const m=this._order.indexOf(o);this._order.splice(m,1);const _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${h}".`))):(this._order.splice(_,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const h=this._layers[o];if(!h)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));h.setEventedParent(null);const m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,h,m){this._checkLoaded();const _=this.getLayer(o);_?_.minzoom===h&&_.maxzoom===m||(h!=null&&(_.minzoom=h),m!=null&&(_.maxzoom=m),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,h,m={}){this._checkLoaded();const _=this.getLayer(o);if(_){if(!l.deepEqual(_.filter,h))return h==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(l.validateStyle.filter,`layers.${_.id}.filter`,h,null,m)||(_.filter=l.clone$1(h),this._updateLayer(_)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return l.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,h,m,_={}){this._checkLoaded();const w=this.getLayer(o);w?l.deepEqual(w.getLayoutProperty(h),m)||(w.setLayoutProperty(h,m,_),this._updateLayer(w)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,h){const m=this.getLayer(o);if(m)return m.getLayoutProperty(h);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,h,m,_={}){this._checkLoaded();const w=this.getLayer(o);w?l.deepEqual(w.getPaintProperty(h),m)||(w.setPaintProperty(h,m,_)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,h){return this.getLayer(o).getPaintProperty(h)}setFeatureState(o,h){this._checkLoaded();const m=o.source,_=o.sourceLayer,w=this.sourceCaches[m];if(w===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const P=w.getSource().type;P==="geojson"&&_?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||_?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,o.id,h)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,h){this._checkLoaded();const m=o.source,_=this.sourceCaches[m];if(_===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const w=_.getSource().type,P=w==="vector"?o.sourceLayer:void 0;w!=="vector"||P?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(P,o.id,h):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const h=o.source,m=o.sourceLayer,_=this.sourceCaches[h];if(_!==void 0)return _.getSource().type!=="vector"||m?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(m,o.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=l.mapObject(this.sourceCaches,_=>_.serialize()),h=this._serializeByIds(this._order),m=this.stylesheet;return l.filterObject({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:o,layers:h},_=>_!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const h=P=>this._layers[P].type==="fill-extrusion",m={},_=[];for(let P=this._order.length-1;P>=0;P--){const I=this._order[P];if(h(I)){m[I]=P;for(const O of o){const D=O[I];if(D)for(const U of D)_.push(U)}}}_.sort((P,I)=>I.intersectionZ-P.intersectionZ);const w=[];for(let P=this._order.length-1;P>=0;P--){const I=this._order[P];if(h(I))for(let O=_.length-1;O>=0;O--){const D=_[O].feature;if(m[D.layer.id]<P)break;w.push(D),_.pop()}else for(const O of o){const D=O[I];if(D)for(const U of D)w.push(U.feature)}}return w}queryRenderedFeatures(o,h,m){h&&h.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const _={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of h.layers){const O=this._layers[I];if(!O)return this.fire(new l.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];_[O.source]=!0}}const w=[];h.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const I in this.sourceCaches)h.layers&&!_[I]||w.push(_n(this.sourceCaches[I],this._layers,P,o,h,m));return this.placement&&w.push(function(I,O,D,U,V,ne,fe){const he={},de=ne.queryRenderedSymbols(U),me=[];for(const Me of Object.keys(de).map(Number))me.push(fe[Me]);me.sort(_o);for(const Me of me){const je=Me.featureIndex.lookupSymbolFeatures(de[Me.bucketInstanceId],O,Me.bucketIndex,Me.sourceLayerIndex,V.filter,V.layers,V.availableImages,I);for(const be in je){const Ue=he[be]=he[be]||[],Ze=je[be];Ze.sort((Ke,tt)=>{const ut=Me.featureSortOrder;if(ut){const it=ut.indexOf(Ke.featureIndex);return ut.indexOf(tt.featureIndex)-it}return tt.featureIndex-Ke.featureIndex});for(const Ke of Ze)Ue.push(Ke)}}for(const Me in he)he[Me].forEach(je=>{const be=je.feature,Ue=D[I[Me].source].getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ue});return he}(this._layers,P,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(o,h){h&&h.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const m=this.sourceCaches[o];return m?function(_,w){const P=_.getRenderableIds().map(D=>_.getTileByID(D)),I=[],O={};for(let D=0;D<P.length;D++){const U=P[D],V=U.tileID.canonical.key;O[V]||(O[V]=!0,U.querySourceFeatures(I,w))}return I}(m,h):[]}addSourceType(o,h,m){return Gi(o)?m(new Error(`A source type called "${o}" already exists.`)):(((_,w)=>{yr[_]=w})(o,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:h.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(o,h={}){this._checkLoaded();const m=this.light.getLight();let _=!1;for(const P in o)if(!l.deepEqual(o[P],m[P])){_=!0;break}if(!_)return;const w={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(w)}_validate(o,h,m,_,w={}){return(!w||w.validate!==!1)&&zs(this,o.call(l.validateStyle,l.extend({key:h,style:this.serialize(),value:m,styleSpec:l.v8Spec},_)))}_remove(o=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const m=this.sourceCaches[h];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const h in this.sourceCaches)this.sourceCaches[h].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,h,m,_,w=!1){let P=!1,I=!1;const O={};for(const D of this._order){const U=this._layers[D];if(U.type!=="symbol")continue;if(!O[U.source]){const ne=this.sourceCaches[U.source];O[U.source]=ne.getRenderableIds(!0).map(fe=>ne.getTileByID(fe)).sort((fe,he)=>he.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(he.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(U,O[U.source],o.center.lng);P=P||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),o.zoom))&&(this.pauseablePlacement=new ld(o,this.map.terrain,this._order,w,h,m,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),I=!0),P&&this.pauseablePlacement.placement.setStale()),I||P)for(const D of this._order){const U=this._layers[D];U.type==="symbol"&&this.placement.updateLayerOpacities(U,O[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,h,m){this.imageManager.getImages(h.icons,m),this._updateTilesForChangedImages();const _=this.sourceCaches[h.source];_&&_.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(o,h,m){this.glyphManager.getGlyphs(h.stacks,m);const _=this.sourceCaches[h.source];_&&_.setDependencies(h.tileID.key,h.type,[""])}getResource(o,h,m){return l.makeRequest(h,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,h={}){this._checkLoaded(),o&&this._validate(l.validateStyle.glyphs,"glyphs",o,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,h,m={},_){this._checkLoaded();const w=[{id:o,url:h}],P=[...xe(this.stylesheet.sprite),...w];this._validate(l.validateStyle.sprite,"sprite",P,null,m)||(this.stylesheet.sprite=P,this._loadSprite(w,!0,_))}removeSprite(o){this._checkLoaded();const h=xe(this.stylesheet.sprite);if(h.find(m=>m.id===o)){if(this._spritesImagesIds[o])for(const m of this._spritesImagesIds[o])this.imageManager.removeImage(m),this._changedImages[m]=!0;h.splice(h.findIndex(m=>m.id===o),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return xe(this.stylesheet.sprite)}setSprite(o,h={},m){this._checkLoaded(),o&&this._validate(l.validateStyle.sprite,"sprite",o,null,h)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,m):(this._unloadSprite(),m&&m(null)))}}Bs.registerForPluginStateChange=l.registerForPluginStateChange;var cu=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),os="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const as={prelude:Ln(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ln(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ln(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ln(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ln("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ln(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ln("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ln("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ln(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ln(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ln(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ln(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ln(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ln(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ln(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ln(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ln(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ln(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ln("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",os),terrainDepth:Ln("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",os),terrainCoords:Ln("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",os)};function Ln(v,o){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=o.match(/attribute ([\w]+) ([\w]+)/g),_=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=w?w.concat(_):_,I={};return{fragmentSource:v=v.replace(h,(O,D,U,V,ne)=>(I[ne]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${U} ${V} ${ne};
#else
uniform ${U} ${V} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${U} ${V} ${ne} = u_${ne};
#endif
`)),vertexSource:o=o.replace(h,(O,D,U,V,ne)=>{const fe=V==="float"?"vec2":"vec4",he=ne.match(/color/)?"color":fe;return I[ne]?D==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${U} ${fe} a_${ne};
varying ${U} ${V} ${ne};
#else
uniform ${U} ${V} u_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${U} ${fe} a_${ne};
#else
uniform ${U} ${V} u_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${U} ${V} ${ne} = a_${ne};
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${U} ${V} ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`}),staticAttributes:m,staticUniforms:P}}class Cl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,h,m,_,w,P,I,O,D){this.context=o;let U=this.boundPaintVertexBuffers.length!==_.length;for(let V=0;!U&&V<_.length;V++)this.boundPaintVertexBuffers[V]!==_[V]&&(U=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==m||U||this.boundIndexBuffer!==w||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==D?this.freshBind(h,m,_,w,P,I,O,D):(o.bindVertexArray.set(this.vao),I&&I.bind(),w&&w.dynamicDraw&&w.bind(),O&&O.bind(),D&&D.bind())}freshBind(o,h,m,_,w,P,I,O){const D=o.numAttributes,U=this.context,V=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=O,h.enableAttributes(V,o);for(const ne of m)ne.enableAttributes(V,o);P&&P.enableAttributes(V,o),I&&I.enableAttributes(V,o),O&&O.enableAttributes(V,o),h.bind(),h.setVertexAttribPointers(V,o,w);for(const ne of m)ne.bind(),ne.setVertexAttribPointers(V,o,w);P&&(P.bind(),P.setVertexAttribPointers(V,o,w)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(V,o,w)),O&&(O.bind(),O.setVertexAttribPointers(V,o,w)),U.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function $s(v){const o=[];for(let h=0;h<v.length;h++){if(v[h]===null)continue;const m=v[h].split(" ");o.push(m.pop())}return o}class gm{constructor(o,h,m,_,w,P){const I=o.gl;this.program=I.createProgram();const O=$s(h.staticAttributes),D=m?m.getBinderAttributes():[],U=O.concat(D),V=as.prelude.staticUniforms?$s(as.prelude.staticUniforms):[],ne=h.staticUniforms?$s(h.staticUniforms):[],fe=m?m.getBinderUniforms():[],he=V.concat(ne).concat(fe),de=[];for(const Ke of he)de.indexOf(Ke)<0&&de.push(Ke);const me=m?m.defines():[];w&&me.push("#define OVERDRAW_INSPECTOR;"),P&&me.push("#define TERRAIN3D;");const Me=me.concat(as.prelude.fragmentSource,h.fragmentSource).join(`
`),je=me.concat(as.prelude.vertexSource,h.vertexSource).join(`
`),be=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(be,Me),I.compileShader(be),I.attachShader(this.program,be);const Ue=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(Ue,je),I.compileShader(Ue),I.attachShader(this.program,Ue),this.attributes={};const Ze={};this.numAttributes=U.length;for(let Ke=0;Ke<this.numAttributes;Ke++)U[Ke]&&(I.bindAttribLocation(this.program,Ke,U[Ke]),this.attributes[U[Ke]]=Ke);I.linkProgram(this.program),I.deleteShader(Ue),I.deleteShader(be);for(let Ke=0;Ke<de.length;Ke++){const tt=de[Ke];if(tt&&!Ze[tt]){const ut=I.getUniformLocation(this.program,tt);ut&&(Ze[tt]=ut)}}this.fixedUniforms=_(o,Ze),this.terrainUniforms=((Ke,tt)=>({u_depth:new l.Uniform1i(Ke,tt.u_depth),u_terrain:new l.Uniform1i(Ke,tt.u_terrain),u_terrain_dim:new l.Uniform1f(Ke,tt.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(Ke,tt.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(Ke,tt.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(Ke,tt.u_terrain_exaggeration)}))(o,Ze),this.binderUniforms=m?m.getUniforms(o,Ze):[]}draw(o,h,m,_,w,P,I,O,D,U,V,ne,fe,he,de,me,Me,je){const be=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(m),o.setStencilMode(_),o.setColorMode(w),o.setCullFace(P),O){o.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,O.depthTexture),o.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,O.texture);for(const Ze in this.terrainUniforms)this.terrainUniforms[Ze].set(O[Ze])}for(const Ze in this.fixedUniforms)this.fixedUniforms[Ze].set(I[Ze]);de&&de.setUniforms(o,this.binderUniforms,fe,{zoom:he});let Ue=0;switch(h){case be.LINES:Ue=2;break;case be.TRIANGLES:Ue=3;break;case be.LINE_STRIP:Ue=1}for(const Ze of ne.get()){const Ke=Ze.vaos||(Ze.vaos={});(Ke[D]||(Ke[D]=new Cl)).bind(o,this,U,de?de.getPaintVertexBuffers():[],V,Ze.vertexOffset,me,Me,je),be.drawElements(h,Ze.primitiveLength*Ue,be.UNSIGNED_SHORT,Ze.primitiveOffset*Ue*2)}}}function Nh(v,o,h){const m=1/Te(h,1,o.transform.tileZoom),_=Math.pow(2,h.tileID.overscaledZ),w=h.tileSize*Math.pow(2,o.transform.tileZoom)/_,P=w*(h.tileID.canonical.x+h.tileID.wrap*_),I=w*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[m,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[P>>16,I>>16],u_pixel_coord_lower:[65535&P,65535&I]}}const hu=(v,o,h,m)=>{const _=o.style.light,w=_.properties.get("position"),P=[w.x,w.y,w.z],I=function(){var D=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();_.properties.get("anchor")==="viewport"&&function(D,U){var V=Math.sin(U),ne=Math.cos(U);D[0]=ne,D[1]=V,D[2]=0,D[3]=-V,D[4]=ne,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(I,-o.transform.angle),function(D,U,V){var ne=U[0],fe=U[1],he=U[2];D[0]=ne*V[0]+fe*V[3]+he*V[6],D[1]=ne*V[1]+fe*V[4]+he*V[7],D[2]=ne*V[2]+fe*V[5]+he*V[8]}(P,P,I);const O=_.properties.get("color");return{u_matrix:v,u_lightpos:P,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+h,u_opacity:m}},Uh=(v,o,h,m,_,w,P)=>l.extend(hu(v,o,h,m),Nh(w,o,P),{u_height_factor:-Math.pow(2,_.overscaledZ)/P.tileSize/8}),jh=v=>({u_matrix:v}),Vh=(v,o,h,m)=>l.extend(jh(v),Nh(h,o,m)),lc=(v,o)=>({u_matrix:v,u_world:o}),qh=(v,o,h,m,_)=>l.extend(Vh(v,o,h,m),{u_world:_}),ss=(v,o,h,m)=>{const _=v.transform;let w,P;if(m.paint.get("circle-pitch-alignment")==="map"){const I=Te(h,1,_.zoom);w=!0,P=[I,I]}else w=!1,P=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(o.posMatrix,h,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:P}},Gh=(v,o,h)=>{const m=Te(h,1,o.zoom),_=Math.pow(2,o.zoom-h.tileID.overscaledZ),w=h.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[o.pixelsToGLUnits[0]/(m*_),o.pixelsToGLUnits[1]/(m*_)],u_overscale_factor:w}},uc=(v,o,h=1)=>({u_matrix:v,u_color:o,u_overlay:0,u_overlay_scale:h}),Hh=v=>({u_matrix:v}),Wh=(v,o,h,m)=>({u_matrix:v,u_extrude_scale:Te(o,1,h),u_intensity:m});function ls(v,o){const h=Math.pow(2,o.canonical.z),m=o.canonical.y;return[new l.MercatorCoordinate(0,m/h).toLngLat().lat,new l.MercatorCoordinate(0,(m+1)/h).toLngLat().lat]}const Ns=(v,o,h,m)=>{const _=v.transform;return{u_matrix:kl(v,o,h,m),u_ratio:1/Te(o,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},xo=(v,o,h,m,_)=>l.extend(Ns(v,o,h,_),{u_image:0,u_image_height:m}),cc=(v,o,h,m,_)=>{const w=v.transform,P=El(o,w);return{u_matrix:kl(v,o,h,_),u_texsize:o.imageAtlasTexture.size,u_ratio:1/Te(o,1,w.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},hc=(v,o,h,m,_,w)=>{const P=v.lineAtlas,I=El(o,v.transform),O=h.layout.get("line-cap")==="round",D=P.getDash(m.from,O),U=P.getDash(m.to,O),V=D.width*_.fromScale,ne=U.width*_.toScale;return l.extend(Ns(v,o,h,w),{u_patternscale_a:[I/V,-D.height/2],u_patternscale_b:[I/ne,-U.height/2],u_sdfgamma:P.width/(256*Math.min(V,ne)*v.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:U.y,u_mix:_.t})};function El(v,o){return 1/Te(v,1,o.tileZoom)}function kl(v,o,h,m){return v.translatePosMatrix(m?m.posMatrix:o.tileID.posMatrix,o,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const fc=(v,o,h,m,_)=>{return{u_matrix:v,u_tl_parent:o,u_scale_parent:h,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(P=_.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(w=_.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:fu(_.paint.get("raster-hue-rotate"))};var w,P};function fu(v){v*=Math.PI/180;const o=Math.sin(v),h=Math.cos(v);return[(2*h+1)/3,(-Math.sqrt(3)*o-h+1)/3,(Math.sqrt(3)*o-h+1)/3]}const Al=(v,o,h,m,_,w,P,I,O,D)=>{const U=_.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:U.width/U.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:P,u_coord_matrix:I,u_is_text:+O,u_pitch_with_map:+m,u_texsize:D,u_texture:0}},du=(v,o,h,m,_,w,P,I,O,D,U)=>{const V=_.transform;return l.extend(Al(v,o,h,m,_,w,P,I,O,D),{u_gamma_scale:m?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:_.pixelRatio,u_is_halo:+U})},Hi=(v,o,h,m,_,w,P,I,O,D)=>l.extend(du(v,o,h,m,_,w,P,I,!0,O,!0),{u_texsize_icon:D,u_texture_icon:1}),bo=(v,o,h)=>({u_matrix:v,u_opacity:o,u_color:h}),Zh=(v,o,h,m,_,w)=>l.extend(function(P,I,O,D){const U=O.imageManager.getPattern(P.from.toString()),V=O.imageManager.getPattern(P.to.toString()),{width:ne,height:fe}=O.imageManager.getPixelSize(),he=Math.pow(2,D.tileID.overscaledZ),de=D.tileSize*Math.pow(2,O.transform.tileZoom)/he,me=de*(D.tileID.canonical.x+D.tileID.wrap*he),Me=de*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[ne,fe],u_mix:I.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Te(D,1,O.transform.tileZoom),u_pixel_coord_upper:[me>>16,Me>>16],u_pixel_coord_lower:[65535&me,65535&Me]}}(m,w,h,_),{u_matrix:v,u_opacity:o}),dc={fillExtrusion:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_lightpos:new l.Uniform3f(v,o.u_lightpos),u_lightintensity:new l.Uniform1f(v,o.u_lightintensity),u_lightcolor:new l.Uniform3f(v,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(v,o.u_vertical_gradient),u_opacity:new l.Uniform1f(v,o.u_opacity)}),fillExtrusionPattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_lightpos:new l.Uniform3f(v,o.u_lightpos),u_lightintensity:new l.Uniform1f(v,o.u_lightintensity),u_lightcolor:new l.Uniform3f(v,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(v,o.u_vertical_gradient),u_height_factor:new l.Uniform1f(v,o.u_height_factor),u_image:new l.Uniform1i(v,o.u_image),u_texsize:new l.Uniform2f(v,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade),u_opacity:new l.Uniform1f(v,o.u_opacity)}),fill:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),fillPattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_image:new l.Uniform1i(v,o.u_image),u_texsize:new l.Uniform2f(v,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade)}),fillOutline:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_world:new l.Uniform2f(v,o.u_world)}),fillOutlinePattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_world:new l.Uniform2f(v,o.u_world),u_image:new l.Uniform1i(v,o.u_image),u_texsize:new l.Uniform2f(v,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade)}),circle:(v,o)=>({u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(v,o.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(v,o.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),collisionBox:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(v,o.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(v,o.u_extrude_scale),u_overscale_factor:new l.Uniform1f(v,o.u_overscale_factor)}),collisionCircle:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_inv_matrix:new l.UniformMatrix4f(v,o.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(v,o.u_viewport_size)}),debug:(v,o)=>({u_color:new l.UniformColor(v,o.u_color),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_overlay:new l.Uniform1i(v,o.u_overlay),u_overlay_scale:new l.Uniform1f(v,o.u_overlay_scale)}),clippingMask:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),heatmap:(v,o)=>({u_extrude_scale:new l.Uniform1f(v,o.u_extrude_scale),u_intensity:new l.Uniform1f(v,o.u_intensity),u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),heatmapTexture:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_world:new l.Uniform2f(v,o.u_world),u_image:new l.Uniform1i(v,o.u_image),u_color_ramp:new l.Uniform1i(v,o.u_color_ramp),u_opacity:new l.Uniform1f(v,o.u_opacity)}),hillshade:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_image:new l.Uniform1i(v,o.u_image),u_latrange:new l.Uniform2f(v,o.u_latrange),u_light:new l.Uniform2f(v,o.u_light),u_shadow:new l.UniformColor(v,o.u_shadow),u_highlight:new l.UniformColor(v,o.u_highlight),u_accent:new l.UniformColor(v,o.u_accent)}),hillshadePrepare:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_image:new l.Uniform1i(v,o.u_image),u_dimension:new l.Uniform2f(v,o.u_dimension),u_zoom:new l.Uniform1f(v,o.u_zoom),u_unpack:new l.Uniform4f(v,o.u_unpack)}),line:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels)}),lineGradient:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels),u_image:new l.Uniform1i(v,o.u_image),u_image_height:new l.Uniform1f(v,o.u_image_height)}),linePattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_texsize:new l.Uniform2f(v,o.u_texsize),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_image:new l.Uniform1i(v,o.u_image),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade)}),lineSDF:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(v,o.u_patternscale_a),u_patternscale_b:new l.Uniform2f(v,o.u_patternscale_b),u_sdfgamma:new l.Uniform1f(v,o.u_sdfgamma),u_image:new l.Uniform1i(v,o.u_image),u_tex_y_a:new l.Uniform1f(v,o.u_tex_y_a),u_tex_y_b:new l.Uniform1f(v,o.u_tex_y_b),u_mix:new l.Uniform1f(v,o.u_mix)}),raster:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_tl_parent:new l.Uniform2f(v,o.u_tl_parent),u_scale_parent:new l.Uniform1f(v,o.u_scale_parent),u_buffer_scale:new l.Uniform1f(v,o.u_buffer_scale),u_fade_t:new l.Uniform1f(v,o.u_fade_t),u_opacity:new l.Uniform1f(v,o.u_opacity),u_image0:new l.Uniform1i(v,o.u_image0),u_image1:new l.Uniform1i(v,o.u_image1),u_brightness_low:new l.Uniform1f(v,o.u_brightness_low),u_brightness_high:new l.Uniform1f(v,o.u_brightness_high),u_saturation_factor:new l.Uniform1f(v,o.u_saturation_factor),u_contrast_factor:new l.Uniform1f(v,o.u_contrast_factor),u_spin_weights:new l.Uniform3f(v,o.u_spin_weights)}),symbolIcon:(v,o)=>({u_is_size_zoom_constant:new l.Uniform1i(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(v,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(v,o.u_size_t),u_size:new l.Uniform1f(v,o.u_size),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(v,o.u_pitch),u_rotate_symbol:new l.Uniform1i(v,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(v,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(v,o.u_fade_change),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(v,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(v,o.u_coord_matrix),u_is_text:new l.Uniform1i(v,o.u_is_text),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_texsize:new l.Uniform2f(v,o.u_texsize),u_texture:new l.Uniform1i(v,o.u_texture)}),symbolSDF:(v,o)=>({u_is_size_zoom_constant:new l.Uniform1i(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(v,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(v,o.u_size_t),u_size:new l.Uniform1f(v,o.u_size),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(v,o.u_pitch),u_rotate_symbol:new l.Uniform1i(v,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(v,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(v,o.u_fade_change),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(v,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(v,o.u_coord_matrix),u_is_text:new l.Uniform1i(v,o.u_is_text),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_texsize:new l.Uniform2f(v,o.u_texsize),u_texture:new l.Uniform1i(v,o.u_texture),u_gamma_scale:new l.Uniform1f(v,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(v,o.u_is_halo)}),symbolTextAndIcon:(v,o)=>({u_is_size_zoom_constant:new l.Uniform1i(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(v,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(v,o.u_size_t),u_size:new l.Uniform1f(v,o.u_size),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(v,o.u_pitch),u_rotate_symbol:new l.Uniform1i(v,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(v,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(v,o.u_fade_change),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(v,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(v,o.u_coord_matrix),u_is_text:new l.Uniform1i(v,o.u_is_text),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_texsize:new l.Uniform2f(v,o.u_texsize),u_texsize_icon:new l.Uniform2f(v,o.u_texsize_icon),u_texture:new l.Uniform1i(v,o.u_texture),u_texture_icon:new l.Uniform1i(v,o.u_texture_icon),u_gamma_scale:new l.Uniform1f(v,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(v,o.u_is_halo)}),background:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_opacity:new l.Uniform1f(v,o.u_opacity),u_color:new l.UniformColor(v,o.u_color)}),backgroundPattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_opacity:new l.Uniform1f(v,o.u_opacity),u_image:new l.Uniform1i(v,o.u_image),u_pattern_tl_a:new l.Uniform2f(v,o.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(v,o.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(v,o.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(v,o.u_pattern_br_b),u_texsize:new l.Uniform2f(v,o.u_texsize),u_mix:new l.Uniform1f(v,o.u_mix),u_pattern_size_a:new l.Uniform2f(v,o.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(v,o.u_pattern_size_b),u_scale_a:new l.Uniform1f(v,o.u_scale_a),u_scale_b:new l.Uniform1f(v,o.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(v,o.u_tile_units_to_pixels)}),terrain:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_texture:new l.Uniform1i(v,o.u_texture),u_ele_delta:new l.Uniform1f(v,o.u_ele_delta)}),terrainDepth:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ele_delta:new l.Uniform1f(v,o.u_ele_delta)}),terrainCoords:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_texture:new l.Uniform1i(v,o.u_texture),u_terrain_coords_id:new l.Uniform1f(v,o.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(v,o.u_ele_delta)})};class pc{constructor(o,h,m){this.context=o;const _=o.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mr{constructor(o,h,m,_){this.length=h.length,this.attributes=m,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=o;const w=o.gl;this.buffer=w.createBuffer(),o.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,h){for(let m=0;m<this.attributes.length;m++){const _=h.attributes[this.attributes[m].name];_!==void 0&&o.enableVertexAttribArray(_)}}setVertexAttribPointers(o,h,m){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],P=h.attributes[w.name];P!==void 0&&o.vertexAttribPointer(P,w.components,o[Kh[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const er=new WeakMap;function Tl(v){if(er.has(v))return er.get(v);{const o=v.getParameter(v.VERSION).startsWith("WebGL 2.0");return er.set(v,o),o}}class Vn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mc extends Vn{getDefault(){return l.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class cd extends Vn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class hd extends Vn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Pl extends Vn{getDefault(){return[!0,!0,!0,!0]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class fd extends Vn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class ym extends Vn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ei extends Vn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Xh extends Vn{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Us extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}}class dd extends Vn{getDefault(){return[0,1]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class pu extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}}class Wi extends Vn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class gc extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}}class yc extends Vn{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class js extends Vn{getDefault(){return l.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Yh extends Vn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Jh extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}}class _c extends Vn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class oi extends Vn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class pd extends Vn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class ki extends Vn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Il extends Vn{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Qh extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class pa extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class qn extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Ml extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ir extends Vn{getDefault(){return null}set(o){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Fa extends Vn{getDefault(){return null}set(o){var h;if(o===this.current&&!this.dirty)return;const m=this.gl;Tl(m)?m.bindVertexArray(o):(h=m.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Vs extends Vn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class _m extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class ef extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class vc extends Vn{constructor(o,h){super(o),this.context=o,this.parent=h}getDefault(){return null}}class vm extends vc{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class tf extends vc{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class mu extends vc{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class qs{constructor(o,h,m,_,w){this.context=o,this.width=h,this.height=m;const P=o.gl,I=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new vm(o,I),_)this.depthAttachment=w?new mu(o,I):new tf(o,I);else if(w)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,h=this.colorAttachment.get();if(h&&o.deleteTexture(h),this.depthAttachment){const m=this.depthAttachment.get();m&&o.deleteRenderbuffer(m)}o.deleteFramebuffer(this.framebuffer)}}class hr{constructor(o,h,m){this.blendFunction=o,this.blendColor=h,this.mask=m}}hr.Replace=[1,0],hr.disabled=new hr(hr.Replace,l.Color.transparent,[!1,!1,!1,!1]),hr.unblended=new hr(hr.Replace,l.Color.transparent,[!0,!0,!0,!0]),hr.alphaBlended=new hr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class nf{constructor(o){var h,m;if(this.gl=o,this.clearColor=new mc(this),this.clearDepth=new cd(this),this.clearStencil=new hd(this),this.colorMask=new Pl(this),this.depthMask=new fd(this),this.stencilMask=new ym(this),this.stencilFunc=new Ei(this),this.stencilOp=new Xh(this),this.stencilTest=new Us(this),this.depthRange=new dd(this),this.depthTest=new pu(this),this.depthFunc=new Wi(this),this.blend=new gc(this),this.blendFunc=new yc(this),this.blendColor=new js(this),this.blendEquation=new Yh(this),this.cullFace=new Jh(this),this.cullFaceSide=new _c(this),this.frontFace=new oi(this),this.program=new pd(this),this.activeTexture=new ki(this),this.viewport=new Il(this),this.bindFramebuffer=new Qh(this),this.bindRenderbuffer=new pa(this),this.bindTexture=new qn(this),this.bindVertexBuffer=new Ml(this),this.bindElementBuffer=new Ir(this),this.bindVertexArray=new Fa(this),this.pixelStoreUnpack=new Vs(this),this.pixelStoreUnpackPremultiplyAlpha=new _m(this),this.pixelStoreUnpackFlipY=new ef(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),Tl(o)){this.HALF_FLOAT=o.HALF_FLOAT;const _=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=o.RGBA16F)!==null&&h!==void 0?h:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(m=o.RGB16F)!==null&&m!==void 0?m:_==null?void 0:_.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const _=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,h){return new pc(this,o,h)}createVertexBuffer(o,h,m){return new mr(this,o,h,m)}createRenderbuffer(o,h,m){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,o,h,m),this.bindRenderbuffer.set(null),w}createFramebuffer(o,h,m,_){return new qs(this,o,h,m,_)}clear({color:o,depth:h,stencil:m}){const _=this.gl;let w=0;o&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),m!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),_.clear(w)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){l.deepEqual(o.blendFunction,hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return Tl(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var h;return Tl(this.gl)?this.gl.deleteVertexArray(o):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Pn{constructor(o,h,m){this.func=o,this.mask=h,this.range=m}}Pn.ReadOnly=!1,Pn.ReadWrite=!0,Pn.disabled=new Pn(519,Pn.ReadOnly,[0,1]);const Gs=7680;class or{constructor(o,h,m,_,w,P){this.test=o,this.ref=h,this.mask=m,this.fail=_,this.depthFail=w,this.pass=P}}or.disabled=new or({func:519,mask:0},0,0,Gs,Gs,Gs);class ar{constructor(o,h,m){this.enable=o,this.mode=h,this.frontFace=m}}let gu;function xc(v,o,h,m,_,w,P){const I=v.context,O=I.gl,D=v.useProgram("collisionBox"),U=[];let V=0,ne=0;for(let be=0;be<m.length;be++){const Ue=m[be],Ze=o.getTile(Ue),Ke=Ze.getBucket(h);if(!Ke)continue;let tt=Ue.posMatrix;_[0]===0&&_[1]===0||(tt=v.translatePosMatrix(Ue.posMatrix,Ze,_,w));const ut=P?Ke.textCollisionBox:Ke.iconCollisionBox,it=Ke.collisionCircleArray;if(it.length>0){const Et=l.create(),Nt=tt;l.mul(Et,Ke.placementInvProjMatrix,v.transform.glCoordMatrix),l.mul(Et,Et,Ke.placementViewportMatrix),U.push({circleArray:it,circleOffset:ne,transform:Nt,invTransform:Et,coord:Ue}),V+=it.length/4,ne=V}ut&&D.draw(I,O.LINES,Pn.disabled,or.disabled,v.colorModeForRenderPass(),ar.disabled,Gh(tt,v.transform,Ze),v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ue),h.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,null,v.transform.zoom,null,null,ut.collisionVertexBuffer)}if(!P||!U.length)return;const fe=v.useProgram("collisionCircle"),he=new l.CollisionCircleLayoutArray;he.resize(4*V),he._trim();let de=0;for(const be of U)for(let Ue=0;Ue<be.circleArray.length/4;Ue++){const Ze=4*Ue,Ke=be.circleArray[Ze+0],tt=be.circleArray[Ze+1],ut=be.circleArray[Ze+2],it=be.circleArray[Ze+3];he.emplace(de++,Ke,tt,ut,it,0),he.emplace(de++,Ke,tt,ut,it,1),he.emplace(de++,Ke,tt,ut,it,2),he.emplace(de++,Ke,tt,ut,it,3)}(!gu||gu.length<2*V)&&(gu=function(be){const Ue=2*be,Ze=new l.QuadTriangleArray;Ze.resize(Ue),Ze._trim();for(let Ke=0;Ke<Ue;Ke++){const tt=6*Ke;Ze.uint16[tt+0]=4*Ke+0,Ze.uint16[tt+1]=4*Ke+1,Ze.uint16[tt+2]=4*Ke+2,Ze.uint16[tt+3]=4*Ke+2,Ze.uint16[tt+4]=4*Ke+3,Ze.uint16[tt+5]=4*Ke+0}return Ze}(V));const me=I.createIndexBuffer(gu,!0),Me=I.createVertexBuffer(he,l.collisionCircleLayout.members,!0);for(const be of U){const Ue={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(je=v.transform).cameraToCenterDistance,u_viewport_size:[je.width,je.height]};fe.draw(I,O.TRIANGLES,Pn.disabled,or.disabled,v.colorModeForRenderPass(),ar.disabled,Ue,v.style.map.terrain&&v.style.map.terrain.getTerrainData(be.coord),h.id,Me,me,l.SegmentVector.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,v.transform.zoom,null,null,null)}var je;Me.destroy(),me.destroy()}ar.disabled=new ar(!1,1029,2305),ar.backCCW=new ar(!0,1029,2305);const rf=l.identity(new Float32Array(16));function bc(v,o,h,m,_,w){const{horizontalAlign:P,verticalAlign:I}=l.getAnchorAlignment(v),O=-(P-.5)*o,D=-(I-.5)*h,U=l.evaluateVariableOffset(v,m);return new l.Point((O/_+U[0])*w,(D/_+U[1])*w)}function wc(v,o,h,m,_,w,P,I,O,D,U){const V=v.text.placedSymbolArray,ne=v.text.dynamicLayoutVertexArray,fe=v.icon.dynamicLayoutVertexArray,he={};ne.clear();for(let de=0;de<V.length;de++){const me=V.get(de),Me=me.hidden||!me.crossTileID||v.allowVerticalPlacement&&!me.placedOrientation?null:m[me.crossTileID];if(Me){const je=new l.Point(me.anchorX,me.anchorY),be=xt(je,h?P:w,U),Ue=$n(_.cameraToCenterDistance,be.signedDistanceFromCamera);let Ze=l.evaluateSizeForFeature(v.textSizeData,O,me)*Ue/l.ONE_EM;h&&(Ze*=v.tilePixelRatio/I);const{width:Ke,height:tt,anchor:ut,textOffset:it,textBoxScale:Et}=Me,Nt=bc(ut,Ke,tt,it,Et,Ze),xn=h?xt(je.add(Nt),w,U).point:be.point.add(o?Nt.rotate(-_.angle):Nt),_t=v.allowVerticalPlacement&&me.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Xt=0;Xt<me.numGlyphs;Xt++)l.addDynamicAttributes(ne,xn,_t);D&&me.associatedIconIndex>=0&&(he[me.associatedIconIndex]={shiftedAnchor:xn,angle:_t})}else ce(me.numGlyphs,ne)}if(D){fe.clear();const de=v.icon.placedSymbolArray;for(let me=0;me<de.length;me++){const Me=de.get(me);if(Me.hidden)ce(Me.numGlyphs,fe);else{const je=he[me];if(je)for(let be=0;be<Me.numGlyphs;be++)l.addDynamicAttributes(fe,je.shiftedAnchor,je.angle);else ce(Me.numGlyphs,fe)}}v.icon.dynamicLayoutVertexBuffer.updateData(fe)}v.text.dynamicLayoutVertexBuffer.updateData(ne)}function Sc(v,o,h){return h.iconsInText&&o?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Zi(v,o,h,m,_,w,P,I,O,D,U,V){const ne=v.context,fe=ne.gl,he=v.transform,de=I==="map",me=O==="map",Me=I!=="viewport"&&h.layout.get("symbol-placement")!=="point",je=de&&!me&&!Me,be=!h.layout.get("symbol-sort-key").isConstant();let Ue=!1;const Ze=v.depthModeForSublayer(0,Pn.ReadOnly),Ke=h.layout.get("text-variable-anchor"),tt=[];for(const ut of m){const it=o.getTile(ut),Et=it.getBucket(h);if(!Et)continue;const Nt=_?Et.text:Et.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const xn=Nt.programConfigurations.get(h.id),_t=_||Et.sdfIcons,Xt=_?Et.textSizeData:Et.iconSizeData,Ot=me||he.pitch!==0,Un=v.useProgram(Sc(_t,_,Et),xn),Rn=l.evaluateSizeForZoom(Xt,he.zoom),dn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ut);let nn,ir,fr,Gr,si=[0,0],oo=null;if(_)ir=it.glyphAtlasTexture,fr=fe.LINEAR,nn=it.glyphAtlasTexture.size,Et.iconsInText&&(si=it.imageAtlasTexture.size,oo=it.imageAtlasTexture,Gr=Ot||v.options.rotating||v.options.zooming||Xt.kind==="composite"||Xt.kind==="camera"?fe.LINEAR:fe.NEAREST);else{const Wr=h.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;ir=it.imageAtlasTexture,fr=_t||v.options.rotating||v.options.zooming||Wr||Ot?fe.LINEAR:fe.NEAREST,nn=it.imageAtlasTexture.size}const Ji=Te(it,1,v.transform.zoom),yi=vn(ut.posMatrix,me,de,v.transform,Ji),Li=Wt(ut.posMatrix,me,de,v.transform,Ji),va=Ke&&Et.hasTextData(),ds=h.layout.get("icon-text-fit")!=="none"&&va&&Et.hasIconData();if(Me){const Wr=v.style.map.terrain?(xa,ba)=>v.style.map.terrain.getElevation(ut,xa,ba):null,Fi=h.layout.get("text-rotation-alignment")==="map";bn(Et,ut.posMatrix,v,_,yi,Li,me,D,Fi,Wr)}const Oi=v.translatePosMatrix(ut.posMatrix,it,w,P),li=Me||_&&Ke||ds?rf:yi,cn=v.translatePosMatrix(Li,it,w,P,!0),Hr=_t&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ui;ui=_t?Et.iconsInText?Hi(Xt.kind,Rn,je,me,v,Oi,li,cn,nn,si):du(Xt.kind,Rn,je,me,v,Oi,li,cn,_,nn,!0):Al(Xt.kind,Rn,je,me,v,Oi,li,cn,_,nn);const kn={program:Un,buffers:Nt,uniformValues:ui,atlasTexture:ir,atlasTextureIcon:oo,atlasInterpolation:fr,atlasInterpolationIcon:Gr,isSDF:_t,hasHalo:Hr};if(be&&Et.canOverlap){Ue=!0;const Wr=Nt.segments.get();for(const Fi of Wr)tt.push({segments:new l.SegmentVector([Fi]),sortKey:Fi.sortKey,state:kn,terrainData:dn})}else tt.push({segments:Nt.segments,sortKey:0,state:kn,terrainData:dn})}Ue&&tt.sort((ut,it)=>ut.sortKey-it.sortKey);for(const ut of tt){const it=ut.state;if(ne.activeTexture.set(fe.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,fe.CLAMP_TO_EDGE),it.atlasTextureIcon&&(ne.activeTexture.set(fe.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),it.isSDF){const Et=it.uniformValues;it.hasHalo&&(Et.u_is_halo=1,yu(it.buffers,ut.segments,h,v,it.program,Ze,U,V,Et,ut.terrainData)),Et.u_is_halo=0}yu(it.buffers,ut.segments,h,v,it.program,Ze,U,V,it.uniformValues,ut.terrainData)}}function yu(v,o,h,m,_,w,P,I,O,D){const U=m.context;_.draw(U,U.gl.TRIANGLES,w,P,I,ar.disabled,O,D,h.id,v.layoutVertexBuffer,v.indexBuffer,o,h.paint,m.transform.zoom,v.programConfigurations.get(h.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ra(v,o,h,m,_){if(!h||!m||!m.imageAtlas)return;const w=m.imageAtlas.patternPositions;let P=w[h.to.toString()],I=w[h.from.toString()];if(!P||!I){const O=_.getPaintProperty(o);P=w[O],I=w[O]}P&&I&&v.setConstantPatternPositions(P,I)}function _u(v,o,h,m,_,w,P){const I=v.context.gl,O="fill-pattern",D=h.paint.get(O),U=D&&D.constantOr(1),V=h.getCrossfadeParameters();let ne,fe,he,de,me;P?(fe=U&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=I.LINES):(fe=U?"fillPattern":"fill",ne=I.TRIANGLES);const Me=D.constantOr(null);for(const je of m){const be=o.getTile(je);if(U&&!be.patternsLoaded())continue;const Ue=be.getBucket(h);if(!Ue)continue;const Ze=Ue.programConfigurations.get(h.id),Ke=v.useProgram(fe,Ze),tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(je);U&&(v.context.activeTexture.set(I.TEXTURE0),be.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Ze.updatePaintBuffers(V)),Ra(Ze,O,Me,be,h);const ut=tt?je:null,it=v.translatePosMatrix(ut?ut.posMatrix:je.posMatrix,be,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(P){de=Ue.indexBuffer2,me=Ue.segments2;const Et=[I.drawingBufferWidth,I.drawingBufferHeight];he=fe==="fillOutlinePattern"&&U?qh(it,v,V,be,Et):lc(it,Et)}else de=Ue.indexBuffer,me=Ue.segments,he=U?Vh(it,v,V,be):jh(it);Ke.draw(v.context,ne,_,v.stencilModeForClipping(je),w,ar.disabled,he,tt,h.id,Ue.layoutVertexBuffer,de,me,h.paint,v.transform.zoom,Ze)}}function Cc(v,o,h,m,_,w,P){const I=v.context,O=I.gl,D="fill-extrusion-pattern",U=h.paint.get(D),V=U.constantOr(1),ne=h.getCrossfadeParameters(),fe=h.paint.get("fill-extrusion-opacity"),he=U.constantOr(null);for(const de of m){const me=o.getTile(de),Me=me.getBucket(h);if(!Me)continue;const je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(de),be=Me.programConfigurations.get(h.id),Ue=v.useProgram(V?"fillExtrusionPattern":"fillExtrusion",be);V&&(v.context.activeTexture.set(O.TEXTURE0),me.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),be.updatePaintBuffers(ne)),Ra(be,D,he,me,h);const Ze=v.translatePosMatrix(de.posMatrix,me,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Ke=h.paint.get("fill-extrusion-vertical-gradient"),tt=V?Uh(Ze,v,Ke,fe,de,ne,me):hu(Ze,v,Ke,fe);Ue.draw(I,I.gl.TRIANGLES,_,w,P,ar.backCCW,tt,je,h.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,h.paint,v.transform.zoom,be,v.style.map.terrain&&Me.centroidVertexBuffer)}}function md(v,o,h,m,_,w,P){const I=v.context,O=I.gl,D=h.fbo;if(!D)return;const U=v.useProgram("hillshade"),V=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);I.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,D.colorAttachment.get()),U.draw(I,O.TRIANGLES,_,w,P,ar.disabled,((ne,fe,he,de)=>{const me=he.paint.get("hillshade-shadow-color"),Me=he.paint.get("hillshade-highlight-color"),je=he.paint.get("hillshade-accent-color");let be=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(be-=ne.transform.angle);const Ue=!ne.options.moving;return{u_matrix:de?de.posMatrix:ne.transform.calculatePosMatrix(fe.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:ls(0,fe.tileID),u_light:[he.paint.get("hillshade-exaggeration"),be],u_shadow:me,u_highlight:Me,u_accent:je}})(v,h,m,V?o:null),V,m.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Vr(v,o,h,m,_,w){const P=v.context,I=P.gl,O=o.dem;if(O&&O.data){const D=O.dim,U=O.stride,V=O.getPixels();if(P.activeTexture.set(I.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||v.getTileTexture(U),o.demTexture){const fe=o.demTexture;fe.update(V,{premultiply:!1}),fe.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else o.demTexture=new Le(P,V,I.RGBA,{premultiply:!1}),o.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);P.activeTexture.set(I.TEXTURE0);let ne=o.fbo;if(!ne){const fe=new Le(P,{width:D,height:D,data:null},I.RGBA);fe.bind(I.LINEAR,I.CLAMP_TO_EDGE),ne=o.fbo=P.createFramebuffer(D,D,!0,!1),ne.colorAttachment.set(fe.texture)}P.bindFramebuffer.set(ne.framebuffer),P.viewport.set([0,0,D,D]),v.useProgram("hillshadePrepare").draw(P,I.TRIANGLES,m,_,w,ar.disabled,((fe,he)=>{const de=he.stride,me=l.create();return l.ortho(me,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(me,me,[0,-l.EXTENT,0]),{u_matrix:me,u_image:1,u_dimension:[de,de],u_zoom:fe.overscaledZ,u_unpack:he.getUnpackVector()}})(o.tileID,O),null,h.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function Hs(v,o,h,m,_,w){const P=m.paint.get("raster-fade-duration");if(!w&&P>0){const I=l.browser.now(),O=(I-v.timeAdded)/P,D=o?(I-o.timeAdded)/P:-1,U=h.getSource(),V=_.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),ne=!o||Math.abs(o.tileID.overscaledZ-V)>Math.abs(v.tileID.overscaledZ-V),fe=ne&&v.refreshedUponExpiration?1:l.clamp(ne?O:1-D,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),o?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const Ro=new l.Color(1,0,0,1),gd=new l.Color(0,1,0,1),us=new l.Color(0,0,1,1),yd=new l.Color(1,0,1,1),Ll=new l.Color(0,1,1,1);function Ws(v,o,h,m){Do(v,0,o+h/2,v.transform.width,h,m)}function vu(v,o,h,m){Do(v,o-h/2,0,h,v.transform.height,m)}function Do(v,o,h,m,_,w){const P=v.context,I=P.gl;I.enable(I.SCISSOR_TEST),I.scissor(o*v.pixelRatio,h*v.pixelRatio,m*v.pixelRatio,_*v.pixelRatio),P.clear({color:w}),I.disable(I.SCISSOR_TEST)}function xu(v,o,h){const m=v.context,_=m.gl,w=h.posMatrix,P=v.useProgram("debug"),I=Pn.disabled,O=or.disabled,D=v.colorModeForRenderPass(),U="$debug",V=v.style.map.terrain&&v.style.map.terrain.getTerrainData(h);m.activeTexture.set(_.TEXTURE0);const ne=o.getTileByID(h.key).latestRawTileData,fe=Math.floor((ne&&ne.byteLength||0)/1024),he=o.getTile(h).tileSize,de=512/Math.min(he,512)*(h.overscaledZ/v.transform.zoom)*.5;let me=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(me+=` => ${h.overscaledZ}`),function(Me,je){Me.initDebugOverlayCanvas();const be=Me.debugOverlayCanvas,Ue=Me.context.gl,Ze=Me.debugOverlayCanvas.getContext("2d");Ze.clearRect(0,0,be.width,be.height),Ze.shadowColor="white",Ze.shadowBlur=2,Ze.lineWidth=1.5,Ze.strokeStyle="white",Ze.textBaseline="top",Ze.font="bold 36px Open Sans, sans-serif",Ze.fillText(je,5,5),Ze.strokeText(je,5,5),Me.debugOverlayTexture.update(be),Me.debugOverlayTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}(v,`${me} ${fe}kB`),P.draw(m,_.TRIANGLES,I,O,hr.alphaBlended,ar.disabled,uc(w,l.Color.transparent,de),null,U,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),P.draw(m,_.LINE_STRIP,I,O,D,ar.disabled,uc(w,l.Color.red),V,U,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function of(v,o,h){const m=v.context,_=m.gl,w=v.colorModeForRenderPass(),P=new Pn(_.LEQUAL,Pn.ReadWrite,v.depthRangeFor3D),I=v.useProgram("terrain"),O=o.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,v.width,v.height]);for(const D of h){const U=v.renderToTexture.getTexture(D),V=o.getTerrainData(D.tileID);m.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,U.texture);const ne={u_matrix:v.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(v.transform.zoom)};I.draw(m,_.TRIANGLES,P,or.disabled,w,ar.backCCW,ne,V,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class _d{constructor(o,h){this.context=new nf(o),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=Yn.maxUnderzooming+Yn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ii}resize(o,h,m){if(this.width=Math.floor(o*m),this.height=Math.floor(h*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const o=this.context,h=new l.PosArray;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(h,cu.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const m=new l.PosArray;m.emplaceBack(0,0),m.emplaceBack(l.EXTENT,0),m.emplaceBack(0,l.EXTENT),m.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(m,cu.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const _=new l.RasterBoundsArray;_.emplaceBack(0,0,0,0),_.emplaceBack(l.EXTENT,0,l.EXTENT,0),_.emplaceBack(0,l.EXTENT,0,l.EXTENT),_.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(_,Qn.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const w=new l.PosArray;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(w,cu.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const P=new l.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(P);const I=new l.TriangleIndexArray;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(I);const O=this.context.gl;this.stencilClearMode=new or({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const o=this.context,h=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=l.create();l.ortho(m,0,this.width,this.height,0,0,1),l.scale(m,m,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,h.TRIANGLES,Pn.disabled,this.stencilClearMode,hr.disabled,ar.disabled,Hh(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,h){if(this.currentStencilSource===o.source||!o.isTileClipped()||!h||!h.length)return;this.currentStencilSource=o.source;const m=this.context,_=m.gl;this.nextStencilID+h.length>256&&this.clearStencil(),m.setColorMode(hr.disabled),m.setDepthMode(Pn.disabled);const w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of h){const I=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);w.draw(m,_.TRIANGLES,Pn.disabled,new or({func:_.ALWAYS,mask:0},I,255,_.KEEP,_.KEEP,_.REPLACE),hr.disabled,ar.disabled,Hh(P.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,h=this.context.gl;return new or({func:h.NOTEQUAL,mask:255},o,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(o){const h=this.context.gl;return new or({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(o){const h=this.context.gl,m=o.sort((P,I)=>I.overscaledZ-P.overscaledZ),_=m[m.length-1].overscaledZ,w=m[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const P={};for(let I=0;I<w;I++)P[I+_]=new or({func:h.GEQUAL,mask:255},I+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[P,m]}return[{[_]:or.disabled},m]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new hr([o.CONSTANT_COLOR,o.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hr.unblended:hr.alphaBlended}depthModeForSublayer(o,h,m){if(!this.opaquePassEnabledForLayer())return Pn.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Pn(m||this.context.gl.LEQUAL,h,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,h){this.style=o,this.options=h,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();const m=this.style._order,_=this.style.sourceCaches,w={},P={},I={};for(const O in _){const D=_[O];D.used&&D.prepare(this.context),w[O]=D.getVisibleCoordinates(),P[O]=w[O].slice().reverse(),I[O]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<m.length;O++)if(this.style._layers[m[O]].is3D()){this.opaquePassCutoff=O;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const O=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||O.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,U){const V=D.context,ne=V.gl,fe=hr.unblended,he=new Pn(ne.LEQUAL,Pn.ReadWrite,[0,1]),de=U.getTerrainMesh(),me=U.sourceCache.getRenderableTiles(),Me=D.useProgram("terrainDepth");V.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),V.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),V.clear({color:l.Color.transparent,depth:1});for(const je of me){const be=U.getTerrainData(je.tileID),Ue={u_matrix:D.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(D.transform.zoom)};Me.draw(V,ne.TRIANGLES,he,or.disabled,fe,ar.backCCW,Ue,be,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}V.bindFramebuffer.set(null),V.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,U){const V=D.context,ne=V.gl,fe=hr.unblended,he=new Pn(ne.LEQUAL,Pn.ReadWrite,[0,1]),de=U.getTerrainMesh(),me=U.getCoordsTexture(),Me=U.sourceCache.getRenderableTiles(),je=D.useProgram("terrainCoords");V.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),V.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),V.clear({color:l.Color.transparent,depth:1}),U.coordsIndex=[];for(const be of Me){const Ue=U.getTerrainData(be.tileID);V.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,me.texture);const Ze={u_matrix:D.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(D.transform.zoom)};je.draw(V,ne.TRIANGLES,he,or.disabled,fe,ar.backCCW,Ze,Ue,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),U.coordsIndex.push(be.tileID.key)}V.bindFramebuffer.set(null),V.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const O of m){const D=this.style._layers[O];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const U=P[D.source];(D.type==="custom"||U.length)&&this.renderLayer(this,_[D.source],D,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[m[this.currentLayer]],D=_[O.source],U=w[O.source];this._renderTileClippingMasks(O,U),this.renderLayer(this,D,O,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const O=this.style._layers[m[this.currentLayer]],D=_[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const U=(O.type==="symbol"?I:P)[O.source];this._renderTileClippingMasks(O,w[O.source]),this.renderLayer(this,D,O,U)}if(this.options.showTileBoundaries){const O=function(D,U){let V=null;const ne=Object.values(D._layers).flatMap(me=>me.source&&!me.isHidden(U)?[D.sourceCaches[me.source]]:[]),fe=ne.filter(me=>me.getSource().type==="vector"),he=ne.filter(me=>me.getSource().type!=="vector"),de=me=>{(!V||V.getSource().maxzoom<me.getSource().maxzoom)&&(V=me)};return fe.forEach(me=>de(me)),V||he.forEach(me=>de(me)),V}(this.style,this.transform.zoom);O&&function(D,U,V){for(let ne=0;ne<V.length;ne++)xu(D,U,V[ne])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const D=O.transform.padding;Ws(O,O.transform.height-(D.top||0),3,Ro),Ws(O,D.bottom||0,3,gd),vu(O,D.left||0,3,us),vu(O,O.transform.width-(D.right||0),3,yd);const U=O.transform.centerPoint;(function(V,ne,fe,he){Do(V,ne-1,fe-10,2,20,he),Do(V,ne-10,fe-1,20,2,he)})(O,U.x,O.transform.height-U.y,Ll)}(this),this.context.setDefault()}renderLayer(o,h,m,_){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(_||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(w,P,I,O,D){if(w.renderPass!=="translucent")return;const U=or.disabled,V=w.colorModeForRenderPass();I.layout.get("text-variable-anchor")&&function(ne,fe,he,de,me,Me,je){const be=fe.transform,Ue=me==="map",Ze=Me==="map";for(const Ke of ne){const tt=de.getTile(Ke),ut=tt.getBucket(he);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const it=l.evaluateSizeForZoom(ut.textSizeData,be.zoom),Et=Te(tt,1,fe.transform.zoom),Nt=vn(Ke.posMatrix,Ze,Ue,fe.transform,Et),xn=he.layout.get("icon-text-fit")!=="none"&&ut.hasIconData();if(it){const _t=Math.pow(2,be.zoom-tt.tileID.overscaledZ);wc(ut,Ue,Ze,je,be,Nt,Ke.posMatrix,_t,it,xn,fe.style.map.terrain?(Xt,Ot)=>fe.style.map.terrain.getElevation(Ke,Xt,Ot):null)}}}(O,w,I,P,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),D),I.paint.get("icon-opacity").constantOr(1)!==0&&Zi(w,P,I,O,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),U,V),I.paint.get("text-opacity").constantOr(1)!==0&&Zi(w,P,I,O,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),U,V),P.map.showCollisionBoxes&&(xc(w,P,I,O,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),xc(w,P,I,O,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(o,h,m,_,this.style.placement.variableOffsets);break;case"circle":(function(w,P,I,O){if(w.renderPass!=="translucent")return;const D=I.paint.get("circle-opacity"),U=I.paint.get("circle-stroke-width"),V=I.paint.get("circle-stroke-opacity"),ne=!I.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(U.constantOr(1)===0||V.constantOr(1)===0))return;const fe=w.context,he=fe.gl,de=w.depthModeForSublayer(0,Pn.ReadOnly),me=or.disabled,Me=w.colorModeForRenderPass(),je=[];for(let be=0;be<O.length;be++){const Ue=O[be],Ze=P.getTile(Ue),Ke=Ze.getBucket(I);if(!Ke)continue;const tt=Ke.programConfigurations.get(I.id),ut=w.useProgram("circle",tt),it=Ke.layoutVertexBuffer,Et=Ke.indexBuffer,Nt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ue),xn={programConfiguration:tt,program:ut,layoutVertexBuffer:it,indexBuffer:Et,uniformValues:ss(w,Ue,Ze,I),terrainData:Nt};if(ne){const _t=Ke.segments.get();for(const Xt of _t)je.push({segments:new l.SegmentVector([Xt]),sortKey:Xt.sortKey,state:xn})}else je.push({segments:Ke.segments,sortKey:0,state:xn})}ne&&je.sort((be,Ue)=>be.sortKey-Ue.sortKey);for(const be of je){const{programConfiguration:Ue,program:Ze,layoutVertexBuffer:Ke,indexBuffer:tt,uniformValues:ut,terrainData:it}=be.state;Ze.draw(fe,he.TRIANGLES,de,me,Me,ar.disabled,ut,it,I.id,Ke,tt,be.segments,I.paint,w.transform.zoom,Ue)}})(o,h,m,_);break;case"heatmap":(function(w,P,I,O){if(I.paint.get("heatmap-opacity")!==0)if(w.renderPass==="offscreen"){const D=w.context,U=D.gl,V=or.disabled,ne=new hr([U.ONE,U.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(fe,he,de){const me=fe.gl;fe.activeTexture.set(me.TEXTURE1),fe.viewport.set([0,0,he.width/4,he.height/4]);let Me=de.heatmapFbo;if(Me)me.bindTexture(me.TEXTURE_2D,Me.colorAttachment.get()),fe.bindFramebuffer.set(Me.framebuffer);else{const je=me.createTexture();me.bindTexture(me.TEXTURE_2D,je),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),Me=de.heatmapFbo=fe.createFramebuffer(he.width/4,he.height/4,!1,!1),function(be,Ue,Ze,Ke){var tt,ut;const it=be.gl,Et=(tt=be.HALF_FLOAT)!==null&&tt!==void 0?tt:it.UNSIGNED_BYTE,Nt=(ut=be.RGBA16F)!==null&&ut!==void 0?ut:it.RGBA;it.texImage2D(it.TEXTURE_2D,0,Nt,Ue.width/4,Ue.height/4,0,it.RGBA,Et,null),Ke.colorAttachment.set(Ze)}(fe,he,je,Me)}})(D,w,I),D.clear({color:l.Color.transparent});for(let fe=0;fe<O.length;fe++){const he=O[fe];if(P.hasRenderableParent(he))continue;const de=P.getTile(he),me=de.getBucket(I);if(!me)continue;const Me=me.programConfigurations.get(I.id),je=w.useProgram("heatmap",Me),{zoom:be}=w.transform;je.draw(D,U.TRIANGLES,Pn.disabled,V,ne,ar.disabled,Wh(he.posMatrix,de,be,I.paint.get("heatmap-intensity")),null,I.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,I.paint,w.transform.zoom,Me)}D.viewport.set([0,0,w.width,w.height])}else w.renderPass==="translucent"&&(w.context.setColorMode(w.colorModeForRenderPass()),function(D,U){const V=D.context,ne=V.gl,fe=U.heatmapFbo;if(!fe)return;V.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,fe.colorAttachment.get()),V.activeTexture.set(ne.TEXTURE1);let he=U.colorRampTexture;he||(he=U.colorRampTexture=new Le(V,U.colorRamp,ne.RGBA)),he.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(V,ne.TRIANGLES,Pn.disabled,or.disabled,D.colorModeForRenderPass(),ar.disabled,((de,me,Me,je)=>{const be=l.create();l.ortho(be,0,de.width,de.height,0,0,1);const Ue=de.context.gl;return{u_matrix:be,u_world:[Ue.drawingBufferWidth,Ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:me.paint.get("heatmap-opacity")}})(D,U),null,U.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,U.paint,D.transform.zoom)}(w,I))})(o,h,m,_);break;case"line":(function(w,P,I,O){if(w.renderPass!=="translucent")return;const D=I.paint.get("line-opacity"),U=I.paint.get("line-width");if(D.constantOr(1)===0||U.constantOr(1)===0)return;const V=w.depthModeForSublayer(0,Pn.ReadOnly),ne=w.colorModeForRenderPass(),fe=I.paint.get("line-dasharray"),he=I.paint.get("line-pattern"),de=he.constantOr(1),me=I.paint.get("line-gradient"),Me=I.getCrossfadeParameters(),je=de?"linePattern":fe?"lineSDF":me?"lineGradient":"line",be=w.context,Ue=be.gl;let Ze=!0;for(const Ke of O){const tt=P.getTile(Ke);if(de&&!tt.patternsLoaded())continue;const ut=tt.getBucket(I);if(!ut)continue;const it=ut.programConfigurations.get(I.id),Et=w.context.program.get(),Nt=w.useProgram(je,it),xn=Ze||Nt.program!==Et,_t=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ke),Xt=he.constantOr(null);if(Xt&&tt.imageAtlas){const Rn=tt.imageAtlas,dn=Rn.patternPositions[Xt.to.toString()],nn=Rn.patternPositions[Xt.from.toString()];dn&&nn&&it.setConstantPatternPositions(dn,nn)}const Ot=_t?Ke:null,Un=de?cc(w,tt,I,Me,Ot):fe?hc(w,tt,I,fe,Me,Ot):me?xo(w,tt,I,ut.lineClipsArray.length,Ot):Ns(w,tt,I,Ot);if(de)be.activeTexture.set(Ue.TEXTURE0),tt.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),it.updatePaintBuffers(Me);else if(fe&&(xn||w.lineAtlas.dirty))be.activeTexture.set(Ue.TEXTURE0),w.lineAtlas.bind(be);else if(me){const Rn=ut.gradients[I.id];let dn=Rn.texture;if(I.gradientVersion!==Rn.version){let nn=256;if(I.stepInterpolant){const ir=P.getSource().maxzoom,fr=Ke.canonical.z===ir?Math.ceil(1<<w.transform.maxZoom-Ke.canonical.z):1;nn=l.clamp(l.nextPowerOfTwo(ut.maxLineLength/l.EXTENT*1024*fr),256,be.maxTextureSize)}Rn.gradient=l.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:nn,image:Rn.gradient||void 0,clips:ut.lineClipsArray}),Rn.texture?Rn.texture.update(Rn.gradient):Rn.texture=new Le(be,Rn.gradient,Ue.RGBA),Rn.version=I.gradientVersion,dn=Rn.texture}be.activeTexture.set(Ue.TEXTURE0),dn.bind(I.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}Nt.draw(be,Ue.TRIANGLES,V,w.stencilModeForClipping(Ke),ne,ar.disabled,Un,_t,I.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,I.paint,w.transform.zoom,it,ut.layoutVertexBuffer2),Ze=!1}})(o,h,m,_);break;case"fill":(function(w,P,I,O){const D=I.paint.get("fill-color"),U=I.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const V=w.colorModeForRenderPass(),ne=I.paint.get("fill-pattern"),fe=w.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&D.constantOr(l.Color.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===fe){const he=w.depthModeForSublayer(1,w.renderPass==="opaque"?Pn.ReadWrite:Pn.ReadOnly);_u(w,P,I,O,he,V,!1)}if(w.renderPass==="translucent"&&I.paint.get("fill-antialias")){const he=w.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Pn.ReadOnly);_u(w,P,I,O,he,V,!0)}})(o,h,m,_);break;case"fill-extrusion":(function(w,P,I,O){const D=I.paint.get("fill-extrusion-opacity");if(D!==0&&w.renderPass==="translucent"){const U=new Pn(w.context.gl.LEQUAL,Pn.ReadWrite,w.depthRangeFor3D);if(D!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Cc(w,P,I,O,U,or.disabled,hr.disabled),Cc(w,P,I,O,U,w.stencilModeFor3D(),w.colorModeForRenderPass());else{const V=w.colorModeForRenderPass();Cc(w,P,I,O,U,or.disabled,V)}}})(o,h,m,_);break;case"hillshade":(function(w,P,I,O){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const D=w.context,U=w.depthModeForSublayer(0,Pn.ReadOnly),V=w.colorModeForRenderPass(),[ne,fe]=w.renderPass==="translucent"?w.stencilConfigForOverlap(O):[{},O];for(const he of fe){const de=P.getTile(he);de.needsHillshadePrepare!==void 0&&de.needsHillshadePrepare&&w.renderPass==="offscreen"?Vr(w,de,I,U,or.disabled,V):w.renderPass==="translucent"&&md(w,he,de,I,U,ne[he.overscaledZ],V)}D.viewport.set([0,0,w.width,w.height])})(o,h,m,_);break;case"raster":(function(w,P,I,O){if(w.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!O.length)return;const D=w.context,U=D.gl,V=P.getSource(),ne=w.useProgram("raster"),fe=w.colorModeForRenderPass(),[he,de]=V instanceof Bn?[{},O]:w.stencilConfigForOverlap(O),me=de[de.length-1].overscaledZ,Me=!w.options.moving;for(const je of de){const be=w.depthModeForSublayer(je.overscaledZ-me,I.paint.get("raster-opacity")===1?Pn.ReadWrite:Pn.ReadOnly,U.LESS),Ue=P.getTile(je);Ue.registerFadeDuration(I.paint.get("raster-fade-duration"));const Ze=P.findLoadedParent(je,0),Ke=Hs(Ue,Ze,P,I,w.transform,w.style.map.terrain);let tt,ut;const it=I.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;D.activeTexture.set(U.TEXTURE0),Ue.texture.bind(it,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(U.TEXTURE1),Ze?(Ze.texture.bind(it,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,Ze.tileID.overscaledZ-Ue.tileID.overscaledZ),ut=[Ue.tileID.canonical.x*tt%1,Ue.tileID.canonical.y*tt%1]):Ue.texture.bind(it,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const Et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(je),Nt=Et?je:null,xn=Nt?Nt.posMatrix:w.transform.calculatePosMatrix(je.toUnwrapped(),Me),_t=fc(xn,ut||[0,0],tt||1,Ke,I);V instanceof Bn?ne.draw(D,U.TRIANGLES,be,or.disabled,fe,ar.disabled,_t,Et,I.id,V.boundsBuffer,w.quadTriangleIndexBuffer,V.boundsSegments):ne.draw(D,U.TRIANGLES,be,he[je.overscaledZ],fe,ar.disabled,_t,Et,I.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(o,h,m,_);break;case"background":(function(w,P,I,O){const D=I.paint.get("background-color"),U=I.paint.get("background-opacity");if(U===0)return;const V=w.context,ne=V.gl,fe=w.transform,he=fe.tileSize,de=I.paint.get("background-pattern");if(w.isPatternMissing(de))return;const me=!de&&D.a===1&&U===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==me)return;const Me=or.disabled,je=w.depthModeForSublayer(0,me==="opaque"?Pn.ReadWrite:Pn.ReadOnly),be=w.colorModeForRenderPass(),Ue=w.useProgram(de?"backgroundPattern":"background"),Ze=O||fe.coveringTiles({tileSize:he,terrain:w.style.map.terrain});de&&(V.activeTexture.set(ne.TEXTURE0),w.imageManager.bind(w.context));const Ke=I.getCrossfadeParameters();for(const tt of Ze){const ut=O?tt.posMatrix:w.transform.calculatePosMatrix(tt.toUnwrapped()),it=de?Zh(ut,U,w,de,{tileID:tt,tileSize:he},Ke):bo(ut,U,D),Et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(tt);Ue.draw(V,ne.TRIANGLES,je,Me,be,ar.disabled,it,Et,I.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(o,0,m,_);break;case"custom":(function(w,P,I){const O=w.context,D=I.implementation;if(w.renderPass==="offscreen"){const U=D.prerender;U&&(w.setCustomLayerDefaults(),O.setColorMode(w.colorModeForRenderPass()),U.call(D,O.gl,w.transform.customLayerMatrix()),O.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),O.setColorMode(w.colorModeForRenderPass()),O.setStencilMode(or.disabled);const U=D.renderingMode==="3d"?new Pn(w.context.gl.LEQUAL,Pn.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,Pn.ReadOnly);O.setDepthMode(U),D.render(O.gl,w.transform.customLayerMatrix()),O.setDirty(),w.setBaseState(),O.bindFramebuffer.set(null)}})(o,0,m)}}translatePosMatrix(o,h,m,_,w){if(!m[0]&&!m[1])return o;const P=w?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(P){const D=Math.sin(P),U=Math.cos(P);m=[m[0]*U-m[1]*D,m[0]*D+m[1]*U]}const I=[w?m[0]:Te(h,m[0],this.transform.zoom),w?m[1]:Te(h,m[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,o,I),O}saveTileTexture(o){const h=this._tileTextures[o.size[0]];h?h.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const h=this._tileTextures[o];return h&&h.length>0?h.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const h=this.imageManager.getPattern(o.from.toString()),m=this.imageManager.getPattern(o.to.toString());return!h||!m}useProgram(o,h){this.cache=this.cache||{};const m=o+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new gm(this.context,as[o],h,dc[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:h}=this.context.gl;return this.width!==o||this.height!==h}}class Ec{constructor(o,h){this.points=o,this.planes=h}static fromInvProjectionMatrix(o,h,m){const _=Math.pow(2,m),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const O=1/(I=l.transformMat4([],I,o))[3]/h*_;return l.mul$1(I,I,[O,O,1/I[3],O])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const O=function(ne,fe){var he=fe[0],de=fe[1],me=fe[2],Me=he*he+de*de+me*me;return Me>0&&(Me=1/Math.sqrt(Me)),ne[0]=fe[0]*Me,ne[1]=fe[1]*Me,ne[2]=fe[2]*Me,ne}([],function(ne,fe,he){var de=fe[0],me=fe[1],Me=fe[2],je=he[0],be=he[1],Ue=he[2];return ne[0]=me*Ue-Me*be,ne[1]=Me*je-de*Ue,ne[2]=de*be-me*je,ne}([],ee([],w[I[0]],w[I[1]]),ee([],w[I[2]],w[I[1]]))),D=-((U=O)[0]*(V=w[I[1]])[0]+U[1]*V[1]+U[2]*V[2]);var U,V;return O.concat(D)});return new Ec(w,P)}}class Ki{constructor(o,h){this.min=o,this.max=h,this.center=function(m,_,w){return m[0]=.5*_[0],m[1]=.5*_[1],m[2]=.5*_[2],m}([],function(m,_,w){return m[0]=_[0]+w[0],m[1]=_[1]+w[1],m[2]=_[2]+w[2],m}([],this.min,this.max))}quadrant(o){const h=[o%2==0,o<2],m=Q(this.min),_=Q(this.max);for(let w=0;w<h.length;w++)m[w]=h[w]?this.min[w]:this.center[w],_[w]=h[w]?this.center[w]:this.max[w];return _[2]=this.max[2],new Ki(m,_)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let _=0;_<o.planes.length;_++){const w=o.planes[_];let P=0;for(let I=0;I<h.length;I++)l.dot(w,h[I])>=0&&P++;if(P===0)return 0;P!==h.length&&(m=!1)}if(m)return 2;for(let _=0;_<3;_++){let w=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let I=0;I<o.points.length;I++){const O=o.points[I][_]-this.min[_];w=Math.min(w,O),P=Math.max(P,O)}if(P<0||w>this.max[_]-this.min[_])return 0}return 1}}class io{constructor(o=0,h=0,m=0,_=0){if(isNaN(o)||o<0||isNaN(h)||h<0||isNaN(m)||m<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=h,this.left=m,this.right=_}interpolate(o,h,m){return h.top!=null&&o.top!=null&&(this.top=l.interpolate.number(o.top,h.top,m)),h.bottom!=null&&o.bottom!=null&&(this.bottom=l.interpolate.number(o.bottom,h.bottom,m)),h.left!=null&&o.left!=null&&(this.left=l.interpolate.number(o.left,h.left,m)),h.right!=null&&o.right!=null&&(this.right=l.interpolate.number(o.right,h.right,m)),this}getCenter(o,h){const m=l.clamp((this.left+o-this.right)/2,0,o),_=l.clamp((this.top+h-this.bottom)/2,0,h);return new l.Point(m,_)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class bu{constructor(o,h,m,_,w){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=w===void 0||!!w,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=m??0,this._maxPitch=_??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new io,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const o=new bu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this._minEleveationForCurrentTile=o._minEleveationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const h=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var m=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}(),function(m,_,w){var P=_[0],I=_[1],O=_[2],D=_[3],U=Math.sin(w),V=Math.cos(w);m[0]=P*V+O*U,m[1]=I*V+D*U,m[2]=P*-U+O*V,m[3]=I*-U+D*V}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const h=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const h=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,h,m){this._unmodified=!1,this._edgeInsets.interpolate(o,h,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const h=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(o){const h=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const m=this.pointCoordinate(new l.Point(0,0)),_=this.pointCoordinate(new l.Point(this.width,0)),w=this.pointCoordinate(new l.Point(this.width,this.height)),P=this.pointCoordinate(new l.Point(0,this.height)),I=Math.floor(Math.min(m.x,_.x,w.x,P.x)),O=Math.floor(Math.max(m.x,_.x,w.x,P.x)),D=1;for(let U=I-D;U<=O+D;U++)U!==0&&h.push(new l.UnwrappedTileID(U,o))}return h}coveringTiles(o){var h,m;let _=this.coveringZoomLevel(o);const w=_;if(o.minzoom!==void 0&&_<o.minzoom)return[];o.maxzoom!==void 0&&_>o.maxzoom&&(_=o.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),I=l.MercatorCoordinate.fromLngLat(this.center),O=Math.pow(2,_),D=[O*P.x,O*P.y,0],U=[O*I.x,O*I.y,0],V=Ec.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_);let ne=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=_);const fe=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,he=be=>({aabb:new Ki([be*O,0,0],[(be+1)*O,O,0]),zoom:0,x:0,y:0,wrap:be,fullyVisible:!1}),de=[],me=[],Me=_,je=o.reparseOverscaled?w:_;if(this._renderWorldCopies)for(let be=1;be<=3;be++)de.push(he(-be)),de.push(he(be));for(de.push(he(0));de.length>0;){const be=de.pop(),Ue=be.x,Ze=be.y;let Ke=be.fullyVisible;if(!Ke){const Nt=be.aabb.intersects(V);if(Nt===0)continue;Ke=Nt===2}const tt=o.terrain?D:U,ut=be.aabb.distanceX(tt),it=be.aabb.distanceY(tt),Et=Math.max(Math.abs(ut),Math.abs(it));if(be.zoom===Me||Et>fe+(1<<Me-be.zoom)-2&&be.zoom>=ne){const Nt=Me-be.zoom,xn=D[0]-.5-(Ue<<Nt),_t=D[1]-.5-(Ze<<Nt);me.push({tileID:new l.OverscaledTileID(be.zoom===Me?je:be.zoom,be.wrap,be.zoom,Ue,Ze),distanceSq:oe([U[0]-.5-Ue,U[1]-.5-Ze]),tileDistanceToCamera:Math.sqrt(xn*xn+_t*_t)})}else for(let Nt=0;Nt<4;Nt++){const xn=(Ue<<1)+Nt%2,_t=(Ze<<1)+(Nt>>1),Xt=be.zoom+1;let Ot=be.aabb.quadrant(Nt);if(o.terrain){const Un=new l.OverscaledTileID(Xt,be.wrap,Xt,xn,_t),Rn=o.terrain.getMinMaxElevation(Un),dn=(h=Rn.minElevation)!==null&&h!==void 0?h:this.elevation,nn=(m=Rn.maxElevation)!==null&&m!==void 0?m:this.elevation;Ot=new Ki([Ot.min[0],Ot.min[1],dn],[Ot.max[0],Ot.max[1],nn])}de.push({aabb:Ot,zoom:Xt,x:xn,y:_t,wrap:be.wrap,fullyVisible:Ke})}}return me.sort((be,Ue)=>be.distanceSq-Ue.distanceSq).map(be=>be.tileID)}resize(o,h){this.width=o,this.height=h,this.pixelsToGLUnits=[2/o,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const h=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(h)*this.worldSize)}unproject(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const h=this.pointLocation(this.centerPoint,o),m=o.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-m))return;const _=this.getCameraPosition(),w=l.MercatorCoordinate.fromLngLat(_.lngLat,_.altitude),P=l.MercatorCoordinate.fromLngLat(h,m),I=w.x-P.x,O=w.y-P.y,D=w.z-P.z,U=Math.sqrt(I*I+O*O+D*D),V=this.scaleZoom(this.cameraToCenterDistance/U/this.tileSize);this._elevation=m,this._center=h,this.zoom=V}setLocationAtPoint(o,h){const m=this.pointCoordinate(h),_=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(o),P=new l.MercatorCoordinate(w.x-(m.x-_.x),w.y-(m.y-_.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,h){return h?this.coordinatePoint(this.locationCoordinate(o),h.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,h){return this.coordinateLocation(this.pointCoordinate(o,h))}locationCoordinate(o){return l.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,h){if(h){const ne=h.pointCoordinate(o);if(ne!=null)return ne}const m=[o.x,o.y,0,1],_=[o.x,o.y,1,1];l.transformMat4(m,m,this.pixelMatrixInverse),l.transformMat4(_,_,this.pixelMatrixInverse);const w=m[3],P=_[3],I=m[1]/w,O=_[1]/P,D=m[2]/w,U=_[2]/P,V=D===U?0:(0-D)/(U-D);return new l.MercatorCoordinate(l.interpolate.number(m[0]/w,_[0]/P,V)/this.worldSize,l.interpolate.number(I,O,V)/this.worldSize)}coordinatePoint(o,h=0,m=this.pixelMatrix){const _=[o.x*this.worldSize,o.y*this.worldSize,h,1];return l.transformMat4(_,_,m),new l.Point(_[0]/_[3],_[1]/_[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new gt().extend(this.pointLocation(new l.Point(0,o))).extend(this.pointLocation(new l.Point(this.width,o))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new gt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,h=!1){const m=o.key,_=h?this._alignedPosMatrixCache:this._posMatrixCache;if(_[m])return _[m];const w=o.canonical,P=this.worldSize/this.zoomScale(w.z),I=w.x+Math.pow(2,w.z)*o.wrap,O=l.identity(new Float64Array(16));return l.translate(O,O,[I*P,w.y*P,0]),l.scale(O,O,[P/l.EXTENT,P/l.EXTENT,1]),l.multiply(O,h?this.alignedProjMatrix:this.projMatrix,O),_[m]=new Float32Array(O),_[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,h,m,_,w=-90,P=90,I=-180,O=180;const D=this.size,U=this._unmodified;if(this.latRange){const fe=this.latRange;w=l.mercatorYfromLat(fe[1])*this.worldSize,P=l.mercatorYfromLat(fe[0])*this.worldSize,o=P-w<D.y?D.y/(P-w):0}if(this.lngRange){const fe=this.lngRange;I=l.wrap(l.mercatorXfromLng(fe[0])*this.worldSize,0,this.worldSize),O=l.wrap(l.mercatorXfromLng(fe[1])*this.worldSize,0,this.worldSize),O<I&&(O+=this.worldSize),h=O-I<D.x?D.x/(O-I):0}const V=this.point,ne=Math.max(h||0,o||0);if(ne)return this.center=this.unproject(new l.Point(h?(O+I)/2:V.x,o?(P+w)/2:V.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const fe=V.y,he=D.y/2;fe-he<w&&(_=w+he),fe+he>P&&(_=P-he)}if(this.lngRange){const fe=(I+O)/2,he=l.wrap(V.x,fe-this.worldSize/2,fe+this.worldSize/2),de=D.x/2;he-de<I&&(m=I+de),he+de>O&&(m=O-de)}m===void 0&&_===void 0||(this.center=this.unproject(new l.Point(m!==void 0?m:V.x,_!==void 0?_:V.y)).wrap()),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,h=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let _=l.identity(new Float64Array(16));l.scale(_,_,[this.width/2,-this.height/2,1]),l.translate(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=l.identity(new Float64Array(16)),l.scale(_,_,[1,-1,1]),l.translate(_,_,[-1,-1,0]),l.scale(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_;const w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this._minEleveationForCurrentTile),I=w-P*this._pixelPerMeter/Math.cos(this._pitch),O=P<0?I:w,D=Math.PI/2+this._pitch,U=this._fov*(.5+o.y/this.height),V=Math.sin(U)*O/Math.sin(l.clamp(Math.PI-D-U,.01,Math.PI-.01)),ne=this.getHorizon(),fe=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+o.y/(2*ne)),he=Math.sin(fe)*O/Math.sin(l.clamp(Math.PI-D-fe,.01,Math.PI-.01)),de=Math.min(V,he),me=1.01*(Math.cos(Math.PI/2-this._pitch)*de+O),Me=this.height/50;_=new Float64Array(16),l.perspective(_,this._fov,this.width/this.height,Me,me),_[8]=2*-o.x/this.width,_[9]=2*o.y/this.height,l.scale(_,_,[1,-1,1]),l.translate(_,_,[0,0,-this.cameraToCenterDistance]),l.rotateX(_,_,this._pitch),l.rotateZ(_,_,this.angle),l.translate(_,_,[-h,-m,0]),this.mercatorMatrix=l.scale([],_,[this.worldSize,this.worldSize,this.worldSize]),l.scale(_,_,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,_),l.translate(_,_,[0,0,-this.elevation]),this.projMatrix=_,this.invProjMatrix=l.invert([],_),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,_);const je=this.width%2/2,be=this.height%2/2,Ue=Math.cos(this.angle),Ze=Math.sin(this.angle),Ke=h-Math.round(h)+Ue*je+Ze*be,tt=m-Math.round(m)+Ue*be+Ze*je,ut=new Float64Array(_);if(l.translate(ut,ut,[Ke>.5?Ke-1:Ke,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=ut,_=l.invert(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new l.Point(0,0)),h=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))}getCameraQueryGeometry(o){const h=this.getCameraPoint();if(o.length===1)return[o[0],h];{let m=h.x,_=h.y,w=h.x,P=h.y;for(const I of o)m=Math.min(m,I.x),_=Math.min(_,I.y),w=Math.max(w,I.x),P=Math.max(P,I.y);return[new l.Point(m,_),new l.Point(w,_),new l.Point(w,P),new l.Point(m,P),new l.Point(m,_)]}}}class vd{constructor(o){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let m;return h.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(m=_)}),(m&&m[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(m=>isNaN(m))){const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:m,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=function(h,m){let _=!1,w=null;const P=()=>{w=null,_&&(h(),w=setTimeout(P,300),_=!1)};return()=>(_=!0,w||P(),w)}(this._updateHashUnthrottled),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const h=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,_=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),P=Math.round(h.lng*w)/w,I=Math.round(h.lat*w)/w,O=this._map.getBearing(),D=this._map.getPitch();let U="";if(U+=o?`/${P}/${I}/${m}`:`${m}/${I}/${P}`,(O||D)&&(U+="/"+Math.round(10*O)/10),D&&(U+=`/${Math.round(D)}`),this._hashName){const V=this._hashName;let ne=!1;const fe=window.location.hash.slice(1).split("&").map(he=>{const de=he.split("=")[0];return de===V?(ne=!0,`${de}=${U}`):he}).filter(he=>he);return ne||fe.push(`${V}=${U}`),`#${fe.join("&")}`}return`#${U}`}}const wu={linearity:.3,easing:l.bezier(0,0,.3,1)},xd=l.extend({deceleration:2500,maxSpeed:1400},wu),bd=l.extend({deceleration:20,maxSpeed:1400},wu),Su=l.extend({deceleration:1e3,maxSpeed:360},wu),Zs=l.extend({deceleration:1e3,maxSpeed:90},wu);class De{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,h=l.browser.now();for(;o.length>0&&h-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){const w=Ye(h.pan.mag(),m,l.extend({},xd,o||{}));_.offset=h.pan.mult(w.amount/h.pan.mag()),_.center=this._map.transform.center,Qe(_,w)}if(h.zoom){const w=Ye(h.zoom,m,bd);_.zoom=this._map.transform.zoom+w.amount,Qe(_,w)}if(h.bearing){const w=Ye(h.bearing,m,Su);_.bearing=this._map.transform.bearing+l.clamp(w.amount,-179,179),Qe(_,w)}if(h.pitch){const w=Ye(h.pitch,m,Zs);_.pitch=this._map.transform.pitch+w.amount,Qe(_,w)}if(_.zoom||_.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),l.extend(_,{noMoveStart:!0})}}function Qe(v,o){(!v.duration||v.duration<o.duration)&&(v.duration=o.duration,v.easing=o.easing)}function Ye(v,o,h){const{maxSpeed:m,linearity:_,deceleration:w}=h,P=l.clamp(v*_/(o/1e3),-m,m),I=Math.abs(P)/(w*_);return{easing:h.easing,duration:1e3*I,amount:P*(I/2)}}class Tt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m,_={}){const w=b.mousePos(h.getCanvasContainer(),m),P=h.unproject(w);super(o,l.extend({point:w,lngLat:P,originalEvent:m},_)),this._defaultPrevented=!1,this.target=h}}class ln extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m){const _=o==="touchend"?m.changedTouches:m.touches,w=b.touchPos(h.getCanvasContainer(),_),P=w.map(O=>h.unproject(O)),I=w.reduce((O,D,U,V)=>O.add(D.div(V.length)),new l.Point(0,0));super(o,{points:w,point:I,lngLats:P,lngLat:h.unproject(I),originalEvent:m}),this._defaultPrevented=!1}}class tr extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m){super(o,{originalEvent:m}),this._defaultPrevented=!1}}class ai{constructor(o,h){this._map=o,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new tr(o.type,this._map,o))}mousedown(o,h){return this._mousedownPos=h,this._firePreventable(new Tt(o.type,this._map,o))}mouseup(o){this._map.fire(new Tt(o.type,this._map,o))}click(o,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Tt(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Tt(o.type,this._map,o))}mouseover(o){this._map.fire(new Tt(o.type,this._map,o))}mouseout(o){this._map.fire(new Tt(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ln(o.type,this._map,o))}touchmove(o){this._map.fire(new ln(o.type,this._map,o))}touchend(o){this._map.fire(new ln(o.type,this._map,o))}touchcancel(o){this._map.fire(new ln(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Tt(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Tt(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(l.Point.convert(o),this._map.terrain)}}class Cu{constructor(o,h){this._map=o,this._tr=new cs(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,h){this.isEnabled()&&o.shiftKey&&o.button===0&&(b.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(o,h){if(!this._active)return;const m=h;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=m,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const w=Math.min(_.x,m.x),P=Math.max(_.x,m.x),I=Math.min(_.y,m.y),O=Math.max(_.y,m.y);b.setTransform(this._box,`translate(${w}px,${I}px)`),this._box.style.width=P-w+"px",this._box.style.height=O-I+"px"}mouseupWindow(o,h){if(!this._active||o.button!==0)return;const m=this._startPos,_=h;if(this.reset(),b.suppressClick(),m.x!==_.x||m.y!==_.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:w=>w.fitScreenCoordinates(m,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,h){return this._map.fire(new l.Event(o,{originalEvent:h}))}}function qr(v,o){if(v.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${o.length}`);const h={};for(let m=0;m<v.length;m++)h[v[m].identifier]=o[m];return h}class Bt{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,h,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),m.length===this.numTouches&&(this.centroid=function(_){const w=new l.Point(0,0);for(const P of _)w._add(P);return w.div(_.length)}(h),this.touches=qr(m,h)))}touchmove(o,h,m){if(this.aborted||!this.centroid)return;const _=qr(m,h);for(const w in this.touches){const P=_[w];(!P||P.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(o,h,m){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class kc{constructor(o){this.singleTap=new Bt(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,h,m){this.singleTap.touchstart(o,h,m)}touchmove(o,h,m){this.singleTap.touchmove(o,h,m)}touchend(o,h,m){const _=this.singleTap.touchend(o,h,m);if(_){const w=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(_)<30;if(w&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class ma{constructor(o){this._tr=new cs(o),this._zoomIn=new kc({numTouches:1,numTaps:2}),this._zoomOut=new kc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,h,m){this._zoomIn.touchstart(o,h,m),this._zoomOut.touchstart(o,h,m)}touchmove(o,h,m){this._zoomIn.touchmove(o,h,m),this._zoomOut.touchmove(o,h,m)}touchend(o,h,m){const _=this._zoomIn.touchend(o,h,m),w=this._zoomOut.touchend(o,h,m),P=this._tr;return _?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(_)},{originalEvent:o})}):w?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(w)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zo{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const h=this._moveFunction(...o);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(o,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,h){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const _=h.length?h[0]:h;return!this._moved&&_.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(m,_))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&b.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Eu={0:1,2:2};class ht{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const h=b.mouseButton(o);this._eventButton=h}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(h,m){const _=Eu[m];return h.buttons===void 0||(h.buttons&_)!==_}(o,this._eventButton)}isValidEndEvent(o){return b.mouseButton(o)===this._eventButton}}class Ac{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}const Tc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(o){o.preventDefault()}},ku=({enable:v,clickTolerance:o,bearingDegreesPerPixelMoved:h=.8})=>{const m=new ht({checkCorrectEvent:_=>b.mouseButton(_)===0&&_.ctrlKey||b.mouseButton(_)===2});return new zo({clickTolerance:o,move:(_,w)=>({bearingDelta:(w.x-_.x)*h}),moveStateManager:m,enable:v,assignEvents:Tc})},Pc=({enable:v,clickTolerance:o,pitchDegreesPerPixelMoved:h=-.5})=>{const m=new ht({checkCorrectEvent:_=>b.mouseButton(_)===0&&_.ctrlKey||b.mouseButton(_)===2});return new zo({clickTolerance:o,move:(_,w)=>({pitchDelta:(w.y-_.y)*h}),moveStateManager:m,enable:v,assignEvents:Tc})};class wd{constructor(o,h){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,h,m){return this._calculateTransform(o,h,m)}touchmove(o,h,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,h,m)}touchend(o,h,m){this._calculateTransform(o,h,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,h,m){m.length>0&&(this._active=!0);const _=qr(m,h),w=new l.Point(0,0),P=new l.Point(0,0);let I=0;for(const D in _){const U=_[D],V=this._touches[D];V&&(w._add(U),P._add(U.sub(V)),I++,_[D]=U)}if(this._touches=_,I<this._minTouches||!P.mag())return;const O=P.div(I);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ic{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,h,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([h[0],h[1]]))}touchmove(o,h,m){if(!this._firstTwoTouches)return;o.preventDefault();const[_,w]=this._firstTwoTouches,P=Ks(m,h,_),I=Ks(m,h,w);if(!P||!I)return;const O=this._aroundCenter?null:P.add(I).div(2);return this._move([P,I],O,o)}touchend(o,h,m){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,P=Ks(m,h,_),I=Ks(m,h,w);P&&I||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ks(v,o,h){for(let m=0;m<v.length;m++)if(v[m].identifier===h)return o[m]}function Da(v,o){return Math.log(v/o)/Math.LN2}class Ol extends Ic{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,h){const m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Da(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Da(this._distance,m),pinchAround:h}}}function Au(v,o){return 180*v.angleWith(o)/Math.PI}class Fl extends Ic{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,h){const m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Au(this._vector,m),pinchAround:h}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const h=25/(Math.PI*this._minDiameter)*360,m=Au(o,this._startVector);return Math.abs(m)<h}}function Rl(v){return Math.abs(v.y)>Math.abs(v.x)}class Xi extends Ic{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,h,m){super.touchstart(o,h,m),this._currentTouchCount=m.length}_start(o){this._lastPoints=o,Rl(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,h,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const _=o[0].sub(this._lastPoints[0]),w=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,w,m.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(o,h,m){if(this._valid!==void 0)return this._valid;const _=o.mag()>=2,w=h.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=o.y>0==h.y>0;return Rl(o)&&Rl(h)&&P}}const Jo={panStep:100,bearingStep:15,pitchStep:10};class af{constructor(o){this._tr=new cs(o);const h=Jo;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let h=0,m=0,_=0,w=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:o.shiftKey?m=-1:(o.preventDefault(),w=-1);break;case 39:o.shiftKey?m=1:(o.preventDefault(),w=1);break;case 38:o.shiftKey?_=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?_=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,_=0),{cameraAnimation:I=>{const O=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Xs,zoom:h?Math.round(O.zoom)+h*(o.shiftKey?2:1):O.zoom,bearing:O.bearing+m*this._bearingStep,pitch:O.pitch+_*this._pitchStep,offset:[-w*this._panStep,-P*this._panStep],center:O.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xs(v){return v*(2-v)}const ga=4.000244140625;class Dl{constructor(o,h){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=o,this._tr=new cs(o),this._el=o.getCanvasContainer(),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!o[this._map._metaKey])return;o.preventDefault()}let h=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const m=l.browser.now(),_=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,h!==0&&h%ga==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),o.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=o,this._delta-=h,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=b.mousePos(this._el,o),m=this._tr;this._around=l.LngLat.convert(this._aroundCenter?m.center:m.unproject(h)),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>ga?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&O!==0&&(O=1/O);const D=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(D*O))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,m=this._startZoom,_=this._easing;let w,P=!1;if(this._type==="wheel"&&m&&_){const I=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),O=_(I);w=l.interpolate.number(m,h,O),I<1?this._frameId||(this._frameId=!0):P=!0}else w=h,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:w-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let h=l.defaultEasing;if(this._prevEase){const m=this._prevEase,_=(l.browser.now()-m.start)/m.duration,w=m.easing(_+.01)-m.easing(_),P=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-P*P);h=l.bezier(P,I,.25,1)}return this._prevEase={start:l.browser.now(),duration:o,easing:h},h}reset(){this._active=!1}}class Sd{constructor(o,h){this._clickZoom=o,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bo{constructor(o){this._tr=new cs(o),this.reset()}reset(){this._active=!1}dblclick(o,h){return o.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sr{constructor(){this._tap=new kc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,h,m){if(!this._swipePoint)if(this._tapTime){const _=h[0],w=o.timeStamp-this._tapTime<500,P=this._tapPoint.dist(_)<30;w&&P?m.length>0&&(this._swipePoint=_,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(o,h,m)}touchmove(o,h,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const _=h[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,o.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(o,h,m)}touchend(o,h,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const _=this._tap.touchend(o,h,m);_&&(this._tapTime=o.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ys{constructor(o,h,m){this._el=o,this._mousePan=h,this._touchPan=m}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zl{constructor(o,h,m){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=h,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Mc{constructor(o,h,m,_){this._el=o,this._touchZoom=h,this._touchRotate=m,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Tu=v=>v.zoom||v.drag||v.pitch||v.rotate;class sf extends l.Event{}function lf(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class ya{constructor(o,h){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,w)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},O={},D={},U=_.touches,V=U?this._getMapTouches(U):void 0,ne=V?b.touchPos(this._el,V):b.mousePos(this._el,_);for(const{handlerName:de,handler:me,allowed:Me}of this._handlers){if(!me.isEnabled())continue;let je;this._blockedByActive(D,Me,de)?me.reset():me[w||_.type]&&(je=me[w||_.type](_,ne,V),this.mergeHandlerResult(I,O,je,de,P),je&&je.needsRenderFrame&&this._triggerRenderFrame()),(je||me.isActive())&&(D[de]=me)}const fe={};for(const de in this._previousActiveHandlers)D[de]||(fe[de]=P);this._previousActiveHandlers=D,(Object.keys(fe).length||lf(I))&&(this._changes.push([I,O,fe]),this._triggerRenderFrame()),(Object.keys(D).length||lf(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=I;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new De(o),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,P]of this._listeners)b.addEventListener(_,w,_===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[o,h,m]of this._listeners)b.removeEventListener(o,h,o===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(o){const h=this._map,m=h.getCanvasContainer();this._add("mapEvent",new ai(h,o));const _=h.boxZoom=new Cu(h,o);this._add("boxZoom",_),o.interactive&&o.boxZoom&&_.enable();const w=new ma(h),P=new Bo(h);h.doubleClickZoom=new Sd(P,w),this._add("tapZoom",w),this._add("clickZoom",P),o.interactive&&o.doubleClickZoom&&h.doubleClickZoom.enable();const I=new Sr;this._add("tapDragZoom",I);const O=h.touchPitch=new Xi(h);this._add("touchPitch",O),o.interactive&&o.touchPitch&&h.touchPitch.enable(o.touchPitch);const D=ku(o),U=Pc(o);h.dragRotate=new zl(o,D,U),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),o.interactive&&o.dragRotate&&h.dragRotate.enable();const V=(({enable:Me,clickTolerance:je})=>{const be=new ht({checkCorrectEvent:Ue=>b.mouseButton(Ue)===0&&!Ue.ctrlKey});return new zo({clickTolerance:je,move:(Ue,Ze)=>({around:Ze,panDelta:Ze.sub(Ue)}),activateOnStart:!0,moveStateManager:be,enable:Me,assignEvents:Tc})})(o),ne=new wd(o,h);h.dragPan=new Ys(m,V,ne),this._add("mousePan",V),this._add("touchPan",ne,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&h.dragPan.enable(o.dragPan);const fe=new Fl,he=new Ol;h.touchZoomRotate=new Mc(m,he,fe,I),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&h.touchZoomRotate.enable(o.touchZoomRotate);const de=h.scrollZoom=new Dl(h,()=>this._triggerRenderFrame());this._add("scrollZoom",de,["mousePan"]),o.interactive&&o.scrollZoom&&h.scrollZoom.enable(o.scrollZoom);const me=h.keyboard=new af(h);this._add("keyboard",me),o.interactive&&o.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new gr(h))}_add(o,h,m){this._handlers.push({handlerName:o,handler:h,allowed:m}),this._handlersById[o]=h}stop(o){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Tu(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,h,m){for(const _ in o)if(_!==m&&(!h||h.indexOf(_)<0))return!0;return!1}_getMapTouches(o){const h=[];for(const m of o)this._el.contains(m.target)&&h.push(m);return h}mergeHandlerResult(o,h,m,_,w){if(!m)return;l.extend(o,m);const P={handlerName:_,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(h.zoom=P),m.panDelta!==void 0&&(h.drag=P),m.pitchDelta!==void 0&&(h.pitch=P),m.bearingDelta!==void 0&&(h.rotate=P)}_applyChanges(){const o={},h={},m={};for(const[_,w,P]of this._changes)_.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(o.around=_.around),_.pinchAround!==void 0&&(o.pinchAround=_.pinchAround),_.noInertia&&(o.noInertia=_.noInertia),l.extend(h,w),l.extend(m,P);this._updateMapTransform(o,h,m),this._changes=[]}_updateMapTransform(o,h,m){const _=this._map,w=_._getTransformForUpdate(),P=_.terrain;if(!(lf(o)||P&&this._terrainMovement))return this._fireEvents(h,m,!0);let{panDelta:I,zoomDelta:O,bearingDelta:D,pitchDelta:U,around:V,pinchAround:ne}=o;ne!==void 0&&(V=ne),_._stop(!0),V=V||_.transform.centerPoint;const fe=w.pointLocation(I?V.sub(I):V);D&&(w.bearing+=D),U&&(w.pitch+=U),O&&(w.zoom+=O),P?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(I)):w.setLocationAtPoint(fe,V):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(fe,V),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,w.recalculateZoom(_.terrain)})):w.setLocationAtPoint(fe,V),_._applyUpdatedTransform(w),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(h,m,!0)}_fireEvents(o,h,m){const _=Tu(this._eventsInProgress),w=Tu(o),P={};for(const U in o){const{originalEvent:V}=o[U];this._eventsInProgress[U]||(P[`${U}start`]=V),this._eventsInProgress[U]=o[U]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const U in P)this._fireEvent(U,P[U]);w&&this._fireEvent("move",w.originalEvent);for(const U in o){const{originalEvent:V}=o[U];this._fireEvent(U,V)}const I={};let O;for(const U in this._eventsInProgress){const{handlerName:V,originalEvent:ne}=this._eventsInProgress[U];this._handlersById[V].isActive()||(delete this._eventsInProgress[U],O=h[V]||ne,I[`${U}end`]=O)}for(const U in I)this._fireEvent(U,I[U]);const D=Tu(this._eventsInProgress);if(m&&(_||w)&&!D){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;U?(V(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),V(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,h){this._map.fire(new l.Event(o,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new sf("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zr extends l.Evented{constructor(o,h){super(),this._renderFrameCallback=()=>{const m=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,h){return this.jumpTo({center:o},h)}panBy(o,h,m){return o=l.Point.convert(o).mult(-1),this.panTo(this.transform.center,l.extend({offset:o},h),m)}panTo(o,h,m){return this.easeTo(l.extend({center:o},h),m)}getZoom(){return this.transform.zoom}setZoom(o,h){return this.jumpTo({zoom:o},h),this}zoomTo(o,h,m){return this.easeTo(l.extend({zoom:o},h),m)}zoomIn(o,h){return this.zoomTo(this.getZoom()+1,o,h),this}zoomOut(o,h){return this.zoomTo(this.getZoom()-1,o,h),this}getBearing(){return this.transform.bearing}setBearing(o,h){return this.jumpTo({bearing:o},h),this}getPadding(){return this.transform.padding}setPadding(o,h){return this.jumpTo({padding:o},h),this}rotateTo(o,h,m){return this.easeTo(l.extend({bearing:o},h),m)}resetNorth(o,h){return this.rotateTo(0,l.extend({duration:1e3},o),h),this}resetNorthPitch(o,h){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},o),h),this}snapToNorth(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this}getPitch(){return this.transform.pitch}setPitch(o,h){return this.jumpTo({pitch:o},h),this}cameraForBounds(o,h){o=gt.convert(o);const m=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,h)}_cameraForBoxAndBearing(o,h,m,_){const w={top:0,bottom:0,right:0,left:0};if(typeof(_=l.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const Ze=_.padding;_.padding={top:Ze,bottom:Ze,right:Ze,left:Ze}}_.padding=l.extend(w,_.padding);const P=this.transform,I=P.padding,O=P.project(l.LngLat.convert(o)),D=P.project(l.LngLat.convert(h)),U=O.rotate(-m*Math.PI/180),V=D.rotate(-m*Math.PI/180),ne=new l.Point(Math.max(U.x,V.x),Math.max(U.y,V.y)),fe=new l.Point(Math.min(U.x,V.x),Math.min(U.y,V.y)),he=ne.sub(fe),de=(P.width-(I.left+I.right+_.padding.left+_.padding.right))/he.x,me=(P.height-(I.top+I.bottom+_.padding.top+_.padding.bottom))/he.y;if(me<0||de<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Me=Math.min(P.scaleZoom(P.scale*Math.min(de,me)),_.maxZoom),je=l.Point.convert(_.offset),be=new l.Point((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(m*Math.PI/180),Ue=je.add(be).mult(P.scale/P.zoomScale(Me));return{center:P.unproject(O.add(D).div(2).sub(Ue)),zoom:Me,bearing:m}}fitBounds(o,h,m){return this._fitInternal(this.cameraForBounds(o,h),h,m)}fitScreenCoordinates(o,h,m,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(o)),this.transform.pointLocation(l.Point.convert(h)),m,_),_,w)}_fitInternal(o,h,m){return o?(delete(h=l.extend(o,h)).padding,h.linear?this.easeTo(h,m):this.flyTo(h,m)):this}jumpTo(o,h){this.stop();const m=this._getTransformForUpdate();let _=!1,w=!1,P=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(_=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=l.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(w=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(P=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this._applyUpdatedTransform(m),this.fire(new l.Event("movestart",h)).fire(new l.Event("move",h)),_&&this.fire(new l.Event("zoomstart",h)).fire(new l.Event("zoom",h)).fire(new l.Event("zoomend",h)),w&&this.fire(new l.Event("rotatestart",h)).fire(new l.Event("rotate",h)).fire(new l.Event("rotateend",h)),P&&this.fire(new l.Event("pitchstart",h)).fire(new l.Event("pitch",h)).fire(new l.Event("pitchend",h)),this.fire(new l.Event("moveend",h))}calculateCameraOptionsFromTo(o,h,m,_=0){const w=l.MercatorCoordinate.fromLngLat(o,h),P=l.MercatorCoordinate.fromLngLat(m,_),I=P.x-w.x,O=P.y-w.y,D=P.z-w.z,U=Math.hypot(I,O,D);if(U===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(I,O),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/U/this.transform.tileSize),fe=180*Math.atan2(I,-O)/Math.PI;let he=180*Math.acos(V/U)/Math.PI;return he=D<0?90-he:90+he,{center:P.toLngLat(),zoom:ne,pitch:he,bearing:fe}}easeTo(o,h){this._stop(!1,o.easeId),((o=l.extend({offset:[0,0],duration:500,easing:l.defaultEasing},o)).animate===!1||!o.essential&&l.browser.prefersReducedMotion)&&(o.duration=0);const m=this._getTransformForUpdate(),_=this.getZoom(),w=this.getBearing(),P=this.getPitch(),I=this.getPadding(),O="zoom"in o?+o.zoom:_,D="bearing"in o?this._normalizeBearing(o.bearing,w):w,U="pitch"in o?+o.pitch:P,V="padding"in o?o.padding:m.padding,ne=l.Point.convert(o.offset);let fe=m.centerPoint.add(ne);const he=m.pointLocation(fe),de=l.LngLat.convert(o.center||he);this._normalizeCenter(de);const me=m.project(he),Me=m.project(de).sub(me),je=m.zoomScale(O-_);let be,Ue;o.around&&(be=l.LngLat.convert(o.around),Ue=m.locationPoint(be));const Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==_,this._rotating=this._rotating||w!==D,this._pitching=this._pitching||U!==P,this._padding=!m.isPaddingEqual(V),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,Ze),this.terrain&&this._prepareElevation(de),this._ease(Ke=>{if(this._zooming&&(m.zoom=l.interpolate.number(_,O,Ke)),this._rotating&&(m.bearing=l.interpolate.number(w,D,Ke)),this._pitching&&(m.pitch=l.interpolate.number(P,U,Ke)),this._padding&&(m.interpolatePadding(I,V,Ke),fe=m.centerPoint.add(ne)),this.terrain&&!o.freezeElevation&&this._updateElevation(Ke),be)m.setLocationAtPoint(be,Ue);else{const tt=m.zoomScale(m.zoom-_),ut=O>_?Math.min(2,je):Math.max(.5,je),it=Math.pow(ut,1-Ke),Et=m.unproject(me.add(Me.mult(Ke*it)).mult(tt));m.setLocationAtPoint(m.renderWorldCopies?Et.wrap():Et,fe)}this._applyUpdatedTransform(m),this._fireMoveEvents(h)},Ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,Ke)},o),this}_prepareEase(o,h,m={}){this._moving=!0,h||m.moving||this.fire(new l.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new l.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new l.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new l.Event("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&h!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(m-(h-(m*o+this._elevationStart))/(1-o)),this._elevationTarget=h}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;const h=o.clone(),{center:m,zoom:_,pitch:w,bearing:P,elevation:I}=this.transformCameraUpdate(h);m&&(h.center=m),_!==void 0&&(h.zoom=_),w!==void 0&&(h.pitch=w),P!==void 0&&(h.bearing=P),I!==void 0&&(h.elevation=I),this.transform.apply(h)}_fireMoveEvents(o){this.fire(new l.Event("move",o)),this._zooming&&this.fire(new l.Event("zoom",o)),this._rotating&&this.fire(new l.Event("rotate",o)),this._pitching&&this.fire(new l.Event("pitch",o))}_afterEase(o,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const m=this._zooming,_=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new l.Event("zoomend",o)),_&&this.fire(new l.Event("rotateend",o)),w&&this.fire(new l.Event("pitchend",o)),this.fire(new l.Event("moveend",o))}flyTo(o,h){if(!o.essential&&l.browser.prefersReducedMotion){const Ot=l.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ot,h)}this.stop(),o=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.defaultEasing},o);const m=this._getTransformForUpdate(),_=this.getZoom(),w=this.getBearing(),P=this.getPitch(),I=this.getPadding(),O="zoom"in o?l.clamp(+o.zoom,m.minZoom,m.maxZoom):_,D="bearing"in o?this._normalizeBearing(o.bearing,w):w,U="pitch"in o?+o.pitch:P,V="padding"in o?o.padding:m.padding,ne=m.zoomScale(O-_),fe=l.Point.convert(o.offset);let he=m.centerPoint.add(fe);const de=m.pointLocation(he),me=l.LngLat.convert(o.center||de);this._normalizeCenter(me);const Me=m.project(de),je=m.project(me).sub(Me);let be=o.curve;const Ue=Math.max(m.width,m.height),Ze=Ue/ne,Ke=je.mag();if("minZoom"in o){const Ot=l.clamp(Math.min(o.minZoom,_,O),m.minZoom,m.maxZoom),Un=Ue/m.zoomScale(Ot-_);be=Math.sqrt(Un/Ke*2)}const tt=be*be;function ut(Ot){const Un=(Ze*Ze-Ue*Ue+(Ot?-1:1)*tt*tt*Ke*Ke)/(2*(Ot?Ze:Ue)*tt*Ke);return Math.log(Math.sqrt(Un*Un+1)-Un)}function it(Ot){return(Math.exp(Ot)-Math.exp(-Ot))/2}function Et(Ot){return(Math.exp(Ot)+Math.exp(-Ot))/2}const Nt=ut(!1);let xn=function(Ot){return Et(Nt)/Et(Nt+be*Ot)},_t=function(Ot){return Ue*((Et(Nt)*(it(Un=Nt+be*Ot)/Et(Un))-it(Nt))/tt)/Ke;var Un},Xt=(ut(!0)-Nt)/be;if(Math.abs(Ke)<1e-6||!isFinite(Xt)){if(Math.abs(Ue-Ze)<1e-6)return this.easeTo(o,h);const Ot=Ze<Ue?-1:1;Xt=Math.abs(Math.log(Ze/Ue))/be,_t=function(){return 0},xn=function(Un){return Math.exp(Ot*be*Un)}}return o.duration="duration"in o?+o.duration:1e3*Xt/("screenSpeed"in o?+o.screenSpeed/be:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=w!==D,this._pitching=U!==P,this._padding=!m.isPaddingEqual(V),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(me),this._ease(Ot=>{const Un=Ot*Xt,Rn=1/xn(Un);m.zoom=Ot===1?O:_+m.scaleZoom(Rn),this._rotating&&(m.bearing=l.interpolate.number(w,D,Ot)),this._pitching&&(m.pitch=l.interpolate.number(P,U,Ot)),this._padding&&(m.interpolatePadding(I,V,Ot),he=m.centerPoint.add(fe)),this.terrain&&!o.freezeElevation&&this._updateElevation(Ot);const dn=Ot===1?me:m.unproject(Me.add(je.mult(_t(Un))).mult(Rn));m.setLocationAtPoint(m.renderWorldCopies?dn.wrap():dn,he),this._applyUpdatedTransform(m),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,h)}if(!o){const m=this.handlers;m&&m.stop(!1)}return this}_ease(o,h,m){m.animate===!1||m.duration===0?(o(1),h()):(this._easeStart=l.browser.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,h){o=l.wrap(o,-180,180);const m=Math.abs(o-h);return Math.abs(o-360-h)<m&&(o-=360),Math.abs(o+360-h)<m&&(o+=360),o}_normalizeCenter(o){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const m=o.lng-h.center.lng;o.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(l.LngLat.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}class Lt{constructor(o={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,h){const m=this._map._getUIString(`AttributionControl.${h}`);o.title=m,o.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const h=this._map.style.sourceCaches;for(const _ in h){const w=h[_];if(w.used||w.usedForTerrain){const P=w.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o=o.filter(_=>String(_).trim()),o.sort((_,w)=>_.length-w.length),o=o.filter((_,w)=>{for(let P=w+1;P<o.length;P++)if(o[P].indexOf(_)>=0)return!1;return!0});const m=o.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,o.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class en{constructor(o={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const m=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const h=b.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const h=++this._id;return this._queue.push({callback:o,id:h,cancelled:!1}),h}remove(o){const h=this._currentlyRunning,m=h?this._queue.concat(h):this._queue;for(const _ of m)if(_.id===o)return void(_.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const m of h)if(!m.cancelled&&(m.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Oc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var uf=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Mi extends l.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,h){this.sourceCache.update(o,h),this._renderableTilesKeys=[];const m={};for(const _ of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))m[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[_.key]=new Mo(_,this.tileSize));for(const _ in this._tiles)m[_]||delete this._tiles[_]}freeRtt(o){for(const h in this._tiles){const m=this._tiles[h];(!o||m.tileID.equals(o)||m.tileID.isChildOf(o)||o.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const h={};for(const m of this._renderableTilesKeys){const _=this._tiles[m].tileID;if(_.canonical.equals(o.canonical)){const w=o.clone();w.posMatrix=new Float64Array(16),l.ortho(w.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),h[m]=w}else if(_.canonical.isChildOf(o.canonical)){const w=o.clone();w.posMatrix=new Float64Array(16);const P=_.canonical.z-o.canonical.z,I=_.canonical.x-(_.canonical.x>>P<<P),O=_.canonical.y-(_.canonical.y>>P<<P),D=l.EXTENT>>P;l.ortho(w.posMatrix,0,D,0,D,0,1),l.translate(w.posMatrix,w.posMatrix,[-I*D,-O*D,0]),h[m]=w}else if(o.canonical.isChildOf(_.canonical)){const w=o.clone();w.posMatrix=new Float64Array(16);const P=o.canonical.z-_.canonical.z,I=o.canonical.x-(o.canonical.x>>P<<P),O=o.canonical.y-(o.canonical.y>>P<<P),D=l.EXTENT>>P;l.ortho(w.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(w.posMatrix,w.posMatrix,[I*D,O*D,0]),l.scale(w.posMatrix,w.posMatrix,[1/2**P,1/2**P,0]),h[m]=w}}return h}getSourceTile(o,h){const m=this.sourceCache._source;let _=o.overscaledZ-this.deltaZoom;if(_>m.maxzoom&&(_=m.maxzoom),_<m.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(_).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!w||!w.dem)&&h)for(;_>=m.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(o.scaledTo(_--).key);return w}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=o)}}class Bl{constructor(o,h,m){this.painter=o,this.sourceCache=new Mi(h),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,h,m,_=l.EXTENT){var w;if(!(h>=0&&h<_&&m>=0&&m<_))return 0;const P=this.getTerrainData(o),I=(w=P.tile)===null||w===void 0?void 0:w.dem;if(!I)return 0;const O=function(he,de,me){var Me=de[0],je=de[1];return he[0]=me[0]*Me+me[4]*je+me[12],he[1]=me[1]*Me+me[5]*je+me[13],he}([],[h/_*l.EXTENT,m/_*l.EXTENT],P.u_terrain_matrix),D=[O[0]*I.dim,O[1]*I.dim],U=Math.floor(D[0]),V=Math.floor(D[1]),ne=D[0]-U,fe=D[1]-V;return I.get(U,V)*(1-ne)*(1-fe)+I.get(U+1,V)*ne*(1-fe)+I.get(U,V+1)*(1-ne)*fe+I.get(U+1,V+1)*ne*fe}getElevationForLngLatZoom(o,h){const{tileID:m,mercatorX:_,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(o,h);return this.getElevation(m,_%l.EXTENT,w%l.EXTENT,l.EXTENT)}getElevation(o,h,m,_=l.EXTENT){return this.getDEMElevation(o,h,m,_)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const _=this.painter.context,w=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Le(_,w,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Le(_,new l.RGBAImage({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const h=this.sourceCache.getSourceTile(o,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const _=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new Le(_,h.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),h.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const m=h&&h+h.tileID.key+o.key;if(m&&!this._demMatrixCache[m]){const _=this.sourceCache.sourceCache._source.maxzoom;let w=o.canonical.z-h.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=_?w=o.canonical.z-_:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=o.canonical.x-(o.canonical.x>>w<<w),I=o.canonical.y-(o.canonical.y>>w<<w),O=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<w),1/(l.EXTENT<<w),0]);l.translate(O,O,[P*l.EXTENT,I*l.EXTENT,0]),this._demMatrixCache[o.key]={matrix:O,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(o){const h=this.painter,m=h.width/devicePixelRatio,_=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Le(h.context,{width:m,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Le(h.context,{width:m,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(m,_,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,m,_))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,P=0;w<this._coordsTextureSize;w++)for(let I=0;I<this._coordsTextureSize;I++,P+=4)h[P+0]=255&I,h[P+1]=255&w,h[P+2]=I>>8<<4|w>>8,h[P+3]=0;const m=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),_=new Le(o,m,o.gl.RGBA,{premultiply:!1});return _.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(o){const h=new Uint8Array(4),m=this.painter.context,_=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),m.bindFramebuffer.set(null);const w=h[0]+(h[2]>>4<<8),P=h[1]+((15&h[2])<<8),I=this.coordsIndex[255-h[3]],O=I&&this.sourceCache.getTileByID(I);if(!O)return null;const D=this._coordsTextureSize,U=(1<<O.tileID.canonical.z)*D;return new l.MercatorCoordinate((O.tileID.canonical.x*D+w)/U,(O.tileID.canonical.y*D+P)/U,this.getElevation(O.tileID,w,P,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.painter.context,h=new l.Pos3dArray,m=new l.TriangleIndexArray,_=this.meshSize,w=l.EXTENT/_,P=_*_;for(let V=0;V<=_;V++)for(let ne=0;ne<=_;ne++)h.emplaceBack(ne*w,V*w,0);for(let V=0;V<P;V+=_+1)for(let ne=0;ne<_;ne++)m.emplaceBack(ne+V,_+ne+V+1,_+ne+V+2),m.emplaceBack(ne+V,_+ne+V+2,ne+V+1);const I=h.length,O=I+2*(_+1);for(const V of[0,1])for(let ne=0;ne<=_;ne++)for(const fe of[0,1])h.emplaceBack(ne*w,V*l.EXTENT,fe);for(let V=0;V<2*_;V+=2)m.emplaceBack(O+V,O+V+1,O+V+3),m.emplaceBack(O+V,O+V+3,O+V+2),m.emplaceBack(I+V,I+V+3,I+V+1),m.emplaceBack(I+V,I+V+2,I+V+3);const D=h.length,U=D+2*(_+1);for(const V of[0,1])for(let ne=0;ne<=_;ne++)for(const fe of[0,1])h.emplaceBack(V*l.EXTENT,ne*w,fe);for(let V=0;V<2*_;V+=2)m.emplaceBack(D+V,D+V+1,D+V+3),m.emplaceBack(D+V,D+V+3,D+V+2),m.emplaceBack(U+V,U+V+3,U+V+1),m.emplaceBack(U+V,U+V+2,U+V+3);return this._mesh={indexBuffer:o.createIndexBuffer(m),vertexBuffer:o.createVertexBuffer(h,uf.members),segments:l.SegmentVector.simpleSegment(0,0,h.length,m.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*l.earthRadius/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,h){var m;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(o,h);return(m=this.getMinMaxElevation(_).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(o){const h=this.getTerrainData(o).tile,m={minElevation:null,maxElevation:null};return h&&h.dem&&(m.minElevation=h.dem.min*this.exaggeration,m.maxElevation=h.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(o,h){const m=l.MercatorCoordinate.fromLngLat(o.wrap()),_=(1<<h)*l.EXTENT,w=m.x*_,P=m.y*_,I=Math.floor(w/l.EXTENT),O=Math.floor(P/l.EXTENT);return{tileID:new l.OverscaledTileID(h,0,h,I,O),mercatorX:w,mercatorY:P}}}class $o{constructor(o,h,m){this._context=o,this._size=h,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new Le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(m.texture),{id:o,fbo:h,texture:m,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>o.id!==h),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Qo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class hs{constructor(o,h){this.painter=o,this.terrain=h,this.pool=new $o(o.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(m=>!o._layers[m].isHidden(h)),this._coordsDescendingInv={};for(const m in o.sourceCaches){this._coordsDescendingInv[m]={};const _=o.sourceCaches[m].getVisibleCoordinates();for(const w of _){const P=this.terrain.sourceCache.getTerrainCoords(w);for(const I in P)this._coordsDescendingInv[m][I]||(this._coordsDescendingInv[m][I]=[]),this._coordsDescendingInv[m][I].push(P[I])}}this._coordsDescendingInvStr={};for(const m of o._order){const _=o._layers[m],w=_.source;if(Qo[_.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(const P in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][P]=this._coordsDescendingInv[w][P].map(I=>I.key).sort().join()}}for(const m of this._renderableTiles)for(const _ in this._coordsDescendingInvStr){const w=this._coordsDescendingInvStr[_][m.tileID.key];w&&w!==m.rttCoords[_]&&(m.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;const h=o.type,m=this.painter,_=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Qo[h]&&(this._prevType&&Qo[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(o.id),!_))return!0;if(Qo[this._prevType]||Qo[h]&&_){this._prevType=h;const w=this._stacks.length-1,P=this._stacks[w]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(of(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[w]){const D=this.pool.getObjectForId(I.rtt[w].id);if(D.stamp===I.rtt[w].stamp){this.pool.useObject(D);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),I.rtt[w]={id:O.id,stamp:O.stamp},m.context.bindFramebuffer.set(O.fbo.framebuffer),m.context.clear({color:l.Color.transparent,stencil:0}),m.currentStencilSource=void 0;for(let D=0;D<P.length;D++){const U=m.style._layers[P[D]],V=U.source?this._coordsDescendingInv[U.source][I.tileID.key]:[I.tileID];m.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),m._renderTileClippingMasks(U,V),m.renderLayer(m,m.style.sourceCaches[U.source],U,V),U.source&&(I.rttCoords[U.source]=this._coordsDescendingInvStr[U.source][I.tileID.key])}}return of(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Qo[h]}return!1}}const vr=x,Or={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},fs=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Pu={showCompass:!0,showZoom:!0,visualizePitch:!1};class Fc{constructor(o,h,m=!1){this.mousedown=P=>{this.startMouse(l.extend({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),b.mousePos(this.element,P)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,b.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const _=o.dragRotate._mouseRotate.getClickTolerance(),w=o.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=ku({clickTolerance:_,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:I,bearingDegreesPerPixelMoved:O=.8})=>{const D=new Ac;return new zo({clickTolerance:I,move:(U,V)=>({bearingDelta:(V.x-U.x)*O}),moveStateManager:D,enable:P,assignEvents:fs})})({clickTolerance:_,enable:!0}),this.map=o,m&&(this.mousePitch=Pc({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:I,pitchDegreesPerPixelMoved:O=-.5})=>{const D=new Ac;return new zo({clickTolerance:I,move:(U,V)=>({pitchDelta:(V.y-U.y)*O}),moveStateManager:D,enable:P,assignEvents:fs})})({clickTolerance:w,enable:!0})),b.addEventListener(h,"mousedown",this.mousedown),b.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(h,"touchcancel",this.reset)}startMouse(o,h){this.mouseRotate.dragStart(o,h),this.mousePitch&&this.mousePitch.dragStart(o,h),b.disableDrag()}startTouch(o,h){this.touchRotate.dragStart(o,h),this.touchPitch&&this.touchPitch.dragStart(o,h),b.disableDrag()}moveMouse(o,h){const m=this.map,{bearingDelta:_}=this.mouseRotate.dragMove(o,h)||{};if(_&&m.setBearing(m.getBearing()+_),this.mousePitch){const{pitchDelta:w}=this.mousePitch.dragMove(o,h)||{};w&&m.setPitch(m.getPitch()+w)}}moveTouch(o,h){const m=this.map,{bearingDelta:_}=this.touchRotate.dragMove(o,h)||{};if(_&&m.setBearing(m.getBearing()+_),this.touchPitch){const{pitchDelta:w}=this.touchPitch.dragMove(o,h)||{};w&&m.setPitch(m.getPitch()+w)}}off(){const o=this.element;b.removeEventListener(o,"mousedown",this.mousedown),b.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let _a;function Rc(v,o,h){if(v=new l.LngLat(v.lng,v.lat),o){const m=new l.LngLat(v.lng-360,v.lat),_=new l.LngLat(v.lng+360,v.lat),w=h.locationPoint(v).distSqr(o);h.locationPoint(m).distSqr(o)<w?v=m:h.locationPoint(_).distSqr(o)<w&&(v=_)}for(;Math.abs(v.lng-h.center.lng)>180;){const m=h.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=h.width&&m.y<=h.height)break;v.lng>h.center.lng?v.lng-=360:v.lng+=360}return v}const Iu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function za(v,o,h){const m=v.classList;for(const _ in Iu)m.remove(`maplibregl-${h}-anchor-${_}`);m.add(`maplibregl-${h}-anchor-${o}`)}class Ba extends l.Evented{constructor(o){if(super(),this._onKeyPress=h=>{const m=h.code,_=h.charCode||h.keyCode;m!=="Space"&&m!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=h=>{const m=h.originalEvent.target,_=this._element;this._popup&&(m===_||_.contains(m))&&this.togglePopup()},this._update=h=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Rc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Iu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const w=this._map.unproject(this._pos),P=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=w.distanceTo(this._lngLat)>20*P?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=h=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=l.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const h=b.createNS("http://www.w3.org/2000/svg","svg"),m=41,_=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${m}px`),h.setAttributeNS(null,"width",`${_}px`),h.setAttributeNS(null,"viewBox",`0 0 ${_} ${m}`);const w=b.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const P=b.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const I=b.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Me of O){const je=b.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",Me.rx),je.setAttributeNS(null,"ry",Me.ry),I.appendChild(je)}const D=b.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const U=b.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(U);const V=b.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"opacity","0.25"),V.setAttributeNS(null,"fill","#000000");const ne=b.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),V.appendChild(ne);const fe=b.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const he=b.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=b.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const me=b.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),he.appendChild(de),he.appendChild(me),P.appendChild(I),P.appendChild(D),P.appendChild(V),P.appendChild(fe),P.appendChild(he),h.appendChild(P),h.setAttributeNS(null,"height",m*this._scale+"px"),h.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(h),this._offset=l.Point.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),za(this._element,this._anchor,"marker"),o&&o.className)for(const h of o.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(o){return this._offset=l.Point.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Dc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ie=0,No=!1;const $l={maxWidth:100,unit:"metric"};function Yi(v,o,h){const m=h&&h.maxWidth||100,_=v._container.clientHeight/2,w=v.unproject([0,_]),P=v.unproject([m,_]),I=w.distanceTo(P);if(h&&h.unit==="imperial"){const O=3.2808*I;O>5280?Sn(o,m,O/5280,v._getUIString("ScaleControl.Miles")):Sn(o,m,O,v._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Sn(o,m,I/1852,v._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Sn(o,m,I/1e3,v._getUIString("ScaleControl.Kilometers")):Sn(o,m,I,v._getUIString("ScaleControl.Meters"))}function Sn(v,o,h,m){const _=function(w){const P=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/P;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(O){const D=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*D)/D}(I),P*I}(h);v.style.width=o*(_/h)+"px",v.innerHTML=`${_}&nbsp;${m}`}const cf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bc(v){if(v){if(typeof v=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(v,2)));return{center:new l.Point(0,0),top:new l.Point(0,v),"top-left":new l.Point(o,o),"top-right":new l.Point(-o,o),bottom:new l.Point(0,-v),"bottom-left":new l.Point(o,-o),"bottom-right":new l.Point(-o,-o),left:new l.Point(v,0),right:new l.Point(-v,0)}}if(v instanceof l.Point||Array.isArray(v)){const o=l.Point.convert(v);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:l.Point.convert(v.center||[0,0]),top:l.Point.convert(v.top||[0,0]),"top-left":l.Point.convert(v["top-left"]||[0,0]),"top-right":l.Point.convert(v["top-right"]||[0,0]),bottom:l.Point.convert(v.bottom||[0,0]),"bottom-left":l.Point.convert(v["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(v["bottom-right"]||[0,0]),left:l.Point.convert(v.left||[0,0]),right:l.Point.convert(v.right||[0,0])}}return Bc(new l.Point(0,0))}const $a={extend:(v,...o)=>l.extend(v,...o),run(v){v()},logToElement(v,o=!1,h="log"){const m=window.document.getElementById(h);m&&(o&&(m.innerHTML=""),m.innerHTML+=`<br>${v}`)}},$c=x;class Zn{static get version(){return $c}static get workerCount(){return ni.workerCount}static set workerCount(o){ni.workerCount=o}static get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(o){l.config.MAX_PARALLEL_IMAGE_REQUESTS=o}static get workerUrl(){return l.config.WORKER_URL}static set workerUrl(o){l.config.WORKER_URL=o}static addProtocol(o,h){l.config.REGISTERED_PROTOCOLS[o]=h}static removeProtocol(o){delete l.config.REGISTERED_PROTOCOLS[o]}}return Zn.Map=class extends zr{constructor(v){if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(v=l.extend({},Or,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new bu(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._cooperativeGesturesOnWheel=o=>{this._onCooperativeGesture(o,o[this._metaKey],1)},this._contextLost=o=>{o.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new Lc,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Oc,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;this._resizeObserver=new ResizeObserver(h=>{o?this._trackResize&&this.resize(h)._update():o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ya(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new vd(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,l.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Lt({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new en,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new l.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new l.Event(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new l.Event("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(v,o){if(o===void 0&&(o=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=v.onAdd(this);this._controls.push(v);const m=this._controlPositions[o];return o.indexOf("bottom")!==-1?m.insertBefore(h,m.firstChild):m.appendChild(h),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(v);return o>-1&&this._controls.splice(o,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,o,h,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,o,h,m)}resize(v){var o;const h=this._containerDimensions(),m=h[0],_=h[1],w=this._getClampedPixelRatio(m,_);if(this._resizeCanvas(m,_,w),this.painter.resize(m,_,w),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const O=this._getClampedPixelRatio(m,_);this._resizeCanvas(m,_,O),this.painter.resize(m,_,O)}this.transform.resize(m,_),(o=this._requestedCameraState)===null||o===void 0||o.resize(m,_);const P=!this._moving;return P&&(this.stop(),this.fire(new l.Event("movestart",v)).fire(new l.Event("move",v))),this.fire(new l.Event("resize",v)),P&&this.fire(new l.Event("moveend",v)),this}_getClampedPixelRatio(v,o){const{0:h,1:m}=this._maxCanvasSize,_=this.getPixelRatio(),w=v*_,P=o*_;return Math.min(w>h?h/w:1,P>m?m/P:1)*_}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(gt.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(l.LngLat.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(l.Point.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,o,h){if(v==="mouseenter"||v==="mouseover"){let m=!1;return{layer:o,listener:h,delegates:{mousemove:w=>{const P=this.getLayer(o)?this.queryRenderedFeatures(w.point,{layers:[o]}):[];P.length?m||(m=!0,h.call(this,new Tt(v,this,w.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(v==="mouseleave"||v==="mouseout"){let m=!1;return{layer:o,listener:h,delegates:{mousemove:P=>{(this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[]).length?m=!0:m&&(m=!1,h.call(this,new Tt(v,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,h.call(this,new Tt(v,this,P.originalEvent)))}}}}{const m=_=>{const w=this.getLayer(o)?this.queryRenderedFeatures(_.point,{layers:[o]}):[];w.length&&(_.features=w,h.call(this,_),delete _.features)};return{layer:o,listener:h,delegates:{[v]:m}}}}on(v,o,h){if(h===void 0)return super.on(v,o);const m=this._createDelegatedListener(v,o,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(m);for(const _ in m.delegates)this.on(_,m.delegates[_]);return this}once(v,o,h){if(h===void 0)return super.once(v,o);const m=this._createDelegatedListener(v,o,h);for(const _ in m.delegates)this.once(_,m.delegates[_]);return this}off(v,o,h){return h===void 0?super.off(v,o):(this._delegatedListeners&&this._delegatedListeners[v]&&(m=>{const _=this._delegatedListeners[v];for(let w=0;w<_.length;w++){const P=_[w];if(P.layer===o&&P.listener===h){for(const I in P.delegates)this.off(I,P.delegates[I]);return _.splice(w,1),this}}})(),this)}queryRenderedFeatures(v,o){if(!this.style)return[];let h;const m=v instanceof l.Point||Array.isArray(v),_=m?v:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(m?{}:v)||{},_ instanceof l.Point||typeof _[0]=="number")h=[l.Point.convert(_)];else{const w=l.Point.convert(_[0]),P=l.Point.convert(_[1]);h=[w,new l.Point(P.x,w.y),P,new l.Point(w.x,P.y),w]}return this.style.queryRenderedFeatures(h,o,this.transform)}querySourceFeatures(v,o){return this.style.querySourceFeatures(v,o)}setStyle(v,o){return(o=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(v,o))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const o=this._locale[v];if(o==null)throw new Error(`Missing UI string '${v}'`);return o}_updateStyle(v,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,o));const h=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Bs(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,o,h):this.style.loadJSON(v,o,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,o){if(typeof v=="string"){const h=this._requestManager.transformRequest(v,R.Style);l.getJSON(h,(m,_)=>{m?this.fire(new l.ErrorEvent(m)):_&&this._updateDiff(_,o)})}else typeof v=="object"&&this._updateDiff(v,o)}_updateDiff(v,o){try{this.style.setState(v,o)&&this._update(!0)}catch(h){l.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(v,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(v,o){return this._lazyInitEmptyStyle(),this.style.addSource(v,o),this._update(!0)}isSourceLoaded(v){const o=this.style&&this.style.sourceCaches[v];if(o!==void 0)return o.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const o=this.style.sourceCaches[v.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const h in this.style._layers){const m=this.style._layers[h];m.type==="hillshade"&&m.source===v.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bl(this.painter,o,v),this.painter.renderToTexture=new hs(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==v.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.Event("terrain",{terrain:v})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const o in v){const h=v[o]._tiles;for(const m in h){const _=h[m];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(v,o,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,o,h)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,o,h={}){const{pixelRatio:m=1,sdf:_=!1,stretchX:w,stretchY:P,content:I}=h;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||l.isImageBitmap(o))){if(o.width===void 0||o.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:D,data:U}=o,V=o;return this.style.addImage(v,{data:new l.RGBAImage({width:O,height:D},new Uint8Array(U)),pixelRatio:m,stretchX:w,stretchY:P,content:I,sdf:_,version:0,userImage:V}),V.onAdd&&V.onAdd(this,v),this}}{const{width:O,height:D,data:U}=l.browser.getImageData(o);this.style.addImage(v,{data:new l.RGBAImage({width:O,height:D},U),pixelRatio:m,stretchX:w,stretchY:P,content:I,sdf:_,version:0})}}updateImage(v,o){const h=this.style.getImage(v);if(!h)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=o instanceof HTMLImageElement||l.isImageBitmap(o)?l.browser.getImageData(o):o,{width:_,height:w,data:P}=m;if(_===void 0||w===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||w!==h.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(o instanceof HTMLImageElement||l.isImageBitmap(o));return h.data.replace(P,I),this.style.updateImage(v,h),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,o){Z.getImage(this._requestManager.transformRequest(v,R.Image),o)}listImages(){return this.style.listImages()}addLayer(v,o){return this._lazyInitEmptyStyle(),this.style.addLayer(v,o),this._update(!0)}moveLayer(v,o){return this.style.moveLayer(v,o),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,o,h){return this.style.setLayerZoomRange(v,o,h),this._update(!0)}setFilter(v,o,h={}){return this.style.setFilter(v,o,h),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,o,h,m={}){return this.style.setPaintProperty(v,o,h,m),this._update(!0)}getPaintProperty(v,o){return this.style.getPaintProperty(v,o)}setLayoutProperty(v,o,h,m={}){return this.style.setLayoutProperty(v,o,h,m),this._update(!0)}getLayoutProperty(v,o){return this.style.getLayoutProperty(v,o)}setGlyphs(v,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,o,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,o,h,m=>{m||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,o,h=>{h||this._update(!0)}),this}setLight(v,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,o){return this.style.setFeatureState(v,o),this._update()}removeFeatureState(v,o){return this.style.removeFeatureState(v,o),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,o=0;return this._container&&(v=this._container.clientWidth||400,o=this._container.clientHeight||300),[v,o]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const o=this._canvasContainer=b.create("div","maplibregl-canvas-container",v);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),m=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],m);const _=this._controlContainer=b.create("div","maplibregl-control-container",v),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{w[P]=b.create("div",`maplibregl-ctrl-${P} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${v}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,o,h){this._canvas.width=Math.floor(h*v),this._canvas.height=Math.floor(h*o),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let o=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{o={requestedAttributes:v},m&&(o.statusMessage=m.statusMessage,o.type=m.type)},{once:!0});const h=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!h){const m="Failed to initialize WebGL";throw o?(o.message=m,new Error(JSON.stringify(o))):new Error(m)}this.painter=new _d(h,this.transform),E.testSupport(h)}_onCooperativeGesture(v,o,h){return!o&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,w=l.browser.now();this.style.zoomHistory.update(_,w);const P=new l.EvaluationParameters(_,{now:w,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=P.crossFadingFactor();I===1&&I===this._crossFadingFactor||(h=!0,this._crossFadingFactor=I),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.browser.frame(v=>{l.PerformanceUtils.frame(v),this._frame=null,this._render(v)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return vr}getCameraTargetElevation(){return this.transform.elevation}},Zn.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const o=this._map.getZoom(),h=o===this._map.getMaxZoom(),m=o===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,h)=>{const m=this._map._getUIString(`NavigationControl.${h}`);o.title=m,o.setAttribute("aria-label",m)},this.options=l.extend({},Pu,v),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,o){const h=b.create("button",v,this._container);return h.type="button",h.addEventListener("click",o),h}},Zn.GeolocateControl=class extends l.Evented{constructor(v){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",o)),this._finish()}},this._updateCamera=o=>{const h=new l.LngLat(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,_=this._map.getBearing(),w=l.extend({bearing:_},this.options.fitBoundsOptions),P=gt.fromLngLat(h,m);this._map.fitBounds(P,w,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const h=new l.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&No)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=o=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",o===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ba({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ba({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}},this.options=l.extend({},Dc,v)}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(o,h=!1){_a===void 0||h?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(m=>{_a=m.state!=="denied",o(_a)}).catch(()=>{_a=!!window.navigator.geolocation,o(_a)}):(_a=!!window.navigator.geolocation,o(_a)):o(_a)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ie=0,No=!1}_isOutOfMapMaxBounds(v){const o=this._map.getMaxBounds(),h=v.coords;return o&&(h.longitude<o.getWest()||h.longitude>o.getEast()||h.latitude<o.getSouth()||h.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),o=v.getSouthEast(),h=v.getNorthEast(),m=o.distanceTo(h),_=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ie--,No=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ie++,ie>1?(v={maximumAge:6e5,timeout:0},No=!0):(v=this.options.positionOptions,No=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Zn.AttributionControl=Lt,Zn.LogoControl=en,Zn.ScaleControl=class{constructor(v){this._onMove=()=>{Yi(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,Yi(this._map,this._container,this.options)},this.options=l.extend({},$l,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Zn.FullscreenControl=class extends l.Evented{constructor(v={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Zn.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=v}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Zn.Popup=class extends l.Evented{constructor(v){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!o)return;const h=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);let m=this.options.anchor;const _=Bc(this.options.offset);if(!m){const P=this._container.offsetWidth,I=this._container.offsetHeight;let O;O=h.y+_.bottom.y<I?["top"]:h.y>this._map.transform.height-I?["bottom"]:[],h.x<P/2?O.push("left"):h.x>this._map.transform.width-P/2&&O.push("right"),m=O.length===0?"bottom":O.join("-")}const w=h.add(_[m]).round();b.setTransform(this._container,`${Iu[m]} translate(${w.x}px,${w.y}px)`),za(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=l.extend(Object.create(cf),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const o=document.createDocumentFragment(),h=document.createElement("body");let m;for(h.innerHTML=v;m=h.firstChild,m;)o.appendChild(m);return this.setDOMContent(o)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(zc);v&&v.focus()}},Zn.Marker=Ba,Zn.Style=Bs,Zn.LngLat=l.LngLat,Zn.LngLatBounds=gt,Zn.Point=l.Point,Zn.MercatorCoordinate=l.MercatorCoordinate,Zn.Evented=l.Evented,Zn.AJAXError=l.AJAXError,Zn.config=l.config,Zn.CanvasSource=Je,Zn.GeoJSONSource=Xn,Zn.ImageSource=Bn,Zn.RasterDEMTileSource=un,Zn.RasterTileSource=Qt,Zn.VectorTileSource=Dt,Zn.VideoSource=ei,Zn.setRTLTextPlugin=l.setRTLTextPlugin,Zn.getRTLTextPluginStatus=l.getRTLTextPluginStatus,Zn.prewarm=function(){Fe().acquire(vt)},Zn.clearPrewarmedResources=function(){const v=le;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(vt),le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},$a.extend(Zn,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Zn});var d=a;return d})})(mF);var uP=mF.exports;class mae{constructor(){an(this,"errorSetter",t=>{console.warn("Hook for renderer errors not installed. You must add it in logical layer by setErrorState method")});an(this,"onError",t=>{t instanceof Error?this.errorSetter(t):typeof t=="string"?this.errorSetter(new Error(t)):this.errorSetter(new Error("unknown"))})}setErrorState(t){this.errorSetter=t}setupExtension(t){}willInit(t){}willMount(t){}willUnMount(t){}willHide(t){}willUnhide(t){}willLegendUpdate(t){}willSourceUpdate(t){}willDestroy(t){}}Qr({currentMapAtom:aF},({onChange:e,schedule:t})=>{e("currentMapAtom",(n,r)=>{r&&t(a=>{a([by.clear(),Ph.clear()])})})},"autoClearAtom");const gae=["background","raster","hillshade","heatmap","fill","fill-extrusion","line","circle","symbol","custom"];class yae{constructor(){an(this,"_baseMapFirstLayerIdx",null);an(this,"_map",null);an(this,"_layersSettings",null);an(this,"_layersParentsIds",null);an(this,"_unsubscribe",[]);an(this,"_typesOrder",[...gae]);an(this,"_awaitingTasks",new Set)}init(t,n,r){this._map=t,this._unsubscribe.push(r.subscribe(a=>this._layersSettings=a)),this._layersParentsIds=n,this._baseMapFirstLayerIdx=(t.getStyle().layers??[]).length-1,this._awaitingTasks.forEach(a=>{this._awaitingTasks.delete(a),a(t)})}destroy(){this._unsubscribe.forEach(t=>t())}getIdToMountOnTypesTop(t,n,r){this._asyncWrap(t,n,r,this._getIdToMountOnTypesTopSync.bind(this))}getIdToMountOnTypesBottom(t,n,r){this._asyncWrap(t,n,r,this._getIdToMountOnTypesBottomSync.bind(this))}_getIdToMountOnTypesTopSync(t,n,r){var E,A,L,F;const a=this._getMountedOrderedLayers(t);if(!(a!=null&&a.size))return;const c=a.get(n),d=(E=this._layersParentsIds)==null?void 0:E.get(r),l=(L=(A=this._layersSettings)==null?void 0:A.get(d||""))==null?void 0:L.data;if(!l){console.warn("settings were not found for layer ",n,r);return}const x=l.category,b=c==null?void 0:c.find($=>{if(x==="base")return $.category!=="base";if(x==="overlay")return $.category===void 0});if(x&&b)return b.layer.id;if(!b||!x){const $=this._typesOrder.slice(this._typesOrder.indexOf(n)+1).find(Z=>{var R;return(R=a.get(Z))==null?void 0:R.length});return $?(F=a.get($))==null?void 0:F[0].layer.id:void 0}}_getIdToMountOnTypesBottomSync(t,n,r){var E,A,L,F;const a=this._getMountedOrderedLayers(t);if(!(a!=null&&a.size))return;const c=a.get(n),d=(E=this._layersParentsIds)==null?void 0:E.get(r),l=(L=(A=this._layersSettings)==null?void 0:A.get(d||""))==null?void 0:L.data;if(!l){console.warn("settings were not found for layer ",n,r);return}const x=l.category,b=(()=>{if(x==="base")return c==null?void 0:c[0];if(x==="overlay")return c==null?void 0:c.find($=>$.category==="overlay"||$.category===void 0);if(x===void 0)return c==null?void 0:c.find($=>$.category===void 0)})();if(b)return b.layer.id;if(!(c!=null&&c.length)||!b){const $=this._typesOrder.slice(this._typesOrder.indexOf(n)+1).find(Z=>{var R;return(R=a.get(Z))==null?void 0:R.length});return $?(F=a.get($))==null?void 0:F[0].layer.id:void 0}}_getMountedOrderedLayers(t){if(this._baseMapFirstLayerIdx===null)return;const n=t.getStyle().layers??[];if(n.length===0)return;const r=n.slice(this._baseMapFirstLayerIdx+1);if(!r.length)return;const a=new Map;return r.forEach(c=>{var x,b,E,A;const d=(x=this._layersParentsIds)==null?void 0:x.get(c.id);if(!d)return console.warn("id was not found for",c.id,c);const l=a.get(c.type)||[];l.push({layer:c,category:(A=(E=(b=this._layersSettings)==null?void 0:b.get(d))==null?void 0:E.data)==null?void 0:A.category}),a.set(c.type,l)}),a}_asyncWrap(t,n,r,a){const c=this._map;c===null||this._baseMapFirstLayerIdx===null?this._awaitingTasks.add(d=>{r(a(d,t,n))}):r(a(c,t,n))}}const _ae=new yae,B2=new Map;function $2(e,t=_ae){function n(c,d){B2.set(c.id,d),t.getIdToMountOnTypesTop(c.type,c.id,l=>e.addLayer(c,l))}function r(c,d){B2.set(c.id,d),t.getIdToMountOnTypesBottom(c.type,c.id,l=>e.addLayer(c,l))}function a(c,d){B2.set(c.id,d),e.addLayer(c,void 0)}return{addAboveLayerWithSameType:n,addUnderLayerWithSameType:r,addAboveAllExistingLayers:a}}const vae=(e,t)=>new Promise((n,r)=>{try{e.on(t,n)}catch(a){r(a)}});function N2(e){if(!e._loaded)return vae(e,"load")}const xae={click:[],mousemove:[],mouseleave:[]};function Yg(e,t,n=50,r){return cP.addMapListener.dispatch(e,t,n),()=>{cP.removeMapListener.dispatch(e,t)}}const cP=Qr({addMapListener:(e,t,n)=>({eventType:e,listener:t,priority:n}),removeMapListener:(e,t)=>({eventType:e,listener:t})},({onAction:e},t=xae)=>(e("addMapListener",({eventType:n,listener:r,priority:a})=>{const c=[...t[n]];if(!c.length)c.push({listener:r,priority:a});else for(let d=0;d<c.length;d++){const l=c[d];if(a<l.priority){c.splice(d,0,{listener:r,priority:a});break}else if(l.priority===a){c.splice(d+1,0,{listener:r,priority:a});break}else if(c[d+1]){if(a>l.priority&&a<c[d+1].priority){c.splice(d+1,0,{listener:r,priority:a});break}}else{c.push({listener:r,priority:a});break}}t={...t,[n]:c}}),e("removeMapListener",({eventType:n,listener:r})=>t[n]=t[n].filter(a=>a.listener!==r)),t),"[Shared state] mapListenersAtom"),bae="_tootipRoot_i3o78_1",wae="_hexagon_i3o78_5",Sae="_labels_i3o78_28",Cae="_column_i3o78_34",Eae="_bivariateHexagonPopupContentRoot_i3o78_45",Rf={tootipRoot:bae,hexagon:wae,labels:Sae,column:Cae,bivariateHexagonPopupContentRoot:Eae},hP=Rf.bivariateHexagonPopupContentRoot,kae=e=>OC(e)?K1:Jre(e)?X1:HO,Aae=e=>FC(e)?K1:Qre(e)?X1:HO,Tae=({hexagonColor:e,axis:t,cellIndex:n,cellLabel:r,values:a})=>mn("div",{className:Rf.tootipRoot,children:[Xe("div",{className:Rf.hexagon,children:Xe("div",{style:{background:e},children:r})}),mn("div",{className:Rf.labels,children:[mn("div",{className:Rf.column,children:[Xe("span",{children:t.x.label||$4(t.x.quotients)}),Xe("span",{children:t.y.label||$4(t.y.quotients)})]}),a&&mn("div",{className:Rf.column,children:[Xe("span",{children:a.x}),Xe("span",{children:a.y})]}),mn("div",{className:Rf.column,children:[Xe("span",{children:kae(n)}),Xe("span",{children:Aae(n)})]})]})]});Qr({set:e=>e,reset:()=>null},({onAction:e},t=null)=>(e("set",n=>t={id:n}),e("reset",()=>t=null),t),"[Shared state] currentEpisodeAtom");const Pae=Qr({setCurrentEventId:e=>e,focusedGeometryAtom:cF},({onAction:e,onChange:t},n=null)=>(t("focusedGeometryAtom",r=>{const a=r==null?void 0:r.source;a&&a.type!=="event"&&a.type!=="episode"&&(n={id:null})}),e("setCurrentEventId",r=>n={id:r}),n),"[Shared state] currentEventAtom"),Iae=LO(!1,"scheduledAutoSelect");LO(!1,"scheduledAutoFocus");const Mae=QO(null,async(e,t)=>iF.get("/events/user_feeds",void 0,!0,{signal:t.signal}),"eventFeedsResource"),fP=[Oae(Jr.defaultFeed)],Lae=Qr({eventFeedsResourceAtom:Mae},({get:e},t=fP)=>{const{data:n,error:r,loading:a}=e("eventFeedsResourceAtom");return!a&&!r?n?(console.assert(n.map(c=>c.feed).includes(Jr.defaultFeed),"default feed not included in response"),n):[...fP]:t},"[Shared state] eventFeeds");function Oae(e){return(!e||e!=="kontur-public")&&console.warn("WARNING! Default feed provided via config is incorrect or absent"),{feed:"kontur-public",name:lr.t("configs.Kontur_public_feed"),description:lr.t("configs.Kontur_public_feed_description"),default:!0}}Qr({setCurrentFeed:e=>e,setFeedForExistingEvent:e=>e,resetCurrentFeed:()=>null,eventFeedsAtom:Lae},({onAction:e,onChange:t,schedule:n,getUnlistedState:r},a={id:Jr.defaultFeed})=>(e("setCurrentFeed",c=>{(a==null?void 0:a.id)!==c&&(a={id:c})}),e("resetCurrentFeed",()=>{a&&(a=null)}),t("eventFeedsAtom",c=>{if(c&&c.length){const d=Fae(c,a==null?void 0:a.id);d!==void 0&&d!==(a==null?void 0:a.id)&&(a={id:d},r(Pae)!==null&&n(x=>x(Iae.setTrue())))}}),a),"[Shared state] currentEventFeedAtom");function Fae(e,t){if(!t)return Jr.defaultFeed;const n=e==null?void 0:e.find(r=>r.feed===t);return n?n.feed:Jr.defaultFeed}Qr({setCurrentMapPosition:e=>({type:"centerZoom",...e}),setCurrentMapBbox:e=>({type:"bbox",bbox:e})},({onAction:e},t=null)=>(e("setCurrentMapPosition",n=>{if(t===null||t.type!=="centerZoom")t=n;else{const{lat:r,lng:a,zoom:c}=n;(t.lat!==r||t.lng!==a||t.zoom!==c)&&(t=n)}}),e("setCurrentMapBbox",n=>{(t===null||t.type!=="bbox"||t.bbox.some((r,a)=>r!==n.bbox[a]))&&(t=n)}),t),"[Shared state] currentMapPositionAtom");Qr({addControl:e=>e,removeControl:e=>e,toggleActiveState:e=>e,enable:e=>e,disable:e=>e,reset:()=>null},({onAction:e,schedule:t,create:n},r={})=>(e("addControl",a=>{r={...r,[a.id]:a}}),e("removeControl",a=>{delete r[a],r={...r}}),e("enable",a=>{var b;const c=r[a];(b=c.onChange)==null||b.call(c,!0);const d={...r[a],active:!0},l={...r,[a]:d},x=[];Object.entries(l).forEach(([E,A])=>{if(A.id!==a&&A.exclusiveGroup===c.exclusiveGroup&&A.active){const L=n("disable",A.id);x.push(L)}}),x.length&&t(E=>{E(x)}),r=l}),e("disable",a=>{var l;const c=r[a];(l=c==null?void 0:c.onChange)==null||l.call(c,!1);const d={...r[a],active:!1};r={...r,[a]:d}}),e("toggleActiveState",a=>{if(!r[a])return console.error(`[toolbarControlsAtom] Cannot toggle state for ${a} because it doesn't exist`);const d=n(r[a].active?"disable":"enable",a);t(l=>l(d))}),e("reset",()=>{Object.entries(r).forEach(([a,c])=>{var d;c.active&&((d=c.onChange)==null||d.call(c,!1))}),r={}}),r),"[Shared state] toolbarControlsAtom");const Rae=vK,Dae=Qr({set:(e={...Jr.effectiveFeatures})=>e},({onAction:e},t={})=>{if(e("set",n=>{n?t=n:t={...Jr.effectiveFeatures}}),{}.VITE_FEATURES_CONFIG)try{const n=JSON.parse({}.VITE_FEATURES_CONFIG);n&&(t={...t,...n})}catch(n){console.error("Local features override error",n)}return t},"[Shared state] featureFlagsAtom"),i1="stats",yF=0,_F=22,dP={hover:"hover",active:"active"},zae={type:"line",layout:{},paint:{"line-color":["case",["==",["feature-state",dP.active],!0],"rgba(5, 22, 38, 1)",["==",["feature-state",dP.hover],!0],"rgba(5, 22, 38, 0.4)","rgba(0, 0, 0, 0)"],"line-width":1}},Bae="rgba(90, 200, 127, 0.5)",$ae="rgba(228, 26, 28, 0.5)",Nae=["bad","good"],Uae=["good","bad"];class jae{constructor(){an(this,"add",(t,n)=>["+",t,n]);an(this,"sub",(t,n)=>["-",t,n]);an(this,"mult",(t,n)=>["*",t,n]);an(this,"div",(t,n)=>["/",t,n]);an(this,"log",t=>["ln",t]);an(this,"sqrt",t=>["sqrt",t])}}class Vae{constructor(){an(this,"add",(t,n)=>t+n);an(this,"sub",(t,n)=>t-n);an(this,"mult",(t,n)=>t*n);an(this,"div",(t,n)=>t/n);an(this,"log",t=>Math.log(t));an(this,"sqrt",t=>Math.sqrt(t))}}const pP=(e,t)=>e.length===t.length&&e.every((n,r)=>n===t[r]);class vF{constructor(t){an(this,"math");this.math=t}rate({num:t,den:n}){return this.math.div(t,n)}normalize({x:t,min:n,max:r}){return this.math.div(this.math.sub(t,n),this.math.sub(r,n))}transform({x:t,min:n,max:r,transformation:a}){switch(a){case"no":return{tX:t,tMin:n,tMax:r};case"square_root":return{tX:this.math.sqrt(t),tMin:this.math.sqrt(n),tMax:this.math.sqrt(r)};case"natural_logarithm":return{tX:this.math.log(this.math.add(t,1)),tMin:this.math.log(this.math.add(n,1)),tMax:this.math.log(this.math.add(r,1))}}}invert(t){return this.math.sub(1,t)}scale(t,n){return this.math.mult(t,n)}}const qae=new vF(new jae),Gae=new vF(new Vae),xF=(e,t)=>({axis:n,range:r,coefficient:a,sentiment:c,transformationFunction:d,normalization:l})=>{const[x,b]=n,[E,A]=r,L=pP(c,Uae);L||console.assert(pP(c,Nae),"Not inverted equals default");const F=t({num:x,den:b}),$=e.rate(F),{tX:N,tMin:Z,tMax:R}=e.transform({x:$,min:E,max:A,transformation:d}),q=l==="max-min"?e.normalize({x:N,min:Z,max:R}):N,G=L?e.invert(q):q;return e.scale(G,a)},Hae="stats",mP=xF(qae,e=>({num:["get",e.num],den:["get",e.den]}));function Wae(e){return WO(...e.map(({axis:t})=>RC(["/",Uf(t[0]),Uf(t[1])],0)))}function Zae(e){return e.length===1?mP(e.at(0)):["/",["+",...e.map(mP)],NC(e,"coefficient")]}function Kae({colorsConfig:e,mcdaResult:t,absoluteMin:n,absoluteMax:r}){const{good:a=Bae,bad:c=$ae}=e.parameters;return{"fill-color":["let","mcdaResult",["to-number",t,-9999],["case",["all",[">=",["var","mcdaResult"],n],["<=",["var","mcdaResult"],r]],["interpolate-hcl",["linear"],["var","mcdaResult"],0,c,1,a],"transparent"]],"fill-opacity":1,"fill-antialias":!1}}function Xae({colorsConfig:e,mcdaResult:t,absoluteMax:n,absoluteMin:r}){return Object.entries(e.parameters).reduce((a,[c,d])=>(a[c]=Array.isArray(d)?["let","mcdaResult",["to-number",t,-9999],"absoluteMax",["to-number",n,-9999],"absoluteMin",["to-number",r,-9999],...d]:d,a),{})}function Yae(e){switch(e.colorsConfig.type){case"sentiments":return Kae(e);case"mapLibreExpression":return Xae(e)}}function Jae(e){const[t=0,n=1]=e.layers.reduce((c,d)=>{const l=d.normalization==="no"?d.range:[0,1];return c.length===0?l:(c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c)},[]),r=Zae(e.layers);return{id:e.id,type:"fill",layout:{},filter:Wae(e.layers),paint:Yae({colorsConfig:e.colors,mcdaResult:r,absoluteMin:t,absoluteMax:n}),source:{type:"vector",tiles:[`${Q1(Jr.bivariateTilesRelativeUrl)}{z}/{x}/{y}.mvt?indicatorsClass=${Jr.bivariateTilesIndicatorsClass}`],maxzoom:_F,minzoom:yF},"source-layer":Hae}}const Qae={mcda:e=>new Array(Jae(e))},ese="_result_1l50n_1",tse="_tableBody_1l50n_6",nse="_list_1l50n_10",rse="_entryName_1l50n_18",Lp={result:ese,tableBody:tse,list:nse,entryName:rse};function ise({layer:e,normalized:t,resultMCDA:n}){var d,l;const r=`${e.axis[0]}-${e.axis[1]}`,[a,c]=mt.useMemo(()=>e.axis.map(x=>g3(x.replaceAll("_"," "))),[e]);return mn("ul",{className:Lp.list,children:[mn("li",{children:[mn("span",{className:Lp.entryName,children:[a,":"]})," ",parseFloat((d=t[r])==null?void 0:d.numValue.toFixed(2))]}),mn("li",{children:[mn("span",{className:Lp.entryName,children:[c,":"]})," ",parseFloat((l=t[r])==null?void 0:l.denValue.toFixed(2))]}),mn("li",{children:[mn("span",{className:Lp.entryName,children:[a," / ",c,":"]})," ",n.toFixed(2)]})]})}function ose({layers:e,normalized:t,resultMCDA:n}){return mn("table",{children:[Xe("thead",{children:mn("tr",{children:[Xe("th",{children:"Layer"}),Xe("th",{children:"Range"}),Xe("th",{children:"Coefficient"}),Xe("th",{children:"Value"}),Xe("th",{children:"Normalized Value"})]})}),mn("tbody",{className:Lp.tableBody,children:[e.map(({axis:r,range:a,coefficient:c})=>{const[d,l]=a,[x,b]=r;return mn("tr",{children:[mn("td",{children:[x," / ",b]}),mn("td",{children:[d," - ",l]}),Xe("td",{children:c}),Xe("td",{children:t[`${x}-${b}`].val.toFixed(2)}),Xe("td",{children:t[`${x}-${b}`].norm.toFixed(2)})]},`${x}-${b}`)}),Xe("tr",{children:Xe("td",{colSpan:5,children:mn("b",{className:Lp.result,children:["Result: ",n.toFixed(2)]})})})]})]})}function ase({layers:e,normalized:t,resultMCDA:n}){return e.length===1?Xe(ise,{layer:e.at(0),normalized:t,resultMCDA:n}):Xe(ose,{layers:e,normalized:t,resultMCDA:n})}function sse(e,t){const n=xF(Gae,({num:r,den:a})=>{var c,d;return{num:(c=e.properties)==null?void 0:c[r],den:(d=e.properties)==null?void 0:d[a]}});return t.reduce((r,a)=>{var x,b,E,A;const[c,d]=a.axis,l=((x=e.properties)==null?void 0:x[c])/((b=e.properties)==null?void 0:b[d]);return r[`${c}-${d}`]={val:l,norm:n(a),numValue:(E=e.properties)==null?void 0:E[c],denValue:(A=e.properties)==null?void 0:A[d]},r},{})}function lse(e,t){const n=NC(Object.values(t),"norm"),r=NC(e,"coefficient");return n/r}function use(e,t){const n=sse(e,t),r=lse(t,n),a=document.createElement("div");return jE(a).render(ase({layers:t,normalized:n,resultMCDA:r})),a}function gP(e,t){e.includes("{-y}")&&(t.scheme="tms")}function cse(e,t){if(e.type==="bivariate")return lae(e,t);throw new Error(`Unexpected legend type '${e.type}'`)}function hse(e){var n;const t=(n=e.layer.paint)==null?void 0:n["fill-color"];return t?t.a===0:!0}function qC(e){return!hse(e)}function fse(e){return pie(e.id)}function yP(e,t){return t.target.queryRenderedFeatures(t.point).filter(n=>n.source.includes(e)).filter(qC).filter(fse)}function dse(e){const t=new Set,n=new Set,r=(a,c)=>{e.map.setFeatureState({source:e.sourceId,id:a,sourceLayer:e.sourceLayer},c)};return{onClick:a=>{t.forEach(d=>{r(d,{active:!1})}),t.clear();const c=yP(e.sourceId,a);return c.length&&c.forEach(d=>{r(d.id,{active:!0}),t.add(d.id)}),!0},onMouseMove:a=>{n.forEach(d=>{r(d,{hover:!1})}),n.clear();const c=yP(e.sourceId,a);return c.length&&c.forEach(d=>{r(d.id,{hover:!0}),n.add(d.id)}),!0},onMouseLeave:a=>(n.forEach(c=>{r(c,{hover:!1})}),n.clear(),!0),reset:()=>{t.forEach(a=>{r(a,{active:!1})}),t.clear(),n.forEach(a=>{r(a,{hover:!1})}),n.clear()}}}const pse=(e,t=!0)=>`rgba(${e.r*255*2},${e.g*255*2},${e.b*255*2}${t?","+e.a:""})`;function _P(e,t,n){const r=e[t],a=e[n];if(r==null||a==null)return"0.00";if(a!==0)return(r/a).toFixed(2)}class mse extends mae{constructor({id:n,layersOrderManager:r}){super();an(this,"id");an(this,"_layerId");an(this,"_sourceId");an(this,"_layersOrderManager");an(this,"_popup");an(this,"_listenersCleaningTasks",new Set);an(this,"cleanUpListeners",()=>{this._listenersCleaningTasks.forEach(n=>n()),this._listenersCleaningTasks.clear()});an(this,"_borderLayerId");an(this,"resetFeatureStates");an(this,"removeBivariatePopupClickHandler");an(this,"onMapZoomHandlers",new Set);an(this,"onMapZoom",n=>{this.cleanPopup()});this.id=n,this._layersOrderManager=r,this._sourceId=Boe+this.id}async addHoverAndActiveFeatureState(n,r){await N2(n);const a=this._sourceId,c=a+"_border";if(n.getLayer(c))return;const d={...zae,id:c,source:a,"source-layer":i1};$2(n,this._layersOrderManager).addAboveLayerWithSameType(d,this.id),this._borderLayerId=c;const{onClick:l,onMouseMove:x,onMouseLeave:b,reset:E}=dse({map:n,sourceId:a,sourceLayer:i1});this._listenersCleaningTasks.add(Yg("click",l,60)),this._listenersCleaningTasks.add(Yg("mousemove",x,60)),this._listenersCleaningTasks.add(Yg("mouseleave",b,60)),this.resetFeatureStates=E,this.onMapZoomHandlers.add(this.resetFeatureStates)}async mountBivariateLayer(n,r,a){const c={type:"vector",tiles:r.source.urls.map(d=>Q1(d)),minzoom:r.minZoom||yF,maxzoom:r.maxZoom||_F};if(gP(r.source.urls[0],c),await N2(n),n.getSource(this._sourceId)===void 0&&n.addSource(this._sourceId,c),a){const d=cse(a,i1),l=`${rP+this.id}`;if(n.getLayer(l))return;const x={...d,id:l,source:this._sourceId};$2(n,this._layersOrderManager).addAboveLayerWithSameType(x,this.id),this._layerId=x.id}else throw new Error(`[GenericLayer ${this.id}] Vector layers must have legend`)}addBivariatePopup(n,r){const a=d=>{var ee;const l=d.target.queryRenderedFeatures(d.point).filter(oe=>oe.source.includes(this._sourceId));if(!l.length||!r||!l[0].geometry)return!0;const[x]=l;if(!qC(x)||!x.properties)return!0;const b=Dae.getState()[Rae.BIVARIATE_MANAGER],[E,A]=r.axis.x.quotient,[L,F]=r.axis.y.quotient,$=_P(x.properties,E,A),N=_P(x.properties,L,F);if(!$||!N)return!0;const Z=(ee=x.layer.paint)==null?void 0:ee["fill-color"];if(!Z)return!0;const R=pse(Z),q=hie(r.steps,"label"),G=fae(r.axis.x.steps,r.axis.y.steps,Number($),Number(N)),Q=q.findIndex(oe=>oe.label===G),se=document.createElement("div");return jE(se).render(Xe(Tae,{cellLabel:q[Q].label,cellIndex:Q,axis:r.axis,values:b?{x:$,y:N}:void 0,hexagonColor:R})),this.cleanPopup(),this._popup=new uP.Popup({closeOnClick:!0,className:hP,maxWidth:"none",focusAfterOpen:!1,offset:15}).setLngLat(d.lngLat).setDOMContent(se).addTo(n),this._popup.once("close",()=>{var oe;(oe=this.resetFeatureStates)==null||oe.call(this)}),!0};this.removeBivariatePopupClickHandler&&(this.removeBivariatePopupClickHandler(),this._listenersCleaningTasks.delete(this.removeBivariatePopupClickHandler));const c=Yg("click",a,60);this._listenersCleaningTasks.add(c),this.removeBivariatePopupClickHandler=c,this.onMapZoomHandlers.add(this.cleanPopup)}async mountMCDALayer(n,r,a){const c={type:"vector",tiles:r.source.urls.map(b=>Q1(b)),minzoom:r.minZoom||0,maxzoom:r.maxZoom||22};gP(r.source.urls[0],c),await N2(n),n.getSource(this._sourceId)===void 0&&n.addSource(this._sourceId,c);const d=`${rP+this.id}`;if(n.getLayer(d))return;const x={...Qae.mcda(a.config)[0],id:d,source:this._sourceId};$2(n,this._layersOrderManager).addAboveLayerWithSameType(x,this.id),this._layerId=d}addMCDAPopup(n,r){const a=d=>{const l=d.target.queryRenderedFeatures(d.point).filter(E=>E.source.includes(this._sourceId));if(!l.length||!l[0].geometry)return!0;const[x]=l;if(!qC(x))return!0;const b=use(x,r.config.layers);return this.cleanPopup(),this._popup=new uP.Popup({closeOnClick:!0,className:hP,maxWidth:"none",focusAfterOpen:!1,offset:15}).setLngLat(d.lngLat).setDOMContent(b).addTo(n),this._popup.once("close",()=>{var E;(E=this.resetFeatureStates)==null||E.call(this)}),!0};this.cleanUpListeners();const c=Yg("click",a,60);this._listenersCleaningTasks.add(c),this.onMapZoomHandlers.add(this.cleanPopup)}_updateMap(n,r,a,c,d){r!=null&&((d==null?void 0:d.type)==="mcda"?(this.mountMCDALayer(n,r,d),this.addMCDAPopup(n,d)):(this.mountBivariateLayer(n,r,a),this.addBivariatePopup(n,a)),this.addHoverAndActiveFeatureState(n,d),c||this.willHide({map:n}))}cleanPopup(){this._popup&&(this._popup.remove(),this._popup=null)}willSourceUpdate({map:n,state:r}){r.source?(console.debug(`[${this.id} layer renderer]: Source updated`),this._updateMap(n,r.source,r.legend,r.isVisible,r.style)):console.debug(`[${this.id} layer renderer]: Source not available, waiting for next update`)}willMount({map:n,state:r}){n.on("zoom",this.onMapZoom),r.source?this._updateMap(n,r.source,r.legend,r.isVisible,r.style):console.debug(`[${this.id} layer renderer]: Source not available, waiting for next update`)}willUnMount({map:n}){var r;this._layerId&&n.getLayer(this._layerId)?(n.removeLayer(this._layerId),this._layerId=void 0):console.warn(`Can't remove layer with ID: ${this._layerId}. Layer does't exist in map`),this._borderLayerId&&n.getLayer(this._borderLayerId)?(n.removeLayer(this._borderLayerId),this._borderLayerId=void 0):console.warn(`Can't remove layer with ID: ${this._borderLayerId}. Layer does't exist in map`),this.cleanPopup(),n.getSource(this._sourceId)?n.removeSource(this._sourceId):console.warn(`Can't remove source with ID: ${this._sourceId}. Source does't exist in map`),this.cleanUpListeners(),n.off("zoom",this.onMapZoom),this.onMapZoomHandlers.clear(),(r=this.resetFeatureStates)==null||r.call(this)}willHide({map:n}){this._layerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0?(n.setLayoutProperty(this._layerId,"visibility","none"),this.cleanPopup()):console.warn(`Can't hide layer with ID: ${this._layerId}. Layer doesn't exist on the map`))}willUnhide({map:n}){this._layerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0?n.setLayoutProperty(this._layerId,"visibility","visible"):console.warn(`Cannot unhide layer with ID: ${this._layerId}. Layer doesn't exist on the map`))}willDestroy({map:n}){this._layerId===void 0||this._borderLayerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0||n.getLayer(this._borderLayerId)!==void 0)&&this.willUnMount({map:n})}}const U2=(e,t,n)=>{const r=e?e.findIndex(c=>c.selectedQuotient[0]===(n==null?void 0:n.xNumerator)&&c.selectedQuotient[1]===(n==null?void 0:n.xDenominator)):-1,a=t?t.findIndex(c=>c.selectedQuotient[0]===(n==null?void 0:n.yNumerator)&&c.selectedQuotient[1]===(n==null?void 0:n.yDenominator)):-1;return{x:r,y:a}},vP=(e,t,n)=>{const r=[...e];let a;const c=r.findIndex(({quotients:d})=>(a=d.find(l=>l[0]===t&&l[1]===n),a));return a&&(r[c]={...r[c],selectedQuotient:a}),r},gse={xNumerator:null,xDenominator:null,yNumerator:null,yDenominator:null,selectedCell:null,selectCellCallback:null},j2=(e,t,n,r)=>({xNumerator:e,xDenominator:t,yNumerator:n,yDenominator:r}),yse=Qr({enabledLayersAtom:Hf,layersLegendsAtom:y3,calculateSelectedCell:()=>null,resetSelection:()=>null,setSelectCellCallback:e=>e,runPreselection:()=>null,setMatrixSelection:j2,presetMatrixSelection:e=>e,enableBivariateLayer:e=>e,disableBivariateLayer:()=>null},({onAction:e,schedule:t,getUnlistedState:n,create:r,onChange:a},c=gse)=>{e("calculateSelectedCell",()=>{const{xGroups:l,yGroups:x}=n(Lv),b=U2(l,x,j2(c.xNumerator,c.xDenominator,c.yNumerator,c.yDenominator)),E=c.selectedCell;(!E||b.x!==E.x||b.y!==E.y)&&(c={...c,selectedCell:b})}),e("setSelectCellCallback",l=>{c={...c,selectCellCallback:l}});const d=()=>{const l=n(Hf),x=n(vp);return[...l].map(E=>{var A;return(A=x.get(E))==null?void 0:A.getState()}).find(E=>{var A;return E&&E.isEnabled&&((A=E.legend)==null?void 0:A.type)==="bivariate"})};return e("resetSelection",()=>{c={...c,xNumerator:null,xDenominator:null,yNumerator:null,yDenominator:null,selectedCell:null},t(l=>{var x;(x=c==null?void 0:c.selectCellCallback)==null||x.call(c,-1,-1)})}),e("runPreselection",()=>{const l=d();if(!l||!(l!=null&&l.legend)){t(b=>{b(r("resetSelection"))});return}const x=l.legend.axis;if(x){const b=j2(x.x.quotient[0]||null,x.x.quotient[1]||null,x.y.quotient[0]||null,x.y.quotient[1]||null),{xGroups:E,yGroups:A}=n(Lv),L=U2(E,A,b);if(L.x>=0&&L.y>=0){t(Z=>{var R;Z(r("presetMatrixSelection",b)),(R=c==null?void 0:c.selectCellCallback)==null||R.call(c,L.x,L.y)});return}let F=E,$=A;L.x===-1&&(F=vP(E,x.x.quotient[0],x.x.quotient[1])),L.y===-1&&($=vP(A,x.y.quotient[0],x.y.quotient[1]));const N=U2(F,$,b);t(Z=>{var R;N.x>=0&&N.y>=0?(Z(Lv.setNumerators(F,$)),Z(r("presetMatrixSelection",b)),(R=c==null?void 0:c.selectCellCallback)==null||R.call(c,N.x,N.y)):Z(r("resetSelection"))})}}),e("presetMatrixSelection",l=>{c={...c,...l},t(x=>{x(r("calculateSelectedCell"))})}),e("setMatrixSelection",l=>{c={...c,...l},t(R=>{R(r("calculateSelectedCell"))});const{xNumerator:x,xDenominator:b,yNumerator:E,yDenominator:A}=l;if(x===null||E===null)return;const{xGroups:L,yGroups:F}=n(Lv),$=n(pF).data;if($===null)return;const N=$.polygonStatistic.bivariateStatistic;if(!L||!F||!L.length||!F.length||!b||!A)return;const Z=oae(x,b,E,A,N,i1);if(Z){const[R,q]=Z,G=uae("Bivariate Layer",R,x,b,E,A,N);if(G){const Q=q,se=Q.source,ee=Q.id,oe=hae(x,b,E,A,N),xe=se?{id:ee,maxZoom:se.maxzoom,minZoom:se.minzoom,source:{type:se.type,urls:se.tiles,tileSize:512,apiKey:""}}:void 0,[Oe,Le]=lP([{id:ee,legend:G,meta:oe,source:xe}]);n(E_).has(ee)||Oe.push(...lP([{id:ee,settings:{id:ee,name:"Bivariate Layer",category:"overlay",group:"bivariate",ownedByUser:!0}}]).flat()),n(vp).has(ee)||Oe.push(r("disableBivariateLayer"),vp.register({id:ee,renderer:new mse({id:ee}),cleanUpActions:Le}),r("enableBivariateLayer",ee)),Oe.length&&t((nt,pt={})=>{nt(Oe),pt.bivariateLayerAtomId=ee})}}}),e("enableBivariateLayer",l=>{const x=n(vp);for(const[b,E]of Array.from(x))if(b===l){t(A=>{A(E.enable())});break}}),e("disableBivariateLayer",()=>{const l=n(vp);t((x,b={})=>{if(b.bivariateLayerAtomId){const E=l.get(b.bivariateLayerAtomId);E&&x(E.destroy())}})}),c},"bivariateMatrixSelection"),_se=mt.createContext(null),ex=37,vse=.7,bF=ex/Math.sqrt(2),wF=ex/Math.sqrt(2);function xse(e,t,n=0){return mt.useMemo(()=>({display:"inline-grid","--cell-size":n===0?"initial":`${n}px`,gridTemplateRows:`repeat(${t}, ${n===0?"auto":n+"px"})`,gridTemplateColumns:`repeat(${e}, ${n===0?"auto":n+"px"})`}),[e,t,n])}function bse(e,t){const n=[];for(let r=0;r<e;r++){n[r]=[];for(let a=0;a<t;a++)n[r][a]={gridColumn:`${r} / ${r+1}`,gridRow:`${a} / ${a+1}`}}return n}function wse(e,t){return mt.useMemo(()=>{if(!e||!e.length||!t||!t.length)return 0;let r=Fv(e[0].label);for(let c=1;c<e.length;c++){const d=Fv(e[c].label),l=c*wF;d>r+l&&(r=d-l)}let a=Fv(t[0].label);for(let c=1;c<t.length;c++){const d=Fv(t[c].label),l=c*bF;d>a+l&&(a=d-l)}return r>a?r:a},[e,t])}const Sse=document.createElement("canvas"),SF=Sse.getContext("2d")||{};SF.font="normal 13px Roboto";const Cse=30,Ese=90;function Fv(e){return SF.measureText(e).width+Cse+Ese}function xP(e,t,n){return t?{height:`${e+n*wF}px`}:{width:`${e+n*bF}px`}}const kse="_hoveredCell_kt59d_1",Ase="_valueCell_kt59d_5",Tse="_rotatedCell_kt59d_19",Pse="_valueFill_kt59d_28",Ise="_disabled_kt59d_39",Mse="_selectedCol_kt59d_43",Lse="_first_kt59d_48",Ose="_last_kt59d_52",Fse="_selectedRow_kt59d_56",ju={hoveredCell:kse,valueCell:Ase,rotatedCell:Tse,valueFill:Pse,disabled:Ise,selectedCol:Mse,first:Lse,last:Ose,selectedRow:Fse},CF=mt.forwardRef(({value:e,x:t,y:n,className:r,onMouseOver:a,onMouseOut:c,onClick:d,disabled:l=!1,style:x,firstRow:b,firstCol:E,lastRow:A,lastCol:L},F)=>{const $=mt.useRef(null);let N=!1,Z=!1,R=!1;const q=Ci(ju.valueCell,r,l&&ju.disabled);function G(){return`${q} ${Ci({[ju.hoveredCell]:N,[ju.selectedCol]:R,[ju.selectedRow]:Z,[ju.first]:b&&R||E&&Z,[ju.last]:A&&R||L&&Z})}`}return mt.useImperativeHandle(F,()=>({setHovered:()=>{$.current&&(N=!0,$.current.className=G())},resetHovered:()=>{$.current&&(N=!1,$.current.className=G())},setSelectedCol:()=>{$.current&&(R=!0,$.current.className=G())},resetSelectedCol:()=>{$.current&&(R=!1,$.current.className=G())},setSelectedRow:()=>{$.current&&(Z=!0,$.current.className=G())},resetSelectedRow:()=>{$.current&&(Z=!1,$.current.className=G())}})),Xe("div",{ref:$,className:q,style:x,onMouseOver:()=>{a(t,n)},onClick:Q=>{d(t,n,Q)},onMouseOut:c,children:!l&&e!==void 0?mn(qx,{children:[Math.abs(e)>=.1&&Xe("div",{className:ju.valueFill,style:{transform:`scale(${Math.abs(e)})`}}),Xe("span",{className:ju.rotatedCell,children:e==null?void 0:e.toFixed(3)})]}):null})});CF.displayName="BivariateMatrixCell";const Rse="_legendSlot_i0ppr_6",Dse="_matrixContainer_i0ppr_14",zse="_rotatedMatrix_i0ppr_21",bP={legendSlot:Rse,matrixContainer:Dse,rotatedMatrix:zse},Bse="_horConnector_zzmmn_1",$se="_vertConnector_zzmmn_7",Nse="_connectorBody_zzmmn_13",Use="_hovered_zzmmn_28",jse="_selected_zzmmn_33",pp={horConnector:Bse,vertConnector:$se,connectorBody:Nse,hovered:Use,selected:jse},GC=mt.forwardRef(({type:e,style:t},n)=>{const r=mt.useRef(null);let a=!1,c=!1;const d=pp.connectorBody;function l(){return`${d} ${Ci({[pp.hovered]:a,[pp.selected]:c})}`}return mt.useImperativeHandle(n,()=>({setHovered:()=>{r.current&&(a=!0,r.current.className=l())},resetHovered:()=>{r.current&&(a=!1,r.current.className=l())},setSelectedCol:()=>{e==="vertical"&&r.current&&(c=!0,r.current.className=l())},resetSelectedCol:()=>{e==="vertical"&&r.current&&(c=!1,r.current.className=l())},setSelectedRow:()=>{e==="horizontal"&&r.current&&(c=!0,r.current.className=l())},resetSelectedRow:()=>{e==="horizontal"&&r.current&&(c=!1,r.current.className=l())}})),Xe("div",{className:e==="horizontal"?pp.horConnector:pp.vertConnector,style:t,children:Xe("div",{className:pp.connectorBody,ref:r})})});GC.displayName="BivariateMatrixCellConnector";const Vse="_denominatorIcon_2n0u5_1",qse={denominatorIcon:Vse},Gse=()=>mn("svg",{width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[mn("g",{clipPath:"url(#clip0_4777_147920)",children:[Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.59226 5.6715C4.57385 5.68982 4.55581 5.70848 4.53814 5.72748C4.27818 6.00698 4.09843 6.3591 4.03058 6.74363C4.30836 6.45062 4.50699 6.08183 4.59226 5.6715ZM10.3266 5.66248C10.4117 6.0808 10.6146 6.45633 10.8991 6.75295C10.8325 6.3648 10.6519 6.00926 10.3899 5.7275C10.3693 5.70537 10.3482 5.68368 10.3266 5.66248ZM10.927 7.12889C10.2881 7.58142 9.93487 8.39557 10.1356 9.23105L10.3024 9.92533L10.8712 7.55816C10.9059 7.41385 10.924 7.27018 10.927 7.12889ZM10.8167 12.0655L11.135 13.3906C11.2431 13.8401 11.6451 14.157 12.1074 14.157H12.8928C13.3551 14.157 13.7571 13.8401 13.8651 13.3906L14.8646 9.23105C15.0886 8.29843 14.6225 7.39238 13.8391 6.98624C14.3731 6.58123 14.718 5.93987 14.718 5.21796C14.718 3.99301 13.725 3 12.5001 3C12.1224 3 11.7669 3.09436 11.4556 3.26079C11.4174 3.85333 11.25 4.41104 10.9816 4.90556C11.0898 5.00751 11.1903 5.11726 11.2822 5.23375C11.2821 5.22849 11.2821 5.22323 11.2821 5.21796C11.2821 4.5453 11.8274 4 12.5001 4C13.1727 4 13.718 4.5453 13.718 5.21796C13.718 5.89062 13.1727 6.43592 12.5001 6.43592C12.2381 6.43592 11.9954 6.35321 11.7968 6.21249C11.9482 6.7042 11.975 7.24459 11.8435 7.79175C11.9191 7.77351 11.9983 7.7638 12.0803 7.7638H12.9199C13.5667 7.7638 14.0433 8.36854 13.8922 8.99743L12.8928 13.157L12.1074 13.157L11.3309 9.92533L10.8167 12.0655ZM4.10776 12.0505L3.78577 13.3906C3.67777 13.8401 3.27574 14.157 2.81344 14.157H2.02803C1.56574 14.157 1.16371 13.8401 1.0557 13.3906L0.0562696 9.23105C-0.167809 8.29845 0.298349 7.39241 1.08167 6.98626C0.547652 6.58125 0.202745 5.93988 0.202745 5.21796C0.202745 3.99301 1.19576 3 2.42071 3C2.80138 3 3.15965 3.0959 3.47268 3.26486C3.5114 3.85587 3.67872 4.41215 3.94647 4.90553C3.83535 5.01024 3.73236 5.12317 3.63841 5.24319C3.63858 5.2348 3.63867 5.22639 3.63867 5.21796C3.63867 4.5453 3.09337 4 2.42071 4C1.74804 4 1.20274 4.5453 1.20274 5.21796C1.20274 5.89062 1.74804 6.43592 2.42071 6.43592C2.68679 6.43592 2.93294 6.3506 3.1333 6.20582C2.98006 6.69932 2.95243 7.24213 3.0845 7.79178L3.08494 7.79363C3.00708 7.77418 2.92528 7.7638 2.84055 7.7638H2.00092C1.35413 7.7638 0.877492 8.36854 1.0286 8.99742L2.02803 13.157L2.81344 13.157L3.59353 9.91034L4.10776 12.0505ZM4.62199 9.91034L4.78521 9.23105C4.98518 8.39877 4.63543 7.58765 4.00112 7.13409C4.00445 7.2737 4.02258 7.41562 4.05683 7.55816L4.62199 9.91034Z",fill:"black"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.46348 3C9.46348 4.10457 8.56805 5 7.46348 5C6.35891 5 5.46348 4.10457 5.46348 3C5.46348 1.89543 6.35891 1 7.46348 1C8.56805 1 9.46348 1.89543 9.46348 3ZM9.52339 5.18101C10.1023 4.63409 10.4635 3.85923 10.4635 3C10.4635 1.34315 9.12033 0 7.46348 0C5.80662 0 4.46348 1.34315 4.46348 3C4.46348 3.85922 4.8247 4.63408 5.40356 5.181C4.4317 5.4836 3.80296 6.50391 4.05627 7.55816L5.68205 14.3245C5.79005 14.774 6.19208 15.0909 6.65437 15.0909H8.27254C8.73483 15.0909 9.13686 14.774 9.24487 14.3245L10.8706 7.55816C11.1239 6.50392 10.4952 5.48363 9.52339 5.18101ZM6.00092 6.09091H8.92599C9.57278 6.09091 10.0494 6.69564 9.89832 7.32453L8.27254 14.0909H6.65437L5.0286 7.32453C4.87749 6.69564 5.35414 6.09091 6.00092 6.09091Z",fill:"black"})]}),Xe("defs",{children:Xe("clipPath",{id:"clip0_4777_147920",children:Xe("rect",{width:"24",height:"24",fill:"white"})})})]}),Hse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{d:"M14.6012 12.1833C15.0887 12.6708 15.0887 13.4833 14.6012 13.9708L13.7346 14.8375C13.6262 14.9458 13.5179 15 13.3554 15C13.2471 15 13.0846 14.9458 12.9762 14.8375C12.7596 14.6208 12.7596 14.2958 12.9762 14.1333L13.4637 13.6458H3.33874C2.20124 13.6458 1.33457 12.725 1.33457 11.5875V1.4625L0.847072 1.95C0.630406 2.16667 0.305406 2.16667 0.142906 1.95C-0.0195943 1.73333 -0.073761 1.40833 0.142906 1.24583L1.00957 0.379167C1.49707 -0.108333 2.30957 -0.108333 2.79707 0.379167L3.66374 1.24583C3.88041 1.4625 3.88041 1.7875 3.66374 1.95C3.55541 2.05833 3.39291 2.05833 3.28457 2.05833C3.17624 2.05833 3.01374 2.00417 2.90541 1.89583L2.36374 1.35417V11.5875C2.36374 12.1292 2.79707 12.6167 3.39291 12.6167H13.5721L13.0304 12.075C12.8137 11.8583 12.8137 11.5333 13.0304 11.3708C13.2471 11.1542 13.5721 11.1542 13.7346 11.3708L14.6012 12.1833ZM13.4637 0H6.85541C6.58457 0 6.36791 0.216667 6.36791 0.4875C6.36791 0.758333 6.58457 0.975 6.85541 0.975H13.4096C13.6804 0.975 13.8971 1.19167 13.8971 1.4625V8.125C13.8971 8.39583 14.1137 8.6125 14.3846 8.6125C14.6554 8.6125 14.8721 8.39583 14.8721 8.125V1.51667C14.9804 0.704167 14.2762 0 13.4637 0ZM8.45541 9.72083C8.72624 9.72083 8.94291 9.50417 8.94291 9.23333V6.95833C8.94291 6.2 8.29291 5.55 7.53457 5.55C7.20957 5.55 6.88457 5.65833 6.66791 5.875C6.45124 5.65833 6.12624 5.55 5.80124 5.55C5.58457 5.55 5.42207 5.60417 5.25957 5.65833C5.15124 5.55 5.04291 5.49583 4.88041 5.49583C4.60957 5.49583 4.39291 5.7125 4.39291 5.98333V9.17917C4.39291 9.45 4.60957 9.66667 4.88041 9.66667C5.15124 9.66667 5.36791 9.45 5.36791 9.17917V6.95833C5.36791 6.74167 5.53041 6.57917 5.74707 6.57917C5.96374 6.57917 6.12624 6.74167 6.12624 6.95833V9.23333C6.12624 9.50417 6.34291 9.72083 6.61374 9.72083C6.88457 9.72083 7.10124 9.50417 7.10124 9.23333V6.95833C7.10124 6.74167 7.26374 6.57917 7.48041 6.57917C7.69707 6.57917 7.85957 6.74167 7.85957 6.95833V9.23333C7.91374 9.50417 8.18457 9.72083 8.45541 9.72083ZM10.7304 3.7625C10.0804 3.7625 9.53874 4.30417 9.53874 4.95417C9.53874 5.225 9.75541 5.44167 10.0262 5.44167C10.2971 5.44167 10.5137 5.225 10.5137 4.95417C10.5137 4.84583 10.5679 4.79167 10.6762 4.79167C10.7304 4.79167 10.8387 4.84583 10.8387 4.95417C10.8387 5.00833 10.7304 5.225 10.2429 5.76667C9.9179 6.09167 9.64707 6.3625 9.64707 6.3625C9.48457 6.525 9.4304 6.74167 9.53874 6.90417C9.59291 7.12083 9.80957 7.22917 10.0262 7.22917H11.3804C11.6512 7.22917 11.8679 7.0125 11.8679 6.74167C11.8679 6.47083 11.6512 6.25417 11.3804 6.25417H11.2721C11.7054 5.7125 11.9221 5.33333 11.9221 5.00833C11.9221 4.25 11.3804 3.7625 10.7304 3.7625Z",fill:"black"})}),Wse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5938 15C14.112 15 14.5312 14.5807 14.5312 14.0625V7.5C14.5312 6.9818 14.112 6.5625 13.5938 6.5625H12.6562V0.9375C12.6562 0.419297 12.237 0 11.7188 0H5.15625C4.63805 0 4.21875 0.419297 4.21875 0.9375V2.8125H1.40625C0.888047 2.8125 0.46875 3.2318 0.46875 3.75V14.0625C0.46875 14.5807 0.888047 15 1.40625 15H13.5938ZM1.40625 3.75H4.21875V5.5H3.5C3.22386 5.5 3 5.72386 3 6C3 6.27614 3.22386 6.5 3.5 6.5H4.21875V8H3.5C3.22386 8 3 8.22386 3 8.5C3 8.77614 3.22386 9 3.5 9H4.21875V10.5H3.5C3.22386 10.5 3 10.7239 3 11C3 11.2761 3.22386 11.5 3.5 11.5H4.21875V14.0625H1.40625V3.75ZM5.15625 0.9375H11.7188V14.0625H8.90625V11.25H7.96875V14.0625H5.15625V0.9375ZM12.6562 7.5H13.5938V14.0625H12.6562V7.5ZM6 9.5C6 9.22386 6.22386 9 6.5 9H10.5C10.7761 9 11 9.22386 11 9.5C11 9.77614 10.7761 10 10.5 10H6.5C6.22386 10 6 9.77614 6 9.5ZM6.5 3C6.22386 3 6 3.22386 6 3.5C6 3.77614 6.22386 4 6.5 4H10.5C10.7761 4 11 3.77614 11 3.5C11 3.22386 10.7761 3 10.5 3H6.5ZM6 7.5C6 7.22386 6.22386 7 6.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H6.5C6.22386 8 6 7.77614 6 7.5ZM6.5 5C6.22386 5 6 5.22386 6 5.5C6 5.77614 6.22386 6 6.5 6H10.5C10.7761 6 11 5.77614 11 5.5C11 5.22386 10.7761 5 10.5 5H6.5Z",fill:"black"})}),Zse=()=>Xe("svg",{width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4949 0.505013C14.7683 0.77838 14.7683 1.2216 14.4949 1.49496L1.49493 14.495C1.22156 14.7683 0.778343 14.7683 0.504977 14.495C0.23161 14.2216 0.23161 13.7784 0.504977 13.505L13.505 0.505013C13.7783 0.231646 14.2216 0.231646 14.4949 0.505013ZM14.495 6.50503C14.7683 6.77839 14.7683 7.22161 14.495 7.49497L7.49497 14.495C7.22161 14.7683 6.77839 14.7683 6.50503 14.495C6.23166 14.2216 6.23166 13.7784 6.50503 13.505L13.505 6.50503C13.7784 6.23166 14.2216 6.23166 14.495 6.50503ZM8.49498 1.49497C8.76834 1.22161 8.76834 0.778392 8.49498 0.505025C8.22161 0.231658 7.77839 0.231658 7.50503 0.505025L0.505025 7.50503C0.231658 7.77839 0.231658 8.22161 0.505025 8.49498C0.778392 8.76834 1.22161 8.76834 1.49497 8.49498L8.49498 1.49497ZM3.49497 0.505025C3.76834 0.778392 3.76834 1.22161 3.49497 1.49497L1.49497 3.49497C1.22161 3.76834 0.778392 3.76834 0.505025 3.49497C0.231658 3.22161 0.231658 2.77839 0.505025 2.50503L2.50503 0.505025C2.77839 0.231658 3.22161 0.231658 3.49497 0.505025ZM14.495 12.495C14.7684 12.2216 14.7684 11.7784 14.495 11.505C14.2217 11.2317 13.7784 11.2317 13.5051 11.505L11.5051 13.505C11.2317 13.7784 11.2317 14.2216 11.5051 14.495C11.7784 14.7683 12.2217 14.7683 12.495 14.495L14.495 12.495Z",fill:"black"})}),Kse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.60002 4C8.60002 3.75732 8.45384 3.53854 8.22963 3.44567C8.00543 3.3528 7.74736 3.40413 7.57576 3.57573L5.57576 5.57573C5.34145 5.81005 5.34145 6.18995 5.57576 6.42426C5.81007 6.65857 6.18997 6.65857 6.42429 6.42426L7.40002 5.44852V10.4H6.50002C6.16865 10.4 5.90002 10.6686 5.90002 11C5.90002 11.3314 6.16865 11.6 6.50002 11.6H9.50002C9.8314 11.6 10.1 11.3314 10.1 11C10.1 10.6686 9.8314 10.4 9.50002 10.4H8.60002V4Z",fill:"black"})}),Xse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.31257 14.9513C2.38285 14.9835 2.45927 15.0001 2.53658 15C2.66433 14.9997 2.78777 14.9537 2.88462 14.8704C2.98148 14.7871 3.04538 14.672 3.0648 14.5457L5.20765 0.617136C5.22508 0.478692 5.1878 0.338912 5.10375 0.227531C5.0197 0.116151 4.89551 0.0419601 4.75759 0.0207426C4.61968 -0.00047491 4.47893 0.0329551 4.36529 0.113921C4.25164 0.194887 4.17407 0.316999 4.14908 0.454279L2.00622 14.3828C1.99447 14.4593 1.9994 14.5373 2.02067 14.6116C2.04193 14.686 2.07903 14.7548 2.12942 14.8134C2.17981 14.8721 2.24229 14.9191 2.31257 14.9513ZM12.9007 14.8704C12.9975 14.9537 13.121 14.9997 13.2487 15C13.326 15.0001 13.4025 14.9835 13.4727 14.9513C13.543 14.9191 13.6055 14.8721 13.6559 14.8134C13.7063 14.7548 13.7434 14.686 13.7646 14.6116C13.7859 14.5373 13.7908 14.4593 13.7791 14.3828L11.6362 0.454279C11.6112 0.316999 11.5337 0.194887 11.42 0.113921C11.3064 0.0329551 11.1656 -0.00047491 11.0277 0.0207426C10.8898 0.0419601 10.7656 0.116151 10.6816 0.227531C10.5975 0.338912 10.5602 0.478692 10.5777 0.617136L12.7205 14.5457C12.7399 14.672 12.8038 14.7871 12.9007 14.8704ZM8.5 10.5C8.5 10.2239 8.27614 10 8 10C7.72386 10 7.5 10.2239 7.5 10.5V14.5C7.5 14.7761 7.72386 15 8 15C8.27614 15 8.5 14.7761 8.5 14.5V10.5ZM8 4C8.27614 4 8.5 4.22386 8.5 4.5V7.5C8.5 7.77614 8.27614 8 8 8C7.72386 8 7.5 7.77614 7.5 7.5V4.5C7.5 4.22386 7.72386 4 8 4ZM8.5 1C8.5 0.723858 8.27614 0.5 8 0.5C7.72386 0.5 7.5 0.723858 7.5 1V2C7.5 2.27614 7.72386 2.5 8 2.5C8.27614 2.5 8.5 2.27614 8.5 2V1Z",fill:"black"})}),Yse={population:Xe(Gse,{}),area_km2:Xe(Hse,{}),total_building_count:Xe(Wse,{}),populated_area_km2:Xe(Zse,{}),one:Xe(Kse,{})},Jse={population:lr.t("bivariate.matrix.icon.population"),area_km2:lr.t("bivariate.matrix.icon.area_km2"),total_building_count:lr.t("bivariate.matrix.icon.total_building_count"),populated_area_km2:lr.t("bivariate.matrix.icon.populated_area_km2"),one:lr.t("bivariate.matrix.icon.one")},EF=({iconId:e})=>{const t=Yse[e]||Xe(Xse,{}),n=Jse[e]||lr.t("bivariate.matrix.icon.roads");return Xe(Mb,{tooltipText:n,children:({showTooltip:r,hideTooltip:a})=>Xe("span",{className:qse.denominatorIcon,onPointerOver:r,onPointerLeave:a,children:t})})},Qse=e=>{let t=e;const n=new Set,r=a=>{t=a,n.forEach(c=>c())};return()=>{const[a,c]=mt.useState(t);return mt.useEffect(()=>{const d=()=>{c(t)};return n.add(d),d(),()=>{n.delete(d)}},[]),[a,r]}},ele=Qse({headingId:""}),tle="_denominators_1m5c6_1",nle="_row_1m5c6_5",rle="_column_1m5c6_9",ile="_denominatorSelector_1m5c6_13",ole="_disabled_1m5c6_25",ale="_denominatorsContainer_1m5c6_43",sle="_quotientItem_1m5c6_79",lle="_selected_1m5c6_85",Op={denominators:tle,row:nle,column:rle,denominatorSelector:ile,disabled:ole,denominatorsContainer:ale,quotientItem:sle,selected:lle},ule=({numeratorId:e,denominatorId:t,numeratorLabel:n,quality:r,onSelectQuotient:a,isSelected:c=!1})=>{const d=l=>{l.stopPropagation(),a(e,t)};return mn("div",{className:Ci(Op.quotientItem,c&&Op.selected),onClick:d,children:[Xe(EF,{iconId:t}),sessionStorage.getItem("BIVARIATE_QA_MOD")&&Xe("div",{className:"qualityLabel",children:r??"&nbsp;"}),Xe("div",{className:"quotientLabel",children:n})]})},cle=100/70,hle=5,kF=mt.memo(({id:e,quotients:t,selectedQuotient:n,onSelectQuotient:r,type:a,children:c})=>{const[d,l]=ele(),x=F=>{if(F.stopPropagation(),d.headingId===e)l({headingId:"",width:0});else{const $=F.currentTarget.getBoundingClientRect(),N=F.currentTarget.parentElement.parentElement.getBoundingClientRect(),Z=Math.ceil(($.left-N.left)*cle+hle);l({headingId:e,width:Z})}},b=mt.useCallback((F,$)=>{l({headingId:""}),r(F,$)},[l,r]),[E,A]=mt.useMemo(()=>{const F=t.findIndex(({id:$})=>$[0]===n.id[0]&&$[1]===n.id[1]);return F>=0?[t[F],t.filter(($,N)=>N!==F)]:[null,t]},[t,n.id]),L=({id:F,label:$,quality:N},Z)=>Xe(ule,{onSelectQuotient:b,quality:N,numeratorId:F[0],denominatorId:F[1],numeratorLabel:$,isSelected:Z},JSON.stringify(F));return mn("div",{className:Ci({[Op.denominators]:!0,[Op.row]:a==="horizontal",[Op.column]:a==="vertical"}),children:[Xe("div",{onClick:x,children:c}),d.headingId===e&&mn("div",{className:Op.denominatorsContainer,style:a==="horizontal"?{left:-d.width,right:0}:{top:-d.width,bottom:0},children:[E&&L(E,!0),A.map(F=>L(F,!1))]})]})});kF.displayName="QuotientSelector";const fle="_axisRecord_1dbhd_8",dle="_container_1dbhd_13",ple="_column_1dbhd_34",mle="_row_1dbhd_43",gle="_selected_1dbhd_110",yle="_corner_1dbhd_142",_le="_hovered_1dbhd_146",vle="_verticalText_1dbhd_173",xle="_quotientsCountLabel_1dbhd_185",Vu={axisRecord:fle,container:dle,column:ple,row:mle,selected:gle,corner:yle,hovered:_le,verticalText:vle,quotientsCountLabel:xle},ble=(e,t)=>({gridColumn:e?`${t+3} / ${t+4}`:"1",gridRow:e?"1":`${t+3} / ${t+4}`}),HC=mt.forwardRef(({index:e,type:t,className:n,selectedIndex:r=-1,headerCell:a,id:c,onCellHover:d,onCellClick:l,onSelectQuotient:x,baseDimension:b,calculateHeadingsStyle:E},A)=>{const L=()=>{d(e)},F=()=>{d(null)},$=xe=>{const Oe=xe.target;Oe.tagName==="svg"||Oe.tagName==="path"||Oe.className&&Oe.className.indexOf&&Oe.className.indexOf("denominator")!==-1||l(e,xe)},N=mt.useCallback((xe,Oe)=>{x(e,xe,Oe)},[x,e]),Z=a.quotients.length>1?mn("div",{className:Vu.quotientsCountLabel,children:["+",a.quotients.length-1," layers",Xe(iV,{})]}):null,R=mt.useRef(null);let q=!1,G=!1;const Q=t==="horizontal",se=t==="vertical",ee=Ci({[n||""]:n,[Vu.axisRecord]:!0,[Vu.column]:se,[Vu.row]:Q,[Vu.verticalText]:se,horizontal:Q,vertical:se});function oe(){return`${ee} ${Ci({[Vu.hovered]:q,[Vu.selected]:G})}`}return mt.useImperativeHandle(A,()=>({setHovered:()=>{R.current&&(q=!0,R.current.className=oe())},resetHovered:()=>{R.current&&(q=!1,R.current.className=oe())},setSelectedCol:()=>{se&&R.current&&(G=!0,R.current.className=oe())},resetSelectedCol:()=>{se&&R.current&&(G=!1,R.current.className=oe())},setSelectedRow:()=>{Q&&R.current&&(G=!0,R.current.className=oe())},resetSelectedRow:()=>{Q&&R.current&&(G=!1,R.current.className=oe())}})),Xe("div",{ref:R,onMouseEnter:L,onMouseOut:F,onClick:$,style:ble(t==="vertical",e),className:ee,children:mn("div",{style:E(b,se,e),className:Vu.container,children:[Xe("div",{className:Vu.corner}),Xe(EF,{iconId:a.selectedQuotient.id[1]}),sessionStorage.getItem("BIVARIATE_QA_MOD")&&Xe("div",{className:"qualityLabel",children:a.quality?a.quality:"&nbsp;"}),a.label,Z&&Xe(kF,{id:`quotient_${c}`,onSelectQuotient:N,selectedQuotient:a.selectedQuotient,quotients:a.quotients,type:t,children:Z})]})})});HC.displayName="BivariateMatrixHeadingEntry";const wle="_axisCaptionRoot_1yhrg_1",Sle="_axisCaptionAnchor_1yhrg_6",Cle="_axisCaptionBody_1yhrg_10",Ele="_tooltipHover_1yhrg_24",kle="_axisCaptionText_1yhrg_33",Ale="_popupContent_1yhrg_47",Fp={axisCaptionRoot:wle,axisCaptionAnchor:Sle,axisCaptionBody:Cle,tooltipHover:Ele,axisCaptionText:kle,popupContent:Ale},Tle=mn("div",{className:Fp.axisCaptionText,children:[Xe("p",{children:lr.t("bivariate.matrix.caption.tooltip.p1")}),mn("ul",{children:[Xe("li",{children:lr.t("bivariate.matrix.caption.tooltip.li1")}),Xe("li",{children:lr.t("bivariate.matrix.caption.tooltip.li2")})]}),Xe("br",{}),Xe("b",{children:lr.t("bivariate.matrix.caption.tooltip.b")}),Xe("p",{children:lr.t("bivariate.matrix.caption.tooltip.p2")}),Xe("p",{children:lr.t("bivariate.matrix.caption.tooltip.p3")})]}),Ple={popupContent:Fp.popupContent},Ile=({baseDimension:e=0})=>{const t=mt.useRef(null);return mt.useLayoutEffect(()=>{var n;(n=t.current)==null||n.scrollIntoView({block:"center"})},[]),Xe("div",{className:Fp.axisCaptionRoot,ref:t,children:Xe("div",{className:Fp.axisCaptionAnchor,style:{left:-e},children:Xe(Mb,{hoverBehavior:!1,tooltipId:"axis_caption",tooltipText:Tle,popupClasses:Ple,children:({showTooltip:n})=>mn("div",{className:Fp.axisCaptionBody,children:[Xe(wP,{position:"left"}),Xe("br",{}),mn("div",{className:Fp.tooltipHover,onClick:n,children:[Xe("span",{children:lr.t("bivariate.matrix.caption.base_axis")}),Xe(aV,{}),Xe("span",{children:lr.t("bivariate.matrix.caption.annex_axis")})]}),Xe("br",{}),Xe(wP,{position:"right"})]})})})})},wP=({position:e="left"})=>mn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"22",viewBox:"0 0 6 22",fill:"none",transform:e==="left"?"rotate(90)":"rotate(-90)",children:[Xe("path",{d:"M3 1V20.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),Xe("path",{d:"M1 18L3 21.5L5 18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),Rv=3,Dv=3,Mle=15,AF=({matrix:e,xHeadings:t,yHeadings:n,onSelectCell:r,selectedCell:a,cellSize:c=0,onSelectQuotient:d})=>{const l=mt.useRef(null),x=mt.useContext(_se),b=[],E=[];let A=-1,L=-1;const F=mt.useRef((a==null?void 0:a.x)??-1),$=mt.useRef((a==null?void 0:a.y)??-1),N=_C(yse.setSelectCellCallback),Z=(Ve,_e,we)=>{_e>=0&&(b[_e]||(b[_e]=[]),b[_e].push(Ve)),we>=0&&(E[we]||(E[we]=[]),E[we].push(Ve))},R=(Ve,_e)=>{if(A!==Ve&&(A=Ve,A!==-1)){const we=E[A];we&&we.forEach(K=>{K==null||K.setHovered()})}if(L!==_e&&(L=_e,L!==-1)){const we=b[L];we&&we.forEach(K=>{K==null||K.setHovered()})}},q=()=>{if(A!==-1){const Ve=E[A];Ve&&Ve.forEach(_e=>{_e==null||_e.resetHovered()}),A=-1}if(L!==-1){const Ve=b[L];Ve&&Ve.forEach(_e=>{_e==null||_e.resetHovered()}),L=-1}},G=Ve=>{q(),Ve&&R(Ve,L)},Q=Ve=>{q(),Ve&&R(A,Ve)},se=()=>{if(F.current!==-1){const Ve=E[F.current];Ve&&Ve.forEach(_e=>{_e==null||_e.resetSelectedCol()}),F.current=-1}if($.current!==-1){const Ve=b[$.current];Ve&&Ve.forEach(_e=>{_e==null||_e.resetSelectedRow()}),$.current=-1}},ee=(Ve,_e,we)=>{se(),xe(Ve,_e),r(Ve,_e,we)},oe=(Ve,_e)=>{se(),xe(Ve,_e)},xe=(Ve,_e)=>{if(Ve!==-1&&F.current!==Ve){F.current=Ve;const we=E[F.current];we&&we.forEach(K=>{K==null||K.setSelectedCol()})}if(_e!==-1&&$.current!==_e){$.current=_e;const we=b[$.current];we&&we.forEach(K=>{K==null||K.setSelectedRow()})}},Oe=(Ve,_e)=>{ee(Ve,$.current,_e)},Le=(Ve,_e)=>{ee(F.current,Ve,_e)},qe=mt.useCallback((Ve,_e,we,K)=>{d(!1,Ve,_e,we,K)},[d]),$e=mt.useCallback((Ve,_e,we,K)=>{d(!0,Ve,_e,we,K)},[d]),nt=wse(t,n),pt=Math.sqrt(Math.pow(t.length*ex,2)+Math.pow(n.length*ex,2))*vse+Mle;mt.useEffect(()=>{x==null||x.onMatrixPositionRecalculated(nt,pt),l.current&&(l.current.style.visibility="visible")},[nt]);const At=xse(t.length+1,n.length+1,c),zt=mt.useMemo(()=>({width:pt,height:pt}),[pt]),Vt=mt.useMemo(()=>bse(t.length+Rv,n.length+Dv),[t,n]);return mt.useEffect(()=>{N(oe.bind(void 0)),a&&(a.x!==-1||a.y!==-1)&&oe(a.x,a.y)},[e]),Xe("div",{ref:l,className:bP.matrixContainer,style:zt,children:mn("div",{style:At,className:bP.rotatedMatrix,children:[e.map((Ve,_e)=>Xe(GC,{type:"horizontal",style:Vt[-1+Rv][_e+Dv],ref:we=>Z(we,_e,-1)},`${_e}_row_connector`)),e[0].map((Ve,_e)=>Xe(GC,{type:"vertical",style:Vt[_e+Rv][-1+Dv],ref:we=>Z(we,-1,_e)},`${_e}_col_connector`)),e.map((Ve,_e)=>Ve.map((we,K)=>Xe(CF,{x:K,y:_e,onClick:ee,onMouseOver:R,onMouseOut:q,style:Vt[K+Rv][_e+Dv],ref:ae=>Z(ae,_e,K),value:we===null?void 0:we,disabled:we===null,firstRow:_e===0,firstCol:K===0,lastRow:_e===e.length-1,lastCol:K===Ve.length-1},`matrix_cell_${K}_${_e}`))),[...n].reverse().map((Ve,_e)=>Xe(HC,{id:`hor_${n.length-1-_e}`,index:n.length-1-_e,type:"horizontal",selectedIndex:a==null?void 0:a.y,headerCell:Ve,onCellHover:Q,onCellClick:Le,onSelectQuotient:$e,baseDimension:nt,calculateHeadingsStyle:xP,ref:we=>Z(we,n.length-1-_e,-1)},`hor_${n.length-1-_e}`)),Xe(Ile,{baseDimension:nt}),t.map((Ve,_e)=>Xe(HC,{id:`vert_${_e}`,index:_e,type:"vertical",selectedIndex:a==null?void 0:a.x,headerCell:Ve,onCellHover:G,onCellClick:Oe,onSelectQuotient:qe,baseDimension:nt,calculateHeadingsStyle:xP,ref:we=>Z(we,-1,_e)},`vert_${_e}`))]})})};AF.displayName="BivariateMatrixControl";const Lle=mt.memo(AF,(e,t)=>e.matrix===t.matrix),vs={xGroups:[{parent:'["count","area_km2"]',quotients:[["count","area_km2"]],selectedQuotient:["count","area_km2"]},{parent:'["local_hours","area_km2"]',quotients:[["count","populated_area_km2"],["population_prev","populated_area_km2"],["gdp","populated_area_km2"],["population_prev","area_km2"],["gdp","area_km2"],["mandays_maxtemp_over_32c_1c","populated_area_km2"],["building_count","populated_area_km2"],["mandays_maxtemp_over_32c_1c","area_km2"],["osm_users","area_km2"],["total_hours","populated_area_km2"],["covid19_confirmed","populated_area_km2"],["covid19_confirmed","area_km2"],["osm_users","populated_area_km2"],["local_hours","area_km2"],["local_hours","populated_area_km2"]],selectedQuotient:["local_hours","area_km2"]},{parent:'["building_count","area_km2"]',quotients:[["building_count","area_km2"]],selectedQuotient:["building_count","area_km2"]},{parent:'["total_hours","area_km2"]',quotients:[["total_hours","area_km2"]],selectedQuotient:["total_hours","area_km2"]},{parent:'["highway_length","area_km2"]',quotients:[["total_road_length","area_km2"],["highway_length","area_km2"]],selectedQuotient:["highway_length","area_km2"]},{parent:'["view_count","area_km2"]',quotients:[["view_count","populated_area_km2"],["view_count_bf2402","populated_area_km2"],["view_count","area_km2"],["view_count_bf2402","area_km2"]],selectedQuotient:["view_count","area_km2"]},{parent:'["highway_length","populated_area_km2"]',quotients:[["highway_length","populated_area_km2"]],selectedQuotient:["highway_length","populated_area_km2"]},{parent:'["total_road_length","populated_area_km2"]',quotients:[["total_road_length","populated_area_km2"]],selectedQuotient:["total_road_length","populated_area_km2"]},{parent:'["man_distance_to_hospital","area_km2"]',quotients:[["man_distance_to_hospital","area_km2"]],selectedQuotient:["man_distance_to_hospital","area_km2"]},{parent:'["unknown_forest","total_building_count"]',quotients:[["total_road_length","total_building_count"],["unknown_forest","total_building_count"]],selectedQuotient:["unknown_forest","total_building_count"]},{parent:'["forest","total_building_count"]',quotients:[["highway_length","total_building_count"],["forest","total_building_count"]],selectedQuotient:["forest","total_building_count"]},{parent:'["man_distance_to_hospital","populated_area_km2"]',quotients:[["man_distance_to_hospital","populated_area_km2"]],selectedQuotient:["man_distance_to_hospital","populated_area_km2"]},{parent:'["man_distance_to_fire_brigade","area_km2"]',quotients:[["man_distance_to_fire_brigade","area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","area_km2"]},{parent:'["osm_users","population"]',quotients:[["osm_users","population"]],selectedQuotient:["osm_users","population"]},{parent:'["unknown_forest","population"]',quotients:[["total_road_length","population"],["unknown_forest","population"]],selectedQuotient:["unknown_forest","population"]},{parent:'["count","total_building_count"]',quotients:[["count","total_building_count"]],selectedQuotient:["count","total_building_count"]},{parent:'["highway_length","population"]',quotients:[["forest","population"],["highway_length","population"]],selectedQuotient:["highway_length","population"]},{parent:'["man_distance_to_fire_brigade","populated_area_km2"]',quotients:[["man_distance_to_fire_brigade","populated_area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","populated_area_km2"]}],yGroups:[{parent:'["local_hours","area_km2"]',quotients:[["population","populated_area_km2"],["total_building_count","populated_area_km2"],["count","populated_area_km2"],["population_prev","populated_area_km2"],["total_building_count","area_km2"],["gdp","populated_area_km2"],["mandays_maxtemp_over_32c_1c","populated_area_km2"],["population_prev","area_km2"],["gdp","area_km2"],["building_count","populated_area_km2"],["mandays_maxtemp_over_32c_1c","area_km2"],["total_hours","populated_area_km2"],["osm_users","area_km2"],["covid19_confirmed","populated_area_km2"],["osm_users","populated_area_km2"],["covid19_confirmed","area_km2"],["local_hours","populated_area_km2"],["local_hours","area_km2"]],selectedQuotient:["local_hours","area_km2"]},{parent:'["population","area_km2"]',quotients:[["population","area_km2"]],selectedQuotient:["population","area_km2"]},{parent:'["count","area_km2"]',quotients:[["count","area_km2"]],selectedQuotient:["count","area_km2"]},{parent:'["building_count","area_km2"]',quotients:[["building_count","area_km2"]],selectedQuotient:["building_count","area_km2"]},{parent:'["total_hours","area_km2"]',quotients:[["total_hours","area_km2"]],selectedQuotient:["total_hours","area_km2"]},{parent:'["highway_length","area_km2"]',quotients:[["total_road_length","area_km2"],["highway_length","area_km2"]],selectedQuotient:["highway_length","area_km2"]},{parent:'["view_count","area_km2"]',quotients:[["view_count","populated_area_km2"],["view_count_bf2402","populated_area_km2"],["view_count","area_km2"],["view_count_bf2402","area_km2"]],selectedQuotient:["view_count","area_km2"]},{parent:'["highway_length","populated_area_km2"]',quotients:[["highway_length","populated_area_km2"]],selectedQuotient:["highway_length","populated_area_km2"]},{parent:'["total_road_length","populated_area_km2"]',quotients:[["total_road_length","populated_area_km2"]],selectedQuotient:["total_road_length","populated_area_km2"]},{parent:'["man_distance_to_hospital","area_km2"]',quotients:[["man_distance_to_hospital","area_km2"]],selectedQuotient:["man_distance_to_hospital","area_km2"]},{parent:'["unknown_forest","total_building_count"]',quotients:[["total_road_length","total_building_count"],["unknown_forest","total_building_count"]],selectedQuotient:["unknown_forest","total_building_count"]},{parent:'["forest","total_building_count"]',quotients:[["highway_length","total_building_count"],["forest","total_building_count"]],selectedQuotient:["forest","total_building_count"]},{parent:'["populated_area_km2","area_km2"]',quotients:[["populated_area_km2","area_km2"]],selectedQuotient:["populated_area_km2","area_km2"]},{parent:'["count","population"]',quotients:[["populated_area_km2","population"],["count","population"]],selectedQuotient:["count","population"]},{parent:'["populated_area_km2","total_building_count"]',quotients:[["populated_area_km2","total_building_count"]],selectedQuotient:["populated_area_km2","total_building_count"]},{parent:'["man_distance_to_hospital","populated_area_km2"]',quotients:[["man_distance_to_hospital","populated_area_km2"]],selectedQuotient:["man_distance_to_hospital","populated_area_km2"]},{parent:'["man_distance_to_fire_brigade","area_km2"]',quotients:[["man_distance_to_fire_brigade","area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","area_km2"]},{parent:'["osm_users","population"]',quotients:[["osm_users","population"]],selectedQuotient:["osm_users","population"]},{parent:'["unknown_forest","population"]',quotients:[["total_road_length","population"],["unknown_forest","population"]],selectedQuotient:["unknown_forest","population"]},{parent:'["forest","population"]',quotients:[["highway_length","population"],["forest","population"]],selectedQuotient:["forest","population"]},{parent:'["avg_elevation","one"]',quotients:[["avg_elevation","one"]],selectedQuotient:["avg_elevation","one"]},{parent:'["man_distance_to_fire_brigade","populated_area_km2"]',quotients:[["man_distance_to_fire_brigade","populated_area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","populated_area_km2"]}],matrix:[[.6330778143702572,null,.5428354424212366,.8125028273732107,.41794744630059005,.49075709882519214,.26266841211785613,.17540431775688137,.2817357956135096,-.08277918866628682,-.07354014808858399,.19952042019781102,.2900699030570146,-.09959194444606909,-.05653224901990311,-.08121946780800145,-.06293349539553206,.210717984018573],[.7671266114613431,.4624540160877126,.7461271344307278,.6236796022803118,.4651837775930101,.6983788201180583,.3282268564011803,.23940172696613696,.6102526069773476,-.06854993994184201,-.06300652330464818,.5425853155901724,.5357120339754239,-.12569275885753226,-.05722122475056985,-.044124976285712575,-.07252302728830883,.46170009422253117],[null,.6330778143702572,.9448400352897224,.8088667700993942,.5478619819586914,.7272525499712613,.39403434829318645,.27693369264722456,.4212553882513244,-.09219840214177631,-.08214624778695,.3334796387999488,.3381396079397914,-.11599438338517783,-.0603311321070773,null,-.0709735871498622,.24799941442360907],[.9448400352897224,.5428354424212366,null,.676324490987385,.495437368648744,.6083458288157841,.3469868158515808,.2430950316469889,.4310608323815133,-.09512147612349764,-.08309756332167413,.3452068134908724,.33210650851954204,-.1245886065474142,-.059708735955503585,-.14339940649431673,-.07375589630648925,.24325119232100342],[.8088667700993942,.8125028273732107,.676324490987385,null,.5189347708683577,.6884534708417488,.33187782018548295,.2219184858913333,.35395740401150805,-.09412791983951108,-.0863908043684727,.26082399416277346,.349163057602413,-.0749918701328735,-.06355840786694379,-.06179508212619175,-.06748437844937322,.25841056419208985],[.5478619819586914,.41794744630059005,.495437368648744,.5189347708683577,null,.38324804690465736,null,.414339823397522,.3069414868687711,-.10644082342648567,-.10931575987231072,.2754560009958487,.2569523390521722,-.11051731563471724,-.08226769814606767,.000604231582566239,null,.20899371630213479],[.7272525499712613,.49075709882519214,.6083458288157841,.6884534708417488,.38324804690465736,null,.30947144087595235,.22699474527609945,.2830320630422097,-.04226615774405834,-.037742340113614686,.23762065170375052,.23266705566189747,-.05154149468310855,-.02870286844834339,-.031190214624625075,-.03390072345440923,.18581115270615528],[.39403434829318645,.26266841211785613,.3469868158515808,.33187782018548295,null,.30947144087595235,null,.9304780288243525,.13914319427120514,.3291875622555688,.3720654440390036,.1934927693146689,.10623582254983449,.0007285286560751833,.19378449287322094,.32680720759696696,null,.16809925893975913],[.27693369264722456,.17540431775688137,.2430950316469889,.2219184858913333,.414339823397522,.22699474527609945,.9304780288243525,null,.09020847847993732,.42400942691094484,.5064709774524677,.1712970613845418,.06714970974071707,.01180306783229655,.2255650150706005,.3599655140069753,.30252787549965515,.15970052255248204],[.4212553882513244,.2817357956135096,.4310608323815133,.35395740401150805,.3069414868687711,.2830320630422097,.13914319427120514,.09020847847993732,null,-.06649666693010343,-.06343156740380441,null,.6841527486069171,-.13779469419376966,-.0635847915251171,-.026485710953304663,-.08026301675299034,.6178257434320957],[-.09219840214177631,-.08277918866628682,-.09512147612349764,-.09412791983951108,-.10644082342648567,-.04226615774405834,.3291875622555688,.42400942691094484,-.06649666693010343,null,.7678796845524921,.012760506344240884,-.054701981754940544,.1344540319549378,null,.5631324180563558,.3071029030398512,.04014411156301263],[-.08214624778695,-.07354014808858399,-.08309756332167413,-.0863908043684727,-.10931575987231072,-.037742340113614686,.3720654440390036,.5064709774524677,-.06343156740380441,.7678796845524921,null,.014062866759102748,-.05210682697853124,.11091668928613378,.2990964999949313,.5385399665532266,.22651079092994508,.04521239572328026],[.33092297487284617,.306348164358225,.3238400065207823,.3693496848744186,.38871869483912574,.1581862969025989,-.3471496502086163,-.43374811025089965,.33796301073828167,-.3268410473725932,-.3386739643520862,.055679399245274847,.3020796910928048,-.04623557252911246,-.19287576889960628,-.23886314058329716,-.1732637367181755,.02241746611798094],[null,-.05985205635299918,-.07346388019658537,-.04156216899598115,-.06836488141749311,-.03935680545094748,.12058512533492027,.13212728757237097,-.11270465651638581,.15970627541493335,.13401194122424062,-.12384718246215928,-.10414752849189488,.7574388860132296,.48388350772788513,null,.6315662616124519,-.11571785360027256],[-.2290337466539601,-.1757661352019487,-.24760184223062584,-.18278999260309406,-.1710761141838468,-.09542438099888385,-.059267030345385996,-.013539781630611262,-.09643066932644401,.43854582251146346,.3609544353566733,-.07178405902927397,-.06341025046618942,.22096261180630974,.10541941385096928,.5599627595822098,.1278673522191922,-.032944279661146915],[.3334796387999488,.19952042019781102,.3452068134908724,.26082399416277346,.2754560009958487,.23762065170375052,.1934927693146689,.1712970613845418,null,.012760506344240884,.014062866759102748,null,.6310066640401927,-.1500265206387344,-.06689746899862688,.01986212506899432,-.08550943488376969,.676555546708353],[.3381396079397914,.2900699030570146,.33210650851954204,.349163057602413,.2569523390521722,.23266705566189747,.10623582254983449,.06714970974071707,.6841527486069171,-.054701981754940544,-.05210682697853124,.6310066640401927,null,-.12258332045801432,-.0567307219837807,-.022320716664225384,-.07178249009741255,null],[-.11599438338517783,-.09959194444606909,-.1245886065474142,-.0749918701328735,-.11051731563471724,-.05154149468310855,.0007285286560751833,.01180306783229655,-.13779469419376966,.1344540319549378,.11091668928613378,-.1500265206387344,-.12258332045801432,null,.4348018015155649,.1802672705079899,.5785565720280881,-.1349910962529299],[-.0603311321070773,-.05653224901990311,-.059708735955503585,-.06355840786694379,-.08226769814606767,-.02870286844834339,.19378449287322094,.2255650150706005,-.0635847915251171,null,.2990964999949313,-.06689746899862688,-.0567307219837807,.4348018015155649,null,.16176932292012,.7133807791437314,-.05999313994718329],[-.06778027180778882,-.06094700100554602,-.06749293269532497,-.07015551687145612,-.09380332086205506,-.03214432503025587,.20746554020517102,.2523547017592986,-.07210328538123267,.4203440217106889,null,-.0750002557187531,-.06409549706414985,.49720071299727603,.8986894662282207,.19577005850577103,.7147205376873481,-.06663105366067186],[-.1314723477716716,-.10888331650996384,-.12016811312503141,-.14500851581063834,-.14651760866997154,-.0894267074095959,-.10021629943072725,-.02053796018986287,-.08959271152178999,.07728964320941438,.11382059101409457,-.055901670004619375,-.07981810377749747,.12046075802517535,.07334344740483416,-.020568856117619418,.12080907584004444,-.040957057721220644],[.24799941442360907,.210717984018573,.24325119232100342,.25841056419208985,.20899371630213479,.18581115270615528,.16809925893975913,.15970052255248204,.6178257434320957,.04014411156301263,.04521239572328026,.676555546708353,null,-.1349910962529299,-.05999313994718329,.035960163104143954,-.07699941382657573,null]],indicators:[{name:"mhr_index",label:"Multi-hazard risk PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"mhe_index",label:"Multi-hazard exposure PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"coping_capacity_index",label:"Coping Capacity PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["important","bad"],["good"]]},{name:"resilience_index",label:"Resilience PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["important","bad"],["good"]]},{name:"vulnerability_index",label:"Vulnerability PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"count",label:"OSM Objects",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"count_6_months",label:"OSM Objects (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"view_count",label:"OSM Map Views",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good","important"]]},{name:"avgmax_ts",label:"OSM Last Edit Date (avg)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good"]]},{name:"max_ts",label:"OSM Last Edit Date (max)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good"]]},{name:"min_ts",label:"OSM First Edit Date (min)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["neutral"]]},{name:"osm_users",label:"OSM Mappers Edited Here",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"building_count",label:"OSM Buildings",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"building_count_6_months",label:"OSM Buildings (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"highway_length",label:"OSM Road Length",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"highway_length_6_months",label:"OSM Road Length (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"local_hours",label:"OSM Mapping Hours by Local Mappers",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"total_hours",label:"OSM Mapping Hours by All Mappers",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"pop_disability_total",label:"Population with a disability",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"forest",label:"Forest Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_not_well_eng_speak",label:"Population with a difficulty speaking English",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["good"],["important","bad"]]},{name:"evergreen_needle_leaved_forest",label:"Evergreen Needle-leaved Forest Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_under_5_total",label:"Population under age of 5",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"shrubs",label:"Shrubland Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_over_65_total",label:"Population over age of 65",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"herbage",label:"Herbaceous Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"poverty_families_total",label:"Families living below poverty line",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant, good"],["important"]]},{name:"unknown_forest",label:"Unknown Forest Type Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"volcanos_count",label:"Number of volcanos",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"covid19_vaccines",label:"COVID19 Vaccine Acceptance",copyrights:[" Data from Delphi COVIDcast, covidcast.cmu.edu"],direction:[["bad"],["neutral"]]},{name:"covid19_confirmed",label:"COVID19 Confirmed Cases",copyrights:[" Data from JHU CSSE COVID-19 Dataset"],direction:[["good"],["bad"]]},{name:"avg_slope",label:"Average slope",copyrights:[" Data from General Bathymatric Chart of the Oceans, www.gebco.net"],direction:[["good","unimportant"],["bad","important"]]},{name:"avg_elevation",label:"Average elevation",copyrights:[" Data from General Bathymatric Chart of the Oceans, www.gebco.net"],direction:[["good","unimportant"],["bad","important"]]},{name:"gdp",label:"Gross Domestic Product",copyrights:[" Kontur https://kontur.io/"," 2019 The World Bank Group, CC-BY 4.0","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, Myroslava Lesiv, Nandin-Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","@ OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"population_prev",label:"Population (previous version)",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"wildfires",label:"Wildfire Days Per Year",copyrights:[" NRT VIIRS 375 m Active Fire product VJ114IMGTDL_NRT. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/VIIRS/VJ114IMGT_NRT.002","NRT VIIRS 375 m Active Fire product VNP14IMGT. Available on-line [https://earthdata.nasa.gov/firms]. doi:10.5067/FIRMS/VIIRS/VNP14IMGT_NRT.002","MODIS Collection 6 NRT Hotspot / Active Fire Detections MCD14DL. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/MODIS/MCD14DL.NRT.006","MODIS Collection 6 NRT Hotspot / Active Fire Detections MCD14ML. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/MODIS/MCD14ML"],direction:[["good","unimportant"],["bad","important"]]},{name:"avg_ndvi",label:"Average NDVI, JUN 2019",copyrights:[" Data from Sentinel-2 L2A 120m Mosaic, CC-BY 4.0, https://forum.sentinel-hub.com/c/aws-sentinel"],direction:[["bad"],["good"]]},{name:"industrial_area",label:"OSM industrial area",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"pop_without_car",label:"Population without a car",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["neutral"],["important"]]},{name:"area_km2",label:"Area",copyrights:["Concept of areas  Brahmagupta, Ren Descartes"],direction:[["neutral"],["neutral"]]},{name:"days_maxtemp_over_32c_1c",label:"Days above 32C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxtemp_over_32c_2c",label:"Days above 32C, potential scenario (2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_mintemp_above_25c_1c",label:"Nights above 25C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_mintemp_above_25c_2c",label:"Nights above 25C, potential scenario(2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxwetbulb_over_32c_1c",label:"Days above 32C wet-bulb, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxwetbulb_over_32c_2c",label:"Days above 32C wet-bulb, potential scenario(2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"mandays_maxtemp_over_32c_1c",label:"Man-days above 32C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"man_distance_to_fire_brigade",label:"Man-distance to fire brigade",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["bad"]]},{name:"man_distance_to_hospital",label:"Man-distance to hospitals",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["bad"]]},{name:"total_road_length",label:"Total Roads length",copyrights:["2019 Facebook, Inc. and its affiliates https://github.com/facebookmicrosites/Open-Mapping-At-Facebook/blob/main/LICENSE.md"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"foursquare_places_count",label:"Foursquare Japan places count",copyrights:["Foursquare Labs Inc","Sample data"],direction:[["unimportant"],["important"]]},{name:"foursquare_visits_count",label:"Foursquare Japan visits count",copyrights:["Foursquare Labs Inc","Sample data"],direction:[["unimportant"],["important"]]},{name:"one",label:"1",copyrights:["Numbers  Muammad ibn Ms al-Khwrizm"],direction:[["neutral"],["neutral"]]},{name:"populated_area_km2",label:"Populated area",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"population",label:"Population",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"total_building_count",label:"Total Buildings Estimate",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"view_count_bf2402",label:"OSM Map Views 30 days before 24.02.2022",copyrights:[" Kontur"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good","important"]]}]},Ole="_axisMatrix_caw7e_1",Fle={axisMatrix:Ole},Rle=(e,t)=>{var n,r;return{label:((n=t.find(a=>a.name===e.selectedQuotient[0]))==null?void 0:n.label)||"",selectedQuotient:{id:e.selectedQuotient,label:(r=t.find(a=>a.name===e.selectedQuotient[1]))==null?void 0:r.label},quality:"1",quotients:e.quotients.map(a=>{var c;return{id:a,label:(c=t.find(d=>d.name===a[0]))==null?void 0:c.label,quality:"1"}})}};function Dle(){const e=mt.useMemo(()=>{if(!vs.indicators||!vs.xGroups||!vs.xGroups.length||!vs.yGroups||!vs.yGroups.length)return null;const c=d=>Rle(d,vs==null?void 0:vs.indicators);return{x:vs.xGroups.map(c),y:vs.yGroups.map(c)}},[vs]),[t,n]=mt.useState(null),r=mt.useCallback((c,d,l)=>{console.log("onSelectCellHandler",c,d,l),n({x:c,y:d})},[]),a=mt.useCallback((c,d,l,x)=>{console.log("onSelectQuotient",c,d,l,x)},[]);return Xe("div",{className:Fle.axisMatrix,children:mn(zL,{children:[Xe(Lle,{matrix:vs.matrix,xHeadings:e==null?void 0:e.x,yHeadings:e==null?void 0:e.y,onSelectCell:r,selectedCell:t,onSelectQuotient:a}),Xe(BO,{})]})})}const TF=document.createElement("template");TF.innerHTML=`
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
:host svg {
  z-index: 99;
  position: fixed;
  border: 0px;
  top: 0px;
}
</style>
<svg width="54" height="54" viewBox="0 0 250 250" aria-hidden="true">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;class zle extends HTMLElement{constructor(){super(),this.right="0",this.shadow=this.attachShadow({mode:"open"}),this.shadow.appendChild(this.ownerDocument.importNode(TF.content,!0)),this.update()}static get observedAttributes(){return["style","z-index","target","height","width","href","color","fill","position","top","left","right","bottom","transform"]}setAttr(t,n){const r=this.shadow.querySelector("svg");/(href)/.test(t.toLocaleLowerCase())?r.lastElementChild.setAttribute("xlink:href",n):/(color|fill)/.test(t.toLocaleLowerCase())?r.firstElementChild.style[t]=n:/(z-index|position|top|left|right|bottom|transform)/.test(t.toLocaleLowerCase())?r.style[t]=n:r.setAttribute(t,n)}update(){[...this.getAttributeNames(),"right"].forEach(t=>{const n=this.getAttribute(t)||this[t]||"";this.setAttr(t,n)})}attributeChangedCallback(t,n,r){n!==r&&this.setAttr(t,r)}}customElements.define("github-corners",zle);var Ble=["size","fixed","bottom","zIndex","className","style","bgColor","color","position"];function $le(e){var{size:t=80,fixed:n=!1,bottom:r,zIndex:a,style:c,bgColor:d="#151513",color:l="#fff",position:x="right"}=e,b=ad(e,Ble),E=x==="left"?{left:0,right:"initial",transform:"scale(-1, 1)"}:{right:0,left:"initial",transform:"scale(1, 1)"};return r?(E.bottom=0,E.top="initial",E.transform=x==="left"?"scale(-1, -1)":"scale(1, -1)"):(E.bottom="initial",E.top=0),Xe("github-corners",Io({target:"__blank",width:t,height:t,href:e.href,position:n?"fixed":"absolute","z-index":a,style:c,fill:d,color:l},E,b))}const Nle=({children:e})=>mn(qx,{children:[e,Xe($le,{size:40,href:"https://github.com/konturio/disaster-ninja-fe"})]}),Ule=e=>e.raw[0],jle=Ule`
  .cosmos-ui-kit-decorator {
    padding: 1em;
    display: flex;
    gap: 2em;
    flex-flow: row nowrap;
    align-items: center;
    justify-content: center;
    min-height: 100%;
    box-sizing: border-box;
    background-color: #fff;
    --transp-clr: #f5f5f5;
    background-image: linear-gradient(
        45deg,
        var(--transp-clr) 25%,
        transparent 25%,
        transparent 75%,
        var(--transp-clr) 75%
      ),
      linear-gradient(
        45deg,
        var(--transp-clr) 25%,
        transparent 25%,
        transparent 75%,
        var(--transp-clr) 75%
      );
    background-size: 24px 24px;
    background-position: 0 0, 12px 12px;
  }
`;function Vle({children:e}){return mn(qx,{children:[Xe("style",{dangerouslySetInnerHTML:{__html:jle}}),Xe("div",{className:"cosmos-ui-kit-decorator",children:e})]})}const qle={port:5e3},Gle={"src/components/BivariateLegend/BivariateLegend.fixture.tsx":{module:{default:Aie}},"src/features/bivariate_color_manager/components/MiniLegend/MiniLegend.fixture.tsx":{module:{default:Rie}},"src/features/bivariate_manager/fixtures/BivariateGreetings.fixture.tsx":{module:{default:qie}},"src/features/bivariate_manager/fixtures/BivariateMatrixControl.fixture.tsx":{module:{default:Dle}}},Hle={"cosmos.decorator.tsx":Nle,"src/cosmos.decorator.tsx":Vle};Gj.mountDomRenderer({rendererConfig:qle,decorators:Hle,fixtures:Gle});console.log("Disaster Ninja",Hj);export{Xe as a,mn as j,mt as r};
