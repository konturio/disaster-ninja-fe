var VF=Object.defineProperty;var qF=(e,t,n)=>t in e?VF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var un=(e,t,n)=>(qF(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function UE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HF(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var l=Function.bind.apply(t,s);return new l}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),n}var mt={},GF={get exports(){return mt},set exports(e){mt=e}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=Symbol.for("react.element"),WF=Symbol.for("react.portal"),KF=Symbol.for("react.fragment"),ZF=Symbol.for("react.strict_mode"),XF=Symbol.for("react.profiler"),QF=Symbol.for("react.provider"),YF=Symbol.for("react.context"),JF=Symbol.for("react.forward_ref"),e8=Symbol.for("react.suspense"),t8=Symbol.for("react.memo"),n8=Symbol.for("react.lazy"),cA=Symbol.iterator;function r8(e){return e===null||typeof e!="object"?null:(e=cA&&e[cA]||e["@@iterator"],typeof e=="function"?e:null)}var s6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l6=Object.assign,u6={};function bg(e,t,n){this.props=e,this.context=t,this.refs=u6,this.updater=n||s6}bg.prototype.isReactComponent={};bg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c6(){}c6.prototype=bg.prototype;function jE(e,t,n){this.props=e,this.context=t,this.refs=u6,this.updater=n||s6}var VE=jE.prototype=new c6;VE.constructor=jE;l6(VE,bg.prototype);VE.isPureReactComponent=!0;var fA=Array.isArray,f6=Object.prototype.hasOwnProperty,qE={current:null},p6={key:!0,ref:!0,__self:!0,__source:!0};function h6(e,t,n){var i,s={},l=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)f6.call(t,i)&&!p6.hasOwnProperty(i)&&(s[i]=t[i]);var g=arguments.length-2;if(g===1)s.children=n;else if(1<g){for(var _=Array(g),w=0;w<g;w++)_[w]=arguments[w+2];s.children=_}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)s[i]===void 0&&(s[i]=g[i]);return{$$typeof:Zv,type:e,key:l,ref:a,props:s,_owner:qE.current}}function i8(e,t){return{$$typeof:Zv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function HE(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zv}function o8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pA=/\/+/g;function S2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?o8(""+e.key):t.toString(36)}function C1(e,t,n,i,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Zv:case WF:a=!0}}if(a)return a=e,s=s(a),e=i===""?"."+S2(a,0):i,fA(s)?(n="",e!=null&&(n=e.replace(pA,"$&/")+"/"),C1(s,t,n,"",function(w){return w})):s!=null&&(HE(s)&&(s=i8(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(pA,"$&/")+"/")+e)),t.push(s)),1;if(a=0,i=i===""?".":i+":",fA(e))for(var g=0;g<e.length;g++){l=e[g];var _=i+S2(l,g);a+=C1(l,t,n,_,s)}else if(_=r8(e),typeof _=="function")for(e=_.call(e),g=0;!(l=e.next()).done;)l=l.value,_=i+S2(l,g++),a+=C1(l,t,n,_,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function O0(e,t,n){if(e==null)return e;var i=[],s=0;return C1(e,i,"","",function(l){return t.call(n,l,s++)}),i}function a8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var os={current:null},E1={transition:null},s8={ReactCurrentDispatcher:os,ReactCurrentBatchConfig:E1,ReactCurrentOwner:qE};fr.Children={map:O0,forEach:function(e,t,n){O0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O0(e,function(){t++}),t},toArray:function(e){return O0(e,function(t){return t})||[]},only:function(e){if(!HE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fr.Component=bg;fr.Fragment=KF;fr.Profiler=XF;fr.PureComponent=jE;fr.StrictMode=ZF;fr.Suspense=e8;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s8;fr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=l6({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=qE.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(_ in t)f6.call(t,_)&&!p6.hasOwnProperty(_)&&(i[_]=t[_]===void 0&&g!==void 0?g[_]:t[_])}var _=arguments.length-2;if(_===1)i.children=n;else if(1<_){g=Array(_);for(var w=0;w<_;w++)g[w]=arguments[w+2];i.children=g}return{$$typeof:Zv,type:e.type,key:s,ref:l,props:i,_owner:a}};fr.createContext=function(e){return e={$$typeof:YF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QF,_context:e},e.Consumer=e};fr.createElement=h6;fr.createFactory=function(e){var t=h6.bind(null,e);return t.type=e,t};fr.createRef=function(){return{current:null}};fr.forwardRef=function(e){return{$$typeof:JF,render:e}};fr.isValidElement=HE;fr.lazy=function(e){return{$$typeof:n8,_payload:{_status:-1,_result:e},_init:a8}};fr.memo=function(e,t){return{$$typeof:t8,type:e,compare:t===void 0?null:t}};fr.startTransition=function(e){var t=E1.transition;E1.transition={};try{e()}finally{E1.transition=t}};fr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};fr.useCallback=function(e,t){return os.current.useCallback(e,t)};fr.useContext=function(e){return os.current.useContext(e)};fr.useDebugValue=function(){};fr.useDeferredValue=function(e){return os.current.useDeferredValue(e)};fr.useEffect=function(e,t){return os.current.useEffect(e,t)};fr.useId=function(){return os.current.useId()};fr.useImperativeHandle=function(e,t,n){return os.current.useImperativeHandle(e,t,n)};fr.useInsertionEffect=function(e,t){return os.current.useInsertionEffect(e,t)};fr.useLayoutEffect=function(e,t){return os.current.useLayoutEffect(e,t)};fr.useMemo=function(e,t){return os.current.useMemo(e,t)};fr.useReducer=function(e,t,n){return os.current.useReducer(e,t,n)};fr.useRef=function(e){return os.current.useRef(e)};fr.useState=function(e){return os.current.useState(e)};fr.useSyncExternalStore=function(e,t,n){return os.current.useSyncExternalStore(e,t,n)};fr.useTransition=function(){return os.current.useTransition()};fr.version="18.2.0";(function(e){e.exports=fr})(GF);const hn=UE(mt);var DS={},l8={get exports(){return DS},set exports(e){DS=e}},hA={},u8={get exports(){return hA},set exports(e){hA=e}};(function(e){var t=function(n){var i=Object.prototype,s=i.hasOwnProperty,l=Object.defineProperty||function(ve,_e,K){ve[_e]=K.value},a,g=typeof Symbol=="function"?Symbol:{},_=g.iterator||"@@iterator",w=g.asyncIterator||"@@asyncIterator",C=g.toStringTag||"@@toStringTag";function A(ve,_e,K){return Object.defineProperty(ve,_e,{value:K,enumerable:!0,configurable:!0,writable:!0}),ve[_e]}try{A({},"")}catch{A=function(_e,K,ae){return _e[K]=ae}}function I(ve,_e,K,ae){var lt=_e&&_e.prototype instanceof q?_e:q,Ot=Object.create(lt.prototype),Ht=new Dt(ae||[]);return l(Ot,"_invoke",{value:Ge(ve,K,Ht)}),Ot}n.wrap=I;function O(ve,_e,K){try{return{type:"normal",arg:ve.call(_e,K)}}catch(ae){return{type:"throw",arg:ae}}}var D="suspendedStart",B="suspendedYield",H="executing",R="completed",U={};function q(){}function Y(){}function se(){}var W={};A(W,_,function(){return this});var ce=Object.getPrototypeOf,xe=ce&&ce(ce(qt([])));xe&&xe!==i&&s.call(xe,_)&&(W=xe);var Me=se.prototype=q.prototype=Object.create(W);Y.prototype=se,l(Me,"constructor",{value:se,configurable:!0}),l(se,"constructor",{value:Y,configurable:!0}),Y.displayName=A(se,C,"GeneratorFunction");function $e(ve){["next","throw","return"].forEach(function(_e){A(ve,_e,function(K){return this._invoke(_e,K)})})}n.isGeneratorFunction=function(ve){var _e=typeof ve=="function"&&ve.constructor;return _e?_e===Y||(_e.displayName||_e.name)==="GeneratorFunction":!1},n.mark=function(ve){return Object.setPrototypeOf?Object.setPrototypeOf(ve,se):(ve.__proto__=se,A(ve,C,"GeneratorFunction")),ve.prototype=Object.create(Me),ve},n.awrap=function(ve){return{__await:ve}};function Le(ve,_e){function K(Ot,Ht,Ut,Kt){var cn=O(ve[Ot],ve,Ht);if(cn.type==="throw")Kt(cn.arg);else{var sn=cn.arg,wr=sn.value;return wr&&typeof wr=="object"&&s.call(wr,"__await")?_e.resolve(wr.__await).then(function(pr){K("next",pr,Ut,Kt)},function(pr){K("throw",pr,Ut,Kt)}):_e.resolve(wr).then(function(pr){sn.value=pr,Ut(sn)},function(pr){return K("throw",pr,Ut,Kt)})}}var ae;function lt(Ot,Ht){function Ut(){return new _e(function(Kt,cn){K(Ot,Ht,Kt,cn)})}return ae=ae?ae.then(Ut,Ut):Ut()}l(this,"_invoke",{value:lt})}$e(Le.prototype),A(Le.prototype,w,function(){return this}),n.AsyncIterator=Le,n.async=function(ve,_e,K,ae,lt){lt===void 0&&(lt=Promise);var Ot=new Le(I(ve,_e,K,ae),lt);return n.isGeneratorFunction(_e)?Ot:Ot.next().then(function(Ht){return Ht.done?Ht.value:Ot.next()})};function Ge(ve,_e,K){var ae=D;return function(Ot,Ht){if(ae===H)throw new Error("Generator is already running");if(ae===R){if(Ot==="throw")throw Ht;return Ne()}for(K.method=Ot,K.arg=Ht;;){var Ut=K.delegate;if(Ut){var Kt=Ye(Ut,K);if(Kt){if(Kt===U)continue;return Kt}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(ae===D)throw ae=R,K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);ae=H;var cn=O(ve,_e,K);if(cn.type==="normal"){if(ae=K.done?R:B,cn.arg===U)continue;return{value:cn.arg,done:K.done}}else cn.type==="throw"&&(ae=R,K.method="throw",K.arg=cn.arg)}}}function Ye(ve,_e){var K=_e.method,ae=ve.iterator[K];if(ae===a)return _e.delegate=null,K==="throw"&&ve.iterator.return&&(_e.method="return",_e.arg=a,Ye(ve,_e),_e.method==="throw")||K!=="return"&&(_e.method="throw",_e.arg=new TypeError("The iterator does not provide a '"+K+"' method")),U;var lt=O(ae,ve.iterator,_e.arg);if(lt.type==="throw")return _e.method="throw",_e.arg=lt.arg,_e.delegate=null,U;var Ot=lt.arg;if(!Ot)return _e.method="throw",_e.arg=new TypeError("iterator result is not an object"),_e.delegate=null,U;if(Ot.done)_e[ve.resultName]=Ot.value,_e.next=ve.nextLoc,_e.method!=="return"&&(_e.method="next",_e.arg=a);else return Ot;return _e.delegate=null,U}$e(Me),A(Me,C,"Generator"),A(Me,_,function(){return this}),A(Me,"toString",function(){return"[object Generator]"});function ht(ve){var _e={tryLoc:ve[0]};1 in ve&&(_e.catchLoc=ve[1]),2 in ve&&(_e.finallyLoc=ve[2],_e.afterLoc=ve[3]),this.tryEntries.push(_e)}function Lt(ve){var _e=ve.completion||{};_e.type="normal",delete _e.arg,ve.completion=_e}function Dt(ve){this.tryEntries=[{tryLoc:"root"}],ve.forEach(ht,this),this.reset(!0)}n.keys=function(ve){var _e=Object(ve),K=[];for(var ae in _e)K.push(ae);return K.reverse(),function lt(){for(;K.length;){var Ot=K.pop();if(Ot in _e)return lt.value=Ot,lt.done=!1,lt}return lt.done=!0,lt}};function qt(ve){if(ve){var _e=ve[_];if(_e)return _e.call(ve);if(typeof ve.next=="function")return ve;if(!isNaN(ve.length)){var K=-1,ae=function lt(){for(;++K<ve.length;)if(s.call(ve,K))return lt.value=ve[K],lt.done=!1,lt;return lt.value=a,lt.done=!0,lt};return ae.next=ae}}return{next:Ne}}n.values=qt;function Ne(){return{value:a,done:!0}}return Dt.prototype={constructor:Dt,reset:function(ve){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Lt),!ve)for(var _e in this)_e.charAt(0)==="t"&&s.call(this,_e)&&!isNaN(+_e.slice(1))&&(this[_e]=a)},stop:function(){this.done=!0;var ve=this.tryEntries[0],_e=ve.completion;if(_e.type==="throw")throw _e.arg;return this.rval},dispatchException:function(ve){if(this.done)throw ve;var _e=this;function K(Kt,cn){return Ot.type="throw",Ot.arg=ve,_e.next=Kt,cn&&(_e.method="next",_e.arg=a),!!cn}for(var ae=this.tryEntries.length-1;ae>=0;--ae){var lt=this.tryEntries[ae],Ot=lt.completion;if(lt.tryLoc==="root")return K("end");if(lt.tryLoc<=this.prev){var Ht=s.call(lt,"catchLoc"),Ut=s.call(lt,"finallyLoc");if(Ht&&Ut){if(this.prev<lt.catchLoc)return K(lt.catchLoc,!0);if(this.prev<lt.finallyLoc)return K(lt.finallyLoc)}else if(Ht){if(this.prev<lt.catchLoc)return K(lt.catchLoc,!0)}else if(Ut){if(this.prev<lt.finallyLoc)return K(lt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(ve,_e){for(var K=this.tryEntries.length-1;K>=0;--K){var ae=this.tryEntries[K];if(ae.tryLoc<=this.prev&&s.call(ae,"finallyLoc")&&this.prev<ae.finallyLoc){var lt=ae;break}}lt&&(ve==="break"||ve==="continue")&&lt.tryLoc<=_e&&_e<=lt.finallyLoc&&(lt=null);var Ot=lt?lt.completion:{};return Ot.type=ve,Ot.arg=_e,lt?(this.method="next",this.next=lt.finallyLoc,U):this.complete(Ot)},complete:function(ve,_e){if(ve.type==="throw")throw ve.arg;return ve.type==="break"||ve.type==="continue"?this.next=ve.arg:ve.type==="return"?(this.rval=this.arg=ve.arg,this.method="return",this.next="end"):ve.type==="normal"&&_e&&(this.next=_e),U},finish:function(ve){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var K=this.tryEntries[_e];if(K.finallyLoc===ve)return this.complete(K.completion,K.afterLoc),Lt(K),U}},catch:function(ve){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var K=this.tryEntries[_e];if(K.tryLoc===ve){var ae=K.completion;if(ae.type==="throw"){var lt=ae.arg;Lt(K)}return lt}}throw new Error("illegal catch attempt")},delegateYield:function(ve,_e,K){return this.delegate={iterator:qt(ve),resultName:_e,nextLoc:K},this.method==="next"&&(this.arg=a),U}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(u8);var d6={},zS={},hv={},c8={get exports(){return hv},set exports(e){hv=e}},tl={},BS={},f8={get exports(){return BS},set exports(e){BS=e}},m6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,ve){var _e=Ne.length;Ne.push(ve);e:for(;0<_e;){var K=_e-1>>>1,ae=Ne[K];if(0<s(ae,ve))Ne[K]=ve,Ne[_e]=ae,_e=K;else break e}}function n(Ne){return Ne.length===0?null:Ne[0]}function i(Ne){if(Ne.length===0)return null;var ve=Ne[0],_e=Ne.pop();if(_e!==ve){Ne[0]=_e;e:for(var K=0,ae=Ne.length,lt=ae>>>1;K<lt;){var Ot=2*(K+1)-1,Ht=Ne[Ot],Ut=Ot+1,Kt=Ne[Ut];if(0>s(Ht,_e))Ut<ae&&0>s(Kt,Ht)?(Ne[K]=Kt,Ne[Ut]=_e,K=Ut):(Ne[K]=Ht,Ne[Ot]=_e,K=Ot);else if(Ut<ae&&0>s(Kt,_e))Ne[K]=Kt,Ne[Ut]=_e,K=Ut;else break e}}return ve}function s(Ne,ve){var _e=Ne.sortIndex-ve.sortIndex;return _e!==0?_e:Ne.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,g=a.now();e.unstable_now=function(){return a.now()-g}}var _=[],w=[],C=1,A=null,I=3,O=!1,D=!1,B=!1,H=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(Ne){for(var ve=n(w);ve!==null;){if(ve.callback===null)i(w);else if(ve.startTime<=Ne)i(w),ve.sortIndex=ve.expirationTime,t(_,ve);else break;ve=n(w)}}function Y(Ne){if(B=!1,q(Ne),!D)if(n(_)!==null)D=!0,Dt(se);else{var ve=n(w);ve!==null&&qt(Y,ve.startTime-Ne)}}function se(Ne,ve){D=!1,B&&(B=!1,R(xe),xe=-1),O=!0;var _e=I;try{for(q(ve),A=n(_);A!==null&&(!(A.expirationTime>ve)||Ne&&!Le());){var K=A.callback;if(typeof K=="function"){A.callback=null,I=A.priorityLevel;var ae=K(A.expirationTime<=ve);ve=e.unstable_now(),typeof ae=="function"?A.callback=ae:A===n(_)&&i(_),q(ve)}else i(_);A=n(_)}if(A!==null)var lt=!0;else{var Ot=n(w);Ot!==null&&qt(Y,Ot.startTime-ve),lt=!1}return lt}finally{A=null,I=_e,O=!1}}var W=!1,ce=null,xe=-1,Me=5,$e=-1;function Le(){return!(e.unstable_now()-$e<Me)}function Ge(){if(ce!==null){var Ne=e.unstable_now();$e=Ne;var ve=!0;try{ve=ce(!0,Ne)}finally{ve?Ye():(W=!1,ce=null)}}else W=!1}var Ye;if(typeof U=="function")Ye=function(){U(Ge)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,Lt=ht.port2;ht.port1.onmessage=Ge,Ye=function(){Lt.postMessage(null)}}else Ye=function(){H(Ge,0)};function Dt(Ne){ce=Ne,W||(W=!0,Ye())}function qt(Ne,ve){xe=H(function(){Ne(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){D||O||(D=!0,Dt(se))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return n(_)},e.unstable_next=function(Ne){switch(I){case 1:case 2:case 3:var ve=3;break;default:ve=I}var _e=I;I=ve;try{return Ne()}finally{I=_e}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,ve){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var _e=I;I=Ne;try{return ve()}finally{I=_e}},e.unstable_scheduleCallback=function(Ne,ve,_e){var K=e.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?K+_e:K):_e=K,Ne){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=_e+ae,Ne={id:C++,callback:ve,priorityLevel:Ne,startTime:_e,expirationTime:ae,sortIndex:-1},_e>K?(Ne.sortIndex=_e,t(w,Ne),n(_)===null&&Ne===n(w)&&(B?(R(xe),xe=-1):B=!0,qt(Y,_e-K))):(Ne.sortIndex=ae,t(_,Ne),D||O||(D=!0,Dt(se))),Ne},e.unstable_shouldYield=Le,e.unstable_wrapCallback=function(Ne){var ve=I;return function(){var _e=I;I=ve;try{return Ne.apply(this,arguments)}finally{I=_e}}}})(m6);(function(e){e.exports=m6})(f8);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g6=mt,el=BS;function Ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y6=new Set,dv={};function xd(e,t){cg(e,t),cg(e+"Capture",t)}function cg(e,t){for(dv[e]=t,e=0;e<t.length;e++)y6.add(t[e])}var gf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NS=Object.prototype.hasOwnProperty,p8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dA={},mA={};function h8(e){return NS.call(mA,e)?!0:NS.call(dA,e)?!1:p8.test(e)?mA[e]=!0:(dA[e]=!0,!1)}function d8(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function m8(e,t,n,i){if(t===null||typeof t>"u"||d8(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function as(e,t,n,i,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var Sa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Sa[e]=new as(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Sa[t]=new as(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Sa[e]=new as(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Sa[e]=new as(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Sa[e]=new as(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Sa[e]=new as(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Sa[e]=new as(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Sa[e]=new as(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Sa[e]=new as(e,5,!1,e.toLowerCase(),null,!1,!1)});var GE=/[\-:]([a-z])/g;function WE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(GE,WE);Sa[t]=new as(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(GE,WE);Sa[t]=new as(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(GE,WE);Sa[t]=new as(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Sa[e]=new as(e,1,!1,e.toLowerCase(),null,!1,!1)});Sa.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Sa[e]=new as(e,1,!1,e.toLowerCase(),null,!0,!0)});function KE(e,t,n,i){var s=Sa.hasOwnProperty(t)?Sa[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(m8(t,n,s,i)&&(n=null),i||s===null?h8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var bf=g6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L0=Symbol.for("react.element"),Bm=Symbol.for("react.portal"),Nm=Symbol.for("react.fragment"),ZE=Symbol.for("react.strict_mode"),$S=Symbol.for("react.profiler"),v6=Symbol.for("react.provider"),_6=Symbol.for("react.context"),XE=Symbol.for("react.forward_ref"),US=Symbol.for("react.suspense"),jS=Symbol.for("react.suspense_list"),QE=Symbol.for("react.memo"),Cp=Symbol.for("react.lazy"),x6=Symbol.for("react.offscreen"),gA=Symbol.iterator;function xy(e){return e===null||typeof e!="object"?null:(e=gA&&e[gA]||e["@@iterator"],typeof e=="function"?e:null)}var ji=Object.assign,C2;function jy(e){if(C2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);C2=t&&t[1]||""}return`
`+C2+e}var E2=!1;function k2(e,t){if(!e||E2)return"";E2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var i=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){i=w}e.call(t.prototype)}else{try{throw Error()}catch(w){i=w}e()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var s=w.stack.split(`
`),l=i.stack.split(`
`),a=s.length-1,g=l.length-1;1<=a&&0<=g&&s[a]!==l[g];)g--;for(;1<=a&&0<=g;a--,g--)if(s[a]!==l[g]){if(a!==1||g!==1)do if(a--,g--,0>g||s[a]!==l[g]){var _=`
`+s[a].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=a&&0<=g);break}}}finally{E2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jy(e):""}function g8(e){switch(e.tag){case 5:return jy(e.type);case 16:return jy("Lazy");case 13:return jy("Suspense");case 19:return jy("SuspenseList");case 0:case 2:case 15:return e=k2(e.type,!1),e;case 11:return e=k2(e.type.render,!1),e;case 1:return e=k2(e.type,!0),e;default:return""}}function VS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nm:return"Fragment";case Bm:return"Portal";case $S:return"Profiler";case ZE:return"StrictMode";case US:return"Suspense";case jS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _6:return(e.displayName||"Context")+".Consumer";case v6:return(e._context.displayName||"Context")+".Provider";case XE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case QE:return t=e.displayName||null,t!==null?t:VS(e.type)||"Memo";case Cp:t=e._payload,e=e._init;try{return VS(e(t))}catch{}}return null}function y8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VS(t);case 8:return t===ZE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wp(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function b6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function v8(e){var t=b6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function M0(e){e._valueTracker||(e._valueTracker=v8(e))}function w6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=b6(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function G1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qS(e,t){var n=t.checked;return ji({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yA(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Wp(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function S6(e,t){t=t.checked,t!=null&&KE(e,"checked",t,!1)}function HS(e,t){S6(e,t);var n=Wp(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?GS(e,t.type,n):t.hasOwnProperty("defaultValue")&&GS(e,t.type,Wp(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vA(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function GS(e,t,n){(t!=="number"||G1(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vy=Array.isArray;function Jm(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Wp(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function WS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ct(91));return ji({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _A(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ct(92));if(Vy(n)){if(1<n.length)throw Error(Ct(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Wp(n)}}function C6(e,t){var n=Wp(t.value),i=Wp(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function xA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function KS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var R0,k6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(R0=R0||document.createElement("div"),R0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=R0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mv(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_8=["Webkit","ms","Moz","O"];Object.keys(Zy).forEach(function(e){_8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zy[t]=Zy[e]})});function A6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zy.hasOwnProperty(e)&&Zy[e]?(""+t).trim():t+"px"}function P6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=A6(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var x8=ji({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZS(e,t){if(t){if(x8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ct(62))}}function XS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QS=null;function YE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var YS=null,eg=null,tg=null;function bA(e){if(e=Yv(e)){if(typeof YS!="function")throw Error(Ct(280));var t=e.stateNode;t&&(t=tb(t),YS(e.stateNode,e.type,t))}}function T6(e){eg?tg?tg.push(e):tg=[e]:eg=e}function I6(){if(eg){var e=eg,t=tg;if(tg=eg=null,bA(e),t)for(e=0;e<t.length;e++)bA(t[e])}}function O6(e,t){return e(t)}function L6(){}var A2=!1;function M6(e,t,n){if(A2)return e(t,n);A2=!0;try{return O6(e,t,n)}finally{A2=!1,(eg!==null||tg!==null)&&(L6(),I6())}}function gv(e,t){var n=e.stateNode;if(n===null)return null;var i=tb(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ct(231,t,typeof n));return n}var JS=!1;if(gf)try{var by={};Object.defineProperty(by,"passive",{get:function(){JS=!0}}),window.addEventListener("test",by,by),window.removeEventListener("test",by,by)}catch{JS=!1}function b8(e,t,n,i,s,l,a,g,_){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(C){this.onError(C)}}var Xy=!1,W1=null,K1=!1,eC=null,w8={onError:function(e){Xy=!0,W1=e}};function S8(e,t,n,i,s,l,a,g,_){Xy=!1,W1=null,b8.apply(w8,arguments)}function C8(e,t,n,i,s,l,a,g,_){if(S8.apply(this,arguments),Xy){if(Xy){var w=W1;Xy=!1,W1=null}else throw Error(Ct(198));K1||(K1=!0,eC=w)}}function bd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function R6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wA(e){if(bd(e)!==e)throw Error(Ct(188))}function E8(e){var t=e.alternate;if(!t){if(t=bd(e),t===null)throw Error(Ct(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return wA(s),e;if(l===i)return wA(s),t;l=l.sibling}throw Error(Ct(188))}if(n.return!==i.return)n=s,i=l;else{for(var a=!1,g=s.child;g;){if(g===n){a=!0,n=s,i=l;break}if(g===i){a=!0,i=s,n=l;break}g=g.sibling}if(!a){for(g=l.child;g;){if(g===n){a=!0,n=l,i=s;break}if(g===i){a=!0,i=l,n=s;break}g=g.sibling}if(!a)throw Error(Ct(189))}}if(n.alternate!==i)throw Error(Ct(190))}if(n.tag!==3)throw Error(Ct(188));return n.stateNode.current===n?e:t}function F6(e){return e=E8(e),e!==null?D6(e):null}function D6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=D6(e);if(t!==null)return t;e=e.sibling}return null}var z6=el.unstable_scheduleCallback,SA=el.unstable_cancelCallback,k8=el.unstable_shouldYield,A8=el.unstable_requestPaint,mo=el.unstable_now,P8=el.unstable_getCurrentPriorityLevel,JE=el.unstable_ImmediatePriority,B6=el.unstable_UserBlockingPriority,Z1=el.unstable_NormalPriority,T8=el.unstable_LowPriority,N6=el.unstable_IdlePriority,Qx=null,ic=null;function I8(e){if(ic&&typeof ic.onCommitFiberRoot=="function")try{ic.onCommitFiberRoot(Qx,e,void 0,(e.current.flags&128)===128)}catch{}}var wu=Math.clz32?Math.clz32:M8,O8=Math.log,L8=Math.LN2;function M8(e){return e>>>=0,e===0?32:31-(O8(e)/L8|0)|0}var F0=64,D0=4194304;function qy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function X1(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var g=a&~s;g!==0?i=qy(g):(l&=a,l!==0&&(i=qy(l)))}else a=n&~s,a!==0?i=qy(a):l!==0&&(i=qy(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-wu(t),s=1<<n,i|=e[n],t&=~s;return i}function R8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F8(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-wu(l),g=1<<a,_=s[a];_===-1?(!(g&n)||g&i)&&(s[a]=R8(g,t)):_<=t&&(e.expiredLanes|=g),l&=~g}}function tC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $6(){var e=F0;return F0<<=1,!(F0&4194240)&&(F0=64),e}function P2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wu(t),e[t]=n}function D8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-wu(n),l=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~l}}function e3(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-wu(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var qr=0;function U6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var j6,t3,V6,q6,H6,nC=!1,z0=[],Dp=null,zp=null,Bp=null,yv=new Map,vv=new Map,Pp=[],z8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CA(e,t){switch(e){case"focusin":case"focusout":Dp=null;break;case"dragenter":case"dragleave":zp=null;break;case"mouseover":case"mouseout":Bp=null;break;case"pointerover":case"pointerout":yv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vv.delete(t.pointerId)}}function wy(e,t,n,i,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Yv(t),t!==null&&t3(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function B8(e,t,n,i,s){switch(t){case"focusin":return Dp=wy(Dp,e,t,n,i,s),!0;case"dragenter":return zp=wy(zp,e,t,n,i,s),!0;case"mouseover":return Bp=wy(Bp,e,t,n,i,s),!0;case"pointerover":var l=s.pointerId;return yv.set(l,wy(yv.get(l)||null,e,t,n,i,s)),!0;case"gotpointercapture":return l=s.pointerId,vv.set(l,wy(vv.get(l)||null,e,t,n,i,s)),!0}return!1}function G6(e){var t=td(e.target);if(t!==null){var n=bd(t);if(n!==null){if(t=n.tag,t===13){if(t=R6(n),t!==null){e.blockedOn=t,H6(e.priority,function(){V6(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function k1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);QS=i,n.target.dispatchEvent(i),QS=null}else return t=Yv(n),t!==null&&t3(t),e.blockedOn=n,!1;t.shift()}return!0}function EA(e,t,n){k1(e)&&n.delete(t)}function N8(){nC=!1,Dp!==null&&k1(Dp)&&(Dp=null),zp!==null&&k1(zp)&&(zp=null),Bp!==null&&k1(Bp)&&(Bp=null),yv.forEach(EA),vv.forEach(EA)}function Sy(e,t){e.blockedOn===t&&(e.blockedOn=null,nC||(nC=!0,el.unstable_scheduleCallback(el.unstable_NormalPriority,N8)))}function _v(e){function t(s){return Sy(s,e)}if(0<z0.length){Sy(z0[0],e);for(var n=1;n<z0.length;n++){var i=z0[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Dp!==null&&Sy(Dp,e),zp!==null&&Sy(zp,e),Bp!==null&&Sy(Bp,e),yv.forEach(t),vv.forEach(t),n=0;n<Pp.length;n++)i=Pp[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Pp.length&&(n=Pp[0],n.blockedOn===null);)G6(n),n.blockedOn===null&&Pp.shift()}var ng=bf.ReactCurrentBatchConfig,Q1=!0;function $8(e,t,n,i){var s=qr,l=ng.transition;ng.transition=null;try{qr=1,n3(e,t,n,i)}finally{qr=s,ng.transition=l}}function U8(e,t,n,i){var s=qr,l=ng.transition;ng.transition=null;try{qr=4,n3(e,t,n,i)}finally{qr=s,ng.transition=l}}function n3(e,t,n,i){if(Q1){var s=rC(e,t,n,i);if(s===null)B2(e,t,i,Y1,n),CA(e,i);else if(B8(s,e,t,n,i))i.stopPropagation();else if(CA(e,i),t&4&&-1<z8.indexOf(e)){for(;s!==null;){var l=Yv(s);if(l!==null&&j6(l),l=rC(e,t,n,i),l===null&&B2(e,t,i,Y1,n),l===s)break;s=l}s!==null&&i.stopPropagation()}else B2(e,t,i,null,n)}}var Y1=null;function rC(e,t,n,i){if(Y1=null,e=YE(i),e=td(e),e!==null)if(t=bd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=R6(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Y1=e,null}function W6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P8()){case JE:return 1;case B6:return 4;case Z1:case T8:return 16;case N6:return 536870912;default:return 16}default:return 16}}var Op=null,r3=null,A1=null;function K6(){if(A1)return A1;var e,t=r3,n=t.length,i,s="value"in Op?Op.value:Op.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[l-i];i++);return A1=s.slice(e,1<i?1-i:void 0)}function P1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B0(){return!0}function kA(){return!1}function nl(e){function t(n,i,s,l,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?B0:kA,this.isPropagationStopped=kA,this}return ji(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=B0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=B0)},persist:function(){},isPersistent:B0}),t}var wg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i3=nl(wg),Qv=ji({},wg,{view:0,detail:0}),j8=nl(Qv),T2,I2,Cy,Yx=ji({},Qv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o3,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cy&&(Cy&&e.type==="mousemove"?(T2=e.screenX-Cy.screenX,I2=e.screenY-Cy.screenY):I2=T2=0,Cy=e),T2)},movementY:function(e){return"movementY"in e?e.movementY:I2}}),AA=nl(Yx),V8=ji({},Yx,{dataTransfer:0}),q8=nl(V8),H8=ji({},Qv,{relatedTarget:0}),O2=nl(H8),G8=ji({},wg,{animationName:0,elapsedTime:0,pseudoElement:0}),W8=nl(G8),K8=ji({},wg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Z8=nl(K8),X8=ji({},wg,{data:0}),PA=nl(X8),Q8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=J8[e])?!!t[e]:!1}function o3(){return eD}var tD=ji({},Qv,{key:function(e){if(e.key){var t=Q8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=P1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Y8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o3,charCode:function(e){return e.type==="keypress"?P1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?P1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nD=nl(tD),rD=ji({},Yx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TA=nl(rD),iD=ji({},Qv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o3}),oD=nl(iD),aD=ji({},wg,{propertyName:0,elapsedTime:0,pseudoElement:0}),sD=nl(aD),lD=ji({},Yx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uD=nl(lD),cD=[9,13,27,32],a3=gf&&"CompositionEvent"in window,Qy=null;gf&&"documentMode"in document&&(Qy=document.documentMode);var fD=gf&&"TextEvent"in window&&!Qy,Z6=gf&&(!a3||Qy&&8<Qy&&11>=Qy),IA=String.fromCharCode(32),OA=!1;function X6(e,t){switch(e){case"keyup":return cD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $m=!1;function pD(e,t){switch(e){case"compositionend":return Q6(t);case"keypress":return t.which!==32?null:(OA=!0,IA);case"textInput":return e=t.data,e===IA&&OA?null:e;default:return null}}function hD(e,t){if($m)return e==="compositionend"||!a3&&X6(e,t)?(e=K6(),A1=r3=Op=null,$m=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Z6&&t.locale!=="ko"?null:t.data;default:return null}}var dD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dD[e.type]:t==="textarea"}function Y6(e,t,n,i){T6(i),t=J1(t,"onChange"),0<t.length&&(n=new i3("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yy=null,xv=null;function mD(e){uI(e,0)}function Jx(e){var t=Vm(e);if(w6(t))return e}function gD(e,t){if(e==="change")return t}var J6=!1;if(gf){var L2;if(gf){var M2="oninput"in document;if(!M2){var MA=document.createElement("div");MA.setAttribute("oninput","return;"),M2=typeof MA.oninput=="function"}L2=M2}else L2=!1;J6=L2&&(!document.documentMode||9<document.documentMode)}function RA(){Yy&&(Yy.detachEvent("onpropertychange",eI),xv=Yy=null)}function eI(e){if(e.propertyName==="value"&&Jx(xv)){var t=[];Y6(t,xv,e,YE(e)),M6(mD,t)}}function yD(e,t,n){e==="focusin"?(RA(),Yy=t,xv=n,Yy.attachEvent("onpropertychange",eI)):e==="focusout"&&RA()}function vD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jx(xv)}function _D(e,t){if(e==="click")return Jx(t)}function xD(e,t){if(e==="input"||e==="change")return Jx(t)}function bD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ku=typeof Object.is=="function"?Object.is:bD;function bv(e,t){if(ku(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!NS.call(t,s)||!ku(e[s],t[s]))return!1}return!0}function FA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function DA(e,t){var n=FA(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=FA(n)}}function tI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nI(){for(var e=window,t=G1();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=G1(e.document)}return t}function s3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wD(e){var t=nI(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tI(n.ownerDocument.documentElement,n)){if(i!==null&&s3(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(i.start,s);i=i.end===void 0?l:Math.min(i.end,s),!e.extend&&l>i&&(s=i,i=l,l=s),s=DA(n,l);var a=DA(n,i);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var SD=gf&&"documentMode"in document&&11>=document.documentMode,Um=null,iC=null,Jy=null,oC=!1;function zA(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oC||Um==null||Um!==G1(i)||(i=Um,"selectionStart"in i&&s3(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jy&&bv(Jy,i)||(Jy=i,i=J1(iC,"onSelect"),0<i.length&&(t=new i3("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Um)))}function N0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jm={animationend:N0("Animation","AnimationEnd"),animationiteration:N0("Animation","AnimationIteration"),animationstart:N0("Animation","AnimationStart"),transitionend:N0("Transition","TransitionEnd")},R2={},rI={};gf&&(rI=document.createElement("div").style,"AnimationEvent"in window||(delete jm.animationend.animation,delete jm.animationiteration.animation,delete jm.animationstart.animation),"TransitionEvent"in window||delete jm.transitionend.transition);function eb(e){if(R2[e])return R2[e];if(!jm[e])return e;var t=jm[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rI)return R2[e]=t[n];return e}var iI=eb("animationend"),oI=eb("animationiteration"),aI=eb("animationstart"),sI=eb("transitionend"),lI=new Map,BA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jp(e,t){lI.set(e,t),xd(t,[e])}for(var F2=0;F2<BA.length;F2++){var D2=BA[F2],CD=D2.toLowerCase(),ED=D2[0].toUpperCase()+D2.slice(1);Jp(CD,"on"+ED)}Jp(iI,"onAnimationEnd");Jp(oI,"onAnimationIteration");Jp(aI,"onAnimationStart");Jp("dblclick","onDoubleClick");Jp("focusin","onFocus");Jp("focusout","onBlur");Jp(sI,"onTransitionEnd");cg("onMouseEnter",["mouseout","mouseover"]);cg("onMouseLeave",["mouseout","mouseover"]);cg("onPointerEnter",["pointerout","pointerover"]);cg("onPointerLeave",["pointerout","pointerover"]);xd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xd("onBeforeInput",["compositionend","keypress","textInput","paste"]);xd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hy));function NA(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,C8(i,t,void 0,e),e.currentTarget=null}function uI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var a=i.length-1;0<=a;a--){var g=i[a],_=g.instance,w=g.currentTarget;if(g=g.listener,_!==l&&s.isPropagationStopped())break e;NA(s,g,w),l=_}else for(a=0;a<i.length;a++){if(g=i[a],_=g.instance,w=g.currentTarget,g=g.listener,_!==l&&s.isPropagationStopped())break e;NA(s,g,w),l=_}}}if(K1)throw e=eC,K1=!1,eC=null,e}function bi(e,t){var n=t[cC];n===void 0&&(n=t[cC]=new Set);var i=e+"__bubble";n.has(i)||(cI(t,e,2,!1),n.add(i))}function z2(e,t,n){var i=0;t&&(i|=4),cI(n,e,i,t)}var $0="_reactListening"+Math.random().toString(36).slice(2);function wv(e){if(!e[$0]){e[$0]=!0,y6.forEach(function(n){n!=="selectionchange"&&(kD.has(n)||z2(n,!1,e),z2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$0]||(t[$0]=!0,z2("selectionchange",!1,t))}}function cI(e,t,n,i){switch(W6(t)){case 1:var s=$8;break;case 4:s=U8;break;default:s=n3}n=s.bind(null,t,n,e),s=void 0,!JS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function B2(e,t,n,i,s){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var g=i.stateNode.containerInfo;if(g===s||g.nodeType===8&&g.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var _=a.tag;if((_===3||_===4)&&(_=a.stateNode.containerInfo,_===s||_.nodeType===8&&_.parentNode===s))return;a=a.return}for(;g!==null;){if(a=td(g),a===null)return;if(_=a.tag,_===5||_===6){i=l=a;continue e}g=g.parentNode}}i=i.return}M6(function(){var w=l,C=YE(n),A=[];e:{var I=lI.get(e);if(I!==void 0){var O=i3,D=e;switch(e){case"keypress":if(P1(n)===0)break e;case"keydown":case"keyup":O=nD;break;case"focusin":D="focus",O=O2;break;case"focusout":D="blur",O=O2;break;case"beforeblur":case"afterblur":O=O2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=AA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=q8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=oD;break;case iI:case oI:case aI:O=W8;break;case sI:O=sD;break;case"scroll":O=j8;break;case"wheel":O=uD;break;case"copy":case"cut":case"paste":O=Z8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=TA}var B=(t&4)!==0,H=!B&&e==="scroll",R=B?I!==null?I+"Capture":null:I;B=[];for(var U=w,q;U!==null;){q=U;var Y=q.stateNode;if(q.tag===5&&Y!==null&&(q=Y,R!==null&&(Y=gv(U,R),Y!=null&&B.push(Sv(U,Y,q)))),H)break;U=U.return}0<B.length&&(I=new O(I,D,null,n,C),A.push({event:I,listeners:B}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",I&&n!==QS&&(D=n.relatedTarget||n.fromElement)&&(td(D)||D[yf]))break e;if((O||I)&&(I=C.window===C?C:(I=C.ownerDocument)?I.defaultView||I.parentWindow:window,O?(D=n.relatedTarget||n.toElement,O=w,D=D?td(D):null,D!==null&&(H=bd(D),D!==H||D.tag!==5&&D.tag!==6)&&(D=null)):(O=null,D=w),O!==D)){if(B=AA,Y="onMouseLeave",R="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(B=TA,Y="onPointerLeave",R="onPointerEnter",U="pointer"),H=O==null?I:Vm(O),q=D==null?I:Vm(D),I=new B(Y,U+"leave",O,n,C),I.target=H,I.relatedTarget=q,Y=null,td(C)===w&&(B=new B(R,U+"enter",D,n,C),B.target=q,B.relatedTarget=H,Y=B),H=Y,O&&D)t:{for(B=O,R=D,U=0,q=B;q;q=bm(q))U++;for(q=0,Y=R;Y;Y=bm(Y))q++;for(;0<U-q;)B=bm(B),U--;for(;0<q-U;)R=bm(R),q--;for(;U--;){if(B===R||R!==null&&B===R.alternate)break t;B=bm(B),R=bm(R)}B=null}else B=null;O!==null&&$A(A,I,O,B,!1),D!==null&&H!==null&&$A(A,H,D,B,!0)}}e:{if(I=w?Vm(w):window,O=I.nodeName&&I.nodeName.toLowerCase(),O==="select"||O==="input"&&I.type==="file")var se=gD;else if(LA(I))if(J6)se=xD;else{se=vD;var W=yD}else(O=I.nodeName)&&O.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(se=_D);if(se&&(se=se(e,w))){Y6(A,se,n,C);break e}W&&W(e,I,w),e==="focusout"&&(W=I._wrapperState)&&W.controlled&&I.type==="number"&&GS(I,"number",I.value)}switch(W=w?Vm(w):window,e){case"focusin":(LA(W)||W.contentEditable==="true")&&(Um=W,iC=w,Jy=null);break;case"focusout":Jy=iC=Um=null;break;case"mousedown":oC=!0;break;case"contextmenu":case"mouseup":case"dragend":oC=!1,zA(A,n,C);break;case"selectionchange":if(SD)break;case"keydown":case"keyup":zA(A,n,C)}var ce;if(a3)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else $m?X6(e,n)&&(xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(Z6&&n.locale!=="ko"&&($m||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&$m&&(ce=K6()):(Op=C,r3="value"in Op?Op.value:Op.textContent,$m=!0)),W=J1(w,xe),0<W.length&&(xe=new PA(xe,e,null,n,C),A.push({event:xe,listeners:W}),ce?xe.data=ce:(ce=Q6(n),ce!==null&&(xe.data=ce)))),(ce=fD?pD(e,n):hD(e,n))&&(w=J1(w,"onBeforeInput"),0<w.length&&(C=new PA("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:w}),C.data=ce))}uI(A,t)})}function Sv(e,t,n){return{instance:e,listener:t,currentTarget:n}}function J1(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=gv(e,n),l!=null&&i.unshift(Sv(e,l,s)),l=gv(e,t),l!=null&&i.push(Sv(e,l,s))),e=e.return}return i}function bm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $A(e,t,n,i,s){for(var l=t._reactName,a=[];n!==null&&n!==i;){var g=n,_=g.alternate,w=g.stateNode;if(_!==null&&_===i)break;g.tag===5&&w!==null&&(g=w,s?(_=gv(n,l),_!=null&&a.unshift(Sv(n,_,g))):s||(_=gv(n,l),_!=null&&a.push(Sv(n,_,g)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var AD=/\r\n?/g,PD=/\u0000|\uFFFD/g;function UA(e){return(typeof e=="string"?e:""+e).replace(AD,`
`).replace(PD,"")}function U0(e,t,n){if(t=UA(t),UA(e)!==t&&n)throw Error(Ct(425))}function ex(){}var aC=null,sC=null;function lC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uC=typeof setTimeout=="function"?setTimeout:void 0,TD=typeof clearTimeout=="function"?clearTimeout:void 0,jA=typeof Promise=="function"?Promise:void 0,ID=typeof queueMicrotask=="function"?queueMicrotask:typeof jA<"u"?function(e){return jA.resolve(null).then(e).catch(OD)}:uC;function OD(e){setTimeout(function(){throw e})}function N2(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),_v(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);_v(t)}function Np(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function VA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sg=Math.random().toString(36).slice(2),tc="__reactFiber$"+Sg,Cv="__reactProps$"+Sg,yf="__reactContainer$"+Sg,cC="__reactEvents$"+Sg,LD="__reactListeners$"+Sg,MD="__reactHandles$"+Sg;function td(e){var t=e[tc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yf]||n[tc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=VA(e);e!==null;){if(n=e[tc])return n;e=VA(e)}return t}e=n,n=e.parentNode}return null}function Yv(e){return e=e[tc]||e[yf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ct(33))}function tb(e){return e[Cv]||null}var fC=[],qm=-1;function eh(e){return{current:e}}function Si(e){0>qm||(e.current=fC[qm],fC[qm]=null,qm--)}function di(e,t){qm++,fC[qm]=e.current,e.current=t}var Kp={},ja=eh(Kp),ks=eh(!1),fd=Kp;function fg(e,t){var n=e.type.contextTypes;if(!n)return Kp;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function As(e){return e=e.childContextTypes,e!=null}function tx(){Si(ks),Si(ja)}function qA(e,t,n){if(ja.current!==Kp)throw Error(Ct(168));di(ja,t),di(ks,n)}function fI(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(Ct(108,y8(e)||"Unknown",s));return ji({},n,i)}function nx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kp,fd=ja.current,di(ja,e),di(ks,ks.current),!0}function HA(e,t,n){var i=e.stateNode;if(!i)throw Error(Ct(169));n?(e=fI(e,t,fd),i.__reactInternalMemoizedMergedChildContext=e,Si(ks),Si(ja),di(ja,e)):Si(ks),di(ks,n)}var cf=null,nb=!1,$2=!1;function pI(e){cf===null?cf=[e]:cf.push(e)}function RD(e){nb=!0,pI(e)}function th(){if(!$2&&cf!==null){$2=!0;var e=0,t=qr;try{var n=cf;for(qr=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}cf=null,nb=!1}catch(s){throw cf!==null&&(cf=cf.slice(e+1)),z6(JE,th),s}finally{qr=t,$2=!1}}return null}var Hm=[],Gm=0,rx=null,ix=0,Pl=[],Tl=0,pd=null,pf=1,hf="";function Zh(e,t){Hm[Gm++]=ix,Hm[Gm++]=rx,rx=e,ix=t}function hI(e,t,n){Pl[Tl++]=pf,Pl[Tl++]=hf,Pl[Tl++]=pd,pd=e;var i=pf;e=hf;var s=32-wu(i)-1;i&=~(1<<s),n+=1;var l=32-wu(t)+s;if(30<l){var a=s-s%5;l=(i&(1<<a)-1).toString(32),i>>=a,s-=a,pf=1<<32-wu(t)+s|n<<s|i,hf=l+e}else pf=1<<l|n<<s|i,hf=e}function l3(e){e.return!==null&&(Zh(e,1),hI(e,1,0))}function u3(e){for(;e===rx;)rx=Hm[--Gm],Hm[Gm]=null,ix=Hm[--Gm],Hm[Gm]=null;for(;e===pd;)pd=Pl[--Tl],Pl[Tl]=null,hf=Pl[--Tl],Pl[Tl]=null,pf=Pl[--Tl],Pl[Tl]=null}var Js=null,Zs=null,Pi=!1,xu=null;function dI(e,t){var n=Ll(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function GA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Js=e,Zs=Np(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Js=e,Zs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pd!==null?{id:pf,overflow:hf}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ll(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Js=e,Zs=null,!0):!1;default:return!1}}function pC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hC(e){if(Pi){var t=Zs;if(t){var n=t;if(!GA(e,t)){if(pC(e))throw Error(Ct(418));t=Np(n.nextSibling);var i=Js;t&&GA(e,t)?dI(i,n):(e.flags=e.flags&-4097|2,Pi=!1,Js=e)}}else{if(pC(e))throw Error(Ct(418));e.flags=e.flags&-4097|2,Pi=!1,Js=e}}}function WA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Js=e}function j0(e){if(e!==Js)return!1;if(!Pi)return WA(e),Pi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lC(e.type,e.memoizedProps)),t&&(t=Zs)){if(pC(e))throw mI(),Error(Ct(418));for(;t;)dI(e,t),t=Np(t.nextSibling)}if(WA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zs=Np(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zs=null}}else Zs=Js?Np(e.stateNode.nextSibling):null;return!0}function mI(){for(var e=Zs;e;)e=Np(e.nextSibling)}function pg(){Zs=Js=null,Pi=!1}function c3(e){xu===null?xu=[e]:xu.push(e)}var FD=bf.ReactCurrentBatchConfig;function vu(e,t){if(e&&e.defaultProps){t=ji({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var ox=eh(null),ax=null,Wm=null,f3=null;function p3(){f3=Wm=ax=null}function h3(e){var t=ox.current;Si(ox),e._currentValue=t}function dC(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function rg(e,t){ax=e,f3=Wm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Es=!0),e.firstContext=null)}function Fl(e){var t=e._currentValue;if(f3!==e)if(e={context:e,memoizedValue:t,next:null},Wm===null){if(ax===null)throw Error(Ct(308));Wm=e,ax.dependencies={lanes:0,firstContext:e}}else Wm=Wm.next=e;return t}var nd=null;function d3(e){nd===null?nd=[e]:nd.push(e)}function gI(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,d3(t)):(n.next=s.next,s.next=n),t.interleaved=n,vf(e,i)}function vf(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ep=!1;function m3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mf(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $p(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Pr&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,vf(e,n)}return s=i.interleaved,s===null?(t.next=t,d3(i)):(t.next=s.next,s.next=t),i.interleaved=t,vf(e,n)}function T1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,e3(e,n)}}function KA(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sx(e,t,n,i){var s=e.updateQueue;Ep=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,g=s.shared.pending;if(g!==null){s.shared.pending=null;var _=g,w=_.next;_.next=null,a===null?l=w:a.next=w,a=_;var C=e.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==a&&(g===null?C.firstBaseUpdate=w:g.next=w,C.lastBaseUpdate=_))}if(l!==null){var A=s.baseState;a=0,C=w=_=null,g=l;do{var I=g.lane,O=g.eventTime;if((i&I)===I){C!==null&&(C=C.next={eventTime:O,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var D=e,B=g;switch(I=t,O=n,B.tag){case 1:if(D=B.payload,typeof D=="function"){A=D.call(O,A,I);break e}A=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=B.payload,I=typeof D=="function"?D.call(O,A,I):D,I==null)break e;A=ji({},A,I);break e;case 2:Ep=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,I=s.effects,I===null?s.effects=[g]:I.push(g))}else O={eventTime:O,lane:I,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(w=C=O,_=A):C=C.next=O,a|=I;if(g=g.next,g===null){if(g=s.shared.pending,g===null)break;I=g,g=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(1);if(C===null&&(_=A),s.baseState=_,s.firstBaseUpdate=w,s.lastBaseUpdate=C,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);dd|=a,e.lanes=a,e.memoizedState=A}}function ZA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Ct(191,s));s.call(i)}}}var vI=new g6.Component().refs;function mC(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ji({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rb={isMounted:function(e){return(e=e._reactInternals)?bd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=is(),s=jp(e),l=mf(i,s);l.payload=t,n!=null&&(l.callback=n),t=$p(e,l,s),t!==null&&(Su(t,e,s,i),T1(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=is(),s=jp(e),l=mf(i,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=$p(e,l,s),t!==null&&(Su(t,e,s,i),T1(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=is(),i=jp(e),s=mf(n,i);s.tag=2,t!=null&&(s.callback=t),t=$p(e,s,i),t!==null&&(Su(t,e,i,n),T1(t,e,i))}};function XA(e,t,n,i,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,a):t.prototype&&t.prototype.isPureReactComponent?!bv(n,i)||!bv(s,l):!0}function _I(e,t,n){var i=!1,s=Kp,l=t.contextType;return typeof l=="object"&&l!==null?l=Fl(l):(s=As(t)?fd:ja.current,i=t.contextTypes,l=(i=i!=null)?fg(e,s):Kp),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rb,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function QA(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&rb.enqueueReplaceState(t,t.state,null)}function gC(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=vI,m3(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Fl(l):(l=As(t)?fd:ja.current,s.context=fg(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(mC(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&rb.enqueueReplaceState(s,s.state,null),sx(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ey(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ct(309));var i=n.stateNode}if(!i)throw Error(Ct(147,e));var s=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var g=s.refs;g===vI&&(g=s.refs={}),a===null?delete g[l]:g[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(Ct(284));if(!n._owner)throw Error(Ct(290,e))}return e}function V0(e,t){throw e=Object.prototype.toString.call(t),Error(Ct(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function YA(e){var t=e._init;return t(e._payload)}function xI(e){function t(R,U){if(e){var q=R.deletions;q===null?(R.deletions=[U],R.flags|=16):q.push(U)}}function n(R,U){if(!e)return null;for(;U!==null;)t(R,U),U=U.sibling;return null}function i(R,U){for(R=new Map;U!==null;)U.key!==null?R.set(U.key,U):R.set(U.index,U),U=U.sibling;return R}function s(R,U){return R=Vp(R,U),R.index=0,R.sibling=null,R}function l(R,U,q){return R.index=q,e?(q=R.alternate,q!==null?(q=q.index,q<U?(R.flags|=2,U):q):(R.flags|=2,U)):(R.flags|=1048576,U)}function a(R){return e&&R.alternate===null&&(R.flags|=2),R}function g(R,U,q,Y){return U===null||U.tag!==6?(U=W2(q,R.mode,Y),U.return=R,U):(U=s(U,q),U.return=R,U)}function _(R,U,q,Y){var se=q.type;return se===Nm?C(R,U,q.props.children,Y,q.key):U!==null&&(U.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Cp&&YA(se)===U.type)?(Y=s(U,q.props),Y.ref=Ey(R,U,q),Y.return=R,Y):(Y=F1(q.type,q.key,q.props,null,R.mode,Y),Y.ref=Ey(R,U,q),Y.return=R,Y)}function w(R,U,q,Y){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=K2(q,R.mode,Y),U.return=R,U):(U=s(U,q.children||[]),U.return=R,U)}function C(R,U,q,Y,se){return U===null||U.tag!==7?(U=ad(q,R.mode,Y,se),U.return=R,U):(U=s(U,q),U.return=R,U)}function A(R,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=W2(""+U,R.mode,q),U.return=R,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case L0:return q=F1(U.type,U.key,U.props,null,R.mode,q),q.ref=Ey(R,null,U),q.return=R,q;case Bm:return U=K2(U,R.mode,q),U.return=R,U;case Cp:var Y=U._init;return A(R,Y(U._payload),q)}if(Vy(U)||xy(U))return U=ad(U,R.mode,q,null),U.return=R,U;V0(R,U)}return null}function I(R,U,q,Y){var se=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return se!==null?null:g(R,U,""+q,Y);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case L0:return q.key===se?_(R,U,q,Y):null;case Bm:return q.key===se?w(R,U,q,Y):null;case Cp:return se=q._init,I(R,U,se(q._payload),Y)}if(Vy(q)||xy(q))return se!==null?null:C(R,U,q,Y,null);V0(R,q)}return null}function O(R,U,q,Y,se){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return R=R.get(q)||null,g(U,R,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L0:return R=R.get(Y.key===null?q:Y.key)||null,_(U,R,Y,se);case Bm:return R=R.get(Y.key===null?q:Y.key)||null,w(U,R,Y,se);case Cp:var W=Y._init;return O(R,U,q,W(Y._payload),se)}if(Vy(Y)||xy(Y))return R=R.get(q)||null,C(U,R,Y,se,null);V0(U,Y)}return null}function D(R,U,q,Y){for(var se=null,W=null,ce=U,xe=U=0,Me=null;ce!==null&&xe<q.length;xe++){ce.index>xe?(Me=ce,ce=null):Me=ce.sibling;var $e=I(R,ce,q[xe],Y);if($e===null){ce===null&&(ce=Me);break}e&&ce&&$e.alternate===null&&t(R,ce),U=l($e,U,xe),W===null?se=$e:W.sibling=$e,W=$e,ce=Me}if(xe===q.length)return n(R,ce),Pi&&Zh(R,xe),se;if(ce===null){for(;xe<q.length;xe++)ce=A(R,q[xe],Y),ce!==null&&(U=l(ce,U,xe),W===null?se=ce:W.sibling=ce,W=ce);return Pi&&Zh(R,xe),se}for(ce=i(R,ce);xe<q.length;xe++)Me=O(ce,R,xe,q[xe],Y),Me!==null&&(e&&Me.alternate!==null&&ce.delete(Me.key===null?xe:Me.key),U=l(Me,U,xe),W===null?se=Me:W.sibling=Me,W=Me);return e&&ce.forEach(function(Le){return t(R,Le)}),Pi&&Zh(R,xe),se}function B(R,U,q,Y){var se=xy(q);if(typeof se!="function")throw Error(Ct(150));if(q=se.call(q),q==null)throw Error(Ct(151));for(var W=se=null,ce=U,xe=U=0,Me=null,$e=q.next();ce!==null&&!$e.done;xe++,$e=q.next()){ce.index>xe?(Me=ce,ce=null):Me=ce.sibling;var Le=I(R,ce,$e.value,Y);if(Le===null){ce===null&&(ce=Me);break}e&&ce&&Le.alternate===null&&t(R,ce),U=l(Le,U,xe),W===null?se=Le:W.sibling=Le,W=Le,ce=Me}if($e.done)return n(R,ce),Pi&&Zh(R,xe),se;if(ce===null){for(;!$e.done;xe++,$e=q.next())$e=A(R,$e.value,Y),$e!==null&&(U=l($e,U,xe),W===null?se=$e:W.sibling=$e,W=$e);return Pi&&Zh(R,xe),se}for(ce=i(R,ce);!$e.done;xe++,$e=q.next())$e=O(ce,R,xe,$e.value,Y),$e!==null&&(e&&$e.alternate!==null&&ce.delete($e.key===null?xe:$e.key),U=l($e,U,xe),W===null?se=$e:W.sibling=$e,W=$e);return e&&ce.forEach(function(Ge){return t(R,Ge)}),Pi&&Zh(R,xe),se}function H(R,U,q,Y){if(typeof q=="object"&&q!==null&&q.type===Nm&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case L0:e:{for(var se=q.key,W=U;W!==null;){if(W.key===se){if(se=q.type,se===Nm){if(W.tag===7){n(R,W.sibling),U=s(W,q.props.children),U.return=R,R=U;break e}}else if(W.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Cp&&YA(se)===W.type){n(R,W.sibling),U=s(W,q.props),U.ref=Ey(R,W,q),U.return=R,R=U;break e}n(R,W);break}else t(R,W);W=W.sibling}q.type===Nm?(U=ad(q.props.children,R.mode,Y,q.key),U.return=R,R=U):(Y=F1(q.type,q.key,q.props,null,R.mode,Y),Y.ref=Ey(R,U,q),Y.return=R,R=Y)}return a(R);case Bm:e:{for(W=q.key;U!==null;){if(U.key===W)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){n(R,U.sibling),U=s(U,q.children||[]),U.return=R,R=U;break e}else{n(R,U);break}else t(R,U);U=U.sibling}U=K2(q,R.mode,Y),U.return=R,R=U}return a(R);case Cp:return W=q._init,H(R,U,W(q._payload),Y)}if(Vy(q))return D(R,U,q,Y);if(xy(q))return B(R,U,q,Y);V0(R,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,U!==null&&U.tag===6?(n(R,U.sibling),U=s(U,q),U.return=R,R=U):(n(R,U),U=W2(q,R.mode,Y),U.return=R,R=U),a(R)):n(R,U)}return H}var hg=xI(!0),bI=xI(!1),Jv={},oc=eh(Jv),Ev=eh(Jv),kv=eh(Jv);function rd(e){if(e===Jv)throw Error(Ct(174));return e}function g3(e,t){switch(di(kv,t),di(Ev,e),di(oc,Jv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:KS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=KS(t,e)}Si(oc),di(oc,t)}function dg(){Si(oc),Si(Ev),Si(kv)}function wI(e){rd(kv.current);var t=rd(oc.current),n=KS(t,e.type);t!==n&&(di(Ev,e),di(oc,n))}function y3(e){Ev.current===e&&(Si(oc),Si(Ev))}var $i=eh(0);function lx(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var U2=[];function v3(){for(var e=0;e<U2.length;e++)U2[e]._workInProgressVersionPrimary=null;U2.length=0}var I1=bf.ReactCurrentDispatcher,j2=bf.ReactCurrentBatchConfig,hd=0,Ui=null,Ho=null,aa=null,ux=!1,ev=!1,Av=0,DD=0;function Ba(){throw Error(Ct(321))}function _3(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ku(e[n],t[n]))return!1;return!0}function x3(e,t,n,i,s,l){if(hd=l,Ui=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I1.current=e===null||e.memoizedState===null?$D:UD,e=n(i,s),ev){l=0;do{if(ev=!1,Av=0,25<=l)throw Error(Ct(301));l+=1,aa=Ho=null,t.updateQueue=null,I1.current=jD,e=n(i,s)}while(ev)}if(I1.current=cx,t=Ho!==null&&Ho.next!==null,hd=0,aa=Ho=Ui=null,ux=!1,t)throw Error(Ct(300));return e}function b3(){var e=Av!==0;return Av=0,e}function Ju(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return aa===null?Ui.memoizedState=aa=e:aa=aa.next=e,aa}function Dl(){if(Ho===null){var e=Ui.alternate;e=e!==null?e.memoizedState:null}else e=Ho.next;var t=aa===null?Ui.memoizedState:aa.next;if(t!==null)aa=t,Ho=e;else{if(e===null)throw Error(Ct(310));Ho=e,e={memoizedState:Ho.memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},aa===null?Ui.memoizedState=aa=e:aa=aa.next=e}return aa}function Pv(e,t){return typeof t=="function"?t(e):t}function V2(e){var t=Dl(),n=t.queue;if(n===null)throw Error(Ct(311));n.lastRenderedReducer=e;var i=Ho,s=i.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}i.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,i=i.baseState;var g=a=null,_=null,w=l;do{var C=w.lane;if((hd&C)===C)_!==null&&(_=_.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:e(i,w.action);else{var A={lane:C,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};_===null?(g=_=A,a=i):_=_.next=A,Ui.lanes|=C,dd|=C}w=w.next}while(w!==null&&w!==l);_===null?a=i:_.next=g,ku(i,t.memoizedState)||(Es=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=_,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ui.lanes|=l,dd|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function q2(e){var t=Dl(),n=t.queue;if(n===null)throw Error(Ct(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);ku(l,t.memoizedState)||(Es=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function SI(){}function CI(e,t){var n=Ui,i=Dl(),s=t(),l=!ku(i.memoizedState,s);if(l&&(i.memoizedState=s,Es=!0),i=i.queue,w3(AI.bind(null,n,i,e),[e]),i.getSnapshot!==t||l||aa!==null&&aa.memoizedState.tag&1){if(n.flags|=2048,Tv(9,kI.bind(null,n,i,s,t),void 0,null),sa===null)throw Error(Ct(349));hd&30||EI(n,t,s)}return s}function EI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ui.updateQueue,t===null?(t={lastEffect:null,stores:null},Ui.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kI(e,t,n,i){t.value=n,t.getSnapshot=i,PI(t)&&TI(e)}function AI(e,t,n){return n(function(){PI(t)&&TI(e)})}function PI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ku(e,n)}catch{return!0}}function TI(e){var t=vf(e,1);t!==null&&Su(t,e,1,-1)}function JA(e){var t=Ju();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pv,lastRenderedState:e},t.queue=e,e=e.dispatch=ND.bind(null,Ui,e),[t.memoizedState,e]}function Tv(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Ui.updateQueue,t===null?(t={lastEffect:null,stores:null},Ui.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function II(){return Dl().memoizedState}function O1(e,t,n,i){var s=Ju();Ui.flags|=e,s.memoizedState=Tv(1|t,n,void 0,i===void 0?null:i)}function ib(e,t,n,i){var s=Dl();i=i===void 0?null:i;var l=void 0;if(Ho!==null){var a=Ho.memoizedState;if(l=a.destroy,i!==null&&_3(i,a.deps)){s.memoizedState=Tv(t,n,l,i);return}}Ui.flags|=e,s.memoizedState=Tv(1|t,n,l,i)}function e5(e,t){return O1(8390656,8,e,t)}function w3(e,t){return ib(2048,8,e,t)}function OI(e,t){return ib(4,2,e,t)}function LI(e,t){return ib(4,4,e,t)}function MI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function RI(e,t,n){return n=n!=null?n.concat([e]):null,ib(4,4,MI.bind(null,t,e),n)}function S3(){}function FI(e,t){var n=Dl();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&_3(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function DI(e,t){var n=Dl();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&_3(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function zI(e,t,n){return hd&21?(ku(n,t)||(n=$6(),Ui.lanes|=n,dd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Es=!0),e.memoizedState=n)}function zD(e,t){var n=qr;qr=n!==0&&4>n?n:4,e(!0);var i=j2.transition;j2.transition={};try{e(!1),t()}finally{qr=n,j2.transition=i}}function BI(){return Dl().memoizedState}function BD(e,t,n){var i=jp(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},NI(e))$I(t,n);else if(n=gI(e,t,n,i),n!==null){var s=is();Su(n,e,i,s),UI(n,t,i)}}function ND(e,t,n){var i=jp(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(NI(e))$I(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,g=l(a,n);if(s.hasEagerState=!0,s.eagerState=g,ku(g,a)){var _=t.interleaved;_===null?(s.next=s,d3(t)):(s.next=_.next,_.next=s),t.interleaved=s;return}}catch{}finally{}n=gI(e,t,s,i),n!==null&&(s=is(),Su(n,e,i,s),UI(n,t,i))}}function NI(e){var t=e.alternate;return e===Ui||t!==null&&t===Ui}function $I(e,t){ev=ux=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function UI(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,e3(e,n)}}var cx={readContext:Fl,useCallback:Ba,useContext:Ba,useEffect:Ba,useImperativeHandle:Ba,useInsertionEffect:Ba,useLayoutEffect:Ba,useMemo:Ba,useReducer:Ba,useRef:Ba,useState:Ba,useDebugValue:Ba,useDeferredValue:Ba,useTransition:Ba,useMutableSource:Ba,useSyncExternalStore:Ba,useId:Ba,unstable_isNewReconciler:!1},$D={readContext:Fl,useCallback:function(e,t){return Ju().memoizedState=[e,t===void 0?null:t],e},useContext:Fl,useEffect:e5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,O1(4194308,4,MI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return O1(4194308,4,e,t)},useInsertionEffect:function(e,t){return O1(4,2,e,t)},useMemo:function(e,t){var n=Ju();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ju();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=BD.bind(null,Ui,e),[i.memoizedState,e]},useRef:function(e){var t=Ju();return e={current:e},t.memoizedState=e},useState:JA,useDebugValue:S3,useDeferredValue:function(e){return Ju().memoizedState=e},useTransition:function(){var e=JA(!1),t=e[0];return e=zD.bind(null,e[1]),Ju().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Ui,s=Ju();if(Pi){if(n===void 0)throw Error(Ct(407));n=n()}else{if(n=t(),sa===null)throw Error(Ct(349));hd&30||EI(i,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,e5(AI.bind(null,i,l,e),[e]),i.flags|=2048,Tv(9,kI.bind(null,i,l,n,t),void 0,null),n},useId:function(){var e=Ju(),t=sa.identifierPrefix;if(Pi){var n=hf,i=pf;n=(i&~(1<<32-wu(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Av++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=DD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},UD={readContext:Fl,useCallback:FI,useContext:Fl,useEffect:w3,useImperativeHandle:RI,useInsertionEffect:OI,useLayoutEffect:LI,useMemo:DI,useReducer:V2,useRef:II,useState:function(){return V2(Pv)},useDebugValue:S3,useDeferredValue:function(e){var t=Dl();return zI(t,Ho.memoizedState,e)},useTransition:function(){var e=V2(Pv)[0],t=Dl().memoizedState;return[e,t]},useMutableSource:SI,useSyncExternalStore:CI,useId:BI,unstable_isNewReconciler:!1},jD={readContext:Fl,useCallback:FI,useContext:Fl,useEffect:w3,useImperativeHandle:RI,useInsertionEffect:OI,useLayoutEffect:LI,useMemo:DI,useReducer:q2,useRef:II,useState:function(){return q2(Pv)},useDebugValue:S3,useDeferredValue:function(e){var t=Dl();return Ho===null?t.memoizedState=e:zI(t,Ho.memoizedState,e)},useTransition:function(){var e=q2(Pv)[0],t=Dl().memoizedState;return[e,t]},useMutableSource:SI,useSyncExternalStore:CI,useId:BI,unstable_isNewReconciler:!1};function mg(e,t){try{var n="",i=t;do n+=g8(i),i=i.return;while(i);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function H2(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function yC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var VD=typeof WeakMap=="function"?WeakMap:Map;function jI(e,t,n){n=mf(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){px||(px=!0,AC=i),yC(e,t)},n}function VI(e,t,n){n=mf(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){yC(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){yC(e,t),typeof i!="function"&&(Up===null?Up=new Set([this]):Up.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function t5(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new VD;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=rz.bind(null,e,t,n),t.then(e,e))}function n5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function r5(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mf(-1,1),t.tag=2,$p(n,t,1))),n.lanes|=1),e)}var qD=bf.ReactCurrentOwner,Es=!1;function rs(e,t,n,i){t.child=e===null?bI(t,null,n,i):hg(t,e.child,n,i)}function i5(e,t,n,i,s){n=n.render;var l=t.ref;return rg(t,s),i=x3(e,t,n,i,l,s),n=b3(),e!==null&&!Es?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,_f(e,t,s)):(Pi&&n&&l3(t),t.flags|=1,rs(e,t,i,s),t.child)}function o5(e,t,n,i,s){if(e===null){var l=n.type;return typeof l=="function"&&!O3(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,qI(e,t,l,i,s)):(e=F1(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:bv,n(a,i)&&e.ref===t.ref)return _f(e,t,s)}return t.flags|=1,e=Vp(l,i),e.ref=t.ref,e.return=t,t.child=e}function qI(e,t,n,i,s){if(e!==null){var l=e.memoizedProps;if(bv(l,i)&&e.ref===t.ref)if(Es=!1,t.pendingProps=i=l,(e.lanes&s)!==0)e.flags&131072&&(Es=!0);else return t.lanes=e.lanes,_f(e,t,s)}return vC(e,t,n,i,s)}function HI(e,t,n){var i=t.pendingProps,s=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},di(Zm,Ks),Ks|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,di(Zm,Ks),Ks|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,di(Zm,Ks),Ks|=i}else l!==null?(i=l.baseLanes|n,t.memoizedState=null):i=n,di(Zm,Ks),Ks|=i;return rs(e,t,s,n),t.child}function GI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function vC(e,t,n,i,s){var l=As(n)?fd:ja.current;return l=fg(t,l),rg(t,s),n=x3(e,t,n,i,l,s),i=b3(),e!==null&&!Es?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,_f(e,t,s)):(Pi&&i&&l3(t),t.flags|=1,rs(e,t,n,s),t.child)}function a5(e,t,n,i,s){if(As(n)){var l=!0;nx(t)}else l=!1;if(rg(t,s),t.stateNode===null)L1(e,t),_I(t,n,i),gC(t,n,i,s),i=!0;else if(e===null){var a=t.stateNode,g=t.memoizedProps;a.props=g;var _=a.context,w=n.contextType;typeof w=="object"&&w!==null?w=Fl(w):(w=As(n)?fd:ja.current,w=fg(t,w));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function";A||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(g!==i||_!==w)&&QA(t,a,i,w),Ep=!1;var I=t.memoizedState;a.state=I,sx(t,i,a,s),_=t.memoizedState,g!==i||I!==_||ks.current||Ep?(typeof C=="function"&&(mC(t,n,C,i),_=t.memoizedState),(g=Ep||XA(t,n,g,i,I,_,w))?(A||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=_),a.props=i,a.state=_,a.context=w,i=g):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,yI(e,t),g=t.memoizedProps,w=t.type===t.elementType?g:vu(t.type,g),a.props=w,A=t.pendingProps,I=a.context,_=n.contextType,typeof _=="object"&&_!==null?_=Fl(_):(_=As(n)?fd:ja.current,_=fg(t,_));var O=n.getDerivedStateFromProps;(C=typeof O=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(g!==A||I!==_)&&QA(t,a,i,_),Ep=!1,I=t.memoizedState,a.state=I,sx(t,i,a,s);var D=t.memoizedState;g!==A||I!==D||ks.current||Ep?(typeof O=="function"&&(mC(t,n,O,i),D=t.memoizedState),(w=Ep||XA(t,n,w,i,I,D,_)||!1)?(C||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,D,_),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,D,_)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=D),a.props=i,a.state=D,a.context=_,i=w):(typeof a.componentDidUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return _C(e,t,n,i,l,s)}function _C(e,t,n,i,s,l){GI(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return s&&HA(t,n,!1),_f(e,t,l);i=t.stateNode,qD.current=t;var g=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=hg(t,e.child,null,l),t.child=hg(t,null,g,l)):rs(e,t,g,l),t.memoizedState=i.state,s&&HA(t,n,!0),t.child}function WI(e){var t=e.stateNode;t.pendingContext?qA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qA(e,t.context,!1),g3(e,t.containerInfo)}function s5(e,t,n,i,s){return pg(),c3(s),t.flags|=256,rs(e,t,n,i),t.child}var xC={dehydrated:null,treeContext:null,retryLane:0};function bC(e){return{baseLanes:e,cachePool:null,transitions:null}}function KI(e,t,n){var i=t.pendingProps,s=$i.current,l=!1,a=(t.flags&128)!==0,g;if((g=a)||(g=e!==null&&e.memoizedState===null?!1:(s&2)!==0),g?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),di($i,s&1),e===null)return hC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,l?(i=t.mode,l=t.child,a={mode:"hidden",children:a},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=sb(a,i,0,null),e=ad(e,i,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=bC(n),t.memoizedState=xC,e):C3(t,a));if(s=e.memoizedState,s!==null&&(g=s.dehydrated,g!==null))return HD(e,t,a,i,g,s,n);if(l){l=i.fallback,a=t.mode,s=e.child,g=s.sibling;var _={mode:"hidden",children:i.children};return!(a&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=_,t.deletions=null):(i=Vp(s,_),i.subtreeFlags=s.subtreeFlags&14680064),g!==null?l=Vp(g,l):(l=ad(l,a,n,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,a=e.child.memoizedState,a=a===null?bC(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=xC,i}return l=e.child,e=l.sibling,i=Vp(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function C3(e,t){return t=sb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function q0(e,t,n,i){return i!==null&&c3(i),hg(t,e.child,null,n),e=C3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function HD(e,t,n,i,s,l,a){if(n)return t.flags&256?(t.flags&=-257,i=H2(Error(Ct(422))),q0(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,s=t.mode,i=sb({mode:"visible",children:i.children},s,0,null),l=ad(l,s,a,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&hg(t,e.child,null,a),t.child.memoizedState=bC(a),t.memoizedState=xC,l);if(!(t.mode&1))return q0(e,t,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var g=i.dgst;return i=g,l=Error(Ct(419)),i=H2(l,i,void 0),q0(e,t,a,i)}if(g=(a&e.childLanes)!==0,Es||g){if(i=sa,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,vf(e,s),Su(i,e,s,-1))}return I3(),i=H2(Error(Ct(421))),q0(e,t,a,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=iz.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Zs=Np(s.nextSibling),Js=t,Pi=!0,xu=null,e!==null&&(Pl[Tl++]=pf,Pl[Tl++]=hf,Pl[Tl++]=pd,pf=e.id,hf=e.overflow,pd=t),t=C3(t,i.children),t.flags|=4096,t)}function l5(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),dC(e.return,t,n)}function G2(e,t,n,i,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=s)}function ZI(e,t,n){var i=t.pendingProps,s=i.revealOrder,l=i.tail;if(rs(e,t,i.children,n),i=$i.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&l5(e,n,t);else if(e.tag===19)l5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(di($i,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&lx(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),G2(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&lx(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}G2(t,!0,n,null,l);break;case"together":G2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function L1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _f(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ct(153));if(t.child!==null){for(e=t.child,n=Vp(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vp(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function GD(e,t,n){switch(t.tag){case 3:WI(t),pg();break;case 5:wI(t);break;case 1:As(t.type)&&nx(t);break;case 4:g3(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;di(ox,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(di($i,$i.current&1),t.flags|=128,null):n&t.child.childLanes?KI(e,t,n):(di($i,$i.current&1),e=_f(e,t,n),e!==null?e.sibling:null);di($i,$i.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return ZI(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),di($i,$i.current),i)break;return null;case 22:case 23:return t.lanes=0,HI(e,t,n)}return _f(e,t,n)}var XI,wC,QI,YI;XI=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wC=function(){};QI=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,rd(oc.current);var l=null;switch(n){case"input":s=qS(e,s),i=qS(e,i),l=[];break;case"select":s=ji({},s,{value:void 0}),i=ji({},i,{value:void 0}),l=[];break;case"textarea":s=WS(e,s),i=WS(e,i),l=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ex)}ZS(n,i);var a;n=null;for(w in s)if(!i.hasOwnProperty(w)&&s.hasOwnProperty(w)&&s[w]!=null)if(w==="style"){var g=s[w];for(a in g)g.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(dv.hasOwnProperty(w)?l||(l=[]):(l=l||[]).push(w,null));for(w in i){var _=i[w];if(g=s!=null?s[w]:void 0,i.hasOwnProperty(w)&&_!==g&&(_!=null||g!=null))if(w==="style")if(g){for(a in g)!g.hasOwnProperty(a)||_&&_.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in _)_.hasOwnProperty(a)&&g[a]!==_[a]&&(n||(n={}),n[a]=_[a])}else n||(l||(l=[]),l.push(w,n)),n=_;else w==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,g=g?g.__html:void 0,_!=null&&g!==_&&(l=l||[]).push(w,_)):w==="children"?typeof _!="string"&&typeof _!="number"||(l=l||[]).push(w,""+_):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(dv.hasOwnProperty(w)?(_!=null&&w==="onScroll"&&bi("scroll",e),l||g===_||(l=[])):(l=l||[]).push(w,_))}n&&(l=l||[]).push("style",n);var w=l;(t.updateQueue=w)&&(t.flags|=4)}};YI=function(e,t,n,i){n!==i&&(t.flags|=4)};function ky(e,t){if(!Pi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Na(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function WD(e,t,n){var i=t.pendingProps;switch(u3(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(t),null;case 1:return As(t.type)&&tx(),Na(t),null;case 3:return i=t.stateNode,dg(),Si(ks),Si(ja),v3(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(j0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xu!==null&&(IC(xu),xu=null))),wC(e,t),Na(t),null;case 5:y3(t);var s=rd(kv.current);if(n=t.type,e!==null&&t.stateNode!=null)QI(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ct(166));return Na(t),null}if(e=rd(oc.current),j0(t)){i=t.stateNode,n=t.type;var l=t.memoizedProps;switch(i[tc]=t,i[Cv]=l,e=(t.mode&1)!==0,n){case"dialog":bi("cancel",i),bi("close",i);break;case"iframe":case"object":case"embed":bi("load",i);break;case"video":case"audio":for(s=0;s<Hy.length;s++)bi(Hy[s],i);break;case"source":bi("error",i);break;case"img":case"image":case"link":bi("error",i),bi("load",i);break;case"details":bi("toggle",i);break;case"input":yA(i,l),bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},bi("invalid",i);break;case"textarea":_A(i,l),bi("invalid",i)}ZS(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var g=l[a];a==="children"?typeof g=="string"?i.textContent!==g&&(l.suppressHydrationWarning!==!0&&U0(i.textContent,g,e),s=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&U0(i.textContent,g,e),s=["children",""+g]):dv.hasOwnProperty(a)&&g!=null&&a==="onScroll"&&bi("scroll",i)}switch(n){case"input":M0(i),vA(i,l,!0);break;case"textarea":M0(i),xA(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=ex)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(n,{is:i.is}):(e=a.createElement(n),n==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,n),e[tc]=t,e[Cv]=i,XI(e,t,!1,!1),t.stateNode=e;e:{switch(a=XS(n,i),n){case"dialog":bi("cancel",e),bi("close",e),s=i;break;case"iframe":case"object":case"embed":bi("load",e),s=i;break;case"video":case"audio":for(s=0;s<Hy.length;s++)bi(Hy[s],e);s=i;break;case"source":bi("error",e),s=i;break;case"img":case"image":case"link":bi("error",e),bi("load",e),s=i;break;case"details":bi("toggle",e),s=i;break;case"input":yA(e,i),s=qS(e,i),bi("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=ji({},i,{value:void 0}),bi("invalid",e);break;case"textarea":_A(e,i),s=WS(e,i),bi("invalid",e);break;default:s=i}ZS(n,s),g=s;for(l in g)if(g.hasOwnProperty(l)){var _=g[l];l==="style"?P6(e,_):l==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&k6(e,_)):l==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&mv(e,_):typeof _=="number"&&mv(e,""+_):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dv.hasOwnProperty(l)?_!=null&&l==="onScroll"&&bi("scroll",e):_!=null&&KE(e,l,_,a))}switch(n){case"input":M0(e),vA(e,i,!1);break;case"textarea":M0(e),xA(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Wp(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?Jm(e,!!i.multiple,l,!1):i.defaultValue!=null&&Jm(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ex)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Na(t),null;case 6:if(e&&t.stateNode!=null)YI(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ct(166));if(n=rd(kv.current),rd(oc.current),j0(t)){if(i=t.stateNode,n=t.memoizedProps,i[tc]=t,(l=i.nodeValue!==n)&&(e=Js,e!==null))switch(e.tag){case 3:U0(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&U0(i.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[tc]=t,t.stateNode=i}return Na(t),null;case 13:if(Si($i),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pi&&Zs!==null&&t.mode&1&&!(t.flags&128))mI(),pg(),t.flags|=98560,l=!1;else if(l=j0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(Ct(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Ct(317));l[tc]=t}else pg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Na(t),l=!1}else xu!==null&&(IC(xu),xu=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||$i.current&1?Go===0&&(Go=3):I3())),t.updateQueue!==null&&(t.flags|=4),Na(t),null);case 4:return dg(),wC(e,t),e===null&&wv(t.stateNode.containerInfo),Na(t),null;case 10:return h3(t.type._context),Na(t),null;case 17:return As(t.type)&&tx(),Na(t),null;case 19:if(Si($i),l=t.memoizedState,l===null)return Na(t),null;if(i=(t.flags&128)!==0,a=l.rendering,a===null)if(i)ky(l,!1);else{if(Go!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=lx(e),a!==null){for(t.flags|=128,ky(l,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)l=n,e=i,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return di($i,$i.current&1|2),t.child}e=e.sibling}l.tail!==null&&mo()>gg&&(t.flags|=128,i=!0,ky(l,!1),t.lanes=4194304)}else{if(!i)if(e=lx(a),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ky(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Pi)return Na(t),null}else 2*mo()-l.renderingStartTime>gg&&n!==1073741824&&(t.flags|=128,i=!0,ky(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=mo(),t.sibling=null,n=$i.current,di($i,i?n&1|2:n&1),t):(Na(t),null);case 22:case 23:return T3(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ks&1073741824&&(Na(t),t.subtreeFlags&6&&(t.flags|=8192)):Na(t),null;case 24:return null;case 25:return null}throw Error(Ct(156,t.tag))}function KD(e,t){switch(u3(t),t.tag){case 1:return As(t.type)&&tx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dg(),Si(ks),Si(ja),v3(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return y3(t),null;case 13:if(Si($i),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ct(340));pg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Si($i),null;case 4:return dg(),null;case 10:return h3(t.type._context),null;case 22:case 23:return T3(),null;case 24:return null;default:return null}}var H0=!1,$a=!1,ZD=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function Km(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){eo(e,t,i)}else n.current=null}function SC(e,t,n){try{n()}catch(i){eo(e,t,i)}}var u5=!1;function XD(e,t){if(aC=Q1,e=nI(),s3(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,g=-1,_=-1,w=0,C=0,A=e,I=null;t:for(;;){for(var O;A!==n||s!==0&&A.nodeType!==3||(g=a+s),A!==l||i!==0&&A.nodeType!==3||(_=a+i),A.nodeType===3&&(a+=A.nodeValue.length),(O=A.firstChild)!==null;)I=A,A=O;for(;;){if(A===e)break t;if(I===n&&++w===s&&(g=a),I===l&&++C===i&&(_=a),(O=A.nextSibling)!==null)break;A=I,I=A.parentNode}A=O}n=g===-1||_===-1?null:{start:g,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(sC={focusedElem:e,selectionRange:n},Q1=!1,Yt=t;Yt!==null;)if(t=Yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Yt=e;else for(;Yt!==null;){t=Yt;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var B=D.memoizedProps,H=D.memoizedState,R=t.stateNode,U=R.getSnapshotBeforeUpdate(t.elementType===t.type?B:vu(t.type,B),H);R.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var q=t.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(Y){eo(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,Yt=e;break}Yt=t.return}return D=u5,u5=!1,D}function tv(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&SC(t,n,l)}s=s.next}while(s!==i)}}function ob(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function CC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function JI(e){var t=e.alternate;t!==null&&(e.alternate=null,JI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tc],delete t[Cv],delete t[cC],delete t[LD],delete t[MD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eO(e){return e.tag===5||e.tag===3||e.tag===4}function c5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function EC(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ex));else if(i!==4&&(e=e.child,e!==null))for(EC(e,t,n),e=e.sibling;e!==null;)EC(e,t,n),e=e.sibling}function kC(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(kC(e,t,n),e=e.sibling;e!==null;)kC(e,t,n),e=e.sibling}var xa=null,_u=!1;function bp(e,t,n){for(n=n.child;n!==null;)tO(e,t,n),n=n.sibling}function tO(e,t,n){if(ic&&typeof ic.onCommitFiberUnmount=="function")try{ic.onCommitFiberUnmount(Qx,n)}catch{}switch(n.tag){case 5:$a||Km(n,t);case 6:var i=xa,s=_u;xa=null,bp(e,t,n),xa=i,_u=s,xa!==null&&(_u?(e=xa,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xa.removeChild(n.stateNode));break;case 18:xa!==null&&(_u?(e=xa,n=n.stateNode,e.nodeType===8?N2(e.parentNode,n):e.nodeType===1&&N2(e,n),_v(e)):N2(xa,n.stateNode));break;case 4:i=xa,s=_u,xa=n.stateNode.containerInfo,_u=!0,bp(e,t,n),xa=i,_u=s;break;case 0:case 11:case 14:case 15:if(!$a&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&SC(n,t,a),s=s.next}while(s!==i)}bp(e,t,n);break;case 1:if(!$a&&(Km(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){eo(n,t,g)}bp(e,t,n);break;case 21:bp(e,t,n);break;case 22:n.mode&1?($a=(i=$a)||n.memoizedState!==null,bp(e,t,n),$a=i):bp(e,t,n);break;default:bp(e,t,n)}}function f5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ZD),t.forEach(function(i){var s=oz.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function mu(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var l=e,a=t,g=a;e:for(;g!==null;){switch(g.tag){case 5:xa=g.stateNode,_u=!1;break e;case 3:xa=g.stateNode.containerInfo,_u=!0;break e;case 4:xa=g.stateNode.containerInfo,_u=!0;break e}g=g.return}if(xa===null)throw Error(Ct(160));tO(l,a,s),xa=null,_u=!1;var _=s.alternate;_!==null&&(_.return=null),s.return=null}catch(w){eo(s,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nO(t,e),t=t.sibling}function nO(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),Qu(e),i&4){try{tv(3,e,e.return),ob(3,e)}catch(B){eo(e,e.return,B)}try{tv(5,e,e.return)}catch(B){eo(e,e.return,B)}}break;case 1:mu(t,e),Qu(e),i&512&&n!==null&&Km(n,n.return);break;case 5:if(mu(t,e),Qu(e),i&512&&n!==null&&Km(n,n.return),e.flags&32){var s=e.stateNode;try{mv(s,"")}catch(B){eo(e,e.return,B)}}if(i&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,g=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&S6(s,l),XS(g,a);var w=XS(g,l);for(a=0;a<_.length;a+=2){var C=_[a],A=_[a+1];C==="style"?P6(s,A):C==="dangerouslySetInnerHTML"?k6(s,A):C==="children"?mv(s,A):KE(s,C,A,w)}switch(g){case"input":HS(s,l);break;case"textarea":C6(s,l);break;case"select":var I=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var O=l.value;O!=null?Jm(s,!!l.multiple,O,!1):I!==!!l.multiple&&(l.defaultValue!=null?Jm(s,!!l.multiple,l.defaultValue,!0):Jm(s,!!l.multiple,l.multiple?[]:"",!1))}s[Cv]=l}catch(B){eo(e,e.return,B)}}break;case 6:if(mu(t,e),Qu(e),i&4){if(e.stateNode===null)throw Error(Ct(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(B){eo(e,e.return,B)}}break;case 3:if(mu(t,e),Qu(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{_v(t.containerInfo)}catch(B){eo(e,e.return,B)}break;case 4:mu(t,e),Qu(e);break;case 13:mu(t,e),Qu(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(A3=mo())),i&4&&f5(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?($a=(w=$a)||C,mu(t,e),$a=w):mu(t,e),Qu(e),i&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!C&&e.mode&1)for(Yt=e,C=e.child;C!==null;){for(A=Yt=C;Yt!==null;){switch(I=Yt,O=I.child,I.tag){case 0:case 11:case 14:case 15:tv(4,I,I.return);break;case 1:Km(I,I.return);var D=I.stateNode;if(typeof D.componentWillUnmount=="function"){i=I,n=I.return;try{t=i,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(B){eo(i,n,B)}}break;case 5:Km(I,I.return);break;case 22:if(I.memoizedState!==null){h5(A);continue}}O!==null?(O.return=I,Yt=O):h5(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{s=A.stateNode,w?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=A.stateNode,_=A.memoizedProps.style,a=_!=null&&_.hasOwnProperty("display")?_.display:null,g.style.display=A6("display",a))}catch(B){eo(e,e.return,B)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=w?"":A.memoizedProps}catch(B){eo(e,e.return,B)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:mu(t,e),Qu(e),i&4&&f5(e);break;case 21:break;default:mu(t,e),Qu(e)}}function Qu(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(eO(n)){var i=n;break e}n=n.return}throw Error(Ct(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(mv(s,""),i.flags&=-33);var l=c5(e);kC(e,l,s);break;case 3:case 4:var a=i.stateNode.containerInfo,g=c5(e);EC(e,g,a);break;default:throw Error(Ct(161))}}catch(_){eo(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QD(e,t,n){Yt=e,rO(e)}function rO(e,t,n){for(var i=(e.mode&1)!==0;Yt!==null;){var s=Yt,l=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||H0;if(!a){var g=s.alternate,_=g!==null&&g.memoizedState!==null||$a;g=H0;var w=$a;if(H0=a,($a=_)&&!w)for(Yt=s;Yt!==null;)a=Yt,_=a.child,a.tag===22&&a.memoizedState!==null?d5(s):_!==null?(_.return=a,Yt=_):d5(s);for(;l!==null;)Yt=l,rO(l),l=l.sibling;Yt=s,H0=g,$a=w}p5(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Yt=l):p5(e)}}function p5(e){for(;Yt!==null;){var t=Yt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$a||ob(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!$a)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:vu(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ZA(t,l,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ZA(t,a,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var C=w.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&_v(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ct(163))}$a||t.flags&512&&CC(t)}catch(I){eo(t,t.return,I)}}if(t===e){Yt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Yt=n;break}Yt=t.return}}function h5(e){for(;Yt!==null;){var t=Yt;if(t===e){Yt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Yt=n;break}Yt=t.return}}function d5(e){for(;Yt!==null;){var t=Yt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ob(4,t)}catch(_){eo(t,n,_)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(_){eo(t,s,_)}}var l=t.return;try{CC(t)}catch(_){eo(t,l,_)}break;case 5:var a=t.return;try{CC(t)}catch(_){eo(t,a,_)}}}catch(_){eo(t,t.return,_)}if(t===e){Yt=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Yt=g;break}Yt=t.return}}var YD=Math.ceil,fx=bf.ReactCurrentDispatcher,E3=bf.ReactCurrentOwner,Ml=bf.ReactCurrentBatchConfig,Pr=0,sa=null,Oo=null,wa=0,Ks=0,Zm=eh(0),Go=0,Iv=null,dd=0,ab=0,k3=0,nv=null,Cs=null,A3=0,gg=1/0,lf=null,px=!1,AC=null,Up=null,G0=!1,Lp=null,hx=0,rv=0,PC=null,M1=-1,R1=0;function is(){return Pr&6?mo():M1!==-1?M1:M1=mo()}function jp(e){return e.mode&1?Pr&2&&wa!==0?wa&-wa:FD.transition!==null?(R1===0&&(R1=$6()),R1):(e=qr,e!==0||(e=window.event,e=e===void 0?16:W6(e.type)),e):1}function Su(e,t,n,i){if(50<rv)throw rv=0,PC=null,Error(Ct(185));Xv(e,n,i),(!(Pr&2)||e!==sa)&&(e===sa&&(!(Pr&2)&&(ab|=n),Go===4&&Tp(e,wa)),Ps(e,i),n===1&&Pr===0&&!(t.mode&1)&&(gg=mo()+500,nb&&th()))}function Ps(e,t){var n=e.callbackNode;F8(e,t);var i=X1(e,e===sa?wa:0);if(i===0)n!==null&&SA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&SA(n),t===1)e.tag===0?RD(m5.bind(null,e)):pI(m5.bind(null,e)),ID(function(){!(Pr&6)&&th()}),n=null;else{switch(U6(i)){case 1:n=JE;break;case 4:n=B6;break;case 16:n=Z1;break;case 536870912:n=N6;break;default:n=Z1}n=fO(n,iO.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iO(e,t){if(M1=-1,R1=0,Pr&6)throw Error(Ct(327));var n=e.callbackNode;if(ig()&&e.callbackNode!==n)return null;var i=X1(e,e===sa?wa:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=dx(e,i);else{t=i;var s=Pr;Pr|=2;var l=aO();(sa!==e||wa!==t)&&(lf=null,gg=mo()+500,od(e,t));do try{tz();break}catch(g){oO(e,g)}while(1);p3(),fx.current=l,Pr=s,Oo!==null?t=0:(sa=null,wa=0,t=Go)}if(t!==0){if(t===2&&(s=tC(e),s!==0&&(i=s,t=TC(e,s))),t===1)throw n=Iv,od(e,0),Tp(e,i),Ps(e,mo()),n;if(t===6)Tp(e,i);else{if(s=e.current.alternate,!(i&30)&&!JD(s)&&(t=dx(e,i),t===2&&(l=tC(e),l!==0&&(i=l,t=TC(e,l))),t===1))throw n=Iv,od(e,0),Tp(e,i),Ps(e,mo()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(Ct(345));case 2:Xh(e,Cs,lf);break;case 3:if(Tp(e,i),(i&130023424)===i&&(t=A3+500-mo(),10<t)){if(X1(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){is(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=uC(Xh.bind(null,e,Cs,lf),t);break}Xh(e,Cs,lf);break;case 4:if(Tp(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var a=31-wu(i);l=1<<a,a=t[a],a>s&&(s=a),i&=~l}if(i=s,i=mo()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*YD(i/1960))-i,10<i){e.timeoutHandle=uC(Xh.bind(null,e,Cs,lf),i);break}Xh(e,Cs,lf);break;case 5:Xh(e,Cs,lf);break;default:throw Error(Ct(329))}}}return Ps(e,mo()),e.callbackNode===n?iO.bind(null,e):null}function TC(e,t){var n=nv;return e.current.memoizedState.isDehydrated&&(od(e,t).flags|=256),e=dx(e,t),e!==2&&(t=Cs,Cs=n,t!==null&&IC(t)),e}function IC(e){Cs===null?Cs=e:Cs.push.apply(Cs,e)}function JD(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],l=s.getSnapshot;s=s.value;try{if(!ku(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tp(e,t){for(t&=~k3,t&=~ab,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wu(t),i=1<<n;e[n]=-1,t&=~i}}function m5(e){if(Pr&6)throw Error(Ct(327));ig();var t=X1(e,0);if(!(t&1))return Ps(e,mo()),null;var n=dx(e,t);if(e.tag!==0&&n===2){var i=tC(e);i!==0&&(t=i,n=TC(e,i))}if(n===1)throw n=Iv,od(e,0),Tp(e,t),Ps(e,mo()),n;if(n===6)throw Error(Ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xh(e,Cs,lf),Ps(e,mo()),null}function P3(e,t){var n=Pr;Pr|=1;try{return e(t)}finally{Pr=n,Pr===0&&(gg=mo()+500,nb&&th())}}function md(e){Lp!==null&&Lp.tag===0&&!(Pr&6)&&ig();var t=Pr;Pr|=1;var n=Ml.transition,i=qr;try{if(Ml.transition=null,qr=1,e)return e()}finally{qr=i,Ml.transition=n,Pr=t,!(Pr&6)&&th()}}function T3(){Ks=Zm.current,Si(Zm)}function od(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,TD(n)),Oo!==null)for(n=Oo.return;n!==null;){var i=n;switch(u3(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&tx();break;case 3:dg(),Si(ks),Si(ja),v3();break;case 5:y3(i);break;case 4:dg();break;case 13:Si($i);break;case 19:Si($i);break;case 10:h3(i.type._context);break;case 22:case 23:T3()}n=n.return}if(sa=e,Oo=e=Vp(e.current,null),wa=Ks=t,Go=0,Iv=null,k3=ab=dd=0,Cs=nv=null,nd!==null){for(t=0;t<nd.length;t++)if(n=nd[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,i.next=a}n.pending=i}nd=null}return e}function oO(e,t){do{var n=Oo;try{if(p3(),I1.current=cx,ux){for(var i=Ui.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ux=!1}if(hd=0,aa=Ho=Ui=null,ev=!1,Av=0,E3.current=null,n===null||n.return===null){Go=1,Iv=t,Oo=null;break}e:{var l=e,a=n.return,g=n,_=t;if(t=wa,g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var w=_,C=g,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var I=C.alternate;I?(C.updateQueue=I.updateQueue,C.memoizedState=I.memoizedState,C.lanes=I.lanes):(C.updateQueue=null,C.memoizedState=null)}var O=n5(a);if(O!==null){O.flags&=-257,r5(O,a,g,l,t),O.mode&1&&t5(l,w,t),t=O,_=w;var D=t.updateQueue;if(D===null){var B=new Set;B.add(_),t.updateQueue=B}else D.add(_);break e}else{if(!(t&1)){t5(l,w,t),I3();break e}_=Error(Ct(426))}}else if(Pi&&g.mode&1){var H=n5(a);if(H!==null){!(H.flags&65536)&&(H.flags|=256),r5(H,a,g,l,t),c3(mg(_,g));break e}}l=_=mg(_,g),Go!==4&&(Go=2),nv===null?nv=[l]:nv.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var R=jI(l,_,t);KA(l,R);break e;case 1:g=_;var U=l.type,q=l.stateNode;if(!(l.flags&128)&&(typeof U.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Up===null||!Up.has(q)))){l.flags|=65536,t&=-t,l.lanes|=t;var Y=VI(l,g,t);KA(l,Y);break e}}l=l.return}while(l!==null)}lO(n)}catch(se){t=se,Oo===n&&n!==null&&(Oo=n=n.return);continue}break}while(1)}function aO(){var e=fx.current;return fx.current=cx,e===null?cx:e}function I3(){(Go===0||Go===3||Go===2)&&(Go=4),sa===null||!(dd&268435455)&&!(ab&268435455)||Tp(sa,wa)}function dx(e,t){var n=Pr;Pr|=2;var i=aO();(sa!==e||wa!==t)&&(lf=null,od(e,t));do try{ez();break}catch(s){oO(e,s)}while(1);if(p3(),Pr=n,fx.current=i,Oo!==null)throw Error(Ct(261));return sa=null,wa=0,Go}function ez(){for(;Oo!==null;)sO(Oo)}function tz(){for(;Oo!==null&&!k8();)sO(Oo)}function sO(e){var t=cO(e.alternate,e,Ks);e.memoizedProps=e.pendingProps,t===null?lO(e):Oo=t,E3.current=null}function lO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=KD(n,t),n!==null){n.flags&=32767,Oo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Go=6,Oo=null;return}}else if(n=WD(n,t,Ks),n!==null){Oo=n;return}if(t=t.sibling,t!==null){Oo=t;return}Oo=t=e}while(t!==null);Go===0&&(Go=5)}function Xh(e,t,n){var i=qr,s=Ml.transition;try{Ml.transition=null,qr=1,nz(e,t,n,i)}finally{Ml.transition=s,qr=i}return null}function nz(e,t,n,i){do ig();while(Lp!==null);if(Pr&6)throw Error(Ct(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ct(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(D8(e,l),e===sa&&(Oo=sa=null,wa=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||G0||(G0=!0,fO(Z1,function(){return ig(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ml.transition,Ml.transition=null;var a=qr;qr=1;var g=Pr;Pr|=4,E3.current=null,XD(e,n),nO(n,e),wD(sC),Q1=!!aC,sC=aC=null,e.current=n,QD(n),A8(),Pr=g,qr=a,Ml.transition=l}else e.current=n;if(G0&&(G0=!1,Lp=e,hx=s),l=e.pendingLanes,l===0&&(Up=null),I8(n.stateNode),Ps(e,mo()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(px)throw px=!1,e=AC,AC=null,e;return hx&1&&e.tag!==0&&ig(),l=e.pendingLanes,l&1?e===PC?rv++:(rv=0,PC=e):rv=0,th(),null}function ig(){if(Lp!==null){var e=U6(hx),t=Ml.transition,n=qr;try{if(Ml.transition=null,qr=16>e?16:e,Lp===null)var i=!1;else{if(e=Lp,Lp=null,hx=0,Pr&6)throw Error(Ct(331));var s=Pr;for(Pr|=4,Yt=e.current;Yt!==null;){var l=Yt,a=l.child;if(Yt.flags&16){var g=l.deletions;if(g!==null){for(var _=0;_<g.length;_++){var w=g[_];for(Yt=w;Yt!==null;){var C=Yt;switch(C.tag){case 0:case 11:case 15:tv(8,C,l)}var A=C.child;if(A!==null)A.return=C,Yt=A;else for(;Yt!==null;){C=Yt;var I=C.sibling,O=C.return;if(JI(C),C===w){Yt=null;break}if(I!==null){I.return=O,Yt=I;break}Yt=O}}}var D=l.alternate;if(D!==null){var B=D.child;if(B!==null){D.child=null;do{var H=B.sibling;B.sibling=null,B=H}while(B!==null)}}Yt=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,Yt=a;else e:for(;Yt!==null;){if(l=Yt,l.flags&2048)switch(l.tag){case 0:case 11:case 15:tv(9,l,l.return)}var R=l.sibling;if(R!==null){R.return=l.return,Yt=R;break e}Yt=l.return}}var U=e.current;for(Yt=U;Yt!==null;){a=Yt;var q=a.child;if(a.subtreeFlags&2064&&q!==null)q.return=a,Yt=q;else e:for(a=U;Yt!==null;){if(g=Yt,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:ob(9,g)}}catch(se){eo(g,g.return,se)}if(g===a){Yt=null;break e}var Y=g.sibling;if(Y!==null){Y.return=g.return,Yt=Y;break e}Yt=g.return}}if(Pr=s,th(),ic&&typeof ic.onPostCommitFiberRoot=="function")try{ic.onPostCommitFiberRoot(Qx,e)}catch{}i=!0}return i}finally{qr=n,Ml.transition=t}}return!1}function g5(e,t,n){t=mg(n,t),t=jI(e,t,1),e=$p(e,t,1),t=is(),e!==null&&(Xv(e,1,t),Ps(e,t))}function eo(e,t,n){if(e.tag===3)g5(e,e,n);else for(;t!==null;){if(t.tag===3){g5(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Up===null||!Up.has(i))){e=mg(n,e),e=VI(t,e,1),t=$p(t,e,1),e=is(),t!==null&&(Xv(t,1,e),Ps(t,e));break}}t=t.return}}function rz(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=is(),e.pingedLanes|=e.suspendedLanes&n,sa===e&&(wa&n)===n&&(Go===4||Go===3&&(wa&130023424)===wa&&500>mo()-A3?od(e,0):k3|=n),Ps(e,t)}function uO(e,t){t===0&&(e.mode&1?(t=D0,D0<<=1,!(D0&130023424)&&(D0=4194304)):t=1);var n=is();e=vf(e,t),e!==null&&(Xv(e,t,n),Ps(e,n))}function iz(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),uO(e,n)}function oz(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ct(314))}i!==null&&i.delete(t),uO(e,n)}var cO;cO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ks.current)Es=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Es=!1,GD(e,t,n);Es=!!(e.flags&131072)}else Es=!1,Pi&&t.flags&1048576&&hI(t,ix,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;L1(e,t),e=t.pendingProps;var s=fg(t,ja.current);rg(t,n),s=x3(null,t,i,e,s,n);var l=b3();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(i)?(l=!0,nx(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,m3(t),s.updater=rb,t.stateNode=s,s._reactInternals=t,gC(t,i,e,n),t=_C(null,t,i,!0,l,n)):(t.tag=0,Pi&&l&&l3(t),rs(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(L1(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=sz(i),e=vu(i,e),s){case 0:t=vC(null,t,i,e,n);break e;case 1:t=a5(null,t,i,e,n);break e;case 11:t=i5(null,t,i,e,n);break e;case 14:t=o5(null,t,i,vu(i.type,e),n);break e}throw Error(Ct(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vu(i,s),vC(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vu(i,s),a5(e,t,i,s,n);case 3:e:{if(WI(t),e===null)throw Error(Ct(387));i=t.pendingProps,l=t.memoizedState,s=l.element,yI(e,t),sx(t,i,null,n);var a=t.memoizedState;if(i=a.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=mg(Error(Ct(423)),t),t=s5(e,t,i,n,s);break e}else if(i!==s){s=mg(Error(Ct(424)),t),t=s5(e,t,i,n,s);break e}else for(Zs=Np(t.stateNode.containerInfo.firstChild),Js=t,Pi=!0,xu=null,n=bI(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pg(),i===s){t=_f(e,t,n);break e}rs(e,t,i,n)}t=t.child}return t;case 5:return wI(t),e===null&&hC(t),i=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,lC(i,s)?a=null:l!==null&&lC(i,l)&&(t.flags|=32),GI(e,t),rs(e,t,a,n),t.child;case 6:return e===null&&hC(t),null;case 13:return KI(e,t,n);case 4:return g3(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=hg(t,null,i,n):rs(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vu(i,s),i5(e,t,i,s,n);case 7:return rs(e,t,t.pendingProps,n),t.child;case 8:return rs(e,t,t.pendingProps.children,n),t.child;case 12:return rs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,di(ox,i._currentValue),i._currentValue=a,l!==null)if(ku(l.value,a)){if(l.children===s.children&&!ks.current){t=_f(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var g=l.dependencies;if(g!==null){a=l.child;for(var _=g.firstContext;_!==null;){if(_.context===i){if(l.tag===1){_=mf(-1,n&-n),_.tag=2;var w=l.updateQueue;if(w!==null){w=w.shared;var C=w.pending;C===null?_.next=_:(_.next=C.next,C.next=_),w.pending=_}}l.lanes|=n,_=l.alternate,_!==null&&(_.lanes|=n),dC(l.return,n,t),g.lanes|=n;break}_=_.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(Ct(341));a.lanes|=n,g=a.alternate,g!==null&&(g.lanes|=n),dC(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}rs(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,rg(t,n),s=Fl(s),i=i(s),t.flags|=1,rs(e,t,i,n),t.child;case 14:return i=t.type,s=vu(i,t.pendingProps),s=vu(i.type,s),o5(e,t,i,s,n);case 15:return qI(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vu(i,s),L1(e,t),t.tag=1,As(i)?(e=!0,nx(t)):e=!1,rg(t,n),_I(t,i,s),gC(t,i,s,n),_C(null,t,i,!0,e,n);case 19:return ZI(e,t,n);case 22:return HI(e,t,n)}throw Error(Ct(156,t.tag))};function fO(e,t){return z6(e,t)}function az(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,n,i){return new az(e,t,n,i)}function O3(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sz(e){if(typeof e=="function")return O3(e)?1:0;if(e!=null){if(e=e.$$typeof,e===XE)return 11;if(e===QE)return 14}return 2}function Vp(e,t){var n=e.alternate;return n===null?(n=Ll(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function F1(e,t,n,i,s,l){var a=2;if(i=e,typeof e=="function")O3(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Nm:return ad(n.children,s,l,t);case ZE:a=8,s|=8;break;case $S:return e=Ll(12,n,t,s|2),e.elementType=$S,e.lanes=l,e;case US:return e=Ll(13,n,t,s),e.elementType=US,e.lanes=l,e;case jS:return e=Ll(19,n,t,s),e.elementType=jS,e.lanes=l,e;case x6:return sb(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case v6:a=10;break e;case _6:a=9;break e;case XE:a=11;break e;case QE:a=14;break e;case Cp:a=16,i=null;break e}throw Error(Ct(130,e==null?e:typeof e,""))}return t=Ll(a,n,t,s),t.elementType=e,t.type=i,t.lanes=l,t}function ad(e,t,n,i){return e=Ll(7,e,i,t),e.lanes=n,e}function sb(e,t,n,i){return e=Ll(22,e,i,t),e.elementType=x6,e.lanes=n,e.stateNode={isHidden:!1},e}function W2(e,t,n){return e=Ll(6,e,null,t),e.lanes=n,e}function K2(e,t,n){return t=Ll(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lz(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=P2(0),this.expirationTimes=P2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P2(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function L3(e,t,n,i,s,l,a,g,_){return e=new lz(e,t,n,g,_),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ll(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},m3(l),e}function uz(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bm,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function pO(e){if(!e)return Kp;e=e._reactInternals;e:{if(bd(e)!==e||e.tag!==1)throw Error(Ct(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ct(171))}if(e.tag===1){var n=e.type;if(As(n))return fI(e,n,t)}return t}function hO(e,t,n,i,s,l,a,g,_){return e=L3(n,i,!0,e,s,l,a,g,_),e.context=pO(null),n=e.current,i=is(),s=jp(n),l=mf(i,s),l.callback=t??null,$p(n,l,s),e.current.lanes=s,Xv(e,s,i),Ps(e,i),e}function lb(e,t,n,i){var s=t.current,l=is(),a=jp(s);return n=pO(n),t.context===null?t.context=n:t.pendingContext=n,t=mf(l,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=$p(s,t,a),e!==null&&(Su(e,s,a,l),T1(e,s,a)),a}function mx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function y5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function M3(e,t){y5(e,t),(e=e.alternate)&&y5(e,t)}function cz(){return null}var dO=typeof reportError=="function"?reportError:function(e){console.error(e)};function R3(e){this._internalRoot=e}ub.prototype.render=R3.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ct(409));lb(e,t,null,null)};ub.prototype.unmount=R3.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;md(function(){lb(null,e,null,null)}),t[yf]=null}};function ub(e){this._internalRoot=e}ub.prototype.unstable_scheduleHydration=function(e){if(e){var t=q6();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pp.length&&t!==0&&t<Pp[n].priority;n++);Pp.splice(n,0,e),n===0&&G6(e)}};function F3(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function v5(){}function fz(e,t,n,i,s){if(s){if(typeof i=="function"){var l=i;i=function(){var w=mx(a);l.call(w)}}var a=hO(t,i,e,0,null,!1,!1,"",v5);return e._reactRootContainer=a,e[yf]=a.current,wv(e.nodeType===8?e.parentNode:e),md(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var g=i;i=function(){var w=mx(_);g.call(w)}}var _=L3(e,0,!1,null,null,!1,!1,"",v5);return e._reactRootContainer=_,e[yf]=_.current,wv(e.nodeType===8?e.parentNode:e),md(function(){lb(t,_,n,i)}),_}function fb(e,t,n,i,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var g=s;s=function(){var _=mx(a);g.call(_)}}lb(t,a,e,s)}else a=fz(n,t,e,s,i);return mx(a)}j6=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qy(t.pendingLanes);n!==0&&(e3(t,n|1),Ps(t,mo()),!(Pr&6)&&(gg=mo()+500,th()))}break;case 13:md(function(){var i=vf(e,1);if(i!==null){var s=is();Su(i,e,1,s)}}),M3(e,1)}};t3=function(e){if(e.tag===13){var t=vf(e,134217728);if(t!==null){var n=is();Su(t,e,134217728,n)}M3(e,134217728)}};V6=function(e){if(e.tag===13){var t=jp(e),n=vf(e,t);if(n!==null){var i=is();Su(n,e,t,i)}M3(e,t)}};q6=function(){return qr};H6=function(e,t){var n=qr;try{return qr=e,t()}finally{qr=n}};YS=function(e,t,n){switch(t){case"input":if(HS(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=tb(i);if(!s)throw Error(Ct(90));w6(i),HS(i,s)}}}break;case"textarea":C6(e,n);break;case"select":t=n.value,t!=null&&Jm(e,!!n.multiple,t,!1)}};O6=P3;L6=md;var pz={usingClientEntryPoint:!1,Events:[Yv,Vm,tb,T6,I6,P3]},Ay={findFiberByHostInstance:td,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},hz={bundleType:Ay.bundleType,version:Ay.version,rendererPackageName:Ay.rendererPackageName,rendererConfig:Ay.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bf.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F6(e),e===null?null:e.stateNode},findFiberByHostInstance:Ay.findFiberByHostInstance||cz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var W0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!W0.isDisabled&&W0.supportsFiber)try{Qx=W0.inject(hz),ic=W0}catch{}}tl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pz;tl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F3(t))throw Error(Ct(200));return uz(e,t,null,n)};tl.createRoot=function(e,t){if(!F3(e))throw Error(Ct(299));var n=!1,i="",s=dO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=L3(e,1,!1,null,null,n,!1,i,s),e[yf]=t.current,wv(e.nodeType===8?e.parentNode:e),new R3(t)};tl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ct(188)):(e=Object.keys(e).join(","),Error(Ct(268,e)));return e=F6(t),e=e===null?null:e.stateNode,e};tl.flushSync=function(e){return md(e)};tl.hydrate=function(e,t,n){if(!cb(t))throw Error(Ct(200));return fb(null,e,t,!0,n)};tl.hydrateRoot=function(e,t,n){if(!F3(e))throw Error(Ct(405));var i=n!=null&&n.hydratedSources||null,s=!1,l="",a=dO;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=hO(t,null,e,1,n??null,s,!1,l,a),e[yf]=t.current,wv(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ub(t)};tl.render=function(e,t,n){if(!cb(t))throw Error(Ct(200));return fb(null,e,t,!1,n)};tl.unmountComponentAtNode=function(e){if(!cb(e))throw Error(Ct(40));return e._reactRootContainer?(md(function(){fb(null,null,e,!1,function(){e._reactRootContainer=null,e[yf]=null})}),!0):!1};tl.unstable_batchedUpdates=P3;tl.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!cb(n))throw Error(Ct(200));if(e==null||e._reactInternals===void 0)throw Error(Ct(38));return fb(e,t,n,!1,i)};tl.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=tl})(c8);const K0=UE(hv);var D3,_5=hv;D3=zS.createRoot=_5.createRoot,zS.hydrateRoot=_5.hydrateRoot;var z3={};Object.defineProperty(z3,"__esModule",{value:!0});z3.getDomContainer=dz;function dz(e){if(!e)return x5();var t=document.querySelector(e);return t||(console.warn('Query selector "'.concat(e,`" doesn't match any existing DOM element. `)+"Are you using a custom HTML template? "+'Add an element matching "'.concat(e,'" to your template or change the containerQuerySelector setting.')),x5())}function x5(){return document.getElementById("root")||mz()}function mz(){var e=document.createElement("div");return e.setAttribute("id","root"),document.body.appendChild(e),e}var B3={},gx={},gz={get exports(){return gx},set exports(e){gx=e}},mO={},pb={},N3={},$3={},la={},yz={get exports(){return la},set exports(e){la=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var n,i="4.17.21",s=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",g="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",w=500,C="__lodash_placeholder__",A=1,I=2,O=4,D=1,B=2,H=1,R=2,U=4,q=8,Y=16,se=32,W=64,ce=128,xe=256,Me=512,$e=30,Le="...",Ge=800,Ye=16,ht=1,Lt=2,Dt=3,qt=1/0,Ne=9007199254740991,ve=17976931348623157e292,_e=0/0,K=4294967295,ae=K-1,lt=K>>>1,Ot=[["ary",ce],["bind",H],["bindKey",R],["curry",q],["curryRight",Y],["flip",Me],["partial",se],["partialRight",W],["rearg",xe]],Ht="[object Arguments]",Ut="[object Array]",Kt="[object AsyncFunction]",cn="[object Boolean]",sn="[object Date]",wr="[object DOMException]",pr="[object Error]",li="[object Function]",dn="[object GeneratorFunction]",$r="[object Map]",Ur="[object Number]",go="[object Null]",yo="[object Object]",ro="[object Promise]",ls="[object Proxy]",Ci="[object RegExp]",ui="[object Set]",Lo="[object String]",Ii="[object Symbol]",Oi="[object Undefined]",Mo="[object WeakMap]",Ro="[object WeakSet]",Xe="[object ArrayBuffer]",ue="[object DataView]",Re="[object Float32Array]",nt="[object Float64Array]",Tt="[object Int8Array]",bn="[object Int16Array]",Jn="[object Int32Array]",tn="[object Uint8Array]",Pn="[object Uint8ClampedArray]",_r="[object Uint16Array]",Sr="[object Uint32Array]",Vn=/\b__p \+= '';/g,qi=/\b(__p \+=) '' \+/g,Mr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fo=/&(?:amp|lt|gt|quot|#39);/g,pa=/[&<>"']/g,io=RegExp(Fo.source),ei=RegExp(pa.source),or=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/[\\^$.*+?()[\]{}|]/g,Te=RegExp(Ae.source),Ee=/^\s+/,le=/\s/,be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,vt=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,st=/[()=,{}\[\]\/\s]/,Mt=/\\(\\)?/g,Rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jt=/\w*$/,rt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,mn=/^0o[0-7]+$/i,gn=/^(?:0|[1-9]\d*)$/,zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tr=/($^)/,Tn=/['\n\r\u2028\u2029\\]/g,ar="\\ud800-\\udfff",Tr="\\u0300-\\u036f",qn="\\ufe20-\\ufe2f",xr="\\u20d0-\\u20ff",zr=Tr+qn+xr,hr="\\u2700-\\u27bf",Cn="a-z\\xdf-\\xf6\\xf8-\\xff",Iu="\\xac\\xb1\\xd7\\xf7",Fn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hl="\\u2000-\\u206f",Cf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ei="A-Z\\xc0-\\xd6\\xd8-\\xde",vo="\\ufe0e\\ufe0f",Ef=Iu+Fn+Hl+Cf,Ts="[']",ki="["+ar+"]",qa="["+Ef+"]",Do="["+zr+"]",Ir="\\d+",zo="["+hr+"]",Hi="["+Cn+"]",Bo="[^"+ar+Ef+Ir+hr+Cn+Ei+"]",Ha="\\ud83c[\\udffb-\\udfff]",Lg="(?:"+Do+"|"+Ha+")",ha="[^"+ar+"]",kf="(?:\\ud83c[\\udde6-\\uddff]){2}",Ga="[\\ud800-\\udbff][\\udc00-\\udfff]",Kr="["+Ei+"]",ci="\\u200d",Gl="(?:"+Hi+"|"+Bo+")",Af="(?:"+Kr+"|"+Bo+")",Td="(?:"+Ts+"(?:d|ll|m|re|s|t|ve))?",Id="(?:"+Ts+"(?:D|LL|M|RE|S|T|VE))?",Pf=Lg+"?",Od="["+vo+"]?",Ld="(?:"+ci+"(?:"+[ha,kf,Ga].join("|")+")"+Od+Pf+")*",Mg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ih="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pc=Od+Pf+Ld,Tf="(?:"+[zo,kf,Ga].join("|")+")"+pc,hc="(?:"+[ha+Do+"?",Do,kf,Ga,ki].join("|")+")",Md=RegExp(Ts,"g"),If=RegExp(Do,"g"),dc=RegExp(Ha+"(?="+Ha+")|"+hc+pc,"g"),No=RegExp([Kr+"?"+Hi+"+"+Td+"(?="+[qa,Kr,"$"].join("|")+")",Af+"+"+Id+"(?="+[qa,Kr+Gl,"$"].join("|")+")",Kr+"?"+Gl+"+"+Td,Kr+"+"+Id,ih,Mg,Ir,Tf].join("|"),"g"),Wl=RegExp("["+ci+ar+zr+vo+"]"),ol=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Of=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],al=-1,sr={};sr[Re]=sr[nt]=sr[Tt]=sr[bn]=sr[Jn]=sr[tn]=sr[Pn]=sr[_r]=sr[Sr]=!0,sr[Ht]=sr[Ut]=sr[Xe]=sr[cn]=sr[ue]=sr[sn]=sr[pr]=sr[li]=sr[$r]=sr[Ur]=sr[yo]=sr[Ci]=sr[ui]=sr[Lo]=sr[Mo]=!1;var er={};er[Ht]=er[Ut]=er[Xe]=er[ue]=er[cn]=er[sn]=er[Re]=er[nt]=er[Tt]=er[bn]=er[Jn]=er[$r]=er[Ur]=er[yo]=er[Ci]=er[ui]=er[Lo]=er[Ii]=er[tn]=er[Pn]=er[_r]=er[Sr]=!0,er[pr]=er[li]=er[Mo]=!1;var Wa={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rg=parseFloat,Fg=parseInt,Mf=typeof Ol=="object"&&Ol&&Ol.Object===Object&&Ol,oh=typeof self=="object"&&self&&self.Object===Object&&self,Li=Mf||oh||Function("return this")(),mc=t&&!t.nodeType&&t,sl=mc&&!0&&e&&!e.nodeType&&e,ah=sl&&sl.exports===mc,sh=ah&&Mf.process,_o=function(){try{var ze=sl&&sl.require&&sl.require("util").types;return ze||sh&&sh.binding&&sh.binding("util")}catch{}}(),Ou=_o&&_o.isArrayBuffer,lh=_o&&_o.isDate,Mi=_o&&_o.isMap,Rf=_o&&_o.isRegExp,Is=_o&&_o.isSet,Os=_o&&_o.isTypedArray;function Ri(ze,it,Qe){switch(Qe.length){case 0:return ze.call(it);case 1:return ze.call(it,Qe[0]);case 2:return ze.call(it,Qe[0],Qe[1]);case 3:return ze.call(it,Qe[0],Qe[1],Qe[2])}return ze.apply(it,Qe)}function Kl(ze,it,Qe,yt){for(var Sn=-1,Zn=ze==null?0:ze.length;++Sn<Zn;){var Br=ze[Sn];it(yt,Br,Qe(Br),ze)}return yt}function Fi(ze,it){for(var Qe=-1,yt=ze==null?0:ze.length;++Qe<yt&&it(ze[Qe],Qe,ze)!==!1;);return ze}function Zl(ze,it){for(var Qe=ze==null?0:ze.length;Qe--&&it(ze[Qe],Qe,ze)!==!1;);return ze}function ll(ze,it){for(var Qe=-1,yt=ze==null?0:ze.length;++Qe<yt;)if(!it(ze[Qe],Qe,ze))return!1;return!0}function $o(ze,it){for(var Qe=-1,yt=ze==null?0:ze.length,Sn=0,Zn=[];++Qe<yt;){var Br=ze[Qe];it(Br,Qe,ze)&&(Zn[Sn++]=Br)}return Zn}function gc(ze,it){var Qe=ze==null?0:ze.length;return!!Qe&&Xl(ze,it,0)>-1}function Cr(ze,it,Qe){for(var yt=-1,Sn=ze==null?0:ze.length;++yt<Sn;)if(Qe(it,ze[yt]))return!0;return!1}function Er(ze,it){for(var Qe=-1,yt=ze==null?0:ze.length,Sn=Array(yt);++Qe<yt;)Sn[Qe]=it(ze[Qe],Qe,ze);return Sn}function Ka(ze,it){for(var Qe=-1,yt=it.length,Sn=ze.length;++Qe<yt;)ze[Sn+Qe]=it[Qe];return ze}function Ff(ze,it,Qe,yt){var Sn=-1,Zn=ze==null?0:ze.length;for(yt&&Zn&&(Qe=ze[++Sn]);++Sn<Zn;)Qe=it(Qe,ze[Sn],Sn,ze);return Qe}function Fd(ze,it,Qe,yt){var Sn=ze==null?0:ze.length;for(yt&&Sn&&(Qe=ze[--Sn]);Sn--;)Qe=it(Qe,ze[Sn],Sn,ze);return Qe}function Df(ze,it){for(var Qe=-1,yt=ze==null?0:ze.length;++Qe<yt;)if(it(ze[Qe],Qe,ze))return!0;return!1}var Dd=yc("length");function Dg(ze){return ze.split("")}function ul(ze){return ze.match(je)||[]}function Ls(ze,it,Qe){var yt;return Qe(ze,function(Sn,Zn,Br){if(it(Sn,Zn,Br))return yt=Zn,!1}),yt}function Ms(ze,it,Qe,yt){for(var Sn=ze.length,Zn=Qe+(yt?1:-1);yt?Zn--:++Zn<Sn;)if(it(ze[Zn],Zn,ze))return Zn;return-1}function Xl(ze,it,Qe){return it===it?Sc(ze,it,Qe):Ms(ze,zf,Qe)}function zd(ze,it,Qe,yt){for(var Sn=Qe-1,Zn=ze.length;++Sn<Zn;)if(yt(ze[Sn],it))return Sn;return-1}function zf(ze){return ze!==ze}function cl(ze,it){var Qe=ze==null?0:ze.length;return Qe?vc(ze,it)/Qe:_e}function yc(ze){return function(it){return it==null?n:it[ze]}}function Rs(ze){return function(it){return ze==null?n:ze[it]}}function Ql(ze,it,Qe,yt,Sn){return Sn(ze,function(Zn,Br,nn){Qe=yt?(yt=!1,Zn):it(Qe,Zn,Br,nn)}),Qe}function Bf(ze,it){var Qe=ze.length;for(ze.sort(it);Qe--;)ze[Qe]=ze[Qe].value;return ze}function vc(ze,it){for(var Qe,yt=-1,Sn=ze.length;++yt<Sn;){var Zn=it(ze[yt]);Zn!==n&&(Qe=Qe===n?Zn:Qe+Zn)}return Qe}function dr(ze,it){for(var Qe=-1,yt=Array(ze);++Qe<ze;)yt[Qe]=it(Qe);return yt}function Nf(ze,it){return Er(it,function(Qe){return[Qe,ze[Qe]]})}function uh(ze){return ze&&ze.slice(0,Cc(ze)+1).replace(Ee,"")}function Gi(ze){return function(it){return ze(it)}}function ch(ze,it){return Er(it,function(Qe){return ze[Qe]})}function _c(ze,it){return ze.has(it)}function Lu(ze,it){for(var Qe=-1,yt=ze.length;++Qe<yt&&Xl(it,ze[Qe],0)>-1;);return Qe}function fh(ze,it){for(var Qe=ze.length;Qe--&&Xl(it,ze[Qe],0)>-1;);return Qe}function Mu(ze,it){for(var Qe=ze.length,yt=0;Qe--;)ze[Qe]===it&&++yt;return yt}var $f=Rs(Wa),Uf=Rs(fi);function xc(ze){return"\\"+Rd[ze]}function Ru(ze,it){return ze==null?n:ze[it]}function fl(ze){return Wl.test(ze)}function bc(ze){return ol.test(ze)}function Za(ze){for(var it,Qe=[];!(it=ze.next()).done;)Qe.push(it.value);return Qe}function jf(ze){var it=-1,Qe=Array(ze.size);return ze.forEach(function(yt,Sn){Qe[++it]=[Sn,yt]}),Qe}function ph(ze,it){return function(Qe){return ze(it(Qe))}}function us(ze,it){for(var Qe=-1,yt=ze.length,Sn=0,Zn=[];++Qe<yt;){var Br=ze[Qe];(Br===it||Br===C)&&(ze[Qe]=C,Zn[Sn++]=Qe)}return Zn}function cs(ze){var it=-1,Qe=Array(ze.size);return ze.forEach(function(yt){Qe[++it]=yt}),Qe}function wc(ze){var it=-1,Qe=Array(ze.size);return ze.forEach(function(yt){Qe[++it]=[yt,yt]}),Qe}function Sc(ze,it,Qe){for(var yt=Qe-1,Sn=ze.length;++yt<Sn;)if(ze[yt]===it)return yt;return-1}function zg(ze,it,Qe){for(var yt=Qe+1;yt--;)if(ze[yt]===it)return yt;return yt}function Fs(ze){return fl(ze)?Bd(ze):Dd(ze)}function Xa(ze){return fl(ze)?Nd(ze):Dg(ze)}function Cc(ze){for(var it=ze.length;it--&&le.test(ze.charAt(it)););return it}var hh=Rs(Lf);function Bd(ze){for(var it=dc.lastIndex=0;dc.test(ze);)++it;return it}function Nd(ze){return ze.match(dc)||[]}function Vf(ze){return ze.match(No)||[]}var qf=function ze(it){it=it==null?Li:pl.defaults(Li.Object(),it,pl.pick(Li,Of));var Qe=it.Array,yt=it.Date,Sn=it.Error,Zn=it.Function,Br=it.Math,nn=it.Object,zn=it.RegExp,Yl=it.String,mi=it.TypeError,Ec=Qe.prototype,Fu=Zn.prototype,fs=nn.prototype,Hf=it["__core-js_shared__"],hl=Fu.toString,lr=fs.hasOwnProperty,kc=0,Wi=function(){var h=/[^.]+$/.exec(Hf&&Hf.keys&&Hf.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),xo=fs.toString,$d=hl.call(nn),Di=Li._,Zo=zn("^"+hl.call(lr).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),At=ah?it.Buffer:n,Ea=it.Symbol,Ds=it.Uint8Array,zs=At?At.allocUnsafe:n,oo=ph(nn.getPrototypeOf,nn),Du=nn.create,bo=fs.propertyIsEnumerable,It=Ec.splice,Ac=Ea?Ea.isConcatSpreadable:n,dl=Ea?Ea.iterator:n,Ki=Ea?Ea.toStringTag:n,Zi=function(){try{var h=Hu(nn,"defineProperty");return h({},"",{}),h}catch{}}(),Gf=it.clearTimeout!==Li.clearTimeout&&it.clearTimeout,Ud=yt&&yt.now!==Li.Date.now&&yt.now,dh=it.setTimeout!==Li.setTimeout&&it.setTimeout,Xi=Br.ceil,Qa=Br.floor,zu=nn.getOwnPropertySymbols,mh=At?At.isBuffer:n,Wf=it.isFinite,Ya=Ec.join,jd=ph(nn.keys,nn),In=Br.max,xn=Br.min,ka=yt.now,Xo=it.parseInt,Qo=Br.random,Jl=Ec.reverse,Aa=Hu(it,"DataView"),Pa=Hu(it,"Map"),Uo=Hu(it,"Promise"),Ta=Hu(it,"Set"),St=Hu(it,"WeakMap"),Qt=Hu(nn,"create"),ao=St&&new St,so={},Bs=Ku(Aa),Yo=Ku(Pa),Ia=Ku(Uo),Bg=Ku(Ta),Ns=Ku(St),ur=Ea?Ea.prototype:n,ti=ur?ur.valueOf:n,Kf=ur?ur.toString:n;function re(h){if(Jr(h)&&!_n(h)&&!(h instanceof Dn)){if(h instanceof jo)return h;if(lr.call(h,"__wrapped__"))return V_(h)}return new jo(h)}var Jo=function(){function h(){}return function(v){if(!Ar(v))return{};if(Du)return Du(v);h.prototype=v;var k=new h;return h.prototype=n,k}}();function lo(){}function jo(h,v){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=n}re.templateSettings={escape:or,evaluate:V,interpolate:Z,variable:"",imports:{_:re}},re.prototype=lo.prototype,re.prototype.constructor=re,jo.prototype=Jo(lo.prototype),jo.prototype.constructor=jo;function Dn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function $s(){var h=new Dn(this.__wrapped__);return h.__actions__=Ra(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=Ra(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=Ra(this.__views__),h}function Bu(){if(this.__filtered__){var h=new Dn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Pc(){var h=this.__wrapped__.value(),v=this.__dir__,k=_n(h),F=v<0,X=k?h.length:0,fe=zw(0,X,this.__views__),ke=fe.start,Oe=fe.end,Ue=Oe-ke,ut=F?Oe:ke-1,ft=this.__iteratees__,gt=ft.length,Vt=0,an=xn(Ue,this.__takeCount__);if(!k||!F&&X==Ue&&an==Ue)return Sh(h,this.__actions__);var kn=[];e:for(;Ue--&&Vt<an;){ut+=v;for(var Qn=-1,An=h[ut];++Qn<gt;){var ir=ft[Qn],yr=ir.iteratee,qs=ir.type,ts=yr(An);if(qs==Lt)An=ts;else if(!ts){if(qs==ht)continue e;break e}}kn[Vt++]=An}return kn}Dn.prototype=Jo(lo.prototype),Dn.prototype.constructor=Dn;function Us(h){var v=-1,k=h==null?0:h.length;for(this.clear();++v<k;){var F=h[v];this.set(F[0],F[1])}}function Tc(){this.__data__=Qt?Qt(null):{},this.size=0}function ml(h){var v=this.has(h)&&delete this.__data__[h];return this.size-=v?1:0,v}function gh(h){var v=this.__data__;if(Qt){var k=v[h];return k===_?n:k}return lr.call(v,h)?v[h]:n}function yh(h){var v=this.__data__;return Qt?v[h]!==n:lr.call(v,h)}function da(h,v){var k=this.__data__;return this.size+=this.has(h)?0:1,k[h]=Qt&&v===n?_:v,this}Us.prototype.clear=Tc,Us.prototype.delete=ml,Us.prototype.get=gh,Us.prototype.has=yh,Us.prototype.set=da;function Oa(h){var v=-1,k=h==null?0:h.length;for(this.clear();++v<k;){var F=h[v];this.set(F[0],F[1])}}function eu(){this.__data__=[],this.size=0}function ma(h){var v=this.__data__,k=We(v,h);if(k<0)return!1;var F=v.length-1;return k==F?v.pop():It.call(v,k,1),--this.size,!0}function vh(h){var v=this.__data__,k=We(v,h);return k<0?n:v[k][1]}function _h(h){return We(this.__data__,h)>-1}function Ic(h,v){var k=this.__data__,F=We(k,h);return F<0?(++this.size,k.push([h,v])):k[F][1]=v,this}Oa.prototype.clear=eu,Oa.prototype.delete=ma,Oa.prototype.get=vh,Oa.prototype.has=_h,Oa.prototype.set=Ic;function La(h){var v=-1,k=h==null?0:h.length;for(this.clear();++v<k;){var F=h[v];this.set(F[0],F[1])}}function c(){this.size=0,this.__data__={hash:new Us,map:new(Pa||Oa),string:new Us}}function p(h){var v=Nc(this,h).delete(h);return this.size-=v?1:0,v}function f(h){return Nc(this,h).get(h)}function m(h){return Nc(this,h).has(h)}function b(h,v){var k=Nc(this,h),F=k.size;return k.set(h,v),this.size+=k.size==F?0:1,this}La.prototype.clear=c,La.prototype.delete=p,La.prototype.get=f,La.prototype.has=m,La.prototype.set=b;function E(h){var v=-1,k=h==null?0:h.length;for(this.__data__=new La;++v<k;)this.add(h[v])}function P(h){return this.__data__.set(h,_),this}function L(h){return this.__data__.has(h)}E.prototype.add=E.prototype.push=P,E.prototype.has=L;function N(h){var v=this.__data__=new Oa(h);this.size=v.size}function G(){this.__data__=new Oa,this.size=0}function te(h){var v=this.__data__,k=v.delete(h);return this.size=v.size,k}function ie(h){return this.__data__.get(h)}function ne(h){return this.__data__.has(h)}function ye(h,v){var k=this.__data__;if(k instanceof Oa){var F=k.__data__;if(!Pa||F.length<s-1)return F.push([h,v]),this.size=++k.size,this;k=this.__data__=new La(F)}return k.set(h,v),this.size=k.size,this}N.prototype.clear=G,N.prototype.delete=te,N.prototype.get=ie,N.prototype.has=ne,N.prototype.set=ye;function me(h,v){var k=_n(h),F=!k&&Mn(h),X=!k&&!F&&po(h),fe=!k&&!F&&!X&&js(h),ke=k||F||X||fe,Oe=ke?dr(h.length,Yl):[],Ue=Oe.length;for(var ut in h)(v||lr.call(h,ut))&&!(ke&&(ut=="length"||X&&(ut=="offset"||ut=="parent")||fe&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||ys(ut,Ue)))&&Oe.push(ut);return Oe}function Ce(h){var v=h.length;return v?h[$g(0,v-1)]:n}function de(h,v){return Ph(Ra(h),bt(v,0,h.length))}function Se(h){return Ph(Ra(h))}function Ie(h,v,k){(k!==n&&!Wn(h[v],k)||k===n&&!(v in h))&&pt(h,v,k)}function Fe(h,v,k){var F=h[v];(!(lr.call(h,v)&&Wn(F,k))||k===n&&!(v in h))&&pt(h,v,k)}function We(h,v){for(var k=h.length;k--;)if(Wn(h[k][0],v))return k;return-1}function He(h,v,k,F){return en(h,function(X,fe,ke){v(F,X,k(X),ke)}),F}function Ke(h,v){return h&&_l(v,Ao(v),h)}function tt(h,v){return h&&_l(v,va(v),h)}function pt(h,v,k){v=="__proto__"&&Zi?Zi(h,v,{configurable:!0,enumerable:!0,value:k,writable:!0}):h[v]=k}function ct(h,v){for(var k=-1,F=v.length,X=Qe(F),fe=h==null;++k<F;)X[k]=fe?n:vm(h,v[k]);return X}function bt(h,v,k){return h===h&&(k!==n&&(h=h<=k?h:k),v!==n&&(h=h>=v?h:v)),h}function Bt(h,v,k,F,X,fe){var ke,Oe=v&A,Ue=v&I,ut=v&O;if(k&&(ke=X?k(h,F,X,fe):k(h)),ke!==n)return ke;if(!Ar(h))return h;var ft=_n(h);if(ft){if(ke=Nw(h),!Oe)return Ra(h,ke)}else{var gt=ta(h),Vt=gt==li||gt==dn;if(po(h))return Zd(h,Oe);if(gt==yo||gt==Ht||Vt&&!X){if(ke=Ue||Vt?{}:z_(h),!Oe)return Ue?A_(h,tt(ke,h)):Lw(h,Ke(ke,h))}else{if(!er[gt])return X?h:{};ke=$w(h,gt,Oe)}}fe||(fe=new N);var an=fe.get(h);if(an)return an;fe.set(h,ke),Nh(h)?h.forEach(function(An){ke.add(Bt(An,v,k,An,h,fe))}):Zc(h)&&h.forEach(function(An,ir){ke.set(ir,Bt(An,v,k,ir,h,fe))});var kn=ut?Ue?Yg:em:Ue?va:Ao,Qn=ft?n:kn(h);return Fi(Qn||h,function(An,ir){Qn&&(ir=An,An=h[ir]),Fe(ke,ir,Bt(An,v,k,ir,h,fe))}),ke}function Xt(h){var v=Ao(h);return function(k){return Wt(k,h,v)}}function Wt(h,v,k){var F=k.length;if(h==null)return!F;for(h=nn(h);F--;){var X=k[F],fe=v[X],ke=h[X];if(ke===n&&!(X in h)||!fe(ke))return!1}return!0}function Nn(h,v,k){if(typeof h!="function")throw new mi(a);return ip(function(){h.apply(n,k)},v)}function Pt(h,v,k,F){var X=-1,fe=gc,ke=!0,Oe=h.length,Ue=[],ut=v.length;if(!Oe)return Ue;k&&(v=Er(v,Gi(k))),F?(fe=Cr,ke=!1):v.length>=s&&(fe=_c,ke=!1,v=new E(v));e:for(;++X<Oe;){var ft=h[X],gt=k==null?ft:k(ft);if(ft=F||ft!==0?ft:0,ke&&gt===gt){for(var Vt=ut;Vt--;)if(v[Vt]===gt)continue e;Ue.push(ft)}else fe(v,gt,F)||Ue.push(ft)}return Ue}var en=P_(jr),wn=P_(pi,!0);function fn(h,v){var k=!0;return en(h,function(F,X,fe){return k=!!v(F,X,fe),k}),k}function on(h,v,k){for(var F=-1,X=h.length;++F<X;){var fe=h[F],ke=v(fe);if(ke!=null&&(Oe===n?ke===ke&&!ra(ke):k(ke,Oe)))var Oe=ke,Ue=fe}return Ue}function ln(h,v,k,F){var X=h.length;for(k=Un(k),k<0&&(k=-k>X?0:X+k),F=F===n||F>X?X:Un(F),F<0&&(F+=X),F=k>F?0:hm(F);k<F;)h[k++]=v;return h}function rn(h,v){var k=[];return en(h,function(F,X,fe){v(F,X,fe)&&k.push(F)}),k}function Ft(h,v,k,F,X){var fe=-1,ke=h.length;for(k||(k=jw),X||(X=[]);++fe<ke;){var Oe=h[fe];v>0&&k(Oe)?v>1?Ft(Oe,v-1,k,F,X):Ka(X,Oe):F||(X[X.length]=Oe)}return X}var nr=Gg(),Zr=Gg(!0);function jr(h,v){return h&&nr(h,v,Ao)}function pi(h,v){return h&&Zr(h,v,Ao)}function ni(h,v){return $o(v,function(k){return es(h[k])})}function kr(h,v){v=iu(v,h);for(var k=0,F=v.length;h!=null&&k<F;)h=h[vs(v[k++])];return k&&k==F?h:n}function Qi(h,v,k){var F=v(h);return _n(h)?F:Ka(F,k(h))}function Xr(h){return h==null?h===n?Oi:go:Ki&&Ki in nn(h)?lu(h):nm(h)}function Yi(h,v){return h>v}function wo(h,v){return h!=null&&lr.call(h,v)}function ps(h,v){return h!=null&&v in nn(h)}function ga(h,v,k){return h>=xn(v,k)&&h<In(v,k)}function Oc(h,v,k){for(var F=k?Cr:gc,X=h[0].length,fe=h.length,ke=fe,Oe=Qe(fe),Ue=1/0,ut=[];ke--;){var ft=h[ke];ke&&v&&(ft=Er(ft,Gi(v))),Ue=xn(ft.length,Ue),Oe[ke]=!k&&(v||X>=120&&ft.length>=120)?new E(ke&&ft):n}ft=h[0];var gt=-1,Vt=Oe[0];e:for(;++gt<X&&ut.length<Ue;){var an=ft[gt],kn=v?v(an):an;if(an=k||an!==0?an:0,!(Vt?_c(Vt,kn):F(ut,kn,k))){for(ke=fe;--ke;){var Qn=Oe[ke];if(!(Qn?_c(Qn,kn):F(h[ke],kn,k)))continue e}Vt&&Vt.push(kn),ut.push(an)}}return ut}function gl(h,v,k,F){return jr(h,function(X,fe,ke){v(F,k(X),fe,ke)}),F}function hs(h,v,k){v=iu(v,h),h=na(h,v);var F=h==null?h:h[vs(_s(v))];return F==null?n:Ri(F,h,k)}function yl(h){return Jr(h)&&Xr(h)==Ht}function Lc(h){return Jr(h)&&Xr(h)==Xe}function Nu(h){return Jr(h)&&Xr(h)==sn}function ea(h,v,k,F,X){return h===v?!0:h==null||v==null||!Jr(h)&&!Jr(v)?h!==h&&v!==v:$u(h,v,k,F,ea,X)}function $u(h,v,k,F,X,fe){var ke=_n(h),Oe=_n(v),Ue=ke?Ut:ta(h),ut=Oe?Ut:ta(v);Ue=Ue==Ht?yo:Ue,ut=ut==Ht?yo:ut;var ft=Ue==yo,gt=ut==yo,Vt=Ue==ut;if(Vt&&po(h)){if(!po(v))return!1;ke=!0,ft=!1}if(Vt&&!ft)return fe||(fe=new N),ke||js(h)?Qg(h,v,k,F,X,fe):Fw(h,v,Ue,k,F,X,fe);if(!(k&D)){var an=ft&&lr.call(h,"__wrapped__"),kn=gt&&lr.call(v,"__wrapped__");if(an||kn){var Qn=an?h.value():h,An=kn?v.value():v;return fe||(fe=new N),X(Qn,An,k,F,fe)}}return Vt?(fe||(fe=new N),Dw(h,v,k,F,X,fe)):!1}function gi(h){return Jr(h)&&ta(h)==$r}function Ja(h,v,k,F){var X=k.length,fe=X,ke=!F;if(h==null)return!fe;for(h=nn(h);X--;){var Oe=k[X];if(ke&&Oe[2]?Oe[1]!==h[Oe[0]]:!(Oe[0]in h))return!1}for(;++X<fe;){Oe=k[X];var Ue=Oe[0],ut=h[Ue],ft=Oe[1];if(ke&&Oe[2]){if(ut===n&&!(Ue in h))return!1}else{var gt=new N;if(F)var Vt=F(ut,ft,Ue,h,v,gt);if(!(Vt===n?ea(ft,ut,D|B,F,gt):Vt))return!1}}return!0}function Ma(h){if(!Ar(h)||qw(h))return!1;var v=es(h)?Zo:ot;return v.test(Ku(h))}function tu(h){return Jr(h)&&Xr(h)==Ci}function ri(h){return Jr(h)&&ta(h)==ui}function Qr(h){return Jr(h)&&Kc(h.length)&&!!sr[Xr(h)]}function uo(h){return typeof h=="function"?h:h==null?bs:typeof h=="object"?_n(h)?bh(h[0],h[1]):Rc(h):lA(h)}function nu(h){if(!Wu(h))return jd(h);var v=[];for(var k in nn(h))lr.call(h,k)&&k!="constructor"&&v.push(k);return v}function Zf(h){if(!Ar(h))return Co(h);var v=Wu(h),k=[];for(var F in h)F=="constructor"&&(v||!lr.call(h,F))||k.push(F);return k}function xh(h,v){return h<v}function Mc(h,v){var k=-1,F=xi(h)?Qe(h.length):[];return en(h,function(X,fe,ke){F[++k]=v(X,fe,ke)}),F}function Rc(h){var v=mr(h);return v.length==1&&v[0][2]?np(v[0][0],v[0][1]):function(k){return k===h||Ja(k,h,v)}}function bh(h,v){return tm(h)&&tp(v)?np(vs(h),v):function(k){var F=vm(k,h);return F===n&&F===v?ia(k,h):ea(v,F,D|B)}}function vl(h,v,k,F,X){h!==v&&nr(v,function(fe,ke){if(X||(X=new N),Ar(fe))Fc(h,v,ke,k,vl,F,X);else{var Oe=F?F(rm(h,ke),fe,ke+"",h,v,X):n;Oe===n&&(Oe=fe),Ie(h,ke,Oe)}},va)}function Fc(h,v,k,F,X,fe,ke){var Oe=rm(h,k),Ue=rm(v,k),ut=ke.get(Ue);if(ut){Ie(h,k,ut);return}var ft=fe?fe(Oe,Ue,k+"",h,v,ke):n,gt=ft===n;if(gt){var Vt=_n(Ue),an=!Vt&&po(Ue),kn=!Vt&&!an&&js(Ue);ft=Ue,Vt||an||kn?_n(Oe)?ft=Oe:Rn(Oe)?ft=Ra(Oe):an?(gt=!1,ft=Zd(Ue,!0)):kn?(gt=!1,ft=E_(Ue,!0)):ft=[]:fu(Ue)||Mn(Ue)?(ft=Oe,Mn(Oe)?ft=gp(Oe):(!Ar(Oe)||es(Oe))&&(ft=z_(Ue))):gt=!1}gt&&(ke.set(Ue,ft),X(ft,Ue,F,fe,ke),ke.delete(Ue)),Ie(h,k,ft)}function Ng(h,v){var k=h.length;if(k)return v+=v<0?k:0,ys(v,k)?h[v]:n}function Vd(h,v,k){v.length?v=Er(v,function(fe){return _n(fe)?function(ke){return kr(ke,fe.length===1?fe[0]:fe)}:fe}):v=[bs];var F=-1;v=Er(v,Gi(yn()));var X=Mc(h,function(fe,ke,Oe){var Ue=Er(v,function(ut){return ut(fe)});return{criteria:Ue,index:++F,value:fe}});return Bf(X,function(fe,ke){return Hg(fe,ke,k)})}function Dc(h,v){return Vo(h,v,function(k,F){return ia(h,F)})}function Vo(h,v,k){for(var F=-1,X=v.length,fe={};++F<X;){var ke=v[F],Oe=kr(h,ke);k(Oe,ke)&&Xf(fe,iu(ke,h),Oe)}return fe}function kw(h){return function(v){return kr(v,h)}}function qd(h,v,k,F){var X=F?zd:Xl,fe=-1,ke=v.length,Oe=h;for(h===v&&(v=Ra(v)),k&&(Oe=Er(h,Gi(k)));++fe<ke;)for(var Ue=0,ut=v[fe],ft=k?k(ut):ut;(Ue=X(Oe,ft,Ue,F))>-1;)Oe!==h&&It.call(Oe,Ue,1),It.call(h,Ue,1);return h}function x_(h,v){for(var k=h?v.length:0,F=k-1;k--;){var X=v[k];if(k==F||X!==fe){var fe=X;ys(X)?It.call(h,X,1):ju(h,X)}}return h}function $g(h,v){return h+Qa(Qo()*(v-h+1))}function Aw(h,v,k,F){for(var X=-1,fe=In(Xi((v-h)/(k||1)),0),ke=Qe(fe);fe--;)ke[F?fe:++X]=h,h+=k;return ke}function Ug(h,v){var k="";if(!h||v<1||v>Ne)return k;do v%2&&(k+=h),v=Qa(v/2),v&&(h+=h);while(v);return k}function Hn(h,v){return Ah(kh(h,v,bs),h+"")}function Pw(h){return Ce(ef(h))}function Hd(h,v){var k=ef(h);return Ph(k,bt(v,0,k.length))}function Xf(h,v,k,F){if(!Ar(h))return h;v=iu(v,h);for(var X=-1,fe=v.length,ke=fe-1,Oe=h;Oe!=null&&++X<fe;){var Ue=vs(v[X]),ut=k;if(Ue==="__proto__"||Ue==="constructor"||Ue==="prototype")return h;if(X!=ke){var ft=Oe[Ue];ut=F?F(ft,Ue,Oe):n,ut===n&&(ut=Ar(ft)?ft:ys(v[X+1])?[]:{})}Fe(Oe,Ue,ut),Oe=Oe[Ue]}return h}var ru=ao?function(h,v){return ao.set(h,v),h}:bs,wh=Zi?function(h,v){return Zi(h,"toString",{configurable:!0,enumerable:!1,value:y2(v),writable:!0})}:bs;function Tw(h){return Ph(ef(h))}function ds(h,v,k){var F=-1,X=h.length;v<0&&(v=-v>X?0:X+v),k=k>X?X:k,k<0&&(k+=X),X=v>k?0:k-v>>>0,v>>>=0;for(var fe=Qe(X);++F<X;)fe[F]=h[F+v];return fe}function Iw(h,v){var k;return en(h,function(F,X,fe){return k=v(F,X,fe),!k}),!!k}function Gd(h,v,k){var F=0,X=h==null?F:h.length;if(typeof v=="number"&&v===v&&X<=lt){for(;F<X;){var fe=F+X>>>1,ke=h[fe];ke!==null&&!ra(ke)&&(k?ke<=v:ke<v)?F=fe+1:X=fe}return X}return jg(h,v,bs,k)}function jg(h,v,k,F){var X=0,fe=h==null?0:h.length;if(fe===0)return 0;v=k(v);for(var ke=v!==v,Oe=v===null,Ue=ra(v),ut=v===n;X<fe;){var ft=Qa((X+fe)/2),gt=k(h[ft]),Vt=gt!==n,an=gt===null,kn=gt===gt,Qn=ra(gt);if(ke)var An=F||kn;else ut?An=kn&&(F||Vt):Oe?An=kn&&Vt&&(F||!an):Ue?An=kn&&Vt&&!an&&(F||!Qn):an||Qn?An=!1:An=F?gt<=v:gt<v;An?X=ft+1:fe=ft}return xn(fe,ae)}function b_(h,v){for(var k=-1,F=h.length,X=0,fe=[];++k<F;){var ke=h[k],Oe=v?v(ke):ke;if(!k||!Wn(Oe,Ue)){var Ue=Oe;fe[X++]=ke===0?0:ke}}return fe}function w_(h){return typeof h=="number"?h:ra(h)?_e:+h}function ya(h){if(typeof h=="string")return h;if(_n(h))return Er(h,ya)+"";if(ra(h))return Kf?Kf.call(h):"";var v=h+"";return v=="0"&&1/h==-qt?"-0":v}function Uu(h,v,k){var F=-1,X=gc,fe=h.length,ke=!0,Oe=[],Ue=Oe;if(k)ke=!1,X=Cr;else if(fe>=s){var ut=v?null:F_(h);if(ut)return cs(ut);ke=!1,X=_c,Ue=new E}else Ue=v?[]:Oe;e:for(;++F<fe;){var ft=h[F],gt=v?v(ft):ft;if(ft=k||ft!==0?ft:0,ke&&gt===gt){for(var Vt=Ue.length;Vt--;)if(Ue[Vt]===gt)continue e;v&&Ue.push(gt),Oe.push(ft)}else X(Ue,gt,k)||(Ue!==Oe&&Ue.push(gt),Oe.push(ft))}return Oe}function ju(h,v){return v=iu(v,h),h=na(h,v),h==null||delete h[vs(_s(v))]}function S_(h,v,k,F){return Xf(h,v,k(kr(h,v)),F)}function Yr(h,v,k,F){for(var X=h.length,fe=F?X:-1;(F?fe--:++fe<X)&&v(h[fe],fe,h););return k?ds(h,F?0:fe,F?fe+1:X):ds(h,F?fe+1:0,F?X:fe)}function Sh(h,v){var k=h;return k instanceof Dn&&(k=k.value()),Ff(v,function(F,X){return X.func.apply(X.thisArg,Ka([F],X.args))},k)}function Wd(h,v,k){var F=h.length;if(F<2)return F?Uu(h[0]):[];for(var X=-1,fe=Qe(F);++X<F;)for(var ke=h[X],Oe=-1;++Oe<F;)Oe!=X&&(fe[X]=Pt(fe[X]||ke,h[Oe],v,k));return Uu(Ft(fe,1),v,k)}function Ch(h,v,k){for(var F=-1,X=h.length,fe=v.length,ke={};++F<X;){var Oe=F<fe?v[F]:n;k(ke,h[F],Oe)}return ke}function Qf(h){return Rn(h)?h:[]}function zc(h){return typeof h=="function"?h:bs}function iu(h,v){return _n(h)?h:tm(h,v)?[h]:$c(Kn(h))}var C_=Hn;function ms(h,v,k){var F=h.length;return k=k===n?F:k,!v&&k>=F?h:ds(h,v,k)}var Kd=Gf||function(h){return Li.clearTimeout(h)};function Zd(h,v){if(v)return h.slice();var k=h.length,F=zs?zs(k):new h.constructor(k);return h.copy(F),F}function Vg(h){var v=new h.constructor(h.byteLength);return new Ds(v).set(new Ds(h)),v}function Eh(h,v){var k=v?Vg(h.buffer):h.buffer;return new h.constructor(k,h.byteOffset,h.byteLength)}function Ow(h){var v=new h.constructor(h.source,jt.exec(h));return v.lastIndex=h.lastIndex,v}function qg(h){return ti?nn(ti.call(h)):{}}function E_(h,v){var k=v?Vg(h.buffer):h.buffer;return new h.constructor(k,h.byteOffset,h.length)}function Xd(h,v){if(h!==v){var k=h!==n,F=h===null,X=h===h,fe=ra(h),ke=v!==n,Oe=v===null,Ue=v===v,ut=ra(v);if(!Oe&&!ut&&!fe&&h>v||fe&&ke&&Ue&&!Oe&&!ut||F&&ke&&Ue||!k&&Ue||!X)return 1;if(!F&&!fe&&!ut&&h<v||ut&&k&&X&&!F&&!fe||Oe&&k&&X||!ke&&X||!Ue)return-1}return 0}function Hg(h,v,k){for(var F=-1,X=h.criteria,fe=v.criteria,ke=X.length,Oe=k.length;++F<ke;){var Ue=Xd(X[F],fe[F]);if(Ue){if(F>=Oe)return Ue;var ut=k[F];return Ue*(ut=="desc"?-1:1)}}return h.index-v.index}function gs(h,v,k,F){for(var X=-1,fe=h.length,ke=k.length,Oe=-1,Ue=v.length,ut=In(fe-ke,0),ft=Qe(Ue+ut),gt=!F;++Oe<Ue;)ft[Oe]=v[Oe];for(;++X<ke;)(gt||X<fe)&&(ft[k[X]]=h[X]);for(;ut--;)ft[Oe++]=h[X++];return ft}function k_(h,v,k,F){for(var X=-1,fe=h.length,ke=-1,Oe=k.length,Ue=-1,ut=v.length,ft=In(fe-Oe,0),gt=Qe(ft+ut),Vt=!F;++X<ft;)gt[X]=h[X];for(var an=X;++Ue<ut;)gt[an+Ue]=v[Ue];for(;++ke<Oe;)(Vt||X<fe)&&(gt[an+k[ke]]=h[X++]);return gt}function Ra(h,v){var k=-1,F=h.length;for(v||(v=Qe(F));++k<F;)v[k]=h[k];return v}function _l(h,v,k,F){var X=!k;k||(k={});for(var fe=-1,ke=v.length;++fe<ke;){var Oe=v[fe],Ue=F?F(k[Oe],h[Oe],Oe,k,h):n;Ue===n&&(Ue=h[Oe]),X?pt(k,Oe,Ue):Fe(k,Oe,Ue)}return k}function Lw(h,v){return _l(h,Gu(h),v)}function A_(h,v){return _l(h,ey(h),v)}function ou(h,v){return function(k,F){var X=_n(k)?Kl:He,fe=v?v():{};return X(k,h,yn(F,2),fe)}}function Yf(h){return Hn(function(v,k){var F=-1,X=k.length,fe=X>1?k[X-1]:n,ke=X>2?k[2]:n;for(fe=h.length>3&&typeof fe=="function"?(X--,fe):n,ke&&Ji(k[0],k[1],ke)&&(fe=X<3?n:fe,X=1),v=nn(v);++F<X;){var Oe=k[F];Oe&&h(v,Oe,F,fe)}return v})}function P_(h,v){return function(k,F){if(k==null)return k;if(!xi(k))return h(k,F);for(var X=k.length,fe=v?X:-1,ke=nn(k);(v?fe--:++fe<X)&&F(ke[fe],fe,ke)!==!1;);return k}}function Gg(h){return function(v,k,F){for(var X=-1,fe=nn(v),ke=F(v),Oe=ke.length;Oe--;){var Ue=ke[h?Oe:++X];if(k(fe[Ue],Ue,fe)===!1)break}return v}}function T_(h,v,k){var F=v&H,X=xl(h);function fe(){var ke=this&&this!==Li&&this instanceof fe?X:h;return ke.apply(F?k:this,arguments)}return fe}function I_(h){return function(v){v=Kn(v);var k=fl(v)?Xa(v):n,F=k?k[0]:v.charAt(0),X=k?ms(k,1).join(""):v.slice(1);return F[h]()+X}}function Jf(h){return function(v){return Ff(aA(A0(v).replace(Md,"")),h,"")}}function xl(h){return function(){var v=arguments;switch(v.length){case 0:return new h;case 1:return new h(v[0]);case 2:return new h(v[0],v[1]);case 3:return new h(v[0],v[1],v[2]);case 4:return new h(v[0],v[1],v[2],v[3]);case 5:return new h(v[0],v[1],v[2],v[3],v[4]);case 6:return new h(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new h(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var k=Jo(h.prototype),F=h.apply(k,v);return Ar(F)?F:k}}function Mw(h,v,k){var F=xl(h);function X(){for(var fe=arguments.length,ke=Qe(fe),Oe=fe,Ue=Bc(X);Oe--;)ke[Oe]=arguments[Oe];var ut=fe<3&&ke[0]!==Ue&&ke[fe-1]!==Ue?[]:us(ke,Ue);if(fe-=ut.length,fe<k)return R_(h,v,Fa,X.placeholder,n,ke,ut,n,n,k-fe);var ft=this&&this!==Li&&this instanceof X?F:h;return Ri(ft,this,ke)}return X}function Qd(h){return function(v,k,F){var X=nn(v);if(!xi(v)){var fe=yn(k,3);v=Ao(v),k=function(Oe){return fe(X[Oe],Oe,X)}}var ke=h(v,k,F);return ke>-1?X[fe?v[ke]:ke]:n}}function ep(h){return su(function(v){var k=v.length,F=k,X=jo.prototype.thru;for(h&&v.reverse();F--;){var fe=v[F];if(typeof fe!="function")throw new mi(a);if(X&&!ke&&qu(fe)=="wrapper")var ke=new jo([],!0)}for(F=ke?F:k;++F<k;){fe=v[F];var Oe=qu(fe),Ue=Oe=="wrapper"?Jg(fe):n;Ue&&ty(Ue[0])&&Ue[1]==(ce|q|se|xe)&&!Ue[4].length&&Ue[9]==1?ke=ke[qu(Ue[0])].apply(ke,Ue[3]):ke=fe.length==1&&ty(fe)?ke[Oe]():ke.thru(fe)}return function(){var ut=arguments,ft=ut[0];if(ke&&ut.length==1&&_n(ft))return ke.plant(ft).value();for(var gt=0,Vt=k?v[gt].apply(this,ut):ft;++gt<k;)Vt=v[gt].call(this,Vt);return Vt}})}function Fa(h,v,k,F,X,fe,ke,Oe,Ue,ut){var ft=v&ce,gt=v&H,Vt=v&R,an=v&(q|Y),kn=v&Me,Qn=Vt?n:xl(h);function An(){for(var ir=arguments.length,yr=Qe(ir),qs=ir;qs--;)yr[qs]=arguments[qs];if(an)var ts=Bc(An),Hs=Mu(yr,ts);if(F&&(yr=gs(yr,F,X,an)),fe&&(yr=k_(yr,fe,ke,an)),ir-=Hs,an&&ir<ut){var ho=us(yr,ts);return R_(h,v,Fa,An.placeholder,k,yr,ho,Oe,Ue,ut-ir)}var du=gt?k:this,tf=Vt?du[h]:h;return ir=yr.length,Oe?yr=N_(yr,Oe):kn&&ir>1&&yr.reverse(),ft&&Ue<ir&&(yr.length=Ue),this&&this!==Li&&this instanceof An&&(tf=Qn||xl(tf)),tf.apply(du,yr)}return An}function O_(h,v){return function(k,F){return gl(k,h,v(F),{})}}function Yd(h,v){return function(k,F){var X;if(k===n&&F===n)return v;if(k!==n&&(X=k),F!==n){if(X===n)return F;typeof k=="string"||typeof F=="string"?(k=ya(k),F=ya(F)):(k=w_(k),F=w_(F)),X=h(k,F)}return X}}function Wg(h){return su(function(v){return v=Er(v,Gi(yn())),Hn(function(k){var F=this;return h(v,function(X){return Ri(X,F,k)})})})}function Vu(h,v){v=v===n?" ":ya(v);var k=v.length;if(k<2)return k?Ug(v,h):v;var F=Ug(v,Xi(h/Fs(v)));return fl(v)?ms(Xa(F),0,h).join(""):F.slice(0,h)}function L_(h,v,k,F){var X=v&H,fe=xl(h);function ke(){for(var Oe=-1,Ue=arguments.length,ut=-1,ft=F.length,gt=Qe(ft+Ue),Vt=this&&this!==Li&&this instanceof ke?fe:h;++ut<ft;)gt[ut]=F[ut];for(;Ue--;)gt[ut++]=arguments[++Oe];return Ri(Vt,X?k:this,gt)}return ke}function M_(h){return function(v,k,F){return F&&typeof F!="number"&&Ji(v,k,F)&&(k=F=n),v=Vs(v),k===n?(k=v,v=0):k=Vs(k),F=F===n?v<k?1:-1:Vs(F),Aw(v,k,F,h)}}function Jd(h){return function(v,k){return typeof v=="string"&&typeof k=="string"||(v=xs(v),k=xs(k)),h(v,k)}}function R_(h,v,k,F,X,fe,ke,Oe,Ue,ut){var ft=v&q,gt=ft?ke:n,Vt=ft?n:ke,an=ft?fe:n,kn=ft?n:fe;v|=ft?se:W,v&=~(ft?W:se),v&U||(v&=~(H|R));var Qn=[h,v,X,an,gt,kn,Vt,Oe,Ue,ut],An=k.apply(n,Qn);return ty(h)&&$_(An,Qn),An.placeholder=F,im(An,h,v)}function Kg(h){var v=Br[h];return function(k,F){if(k=xs(k),F=F==null?0:xn(Un(F),292),F&&Wf(k)){var X=(Kn(k)+"e").split("e"),fe=v(X[0]+"e"+(+X[1]+F));return X=(Kn(fe)+"e").split("e"),+(X[0]+"e"+(+X[1]-F))}return v(k)}}var F_=Ta&&1/cs(new Ta([,-0]))[1]==qt?function(h){return new Ta(h)}:x2;function So(h){return function(v){var k=ta(v);return k==$r?jf(v):k==ui?wc(v):Nf(v,h(v))}}function au(h,v,k,F,X,fe,ke,Oe){var Ue=v&R;if(!Ue&&typeof h!="function")throw new mi(a);var ut=F?F.length:0;if(ut||(v&=~(se|W),F=X=n),ke=ke===n?ke:In(Un(ke),0),Oe=Oe===n?Oe:Un(Oe),ut-=X?X.length:0,v&W){var ft=F,gt=X;F=X=n}var Vt=Ue?n:Jg(h),an=[h,v,k,F,X,ft,gt,fe,ke,Oe];if(Vt&&rp(an,Vt),h=an[0],v=an[1],k=an[2],F=an[3],X=an[4],Oe=an[9]=an[9]===n?Ue?0:h.length:In(an[9]-ut,0),!Oe&&v&(q|Y)&&(v&=~(q|Y)),!v||v==H)var kn=T_(h,v,k);else v==q||v==Y?kn=Mw(h,v,Oe):(v==se||v==(H|se))&&!X.length?kn=L_(h,v,k,F):kn=Fa.apply(n,an);var Qn=Vt?ru:$_;return im(Qn(kn,an),h,v)}function Zg(h,v,k,F){return h===n||Wn(h,fs[k])&&!lr.call(F,k)?v:h}function Xg(h,v,k,F,X,fe){return Ar(h)&&Ar(v)&&(fe.set(v,h),vl(h,v,n,Xg,fe),fe.delete(v)),h}function Rw(h){return fu(h)?n:h}function Qg(h,v,k,F,X,fe){var ke=k&D,Oe=h.length,Ue=v.length;if(Oe!=Ue&&!(ke&&Ue>Oe))return!1;var ut=fe.get(h),ft=fe.get(v);if(ut&&ft)return ut==v&&ft==h;var gt=-1,Vt=!0,an=k&B?new E:n;for(fe.set(h,v),fe.set(v,h);++gt<Oe;){var kn=h[gt],Qn=v[gt];if(F)var An=ke?F(Qn,kn,gt,v,h,fe):F(kn,Qn,gt,h,v,fe);if(An!==n){if(An)continue;Vt=!1;break}if(an){if(!Df(v,function(ir,yr){if(!_c(an,yr)&&(kn===ir||X(kn,ir,k,F,fe)))return an.push(yr)})){Vt=!1;break}}else if(!(kn===Qn||X(kn,Qn,k,F,fe))){Vt=!1;break}}return fe.delete(h),fe.delete(v),Vt}function Fw(h,v,k,F,X,fe,ke){switch(k){case ue:if(h.byteLength!=v.byteLength||h.byteOffset!=v.byteOffset)return!1;h=h.buffer,v=v.buffer;case Xe:return!(h.byteLength!=v.byteLength||!fe(new Ds(h),new Ds(v)));case cn:case sn:case Ur:return Wn(+h,+v);case pr:return h.name==v.name&&h.message==v.message;case Ci:case Lo:return h==v+"";case $r:var Oe=jf;case ui:var Ue=F&D;if(Oe||(Oe=cs),h.size!=v.size&&!Ue)return!1;var ut=ke.get(h);if(ut)return ut==v;F|=B,ke.set(h,v);var ft=Qg(Oe(h),Oe(v),F,X,fe,ke);return ke.delete(h),ft;case Ii:if(ti)return ti.call(h)==ti.call(v)}return!1}function Dw(h,v,k,F,X,fe){var ke=k&D,Oe=em(h),Ue=Oe.length,ut=em(v),ft=ut.length;if(Ue!=ft&&!ke)return!1;for(var gt=Ue;gt--;){var Vt=Oe[gt];if(!(ke?Vt in v:lr.call(v,Vt)))return!1}var an=fe.get(h),kn=fe.get(v);if(an&&kn)return an==v&&kn==h;var Qn=!0;fe.set(h,v),fe.set(v,h);for(var An=ke;++gt<Ue;){Vt=Oe[gt];var ir=h[Vt],yr=v[Vt];if(F)var qs=ke?F(yr,ir,Vt,v,h,fe):F(ir,yr,Vt,h,v,fe);if(!(qs===n?ir===yr||X(ir,yr,k,F,fe):qs)){Qn=!1;break}An||(An=Vt=="constructor")}if(Qn&&!An){var ts=h.constructor,Hs=v.constructor;ts!=Hs&&"constructor"in h&&"constructor"in v&&!(typeof ts=="function"&&ts instanceof ts&&typeof Hs=="function"&&Hs instanceof Hs)&&(Qn=!1)}return fe.delete(h),fe.delete(v),Qn}function su(h){return Ah(kh(h,n,Uc),h+"")}function em(h){return Qi(h,Ao,Gu)}function Yg(h){return Qi(h,va,ey)}var Jg=ao?function(h){return ao.get(h)}:x2;function qu(h){for(var v=h.name+"",k=so[v],F=lr.call(so,v)?k.length:0;F--;){var X=k[F],fe=X.func;if(fe==null||fe==h)return X.name}return v}function Bc(h){var v=lr.call(re,"placeholder")?re:h;return v.placeholder}function yn(){var h=re.iteratee||v2;return h=h===v2?uo:h,arguments.length?h(arguments[0],arguments[1]):h}function Nc(h,v){var k=h.__data__;return Vw(v)?k[typeof v=="string"?"string":"hash"]:k.map}function mr(h){for(var v=Ao(h),k=v.length;k--;){var F=v[k],X=h[F];v[k]=[F,X,tp(X)]}return v}function Hu(h,v){var k=Ru(h,v);return Ma(k)?k:n}function lu(h){var v=lr.call(h,Ki),k=h[Ki];try{h[Ki]=n;var F=!0}catch{}var X=xo.call(h);return F&&(v?h[Ki]=k:delete h[Ki]),X}var Gu=zu?function(h){return h==null?[]:(h=nn(h),$o(zu(h),function(v){return bo.call(h,v)}))}:b2,ey=zu?function(h){for(var v=[];h;)Ka(v,Gu(h)),h=oo(h);return v}:b2,ta=Xr;(Aa&&ta(new Aa(new ArrayBuffer(1)))!=ue||Pa&&ta(new Pa)!=$r||Uo&&ta(Uo.resolve())!=ro||Ta&&ta(new Ta)!=ui||St&&ta(new St)!=Mo)&&(ta=function(h){var v=Xr(h),k=v==yo?h.constructor:n,F=k?Ku(k):"";if(F)switch(F){case Bs:return ue;case Yo:return $r;case Ia:return ro;case Bg:return ui;case Ns:return Mo}return v});function zw(h,v,k){for(var F=-1,X=k.length;++F<X;){var fe=k[F],ke=fe.size;switch(fe.type){case"drop":h+=ke;break;case"dropRight":v-=ke;break;case"take":v=xn(v,h+ke);break;case"takeRight":h=In(h,v-ke);break}}return{start:h,end:v}}function Bw(h){var v=h.match(at);return v?v[1].split(vt):[]}function D_(h,v,k){v=iu(v,h);for(var F=-1,X=v.length,fe=!1;++F<X;){var ke=vs(v[F]);if(!(fe=h!=null&&k(h,ke)))break;h=h[ke]}return fe||++F!=X?fe:(X=h==null?0:h.length,!!X&&Kc(X)&&ys(ke,X)&&(_n(h)||Mn(h)))}function Nw(h){var v=h.length,k=new h.constructor(v);return v&&typeof h[0]=="string"&&lr.call(h,"index")&&(k.index=h.index,k.input=h.input),k}function z_(h){return typeof h.constructor=="function"&&!Wu(h)?Jo(oo(h)):{}}function $w(h,v,k){var F=h.constructor;switch(v){case Xe:return Vg(h);case cn:case sn:return new F(+h);case ue:return Eh(h,k);case Re:case nt:case Tt:case bn:case Jn:case tn:case Pn:case _r:case Sr:return E_(h,k);case $r:return new F;case Ur:case Lo:return new F(h);case Ci:return Ow(h);case ui:return new F;case Ii:return qg(h)}}function Uw(h,v){var k=v.length;if(!k)return h;var F=k-1;return v[F]=(k>1?"& ":"")+v[F],v=v.join(k>2?", ":" "),h.replace(be,`{
/* [wrapped with `+v+`] */
`)}function jw(h){return _n(h)||Mn(h)||!!(Ac&&h&&h[Ac])}function ys(h,v){var k=typeof h;return v=v??Ne,!!v&&(k=="number"||k!="symbol"&&gn.test(h))&&h>-1&&h%1==0&&h<v}function Ji(h,v,k){if(!Ar(k))return!1;var F=typeof v;return(F=="number"?xi(k)&&ys(v,k.length):F=="string"&&v in k)?Wn(k[v],h):!1}function tm(h,v){if(_n(h))return!1;var k=typeof h;return k=="number"||k=="symbol"||k=="boolean"||h==null||ra(h)?!0:oe.test(h)||!J.test(h)||v!=null&&h in nn(v)}function Vw(h){var v=typeof h;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?h!=="__proto__":h===null}function ty(h){var v=qu(h),k=re[v];if(typeof k!="function"||!(v in Dn.prototype))return!1;if(h===k)return!0;var F=Jg(k);return!!F&&h===F[0]}function qw(h){return!!Wi&&Wi in h}var B_=Hf?es:w2;function Wu(h){var v=h&&h.constructor,k=typeof v=="function"&&v.prototype||fs;return h===k}function tp(h){return h===h&&!Ar(h)}function np(h,v){return function(k){return k==null?!1:k[h]===v&&(v!==n||h in nn(k))}}function Da(h){var v=br(h,function(F){return k.size===w&&k.clear(),F}),k=v.cache;return v}function rp(h,v){var k=h[1],F=v[1],X=k|F,fe=X<(H|R|ce),ke=F==ce&&k==q||F==ce&&k==xe&&h[7].length<=v[8]||F==(ce|xe)&&v[7].length<=v[8]&&k==q;if(!(fe||ke))return h;F&H&&(h[2]=v[2],X|=k&H?0:U);var Oe=v[3];if(Oe){var Ue=h[3];h[3]=Ue?gs(Ue,Oe,v[4]):Oe,h[4]=Ue?us(h[3],C):v[4]}return Oe=v[5],Oe&&(Ue=h[5],h[5]=Ue?k_(Ue,Oe,v[6]):Oe,h[6]=Ue?us(h[5],C):v[6]),Oe=v[7],Oe&&(h[7]=Oe),F&ce&&(h[8]=h[8]==null?v[8]:xn(h[8],v[8])),h[9]==null&&(h[9]=v[9]),h[0]=v[0],h[1]=X,h}function Co(h){var v=[];if(h!=null)for(var k in nn(h))v.push(k);return v}function nm(h){return xo.call(h)}function kh(h,v,k){return v=In(v===n?h.length-1:v,0),function(){for(var F=arguments,X=-1,fe=In(F.length-v,0),ke=Qe(fe);++X<fe;)ke[X]=F[v+X];X=-1;for(var Oe=Qe(v+1);++X<v;)Oe[X]=F[X];return Oe[v]=k(ke),Ri(h,this,Oe)}}function na(h,v){return v.length<2?h:kr(h,ds(v,0,-1))}function N_(h,v){for(var k=h.length,F=xn(v.length,k),X=Ra(h);F--;){var fe=v[F];h[F]=ys(fe,k)?X[fe]:n}return h}function rm(h,v){if(!(v==="constructor"&&typeof h[v]=="function")&&v!="__proto__")return h[v]}var $_=U_(ru),ip=dh||function(h,v){return Li.setTimeout(h,v)},Ah=U_(wh);function im(h,v,k){var F=v+"";return Ah(h,Uw(F,j_(Bw(F),k)))}function U_(h){var v=0,k=0;return function(){var F=ka(),X=Ye-(F-k);if(k=F,X>0){if(++v>=Ge)return arguments[0]}else v=0;return h.apply(n,arguments)}}function Ph(h,v){var k=-1,F=h.length,X=F-1;for(v=v===n?F:v;++k<v;){var fe=$g(k,X),ke=h[fe];h[fe]=h[k],h[k]=ke}return h.length=v,h}var $c=Da(function(h){var v=[];return h.charCodeAt(0)===46&&v.push(""),h.replace(ge,function(k,F,X,fe){v.push(X?fe.replace(Mt,"$1"):F||k)}),v});function vs(h){if(typeof h=="string"||ra(h))return h;var v=h+"";return v=="0"&&1/h==-qt?"-0":v}function Ku(h){if(h!=null){try{return hl.call(h)}catch{}try{return h+""}catch{}}return""}function j_(h,v){return Fi(Ot,function(k){var F="_."+k[0];v&k[1]&&!gc(h,F)&&h.push(F)}),h.sort()}function V_(h){if(h instanceof Dn)return h.clone();var v=new jo(h.__wrapped__,h.__chain__);return v.__actions__=Ra(h.__actions__),v.__index__=h.__index__,v.__values__=h.__values__,v}function q_(h,v,k){(k?Ji(h,v,k):v===n)?v=1:v=In(Un(v),0);var F=h==null?0:h.length;if(!F||v<1)return[];for(var X=0,fe=0,ke=Qe(Xi(F/v));X<F;)ke[fe++]=ds(h,X,X+=v);return ke}function H_(h){for(var v=-1,k=h==null?0:h.length,F=0,X=[];++v<k;){var fe=h[v];fe&&(X[F++]=fe)}return X}function G_(){var h=arguments.length;if(!h)return[];for(var v=Qe(h-1),k=arguments[0],F=h;F--;)v[F-1]=arguments[F];return Ka(_n(k)?Ra(k):[k],Ft(v,1))}var W_=Hn(function(h,v){return Rn(h)?Pt(h,Ft(v,1,Rn,!0)):[]}),Hw=Hn(function(h,v){var k=_s(v);return Rn(k)&&(k=n),Rn(h)?Pt(h,Ft(v,1,Rn,!0),yn(k,2)):[]}),Gw=Hn(function(h,v){var k=_s(v);return Rn(k)&&(k=n),Rn(h)?Pt(h,Ft(v,1,Rn,!0),n,k):[]});function K_(h,v,k){var F=h==null?0:h.length;return F?(v=k||v===n?1:Un(v),ds(h,v<0?0:v,F)):[]}function Z_(h,v,k){var F=h==null?0:h.length;return F?(v=k||v===n?1:Un(v),v=F-v,ds(h,0,v<0?0:v)):[]}function om(h,v){return h&&h.length?Yr(h,yn(v,3),!0,!0):[]}function X_(h,v){return h&&h.length?Yr(h,yn(v,3),!0):[]}function am(h,v,k,F){var X=h==null?0:h.length;return X?(k&&typeof k!="number"&&Ji(h,v,k)&&(k=0,F=X),ln(h,v,k,F)):[]}function Th(h,v,k){var F=h==null?0:h.length;if(!F)return-1;var X=k==null?0:Un(k);return X<0&&(X=In(F+X,0)),Ms(h,yn(v,3),X)}function Ih(h,v,k){var F=h==null?0:h.length;if(!F)return-1;var X=F-1;return k!==n&&(X=Un(k),X=k<0?In(F+X,0):xn(X,F-1)),Ms(h,yn(v,3),X,!0)}function Uc(h){var v=h==null?0:h.length;return v?Ft(h,1):[]}function Ww(h){var v=h==null?0:h.length;return v?Ft(h,qt):[]}function Kw(h,v){var k=h==null?0:h.length;return k?(v=v===n?1:Un(v),Ft(h,v)):[]}function Zw(h){for(var v=-1,k=h==null?0:h.length,F={};++v<k;){var X=h[v];F[X[0]]=X[1]}return F}function jc(h){return h&&h.length?h[0]:n}function ny(h,v,k){var F=h==null?0:h.length;if(!F)return-1;var X=k==null?0:Un(k);return X<0&&(X=In(F+X,0)),Xl(h,v,X)}function Q_(h){var v=h==null?0:h.length;return v?ds(h,0,-1):[]}var ry=Hn(function(h){var v=Er(h,Qf);return v.length&&v[0]===h[0]?Oc(v):[]}),Y_=Hn(function(h){var v=_s(h),k=Er(h,Qf);return v===_s(k)?v=n:k.pop(),k.length&&k[0]===h[0]?Oc(k,yn(v,2)):[]}),J_=Hn(function(h){var v=_s(h),k=Er(h,Qf);return v=typeof v=="function"?v:n,v&&k.pop(),k.length&&k[0]===h[0]?Oc(k,n,v):[]});function Xw(h,v){return h==null?"":Ya.call(h,v)}function _s(h){var v=h==null?0:h.length;return v?h[v-1]:n}function Qw(h,v,k){var F=h==null?0:h.length;if(!F)return-1;var X=F;return k!==n&&(X=Un(k),X=X<0?In(F+X,0):xn(X,F-1)),v===v?zg(h,v,X):Ms(h,zf,X,!0)}function sm(h,v){return h&&h.length?Ng(h,Un(v)):n}var iy=Hn(e0);function e0(h,v){return h&&h.length&&v&&v.length?qd(h,v):h}function op(h,v,k){return h&&h.length&&v&&v.length?qd(h,v,yn(k,2)):h}function Oh(h,v,k){return h&&h.length&&v&&v.length?qd(h,v,n,k):h}var cr=su(function(h,v){var k=h==null?0:h.length,F=ct(h,v);return x_(h,Er(v,function(X){return ys(X,k)?+X:X}).sort(Xd)),F});function Yw(h,v){var k=[];if(!(h&&h.length))return k;var F=-1,X=[],fe=h.length;for(v=yn(v,3);++F<fe;){var ke=h[F];v(ke,F,h)&&(k.push(ke),X.push(F))}return x_(h,X),k}function Lh(h){return h==null?h:Jl.call(h)}function ap(h,v,k){var F=h==null?0:h.length;return F?(k&&typeof k!="number"&&Ji(h,v,k)?(v=0,k=F):(v=v==null?0:Un(v),k=k===n?F:Un(k)),ds(h,v,k)):[]}function Jw(h,v){return Gd(h,v)}function e2(h,v,k){return jg(h,v,yn(k,2))}function t2(h,v){var k=h==null?0:h.length;if(k){var F=Gd(h,v);if(F<k&&Wn(h[F],v))return F}return-1}function n2(h,v){return Gd(h,v,!0)}function r2(h,v,k){return jg(h,v,yn(k,2),!0)}function i2(h,v){var k=h==null?0:h.length;if(k){var F=Gd(h,v,!0)-1;if(Wn(h[F],v))return F}return-1}function o2(h){return h&&h.length?b_(h):[]}function t0(h,v){return h&&h.length?b_(h,yn(v,2)):[]}function n0(h){var v=h==null?0:h.length;return v?ds(h,1,v):[]}function r0(h,v,k){return h&&h.length?(v=k||v===n?1:Un(v),ds(h,0,v<0?0:v)):[]}function i0(h,v,k){var F=h==null?0:h.length;return F?(v=k||v===n?1:Un(v),v=F-v,ds(h,v<0?0:v,F)):[]}function lm(h,v){return h&&h.length?Yr(h,yn(v,3),!1,!0):[]}function Vc(h,v){return h&&h.length?Yr(h,yn(v,3)):[]}var oy=Hn(function(h){return Uu(Ft(h,1,Rn,!0))}),sp=Hn(function(h){var v=_s(h);return Rn(v)&&(v=n),Uu(Ft(h,1,Rn,!0),yn(v,2))}),o0=Hn(function(h){var v=_s(h);return v=typeof v=="function"?v:n,Uu(Ft(h,1,Rn,!0),n,v)});function yi(h){return h&&h.length?Uu(h):[]}function Rr(h,v){return h&&h.length?Uu(h,yn(v,2)):[]}function a0(h,v){return v=typeof v=="function"?v:n,h&&h.length?Uu(h,n,v):[]}function um(h){if(!(h&&h.length))return[];var v=0;return h=$o(h,function(k){if(Rn(k))return v=In(k.length,v),!0}),dr(v,function(k){return Er(h,yc(k))})}function ay(h,v){if(!(h&&h.length))return[];var k=um(h);return v==null?k:Er(k,function(F){return Ri(v,n,F)})}var s0=Hn(function(h,v){return Rn(h)?Pt(h,v):[]}),l0=Hn(function(h){return Wd($o(h,Rn))}),sy=Hn(function(h){var v=_s(h);return Rn(v)&&(v=n),Wd($o(h,Rn),yn(v,2))}),qc=Hn(function(h){var v=_s(h);return v=typeof v=="function"?v:n,Wd($o(h,Rn),n,v)}),Hc=Hn(um);function u0(h,v){return Ch(h||[],v||[],Fe)}function vi(h,v){return Ch(h||[],v||[],Xf)}var Mh=Hn(function(h){var v=h.length,k=v>1?h[v-1]:n;return k=typeof k=="function"?(h.pop(),k):n,ay(h,k)});function bl(h){var v=re(h);return v.__chain__=!0,v}function cm(h,v){return v(h),h}function Gc(h,v){return v(h)}var ly=su(function(h){var v=h.length,k=v?h[0]:0,F=this.__wrapped__,X=function(fe){return ct(fe,h)};return v>1||this.__actions__.length||!(F instanceof Dn)||!ys(k)?this.thru(X):(F=F.slice(k,+k+(v?1:0)),F.__actions__.push({func:Gc,args:[X],thisArg:n}),new jo(F,this.__chain__).thru(function(fe){return v&&!fe.length&&fe.push(n),fe}))});function lp(){return bl(this)}function uu(){return new jo(this.value(),this.__chain__)}function c0(){this.__values__===n&&(this.__values__=cy(this.value()));var h=this.__index__>=this.__values__.length,v=h?n:this.__values__[this.__index__++];return{done:h,value:v}}function f0(){return this}function a2(h){for(var v,k=this;k instanceof lo;){var F=V_(k);F.__index__=0,F.__values__=n,v?X.__wrapped__=F:v=F;var X=F;k=k.__wrapped__}return X.__wrapped__=h,v}function zi(){var h=this.__wrapped__;if(h instanceof Dn){var v=h;return this.__actions__.length&&(v=new Dn(this)),v=v.reverse(),v.__actions__.push({func:Gc,args:[Lh],thisArg:n}),new jo(v,this.__chain__)}return this.thru(Lh)}function Zu(){return Sh(this.__wrapped__,this.__actions__)}var p0=ou(function(h,v,k){lr.call(h,k)?++h[k]:pt(h,k,1)});function r(h,v,k){var F=_n(h)?ll:fn;return k&&Ji(h,v,k)&&(v=n),F(h,yn(v,3))}function o(h,v){var k=_n(h)?$o:rn;return k(h,yn(v,3))}var u=Qd(Th),d=Qd(Ih);function y(h,v){return Ft(ee(h,v),1)}function x(h,v){return Ft(ee(h,v),qt)}function S(h,v,k){return k=k===n?1:Un(k),Ft(ee(h,v),k)}function T(h,v){var k=_n(h)?Fi:en;return k(h,yn(v,3))}function M(h,v){var k=_n(h)?Zl:wn;return k(h,yn(v,3))}var z=ou(function(h,v,k){lr.call(h,k)?h[k].push(v):pt(h,k,[v])});function $(h,v,k,F){h=xi(h)?h:ef(h),k=k&&!F?Un(k):0;var X=h.length;return k<0&&(k=In(X+k,0)),pu(h)?k<=X&&h.indexOf(v,k)>-1:!!X&&Xl(h,v,k)>-1}var j=Hn(function(h,v,k){var F=-1,X=typeof v=="function",fe=xi(h)?Qe(h.length):[];return en(h,function(ke){fe[++F]=X?Ri(v,ke,k):hs(ke,v,k)}),fe}),Q=ou(function(h,v,k){pt(h,k,v)});function ee(h,v){var k=_n(h)?Er:Mc;return k(h,yn(v,3))}function pe(h,v,k,F){return h==null?[]:(_n(v)||(v=v==null?[]:[v]),k=F?n:k,_n(k)||(k=k==null?[]:[k]),Vd(h,v,k))}var he=ou(function(h,v,k){h[k?0:1].push(v)},function(){return[[],[]]});function Pe(h,v,k){var F=_n(h)?Ff:Ql,X=arguments.length<3;return F(h,yn(v,4),k,X,en)}function we(h,v,k){var F=_n(h)?Fd:Ql,X=arguments.length<3;return F(h,yn(v,4),k,X,wn)}function De(h,v){var k=_n(h)?$o:rn;return k(h,Fr(yn(v,3)))}function Be(h){var v=_n(h)?Ce:Pw;return v(h)}function Ve(h,v,k){(k?Ji(h,v,k):v===n)?v=1:v=Un(v);var F=_n(h)?de:Hd;return F(h,v)}function qe(h){var v=_n(h)?Se:Tw;return v(h)}function et(h){if(h==null)return 0;if(xi(h))return pu(h)?Fs(h):h.length;var v=ta(h);return v==$r||v==ui?h.size:nu(h).length}function dt(h,v,k){var F=_n(h)?Df:Iw;return k&&Ji(h,v,k)&&(v=n),F(h,yn(v,3))}var _t=Hn(function(h,v){if(h==null)return[];var k=v.length;return k>1&&Ji(h,v[0],v[1])?v=[]:k>2&&Ji(v[0],v[1],v[2])&&(v=[v[0]]),Vd(h,Ft(v,1),[])}),Nt=Ud||function(){return Li.Date.now()};function wt(h,v){if(typeof v!="function")throw new mi(a);return h=Un(h),function(){if(--h<1)return v.apply(this,arguments)}}function Gt(h,v,k){return v=k?n:v,v=h&&v==null?h.length:v,au(h,ce,n,n,n,n,v)}function Et(h,v){var k;if(typeof v!="function")throw new mi(a);return h=Un(h),function(){return--h>0&&(k=v.apply(this,arguments)),h<=1&&(v=n),k}}var vn=Hn(function(h,v,k){var F=H;if(k.length){var X=us(k,Bc(vn));F|=se}return au(h,F,v,k,X)}),Jt=Hn(function(h,v,k){var F=H|R;if(k.length){var X=us(k,Bc(Jt));F|=se}return au(v,F,h,k,X)});function $t(h,v,k){v=k?n:v;var F=au(h,q,n,n,n,n,n,v);return F.placeholder=$t.placeholder,F}function En(h,v,k){v=k?n:v;var F=au(h,Y,n,n,n,n,n,v);return F.placeholder=En.placeholder,F}function pn(h,v,k){var F,X,fe,ke,Oe,Ue,ut=0,ft=!1,gt=!1,Vt=!0;if(typeof h!="function")throw new mi(a);v=xs(v)||0,Ar(k)&&(ft=!!k.leading,gt="maxWait"in k,fe=gt?In(xs(k.maxWait)||0,v):fe,Vt="trailing"in k?!!k.trailing:Vt);function an(ho){var du=F,tf=X;return F=X=n,ut=ho,ke=h.apply(tf,du),ke}function kn(ho){return ut=ho,Oe=ip(ir,v),ft?an(ho):ke}function Qn(ho){var du=ho-Ue,tf=ho-ut,uA=v-du;return gt?xn(uA,fe-tf):uA}function An(ho){var du=ho-Ue,tf=ho-ut;return Ue===n||du>=v||du<0||gt&&tf>=fe}function ir(){var ho=Nt();if(An(ho))return yr(ho);Oe=ip(ir,Qn(ho))}function yr(ho){return Oe=n,Vt&&F?an(ho):(F=X=n,ke)}function qs(){Oe!==n&&Kd(Oe),ut=0,F=Ue=X=Oe=n}function ts(){return Oe===n?ke:yr(Nt())}function Hs(){var ho=Nt(),du=An(ho);if(F=arguments,X=this,Ue=ho,du){if(Oe===n)return kn(Ue);if(gt)return Kd(Oe),Oe=ip(ir,v),an(Ue)}return Oe===n&&(Oe=ip(ir,v)),ke}return Hs.cancel=qs,Hs.flush=ts,Hs}var $n=Hn(function(h,v){return Nn(h,1,v)}),Zt=Hn(function(h,v,k){return Nn(h,xs(v)||0,k)});function Xn(h){return au(h,Me)}function br(h,v){if(typeof h!="function"||v!=null&&typeof v!="function")throw new mi(a);var k=function(){var F=arguments,X=v?v.apply(this,F):F[0],fe=k.cache;if(fe.has(X))return fe.get(X);var ke=h.apply(this,F);return k.cache=fe.set(X,ke)||fe,ke};return k.cache=new(br.Cache||La),k}br.Cache=La;function Fr(h){if(typeof h!="function")throw new mi(a);return function(){var v=arguments;switch(v.length){case 0:return!h.call(this);case 1:return!h.call(this,v[0]);case 2:return!h.call(this,v[0],v[1]);case 3:return!h.call(this,v[0],v[1],v[2])}return!h.apply(this,v)}}function Vr(h){return Et(2,h)}var Dr=C_(function(h,v){v=v.length==1&&_n(v[0])?Er(v[0],Gi(yn())):Er(Ft(v,1),Gi(yn()));var k=v.length;return Hn(function(F){for(var X=-1,fe=xn(F.length,k);++X<fe;)F[X]=v[X].call(this,F[X]);return Ri(h,this,F)})}),Nr=Hn(function(h,v){var k=us(v,Bc(Nr));return au(h,se,n,v,k)}),_i=Hn(function(h,v){var k=us(v,Bc(_i));return au(h,W,n,v,k)}),Ai=su(function(h,v){return au(h,xe,n,n,n,v)});function Eo(h,v){if(typeof h!="function")throw new mi(a);return v=v===n?v:Un(v),Hn(h,v)}function Bi(h,v){if(typeof h!="function")throw new mi(a);return v=v==null?0:In(Un(v),0),Hn(function(k){var F=k[v],X=ms(k,0,v);return F&&Ka(X,F),Ri(h,this,X)})}function ko(h,v,k){var F=!0,X=!0;if(typeof h!="function")throw new mi(a);return Ar(k)&&(F="leading"in k?!!k.leading:F,X="trailing"in k?!!k.trailing:X),pn(h,v,{leading:F,maxWait:v,trailing:X})}function ii(h){return Gt(h,1)}function Ni(h,v){return Nr(zc(v),h)}function Ln(){if(!arguments.length)return[];var h=arguments[0];return _n(h)?h:[h]}function gr(h){return Bt(h,O)}function rr(h,v){return v=typeof v=="function"?v:n,Bt(h,O,v)}function Gn(h){return Bt(h,A|O)}function qo(h,v){return v=typeof v=="function"?v:n,Bt(h,A|O,v)}function co(h,v){return v==null||Wt(h,v,Ao(v))}function Wn(h,v){return h===v||h!==h&&v!==v}var hi=Jd(Yi),fo=Jd(function(h,v){return h>=v}),Mn=yl(function(){return arguments}())?yl:function(h){return Jr(h)&&lr.call(h,"callee")&&!bo.call(h,"callee")},_n=Qe.isArray,za=Ou?Gi(Ou):Lc;function xi(h){return h!=null&&Kc(h.length)&&!es(h)}function Rn(h){return Jr(h)&&xi(h)}function wl(h){return h===!0||h===!1||Jr(h)&&Xr(h)==cn}var po=mh||w2,up=lh?Gi(lh):Nu;function Wc(h){return Jr(h)&&h.nodeType===1&&!fu(h)}function cp(h){if(h==null)return!0;if(xi(h)&&(_n(h)||typeof h=="string"||typeof h.splice=="function"||po(h)||js(h)||Mn(h)))return!h.length;var v=ta(h);if(v==$r||v==ui)return!h.size;if(Wu(h))return!nu(h).length;for(var k in h)if(lr.call(h,k))return!1;return!0}function cu(h,v){return ea(h,v)}function fp(h,v,k){k=typeof k=="function"?k:n;var F=k?k(h,v):n;return F===n?ea(h,v,n,k):!!F}function pp(h){if(!Jr(h))return!1;var v=Xr(h);return v==pr||v==wr||typeof h.message=="string"&&typeof h.name=="string"&&!fu(h)}function hp(h){return typeof h=="number"&&Wf(h)}function es(h){if(!Ar(h))return!1;var v=Xr(h);return v==li||v==dn||v==Kt||v==ls}function Rh(h){return typeof h=="number"&&h==Un(h)}function Kc(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=Ne}function Ar(h){var v=typeof h;return h!=null&&(v=="object"||v=="function")}function Jr(h){return h!=null&&typeof h=="object"}var Zc=Mi?Gi(Mi):gi;function Xu(h,v){return h===v||Ja(h,v,mr(v))}function dp(h,v,k){return k=typeof k=="function"?k:n,Ja(h,v,mr(v),k)}function fm(h){return zh(h)&&h!=+h}function pm(h){if(B_(h))throw new Sn(l);return Ma(h)}function Fh(h){return h===null}function Dh(h){return h==null}function zh(h){return typeof h=="number"||Jr(h)&&Xr(h)==Ur}function fu(h){if(!Jr(h)||Xr(h)!=yo)return!1;var v=oo(h);if(v===null)return!0;var k=lr.call(v,"constructor")&&v.constructor;return typeof k=="function"&&k instanceof k&&hl.call(k)==$d}var Xc=Rf?Gi(Rf):tu;function Bh(h){return Rh(h)&&h>=-Ne&&h<=Ne}var Nh=Is?Gi(Is):ri;function pu(h){return typeof h=="string"||!_n(h)&&Jr(h)&&Xr(h)==Lo}function ra(h){return typeof h=="symbol"||Jr(h)&&Xr(h)==Ii}var js=Os?Gi(Os):Qr;function $h(h){return h===n}function Qc(h){return Jr(h)&&ta(h)==Mo}function Uh(h){return Jr(h)&&Xr(h)==Ro}var mp=Jd(xh),uy=Jd(function(h,v){return h<=v});function cy(h){if(!h)return[];if(xi(h))return pu(h)?Xa(h):Ra(h);if(dl&&h[dl])return Za(h[dl]());var v=ta(h),k=v==$r?jf:v==ui?cs:ef;return k(h)}function Vs(h){if(!h)return h===0?h:0;if(h=xs(h),h===qt||h===-qt){var v=h<0?-1:1;return v*ve}return h===h?h:0}function Un(h){var v=Vs(h),k=v%1;return v===v?k?v-k:v:0}function hm(h){return h?bt(Un(h),0,K):0}function xs(h){if(typeof h=="number")return h;if(ra(h))return _e;if(Ar(h)){var v=typeof h.valueOf=="function"?h.valueOf():h;h=Ar(v)?v+"":v}if(typeof h!="string")return h===0?h:+h;h=uh(h);var k=xt.test(h);return k||mn.test(h)?Fg(h.slice(2),k?2:8):rt.test(h)?_e:+h}function gp(h){return _l(h,va(h))}function oi(h){return h?bt(Un(h),-Ne,Ne):h===0?h:0}function Kn(h){return h==null?"":ya(h)}var s2=Yf(function(h,v){if(Wu(v)||xi(v)){_l(v,Ao(v),h);return}for(var k in v)lr.call(v,k)&&Fe(h,k,v[k])}),hu=Yf(function(h,v){_l(v,va(v),h)}),yp=Yf(function(h,v,k,F){_l(v,va(v),h,F)}),h0=Yf(function(h,v,k,F){_l(v,Ao(v),h,F)}),dm=su(ct);function Sl(h,v){var k=Jo(h);return v==null?k:Ke(k,v)}var mm=Hn(function(h,v){h=nn(h);var k=-1,F=v.length,X=F>2?v[2]:n;for(X&&Ji(v[0],v[1],X)&&(F=1);++k<F;)for(var fe=v[k],ke=va(fe),Oe=-1,Ue=ke.length;++Oe<Ue;){var ut=ke[Oe],ft=h[ut];(ft===n||Wn(ft,fs[ut])&&!lr.call(h,ut))&&(h[ut]=fe[ut])}return h}),jh=Hn(function(h){return h.push(n,Xg),Ri(Jc,n,h)});function gm(h,v){return Ls(h,yn(v,3),jr)}function ym(h,v){return Ls(h,yn(v,3),pi)}function fy(h,v){return h==null?h:nr(h,yn(v,3),va)}function d0(h,v){return h==null?h:Zr(h,yn(v,3),va)}function Vh(h,v){return h&&jr(h,yn(v,3))}function m0(h,v){return h&&pi(h,yn(v,3))}function g0(h){return h==null?[]:ni(h,Ao(h))}function y0(h){return h==null?[]:ni(h,va(h))}function vm(h,v,k){var F=h==null?n:kr(h,v);return F===n?k:F}function v0(h,v){return h!=null&&D_(h,v,wo)}function ia(h,v){return h!=null&&D_(h,v,ps)}var _m=O_(function(h,v,k){v!=null&&typeof v.toString!="function"&&(v=xo.call(v)),h[v]=k},y2(bs)),_0=O_(function(h,v,k){v!=null&&typeof v.toString!="function"&&(v=xo.call(v)),lr.call(h,v)?h[v].push(k):h[v]=[k]},yn),Cl=Hn(hs);function Ao(h){return xi(h)?me(h):nu(h)}function va(h){return xi(h)?me(h,!0):Zf(h)}function Yc(h,v){var k={};return v=yn(v,3),jr(h,function(F,X,fe){pt(k,v(F,X,fe),F)}),k}function vp(h,v){var k={};return v=yn(v,3),jr(h,function(F,X,fe){pt(k,X,v(F,X,fe))}),k}var _p=Yf(function(h,v,k){vl(h,v,k)}),Jc=Yf(function(h,v,k,F){vl(h,v,k,F)}),xp=su(function(h,v){var k={};if(h==null)return k;var F=!1;v=Er(v,function(fe){return fe=iu(fe,h),F||(F=fe.length>1),fe}),_l(h,Yg(h),k),F&&(k=Bt(k,A|I|O,Rw));for(var X=v.length;X--;)ju(k,v[X]);return k});function x0(h,v){return py(h,Fr(yn(v)))}var b0=su(function(h,v){return h==null?{}:Dc(h,v)});function py(h,v){if(h==null)return{};var k=Er(Yg(h),function(F){return[F]});return v=yn(v),Vo(h,k,function(F,X){return v(F,X[0])})}function w0(h,v,k){v=iu(v,h);var F=-1,X=v.length;for(X||(X=1,h=n);++F<X;){var fe=h==null?n:h[vs(v[F])];fe===n&&(F=X,fe=k),h=es(fe)?fe.call(h):fe}return h}function hy(h,v,k){return h==null?h:Xf(h,v,k)}function dy(h,v,k,F){return F=typeof F=="function"?F:n,h==null?h:Xf(h,v,k,F)}var El=So(Ao),my=So(va);function gy(h,v,k){var F=_n(h),X=F||po(h)||js(h);if(v=yn(v,4),k==null){var fe=h&&h.constructor;X?k=F?new fe:[]:Ar(h)?k=es(fe)?Jo(oo(h)):{}:k={}}return(X?Fi:jr)(h,function(ke,Oe,Ue){return v(k,ke,Oe,Ue)}),k}function yy(h,v){return h==null?!0:ju(h,v)}function S0(h,v,k){return h==null?h:S_(h,v,zc(k))}function vy(h,v,k,F){return F=typeof F=="function"?F:n,h==null?h:S_(h,v,zc(k),F)}function ef(h){return h==null?[]:ch(h,Ao(h))}function C0(h){return h==null?[]:ch(h,va(h))}function _y(h,v,k){return k===n&&(k=v,v=n),k!==n&&(k=xs(k),k=k===k?k:0),v!==n&&(v=xs(v),v=v===v?v:0),bt(xs(h),v,k)}function E0(h,v,k){return v=Vs(v),k===n?(k=v,v=0):k=Vs(k),h=xs(h),ga(h,v,k)}function qh(h,v,k){if(k&&typeof k!="boolean"&&Ji(h,v,k)&&(v=k=n),k===n&&(typeof v=="boolean"?(k=v,v=n):typeof h=="boolean"&&(k=h,h=n)),h===n&&v===n?(h=0,v=1):(h=Vs(h),v===n?(v=h,h=0):v=Vs(v)),h>v){var F=h;h=v,v=F}if(k||h%1||v%1){var X=Qo();return xn(h+X*(v-h+Rg("1e-"+((X+"").length-1))),v)}return $g(h,v)}var k0=Jf(function(h,v,k){return v=v.toLowerCase(),h+(k?Hh(v):v)});function Hh(h){return g2(Kn(h).toLowerCase())}function A0(h){return h=Kn(h),h&&h.replace(zt,$f).replace(If,"")}function P0(h,v,k){h=Kn(h),v=ya(v);var F=h.length;k=k===n?F:bt(Un(k),0,F);var X=k;return k-=v.length,k>=0&&h.slice(k,X)==v}function l2(h){return h=Kn(h),h&&ei.test(h)?h.replace(pa,Uf):h}function u2(h){return h=Kn(h),h&&Te.test(h)?h.replace(Ae,"\\$&"):h}var c2=Jf(function(h,v,k){return h+(k?"-":"")+v.toLowerCase()}),f2=Jf(function(h,v,k){return h+(k?" ":"")+v.toLowerCase()}),p2=I_("toLowerCase");function h2(h,v,k){h=Kn(h),v=Un(v);var F=v?Fs(h):0;if(!v||F>=v)return h;var X=(v-F)/2;return Vu(Qa(X),k)+h+Vu(Xi(X),k)}function d2(h,v,k){h=Kn(h),v=Un(v);var F=v?Fs(h):0;return v&&F<v?h+Vu(v-F,k):h}function m2(h,v,k){h=Kn(h),v=Un(v);var F=v?Fs(h):0;return v&&F<v?Vu(v-F,k)+h:h}function kl(h,v,k){return k||v==null?v=0:v&&(v=+v),Xo(Kn(h).replace(Ee,""),v||0)}function xm(h,v,k){return(k?Ji(h,v,k):v===n)?v=1:v=Un(v),Ug(Kn(h),v)}function T0(){var h=arguments,v=Kn(h[0]);return h.length<3?v:v.replace(h[1],h[2])}var Gh=Jf(function(h,v,k){return h+(k?"_":"")+v.toLowerCase()});function I0(h,v,k){return k&&typeof k!="number"&&Ji(h,v,k)&&(v=k=n),k=k===n?K:k>>>0,k?(h=Kn(h),h&&(typeof v=="string"||v!=null&&!Xc(v))&&(v=ya(v),!v&&fl(h))?ms(Xa(h),0,k):h.split(v,k)):[]}var WR=Jf(function(h,v,k){return h+(k?" ":"")+g2(v)});function KR(h,v,k){return h=Kn(h),k=k==null?0:bt(Un(k),0,h.length),v=ya(v),h.slice(k,k+v.length)==v}function ZR(h,v,k){var F=re.templateSettings;k&&Ji(h,v,k)&&(v=n),h=Kn(h),v=yp({},v,F,Zg);var X=yp({},v.imports,F.imports,Zg),fe=Ao(X),ke=ch(X,fe),Oe,Ue,ut=0,ft=v.interpolate||tr,gt="__p += '",Vt=zn((v.escape||tr).source+"|"+ft.source+"|"+(ft===Z?Rt:tr).source+"|"+(v.evaluate||tr).source+"|$","g"),an="//# sourceURL="+(lr.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++al+"]")+`
`;h.replace(Vt,function(An,ir,yr,qs,ts,Hs){return yr||(yr=qs),gt+=h.slice(ut,Hs).replace(Tn,xc),ir&&(Oe=!0,gt+=`' +
__e(`+ir+`) +
'`),ts&&(Ue=!0,gt+=`';
`+ts+`;
__p += '`),yr&&(gt+=`' +
((__t = (`+yr+`)) == null ? '' : __t) +
'`),ut=Hs+An.length,An}),gt+=`';
`;var kn=lr.call(v,"variable")&&v.variable;if(!kn)gt=`with (obj) {
`+gt+`
}
`;else if(st.test(kn))throw new Sn(g);gt=(Ue?gt.replace(Vn,""):gt).replace(qi,"$1").replace(Mr,"$1;"),gt="function("+(kn||"obj")+`) {
`+(kn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Oe?", __e = _.escape":"")+(Ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gt+`return __p
}`;var Qn=sA(function(){return Zn(fe,an+"return "+gt).apply(n,ke)});if(Qn.source=gt,pp(Qn))throw Qn;return Qn}function XR(h){return Kn(h).toLowerCase()}function QR(h){return Kn(h).toUpperCase()}function YR(h,v,k){if(h=Kn(h),h&&(k||v===n))return uh(h);if(!h||!(v=ya(v)))return h;var F=Xa(h),X=Xa(v),fe=Lu(F,X),ke=fh(F,X)+1;return ms(F,fe,ke).join("")}function JR(h,v,k){if(h=Kn(h),h&&(k||v===n))return h.slice(0,Cc(h)+1);if(!h||!(v=ya(v)))return h;var F=Xa(h),X=fh(F,Xa(v))+1;return ms(F,0,X).join("")}function eF(h,v,k){if(h=Kn(h),h&&(k||v===n))return h.replace(Ee,"");if(!h||!(v=ya(v)))return h;var F=Xa(h),X=Lu(F,Xa(v));return ms(F,X).join("")}function tF(h,v){var k=$e,F=Le;if(Ar(v)){var X="separator"in v?v.separator:X;k="length"in v?Un(v.length):k,F="omission"in v?ya(v.omission):F}h=Kn(h);var fe=h.length;if(fl(h)){var ke=Xa(h);fe=ke.length}if(k>=fe)return h;var Oe=k-Fs(F);if(Oe<1)return F;var Ue=ke?ms(ke,0,Oe).join(""):h.slice(0,Oe);if(X===n)return Ue+F;if(ke&&(Oe+=Ue.length-Oe),Xc(X)){if(h.slice(Oe).search(X)){var ut,ft=Ue;for(X.global||(X=zn(X.source,Kn(jt.exec(X))+"g")),X.lastIndex=0;ut=X.exec(ft);)var gt=ut.index;Ue=Ue.slice(0,gt===n?Oe:gt)}}else if(h.indexOf(ya(X),Oe)!=Oe){var Vt=Ue.lastIndexOf(X);Vt>-1&&(Ue=Ue.slice(0,Vt))}return Ue+F}function nF(h){return h=Kn(h),h&&io.test(h)?h.replace(Fo,hh):h}var rF=Jf(function(h,v,k){return h+(k?" ":"")+v.toUpperCase()}),g2=I_("toUpperCase");function aA(h,v,k){return h=Kn(h),v=k?n:v,v===n?bc(h)?Vf(h):ul(h):h.match(v)||[]}var sA=Hn(function(h,v){try{return Ri(h,n,v)}catch(k){return pp(k)?k:new Sn(k)}}),iF=su(function(h,v){return Fi(v,function(k){k=vs(k),pt(h,k,vn(h[k],h))}),h});function oF(h){var v=h==null?0:h.length,k=yn();return h=v?Er(h,function(F){if(typeof F[1]!="function")throw new mi(a);return[k(F[0]),F[1]]}):[],Hn(function(F){for(var X=-1;++X<v;){var fe=h[X];if(Ri(fe[0],this,F))return Ri(fe[1],this,F)}})}function aF(h){return Xt(Bt(h,A))}function y2(h){return function(){return h}}function sF(h,v){return h==null||h!==h?v:h}var lF=ep(),uF=ep(!0);function bs(h){return h}function v2(h){return uo(typeof h=="function"?h:Bt(h,A))}function cF(h){return Rc(Bt(h,A))}function fF(h,v){return bh(h,Bt(v,A))}var pF=Hn(function(h,v){return function(k){return hs(k,h,v)}}),hF=Hn(function(h,v){return function(k){return hs(h,k,v)}});function _2(h,v,k){var F=Ao(v),X=ni(v,F);k==null&&!(Ar(v)&&(X.length||!F.length))&&(k=v,v=h,h=this,X=ni(v,Ao(v)));var fe=!(Ar(k)&&"chain"in k)||!!k.chain,ke=es(h);return Fi(X,function(Oe){var Ue=v[Oe];h[Oe]=Ue,ke&&(h.prototype[Oe]=function(){var ut=this.__chain__;if(fe||ut){var ft=h(this.__wrapped__),gt=ft.__actions__=Ra(this.__actions__);return gt.push({func:Ue,args:arguments,thisArg:h}),ft.__chain__=ut,ft}return Ue.apply(h,Ka([this.value()],arguments))})}),h}function dF(){return Li._===this&&(Li._=Di),this}function x2(){}function mF(h){return h=Un(h),Hn(function(v){return Ng(v,h)})}var gF=Wg(Er),yF=Wg(ll),vF=Wg(Df);function lA(h){return tm(h)?yc(vs(h)):kw(h)}function _F(h){return function(v){return h==null?n:kr(h,v)}}var xF=M_(),bF=M_(!0);function b2(){return[]}function w2(){return!1}function wF(){return{}}function SF(){return""}function CF(){return!0}function EF(h,v){if(h=Un(h),h<1||h>Ne)return[];var k=K,F=xn(h,K);v=yn(v),h-=K;for(var X=dr(F,v);++k<h;)v(k);return X}function kF(h){return _n(h)?Er(h,vs):ra(h)?[h]:Ra($c(Kn(h)))}function AF(h){var v=++kc;return Kn(h)+v}var PF=Yd(function(h,v){return h+v},0),TF=Kg("ceil"),IF=Yd(function(h,v){return h/v},1),OF=Kg("floor");function LF(h){return h&&h.length?on(h,bs,Yi):n}function MF(h,v){return h&&h.length?on(h,yn(v,2),Yi):n}function RF(h){return cl(h,bs)}function FF(h,v){return cl(h,yn(v,2))}function DF(h){return h&&h.length?on(h,bs,xh):n}function zF(h,v){return h&&h.length?on(h,yn(v,2),xh):n}var BF=Yd(function(h,v){return h*v},1),NF=Kg("round"),$F=Yd(function(h,v){return h-v},0);function UF(h){return h&&h.length?vc(h,bs):0}function jF(h,v){return h&&h.length?vc(h,yn(v,2)):0}return re.after=wt,re.ary=Gt,re.assign=s2,re.assignIn=hu,re.assignInWith=yp,re.assignWith=h0,re.at=dm,re.before=Et,re.bind=vn,re.bindAll=iF,re.bindKey=Jt,re.castArray=Ln,re.chain=bl,re.chunk=q_,re.compact=H_,re.concat=G_,re.cond=oF,re.conforms=aF,re.constant=y2,re.countBy=p0,re.create=Sl,re.curry=$t,re.curryRight=En,re.debounce=pn,re.defaults=mm,re.defaultsDeep=jh,re.defer=$n,re.delay=Zt,re.difference=W_,re.differenceBy=Hw,re.differenceWith=Gw,re.drop=K_,re.dropRight=Z_,re.dropRightWhile=om,re.dropWhile=X_,re.fill=am,re.filter=o,re.flatMap=y,re.flatMapDeep=x,re.flatMapDepth=S,re.flatten=Uc,re.flattenDeep=Ww,re.flattenDepth=Kw,re.flip=Xn,re.flow=lF,re.flowRight=uF,re.fromPairs=Zw,re.functions=g0,re.functionsIn=y0,re.groupBy=z,re.initial=Q_,re.intersection=ry,re.intersectionBy=Y_,re.intersectionWith=J_,re.invert=_m,re.invertBy=_0,re.invokeMap=j,re.iteratee=v2,re.keyBy=Q,re.keys=Ao,re.keysIn=va,re.map=ee,re.mapKeys=Yc,re.mapValues=vp,re.matches=cF,re.matchesProperty=fF,re.memoize=br,re.merge=_p,re.mergeWith=Jc,re.method=pF,re.methodOf=hF,re.mixin=_2,re.negate=Fr,re.nthArg=mF,re.omit=xp,re.omitBy=x0,re.once=Vr,re.orderBy=pe,re.over=gF,re.overArgs=Dr,re.overEvery=yF,re.overSome=vF,re.partial=Nr,re.partialRight=_i,re.partition=he,re.pick=b0,re.pickBy=py,re.property=lA,re.propertyOf=_F,re.pull=iy,re.pullAll=e0,re.pullAllBy=op,re.pullAllWith=Oh,re.pullAt=cr,re.range=xF,re.rangeRight=bF,re.rearg=Ai,re.reject=De,re.remove=Yw,re.rest=Eo,re.reverse=Lh,re.sampleSize=Ve,re.set=hy,re.setWith=dy,re.shuffle=qe,re.slice=ap,re.sortBy=_t,re.sortedUniq=o2,re.sortedUniqBy=t0,re.split=I0,re.spread=Bi,re.tail=n0,re.take=r0,re.takeRight=i0,re.takeRightWhile=lm,re.takeWhile=Vc,re.tap=cm,re.throttle=ko,re.thru=Gc,re.toArray=cy,re.toPairs=El,re.toPairsIn=my,re.toPath=kF,re.toPlainObject=gp,re.transform=gy,re.unary=ii,re.union=oy,re.unionBy=sp,re.unionWith=o0,re.uniq=yi,re.uniqBy=Rr,re.uniqWith=a0,re.unset=yy,re.unzip=um,re.unzipWith=ay,re.update=S0,re.updateWith=vy,re.values=ef,re.valuesIn=C0,re.without=s0,re.words=aA,re.wrap=Ni,re.xor=l0,re.xorBy=sy,re.xorWith=qc,re.zip=Hc,re.zipObject=u0,re.zipObjectDeep=vi,re.zipWith=Mh,re.entries=El,re.entriesIn=my,re.extend=hu,re.extendWith=yp,_2(re,re),re.add=PF,re.attempt=sA,re.camelCase=k0,re.capitalize=Hh,re.ceil=TF,re.clamp=_y,re.clone=gr,re.cloneDeep=Gn,re.cloneDeepWith=qo,re.cloneWith=rr,re.conformsTo=co,re.deburr=A0,re.defaultTo=sF,re.divide=IF,re.endsWith=P0,re.eq=Wn,re.escape=l2,re.escapeRegExp=u2,re.every=r,re.find=u,re.findIndex=Th,re.findKey=gm,re.findLast=d,re.findLastIndex=Ih,re.findLastKey=ym,re.floor=OF,re.forEach=T,re.forEachRight=M,re.forIn=fy,re.forInRight=d0,re.forOwn=Vh,re.forOwnRight=m0,re.get=vm,re.gt=hi,re.gte=fo,re.has=v0,re.hasIn=ia,re.head=jc,re.identity=bs,re.includes=$,re.indexOf=ny,re.inRange=E0,re.invoke=Cl,re.isArguments=Mn,re.isArray=_n,re.isArrayBuffer=za,re.isArrayLike=xi,re.isArrayLikeObject=Rn,re.isBoolean=wl,re.isBuffer=po,re.isDate=up,re.isElement=Wc,re.isEmpty=cp,re.isEqual=cu,re.isEqualWith=fp,re.isError=pp,re.isFinite=hp,re.isFunction=es,re.isInteger=Rh,re.isLength=Kc,re.isMap=Zc,re.isMatch=Xu,re.isMatchWith=dp,re.isNaN=fm,re.isNative=pm,re.isNil=Dh,re.isNull=Fh,re.isNumber=zh,re.isObject=Ar,re.isObjectLike=Jr,re.isPlainObject=fu,re.isRegExp=Xc,re.isSafeInteger=Bh,re.isSet=Nh,re.isString=pu,re.isSymbol=ra,re.isTypedArray=js,re.isUndefined=$h,re.isWeakMap=Qc,re.isWeakSet=Uh,re.join=Xw,re.kebabCase=c2,re.last=_s,re.lastIndexOf=Qw,re.lowerCase=f2,re.lowerFirst=p2,re.lt=mp,re.lte=uy,re.max=LF,re.maxBy=MF,re.mean=RF,re.meanBy=FF,re.min=DF,re.minBy=zF,re.stubArray=b2,re.stubFalse=w2,re.stubObject=wF,re.stubString=SF,re.stubTrue=CF,re.multiply=BF,re.nth=sm,re.noConflict=dF,re.noop=x2,re.now=Nt,re.pad=h2,re.padEnd=d2,re.padStart=m2,re.parseInt=kl,re.random=qh,re.reduce=Pe,re.reduceRight=we,re.repeat=xm,re.replace=T0,re.result=w0,re.round=NF,re.runInContext=ze,re.sample=Be,re.size=et,re.snakeCase=Gh,re.some=dt,re.sortedIndex=Jw,re.sortedIndexBy=e2,re.sortedIndexOf=t2,re.sortedLastIndex=n2,re.sortedLastIndexBy=r2,re.sortedLastIndexOf=i2,re.startCase=WR,re.startsWith=KR,re.subtract=$F,re.sum=UF,re.sumBy=jF,re.template=ZR,re.times=EF,re.toFinite=Vs,re.toInteger=Un,re.toLength=hm,re.toLower=XR,re.toNumber=xs,re.toSafeInteger=oi,re.toString=Kn,re.toUpper=QR,re.trim=YR,re.trimEnd=JR,re.trimStart=eF,re.truncate=tF,re.unescape=nF,re.uniqueId=AF,re.upperCase=rF,re.upperFirst=g2,re.each=T,re.eachRight=M,re.first=jc,_2(re,function(){var h={};return jr(re,function(v,k){lr.call(re.prototype,k)||(h[k]=v)}),h}(),{chain:!1}),re.VERSION=i,Fi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){re[h].placeholder=re}),Fi(["drop","take"],function(h,v){Dn.prototype[h]=function(k){k=k===n?1:In(Un(k),0);var F=this.__filtered__&&!v?new Dn(this):this.clone();return F.__filtered__?F.__takeCount__=xn(k,F.__takeCount__):F.__views__.push({size:xn(k,K),type:h+(F.__dir__<0?"Right":"")}),F},Dn.prototype[h+"Right"]=function(k){return this.reverse()[h](k).reverse()}}),Fi(["filter","map","takeWhile"],function(h,v){var k=v+1,F=k==ht||k==Dt;Dn.prototype[h]=function(X){var fe=this.clone();return fe.__iteratees__.push({iteratee:yn(X,3),type:k}),fe.__filtered__=fe.__filtered__||F,fe}}),Fi(["head","last"],function(h,v){var k="take"+(v?"Right":"");Dn.prototype[h]=function(){return this[k](1).value()[0]}}),Fi(["initial","tail"],function(h,v){var k="drop"+(v?"":"Right");Dn.prototype[h]=function(){return this.__filtered__?new Dn(this):this[k](1)}}),Dn.prototype.compact=function(){return this.filter(bs)},Dn.prototype.find=function(h){return this.filter(h).head()},Dn.prototype.findLast=function(h){return this.reverse().find(h)},Dn.prototype.invokeMap=Hn(function(h,v){return typeof h=="function"?new Dn(this):this.map(function(k){return hs(k,h,v)})}),Dn.prototype.reject=function(h){return this.filter(Fr(yn(h)))},Dn.prototype.slice=function(h,v){h=Un(h);var k=this;return k.__filtered__&&(h>0||v<0)?new Dn(k):(h<0?k=k.takeRight(-h):h&&(k=k.drop(h)),v!==n&&(v=Un(v),k=v<0?k.dropRight(-v):k.take(v-h)),k)},Dn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},Dn.prototype.toArray=function(){return this.take(K)},jr(Dn.prototype,function(h,v){var k=/^(?:filter|find|map|reject)|While$/.test(v),F=/^(?:head|last)$/.test(v),X=re[F?"take"+(v=="last"?"Right":""):v],fe=F||/^find/.test(v);X&&(re.prototype[v]=function(){var ke=this.__wrapped__,Oe=F?[1]:arguments,Ue=ke instanceof Dn,ut=Oe[0],ft=Ue||_n(ke),gt=function(ir){var yr=X.apply(re,Ka([ir],Oe));return F&&Vt?yr[0]:yr};ft&&k&&typeof ut=="function"&&ut.length!=1&&(Ue=ft=!1);var Vt=this.__chain__,an=!!this.__actions__.length,kn=fe&&!Vt,Qn=Ue&&!an;if(!fe&&ft){ke=Qn?ke:new Dn(this);var An=h.apply(ke,Oe);return An.__actions__.push({func:Gc,args:[gt],thisArg:n}),new jo(An,Vt)}return kn&&Qn?h.apply(this,Oe):(An=this.thru(gt),kn?F?An.value()[0]:An.value():An)})}),Fi(["pop","push","shift","sort","splice","unshift"],function(h){var v=Ec[h],k=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",F=/^(?:pop|shift)$/.test(h);re.prototype[h]=function(){var X=arguments;if(F&&!this.__chain__){var fe=this.value();return v.apply(_n(fe)?fe:[],X)}return this[k](function(ke){return v.apply(_n(ke)?ke:[],X)})}}),jr(Dn.prototype,function(h,v){var k=re[v];if(k){var F=k.name+"";lr.call(so,F)||(so[F]=[]),so[F].push({name:v,func:k})}}),so[Fa(n,R).name]=[{name:"wrapper",func:n}],Dn.prototype.clone=$s,Dn.prototype.reverse=Bu,Dn.prototype.value=Pc,re.prototype.at=ly,re.prototype.chain=lp,re.prototype.commit=uu,re.prototype.next=c0,re.prototype.plant=a2,re.prototype.reverse=zi,re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=Zu,re.prototype.first=re.prototype.head,dl&&(re.prototype[dl]=f0),re},pl=qf();sl?((sl.exports=pl)._=pl,mc._=pl):Li._=pl}).call(Ol)})(yz,la);var Au={},Nl={},Zp={},vz={get exports(){return Zp},set exports(e){Zp=e}},si={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb=60103,db=60106,e_=60107,t_=60108,n_=60114,r_=60109,i_=60110,o_=60112,a_=60113,U3=60120,s_=60115,l_=60116,gO=60121,yO=60122,vO=60117,_O=60129,xO=60131;if(typeof Symbol=="function"&&Symbol.for){var _a=Symbol.for;hb=_a("react.element"),db=_a("react.portal"),e_=_a("react.fragment"),t_=_a("react.strict_mode"),n_=_a("react.profiler"),r_=_a("react.provider"),i_=_a("react.context"),o_=_a("react.forward_ref"),a_=_a("react.suspense"),U3=_a("react.suspense_list"),s_=_a("react.memo"),l_=_a("react.lazy"),gO=_a("react.block"),yO=_a("react.server.block"),vO=_a("react.fundamental"),_O=_a("react.debug_trace_mode"),xO=_a("react.legacy_hidden")}function Pu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hb:switch(e=e.type,e){case e_:case n_:case t_:case a_:case U3:return e;default:switch(e=e&&e.$$typeof,e){case i_:case o_:case l_:case s_:case r_:return e;default:return t}}case db:return t}}}var _z=r_,xz=hb,bz=o_,wz=e_,Sz=l_,Cz=s_,Ez=db,kz=n_,Az=t_,Pz=a_;si.ContextConsumer=i_;si.ContextProvider=_z;si.Element=xz;si.ForwardRef=bz;si.Fragment=wz;si.Lazy=Sz;si.Memo=Cz;si.Portal=Ez;si.Profiler=kz;si.StrictMode=Az;si.Suspense=Pz;si.isAsyncMode=function(){return!1};si.isConcurrentMode=function(){return!1};si.isContextConsumer=function(e){return Pu(e)===i_};si.isContextProvider=function(e){return Pu(e)===r_};si.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hb};si.isForwardRef=function(e){return Pu(e)===o_};si.isFragment=function(e){return Pu(e)===e_};si.isLazy=function(e){return Pu(e)===l_};si.isMemo=function(e){return Pu(e)===s_};si.isPortal=function(e){return Pu(e)===db};si.isProfiler=function(e){return Pu(e)===n_};si.isStrictMode=function(e){return Pu(e)===t_};si.isSuspense=function(e){return Pu(e)===a_};si.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===e_||e===n_||e===_O||e===t_||e===a_||e===U3||e===xO||typeof e=="object"&&e!==null&&(e.$$typeof===l_||e.$$typeof===s_||e.$$typeof===r_||e.$$typeof===i_||e.$$typeof===o_||e.$$typeof===vO||e.$$typeof===gO||e[0]===yO)};si.typeOf=Pu;(function(e){e.exports=si})(vz);Object.defineProperty(Nl,"__esModule",{value:!0});Nl.isArray=Mz;Nl.isBoolean=SO;Nl.isNull=CO;Nl.isNumber=wO;Nl.isObject=Lz;Nl.isPrimitiveData=Oz;Nl.isString=bO;Nl.isUndefined=EO;var Tz=la,Iz=Zp;function bO(e){return typeof e=="string"}function wO(e){return typeof e=="number"}function SO(e){return typeof e=="boolean"}function CO(e){return e===null}function EO(e){return e===void 0}function Oz(e){return bO(e)||wO(e)||SO(e)||CO(e)||EO(e)}function Lz(e){return(0,Tz.isPlainObject)(e)&&!(0,Iz.isElement)(e)}function Mz(e){return Array.isArray(e)}var mb={},kO={},j3={};Object.defineProperty(j3,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function b5(e){return Object.prototype.toString.call(e)==="[object Object]"}function Rz(e){var t,n;return b5(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(b5(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}j3.isPlainObject=Rz;var V3={},yx=Ol&&Ol.__assign||function(){return yx=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},yx.apply(this,arguments)},Fz=Ol&&Ol.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<n;t++)for(var l=arguments[t],a=0,g=l.length;a<g;a++,s++)i[s]=l[a];return i};Object.defineProperty(V3,"__esModule",{value:!0});var Py=[];function Dz(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function zz(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bz(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function D1(e,t,n){n===void 0&&(n="");var i={indent:"	",singleQuotes:!0},s=yx(yx({},i),t),l;s.inlineCharacterLimit===void 0?l={newLine:`
`,newLineOrSpace:`
`,pad:n,indent:n+s.indent}:l={newLine:"@@__PRETTY_PRINT_NEW_LINE__@@",newLineOrSpace:"@@__PRETTY_PRINT_NEW_LINE_OR_SPACE__@@",pad:"@@__PRETTY_PRINT_PAD__@@",indent:"@@__PRETTY_PRINT_INDENT__@@"};var a=function(w){if(s.inlineCharacterLimit===void 0)return w;var C=w.replace(new RegExp(l.newLine,"g"),"").replace(new RegExp(l.newLineOrSpace,"g")," ").replace(new RegExp(l.pad+"|"+l.indent,"g"),"");return C.length<=s.inlineCharacterLimit?C:w.replace(new RegExp(l.newLine+"|"+l.newLineOrSpace,"g"),`
`).replace(new RegExp(l.pad,"g"),n).replace(new RegExp(l.indent,"g"),n+s.indent)};if(Py.indexOf(e)!==-1)return'"[Circular]"';if(e==null||typeof e=="number"||typeof e=="boolean"||typeof e=="function"||typeof e=="symbol"||zz(e))return String(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e)){if(e.length===0)return"[]";Py.push(e);var g="["+l.newLine+e.map(function(w,C){var A=e.length-1===C?l.newLine:","+l.newLineOrSpace,I=D1(w,s,n+s.indent);return s.transform&&(I=s.transform(e,C,I)),l.indent+I+A}).join("")+l.pad+"]";return Py.pop(),a(g)}if(Dz(e)){var _=Fz(Object.keys(e),Bz(e));if(s.filter&&(_=_.filter(function(C){return s.filter&&s.filter(e,C)})),_.length===0)return"{}";Py.push(e);var g="{"+l.newLine+_.map(function(C,A){var I=_.length-1===A?l.newLine:","+l.newLineOrSpace,O=typeof C=="symbol",D=!O&&/^[a-z$_][a-z$_0-9]*$/i.test(C.toString()),B=O||D?C:D1(C,s),H=D1(e[C],s,n+s.indent);return s.transform&&(H=s.transform(e,C,H)),l.indent+String(B)+": "+H+I}).join("")+l.pad+"}";return Py.pop(),a(g)}return e=String(e).replace(/[\r\n]/g,function(w){return w===`
`?"\\n":"\\r"}),s.singleQuotes?(e=e.replace(/\\?'/g,"\\'"),"'"+e+"'"):(e=e.replace(/"/g,'\\"'),'"'+e+'"')}V3.prettyPrint=D1;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=j3,n=mt,i=V3,s=Zp;function l(Xe){return Xe&&typeof Xe=="object"&&"default"in Xe?Xe:{default:Xe}}function a(Xe){if(Xe&&Xe.__esModule)return Xe;var ue=Object.create(null);return Xe&&Object.keys(Xe).forEach(function(Re){if(Re!=="default"){var nt=Object.getOwnPropertyDescriptor(Xe,Re);Object.defineProperty(ue,Re,nt.get?nt:{enumerable:!0,get:function(){return Xe[Re]}})}}),ue.default=Xe,Object.freeze(ue)}var g=a(n),_=l(n),w=function(Xe,ue){return Xe===0?"":new Array(Xe*ue).fill(" ").join("")};function C(Xe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(ue){return typeof ue}:C=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},C(Xe)}function A(Xe){return I(Xe)||O(Xe)||D(Xe)||H()}function I(Xe){if(Array.isArray(Xe))return B(Xe)}function O(Xe){if(typeof Symbol<"u"&&Xe[Symbol.iterator]!=null||Xe["@@iterator"]!=null)return Array.from(Xe)}function D(Xe,ue){if(Xe){if(typeof Xe=="string")return B(Xe,ue);var Re=Object.prototype.toString.call(Xe).slice(8,-1);if(Re==="Object"&&Xe.constructor&&(Re=Xe.constructor.name),Re==="Map"||Re==="Set")return Array.from(Xe);if(Re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re))return B(Xe,ue)}}function B(Xe,ue){(ue==null||ue>Xe.length)&&(ue=Xe.length);for(var Re=0,nt=new Array(ue);Re<ue;Re++)nt[Re]=Xe[Re];return nt}function H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(Xe,ue){return Xe===null||C(Xe)!=="object"||Xe instanceof Date||Xe instanceof RegExp||g.isValidElement(Xe)?Xe:(ue.add(Xe),Array.isArray(Xe)?Xe.map(function(Re){return R(Re,ue)}):Object.keys(Xe).sort().reduce(function(Re,nt){return nt==="_owner"||(nt==="current"||ue.has(Xe[nt])?Re[nt]="[Circular]":Re[nt]=R(Xe[nt],ue)),Re},{}))}function U(Xe){return R(Xe,new WeakSet)}var q=function(ue){return{type:"string",value:ue}},Y=function(ue){return{type:"number",value:ue}},se=function(ue,Re,nt,Tt){return{type:"ReactElement",displayName:ue,props:Re,defaultProps:nt,childrens:Tt}},W=function(ue,Re){return{type:"ReactFragment",key:ue,childrens:Re}},ce=!!n.Fragment,xe=function(ue){return!ue.name||ue.name==="_default"?"No Display Name":ue.name},Me=function Xe(ue){switch(!0){case!!ue.displayName:return ue.displayName;case ue.$$typeof===s.Memo:return Xe(ue.type);case ue.$$typeof===s.ForwardRef:return Xe(ue.render);default:return xe(ue)}},$e=function(ue){switch(!0){case typeof ue.type=="string":return ue.type;case typeof ue.type=="function":return ue.type.displayName?ue.type.displayName:xe(ue.type);case s.isForwardRef(ue):case s.isMemo(ue):return Me(ue.type);case s.isContextConsumer(ue):return"".concat(ue.type._context.displayName||"Context",".Consumer");case s.isContextProvider(ue):return"".concat(ue.type._context.displayName||"Context",".Provider");case s.isLazy(ue):return"Lazy";case s.isProfiler(ue):return"Profiler";case s.isStrictMode(ue):return"StrictMode";case s.isSuspense(ue):return"Suspense";default:return"UnknownElementType"}},Le=function(ue,Re){return Re!=="children"},Ge=function(ue){return ue!==!0&&ue!==!1&&ue!==null&&ue!==""},Ye=function(ue,Re){var nt={};return Object.keys(ue).filter(function(Tt){return Re(ue[Tt],Tt)}).forEach(function(Tt){return nt[Tt]=ue[Tt]}),nt},ht=function Xe(ue,Re){var nt=Re.displayName,Tt=nt===void 0?$e:nt;if(typeof ue=="string")return q(ue);if(typeof ue=="number")return Y(ue);if(!_.default.isValidElement(ue))throw new Error("react-element-to-jsx-string: Expected a React.Element, got `".concat(C(ue),"`"));var bn=Tt(ue),Jn=Ye(ue.props,Le);ue.ref!==null&&(Jn.ref=ue.ref);var tn=ue.key;typeof tn=="string"&&tn.search(/^\./)&&(Jn.key=tn);var Pn=Ye(ue.type.defaultProps||{},Le),_r=_.default.Children.toArray(ue.props.children).filter(Ge).map(function(Sr){return Xe(Sr,Re)});return ce&&ue.type===n.Fragment?W(tn,_r):se(bn,Jn,Pn,_r)};function Lt(){}var Dt=function(ue){return ue.toString().split(`
`).map(function(Re){return Re.trim()}).join("")},qt=function(ue){return ue.toString()},Ne=Dt,ve=function(Xe,ue){var Re=ue.functionValue,nt=Re===void 0?Ne:Re,Tt=ue.showFunctions;return nt(!Tt&&nt===Ne?Lt:Xe)},_e=function(Xe,ue,Re,nt){var Tt=U(Xe),bn=i.prettyPrint(Tt,{transform:function(tn,Pn,_r){var Sr=tn[Pn];return Sr&&n.isValidElement(Sr)?Oi(ht(Sr,nt),!0,Re,nt):typeof Sr=="function"?ve(Sr,nt):_r}});return ue?bn.replace(/\s+/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\[ /g,"[").replace(/ ]/g,"]"):bn.replace(/\t/g,w(1,nt.tabStop)).replace(/\n([^$])/g,`
`.concat(w(Re+1,nt.tabStop),"$1"))},K=function(ue){return ue.replace(/"/g,"&quot;")},ae=function(ue,Re,nt,Tt){if(typeof ue=="number")return"{".concat(String(ue),"}");if(typeof ue=="string")return'"'.concat(K(ue),'"');if(C(ue)==="symbol"){var bn=ue.valueOf().toString().replace(/Symbol\((.*)\)/,"$1");return bn?"{Symbol('".concat(bn,"')}"):"{Symbol()}"}return typeof ue=="function"?"{".concat(ve(ue,Tt),"}"):n.isValidElement(ue)?"{".concat(Oi(ht(ue,Tt),!0,nt,Tt),"}"):ue instanceof Date?isNaN(ue.valueOf())?"{new Date(NaN)}":'{new Date("'.concat(ue.toISOString(),'")}'):t.isPlainObject(ue)||Array.isArray(ue)?"{".concat(_e(ue,Re,nt,Tt),"}"):"{".concat(String(ue),"}")},lt=function(Xe,ue,Re,nt,Tt,bn,Jn,tn){if(!ue&&!nt)throw new Error('The prop "'.concat(Xe,'" has no value and no default: could not be formatted'));var Pn=ue?Re:Tt,_r=tn.useBooleanShorthandSyntax,Sr=tn.tabStop,Vn=ae(Pn,bn,Jn,tn),qi=" ",Mr=`
`.concat(w(Jn+1,Sr)),Fo=Vn.includes(`
`);return _r&&Vn==="{false}"&&!nt?(qi="",Mr=""):_r&&Vn==="{true}"?(qi+="".concat(Xe),Mr+="".concat(Xe)):(qi+="".concat(Xe,"=").concat(Vn),Mr+="".concat(Xe,"=").concat(Vn)),{attributeFormattedInline:qi,attributeFormattedMultiline:Mr,isMultilineAttribute:Fo}},Ot=function(Xe,ue){var Re=Xe.slice(0,Xe.length>0?Xe.length-1:0),nt=Xe[Xe.length-1];return nt&&(ue.type==="string"||ue.type==="number")&&(nt.type==="string"||nt.type==="number")?Re.push(q(String(nt.value)+String(ue.value))):(nt&&Re.push(nt),Re.push(ue)),Re},Ht=function(ue){return["key","ref"].includes(ue)},Ut=function(Xe){return function(ue){var Re=ue.includes("key"),nt=ue.includes("ref"),Tt=ue.filter(function(Jn){return!Ht(Jn)}),bn=A(Xe?Tt.sort():Tt);return nt&&bn.unshift("ref"),Re&&bn.unshift("key"),bn}};function Kt(Xe,ue){return Array.isArray(ue)?function(Re){return ue.indexOf(Re)===-1}:function(Re){return ue(Xe[Re],Re)}}var cn=function(ue,Re,nt,Tt,bn){var Jn=bn.tabStop;return ue.type==="string"?Re.split(`
`).map(function(tn,Pn){return Pn===0?tn:"".concat(w(Tt,Jn)).concat(tn)}).join(`
`):Re},sn=function(ue,Re,nt){return function(Tt){return cn(Tt,Oi(Tt,ue,Re,nt),ue,Re,nt)}},wr=function(ue,Re){return function(nt){var Tt=Object.keys(ue).includes(nt);return!Tt||Tt&&ue[nt]!==Re[nt]}},pr=function(ue,Re,nt,Tt,bn){return bn?w(nt,Tt).length+Re.length>bn:ue.length>1},li=function(ue,Re,nt,Tt,bn,Jn,tn){return(pr(ue,Re,bn,Jn,tn)||nt)&&!Tt},dn=function(Xe,ue,Re,nt){var Tt=Xe.type,bn=Xe.displayName,Jn=bn===void 0?"":bn,tn=Xe.childrens,Pn=Xe.props,_r=Pn===void 0?{}:Pn,Sr=Xe.defaultProps,Vn=Sr===void 0?{}:Sr;if(Tt!=="ReactElement")throw new Error('The "formatReactElementNode" function could only format node of type "ReactElement". Given:  '.concat(Tt));var qi=nt.filterProps,Mr=nt.maxInlineAttributesLineLength,Fo=nt.showDefaultProps,pa=nt.sortProps,io=nt.tabStop,ei="<".concat(Jn),or=ei,V=ei,Z=!1,J=[],oe=Kt(_r,qi);Object.keys(_r).filter(oe).filter(wr(Vn,_r)).forEach(function(Te){return J.push(Te)}),Object.keys(Vn).filter(oe).filter(function(){return Fo}).filter(function(Te){return!J.includes(Te)}).forEach(function(Te){return J.push(Te)});var ge=Ut(pa)(J);if(ge.forEach(function(Te){var Ee=lt(Te,Object.keys(_r).includes(Te),_r[Te],Object.keys(Vn).includes(Te),Vn[Te],ue,Re,nt),le=Ee.attributeFormattedInline,be=Ee.attributeFormattedMultiline,at=Ee.isMultilineAttribute;at&&(Z=!0),or+=le,V+=be}),V+=`
`.concat(w(Re,io)),li(ge,or,Z,ue,Re,io,Mr)?ei=V:ei=or,tn&&tn.length>0){var Ae=Re+1;ei+=">",ue||(ei+=`
`,ei+=w(Ae,io)),ei+=tn.reduce(Ot,[]).map(sn(ue,Ae,nt)).join(ue?"":`
`.concat(w(Ae,io))),ue||(ei+=`
`,ei+=w(Ae-1,io)),ei+="</".concat(Jn,">")}else pr(ge,or,Re,io,Mr)||(ei+=" "),ei+="/>";return ei},$r="",Ur="React.Fragment",go=function(ue,Re,nt){var Tt={};return Re&&(Tt={key:Re}),{type:"ReactElement",displayName:ue,props:Tt,defaultProps:{},childrens:nt}},yo=function(ue){var Re=ue.key;return!!Re},ro=function(ue){var Re=ue.childrens;return Re.length===0},ls=function(Xe,ue,Re,nt){var Tt=Xe.type,bn=Xe.key,Jn=Xe.childrens;if(Tt!=="ReactFragment")throw new Error('The "formatReactFragmentNode" function could only format node of type "ReactFragment". Given: '.concat(Tt));var tn=nt.useFragmentShortSyntax,Pn;return tn?ro(Xe)||yo(Xe)?Pn=Ur:Pn=$r:Pn=Ur,dn(go(Pn,bn,Jn),ue,Re,nt)},Ci=["<",">","{","}"],ui=function(ue){return Ci.some(function(Re){return ue.includes(Re)})},Lo=function(ue){return ui(ue)?"{`".concat(ue,"`}"):ue},Ii=function(ue){var Re=ue;return Re.endsWith(" ")&&(Re=Re.replace(/^(.*?)(\s+)$/,"$1{'$2'}")),Re.startsWith(" ")&&(Re=Re.replace(/^(\s+)(.*)$/,"{'$1'}$2")),Re},Oi=function(Xe,ue,Re,nt){if(Xe.type==="number")return String(Xe.value);if(Xe.type==="string")return Xe.value?"".concat(Ii(Lo(String(Xe.value)))):"";if(Xe.type==="ReactElement")return dn(Xe,ue,Re,nt);if(Xe.type==="ReactFragment")return ls(Xe,ue,Re,nt);throw new TypeError('Unknow format type "'.concat(Xe.type,'"'))},Mo=function(Xe,ue){return Oi(Xe,!1,0,ue)},Ro=function(ue){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=Re.filterProps,Tt=nt===void 0?[]:nt,bn=Re.showDefaultProps,Jn=bn===void 0?!0:bn,tn=Re.showFunctions,Pn=tn===void 0?!1:tn,_r=Re.functionValue,Sr=Re.tabStop,Vn=Sr===void 0?2:Sr,qi=Re.useBooleanShorthandSyntax,Mr=qi===void 0?!0:qi,Fo=Re.useFragmentShortSyntax,pa=Fo===void 0?!0:Fo,io=Re.sortProps,ei=io===void 0?!0:io,or=Re.maxInlineAttributesLineLength,V=Re.displayName;if(!ue)throw new Error("react-element-to-jsx-string: Expected a ReactElement");var Z={filterProps:Tt,showDefaultProps:Jn,showFunctions:Pn,functionValue:_r,tabStop:Vn,useBooleanShorthandSyntax:Mr,useFragmentShortSyntax:pa,sortProps:ei,maxInlineAttributesLineLength:or,displayName:V};return Mo(ht(ue,Z),Z)};e.default=Ro,e.inlineFunction=Dt,e.preserveFunctionLineBreak=qt})(kO);Object.defineProperty(mb,"__esModule",{value:!0});mb.createValue=q3;mb.createValues=AO;var Nz=Uz(kO),$z=Zp,Z2=Nl;function Uz(e){return e&&e.__esModule?e:{default:e}}function AO(e){var t={};return Object.keys(e).forEach(function(n){t[n]=q3(e[n])}),t}function q3(e){return(0,Z2.isPrimitiveData)(e)?{type:"primitive",data:e}:(0,Z2.isArray)(e)?{type:"array",values:e.map(function(t){return q3(t)})}:(0,Z2.isObject)(e)?{type:"object",values:AO(e)}:{type:"unserializable",stringifiedData:jz(e)}}function jz(e){return(0,$z.isElement)(e)?(0,Nz.default)(e):String(e)}var gb={};Object.defineProperty(gb,"__esModule",{value:!0});gb.extendWithValue=H3;gb.extendWithValues=PO;var w5=Nl;function PO(e,t){var n={};return Object.keys(t).forEach(function(i){n[i]=H3(e[i],t[i])}),n}function H3(e,t){if(t.type==="unserializable")return e;if(t.type==="object"){var n=(0,w5.isObject)(e)?e:{};return PO(n,t.values)}if(t.type==="array"){var i=(0,w5.isArray)(e)?e:[];return t.values.map(function(s,l){return H3(i[l],s)})}return t.data}var cc={},yb={},u_={};Object.defineProperty(u_,"__esModule",{value:!0});u_.removeItemMatch=Xz;u_.replaceOrAddItem=Zz;u_.updateItem=Kz;var TO=la;function S5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(n),!0).forEach(function(i){Vz(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Vz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qp(e){return Wz(e)||Gz(e)||Hz(e)||qz()}function qz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hz(e,t){if(e){if(typeof e=="string")return OC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OC(e,t)}}function Gz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wz(e){if(Array.isArray(e))return OC(e)}function OC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Kz(e,t,n){var i=e.indexOf(t);return[].concat(qp(e.slice(0,i)),[C5(C5({},t),n)],qp(e.slice(i+1)))}function Zz(e,t,n){var i=(0,TO.findIndex)(e,t);return i!==-1?[].concat(qp(e.slice(0,i)),[n],qp(e.slice(i+1))):[].concat(qp(e),[n])}function Xz(e,t){var n=(0,TO.findIndex)(e,t);return n===-1?qp(e):[].concat(qp(e.slice(0,n)),qp(e.slice(n+1)))}var vb={};Object.defineProperty(vb,"__esModule",{value:!0});vb.addTreeNodeChild=t9;vb.sortTreeChildren=OO;function E5(e){return e9(e)||Jz(e)||Yz(e)||Qz()}function Qz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yz(e,t){if(e){if(typeof e=="string")return LC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LC(e,t)}}function Jz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e9(e){if(Array.isArray(e))return LC(e)}function LC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Z0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(n),!0).forEach(function(i){IO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function IO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e,t,n){e.children||(e.children={}),e.children[t]=n}function OO(e){var t=e.children;if(!t)return e;var n=Object.keys(t),i=n.filter(function(l){return t[l].children}),s=n.filter(function(l){return!t[l].children});return Z0(Z0({},e),{},{children:[].concat(E5(i.sort()),E5(s.sort())).reduce(function(l,a){return Z0(Z0({},l),{},IO({},a,OO(t[a])))},{})})}var G3={};Object.defineProperty(G3,"__esModule",{value:!0});G3.uuid=LO;function LO(e){return e?(Number(e)^Math.random()*16>>Number(e)/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,LO)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"TreeNode",{enumerable:!0,get:function(){return n.TreeNode}}),Object.defineProperty(e,"addTreeNodeChild",{enumerable:!0,get:function(){return n.addTreeNodeChild}}),Object.defineProperty(e,"removeItemMatch",{enumerable:!0,get:function(){return t.removeItemMatch}}),Object.defineProperty(e,"replaceOrAddItem",{enumerable:!0,get:function(){return t.replaceOrAddItem}}),Object.defineProperty(e,"sortTreeChildren",{enumerable:!0,get:function(){return n.sortTreeChildren}}),Object.defineProperty(e,"updateItem",{enumerable:!0,get:function(){return t.updateItem}}),Object.defineProperty(e,"uuid",{enumerable:!0,get:function(){return i.uuid}});var t=u_,n=vb,i=G3})(yb);Object.defineProperty(cc,"__esModule",{value:!0});cc.DEFAULT_RENDER_KEY=void 0;cc.createFixtureStateProps=r9;cc.findFixtureStateProps=RO;cc.getFixtureStateProps=n9;cc.removeFixtureStateProps=a9;cc.resetFixtureStateProps=i9;cc.updateFixtureStateProps=o9;var MC=la,_b=yb,MO=0;cc.DEFAULT_RENDER_KEY=MO;function n9(e,t){var n=e.props;return n?n.filter(function(i){return i.elementId.decoratorId===t}):[]}function RO(e,t){var n=e.props;return n&&(0,MC.find)(n,function(i){return(0,MC.isEqual)(i.elementId,t)})}function r9(e){var t=e.fixtureState,n=e.elementId,i=e.values,s=e.componentName,l=t.props,a=l===void 0?[]:l;return(0,_b.replaceOrAddItem)(a,FO(n),{elementId:n,values:i,renderKey:MO,componentName:s})}function i9(e){var t=e.fixtureState,n=e.elementId,i=e.values,s=DO(t,n);return(0,_b.updateItem)(t.props,s,{values:i,renderKey:s.renderKey+1})}function o9(e){var t=e.fixtureState,n=e.elementId,i=e.values,s=DO(t,n);return(0,_b.updateItem)(t.props,s,{values:i})}function a9(e,t){return(0,_b.removeItemMatch)(e.props||[],FO(t))}function FO(e){return function(t){return(0,MC.isEqual)(t.elementId,e)}}function DO(e,t){var n=RO(e,t);if(!n){var i=JSON.stringify(t);throw new Error('Fixture state props missing for element "'.concat(i,'"'))}return n}var wd={};Object.defineProperty(wd,"__esModule",{value:!0});wd.createFixtureStateClassState=l9;wd.findFixtureStateClassState=zO;wd.getFixtureStateClassState=s9;wd.removeFixtureStateClassState=c9;wd.updateFixtureStateClassState=u9;var RC=la,W3=yb;function s9(e,t){var n=e.classState;return n?n.filter(function(i){return i.elementId.decoratorId===t}):[]}function zO(e,t){var n=e.classState;return n&&(0,RC.find)(n,function(i){return(0,RC.isEqual)(i.elementId,t)})}function l9(e){var t=e.fixtureState,n=e.elementId,i=e.values,s=e.componentName,l=t.classState,a=l===void 0?[]:l;return(0,W3.replaceOrAddItem)(a,BO(n),{elementId:n,values:i,componentName:s})}function u9(e){var t=e.fixtureState,n=e.elementId,i=e.values,s=f9(t,n);return(0,W3.updateItem)(t.classState,s,{values:i})}function c9(e,t){return(0,W3.removeItemMatch)(e.classState||[],BO(t))}function BO(e){return function(t){return(0,RC.isEqual)(t.elementId,e)}}function f9(e,t){var n=zO(e,t);if(!n){var i=JSON.stringify(t);throw new Error('Fixture state class state missing for element "'.concat(i,'"'))}return n}var K3={};Object.defineProperty(K3,"__esModule",{value:!0});K3.findFixtureStateControl=p9;function p9(e,t){var n=e.controls;return n&&n[t]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ArrayData",{enumerable:!0,get:function(){return t.ArrayData}}),Object.defineProperty(e,"DEFAULT_RENDER_KEY",{enumerable:!0,get:function(){return s.DEFAULT_RENDER_KEY}}),Object.defineProperty(e,"FixtureDecoratorId",{enumerable:!0,get:function(){return t.FixtureDecoratorId}}),Object.defineProperty(e,"FixtureElementId",{enumerable:!0,get:function(){return t.FixtureElementId}}),Object.defineProperty(e,"FixtureState",{enumerable:!0,get:function(){return t.FixtureState}}),Object.defineProperty(e,"FixtureStateArrayValue",{enumerable:!0,get:function(){return t.FixtureStateArrayValue}}),Object.defineProperty(e,"FixtureStateClassState",{enumerable:!0,get:function(){return t.FixtureStateClassState}}),Object.defineProperty(e,"FixtureStateControl",{enumerable:!0,get:function(){return t.FixtureStateControl}}),Object.defineProperty(e,"FixtureStateControls",{enumerable:!0,get:function(){return t.FixtureStateControls}}),Object.defineProperty(e,"FixtureStateData",{enumerable:!0,get:function(){return t.FixtureStateData}}),Object.defineProperty(e,"FixtureStateObjectValue",{enumerable:!0,get:function(){return t.FixtureStateObjectValue}}),Object.defineProperty(e,"FixtureStatePrimitiveValue",{enumerable:!0,get:function(){return t.FixtureStatePrimitiveValue}}),Object.defineProperty(e,"FixtureStateProps",{enumerable:!0,get:function(){return t.FixtureStateProps}}),Object.defineProperty(e,"FixtureStateSelectControl",{enumerable:!0,get:function(){return t.FixtureStateSelectControl}}),Object.defineProperty(e,"FixtureStateStandardControl",{enumerable:!0,get:function(){return t.FixtureStateStandardControl}}),Object.defineProperty(e,"FixtureStateUnserializableValue",{enumerable:!0,get:function(){return t.FixtureStateUnserializableValue}}),Object.defineProperty(e,"FixtureStateValue",{enumerable:!0,get:function(){return t.FixtureStateValue}}),Object.defineProperty(e,"FixtureStateValues",{enumerable:!0,get:function(){return t.FixtureStateValues}}),Object.defineProperty(e,"ObjectData",{enumerable:!0,get:function(){return t.ObjectData}}),Object.defineProperty(e,"PrimitiveData",{enumerable:!0,get:function(){return t.PrimitiveData}}),Object.defineProperty(e,"SetFixtureState",{enumerable:!0,get:function(){return t.SetFixtureState}}),Object.defineProperty(e,"createFixtureStateClassState",{enumerable:!0,get:function(){return l.createFixtureStateClassState}}),Object.defineProperty(e,"createFixtureStateProps",{enumerable:!0,get:function(){return s.createFixtureStateProps}}),Object.defineProperty(e,"createValue",{enumerable:!0,get:function(){return n.createValue}}),Object.defineProperty(e,"createValues",{enumerable:!0,get:function(){return n.createValues}}),Object.defineProperty(e,"extendWithValue",{enumerable:!0,get:function(){return i.extendWithValue}}),Object.defineProperty(e,"extendWithValues",{enumerable:!0,get:function(){return i.extendWithValues}}),Object.defineProperty(e,"findFixtureStateClassState",{enumerable:!0,get:function(){return l.findFixtureStateClassState}}),Object.defineProperty(e,"findFixtureStateControl",{enumerable:!0,get:function(){return a.findFixtureStateControl}}),Object.defineProperty(e,"findFixtureStateProps",{enumerable:!0,get:function(){return s.findFixtureStateProps}}),Object.defineProperty(e,"getFixtureStateClassState",{enumerable:!0,get:function(){return l.getFixtureStateClassState}}),Object.defineProperty(e,"getFixtureStateProps",{enumerable:!0,get:function(){return s.getFixtureStateProps}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}}),Object.defineProperty(e,"isBoolean",{enumerable:!0,get:function(){return t.isBoolean}}),Object.defineProperty(e,"isNull",{enumerable:!0,get:function(){return t.isNull}}),Object.defineProperty(e,"isNumber",{enumerable:!0,get:function(){return t.isNumber}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return t.isObject}}),Object.defineProperty(e,"isPrimitiveData",{enumerable:!0,get:function(){return t.isPrimitiveData}}),Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return t.isString}}),Object.defineProperty(e,"removeFixtureStateClassState",{enumerable:!0,get:function(){return l.removeFixtureStateClassState}}),Object.defineProperty(e,"removeFixtureStateProps",{enumerable:!0,get:function(){return s.removeFixtureStateProps}}),Object.defineProperty(e,"resetFixtureStateProps",{enumerable:!0,get:function(){return s.resetFixtureStateProps}}),Object.defineProperty(e,"updateFixtureStateClassState",{enumerable:!0,get:function(){return l.updateFixtureStateClassState}}),Object.defineProperty(e,"updateFixtureStateProps",{enumerable:!0,get:function(){return s.updateFixtureStateProps}});var t=Nl,n=mb,i=gb,s=cc,l=wd,a=K3})(Au);var Tu={},Z3={},xb={};Object.defineProperty(xb,"__esModule",{value:!0});xb.getComponentName=h9;var X2=new WeakMap;function h9(e){if(typeof e=="string")return e;if(!X2.has(e)){var t=e.displayName||e.name||"";X2.set(e,t)}return X2.get(e)}var bb={};Object.defineProperty(bb,"__esModule",{value:!0});bb.isReactElement=m9;var d9=Zp;function m9(e){return(0,d9.isElement)(e)}Object.defineProperty(Z3,"__esModule",{value:!0});Z3.areNodesEqual=X3;var iv=la,A5=xb,P5=bb;function X3(e,t,n){return(0,P5.isReactElement)(e)&&(0,P5.isReactElement)(t)?g9(e,t,n):Array.isArray(e)&&Array.isArray(t)?v9(e,t,n):T5(e)&&T5(t)?_9(e,t):(0,iv.isEqual)(e,t)}function g9(e,t,n){return y9(e.type,t.type,n)?e.key===t.key&&e.ref===t.ref&&X3(e.props,t.props,n):!1}function y9(e,t,n){return n?e===t:(0,A5.getComponentName)(e)===(0,A5.getComponentName)(t)}function v9(e,t,n){return e.length!==t.length?!1:e.every(function(i,s){return X3(i,t[s],n)})}function T5(e){return(0,iv.isPlainObject)(e)}function _9(e,t){return(0,iv.isEqual)(Object.keys(e),Object.keys(t))?Object.keys(e).every(function(n){return(0,iv.isEqualWith)(e[n],t[n],function(i,s){return typeof i=="function"&&typeof s=="function"?i===s||i.toString()===s.toString():(0,iv.isEqual)(i,s)})}):!1}var wb={},Sb={};Object.defineProperty(Sb,"__esModule",{value:!0});Sb.isMultiFixture=b9;var x9=Zp;function FC(e){return FC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FC(e)}function b9(e){return e!==null&&FC(e)==="object"&&!(0,x9.isElement)(e)}Object.defineProperty(wb,"__esModule",{value:!0});wb.getFixtureListFromExports=C9;wb.getFixtureListFromWrappers=S9;var w9=Sb;function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function vx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(n),!0).forEach(function(i){Q3(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Q3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S9(e){return Object.keys(e).reduce(function(t,n){return vx(vx({},t),{},Q3({},n,E9(e[n])))},{})}function C9(e){return Object.keys(e).reduce(function(t,n){return vx(vx({},t),{},Q3({},n,NO(e[n])))},{})}function E9(e){return NO(e.module.default)}function NO(e){return(0,w9.isMultiFixture)(e)?{type:"multi",fixtureNames:Object.keys(e)}:{type:"single"}}var Y3={};Object.defineProperty(Y3,"__esModule",{value:!0});Y3.getSortedDecoratorsForFixturePath=O9;function k9(e){return I9(e)||T9(e)||P9(e)||A9()}function A9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P9(e,t){if(e){if(typeof e=="string")return DC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DC(e,t)}}function T9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I9(e){if(Array.isArray(e))return DC(e)}function DC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function O5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function L5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(n),!0).forEach(function(i){$O(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function $O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O9(e,t){return F9(L9(t,e))}function L9(e,t){return Object.keys(e).filter(function(n){return M9(R9(n),t)}).reduce(function(n,i){return L5(L5({},n),{},$O({},i,e[i]))},{})}function M9(e,t){return e===""||t.indexOf("".concat(e,"/"))===0}function R9(e){return e.replace(/^((.+)\/)?.+$/,"$2")}function F9(e){return D9(Object.keys(e)).map(function(t){return e[t]})}function D9(e){return k9(e).sort(function(t,n){return M5(t)-M5(n)||t.localeCompare(n)})}function M5(e){return e.split("/").length}var UO={};Object.defineProperty(UO,"__esModule",{value:!0});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReactDecorator",{enumerable:!0,get:function(){return g.ReactDecorator}}),Object.defineProperty(e,"ReactDecoratorProps",{enumerable:!0,get:function(){return g.ReactDecoratorProps}}),Object.defineProperty(e,"ReactDecorators",{enumerable:!0,get:function(){return g.ReactDecorators}}),Object.defineProperty(e,"ReactFixture",{enumerable:!0,get:function(){return g.ReactFixture}}),Object.defineProperty(e,"ReactFixtureExport",{enumerable:!0,get:function(){return g.ReactFixtureExport}}),Object.defineProperty(e,"ReactFixtureExports",{enumerable:!0,get:function(){return g.ReactFixtureExports}}),Object.defineProperty(e,"ReactFixtureMap",{enumerable:!0,get:function(){return g.ReactFixtureMap}}),Object.defineProperty(e,"ReactFixtureModule",{enumerable:!0,get:function(){return g.ReactFixtureModule}}),Object.defineProperty(e,"ReactFixtureWrapper",{enumerable:!0,get:function(){return g.ReactFixtureWrapper}}),Object.defineProperty(e,"ReactFixtureWrappers",{enumerable:!0,get:function(){return g.ReactFixtureWrappers}}),Object.defineProperty(e,"areNodesEqual",{enumerable:!0,get:function(){return t.areNodesEqual}}),Object.defineProperty(e,"getComponentName",{enumerable:!0,get:function(){return n.getComponentName}}),Object.defineProperty(e,"getFixtureListFromExports",{enumerable:!0,get:function(){return i.getFixtureListFromExports}}),Object.defineProperty(e,"getFixtureListFromWrappers",{enumerable:!0,get:function(){return i.getFixtureListFromWrappers}}),Object.defineProperty(e,"getSortedDecoratorsForFixturePath",{enumerable:!0,get:function(){return s.getSortedDecoratorsForFixturePath}}),Object.defineProperty(e,"isMultiFixture",{enumerable:!0,get:function(){return l.isMultiFixture}}),Object.defineProperty(e,"isReactElement",{enumerable:!0,get:function(){return a.isReactElement}});var t=Z3,n=xb,i=wb,s=Y3,l=Sb,a=bb,g=UO})(Tu);var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.FixtureContext=void 0;var z9=mt,B9=(0,z9.createContext)({fixtureState:{},setFixtureState:function(){}});ss.FixtureContext=B9;var Sd={},c_={},J3={},Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});Cd.getChildrenPath=N9;Cd.isRootPath=jO;function N9(e){return jO(e)?"props.children":"".concat(e,".props.children")}function jO(e){return e===""}Object.defineProperty(J3,"__esModule",{value:!0});J3.findElementPaths=BC;var $9=la,U9=mt,j9=Tu,V9=Cd;function q9(e){return K9(e)||W9(e)||G9(e)||H9()}function H9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G9(e,t){if(e){if(typeof e=="string")return zC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zC(e,t)}}function W9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function K9(e){if(Array.isArray(e))return zC(e)}function zC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function BC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Array.isArray(e))return(0,$9.flatten)(e.map(function(s,l){return BC(s,"".concat(t,"[").concat(l,"]"))}));if(!(0,j9.isReactElement)(e))return[];var n=e.props.children,i=typeof n!="function"?BC(n,(0,V9.getChildrenPath)(t)):[];return e.type===U9.Fragment?i:[t].concat(q9(i))}var f_={};Object.defineProperty(f_,"__esModule",{value:!0});f_.getElementAtPath=VO;f_.getExpectedElementAtPath=Q9;var Z9=la,R5=Tu,X9=Cd;function VO(e,t){if(!(0,R5.isReactElement)(e)&&!Array.isArray(e))return null;var n=e,i=(0,X9.isRootPath)(t)?n:(0,Z9.get)(n,t);return(0,R5.isReactElement)(i)?i:null}function Q9(e,t){var n=VO(e,t);if(!n)throw new Error("Element not found at path: ".concat(t));return n}var ek={};Object.defineProperty(ek,"__esModule",{value:!0});ek.setElementAtPath=a7;var Y9=la,J9=Tu,e7=f_,t7=Cd,n7=["children"];function F5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function X0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(n),!0).forEach(function(i){r7(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function r7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i7(e,t){if(e==null)return{};var n=o7(e,t),i,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)i=l[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function o7(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,l;for(l=0;l<i.length;l++)s=i[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function a7(e,t,n){var i=(0,e7.getExpectedElementAtPath)(e,t),s=n(i);return(0,t7.isRootPath)(t)?s:(0,Y9.set)(NC(e),t,s)}function NC(e){if(Array.isArray(e))return e.map(function(s){return NC(s)});if((0,J9.isReactElement)(e)){var t=e.props,n=t.children,i=i7(t,n7);return X0(X0({},e),{},{props:X0(X0({},i),{},{children:NC(n)})})}return e}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"findElementPaths",{enumerable:!0,get:function(){return t.findElementPaths}}),Object.defineProperty(e,"getChildrenPath",{enumerable:!0,get:function(){return s.getChildrenPath}}),Object.defineProperty(e,"getElementAtPath",{enumerable:!0,get:function(){return n.getElementAtPath}}),Object.defineProperty(e,"getExpectedElementAtPath",{enumerable:!0,get:function(){return n.getExpectedElementAtPath}}),Object.defineProperty(e,"setElementAtPath",{enumerable:!0,get:function(){return i.setElementAtPath}});var t=J3,n=f_,i=ek,s=Cd})(c_);Object.defineProperty(Sd,"__esModule",{value:!0});Sd.findRelevantElementPaths=s7;var D5=c_;function $C(e){return $C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$C(e)}function s7(e){var t=(0,D5.findElementPaths)(e);return t.filter(function(n){var i=(0,D5.getExpectedElementAtPath)(e,n),s=i.type;if($C(s)==="symbol")return!1;if(typeof s=="string")return l7(s);var l=s;return l.cosmosCapture!==!1&&u7(l)})}function l7(e){return e!=="div"&&e!=="span"}function u7(e){return e.name!=="StyledComponent"}var tk={},nk={};Object.defineProperty(nk,"__esModule",{value:!0});nk.isRefSupported=h7;var c7=p7(mt),f7=Zp;function p7(e){return e&&e.__esModule?e:{default:e}}function h7(e){if(typeof e=="string")return!1;var t=e,n=t.$$typeof,i=t.prototype;return n===f7.ForwardRef||i&&(i instanceof c7.default.Component||i.getInitialState!==void 0)&&!0}Object.defineProperty(tk,"__esModule",{value:!0});tk.decorateFixtureRefs=_7;var d7=v7(mt),m7=c_,g7=Sd,y7=nk;function v7(e){return e&&e.__esModule?e:{default:e}}function _7(e,t,n){var i=(0,g7.findRelevantElementPaths)(e);return i.reduce(function(s,l){return(0,m7.setElementAtPath)(s,l,function(a){return(0,y7.isRefSupported)(a.type)?d7.default.cloneElement(a,{ref:x7(a.ref,t,l,n)}):a})},e)}function x7(e,t,n,i){var s=i[n];if(s&&s.origRef===e)return s.handler;var l=b7(e,t,n);return i[n]={origRef:e,handler:l},l}function b7(e,t,n){return function(i){e&&w7(e,i),t(n,i)}}function w7(e,t){if(typeof e=="string"){console.warn("[decorateFixtureRefs] String refs are not supported");return}if(typeof e=="function"){e(t);return}var n=e;n.current=t}var rk={};Object.defineProperty(rk,"__esModule",{value:!0});rk.replaceState=C7;var S7=la;function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function B5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(n),!0).forEach(function(i){qO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function qO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C7(e,t){var n=E7(e.state,t);(0,S7.isEqual)(n,e.state)||e.setState(n)}function E7(e,t){return Object.keys(e).reduce(function(n,i){return Object.keys(n).indexOf(i)===-1?B5(B5({},n),{},qO({},i,void 0)):n},t)}Object.defineProperty($3,"__esModule",{value:!0});$3.useFixtureState=O7;var N5=la,uf=T7(mt),gu=Au,$5=Tu,k7=ss,A7=Sd,P7=tk,Q2=rk;function T7(e){return e&&e.__esModule?e:{default:e}}function U5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function wm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(n),!0).forEach(function(i){I7(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function I7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O7(e,t,n){var i=(0,A7.findRelevantElementPaths)(e),s=uf.default.useContext(k7.FixtureContext),l=s.fixtureState,a=s.setFixtureState,g=L7(l),_=uf.default.useRef(l),w=uf.default.useRef({}),C=uf.default.useRef({});return uf.default.useEffect(function(){return function(){w.current={},C.current={}}},[]),uf.default.useEffect(function(){var I=(0,gu.getFixtureStateClassState)(l,t);I.forEach(function(O){var D=O.elementId,B=D.elPath;i.indexOf(D.elPath)===-1&&(a(function(H){return wm(wm({},H),{},{classState:(0,gu.removeFixtureStateClassState)(l,D)})}),n.current[B]&&(delete n.current[B],delete w.current[B],delete C.current[B]))}),i.forEach(function(O){var D={decoratorId:t,elPath:O},B=(0,gu.findFixtureStateClassState)(l,D);if(B){var U=n.current[O];if(!U)return;var q=(0,gu.findFixtureStateClassState)(_.current,D);if(q&&!(0,N5.isEqual)(q,B))return(0,Q2.replaceState)(U,(0,gu.extendWithValues)(U.state,B.values))}else if(w.current[O]){var H=w.current[O].state,R=n.current[O];(0,N5.isEqual)(R.state,H)||(0,Q2.replaceState)(R,H),a(function(Y){return wm(wm({},Y),{},{classState:(0,gu.createFixtureStateClassState)({fixtureState:Y,elementId:D,values:(0,gu.createValues)(H),componentName:(0,$5.getComponentName)(R.constructor)})})})}})},[t,i,n,l,l.classState,a]),uf.default.useEffect(function(){_.current=l}),(0,P7.decorateFixtureRefs)(e,A,C.current);function A(I,O){if(!O){delete n.current[I];return}var D=O.state;if(D){n.current[I]=O,M7(w.current,I,O);var B={decoratorId:t,elPath:I},H=(0,gu.findFixtureStateClassState)(g.current,B);H?(0,Q2.replaceState)(O,(0,gu.extendWithValues)(D,H.values)):a(function(R){return wm(wm({},R),{},{classState:(0,gu.createFixtureStateClassState)({fixtureState:R,elementId:B,values:(0,gu.createValues)(D),componentName:(0,$5.getComponentName)(O.constructor)})})})}}}function L7(e){var t=uf.default.useRef(e);return uf.default.useEffect(function(){t.current=e}),t}function M7(e,t,n){var i=e[t],s=n.constructor,l=i&&i.type===s;!l&&n.state&&(e[t]={type:s,state:n.state})}var ik={};Object.defineProperty(ik,"__esModule",{value:!0});ik.useReadClassState=U7;var R7=la,Y2=z7(mt),z1=Au,F7=ss,D7=Sd;function z7(e){return e&&e.__esModule?e:{default:e}}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function V5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(i){B7(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function B7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q5(e,t,n,i,s,l,a){try{var g=e[l](a),_=g.value}catch(w){n(w);return}g.done?t(_):Promise.resolve(_).then(i,s)}function N7(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var l=e.apply(t,n);function a(_){q5(l,i,s,a,g,"next",_)}function g(_){q5(l,i,s,a,g,"throw",_)}a(void 0)})}}var $7=200;function U7(e,t,n){var i=(0,D7.findRelevantElementPaths)(e),s=Y2.default.useContext(F7.FixtureContext),l=s.fixtureState,a=s.setFixtureState,g=Y2.default.useRef(null);Y2.default.useEffect(function(){return _(),function(){g.current&&clearTimeout(g.current)}});function _(){g.current=window.setTimeout(w,$7)}function w(){var C=!1;Object.keys(n.current).map(function(){var A=N7(regeneratorRuntime.mark(function I(O){var D,B,H;return regeneratorRuntime.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(i.indexOf(O)!==-1){U.next=2;break}throw new Error('[FixtureCapture] Child ref exists for missing element path "'.concat(O,'"'));case 2:D=n.current[O].state,B={decoratorId:t,elPath:O},H=(0,z1.findFixtureStateClassState)(l,B),H&&D&&!j7(H,D)&&(C=!0,a(function(q){return V5(V5({},q),{},{classState:(0,z1.updateFixtureStateClassState)({fixtureState:q,elementId:B,values:(0,z1.createValues)(D)})})}));case 6:case"end":return U.stop()}},I)}));return function(I){return A.apply(this,arguments)}}()),C||_()}}function j7(e,t){return(0,R7.isEqual)(t,(0,z1.extendWithValues)(t,e.values))}Object.defineProperty(N3,"__esModule",{value:!0});N3.useClassStateCapture=G7;var H5=H7(mt),V7=$3,q7=ik;function H7(e){return e&&e.__esModule?e:{default:e}}function G7(e,t){var n=H5.default.useRef({});return H5.default.useEffect(function(){return function(){n.current={}}},[]),(0,q7.useReadClassState)(e,t,n),(0,V7.useFixtureState)(e,t,n)}var ok={},ak={};Object.defineProperty(ak,"__esModule",{value:!0});ak.useFixtureProps=Y7;var G5=la,W7=X7(mt),J2=Au,K7=Tu,Z7=Sd,HO=c_;function X7(e){return e&&e.__esModule?e:{default:e}}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Sm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(i){Q7(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Q7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y7(e,t,n){var i=W7.default.useMemo(function(){return{}},[n]),s=(0,Z7.findRelevantElementPaths)(e);return s.reduce(function(l,a){var g={decoratorId:n,elPath:a},_=(0,J2.findFixtureStateProps)(t,g);return(0,HO.setElementAtPath)(l,a,function(w){if(!_||O(_.componentName))return Sm(Sm({},w),{},{key:K5(a,J2.DEFAULT_RENDER_KEY)});var C=w.props,A=(0,J2.extendWithValues)(C,_.values),I=(0,G5.mapValues)(A,function(D,B){var H=J7(a,B);return i.hasOwnProperty(H)||(i[H]=C[B]),(0,G5.isEqual)(i[H],D)?i[H]:(i[H]=D,D)});return Sm(Sm({},w),{},{props:eB(s,a)?Sm(Sm({},I),{},{children:C.children}):I,key:K5(a,_.renderKey)});function O(D){return D!==(0,K7.getComponentName)(w.type)}})},e)}function J7(e,t){return e?"".concat(e,"-").concat(t):t}function K5(e,t){return"".concat(e,"-").concat(t)}function eB(e,t){return e.some(function(n){return n.indexOf((0,HO.getChildrenPath)(t))===0})}Object.defineProperty(ok,"__esModule",{value:!0});ok.usePropsCapture=aB;var Q0=iB(mt),Wh=Au,Z5=Tu,tB=ss,nB=Sd,X5=c_,rB=ak;function iB(e){return e&&e.__esModule?e:{default:e}}function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(n),!0).forEach(function(i){oB(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function oB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aB(e,t){var n=Q0.default.useContext(tB.FixtureContext),i=n.fixtureState,s=n.setFixtureState,l=Q0.default.useRef(e),a=(0,nB.findRelevantElementPaths)(e);return Q0.default.useEffect(function(){if(!i.props&&a.length===0){s(function(_){return wp(wp({},_),{},{props:_.props||[]})});return}var g=(0,Wh.getFixtureStateProps)(i,t);g.forEach(function(_){var w=_.elementId;a.indexOf(w.elPath)===-1&&s(function(C){return wp(wp({},C),{},{props:(0,Wh.removeFixtureStateProps)(i,w)})})}),a.forEach(function(_){var w=(0,X5.getExpectedElementAtPath)(e,_),C={decoratorId:t,elPath:_};if((0,Wh.findFixtureStateProps)(i,C)){var I=(0,X5.getElementAtPath)(l.current,_);(0,Z5.areNodesEqual)(I,w,!1)||s(function(O){return wp(wp({},O),{},{props:(0,Wh.updateFixtureStateProps)({fixtureState:i,elementId:C,values:(0,Wh.createValues)(w.props)})})})}else{var A=(0,Z5.getComponentName)(w.type);s(function(O){return wp(wp({},O),{},{props:(0,Wh.createFixtureStateProps)({fixtureState:O,elementId:C,values:(0,Wh.createValues)(w.props),componentName:A})})})}})},[e,t,a,i,i.props,s]),Q0.default.useEffect(function(){l.current=e}),(0,rB.useFixtureProps)(e,i,t)}Object.defineProperty(pb,"__esModule",{value:!0});pb.FixtureCapture=cB;var Y5=uB(mt),sB=N3,lB=ok;function uB(e){return e&&e.__esModule?e:{default:e}}function cB(e){var t=e.children,n=e.decoratorId,i=(0,lB.usePropsCapture)(t,n);return i=(0,sB.useClassStateCapture)(i,n),Y5.default.createElement(Y5.default.Fragment,null,i)}var Cb={},sk={};Object.defineProperty(sk,"__esModule",{value:!0});sk.getFixture=fB;var J5=Tu;function fB(e,t){if(t===void 0)return(0,J5.isMultiFixture)(e)?void 0:e;if((0,J5.isMultiFixture)(e)){var n=e;return n[t]}}var lk={},Eb={},uk={};Object.defineProperty(uk,"__esModule",{value:!0});uk.FixtureElement=GO;var pB=hB(mt);function hB(e){return e&&e.__esModule?e:{default:e}}function GO(e){var t=e.Component;return pB.default.createElement(t,null)}GO.cosmosCapture=!1;Object.defineProperty(Eb,"__esModule",{value:!0});Eb.getDecoratedFixtureElement=wB;var UC=gB(mt),dB=pb,mB=uk;function gB(e){return e&&e.__esModule?e:{default:e}}function yB(e){return bB(e)||xB(e)||_B(e)||vB()}function vB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _B(e,t){if(e){if(typeof e=="string")return jC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jC(e,t)}}function xB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bB(e){if(Array.isArray(e))return jC(e)}function jC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function wB(e,t,n){var i=UC.default.createElement(dB.FixtureCapture,{decoratorId:"root"},SB(e));return yB(t).reverse().reduce(function(s,l){return UC.default.createElement(l,n,s)},i)}function SB(e){return CB(e)?UC.default.createElement(mB.FixtureElement,{Component:e}):e}function CB(e){return typeof e=="function"}Object.defineProperty(lk,"__esModule",{value:!0});lk.FixtureProvider=MB;var Ty=PB(mt),EB=Tu,kB=ss,AB=Eb;function PB(e){return e&&e.__esModule?e:{default:e}}function e4(e){return LB(e)||OB(e)||IB(e)||TB()}function TB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IB(e,t){if(e){if(typeof e=="string")return VC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VC(e,t)}}function OB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LB(e){if(Array.isArray(e))return VC(e)}function VC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function MB(e){var t=e.fixtureId,n=e.fixture,i=e.systemDecorators,s=e.userDecorators,l=e.fixtureState,a=e.setFixtureState,g=e.onErrorReset,_=Ty.default.useMemo(function(){return{fixtureState:l,setFixtureState:a}},[l,a]),w=Ty.default.useMemo(function(){return{fixtureState:l,setFixtureState:a,onErrorReset:g}},[l,g,a]),C=Ty.default.useMemo(function(){return RB(t,i,s)},[t,i,s]),A=Ty.default.useMemo(function(){return(0,AB.getDecoratedFixtureElement)(n,C,w)},[w,C,n]);return Ty.default.createElement(kB.FixtureContext.Provider,{value:_},A)}function RB(e,t,n){return[].concat(e4(t),e4((0,EB.getSortedDecoratorsForFixturePath)(e.path,n)))}function _x(e){return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_x(e)}Object.defineProperty(Cb,"__esModule",{value:!0});Cb.FixtureLoader=void 0;var Iy=la,t4=BB(mt),FB=Tu,DB=sk,zB=lk;function WO(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(WO=function(s){return s?n:t})(e)}function BB(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||_x(e)!=="object"&&typeof e!="function")return{default:e};var n=WO(t);if(n&&n.has(e))return n.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)){var a=s?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}function n4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Y0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(n),!0).forEach(function(i){Rm(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function NB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r4(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $B(e,t,n){return t&&r4(e.prototype,t),n&&r4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qC(e,t)}function qC(e,t){return qC=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},qC(e,t)}function jB(e){var t=qB();return function(){var i=xx(e),s;if(t){var l=xx(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return VB(this,s)}}function VB(e,t){if(t&&(_x(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mm(e)}function Mm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xx(e){return xx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},xx(e)}function Rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HB(e){return e?{fixtureId:e,fixtureState:{},syncedFixtureState:{}}:null}var GB=function(e){UB(n,e);var t=jB(n);function n(){var i;NB(this,n);for(var s=arguments.length,l=new Array(s),a=0;a<s;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l)),Rm(Mm(i),"state",{selectedFixture:HB(i.props.selectedFixtureId||i.props.initialFixtureId),renderKey:0}),Rm(Mm(i),"unsubscribe",null),Rm(Mm(i),"handleRequest",function(g){if(g.type==="pingRenderers")return i.postReadyState();if(!(!g.payload||g.payload.rendererId!==i.props.rendererId))switch(WB(g)&&i.fireChangeCallback(),g.type){case"selectFixture":return i.handleSelectFixtureRequest(g);case"unselectFixture":return i.handleUnselectFixtureRequest();case"setFixtureState":return i.handleSetFixtureStateRequest(g)}}),Rm(Mm(i),"postFixtureStateChange",function(g,_){var w=i.props.rendererId;i.postMessage({type:"fixtureStateChange",payload:{rendererId:w,fixtureId:g,fixtureState:_}})}),Rm(Mm(i),"setFixtureState",function(g){if(!i.state.selectedFixture){console.warn("[FixtureLoader] Trying to set fixture state with no fixture selected");return}i.setState(function(_){var w=_.selectedFixture;return w?{selectedFixture:Y0(Y0({},w),{},{fixtureState:g(w.fixtureState)})}:null})}),i}return $B(n,[{key:"componentDidMount",value:function(){if(!this.props.selectedFixtureId){var s=this.props.rendererConnect;this.unsubscribe=s.onMessage(this.handleRequest),this.postReadyState()}}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"componentDidUpdate",value:function(s){var l=this.props.fixtures;(0,Iy.isEqual)(l,s.fixtures)||this.postFixtureListUpdate();var a=this.state.selectedFixture;if(a){var g=a.fixtureId,_=a.fixtureState,w=a.syncedFixtureState;g&&!(0,Iy.isEqual)(_,w)&&(this.postFixtureStateChange(g,_),this.updateSyncedFixtureState(_))}}},{key:"shouldComponentUpdate",value:function(s,l){return!(0,Iy.isEqual)(this.props,s)||!(0,Iy.isEqual)(this.state,l)}},{key:"render",value:function(){var s=this.state.selectedFixture;if(!s)return this.renderMessage("No fixture selected.");var l=this.props.fixtures,a=s.fixtureId,g=s.fixtureState;if(!l.hasOwnProperty(a.path))return this.renderMessage("Fixture path not found: ".concat(a.path));var _=l[a.path].module.default,w=(0,DB.getFixture)(_,a.name);if(typeof w>"u")return this.renderMessage("Invalid fixture ID: ".concat(JSON.stringify(a)));var C=this.props,A=C.systemDecorators,I=C.userDecorators,O=C.onErrorReset,D=this.state.renderKey;return t4.default.createElement(zB.FixtureProvider,{key:D,fixtureId:a,fixture:w,systemDecorators:A,userDecorators:I,fixtureState:g,setFixtureState:this.setFixtureState,onErrorReset:O||KB})}},{key:"handleSelectFixtureRequest",value:function(s){var l=s.payload,a=l.fixtureId,g=l.fixtureState;this.setState({selectedFixture:{fixtureId:a,fixtureState:g,syncedFixtureState:g},renderKey:this.state.renderKey+1})}},{key:"handleUnselectFixtureRequest",value:function(){this.setState({selectedFixture:null,renderKey:0})}},{key:"handleSetFixtureStateRequest",value:function(s){var l=s.payload,a=l.fixtureId,g=l.fixtureState,_=this.state.selectedFixture;_&&(0,Iy.isEqual)(a,_.fixtureId)&&this.setState({selectedFixture:{fixtureId:a,fixtureState:g,syncedFixtureState:g}})}},{key:"postReadyState",value:function(){var s=this.props,l=s.rendererId,a=s.initialFixtureId,g=this.getFixtureList();this.postMessage({type:"rendererReady",payload:a?{rendererId:l,fixtures:g,initialFixtureId:a}:{rendererId:l,fixtures:g}})}},{key:"postFixtureListUpdate",value:function(){var s=this.props.rendererId;this.postMessage({type:"fixtureListUpdate",payload:{rendererId:s,fixtures:this.getFixtureList()}})}},{key:"getFixtureList",value:function(){return(0,FB.getFixtureListFromWrappers)(this.props.fixtures)}},{key:"fireChangeCallback",value:function(){var s=this.props.onErrorReset;typeof s=="function"&&s()}},{key:"updateSyncedFixtureState",value:function(s){this.setState(function(l){var a=l.selectedFixture;return a?{selectedFixture:Y0(Y0({},a),{},{syncedFixtureState:s})}:null})}},{key:"postMessage",value:function(s){this.props.rendererConnect.postMessage(s)}},{key:"renderMessage",value:function(s){return typeof this.props.renderMessage<"u"?this.props.renderMessage({msg:s}):s}}]),n}(t4.Component);Cb.FixtureLoader=GB;function WB(e){return e.type==="selectFixture"||e.type==="unselectFixture"}function KB(){}var ck={},fk={};Object.defineProperty(fk,"__esModule",{value:!0});fk.registerShortcuts=ZB;function ZB(e){window.addEventListener("keydown",n);function t(i,s){i.preventDefault(),e(s)}function n(i){if(!XB()){var s=String.fromCharCode(i.keyCode),l=i.metaKey||i.ctrlKey;s==="P"&&l?t(i,"searchFixtures"):s==="L"&&l&&i.shiftKey?t(i,"toggleFixtureList"):s==="K"&&l&&i.shiftKey?t(i,"toggleControlPanel"):s==="F"&&l&&i.shiftKey?t(i,"goFullScreen"):s==="E"&&l&&i.shiftKey&&t(i,"editFixture")}}return function(){window.removeEventListener("keydown",n)}}function XB(){var e=document.activeElement;return e&&QB(e.tagName)}function QB(e){var t=["input","textarea","select"];return t.includes(e.toLowerCase())}Object.defineProperty(ck,"__esModule",{value:!0});ck.createPostMessageConnect=JB;var YB=fk;function JB(){function e(t){parent.postMessage(t,"*")}return{postMessage:e,onMessage:function(n){function i(l){n(l.data)}window.addEventListener("message",i,!1);var s=(0,YB.registerShortcuts)(function(l){e({type:"playgroundCommand",payload:{command:l}})});return function(){window.removeEventListener("message",i),s()}}}}var pk={},hk={},kb={};Object.defineProperty(kb,"__esModule",{value:!0});kb.getDefaultSelectValue=eN;function eN(e){var t=e.options,n=e.defaultValue;return typeof n=="string"?n:t[0]}function HC(e){return HC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HC(e)}Object.defineProperty(hk,"__esModule",{value:!0});hk.useCreateFixtureState=oN;var i4=iN(mt),tN=Au,nN=ss,rN=kb;function KO(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(KO=function(s){return s?n:t})(e)}function iN(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||HC(e)!=="object"&&typeof e!="function")return{default:e};var n=KO(t);if(n&&n.has(e))return n.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)){var a=s?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i}function o4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function J0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o4(Object(n),!0).forEach(function(i){ZO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ZO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oN(e,t){var n=i4.default.useContext(nN.FixtureContext),i=n.setFixtureState,s=(0,rN.getDefaultSelectValue)(t);(0,i4.useEffect)(function(){i(function(l){var a=(0,tN.findFixtureStateControl)(l,e);return a&&a.type==="select"&&a.defaultValue===s?l:J0(J0({},l),{},{controls:J0(J0({},l.controls),{},ZO({},e,{type:"select",options:t.options,defaultValue:s,currentValue:s}))})})},[t.options,s,e,i])}var dk={};Object.defineProperty(dk,"__esModule",{value:!0});dk.useCurrentValue=cN;var aN=mt,sN=Au,lN=ss,uN=kb;function cN(e,t){var n=(0,aN.useContext)(lN.FixtureContext),i=n.fixtureState,s=(0,sN.findFixtureStateControl)(i,e);return s&&s.type==="select"?s.currentValue:(0,uN.getDefaultSelectValue)(t)}var mk={};Object.defineProperty(mk,"__esModule",{value:!0});mk.useSetValue=hN;var a4=mt,fN=Au,pN=ss;function s4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Cm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(n),!0).forEach(function(i){XO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function XO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hN(e){var t=(0,a4.useContext)(pN.FixtureContext),n=t.setFixtureState;return(0,a4.useCallback)(function(i){n(function(s){var l=(0,fN.findFixtureStateControl)(s,e);return!l||l.type!=="select"?(console.warn("Invalid fixture state for select: ".concat(e)),s):Cm(Cm({},s),{},{controls:Cm(Cm({},s.controls),{},XO({},e,Cm(Cm({},l),{},{currentValue:i})))})})},[e,n])}Object.defineProperty(pk,"__esModule",{value:!0});pk.useSelect=yN;var dN=hk,mN=dk,gN=mk;function yN(e,t){if(!t||!t.options||!t.options.length)throw new Error("No options provided to useSelect");(0,dN.useCreateFixtureState)(e,t);var n=(0,mN.useCurrentValue)(e,t),i=(0,gN.useSetValue)(e);return[n,i]}var gk={},yk={};Object.defineProperty(yk,"__esModule",{value:!0});yk.useCreateFixtureState=bN;var vN=la,l4=xN(mt),B1=Au,_N=ss;function xN(e){return e&&e.__esModule?e:{default:e}}function u4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function e1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u4(Object(n),!0).forEach(function(i){QO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function QO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bN(e,t){var n=l4.default.useContext(_N.FixtureContext),i=n.setFixtureState;l4.default.useEffect(function(){i(function(s){var l=(0,B1.findFixtureStateControl)(s,e);return l&&l.type==="standard"&&wN(l.defaultValue,t)?s:e1(e1({},s),{},{controls:e1(e1({},s.controls),{},QO({},e,{type:"standard",defaultValue:(0,B1.createValue)(t),currentValue:(0,B1.createValue)(t)}))})})},[i,e,t])}function wN(e,t){return(0,vN.isEqual)(t,(0,B1.extendWithValue)(t,e))}var vk={};Object.defineProperty(vk,"__esModule",{value:!0});vk.useCurrentValue=kN;var SN=EN(mt),c4=Au,CN=ss;function EN(e){return e&&e.__esModule?e:{default:e}}function kN(e,t){var n=SN.default.useContext(CN.FixtureContext),i=n.fixtureState,s=(0,c4.findFixtureStateControl)(i,e);return s&&s.type==="standard"?(0,c4.extendWithValue)(t,s.currentValue):t}var _k={};Object.defineProperty(_k,"__esModule",{value:!0});_k.useSetValue=TN;var f4=PN(mt),bx=Au,AN=ss;function PN(e){return e&&e.__esModule?e:{default:e}}function p4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function t1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p4(Object(n),!0).forEach(function(i){YO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function YO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TN(e,t){var n=f4.default.useContext(AN.FixtureContext),i=n.setFixtureState;return f4.default.useCallback(function(s){i(function(l){var a=typeof s=="function"?s(IN(l,e,t)):s;return t1(t1({},l),{},{controls:t1(t1({},l.controls),{},YO({},e,{type:"standard",defaultValue:(0,bx.createValue)(t),currentValue:(0,bx.createValue)(a)}))})})},[i,t,e])}function IN(e,t,n){var i=(0,bx.findFixtureStateControl)(e,t);return i&&i.type==="standard"?(0,bx.extendWithValue)(n,i.currentValue):n}Object.defineProperty(gk,"__esModule",{value:!0});gk.useValue=RN;var ON=yk,LN=vk,MN=_k;function RN(e,t){var n=t.defaultValue;(0,ON.useCreateFixtureState)(e,n);var i=(0,LN.useCurrentValue)(e,n),s=(0,MN.useSetValue)(e,n);return[i,s]}var Ab={};Object.defineProperty(Ab,"__esModule",{value:!0});Ab.Viewport=void 0;var n1=DN(mt),FN=ss;function DN(e){return e&&e.__esModule?e:{default:e}}function h4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function d4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h4(Object(n),!0).forEach(function(i){zN(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function zN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JO=function(t){var n=t.children,i=t.width,s=t.height,l=n1.default.useContext(FN.FixtureContext),a=l.setFixtureState;return n1.default.useEffect(function(){a(function(g){return d4(d4({},g),{},{viewport:{width:i,height:s}})})},[a,i,s]),n1.default.createElement(n1.default.Fragment,null,n)};Ab.Viewport=JO;JO.cosmosCapture=!1;var xk={},wx={},BN={get exports(){return wx},set exports(e){wx=e}},NN=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$N=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],eL=function(t){var n=t,i=t.indexOf("["),s=t.indexOf("]");i!=-1&&s!=-1&&(t=t.substring(0,i)+t.substring(i,s).replace(/:/g,";")+t.substring(s,t.length));for(var l=NN.exec(t||""),a={},g=14;g--;)a[$N[g]]=l[g]||"";return i!=-1&&s!=-1&&(a.source=n,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a},gd={},UN={get exports(){return gd},set exports(e){gd=e}},Sx={},jN={get exports(){return Sx},set exports(e){Sx=e}},Ov=1e3,Lv=Ov*60,Mv=Lv*60,Rv=Mv*24,VN=Rv*365.25,qN=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return HN(e);if(n==="number"&&isNaN(e)===!1)return t.long?WN(e):GN(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function HN(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*VN;case"days":case"day":case"d":return n*Rv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Mv;case"minutes":case"minute":case"mins":case"min":case"m":return n*Lv;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ov;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function GN(e){return e>=Rv?Math.round(e/Rv)+"d":e>=Mv?Math.round(e/Mv)+"h":e>=Lv?Math.round(e/Lv)+"m":e>=Ov?Math.round(e/Ov)+"s":e+"ms"}function WN(e){return r1(e,Rv,"day")||r1(e,Mv,"hour")||r1(e,Lv,"minute")||r1(e,Ov,"second")||e+" ms"}function r1(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=_,t.disable=a,t.enable=l,t.enabled=g,t.humanize=qN,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(w){var C=0,A;for(A in w)C=(C<<5)-C+w.charCodeAt(A),C|=0;return t.colors[Math.abs(C)%t.colors.length]}function i(w){var C;function A(){if(A.enabled){var I=A,O=+new Date,D=O-(C||O);I.diff=D,I.prev=C,I.curr=O,C=O;for(var B=new Array(arguments.length),H=0;H<B.length;H++)B[H]=arguments[H];B[0]=t.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");var R=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,function(q,Y){if(q==="%%")return q;R++;var se=t.formatters[Y];if(typeof se=="function"){var W=B[R];q=se.call(I,W),B.splice(R,1),R--}return q}),t.formatArgs.call(I,B);var U=A.log||t.log||console.log.bind(console);U.apply(I,B)}}return A.namespace=w,A.enabled=t.enabled(w),A.useColors=t.useColors(),A.color=n(w),A.destroy=s,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function s(){var w=t.instances.indexOf(this);return w!==-1?(t.instances.splice(w,1),!0):!1}function l(w){t.save(w),t.names=[],t.skips=[];var C,A=(typeof w=="string"?w:"").split(/[\s,]+/),I=A.length;for(C=0;C<I;C++)A[C]&&(w=A[C].replace(/\*/g,".*?"),w[0]==="-"?t.skips.push(new RegExp("^"+w.substr(1)+"$")):t.names.push(new RegExp("^"+w+"$")));for(C=0;C<t.instances.length;C++){var O=t.instances[C];O.enabled=t.enabled(O.namespace)}}function a(){t.enable("")}function g(w){if(w[w.length-1]==="*")return!0;var C,A;for(C=0,A=t.skips.length;C<A;C++)if(t.skips[C].test(w))return!1;for(C=0,A=t.names.length;C<A;C++)if(t.names[C].test(w))return!0;return!1}function _(w){return w instanceof Error?w.stack||w.message:w}})(jN,Sx);(function(e,t){t=e.exports=Sx,t.log=s,t.formatArgs=i,t.save=l,t.load=a,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(_){try{return JSON.stringify(_)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}};function i(_){var w=this.useColors;if(_[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+_[0]+(w?"%c ":" ")+"+"+t.humanize(this.diff),!!w){var C="color: "+this.color;_.splice(1,0,C,"color: inherit");var A=0,I=0;_[0].replace(/%[a-zA-Z%]/g,function(O){O!=="%%"&&(A++,O==="%c"&&(I=A))}),_.splice(I,0,C)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(_){try{_==null?t.storage.removeItem("debug"):t.storage.debug=_}catch{}}function a(){var _;try{_=t.storage.debug}catch{}return!_&&typeof process<"u"&&"env"in process&&(_={}.DEBUG),_}t.enable(a());function g(){try{return window.localStorage}catch{}}})(UN,gd);var KN=eL,m4=gd("socket.io-client:url"),ZN=XN;function XN(e,t){var n=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(m4("protocol-less url %s",e),typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),m4("parse %s",e),n=KN(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var i=n.host.indexOf(":")!==-1,s=i?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port,n.href=n.protocol+"://"+s+(t&&t.port===n.port?"":":"+n.port),n}var Pb={},Cx={},QN={get exports(){return Cx},set exports(e){Cx=e}},Ex={},YN={get exports(){return Ex},set exports(e){Ex=e}},Fv=1e3,Dv=Fv*60,zv=Dv*60,Bv=zv*24,JN=Bv*365.25,e$=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return t$(e);if(n==="number"&&isNaN(e)===!1)return t.long?r$(e):n$(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function t$(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*JN;case"days":case"day":case"d":return n*Bv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*zv;case"minutes":case"minute":case"mins":case"min":case"m":return n*Dv;case"seconds":case"second":case"secs":case"sec":case"s":return n*Fv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function n$(e){return e>=Bv?Math.round(e/Bv)+"d":e>=zv?Math.round(e/zv)+"h":e>=Dv?Math.round(e/Dv)+"m":e>=Fv?Math.round(e/Fv)+"s":e+"ms"}function r$(e){return i1(e,Bv,"day")||i1(e,zv,"hour")||i1(e,Dv,"minute")||i1(e,Fv,"second")||e+" ms"}function i1(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=_,t.disable=a,t.enable=l,t.enabled=g,t.humanize=e$,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(w){var C=0,A;for(A in w)C=(C<<5)-C+w.charCodeAt(A),C|=0;return t.colors[Math.abs(C)%t.colors.length]}function i(w){var C;function A(){if(A.enabled){var I=A,O=+new Date,D=O-(C||O);I.diff=D,I.prev=C,I.curr=O,C=O;for(var B=new Array(arguments.length),H=0;H<B.length;H++)B[H]=arguments[H];B[0]=t.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");var R=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,function(q,Y){if(q==="%%")return q;R++;var se=t.formatters[Y];if(typeof se=="function"){var W=B[R];q=se.call(I,W),B.splice(R,1),R--}return q}),t.formatArgs.call(I,B);var U=A.log||t.log||console.log.bind(console);U.apply(I,B)}}return A.namespace=w,A.enabled=t.enabled(w),A.useColors=t.useColors(),A.color=n(w),A.destroy=s,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function s(){var w=t.instances.indexOf(this);return w!==-1?(t.instances.splice(w,1),!0):!1}function l(w){t.save(w),t.names=[],t.skips=[];var C,A=(typeof w=="string"?w:"").split(/[\s,]+/),I=A.length;for(C=0;C<I;C++)A[C]&&(w=A[C].replace(/\*/g,".*?"),w[0]==="-"?t.skips.push(new RegExp("^"+w.substr(1)+"$")):t.names.push(new RegExp("^"+w+"$")));for(C=0;C<t.instances.length;C++){var O=t.instances[C];O.enabled=t.enabled(O.namespace)}}function a(){t.enable("")}function g(w){if(w[w.length-1]==="*")return!0;var C,A;for(C=0,A=t.skips.length;C<A;C++)if(t.skips[C].test(w))return!1;for(C=0,A=t.names.length;C<A;C++)if(t.names[C].test(w))return!0;return!1}function _(w){return w instanceof Error?w.stack||w.message:w}})(YN,Ex);(function(e,t){t=e.exports=Ex,t.log=s,t.formatArgs=i,t.save=l,t.load=a,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(_){try{return JSON.stringify(_)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}};function i(_){var w=this.useColors;if(_[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+_[0]+(w?"%c ":" ")+"+"+t.humanize(this.diff),!!w){var C="color: "+this.color;_.splice(1,0,C,"color: inherit");var A=0,I=0;_[0].replace(/%[a-zA-Z%]/g,function(O){O!=="%%"&&(A++,O==="%c"&&(I=A))}),_.splice(I,0,C)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(_){try{_==null?t.storage.removeItem("debug"):t.storage.debug=_}catch{}}function a(){var _;try{_=t.storage.debug}catch{}return!_&&typeof process<"u"&&"env"in process&&(_={}.DEBUG),_}t.enable(a());function g(){try{return window.localStorage}catch{}}})(QN,Cx);var GC={},i$={get exports(){return GC},set exports(e){GC=e}};(function(e){e.exports=t;function t(i){if(i)return n(i)}function n(i){for(var s in t.prototype)i[s]=t.prototype[s];return i}t.prototype.on=t.prototype.addEventListener=function(i,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(s),this},t.prototype.once=function(i,s){function l(){this.off(i,l),s.apply(this,arguments)}return l.fn=s,this.on(i,l),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(i,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var l=this._callbacks["$"+i];if(!l)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var a,g=0;g<l.length;g++)if(a=l[g],a===s||a.fn===s){l.splice(g,1);break}return l.length===0&&delete this._callbacks["$"+i],this},t.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),l=this._callbacks["$"+i],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(l){l=l.slice(0);for(var a=0,g=l.length;a<g;++a)l[a].apply(this,s)}return this},t.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},t.prototype.hasListeners=function(i){return!!this.listeners(i).length}})(i$);var Tb={},o$={}.toString,bk=Array.isArray||function(e){return o$.call(e)=="[object Array]"},tL=u$,a$=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",s$=typeof ArrayBuffer=="function",l$=function(e){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function u$(e){return a$&&Buffer.isBuffer(e)||s$&&(e instanceof ArrayBuffer||l$(e))}var wk=bk,nL=tL,rL=Object.prototype.toString,c$=typeof Blob=="function"||typeof Blob<"u"&&rL.call(Blob)==="[object BlobConstructor]",f$=typeof File=="function"||typeof File<"u"&&rL.call(File)==="[object FileConstructor]";Tb.deconstructPacket=function(e){var t=[],n=e.data,i=e;return i.data=WC(n,t),i.attachments=t.length,{packet:i,buffers:t}};function WC(e,t){if(!e)return e;if(nL(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}else if(wk(e)){for(var i=new Array(e.length),s=0;s<e.length;s++)i[s]=WC(e[s],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){var i={};for(var l in e)i[l]=WC(e[l],t);return i}return e}Tb.reconstructPacket=function(e,t){return e.data=KC(e.data,t),e.attachments=void 0,e};function KC(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(wk(e))for(var n=0;n<e.length;n++)e[n]=KC(e[n],t);else if(typeof e=="object")for(var i in e)e[i]=KC(e[i],t);return e}Tb.removeBlobs=function(e,t){function n(l,a,g){if(!l)return l;if(c$&&l instanceof Blob||f$&&l instanceof File){i++;var _=new FileReader;_.onload=function(){g?g[a]=this.result:s=this.result,--i||t(s)},_.readAsArrayBuffer(l)}else if(wk(l))for(var w=0;w<l.length;w++)n(l[w],w,l);else if(typeof l=="object"&&!nL(l))for(var C in l)n(l[C],C,l)}var i=0,s=e;n(s),i||t(s)};(function(e){var t=Cx("socket.io-parser"),n=GC,i=Tb,s=bk,l=tL;e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=a,e.Decoder=A;function a(){}var g=e.ERROR+'"encode error"';a.prototype.encode=function(H,R){if(t("encoding packet %j",H),e.BINARY_EVENT===H.type||e.BINARY_ACK===H.type)C(H,R);else{var U=_(H);R([U])}};function _(H){var R=""+H.type;if((e.BINARY_EVENT===H.type||e.BINARY_ACK===H.type)&&(R+=H.attachments+"-"),H.nsp&&H.nsp!=="/"&&(R+=H.nsp+","),H.id!=null&&(R+=H.id),H.data!=null){var U=w(H.data);if(U!==!1)R+=U;else return g}return t("encoded %j as %s",H,R),R}function w(H){try{return JSON.stringify(H)}catch{return!1}}function C(H,R){function U(q){var Y=i.deconstructPacket(q),se=_(Y.packet),W=Y.buffers;W.unshift(se),R(W)}i.removeBlobs(H,U)}function A(){this.reconstructor=null}n(A.prototype),A.prototype.add=function(H){var R;if(typeof H=="string")R=I(H),e.BINARY_EVENT===R.type||e.BINARY_ACK===R.type?(this.reconstructor=new D(R),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",R)):this.emit("decoded",R);else if(l(H)||H.base64)if(this.reconstructor)R=this.reconstructor.takeBinaryData(H),R&&(this.reconstructor=null,this.emit("decoded",R));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+H)};function I(H){var R=0,U={type:Number(H.charAt(0))};if(e.types[U.type]==null)return B("unknown packet type "+U.type);if(e.BINARY_EVENT===U.type||e.BINARY_ACK===U.type){for(var q=R+1;H.charAt(++R)!=="-"&&R!=H.length;);var Y=H.substring(q,R);if(Y!=Number(Y)||H.charAt(R)!=="-")throw new Error("Illegal attachments");U.attachments=Number(Y)}if(H.charAt(R+1)==="/"){for(var q=R+1;++R;){var se=H.charAt(R);if(se===","||R===H.length)break}U.nsp=H.substring(q,R)}else U.nsp="/";var W=H.charAt(R+1);if(W!==""&&Number(W)==W){for(var q=R+1;++R;){var se=H.charAt(R);if(se==null||Number(se)!=se){--R;break}if(R===H.length)break}U.id=Number(H.substring(q,R+1))}if(H.charAt(++R)){var ce=O(H.substr(R)),xe=ce!==!1&&(U.type===e.ERROR||s(ce));if(xe)U.data=ce;else return B("invalid payload")}return t("decoded %s as %j",H,U),U}function O(H){try{return JSON.parse(H)}catch{return!1}}A.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function D(H){this.reconPack=H,this.buffers=[]}D.prototype.takeBinaryData=function(H){if(this.buffers.push(H),this.buffers.length===this.reconPack.attachments){var R=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),R}return null},D.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function B(H){return{type:e.ERROR,data:"parser error: "+H}}})(Pb);var ZC={},p$={get exports(){return ZC},set exports(e){ZC=e}},Ib={},XC={},g4={get exports(){return XC},set exports(e){XC=e}};try{g4.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{g4.exports=!1}var h$=XC,Sk=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!t||h$))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!n&&i)return new XDomainRequest}catch{}if(!t)try{return new self[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},kx={},d$={get exports(){return kx},set exports(e){kx=e}},Ed={},m$=Object.keys||function(t){var n=[],i=Object.prototype.hasOwnProperty;for(var s in t)i.call(t,s)&&n.push(s);return n},g$=bk,iL=Object.prototype.toString,y$=typeof Blob=="function"||typeof Blob<"u"&&iL.call(Blob)==="[object BlobConstructor]",v$=typeof File=="function"||typeof File<"u"&&iL.call(File)==="[object FileConstructor]",oL=N1;function N1(e){if(!e||typeof e!="object")return!1;if(g$(e)){for(var t=0,n=e.length;t<n;t++)if(N1(e[t]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||y$&&e instanceof Blob||v$&&e instanceof File)return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return N1(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&N1(e[i]))return!0;return!1}var _$=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||i===0)return new ArrayBuffer(0);for(var s=new Uint8Array(e),l=new Uint8Array(n-t),a=t,g=0;a<n;a++,g++)l[g]=s[a];return l.buffer},x$=b$;function b$(e,t,n){var i=!1;return n=n||w$,s.count=e,e===0?t():s;function s(l,a){if(s.count<=0)throw new Error("after called too many times");--s.count,l?(i=!0,t(l),t=n):s.count===0&&!i&&t(null,a)}}function w$(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var Ip=String.fromCharCode;function aL(e){for(var t=[],n=0,i=e.length,s,l;n<i;)s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<i?(l=e.charCodeAt(n++),(l&64512)==56320?t.push(((s&1023)<<10)+(l&1023)+65536):(t.push(s),n--)):t.push(s);return t}function S$(e){for(var t=e.length,n=-1,i,s="";++n<t;)i=e[n],i>65535&&(i-=65536,s+=Ip(i>>>10&1023|55296),i=56320|i&1023),s+=Ip(i);return s}function sL(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function eS(e,t){return Ip(e>>t&63|128)}function C$(e,t){if(!(e&4294967168))return Ip(e);var n="";return e&4294965248?e&4294901760?e&4292870144||(n=Ip(e>>18&7|240),n+=eS(e,12),n+=eS(e,6)):(sL(e,t)||(e=65533),n=Ip(e>>12&15|224),n+=eS(e,6)):n=Ip(e>>6&31|192),n+=Ip(e&63|128),n}function E$(e,t){t=t||{};for(var n=t.strict!==!1,i=aL(e),s=i.length,l=-1,a,g="";++l<s;)a=i[l],g+=C$(a,n);return g}function Em(){if(Mp>=Px)throw Error("Invalid byte index");var e=Ax[Mp]&255;if(Mp++,(e&192)==128)return e&63;throw Error("Invalid continuation byte")}function k$(e){var t,n,i,s,l;if(Mp>Px)throw Error("Invalid byte index");if(Mp==Px)return!1;if(t=Ax[Mp]&255,Mp++,!(t&128))return t;if((t&224)==192){if(n=Em(),l=(t&31)<<6|n,l>=128)return l;throw Error("Invalid continuation byte")}if((t&240)==224){if(n=Em(),i=Em(),l=(t&15)<<12|n<<6|i,l>=2048)return sL(l,e)?l:65533;throw Error("Invalid continuation byte")}if((t&248)==240&&(n=Em(),i=Em(),s=Em(),l=(t&7)<<18|n<<12|i<<6|s,l>=65536&&l<=1114111))return l;throw Error("Invalid UTF-8 detected")}var Ax,Px,Mp;function A$(e,t){t=t||{};var n=t.strict!==!1;Ax=aL(e),Px=Ax.length,Mp=0;for(var i=[],s;(s=k$(n))!==!1;)i.push(s);return S$(i)}var P$={version:"2.1.2",encode:E$,decode:A$},o1={},y4;function T$(){return y4||(y4=1,function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;o1.encode=function(i){var s=new Uint8Array(i),l,a=s.length,g="";for(l=0;l<a;l+=3)g+=e[s[l]>>2],g+=e[(s[l]&3)<<4|s[l+1]>>4],g+=e[(s[l+1]&15)<<2|s[l+2]>>6],g+=e[s[l+2]&63];return a%3===2?g=g.substring(0,g.length-1)+"=":a%3===1&&(g=g.substring(0,g.length-2)+"=="),g},o1.decode=function(i){var s=i.length*.75,l=i.length,a,g=0,_,w,C,A;i[i.length-1]==="="&&(s--,i[i.length-2]==="="&&s--);var I=new ArrayBuffer(s),O=new Uint8Array(I);for(a=0;a<l;a+=4)_=t[i.charCodeAt(a)],w=t[i.charCodeAt(a+1)],C=t[i.charCodeAt(a+2)],A=t[i.charCodeAt(a+3)],O[g++]=_<<2|w>>4,O[g++]=(w&15)<<4|C>>2,O[g++]=(C&3)<<6|A&63;return I}}()),o1}var tS,v4;function I$(){if(v4)return tS;v4=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var g=new Blob(["hi"]);return g.size===2}catch{return!1}}(),n=t&&function(){try{var g=new Blob([new Uint8Array([1,2])]);return g.size===2}catch{return!1}}(),i=e&&e.prototype.append&&e.prototype.getBlob;function s(g){return g.map(function(_){if(_.buffer instanceof ArrayBuffer){var w=_.buffer;if(_.byteLength!==w.byteLength){var C=new Uint8Array(_.byteLength);C.set(new Uint8Array(w,_.byteOffset,_.byteLength)),w=C.buffer}return w}return _})}function l(g,_){_=_||{};var w=new e;return s(g).forEach(function(C){w.append(C)}),_.type?w.getBlob(_.type):w.getBlob()}function a(g,_){return new Blob(s(g),_||{})}return typeof Blob<"u"&&(l.prototype=Blob.prototype,a.prototype=Blob.prototype),tS=function(){return t?n?Blob:a:i?l:void 0}(),tS}(function(e){var t=m$,n=oL,i=_$,s=x$,l=P$,a;typeof ArrayBuffer<"u"&&(a=T$());var g=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),_=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),w=g||_;e.protocol=3;var C=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},A=t(C),I={type:"error",data:"parser error"},O=I$();e.encodePacket=function(Y,se,W,ce){typeof se=="function"&&(ce=se,se=!1),typeof W=="function"&&(ce=W,W=null);var xe=Y.data===void 0?void 0:Y.data.buffer||Y.data;if(typeof ArrayBuffer<"u"&&xe instanceof ArrayBuffer)return B(Y,se,ce);if(typeof O<"u"&&xe instanceof O)return R(Y,se,ce);if(xe&&xe.base64)return D(Y,ce);var Me=C[Y.type];return Y.data!==void 0&&(Me+=W?l.encode(String(Y.data),{strict:!1}):String(Y.data)),ce(""+Me)};function D(Y,se){var W="b"+e.packets[Y.type]+Y.data.data;return se(W)}function B(Y,se,W){if(!se)return e.encodeBase64Packet(Y,W);var ce=Y.data,xe=new Uint8Array(ce),Me=new Uint8Array(1+ce.byteLength);Me[0]=C[Y.type];for(var $e=0;$e<xe.length;$e++)Me[$e+1]=xe[$e];return W(Me.buffer)}function H(Y,se,W){if(!se)return e.encodeBase64Packet(Y,W);var ce=new FileReader;return ce.onload=function(){e.encodePacket({type:Y.type,data:ce.result},se,!0,W)},ce.readAsArrayBuffer(Y.data)}function R(Y,se,W){if(!se)return e.encodeBase64Packet(Y,W);if(w)return H(Y,se,W);var ce=new Uint8Array(1);ce[0]=C[Y.type];var xe=new O([ce.buffer,Y.data]);return W(xe)}e.encodeBase64Packet=function(Y,se){var W="b"+e.packets[Y.type];if(typeof O<"u"&&Y.data instanceof O){var ce=new FileReader;return ce.onload=function(){var Ge=ce.result.split(",")[1];se(W+Ge)},ce.readAsDataURL(Y.data)}var xe;try{xe=String.fromCharCode.apply(null,new Uint8Array(Y.data))}catch{for(var Me=new Uint8Array(Y.data),$e=new Array(Me.length),Le=0;Le<Me.length;Le++)$e[Le]=Me[Le];xe=String.fromCharCode.apply(null,$e)}return W+=btoa(xe),se(W)},e.decodePacket=function(Y,se,W){if(Y===void 0)return I;if(typeof Y=="string"){if(Y.charAt(0)==="b")return e.decodeBase64Packet(Y.substr(1),se);if(W&&(Y=U(Y),Y===!1))return I;var xe=Y.charAt(0);return Number(xe)!=xe||!A[xe]?I:Y.length>1?{type:A[xe],data:Y.substring(1)}:{type:A[xe]}}var ce=new Uint8Array(Y),xe=ce[0],Me=i(Y,1);return O&&se==="blob"&&(Me=new O([Me])),{type:A[xe],data:Me}};function U(Y){try{Y=l.decode(Y,{strict:!1})}catch{return!1}return Y}e.decodeBase64Packet=function(Y,se){var W=A[Y.charAt(0)];if(!a)return{type:W,data:{base64:!0,data:Y.substr(1)}};var ce=a.decode(Y.substr(1));return se==="blob"&&O&&(ce=new O([ce])),{type:W,data:ce}},e.encodePayload=function(Y,se,W){typeof se=="function"&&(W=se,se=null);var ce=n(Y);if(se&&ce)return O&&!w?e.encodePayloadAsBlob(Y,W):e.encodePayloadAsArrayBuffer(Y,W);if(!Y.length)return W("0:");function xe($e){return $e.length+":"+$e}function Me($e,Le){e.encodePacket($e,ce?se:!1,!1,function(Ge){Le(null,xe(Ge))})}q(Y,Me,function($e,Le){return W(Le.join(""))})};function q(Y,se,W){for(var ce=new Array(Y.length),xe=s(Y.length,W),Me=function(Le,Ge,Ye){se(Ge,function(ht,Lt){ce[Le]=Lt,Ye(ht,ce)})},$e=0;$e<Y.length;$e++)Me($e,Y[$e],xe)}e.decodePayload=function(Y,se,W){if(typeof Y!="string")return e.decodePayloadAsBinary(Y,se,W);typeof se=="function"&&(W=se,se=null);var ce;if(Y==="")return W(I,0,1);for(var xe="",Me,$e,Le=0,Ge=Y.length;Le<Ge;Le++){var Ye=Y.charAt(Le);if(Ye!==":"){xe+=Ye;continue}if(xe===""||xe!=(Me=Number(xe))||($e=Y.substr(Le+1,Me),xe!=$e.length))return W(I,0,1);if($e.length){if(ce=e.decodePacket($e,se,!1),I.type===ce.type&&I.data===ce.data)return W(I,0,1);var ht=W(ce,Le+Me,Ge);if(ht===!1)return}Le+=Me,xe=""}if(xe!=="")return W(I,0,1)},e.encodePayloadAsArrayBuffer=function(Y,se){if(!Y.length)return se(new ArrayBuffer(0));function W(ce,xe){e.encodePacket(ce,!0,!0,function(Me){return xe(null,Me)})}q(Y,W,function(ce,xe){var Me=xe.reduce(function(Ge,Ye){var ht;return typeof Ye=="string"?ht=Ye.length:ht=Ye.byteLength,Ge+ht.toString().length+ht+2},0),$e=new Uint8Array(Me),Le=0;return xe.forEach(function(Ge){var Ye=typeof Ge=="string",ht=Ge;if(Ye){for(var qt=new Uint8Array(Ge.length),Lt=0;Lt<Ge.length;Lt++)qt[Lt]=Ge.charCodeAt(Lt);ht=qt.buffer}Ye?$e[Le++]=0:$e[Le++]=1;for(var Dt=ht.byteLength.toString(),Lt=0;Lt<Dt.length;Lt++)$e[Le++]=parseInt(Dt[Lt]);$e[Le++]=255;for(var qt=new Uint8Array(ht),Lt=0;Lt<qt.length;Lt++)$e[Le++]=qt[Lt]}),se($e.buffer)})},e.encodePayloadAsBlob=function(Y,se){function W(ce,xe){e.encodePacket(ce,!0,!0,function(Me){var $e=new Uint8Array(1);if($e[0]=1,typeof Me=="string"){for(var Le=new Uint8Array(Me.length),Ge=0;Ge<Me.length;Ge++)Le[Ge]=Me.charCodeAt(Ge);Me=Le.buffer,$e[0]=0}for(var Ye=Me instanceof ArrayBuffer?Me.byteLength:Me.size,ht=Ye.toString(),Lt=new Uint8Array(ht.length+1),Ge=0;Ge<ht.length;Ge++)Lt[Ge]=parseInt(ht[Ge]);if(Lt[ht.length]=255,O){var Dt=new O([$e.buffer,Lt.buffer,Me]);xe(null,Dt)}})}q(Y,W,function(ce,xe){return se(new O(xe))})},e.decodePayloadAsBinary=function(Y,se,W){typeof se=="function"&&(W=se,se=null);for(var ce=Y,xe=[];ce.byteLength>0;){for(var Me=new Uint8Array(ce),$e=Me[0]===0,Le="",Ge=1;Me[Ge]!==255;Ge++){if(Le.length>310)return W(I,0,1);Le+=Me[Ge]}ce=i(ce,2+Le.length),Le=parseInt(Le);var Ye=i(ce,0,Le);if($e)try{Ye=String.fromCharCode.apply(null,new Uint8Array(Ye))}catch{var ht=new Uint8Array(Ye);Ye="";for(var Ge=0;Ge<ht.length;Ge++)Ye+=String.fromCharCode(ht[Ge])}xe.push(Ye),ce=i(ce,Le)}var Lt=xe.length;xe.forEach(function(Dt,qt){W(e.decodePacket(Dt,se,!0),qt,Lt)})}})(Ed);var Nv={},O$={get exports(){return Nv},set exports(e){Nv=e}};(function(e){e.exports=t;function t(i){if(i)return n(i)}function n(i){for(var s in t.prototype)i[s]=t.prototype[s];return i}t.prototype.on=t.prototype.addEventListener=function(i,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(s),this},t.prototype.once=function(i,s){function l(){this.off(i,l),s.apply(this,arguments)}return l.fn=s,this.on(i,l),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(i,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var l=this._callbacks["$"+i];if(!l)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var a,g=0;g<l.length;g++)if(a=l[g],a===s||a.fn===s){l.splice(g,1);break}return this},t.prototype.emit=function(i){this._callbacks=this._callbacks||{};var s=[].slice.call(arguments,1),l=this._callbacks["$"+i];if(l){l=l.slice(0);for(var a=0,g=l.length;a<g;++a)l[a].apply(this,s)}return this},t.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},t.prototype.hasListeners=function(i){return!!this.listeners(i).length}})(O$);var nS,_4;function Ck(){if(_4)return nS;_4=1;var e=Ed,t=Nv;nS=n;function n(i){this.path=i.path,this.hostname=i.hostname,this.port=i.port,this.secure=i.secure,this.query=i.query,this.timestampParam=i.timestampParam,this.timestampRequests=i.timestampRequests,this.readyState="",this.agent=i.agent||!1,this.socket=i.socket,this.enablesXDR=i.enablesXDR,this.pfx=i.pfx,this.key=i.key,this.passphrase=i.passphrase,this.cert=i.cert,this.ca=i.ca,this.ciphers=i.ciphers,this.rejectUnauthorized=i.rejectUnauthorized,this.forceNode=i.forceNode,this.isReactNative=i.isReactNative,this.extraHeaders=i.extraHeaders,this.localAddress=i.localAddress}return t(n.prototype),n.prototype.onError=function(i,s){var l=new Error(i);return l.type="TransportError",l.description=s,this.emit("error",l),this},n.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},n.prototype.send=function(i){if(this.readyState==="open")this.write(i);else throw new Error("Transport not open")},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(i){var s=e.decodePacket(i,this.socket.binaryType);this.onPacket(s)},n.prototype.onPacket=function(i){this.emit("packet",i)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")},nS}var Cg={};Cg.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t};Cg.decode=function(e){for(var t={},n=e.split("&"),i=0,s=n.length;i<s;i++){var l=n[i].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t};var Ob=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},lL="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Tx=64,uL={},x4=0,Rp=0,b4;function QC(e){var t="";do t=lL[e%Tx]+t,e=Math.floor(e/Tx);while(e>0);return t}function L$(e){var t=0;for(Rp=0;Rp<e.length;Rp++)t=t*Tx+uL[e.charAt(Rp)];return t}function Ek(){var e=QC(+new Date);return e!==b4?(x4=0,b4=e):e+"."+QC(x4++)}for(;Rp<Tx;Rp++)uL[lL[Rp]]=Rp;Ek.encode=QC;Ek.decode=L$;var cL=Ek,yd={},M$={get exports(){return yd},set exports(e){yd=e}},Ix={},R$={get exports(){return Ix},set exports(e){Ix=e}},$v=1e3,Uv=$v*60,jv=Uv*60,Vv=jv*24,F$=Vv*365.25,D$=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return z$(e);if(n==="number"&&isNaN(e)===!1)return t.long?N$(e):B$(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function z$(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*F$;case"days":case"day":case"d":return n*Vv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*jv;case"minutes":case"minute":case"mins":case"min":case"m":return n*Uv;case"seconds":case"second":case"secs":case"sec":case"s":return n*$v;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function B$(e){return e>=Vv?Math.round(e/Vv)+"d":e>=jv?Math.round(e/jv)+"h":e>=Uv?Math.round(e/Uv)+"m":e>=$v?Math.round(e/$v)+"s":e+"ms"}function N$(e){return a1(e,Vv,"day")||a1(e,jv,"hour")||a1(e,Uv,"minute")||a1(e,$v,"second")||e+" ms"}function a1(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=_,t.disable=a,t.enable=l,t.enabled=g,t.humanize=D$,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(w){var C=0,A;for(A in w)C=(C<<5)-C+w.charCodeAt(A),C|=0;return t.colors[Math.abs(C)%t.colors.length]}function i(w){var C;function A(){if(A.enabled){var I=A,O=+new Date,D=O-(C||O);I.diff=D,I.prev=C,I.curr=O,C=O;for(var B=new Array(arguments.length),H=0;H<B.length;H++)B[H]=arguments[H];B[0]=t.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");var R=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,function(q,Y){if(q==="%%")return q;R++;var se=t.formatters[Y];if(typeof se=="function"){var W=B[R];q=se.call(I,W),B.splice(R,1),R--}return q}),t.formatArgs.call(I,B);var U=A.log||t.log||console.log.bind(console);U.apply(I,B)}}return A.namespace=w,A.enabled=t.enabled(w),A.useColors=t.useColors(),A.color=n(w),A.destroy=s,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function s(){var w=t.instances.indexOf(this);return w!==-1?(t.instances.splice(w,1),!0):!1}function l(w){t.save(w),t.names=[],t.skips=[];var C,A=(typeof w=="string"?w:"").split(/[\s,]+/),I=A.length;for(C=0;C<I;C++)A[C]&&(w=A[C].replace(/\*/g,".*?"),w[0]==="-"?t.skips.push(new RegExp("^"+w.substr(1)+"$")):t.names.push(new RegExp("^"+w+"$")));for(C=0;C<t.instances.length;C++){var O=t.instances[C];O.enabled=t.enabled(O.namespace)}}function a(){t.enable("")}function g(w){if(w[w.length-1]==="*")return!0;var C,A;for(C=0,A=t.skips.length;C<A;C++)if(t.skips[C].test(w))return!1;for(C=0,A=t.names.length;C<A;C++)if(t.names[C].test(w))return!0;return!1}function _(w){return w instanceof Error?w.stack||w.message:w}})(R$,Ix);(function(e,t){t=e.exports=Ix,t.log=s,t.formatArgs=i,t.save=l,t.load=a,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(_){try{return JSON.stringify(_)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}};function i(_){var w=this.useColors;if(_[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+_[0]+(w?"%c ":" ")+"+"+t.humanize(this.diff),!!w){var C="color: "+this.color;_.splice(1,0,C,"color: inherit");var A=0,I=0;_[0].replace(/%[a-zA-Z%]/g,function(O){O!=="%%"&&(A++,O==="%c"&&(I=A))}),_.splice(I,0,C)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(_){try{_==null?t.storage.removeItem("debug"):t.storage.debug=_}catch{}}function a(){var _;try{_=t.storage.debug}catch{}return!_&&typeof process<"u"&&"env"in process&&(_={}.DEBUG),_}t.enable(a());function g(){try{return window.localStorage}catch{}}})(M$,yd);var fL=Ck(),$$=Cg,pL=Ed,U$=Ob,j$=cL,bu=yd("engine.io-client:polling"),hL=fc,V$=function(){var e=Sk,t=new e({xdomain:!1});return t.responseType!=null}();function fc(e){var t=e&&e.forceBase64;(!V$||t)&&(this.supportsBinary=!1),fL.call(this,e)}U$(fc,fL);fc.prototype.name="polling";fc.prototype.doOpen=function(){this.poll()};fc.prototype.pause=function(e){var t=this;this.readyState="pausing";function n(){bu("paused"),t.readyState="paused",e()}if(this.polling||!this.writable){var i=0;this.polling&&(bu("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){bu("pre-pause polling complete"),--i||n()})),this.writable||(bu("we are currently writing - waiting to pause"),i++,this.once("drain",function(){bu("pre-pause writing complete"),--i||n()}))}else n()};fc.prototype.poll=function(){bu("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};fc.prototype.onData=function(e){var t=this;bu("polling got data %s",e);var n=function(i,s,l){if(t.readyState==="opening"&&t.onOpen(),i.type==="close")return t.onClose(),!1;t.onPacket(i)};pL.decodePayload(e,this.socket.binaryType,n),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():bu('ignoring poll - transport state "%s"',this.readyState))};fc.prototype.doClose=function(){var e=this;function t(){bu("writing close packet"),e.write([{type:"close"}])}this.readyState==="open"?(bu("transport open - closing"),t()):(bu("transport not open - deferring close"),this.once("open",t))};fc.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};pL.encodePayload(e,this.supportsBinary,function(i){t.doWrite(i,n)})};fc.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";this.timestampRequests!==!1&&(e[this.timestampParam]=j$()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=$$.encode(e),this.port&&(t==="https"&&Number(this.port)!==443||t==="http"&&Number(this.port)!==80)&&(n=":"+this.port),e.length&&(e="?"+e);var i=this.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+e};var q$=Sk,dL=hL,H$=Nv,G$=Ob,YC=yd("engine.io-client:polling-xhr");d$.exports=Eg;kx.Request=Wo;function w4(){}function Eg(e){if(dL.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,typeof location<"u"){var t=location.protocol==="https:",n=location.port;n||(n=t?443:80),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}G$(Eg,dL);Eg.prototype.supportsBinary=!0;Eg.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Wo(e)};Eg.prototype.doWrite=function(e,t){var n=typeof e!="string"&&e!==void 0,i=this.request({method:"POST",data:e,isBinary:n}),s=this;i.on("success",t),i.on("error",function(l){s.onError("xhr post error",l)}),this.sendXhr=i};Eg.prototype.doPoll=function(){YC("xhr poll");var e=this.request(),t=this;e.on("data",function(n){t.onData(n)}),e.on("error",function(n){t.onError("xhr poll error",n)}),this.pollXhr=e};function Wo(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}H$(Wo.prototype);Wo.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new q$(e),n=this;try{YC("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}}catch{}if(this.method==="POST")try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(t.readyState===2)try{var s=t.getResponseHeader("Content-Type");n.supportsBinary&&s==="application/octet-stream"&&(t.responseType="arraybuffer")}catch{}t.readyState===4&&(t.status===200||t.status===1223?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},YC("xhr data %s",this.data),t.send(this.data)}catch(s){setTimeout(function(){n.onError(s)},0);return}typeof document<"u"&&(this.index=Wo.requestsCount++,Wo.requests[this.index]=this)};Wo.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};Wo.prototype.onData=function(e){this.emit("data",e),this.onSuccess()};Wo.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)};Wo.prototype.cleanup=function(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=w4:this.xhr.onreadystatechange=w4,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Wo.requests[this.index],this.xhr=null}};Wo.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch{}t==="application/octet-stream"?e=this.xhr.response||this.xhr.responseText:e=this.xhr.responseText}catch(n){this.onError(n)}e!=null&&this.onData(e)};Wo.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};Wo.prototype.abort=function(){this.cleanup()};Wo.requestsCount=0;Wo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",S4);else if(typeof addEventListener=="function"){var W$="onpagehide"in self?"pagehide":"unload";addEventListener(W$,S4,!1)}}function S4(){for(var e in Wo.requests)Wo.requests.hasOwnProperty(e)&&Wo.requests[e].abort()}var kk=hL,K$=Ob,Z$=kg,X$=/\n/g,Q$=/\\n/g,s1;function Y$(){}function J$(){return typeof self<"u"?self:typeof window<"u"?window:typeof Ol<"u"?Ol:{}}function kg(e){if(kk.call(this,e),this.query=this.query||{},!s1){var t=J$();s1=t.___eio=t.___eio||[]}this.index=s1.length;var n=this;s1.push(function(i){n.onData(i)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=Y$)},!1)}K$(kg,kk);kg.prototype.supportsBinary=!1;kg.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),kk.prototype.doClose.call(this)};kg.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(s){e.onError("jsonp poll error",s)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var i=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var s=document.createElement("iframe");document.body.appendChild(s),document.body.removeChild(s)},100)};kg.prototype.doWrite=function(e,t){var n=this;if(!this.form){var i=document.createElement("form"),s=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index,a;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=l,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.uri();function g(){_(),t()}function _(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(C){n.onError("jsonp polling iframe removal error",C)}try{var w='<iframe src="javascript:0" name="'+n.iframeId+'">';a=document.createElement(w)}catch{a=document.createElement("iframe"),a.name=n.iframeId,a.src="javascript:0"}a.id=n.iframeId,n.form.appendChild(a),n.iframe=a}_(),e=e.replace(Q$,`\\
`),this.area.value=e.replace(X$,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState==="complete"&&g()}:this.iframe.onload=g};const eU={},tU=Object.freeze(Object.defineProperty({__proto__:null,default:eU},Symbol.toStringTag,{value:"Module"})),nU=HF(tU);var Ak=Ck(),rU=Ed,iU=Cg,oU=Ob,aU=cL,sU=yd("engine.io-client:websocket"),Ox,Pk;if(typeof WebSocket<"u")Ox=WebSocket;else if(typeof self<"u")Ox=self.WebSocket||self.MozWebSocket;else try{Pk=nU}catch{}var og=Ox||Pk,lU=zl;function zl(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=Ox&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(og=Pk),Ak.call(this,e)}oU(zl,Ak);zl.prototype.name="websocket";zl.prototype.supportsBinary=!0;zl.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new og(e,t):new og(e):new og(e,t,n)}catch(i){return this.emit("error",i)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};zl.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}};zl.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,i=0,s=n;i<s;i++)(function(a){rU.encodePacket(a,t.supportsBinary,function(g){if(!t.usingBrowserWebSocket){var _={};if(a.options&&(_.compress=a.options.compress),t.perMessageDeflate){var w=typeof g=="string"?Buffer.byteLength(g):g.length;w<t.perMessageDeflate.threshold&&(_.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(g):t.ws.send(g,_)}catch{sU("websocket closed before onclose event")}--n||l()})})(e[i]);function l(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}};zl.prototype.onClose=function(){Ak.prototype.onClose.call(this)};zl.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};zl.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&(t==="wss"&&Number(this.port)!==443||t==="ws"&&Number(this.port)!==80)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=aU()),this.supportsBinary||(e.b64=1),e=iU.encode(e),e.length&&(e="?"+e);var i=this.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+e};zl.prototype.check=function(){return!!og&&!("__initialize"in og&&this.name===zl.prototype.name)};var uU=Sk,cU=kx,fU=Z$,pU=lU;Ib.polling=hU;Ib.websocket=pU;function hU(e){var t,n=!1,i=!1,s=e.jsonp!==!1;if(typeof location<"u"){var l=location.protocol==="https:",a=location.port;a||(a=l?443:80),n=e.hostname!==location.hostname||a!==e.port,i=e.secure!==l}if(e.xdomain=n,e.xscheme=i,t=new uU(e),"open"in t&&!e.forceJSONP)return new cU(e);if(!s)throw new Error("JSONP disabled");return new fU(e)}var dU=[].indexOf,mL=function(e,t){if(dU)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},mU=Ib,gU=Nv,To=yd("engine.io-client:socket"),yU=mL,gL=Ed,C4=eL,vU=Cg,_U=vr;function vr(e,t){if(!(this instanceof vr))return new vr(e,t);t=t||{},e&&typeof e=="object"&&(t=e,e=null),e?(e=C4(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=C4(t.host).host),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=t.query||{},typeof this.query=="string"&&(this.query=vU.decode(this.query)),this.upgrade=t.upgrade!==!1,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=t.jsonp!==!1,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=t.perMessageDeflate!==!1?t.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized===void 0?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}vr.priorWebsocketSuccess=!1;gU(vr.prototype);vr.protocol=gL.protocol;vr.Socket=vr;vr.Transport=Ck();vr.transports=Ib;vr.parser=Ed;vr.prototype.createTransport=function(e){To('creating transport "%s"',e);var t=xU(this.query);t.EIO=gL.protocol,t.transport=e;var n=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var i=new mU[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative});return i};function xU(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}vr.prototype.open=function(){var e;if(this.rememberUpgrade&&vr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)};vr.prototype.setTransport=function(e){To("setting transport %s",e.name);var t=this;this.transport&&(To("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(n){t.onPacket(n)}).on("error",function(n){t.onError(n)}).on("close",function(){t.onClose("transport close")})};vr.prototype.probe=function(e){To('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,i=this;vr.priorWebsocketSuccess=!1;function s(){if(i.onlyBinaryUpgrades){var A=!this.supportsBinary&&i.transport.supportsBinary;n=n||A}n||(To('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(I){if(!n)if(I.type==="pong"&&I.data==="probe"){if(To('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;vr.priorWebsocketSuccess=t.name==="websocket",To('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){n||i.readyState!=="closed"&&(To("changing transport and sending upgrade packet"),C(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())})}else{To('probe transport "%s" failed',e);var O=new Error("probe error");O.transport=t.name,i.emit("upgradeError",O)}}))}function l(){n||(n=!0,C(),t.close(),t=null)}function a(A){var I=new Error("probe error: "+A);I.transport=t.name,l(),To('probe transport "%s" failed because of error: %s',e,A),i.emit("upgradeError",I)}function g(){a("transport closed")}function _(){a("socket closed")}function w(A){t&&A.name!==t.name&&(To('"%s" works - aborting "%s"',A.name,t.name),l())}function C(){t.removeListener("open",s),t.removeListener("error",a),t.removeListener("close",g),i.removeListener("close",_),i.removeListener("upgrading",w)}t.once("open",s),t.once("error",a),t.once("close",g),this.once("close",_),this.once("upgrading",w),t.open()};vr.prototype.onOpen=function(){if(To("socket open"),this.readyState="open",vr.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){To("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}};vr.prototype.onPacket=function(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(To('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else To('packet received with socket readyState "%s"',this.readyState)};vr.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};vr.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){t.readyState!=="closed"&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};vr.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){To("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)};vr.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})};vr.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};vr.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(To("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};vr.prototype.write=vr.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this};vr.prototype.sendPacket=function(e,t,n,i){if(typeof t=="function"&&(i=t,t=void 0),typeof n=="function"&&(i=n,n=null),!(this.readyState==="closing"||this.readyState==="closed")){n=n||{},n.compress=n.compress!==!1;var s={type:e,data:t,options:n};this.emit("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}};vr.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}function t(){e.onClose("forced close"),To("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return this};vr.prototype.onError=function(e){To("socket error %j",e),vr.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)};vr.prototype.onClose=function(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){To('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}};vr.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~yU(this.transports,e[n])&&t.push(e[n]);return t};(function(e){e.exports=_U,e.exports.parser=Ed})(p$);var Lx={},bU={get exports(){return Lx},set exports(e){Lx=e}},Mx={},wU={get exports(){return Mx},set exports(e){Mx=e}};(function(e){e.exports=t;function t(i){if(i)return n(i)}function n(i){for(var s in t.prototype)i[s]=t.prototype[s];return i}t.prototype.on=t.prototype.addEventListener=function(i,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(s),this},t.prototype.once=function(i,s){function l(){this.off(i,l),s.apply(this,arguments)}return l.fn=s,this.on(i,l),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(i,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var l=this._callbacks["$"+i];if(!l)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var a,g=0;g<l.length;g++)if(a=l[g],a===s||a.fn===s){l.splice(g,1);break}return this},t.prototype.emit=function(i){this._callbacks=this._callbacks||{};var s=[].slice.call(arguments,1),l=this._callbacks["$"+i];if(l){l=l.slice(0);for(var a=0,g=l.length;a<g;++a)l[a].apply(this,s)}return this},t.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},t.prototype.hasListeners=function(i){return!!this.listeners(i).length}})(wU);var SU=CU;function CU(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}var yL=EU;function EU(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}var E4=[].slice,vL=function(e,t){if(typeof t=="string"&&(t=e[t]),typeof t!="function")throw new Error("bind() requires a function");var n=E4.call(arguments,2);return function(){return t.apply(e,n.concat(E4.call(arguments)))}};(function(e,t){var n=Pb,i=Mx,s=SU,l=yL,a=vL,g=gd("socket.io-client:socket"),_=Cg,w=oL;e.exports=I;var C={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},A=i.prototype.emit;function I(O,D,B){this.io=O,this.nsp=D,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},B&&B.query&&(this.query=B.query),this.io.autoConnect&&this.open()}i(I.prototype),I.prototype.subEvents=function(){if(!this.subs){var O=this.io;this.subs=[l(O,"open",a(this,"onopen")),l(O,"packet",a(this,"onpacket")),l(O,"close",a(this,"onclose"))]}},I.prototype.open=I.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},I.prototype.send=function(){var O=s(arguments);return O.unshift("message"),this.emit.apply(this,O),this},I.prototype.emit=function(O){if(C.hasOwnProperty(O))return A.apply(this,arguments),this;var D=s(arguments),B={type:(this.flags.binary!==void 0?this.flags.binary:w(D))?n.BINARY_EVENT:n.EVENT,data:D};return B.options={},B.options.compress=!this.flags||this.flags.compress!==!1,typeof D[D.length-1]=="function"&&(g("emitting packet with ack id %d",this.ids),this.acks[this.ids]=D.pop(),B.id=this.ids++),this.connected?this.packet(B):this.sendBuffer.push(B),this.flags={},this},I.prototype.packet=function(O){O.nsp=this.nsp,this.io.packet(O)},I.prototype.onopen=function(){if(g("transport is open - connecting"),this.nsp!=="/")if(this.query){var O=typeof this.query=="object"?_.encode(this.query):this.query;g("sending connect packet with query %s",O),this.packet({type:n.CONNECT,query:O})}else this.packet({type:n.CONNECT})},I.prototype.onclose=function(O){g("close (%s)",O),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",O)},I.prototype.onpacket=function(O){var D=O.nsp===this.nsp,B=O.type===n.ERROR&&O.nsp==="/";if(!(!D&&!B))switch(O.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(O);break;case n.BINARY_EVENT:this.onevent(O);break;case n.ACK:this.onack(O);break;case n.BINARY_ACK:this.onack(O);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",O.data);break}},I.prototype.onevent=function(O){var D=O.data||[];g("emitting event %j",D),O.id!=null&&(g("attaching ack callback to event"),D.push(this.ack(O.id))),this.connected?A.apply(this,D):this.receiveBuffer.push(D)},I.prototype.ack=function(O){var D=this,B=!1;return function(){if(!B){B=!0;var H=s(arguments);g("sending ack %j",H),D.packet({type:w(H)?n.BINARY_ACK:n.ACK,id:O,data:H})}}},I.prototype.onack=function(O){var D=this.acks[O.id];typeof D=="function"?(g("calling ack %s with %j",O.id,O.data),D.apply(this,O.data),delete this.acks[O.id]):g("bad ack %s",O.id)},I.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},I.prototype.emitBuffered=function(){var O;for(O=0;O<this.receiveBuffer.length;O++)A.apply(this,this.receiveBuffer[O]);for(this.receiveBuffer=[],O=0;O<this.sendBuffer.length;O++)this.packet(this.sendBuffer[O]);this.sendBuffer=[]},I.prototype.ondisconnect=function(){g("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},I.prototype.destroy=function(){if(this.subs){for(var O=0;O<this.subs.length;O++)this.subs[O].destroy();this.subs=null}this.io.destroy(this)},I.prototype.close=I.prototype.disconnect=function(){return this.connected&&(g("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},I.prototype.compress=function(O){return this.flags.compress=O,this},I.prototype.binary=function(O){return this.flags.binary=O,this}})(bU);var kU=Ag;function Ag(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ag.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Ag.prototype.reset=function(){this.attempts=0};Ag.prototype.setMin=function(e){this.ms=e};Ag.prototype.setMax=function(e){this.max=e};Ag.prototype.setJitter=function(e){this.jitter=e};var AU=ZC,PU=Lx,TU=Mx,IU=Pb,kp=yL,km=vL,Ua=gd("socket.io-client:manager"),_L=mL,OU=kU,xL=Object.prototype.hasOwnProperty,k4=Lr;function Lr(e,t){if(!(this instanceof Lr))return new Lr(e,t);e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new OU({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||IU;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}Lr.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)xL.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)};Lr.prototype.updateSocketIds=function(){for(var e in this.nsps)xL.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))};Lr.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};TU(Lr.prototype);Lr.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection};Lr.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts};Lr.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay};Lr.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor};Lr.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax};Lr.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout};Lr.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};Lr.prototype.open=Lr.prototype.connect=function(e,t){if(Ua("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Ua("opening %s",this.uri),this.engine=AU(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var s=kp(n,"open",function(){i.onopen(),e&&e()}),l=kp(n,"error",function(_){if(Ua("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",_),e){var w=new Error("Connection error");w.data=_,e(w)}else i.maybeReconnectOnOpen()});if(this._timeout!==!1){var a=this._timeout;Ua("connect attempt will timeout after %d",a);var g=setTimeout(function(){Ua("connect attempt timed out after %d",a),s.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(g)}})}return this.subs.push(s),this.subs.push(l),this};Lr.prototype.onopen=function(){Ua("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(kp(e,"data",km(this,"ondata"))),this.subs.push(kp(e,"ping",km(this,"onping"))),this.subs.push(kp(e,"pong",km(this,"onpong"))),this.subs.push(kp(e,"error",km(this,"onerror"))),this.subs.push(kp(e,"close",km(this,"onclose"))),this.subs.push(kp(this.decoder,"decoded",km(this,"ondecoded")))};Lr.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};Lr.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Lr.prototype.ondata=function(e){this.decoder.add(e)};Lr.prototype.ondecoded=function(e){this.emit("packet",e)};Lr.prototype.onerror=function(e){Ua("error",e),this.emitAll("error",e)};Lr.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new PU(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",s),n.on("connect",function(){n.id=i.generateId(e)}),this.autoConnect&&s()}function s(){~_L(i.connecting,n)||i.connecting.push(n)}return n};Lr.prototype.destroy=function(e){var t=_L(this.connecting,e);~t&&this.connecting.splice(t,1),!this.connecting.length&&this.close()};Lr.prototype.packet=function(e){Ua("writing packet %j",e);var t=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))};Lr.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};Lr.prototype.cleanup=function(){Ua("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};Lr.prototype.close=Lr.prototype.disconnect=function(){Ua("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};Lr.prototype.onclose=function(e){Ua("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()};Lr.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Ua("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Ua("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(Ua("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),!e.skipReconnect&&e.open(function(i){i?(Ua("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",i.data)):(Ua("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}};Lr.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};(function(e,t){var n=ZN,i=Pb,s=k4,l=gd("socket.io-client");e.exports=t=g;var a=t.managers={};function g(_,w){typeof _=="object"&&(w=_,_=void 0),w=w||{};var C=n(_),A=C.source,I=C.id,O=C.path,D=a[I]&&O in a[I].nsps,B=w.forceNew||w["force new connection"]||w.multiplex===!1||D,H;return B?(l("ignoring socket cache for %s",A),H=s(A,w)):(a[I]||(l("new io instance for %s",A),a[I]=s(A,w)),H=a[I]),C.query&&!w.query&&(w.query=C.query),H.socket(C.path,w)}t.protocol=i.protocol,t.connect=g,t.Manager=k4,t.Socket=Lx})(BN,wx);var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0});Lb.RENDERER_MESSAGE_EVENT_NAME=void 0;var LU="cosmos-renderer-message";Lb.RENDERER_MESSAGE_EVENT_NAME=LU;Object.defineProperty(xk,"__esModule",{value:!0});xk.createWebSocketsConnect=FU;var MU=RU(wx),rS=Lb;function RU(e){return e&&e.__esModule?e:{default:e}}function FU(e){var t=(0,MU.default)(e);return{postMessage:function(i){t.emit(rS.RENDERER_MESSAGE_EVENT_NAME,i)},onMessage:function(i){return t.on(rS.RENDERER_MESSAGE_EVENT_NAME,i),function(){return t.off(rS.RENDERER_MESSAGE_EVENT_NAME,i)}}}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"FixtureCapture",{enumerable:!0,get:function(){return t.FixtureCapture}}),Object.defineProperty(e,"FixtureContext",{enumerable:!0,get:function(){return n.FixtureContext}}),Object.defineProperty(e,"FixtureLoader",{enumerable:!0,get:function(){return i.FixtureLoader}}),Object.defineProperty(e,"Viewport",{enumerable:!0,get:function(){return _.Viewport}}),Object.defineProperty(e,"createPostMessageConnect",{enumerable:!0,get:function(){return l.createPostMessageConnect}}),Object.defineProperty(e,"createWebSocketsConnect",{enumerable:!0,get:function(){return w.createWebSocketsConnect}}),Object.defineProperty(e,"getDecoratedFixtureElement",{enumerable:!0,get:function(){return s.getDecoratedFixtureElement}}),Object.defineProperty(e,"useSelect",{enumerable:!0,get:function(){return a.useSelect}}),Object.defineProperty(e,"useValue",{enumerable:!0,get:function(){return g.useValue}});var t=pb,n=ss,i=Cb,s=Eb,l=ck,a=pk,g=gk,_=Ab,w=xk})(mO);(function(e){e.exports=mO})(gz);var Mb={},JC={},DU={get exports(){return JC},set exports(e){JC=e}};(function(e){e.exports=Tu})(DU);function eE(e){return eE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eE(e)}Object.defineProperty(Mb,"__esModule",{value:!0});Mb.ErrorCatch=void 0;var Kh=NU(mt),zU=la,BU=JC;function NU(e){return e&&e.__esModule?e:{default:e}}function $U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A4(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function UU(e,t,n){return t&&A4(e.prototype,t),n&&A4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tE(e,t)}function tE(e,t){return tE=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},tE(e,t)}function VU(e){var t=HU();return function(){var i=Rx(e),s;if(t){var l=Rx(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return qU(this,s)}}function qU(e,t){if(t&&(eE(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bL(e)}function bL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rx(e){return Rx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Rx(e)}function GU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WU=function(e){jU(n,e);var t=VU(n);function n(){var i;$U(this,n);for(var s=arguments.length,l=new Array(s),a=0;a<s;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l)),GU(bL(i),"state",{error:null}),i}return UU(n,[{key:"componentDidCatch",value:function(s,l){this.setState({error:"".concat(s.message,`
`).concat(l.componentStack)})}},{key:"componentDidUpdate",value:function(s){this.state.error&&(KU(this.props.children,s.children)||ZU(this.props.fixtureState,s.fixtureState))&&(this.setState({error:null}),this.props.onErrorReset())}},{key:"render",value:function(){return this.state.error?this.renderError(this.state.error):this.props.children}},{key:"renderError",value:function(s){return __DEV__?null:Kh.default.createElement(Kh.default.Fragment,null,Kh.default.createElement("p",null,Kh.default.createElement("strong",null,"Ouch, something wrong!")),Kh.default.createElement("pre",null,s),Kh.default.createElement("p",null,"Check console for more info."))}}]),n}(Kh.default.Component);Mb.ErrorCatch=WU;function KU(e,t){return!(0,BU.areNodesEqual)(e,t,!0)}function ZU(e,t){return!(0,zU.isEqual)(e,t)}var Pg={},Rb={};Object.defineProperty(Rb,"__esModule",{value:!0});Rb.isInsideCosmosPreviewIframe=XU;function XU(){try{return window.self!==window.parent}catch{return!0}}Object.defineProperty(Pg,"__esModule",{value:!0});Pg.rendererConnect=void 0;var P4=gx,QU=Rb,YU=(0,QU.isInsideCosmosPreviewIframe)()?(0,P4.createPostMessageConnect)():(0,P4.createWebSocketsConnect)(JU());Pg.rendererConnect=YU;function JU(){return location.origin}var Tg={},nE={},ej={get exports(){return nE},set exports(e){nE=e}};(function(e){e.exports=yb})(ej);Object.defineProperty(Tg,"__esModule",{value:!0});Tg.rendererId=void 0;var tj=nE,nj=rj();Tg.rendererId=nj;function rj(){var e=sessionStorage.getItem("cosmosRendererId");return e||(e=(0,tj.uuid)(),sessionStorage.setItem("cosmosRendererId",e)),e}var Tk={};Object.defineProperty(Tk,"__esModule",{value:!0});Tk.renderMessage=sj;var ij=oj(mt);function oj(e){return e&&e.__esModule?e:{default:e}}var aj={position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",fontFamily:'-apple-system, BlinkMacSystemFont, Ubuntu, "Helvetica Neue", Helvetica, sans-serif',fontSize:14};function sj(e){var t=e.msg;return ij.default.createElement("div",{style:aj},t)}var Fb={},rE={},lj={get exports(){return rE},set exports(e){rE=e}},nh={},p_={},uj=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var T4=Object.getOwnPropertySymbols,cj=Object.prototype.hasOwnProperty,fj=Object.prototype.propertyIsEnumerable;function pj(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function hj(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(l){return t[l]});if(i.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(l){s[l]=l}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var dj=hj()?Object.assign:function(e,t){for(var n,i=pj(e),s,l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var a in n)cj.call(n,a)&&(i[a]=n[a]);if(T4){s=T4(n);for(var g=0;g<s.length;g++)fj.call(n,s[g])&&(i[s[g]]=n[s[g]])}}return i},wL="%[a-f0-9]{2}",I4=new RegExp("("+wL+")|([^%]+?)","gi"),O4=new RegExp("("+wL+")+","gi");function iE(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],iE(n),iE(i))}function mj(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(I4)||[],n=1;n<t.length;n++)e=iE(t,n).join(""),t=e.match(I4)||[];return e}}function gj(e){for(var t={"%FE%FF":"","%FF%FE":""},n=O4.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var i=mj(n[0]);i!==n[0]&&(t[n[0]]=i)}n=O4.exec(e)}t["%C2"]="";for(var s=Object.keys(t),l=0;l<s.length;l++){var a=s[l];e=e.replace(new RegExp(a,"g"),t[a])}return e}var yj=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return gj(e)}},vj=uj,SL=dj,L4=yj;function _j(e){switch(e.arrayFormat){case"index":return function(t,n,i){return n===null?[Ws(t,e),"[",i,"]"].join(""):[Ws(t,e),"[",Ws(i,e),"]=",Ws(n,e)].join("")};case"bracket":return function(t,n){return n===null?Ws(t,e):[Ws(t,e),"[]=",Ws(n,e)].join("")};default:return function(t,n){return n===null?Ws(t,e):[Ws(t,e),"=",Ws(n,e)].join("")}}}function xj(e){var t;switch(e.arrayFormat){case"index":return function(n,i,s){if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){s[n]=i;return}s[n]===void 0&&(s[n]={}),s[n][t[1]]=i};case"bracket":return function(n,i,s){if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),t){if(s[n]===void 0){s[n]=[i];return}}else{s[n]=i;return}s[n]=[].concat(s[n],i)};default:return function(n,i,s){if(s[n]===void 0){s[n]=i;return}s[n]=[].concat(s[n],i)}}}function Ws(e,t){return t.encode?t.strict?vj(e):encodeURIComponent(e):e}function CL(e){return Array.isArray(e)?e.sort():typeof e=="object"?CL(Object.keys(e)).sort(function(t,n){return Number(t)-Number(n)}).map(function(t){return e[t]}):e}function EL(e){var t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function kL(e,t){t=SL({arrayFormat:"none"},t);var n=xj(t),i=Object.create(null);return typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e)?i:(e.split("&").forEach(function(s){var l=s.replace(/\+/g," ").split("="),a=l.shift(),g=l.length>0?l.join("="):void 0;g=g===void 0?null:L4(g),n(L4(a),g,i)}),Object.keys(i).sort().reduce(function(s,l){var a=i[l];return a&&typeof a=="object"&&!Array.isArray(a)?s[l]=CL(a):s[l]=a,s},Object.create(null)))}p_.extract=EL;p_.parse=kL;p_.stringify=function(e,t){var n={encode:!0,strict:!0,arrayFormat:"none"};t=SL(n,t),t.sort===!1&&(t.sort=function(){});var i=_j(t);return e?Object.keys(e).sort(t.sort).map(function(s){var l=e[s];if(l===void 0)return"";if(l===null)return Ws(s,t);if(Array.isArray(l)){var a=[];return l.slice().forEach(function(g){g!==void 0&&a.push(i(s,g,a.length))}),a.join("&")}return Ws(s,t)+"="+Ws(l,t)}).filter(function(s){return s.length>0}).join("&"):""};p_.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:kL(EL(e),t)}};Object.defineProperty(nh,"__esModule",{value:!0});nh.parsePlaygroundUrlQuery=Sj;nh.parseRendererUrlQuery=Ej;nh.parseUrlQuery=Ik;nh.stringifyPlaygroundUrlQuery=wj;nh.stringifyRendererUrlQuery=Cj;nh.stringifyUrlQuery=kj;var Db=bj(p_);function bj(e){return e&&e.__esModule?e:{default:e}}function wj(e){var t={};return e.fixtureId&&(t.fixtureId=JSON.stringify(e.fixtureId)),Db.default.stringify(t)}function Sj(e){var t=Ik(e),n={};return t.fixtureId&&(n.fixtureId=JSON.parse(t.fixtureId)),n}function Cj(e){var t={};return e._fixtureId&&(t._fixtureId=JSON.stringify(e._fixtureId)),Db.default.stringify(t)}function Ej(e){var t=Ik(e),n={};return t._fixtureId&&(n._fixtureId=JSON.parse(t._fixtureId)),n}function Ik(e){return Db.default.parse(e)}function kj(e){return Db.default.stringify(e)}(function(e){e.exports=nh})(lj);Object.defineProperty(Fb,"__esModule",{value:!0});Fb.selectedFixtureId=void 0;var Aj=rE,Pj=Rb,Tj=Ij();Fb.selectedFixtureId=Tj;function Ij(){var e=(0,Aj.parseRendererUrlQuery)(location.search);return e._fixtureId?(Oj(e._fixtureId),e._fixtureId):Lj()}function Oj(e){sessionStorage.setItem("cosmosFixtureId",JSON.stringify(e))}function Lj(){if((0,Pj.isInsideCosmosPreviewIframe)())return null;var e=sessionStorage.getItem("cosmosFixtureId");return e?JSON.parse(e):null}Object.defineProperty(B3,"__esModule",{value:!0});B3.DomFixtureLoader=Uj;var Mj=$j(mt),Rj=gx,Fj=Mb,Dj=Pg,zj=Tg,Bj=Tk,Nj=Fb;function $j(e){return e&&e.__esModule?e:{default:e}}function Uj(e){var t=e.fixtures,n=e.decorators,i=e.onErrorReset;return Mj.default.createElement(Rj.FixtureLoader,{rendererId:zj.rendererId,rendererConnect:Dj.rendererConnect,fixtures:t,selectedFixtureId:Nj.selectedFixtureId,systemDecorators:[Fj.ErrorCatch],userDecorators:n,renderMessage:Bj.renderMessage,onErrorReset:i})}var jj=Tg,Vj=Pg;window.addEventListener("error",function(){Vj.rendererConnect.postMessage({type:"rendererError",payload:{rendererId:jj.rendererId}})});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mountDomRenderer=_,Object.defineProperty(e,"rendererConnect",{enumerable:!0,get:function(){return l.rendererConnect}}),Object.defineProperty(e,"rendererId",{enumerable:!0,get:function(){return a.rendererId}});var t=g(mt),n=zS,i=z3,s=B3,l=Pg,a=Tg;function g(w){return w&&w.__esModule?w:{default:w}}function _(w){var C=w.rendererConfig,A=w.fixtures,I=w.decorators,O=w.onErrorReset,D=(0,i.getDomContainer)(C.containerQuerySelector),B=(0,n.createRoot)(D);B.render(t.default.createElement(s.DomFixtureLoader,{fixtures:A,decorators:I,onErrorReset:O}))}})(d6);(function(e){e.exports=d6})(l8);const qj="2.10.0";var qv={},Hj={get exports(){return qv},set exports(e){qv=e}},zb={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gj=mt,Wj=Symbol.for("react.element"),Kj=Symbol.for("react.fragment"),Zj=Object.prototype.hasOwnProperty,Xj=Gj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qj={key:!0,ref:!0,__self:!0,__source:!0};function AL(e,t,n){var i,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)Zj.call(t,i)&&!Qj.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:Wj,type:e,key:l,ref:a,props:s,_owner:Xj.current}}zb.Fragment=Kj;zb.jsx=AL;zb.jsxs=AL;(function(e){e.exports=zb})(Hj);const Bb=qv.Fragment,Ze=qv.jsx,jn=qv.jsxs;function PL(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=PL(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function to(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=PL(e))&&(i&&(i+=" "),i+=t);return i}const TL=e=>Ze("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e,children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.54039 5.54039C5.79423 5.28655 6.20578 5.28655 6.45963 5.54039L12 11.0808L17.5404 5.54039C17.7942 5.28655 18.2058 5.28655 18.4596 5.54039C18.7135 5.79423 18.7135 6.20578 18.4596 6.45963L12.9192 12L18.4596 17.5404C18.7135 17.7942 18.7135 18.2058 18.4596 18.4596C18.2058 18.7135 17.7942 18.7135 17.5404 18.4596L12 12.9192L6.45963 18.4596C6.20578 18.7135 5.79423 18.7135 5.54039 18.4596C5.28655 18.2058 5.28655 17.7942 5.54039 17.5404L11.0808 12L5.54039 6.45963C5.28655 6.20578 5.28655 5.79423 5.54039 5.54039Z",fill:"currentColor"})});TL.displayName="Close24";const Yj=mt.memo(TL),Jj=Yj,IL=e=>jn("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:[Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 2.64645C2.84171 2.45118 3.15829 2.45118 3.35355 2.64645L13.3536 12.6464C13.5488 12.8417 13.5488 13.1583 13.3536 13.3536C13.1583 13.5488 12.8417 13.5488 12.6464 13.3536L2.64645 3.35355C2.45118 3.15829 2.45118 2.84171 2.64645 2.64645Z",fill:"currentColor"}),Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 2.64645C13.1583 2.45118 12.8417 2.45118 12.6464 2.64645L2.64645 12.6464C2.45118 12.8417 2.45118 13.1583 2.64645 13.3536C2.84171 13.5488 3.15829 13.5488 3.35355 13.3536L13.3536 3.35355C13.5488 3.15829 13.5488 2.84171 13.3536 2.64645Z",fill:"currentColor"})]});IL.displayName="Close16";const eV=mt.memo(IL),tV=eV,OL=e=>Ze("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 5.64645C2.84171 5.45118 3.15829 5.45118 3.35355 5.64645L8 10.2929L12.6464 5.64645C12.8417 5.45118 13.1583 5.45118 13.3536 5.64645C13.5488 5.84171 13.5488 6.15829 13.3536 6.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L2.64645 6.35355C2.45118 6.15829 2.45118 5.84171 2.64645 5.64645Z",fill:"currentColor"})});OL.displayName="ChevronDown16";const nV=mt.memo(OL),rV=nV,LL=e=>jn("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:[Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 2.66669C5.0545 2.66669 2.66669 5.0545 2.66669 8.00002C2.66669 10.9455 5.0545 13.3334 8.00002 13.3334C10.9455 13.3334 13.3334 10.9455 13.3334 8.00002C13.3334 5.0545 10.9455 2.66669 8.00002 2.66669ZM1.66669 8.00002C1.66669 4.50222 4.50222 1.66669 8.00002 1.66669C11.4978 1.66669 14.3334 4.50222 14.3334 8.00002C14.3334 11.4978 11.4978 14.3334 8.00002 14.3334C4.50222 14.3334 1.66669 11.4978 1.66669 8.00002Z",fill:"currentColor"}),Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 6.87481C8.27614 6.87481 8.5 7.09867 8.5 7.37481V11C8.5 11.2761 8.27614 11.5 8 11.5C7.72386 11.5 7.5 11.2761 7.5 11V7.37481C7.5 7.09867 7.72386 6.87481 8 6.87481Z",fill:"currentColor"}),Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 4.5C8.27614 4.5 8.5 4.72386 8.5 5V5.01C8.5 5.28614 8.27614 5.51 8 5.51C7.72386 5.51 7.5 5.28614 7.5 5.01V5C7.5 4.72386 7.72386 4.5 8 4.5Z",fill:"currentColor"})]});LL.displayName="InfoOutline16";const iV=mt.memo(LL),oV=iV;var On={},aV={get exports(){return On},set exports(e){On=e}},sV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lV=sV,uV=lV;function ML(){}function RL(){}RL.resetWarningCache=ML;var cV=function(){function e(i,s,l,a,g,_){if(_!==uV){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:RL,resetWarningCache:ML};return n.PropTypes=n,n};aV.exports=cV();let fV=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function h_(e){return e.split("-")[1]}function Ok(e){return e==="y"?"height":"width"}function sd(e){return e.split("-")[0]}function d_(e){return["top","bottom"].includes(sd(e))?"x":"y"}function M4(e,t,n){let{reference:i,floating:s}=e;const l=i.x+i.width/2-s.width/2,a=i.y+i.height/2-s.height/2,g=d_(t),_=Ok(g),w=i[_]/2-s[_]/2,C=g==="x";let A;switch(sd(t)){case"top":A={x:l,y:i.y-s.height};break;case"bottom":A={x:l,y:i.y+i.height};break;case"right":A={x:i.x+i.width,y:a};break;case"left":A={x:i.x-s.width,y:a};break;default:A={x:i.x,y:i.y}}switch(h_(t)){case"start":A[g]-=w*(n&&C?-1:1);break;case"end":A[g]+=w*(n&&C?-1:1)}return A}const pV=async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:l=[],platform:a}=n,g=l.filter(Boolean),_=await(a.isRTL==null?void 0:a.isRTL(t));let w=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:C,y:A}=M4(w,i,_),I=i,O={},D=0;for(let B=0;B<g.length;B++){const{name:H,fn:R}=g[B],{x:U,y:q,data:Y,reset:se}=await R({x:C,y:A,initialPlacement:i,placement:I,strategy:s,middlewareData:O,rects:w,platform:a,elements:{reference:e,floating:t}});C=U??C,A=q??A,O={...O,[H]:{...O[H],...Y}},se&&D<=50&&(D++,typeof se=="object"&&(se.placement&&(I=se.placement),se.rects&&(w=se.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):se.rects),{x:C,y:A}=M4(w,I,_)),B=-1)}return{x:C,y:A,placement:I,strategy:s,middlewareData:O}};function FL(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function oE(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function DL(e,t){var n;t===void 0&&(t={});const{x:i,y:s,platform:l,rects:a,elements:g,strategy:_}=e,{boundary:w="clippingAncestors",rootBoundary:C="viewport",elementContext:A="floating",altBoundary:I=!1,padding:O=0}=t,D=FL(O),B=g[I?A==="floating"?"reference":"floating":A],H=oE(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(B)))==null||n?B:B.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(g.floating)),boundary:w,rootBoundary:C,strategy:_})),R=A==="floating"?{...a.floating,x:i,y:s}:a.reference,U=await(l.getOffsetParent==null?void 0:l.getOffsetParent(g.floating)),q=await(l.isElement==null?void 0:l.isElement(U))&&await(l.getScale==null?void 0:l.getScale(U))||{x:1,y:1},Y=oE(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:R,offsetParent:U,strategy:_}):R);return{top:(H.top-Y.top+D.top)/q.y,bottom:(Y.bottom-H.bottom+D.bottom)/q.y,left:(H.left-Y.left+D.left)/q.x,right:(Y.right-H.right+D.right)/q.x}}const hV=Math.min,dV=Math.max;function aE(e,t,n){return dV(e,hV(t,n))}const R4=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:i=0}=e||{},{x:s,y:l,placement:a,rects:g,platform:_}=t;if(n==null)return{};const w=FL(i),C={x:s,y:l},A=d_(a),I=Ok(A),O=await _.getDimensions(n),D=A==="y"?"top":"left",B=A==="y"?"bottom":"right",H=g.reference[I]+g.reference[A]-C[A]-g.floating[I],R=C[A]-g.reference[A],U=await(_.getOffsetParent==null?void 0:_.getOffsetParent(n));let q=U?A==="y"?U.clientHeight||0:U.clientWidth||0:0;q===0&&(q=g.floating[I]);const Y=H/2-R/2,se=w[D],W=q-O[I]-w[B],ce=q/2-O[I]/2+Y,xe=aE(se,ce,W),Me=h_(a)!=null&&ce!=xe&&g.reference[I]/2-(ce<se?w[D]:w[B])-O[I]/2<0;return{[A]:C[A]-(Me?ce<se?se-ce:W-ce:0),data:{[A]:xe,centerOffset:ce-xe}}}}),mV=["top","right","bottom","left"];mV.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const gV={left:"right",right:"left",bottom:"top",top:"bottom"};function Fx(e){return e.replace(/left|right|bottom|top/g,t=>gV[t])}function yV(e,t,n){n===void 0&&(n=!1);const i=h_(e),s=d_(e),l=Ok(s);let a=s==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(a=Fx(a)),{main:a,cross:Fx(a)}}const vV={start:"end",end:"start"};function iS(e){return e.replace(/start|end/g,t=>vV[t])}const _V=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:i,middlewareData:s,rects:l,initialPlacement:a,platform:g,elements:_}=t,{mainAxis:w=!0,crossAxis:C=!0,fallbackPlacements:A,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:D=!0,...B}=e,H=sd(i),R=sd(a)===a,U=await(g.isRTL==null?void 0:g.isRTL(_.floating)),q=A||(R||!D?[Fx(a)]:function(Le){const Ge=Fx(Le);return[iS(Le),Ge,iS(Ge)]}(a));A||O==="none"||q.push(...function(Le,Ge,Ye,ht){const Lt=h_(Le);let Dt=function(qt,Ne,ve){const _e=["left","right"],K=["right","left"],ae=["top","bottom"],lt=["bottom","top"];switch(qt){case"top":case"bottom":return ve?Ne?K:_e:Ne?_e:K;case"left":case"right":return Ne?ae:lt;default:return[]}}(sd(Le),Ye==="start",ht);return Lt&&(Dt=Dt.map(qt=>qt+"-"+Lt),Ge&&(Dt=Dt.concat(Dt.map(iS)))),Dt}(a,D,O,U));const Y=[a,...q],se=await DL(t,B),W=[];let ce=((n=s.flip)==null?void 0:n.overflows)||[];if(w&&W.push(se[H]),C){const{main:Le,cross:Ge}=yV(i,l,U);W.push(se[Le],se[Ge])}if(ce=[...ce,{placement:i,overflows:W}],!W.every(Le=>Le<=0)){var xe,Me;const Le=(((xe=s.flip)==null?void 0:xe.index)||0)+1,Ge=Y[Le];if(Ge)return{data:{index:Le,overflows:ce},reset:{placement:Ge}};let Ye=(Me=ce.filter(ht=>ht.overflows[0]<=0).sort((ht,Lt)=>ht.overflows[1]-Lt.overflows[1])[0])==null?void 0:Me.placement;if(!Ye)switch(I){case"bestFit":{var $e;const ht=($e=ce.map(Lt=>[Lt.placement,Lt.overflows.filter(Dt=>Dt>0).reduce((Dt,qt)=>Dt+qt,0)]).sort((Lt,Dt)=>Lt[1]-Dt[1])[0])==null?void 0:$e[0];ht&&(Ye=ht);break}case"initialPlacement":Ye=a}if(i!==Ye)return{reset:{placement:Ye}}}return{}}}},xV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:i}=t,s=await async function(l,a){const{placement:g,platform:_,elements:w}=l,C=await(_.isRTL==null?void 0:_.isRTL(w.floating)),A=sd(g),I=h_(g),O=d_(g)==="x",D=["left","top"].includes(A)?-1:1,B=C&&O?-1:1,H=typeof a=="function"?a(l):a;let{mainAxis:R,crossAxis:U,alignmentAxis:q}=typeof H=="number"?{mainAxis:H,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...H};return I&&typeof q=="number"&&(U=I==="end"?-1*q:q),O?{x:U*B,y:R*D}:{x:R*D,y:U*B}}(t,e);return{x:n+s.x,y:i+s.y,data:s}}}};function bV(e){return e==="x"?"y":"x"}const wV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:s}=t,{mainAxis:l=!0,crossAxis:a=!1,limiter:g={fn:H=>{let{x:R,y:U}=H;return{x:R,y:U}}},..._}=e,w={x:n,y:i},C=await DL(t,_),A=d_(sd(s)),I=bV(A);let O=w[A],D=w[I];if(l){const H=A==="y"?"bottom":"right";O=aE(O+C[A==="y"?"top":"left"],O,O-C[H])}if(a){const H=I==="y"?"bottom":"right";D=aE(D+C[I==="y"?"top":"left"],D,D-C[H])}const B=g.fn({...t,[A]:O,[I]:D});return{...B,data:{x:B.x-n,y:B.y-i}}}}};function Xs(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ac(e){return Xs(e).getComputedStyle(e)}const F4=Math.min,ov=Math.max,Dx=Math.round;function zL(e){const t=ac(e);let n=parseFloat(t.width),i=parseFloat(t.height);const s=e.offsetWidth,l=e.offsetHeight,a=Dx(n)!==s||Dx(i)!==l;return a&&(n=s,i=l),{width:n,height:i,fallback:a}}function Xp(e){return NL(e)?(e.nodeName||"").toLowerCase():""}let l1;function BL(){if(l1)return l1;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(l1=e.brands.map(t=>t.brand+"/"+t.version).join(" "),l1):navigator.userAgent}function sc(e){return e instanceof Xs(e).HTMLElement}function Cu(e){return e instanceof Xs(e).Element}function NL(e){return e instanceof Xs(e).Node}function D4(e){return typeof ShadowRoot>"u"?!1:e instanceof Xs(e).ShadowRoot||e instanceof ShadowRoot}function Nb(e){const{overflow:t,overflowX:n,overflowY:i,display:s}=ac(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(s)}function SV(e){return["table","td","th"].includes(Xp(e))}function sE(e){const t=/firefox/i.test(BL()),n=ac(e),i=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!i&&i!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(s=>n.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const l=n.contain;return l!=null&&l.includes(s)})}function lE(){return/^((?!chrome|android).)*safari/i.test(BL())}function Lk(e){return["html","body","#document"].includes(Xp(e))}function $L(e){return Cu(e)?e:e.contextElement}const UL={x:1,y:1};function ag(e){const t=$L(e);if(!sc(t))return UL;const n=t.getBoundingClientRect(),{width:i,height:s,fallback:l}=zL(t);let a=(l?Dx(n.width):n.width)/i,g=(l?Dx(n.height):n.height)/s;return a&&Number.isFinite(a)||(a=1),g&&Number.isFinite(g)||(g=1),{x:a,y:g}}function vd(e,t,n,i){var s,l;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),g=$L(e);let _=UL;t&&(i?Cu(i)&&(_=ag(i)):_=ag(e));const w=g?Xs(g):window,C=lE()&&n;let A=(a.left+(C&&((s=w.visualViewport)==null?void 0:s.offsetLeft)||0))/_.x,I=(a.top+(C&&((l=w.visualViewport)==null?void 0:l.offsetTop)||0))/_.y,O=a.width/_.x,D=a.height/_.y;if(g){const B=Xs(g),H=i&&Cu(i)?Xs(i):i;let R=B.frameElement;for(;R&&i&&H!==B;){const U=ag(R),q=R.getBoundingClientRect(),Y=getComputedStyle(R);q.x+=(R.clientLeft+parseFloat(Y.paddingLeft))*U.x,q.y+=(R.clientTop+parseFloat(Y.paddingTop))*U.y,A*=U.x,I*=U.y,O*=U.x,D*=U.y,A+=q.x,I+=q.y,R=Xs(R).frameElement}}return{width:O,height:D,top:I,right:A+O,bottom:I+D,left:A,x:A,y:I}}function Hp(e){return((NL(e)?e.ownerDocument:e.document)||window.document).documentElement}function $b(e){return Cu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function jL(e){return vd(Hp(e)).left+$b(e).scrollLeft}function Hv(e){if(Xp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||D4(e)&&e.host||Hp(e);return D4(t)?t.host:t}function VL(e){const t=Hv(e);return Lk(t)?t.ownerDocument.body:sc(t)&&Nb(t)?t:VL(t)}function av(e,t){var n;t===void 0&&(t=[]);const i=VL(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),l=Xs(i);return s?t.concat(l,l.visualViewport||[],Nb(i)?i:[]):t.concat(i,av(i))}function z4(e,t,n){let i;if(t==="viewport")i=function(a,g){const _=Xs(a),w=Hp(a),C=_.visualViewport;let A=w.clientWidth,I=w.clientHeight,O=0,D=0;if(C){A=C.width,I=C.height;const B=lE();(!B||B&&g==="fixed")&&(O=C.offsetLeft,D=C.offsetTop)}return{width:A,height:I,x:O,y:D}}(e,n);else if(t==="document")i=function(a){const g=Hp(a),_=$b(a),w=a.ownerDocument.body,C=ov(g.scrollWidth,g.clientWidth,w.scrollWidth,w.clientWidth),A=ov(g.scrollHeight,g.clientHeight,w.scrollHeight,w.clientHeight);let I=-_.scrollLeft+jL(a);const O=-_.scrollTop;return ac(w).direction==="rtl"&&(I+=ov(g.clientWidth,w.clientWidth)-C),{width:C,height:A,x:I,y:O}}(Hp(e));else if(Cu(t))i=function(a,g){const _=vd(a,!0,g==="fixed"),w=_.top+a.clientTop,C=_.left+a.clientLeft,A=sc(a)?ag(a):{x:1,y:1};return{width:a.clientWidth*A.x,height:a.clientHeight*A.y,x:C*A.x,y:w*A.y}}(t,n);else{const a={...t};if(lE()){var s,l;const g=Xs(e);a.x-=((s=g.visualViewport)==null?void 0:s.offsetLeft)||0,a.y-=((l=g.visualViewport)==null?void 0:l.offsetTop)||0}i=a}return oE(i)}function B4(e,t){return sc(e)&&ac(e).position!=="fixed"?t?t(e):e.offsetParent:null}function N4(e,t){const n=Xs(e);let i=B4(e,t);for(;i&&SV(i)&&ac(i).position==="static";)i=B4(i,t);return i&&(Xp(i)==="html"||Xp(i)==="body"&&ac(i).position==="static"&&!sE(i))?n:i||function(s){let l=Hv(s);for(;sc(l)&&!Lk(l);){if(sE(l))return l;l=Hv(l)}return null}(e)||n}function CV(e,t,n){const i=sc(t),s=Hp(t),l=vd(e,!0,n==="fixed",t);let a={scrollLeft:0,scrollTop:0};const g={x:0,y:0};if(i||!i&&n!=="fixed")if((Xp(t)!=="body"||Nb(s))&&(a=$b(t)),sc(t)){const _=vd(t,!0);g.x=_.x+t.clientLeft,g.y=_.y+t.clientTop}else s&&(g.x=jL(s));return{x:l.left+a.scrollLeft-g.x,y:l.top+a.scrollTop-g.y,width:l.width,height:l.height}}const EV={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:s}=e;const l=n==="clippingAncestors"?function(w,C){const A=C.get(w);if(A)return A;let I=av(w).filter(H=>Cu(H)&&Xp(H)!=="body"),O=null;const D=ac(w).position==="fixed";let B=D?Hv(w):w;for(;Cu(B)&&!Lk(B);){const H=ac(B),R=sE(B);H.position==="fixed"?O=null:(D?R||O:R||H.position!=="static"||!O||!["absolute","fixed"].includes(O.position))?O=H:I=I.filter(U=>U!==B),B=Hv(B)}return C.set(w,I),I}(t,this._c):[].concat(n),a=[...l,i],g=a[0],_=a.reduce((w,C)=>{const A=z4(t,C,s);return w.top=ov(A.top,w.top),w.right=F4(A.right,w.right),w.bottom=F4(A.bottom,w.bottom),w.left=ov(A.left,w.left),w},z4(t,g,s));return{width:_.right-_.left,height:_.bottom-_.top,x:_.left,y:_.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:i}=e;const s=sc(n),l=Hp(n);if(n===l)return t;let a={scrollLeft:0,scrollTop:0},g={x:1,y:1};const _={x:0,y:0};if((s||!s&&i!=="fixed")&&((Xp(n)!=="body"||Nb(l))&&(a=$b(n)),sc(n))){const w=vd(n);g=ag(n),_.x=w.x+n.clientLeft,_.y=w.y+n.clientTop}return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-a.scrollLeft*g.x+_.x,y:t.y*g.y-a.scrollTop*g.y+_.y}},isElement:Cu,getDimensions:function(e){return sc(e)?zL(e):e.getBoundingClientRect()},getOffsetParent:N4,getDocumentElement:Hp,getScale:ag,async getElementRects(e){let{reference:t,floating:n,strategy:i}=e;const s=this.getOffsetParent||N4,l=this.getDimensions;return{reference:CV(t,await s(n),i),floating:{x:0,y:0,...await l(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>ac(e).direction==="rtl"};function kV(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:a=!0,animationFrame:g=!1}=i,_=s&&!g,w=_||l?[...Cu(e)?av(e):e.contextElement?av(e.contextElement):[],...av(t)]:[];w.forEach(O=>{_&&O.addEventListener("scroll",n,{passive:!0}),l&&O.addEventListener("resize",n)});let C,A=null;if(a){let O=!0;A=new ResizeObserver(()=>{O||n(),O=!1}),Cu(e)&&!g&&A.observe(e),Cu(e)||!e.contextElement||g||A.observe(e.contextElement),A.observe(t)}let I=g?vd(e):null;return g&&function O(){const D=vd(e);!I||D.x===I.x&&D.y===I.y&&D.width===I.width&&D.height===I.height||n(),I=D,C=requestAnimationFrame(O)}(),n(),()=>{var O;w.forEach(D=>{_&&D.removeEventListener("scroll",n),l&&D.removeEventListener("resize",n)}),(O=A)==null||O.disconnect(),A=null,g&&cancelAnimationFrame(C)}}const AV=(e,t,n)=>{const i=new Map,s={platform:EV,...n},l={...s.platform,_c:i};return pV(e,t,{...s,platform:l})},PV=e=>{const{element:t,padding:n}=e;function i(s){return Object.prototype.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){return i(t)?t.current!=null?R4({element:t.current,padding:n}).fn(s):{}:t?R4({element:t,padding:n}).fn(s):{}}}};var $1=typeof document<"u"?mt.useLayoutEffect:mt.useEffect;function zx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!zx(e[i],t[i]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){const l=s[i];if(!(l==="_owner"&&e.$$typeof)&&!zx(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function $4(e){const t=mt.useRef(e);return $1(()=>{t.current=e}),t}function TV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:s,whileElementsMounted:l,open:a}=e,[g,_]=mt.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[w,C]=mt.useState(i);zx(w,i)||C(i);const A=mt.useRef(null),I=mt.useRef(null),O=mt.useRef(g),D=$4(l),B=$4(s),[H,R]=mt.useState(null),[U,q]=mt.useState(null),Y=mt.useCallback($e=>{A.current!==$e&&(A.current=$e,R($e))},[]),se=mt.useCallback($e=>{I.current!==$e&&(I.current=$e,q($e))},[]),W=mt.useCallback(()=>{if(!A.current||!I.current)return;const $e={placement:t,strategy:n,middleware:w};B.current&&($e.platform=B.current),AV(A.current,I.current,$e).then(Le=>{const Ge={...Le,isPositioned:!0};ce.current&&!zx(O.current,Ge)&&(O.current=Ge,hv.flushSync(()=>{_(Ge)}))})},[w,t,n,B]);$1(()=>{a===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,_($e=>({...$e,isPositioned:!1})))},[a]);const ce=mt.useRef(!1);$1(()=>(ce.current=!0,()=>{ce.current=!1}),[]),$1(()=>{if(H&&U){if(D.current)return D.current(H,U,W);W()}},[H,U,W,D]);const xe=mt.useMemo(()=>({reference:A,floating:I,setReference:Y,setFloating:se}),[Y,se]),Me=mt.useMemo(()=>({reference:H,floating:U}),[H,U]);return mt.useMemo(()=>({...g,update:W,refs:xe,elements:Me,reference:Y,floating:se}),[g,W,xe,Me,Y,se])}const IV="_tooltipContainer_g6vht_4",OV="_hoverTooltip_g6vht_15",LV="_popup_g6vht_18",MV="_contentBody_g6vht_23",RV="_bodyBottom_g6vht_36",FV="_unset_g6vht_41",DV="_arrow_g6vht_45",zV="_arrowInner_g6vht_74",BV="_tooltipContent_g6vht_81",NV="_closeIcon_g6vht_88",nf={tooltipContainer:IV,hoverTooltip:OV,popup:LV,contentBody:MV,bodyBottom:RV,unset:FV,arrow:DV,"arrow-top":"_arrow-top_g6vht_58","arrow-bottom":"_arrow-bottom_g6vht_62","arrow-left":"_arrow-left_g6vht_66","arrow-right":"_arrow-right_g6vht_70",arrowInner:zV,tooltipContent:BV,closeIcon:NV};function U4(e){switch(e){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end"}}function $V(e,t,n){if(e&&t&&console.error("You should not use both placement and deprecadedPlacement props at the same time. Placement prop will be used."),t)return t;if(n){if(typeof e=="function")return U4(e(n));if(e)return U4(e)}}const j4="top";function UV({children:e,position:t,triggerRef:n,transitionRef:i,placement:s,getPlacement:l,classes:a,hoverBehavior:g=!1,onOuterClick:_,onClose:w,open:C=!0,offset:A=7}){const I=mt.useCallback(Me=>{if(!(_&&g===!0)){if(_){_(Me);return}w==null||w(Me)}},[g,_,w]),O=mt.useRef(null),D=mt.useMemo(()=>$V(l,s,t)||j4,[l,s,t]),{refs:B,x:H,y:R,strategy:U,middlewareData:{arrow:{x:q,y:Y}={}},placement:se}=TV({placement:D,open:C,whileElementsMounted:kV,middleware:[xV(A),_V(),wV({padding:5}),PV({element:O})]}),W=mt.useMemo(()=>({"--tooltip-arrox-x-position":q!=null?`${q}px`:"","--tooltip-arrow-y-position":Y!=null?`${Y}px`:"","--tooltip-x-position":`${H??0}px`,"--tooltip-y-position":`${R??0}px`,"--tooltip-placement":U}),[q,Y,H,R,U]),ce=mt.useMemo(()=>`arrow-${se.split("-")[0]||j4}`,[se]);if(mt.useLayoutEffect(()=>{if(n)B.setReference(n.current);else if(t){const{x:Me,y:$e}=t;B.setReference({getBoundingClientRect(){return{width:0,height:0,x:Me,y:$e,top:$e,left:Me,right:Me,bottom:$e}}})}},[t,B,n]),t&&n&&console.error("Both position and triggerRef are provided. Tooltip will be rendered with triggerRef"),!t&&!n)return console.error("Tooltip will not be rendered because neither position nor triggerRef are provided"),null;if(!C)return null;const xe=g?void 0:w;return Ze("div",{ref:i,className:to(nf.tooltipContainer,{[nf.hoverTooltip]:g}),onClick:I,style:W,children:jn("div",{ref:B.setFloating,className:nf.tooltipContent,children:[jn("div",{className:to(nf.contentBody,to),children:[jn("div",{children:[e,Ze("div",{className:nf.bodyBottom})]}),xe&&Ze("div",{className:nf.closeIcon,onClick:xe,children:Ze(tV,{})})]}),Ze("div",{ref:O,className:to(nf.arrow,nf[ce]),children:Ze("div",{className:nf.arrowInner})})]})})}const jV="_legendTitle_sgaz8_1",VV="_grid_sgaz8_6",qV="_cell_sgaz8_11",HV="_colorCell_sgaz8_17",GV="_yStepsCell_sgaz8_26",WV="_xStepsCell_sgaz8_45",KV="_xStepsCellNoLabel_sgaz8_46",ZV="_arrowX_sgaz8_70",XV="_arrowY_sgaz8_71",QV="_axisLabelX_sgaz8_88",YV="_axisLabelY_sgaz8_89",JV="_arrowHeadX_sgaz8_107",eq="_arrowHeadY_sgaz8_108",tq="_arrowHeadY_angle0_sgaz8_123",oa={legendTitle:jV,grid:VV,cell:qV,colorCell:HV,yStepsCell:GV,xStepsCell:WV,xStepsCellNoLabel:KV,arrowX:ZV,arrowY:XV,axisLabelX:QV,axisLabelY:YV,arrowHeadX:JV,arrowHeadY:eq,arrowHeadY_angle0:tq};function nq(){const e={};return{increment:t=>(typeof e[t]=="number"?e[t]+=1:e[t]=0,e[t])}}function rq(e,t){const n=[],i=nq();return e.forEach((s,l)=>{s.split(" ").forEach((a,g)=>{const _=i.increment(a),w=t[a]&&t[a][_];w&&n.push({...w,_position:{x:g,y:l}})})}),n}function V4(e){return[...e].reverse()}const iq=(e,t)=>({gridColumn:`${e+1} / ${e+2}`,gridRow:`${t+1} / ${t+2}`}),q4=({className:e,type:t})=>Ze("div",{className:e,children:t==="horizontal"?Ze("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ze("path",{d:"M6,6L0,0l0,2.4L3.6,6L0,9.6L0,12L6,6z",fill:"currentColor"})}):Ze("svg",{width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ze("path",{d:"M6,0L0,6l2.4,0L6,2.4L9.6,6L12,6L6,0z",fill:"currentColor"})})}),oq=({cells:e,size:t,axis:n,title:i,showAxisLabels:s=!1,showSteps:l=!0,showArrowHeads:a=!0,onCellPointerOver:g,onCellPointerLeave:_,renderXAxisLabel:w,renderYAxisLabel:C})=>{const A=mt.useMemo(()=>[`y ${new Array(t+1).fill(".").join(" ")}`,...new Array(t).fill(`y ${new Array(t).fill("c").join(" ")} .`),`. ${new Array(t+1).fill("x").join(" ")}`],[t]),I=rq(A,{x:l?n.x.steps.map(B=>({label:B.label||B.value.toFixed(1),className:oa.xStepsCell})):n.x.steps.map(B=>({label:"",className:oa.xStepsCellNoLabel})),y:l?V4(n.y.steps).map(B=>({label:B.label||B.value.toFixed(1),className:oa.yStepsCell})):V4(n.y.steps).map(B=>({label:"",className:oa.yStepsCellNoLabel})),c:e.map((B,H)=>({label:Ze("span",{children:B.label}),className:to(oa.cell,oa.colorCell),style:{backgroundColor:B.color},...g&&{onPointerOver:R=>g(R,B,H)},..._&&{onPointerLeave:R=>_(R,B,H)}}))}),O=()=>w?w(n.x,oa.axisLabelX):Ze("div",{className:oa.axisLabelX,children:n.x.label}),D=()=>C?C(n.y,oa.axisLabelY):Ze("div",{className:oa.axisLabelY,children:n.y.label});return jn("div",{children:[i&&Ze("div",{className:oa.legendTitle,children:i}),jn("div",{className:oa.grid,style:{gridTemplateColumns:`repeat(${t+2}, auto)`,gridTemplateRows:`repeat(${t+2}, auto)`},children:[s&&n.x.label?O():null,s&&n.y.label?D():null,Ze("div",{className:oa.arrowX,children:a&&Ze(q4,{type:"horizontal",className:oa.arrowHeadX})}),Ze("div",{className:oa.arrowY,children:a&&Ze(q4,{type:"vertical",className:to({[oa.arrowHeadY]:!0,[oa.arrowHeadY_angle0]:!s})})}),I.map(B=>Ze("div",{style:Object.assign(iq(B._position.x,B._position.y),B.style),className:to(B.className,oa.cell),onPointerOver:B.onPointerOver,onPointerLeave:B.onPointerLeave,children:B.label},`${B._position.x}|${B._position.y}`))]})]})};var uE={},aq={get exports(){return uE},set exports(e){uE=e}},Hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk=Symbol.for("react.element"),Rk=Symbol.for("react.portal"),Ub=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),Vb=Symbol.for("react.profiler"),qb=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),sq=Symbol.for("react.server_context"),Gb=Symbol.for("react.forward_ref"),Wb=Symbol.for("react.suspense"),Kb=Symbol.for("react.suspense_list"),Zb=Symbol.for("react.memo"),Xb=Symbol.for("react.lazy"),lq=Symbol.for("react.offscreen"),qL;qL=Symbol.for("react.module.reference");function $l(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Mk:switch(e=e.type,e){case Ub:case Vb:case jb:case Wb:case Kb:return e;default:switch(e=e&&e.$$typeof,e){case sq:case Hb:case Gb:case Xb:case Zb:case qb:return e;default:return t}}case Rk:return t}}}Hr.ContextConsumer=Hb;Hr.ContextProvider=qb;Hr.Element=Mk;Hr.ForwardRef=Gb;Hr.Fragment=Ub;Hr.Lazy=Xb;Hr.Memo=Zb;Hr.Portal=Rk;Hr.Profiler=Vb;Hr.StrictMode=jb;Hr.Suspense=Wb;Hr.SuspenseList=Kb;Hr.isAsyncMode=function(){return!1};Hr.isConcurrentMode=function(){return!1};Hr.isContextConsumer=function(e){return $l(e)===Hb};Hr.isContextProvider=function(e){return $l(e)===qb};Hr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mk};Hr.isForwardRef=function(e){return $l(e)===Gb};Hr.isFragment=function(e){return $l(e)===Ub};Hr.isLazy=function(e){return $l(e)===Xb};Hr.isMemo=function(e){return $l(e)===Zb};Hr.isPortal=function(e){return $l(e)===Rk};Hr.isProfiler=function(e){return $l(e)===Vb};Hr.isStrictMode=function(e){return $l(e)===jb};Hr.isSuspense=function(e){return $l(e)===Wb};Hr.isSuspenseList=function(e){return $l(e)===Kb};Hr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ub||e===Vb||e===jb||e===Wb||e===Kb||e===lq||typeof e=="object"&&e!==null&&(e.$$typeof===Xb||e.$$typeof===Zb||e.$$typeof===qb||e.$$typeof===Hb||e.$$typeof===Gb||e.$$typeof===qL||e.getModuleId!==void 0)};Hr.typeOf=$l;(function(e){e.exports=Hr})(aq);const uq=UE(uE);function Bx(e,t){return Bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},Bx(e,t)}function Bl(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Bx(e,t)}function Ca(){return Ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ca.apply(this,arguments)}function u1(e){return e.charAt(0)==="/"}function oS(e,t){for(var n=t,i=n+1,s=e.length;i<s;n+=1,i+=1)e[n]=e[i];e.pop()}function cq(e,t){t===void 0&&(t="");var n=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&u1(e),l=t&&u1(t),a=s||l;if(e&&u1(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var g;if(i.length){var _=i[i.length-1];g=_==="."||_===".."||_===""}else g=!1;for(var w=0,C=i.length;C>=0;C--){var A=i[C];A==="."?oS(i,C):A===".."?(oS(i,C),w++):w&&(oS(i,C),w--)}if(!a)for(;w--;w)i.unshift("..");a&&i[0]!==""&&(!i[0]||!u1(i[0]))&&i.unshift("");var I=i.join("/");return g&&I.substr(-1)!=="/"&&(I+="/"),I}var fq=!0,aS="Invariant failed";function kd(e,t){if(!e){if(fq)throw new Error(aS);var n=typeof t=="function"?t():t,i=n?aS+": "+n:aS;throw new Error(i)}}function sv(e){return e.charAt(0)==="/"?e:"/"+e}function H4(e){return e.charAt(0)==="/"?e.substr(1):e}function pq(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function HL(e,t){return pq(e,t)?e.substr(t.length):e}function GL(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function hq(e){var t=e||"/",n="",i="",s=t.indexOf("#");s!==-1&&(i=t.substr(s),t=t.substr(0,s));var l=t.indexOf("?");return l!==-1&&(n=t.substr(l),t=t.substr(0,l)),{pathname:t,search:n==="?"?"":n,hash:i==="#"?"":i}}function Ss(e){var t=e.pathname,n=e.search,i=e.hash,s=t||"/";return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Qs(e,t,n,i){var s;typeof e=="string"?(s=hq(e),s.state=t):(s=Ca({},e),s.pathname===void 0&&(s.pathname=""),s.search?s.search.charAt(0)!=="?"&&(s.search="?"+s.search):s.search="",s.hash?s.hash.charAt(0)!=="#"&&(s.hash="#"+s.hash):s.hash="",t!==void 0&&s.state===void 0&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(l){throw l instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):l}return n&&(s.key=n),i?s.pathname?s.pathname.charAt(0)!=="/"&&(s.pathname=cq(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s}function Fk(){var e=null;function t(a){return e=a,function(){e===a&&(e=null)}}function n(a,g,_,w){if(e!=null){var C=typeof e=="function"?e(a,g):e;typeof C=="string"?typeof _=="function"?_(C,w):w(!0):w(C!==!1)}else w(!0)}var i=[];function s(a){var g=!0;function _(){g&&a.apply(void 0,arguments)}return i.push(_),function(){g=!1,i=i.filter(function(w){return w!==_})}}function l(){for(var a=arguments.length,g=new Array(a),_=0;_<a;_++)g[_]=arguments[_];i.forEach(function(w){return w.apply(void 0,g)})}return{setPrompt:t,confirmTransitionTo:n,appendListener:s,notifyListeners:l}}var WL=!!(typeof window<"u"&&window.document&&window.document.createElement);function KL(e,t){t(window.confirm(e))}function dq(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function mq(){return window.navigator.userAgent.indexOf("Trident")===-1}function gq(){return window.navigator.userAgent.indexOf("Firefox")===-1}function yq(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var G4="popstate",W4="hashchange";function K4(){try{return window.history.state||{}}catch{return{}}}function ZL(e){e===void 0&&(e={}),WL||kd(!1);var t=window.history,n=dq(),i=!mq(),s=e,l=s.forceRefresh,a=l===void 0?!1:l,g=s.getUserConfirmation,_=g===void 0?KL:g,w=s.keyLength,C=w===void 0?6:w,A=e.basename?GL(sv(e.basename)):"";function I(ve){var _e=ve||{},K=_e.key,ae=_e.state,lt=window.location,Ot=lt.pathname,Ht=lt.search,Ut=lt.hash,Kt=Ot+Ht+Ut;return A&&(Kt=HL(Kt,A)),Qs(Kt,ae,K)}function O(){return Math.random().toString(36).substr(2,C)}var D=Fk();function B(ve){Ca(Ne,ve),Ne.length=t.length,D.notifyListeners(Ne.location,Ne.action)}function H(ve){yq(ve)||q(I(ve.state))}function R(){q(I(K4()))}var U=!1;function q(ve){if(U)U=!1,B();else{var _e="POP";D.confirmTransitionTo(ve,_e,_,function(K){K?B({action:_e,location:ve}):Y(ve)})}}function Y(ve){var _e=Ne.location,K=W.indexOf(_e.key);K===-1&&(K=0);var ae=W.indexOf(ve.key);ae===-1&&(ae=0);var lt=K-ae;lt&&(U=!0,$e(lt))}var se=I(K4()),W=[se.key];function ce(ve){return A+Ss(ve)}function xe(ve,_e){var K="PUSH",ae=Qs(ve,_e,O(),Ne.location);D.confirmTransitionTo(ae,K,_,function(lt){if(lt){var Ot=ce(ae),Ht=ae.key,Ut=ae.state;if(n)if(t.pushState({key:Ht,state:Ut},null,Ot),a)window.location.href=Ot;else{var Kt=W.indexOf(Ne.location.key),cn=W.slice(0,Kt+1);cn.push(ae.key),W=cn,B({action:K,location:ae})}else window.location.href=Ot}})}function Me(ve,_e){var K="REPLACE",ae=Qs(ve,_e,O(),Ne.location);D.confirmTransitionTo(ae,K,_,function(lt){if(lt){var Ot=ce(ae),Ht=ae.key,Ut=ae.state;if(n)if(t.replaceState({key:Ht,state:Ut},null,Ot),a)window.location.replace(Ot);else{var Kt=W.indexOf(Ne.location.key);Kt!==-1&&(W[Kt]=ae.key),B({action:K,location:ae})}else window.location.replace(Ot)}})}function $e(ve){t.go(ve)}function Le(){$e(-1)}function Ge(){$e(1)}var Ye=0;function ht(ve){Ye+=ve,Ye===1&&ve===1?(window.addEventListener(G4,H),i&&window.addEventListener(W4,R)):Ye===0&&(window.removeEventListener(G4,H),i&&window.removeEventListener(W4,R))}var Lt=!1;function Dt(ve){ve===void 0&&(ve=!1);var _e=D.setPrompt(ve);return Lt||(ht(1),Lt=!0),function(){return Lt&&(Lt=!1,ht(-1)),_e()}}function qt(ve){var _e=D.appendListener(ve);return ht(1),function(){ht(-1),_e()}}var Ne={length:t.length,action:"POP",location:se,createHref:ce,push:xe,replace:Me,go:$e,goBack:Le,goForward:Ge,block:Dt,listen:qt};return Ne}var Z4="hashchange",vq={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+H4(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:H4,decodePath:sv},slash:{encodePath:sv,decodePath:sv}};function XL(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function Oy(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function _q(e){window.location.hash=e}function sS(e){window.location.replace(XL(window.location.href)+"#"+e)}function xq(e){e===void 0&&(e={}),WL||kd(!1);var t=window.history;gq();var n=e,i=n.getUserConfirmation,s=i===void 0?KL:i,l=n.hashType,a=l===void 0?"slash":l,g=e.basename?GL(sv(e.basename)):"",_=vq[a],w=_.encodePath,C=_.decodePath;function A(){var _e=C(Oy());return g&&(_e=HL(_e,g)),Qs(_e)}var I=Fk();function O(_e){Ca(ve,_e),ve.length=t.length,I.notifyListeners(ve.location,ve.action)}var D=!1,B=null;function H(_e,K){return _e.pathname===K.pathname&&_e.search===K.search&&_e.hash===K.hash}function R(){var _e=Oy(),K=w(_e);if(_e!==K)sS(K);else{var ae=A(),lt=ve.location;if(!D&&H(lt,ae)||B===Ss(ae))return;B=null,U(ae)}}function U(_e){if(D)D=!1,O();else{var K="POP";I.confirmTransitionTo(_e,K,s,function(ae){ae?O({action:K,location:_e}):q(_e)})}}function q(_e){var K=ve.location,ae=ce.lastIndexOf(Ss(K));ae===-1&&(ae=0);var lt=ce.lastIndexOf(Ss(_e));lt===-1&&(lt=0);var Ot=ae-lt;Ot&&(D=!0,Le(Ot))}var Y=Oy(),se=w(Y);Y!==se&&sS(se);var W=A(),ce=[Ss(W)];function xe(_e){var K=document.querySelector("base"),ae="";return K&&K.getAttribute("href")&&(ae=XL(window.location.href)),ae+"#"+w(g+Ss(_e))}function Me(_e,K){var ae="PUSH",lt=Qs(_e,void 0,void 0,ve.location);I.confirmTransitionTo(lt,ae,s,function(Ot){if(Ot){var Ht=Ss(lt),Ut=w(g+Ht),Kt=Oy()!==Ut;if(Kt){B=Ht,_q(Ut);var cn=ce.lastIndexOf(Ss(ve.location)),sn=ce.slice(0,cn+1);sn.push(Ht),ce=sn,O({action:ae,location:lt})}else O()}})}function $e(_e,K){var ae="REPLACE",lt=Qs(_e,void 0,void 0,ve.location);I.confirmTransitionTo(lt,ae,s,function(Ot){if(Ot){var Ht=Ss(lt),Ut=w(g+Ht),Kt=Oy()!==Ut;Kt&&(B=Ht,sS(Ut));var cn=ce.indexOf(Ss(ve.location));cn!==-1&&(ce[cn]=Ht),O({action:ae,location:lt})}})}function Le(_e){t.go(_e)}function Ge(){Le(-1)}function Ye(){Le(1)}var ht=0;function Lt(_e){ht+=_e,ht===1&&_e===1?window.addEventListener(Z4,R):ht===0&&window.removeEventListener(Z4,R)}var Dt=!1;function qt(_e){_e===void 0&&(_e=!1);var K=I.setPrompt(_e);return Dt||(Lt(1),Dt=!0),function(){return Dt&&(Dt=!1,Lt(-1)),K()}}function Ne(_e){var K=I.appendListener(_e);return Lt(1),function(){Lt(-1),K()}}var ve={length:t.length,action:"POP",location:W,createHref:xe,push:Me,replace:$e,go:Le,goBack:Ge,goForward:Ye,block:qt,listen:Ne};return ve}function X4(e,t,n){return Math.min(Math.max(e,t),n)}function bq(e){e===void 0&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,s=i===void 0?["/"]:i,l=t.initialIndex,a=l===void 0?0:l,g=t.keyLength,_=g===void 0?6:g,w=Fk();function C(xe){Ca(ce,xe),ce.length=ce.entries.length,w.notifyListeners(ce.location,ce.action)}function A(){return Math.random().toString(36).substr(2,_)}var I=X4(a,0,s.length-1),O=s.map(function(xe){return typeof xe=="string"?Qs(xe,void 0,A()):Qs(xe,void 0,xe.key||A())}),D=Ss;function B(xe,Me){var $e="PUSH",Le=Qs(xe,Me,A(),ce.location);w.confirmTransitionTo(Le,$e,n,function(Ge){if(Ge){var Ye=ce.index,ht=Ye+1,Lt=ce.entries.slice(0);Lt.length>ht?Lt.splice(ht,Lt.length-ht,Le):Lt.push(Le),C({action:$e,location:Le,index:ht,entries:Lt})}})}function H(xe,Me){var $e="REPLACE",Le=Qs(xe,Me,A(),ce.location);w.confirmTransitionTo(Le,$e,n,function(Ge){Ge&&(ce.entries[ce.index]=Le,C({action:$e,location:Le}))})}function R(xe){var Me=X4(ce.index+xe,0,ce.entries.length-1),$e="POP",Le=ce.entries[Me];w.confirmTransitionTo(Le,$e,n,function(Ge){Ge?C({action:$e,location:Le,index:Me}):C()})}function U(){R(-1)}function q(){R(1)}function Y(xe){var Me=ce.index+xe;return Me>=0&&Me<ce.entries.length}function se(xe){return xe===void 0&&(xe=!1),w.setPrompt(xe)}function W(xe){return w.appendListener(xe)}var ce={length:O.length,action:"POP",location:O[I],index:I,entries:O,createHref:D,push:B,replace:H,go:R,goBack:U,goForward:q,canGo:Y,block:se,listen:W};return ce}var _d={},wq={get exports(){return _d},set exports(e){_d=e}},Sq=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},Nx=Sq;wq.exports=JL;_d.parse=Dk;_d.compile=Eq;_d.tokensToFunction=QL;_d.tokensToRegExp=YL;var Cq=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Dk(e,t){for(var n=[],i=0,s=0,l="",a=t&&t.delimiter||"/",g;(g=Cq.exec(e))!=null;){var _=g[0],w=g[1],C=g.index;if(l+=e.slice(s,C),s=C+_.length,w){l+=w[1];continue}var A=e[s],I=g[2],O=g[3],D=g[4],B=g[5],H=g[6],R=g[7];l&&(n.push(l),l="");var U=I!=null&&A!=null&&A!==I,q=H==="+"||H==="*",Y=H==="?"||H==="*",se=g[2]||a,W=D||B;n.push({name:O||i++,prefix:I||"",delimiter:se,optional:Y,repeat:q,partial:U,asterisk:!!R,pattern:W?Pq(W):R?".*":"[^"+U1(se)+"]+?"})}return s<e.length&&(l+=e.substr(s)),l&&n.push(l),n}function Eq(e,t){return QL(Dk(e,t),t)}function kq(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function Aq(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function QL(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)typeof e[i]=="object"&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",Bk(t)));return function(s,l){for(var a="",g=s||{},_=l||{},w=_.pretty?kq:encodeURIComponent,C=0;C<e.length;C++){var A=e[C];if(typeof A=="string"){a+=A;continue}var I=g[A.name],O;if(I==null)if(A.optional){A.partial&&(a+=A.prefix);continue}else throw new TypeError('Expected "'+A.name+'" to be defined');if(Nx(I)){if(!A.repeat)throw new TypeError('Expected "'+A.name+'" to not repeat, but received `'+JSON.stringify(I)+"`");if(I.length===0){if(A.optional)continue;throw new TypeError('Expected "'+A.name+'" to not be empty')}for(var D=0;D<I.length;D++){if(O=w(I[D]),!n[C].test(O))throw new TypeError('Expected all "'+A.name+'" to match "'+A.pattern+'", but received `'+JSON.stringify(O)+"`");a+=(D===0?A.prefix:A.delimiter)+O}continue}if(O=A.asterisk?Aq(I):w(I),!n[C].test(O))throw new TypeError('Expected "'+A.name+'" to match "'+A.pattern+'", but received "'+O+'"');a+=A.prefix+O}return a}}function U1(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Pq(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function zk(e,t){return e.keys=t,e}function Bk(e){return e&&e.sensitive?"":"i"}function Tq(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return zk(e,t)}function Iq(e,t,n){for(var i=[],s=0;s<e.length;s++)i.push(JL(e[s],t,n).source);var l=new RegExp("(?:"+i.join("|")+")",Bk(n));return zk(l,t)}function Oq(e,t,n){return YL(Dk(e,n),t,n)}function YL(e,t,n){Nx(t)||(n=t||n,t=[]),n=n||{};for(var i=n.strict,s=n.end!==!1,l="",a=0;a<e.length;a++){var g=e[a];if(typeof g=="string")l+=U1(g);else{var _=U1(g.prefix),w="(?:"+g.pattern+")";t.push(g),g.repeat&&(w+="(?:"+_+w+")*"),g.optional?g.partial?w=_+"("+w+")?":w="(?:"+_+"("+w+"))?":w=_+"("+w+")",l+=w}}var C=U1(n.delimiter||"/"),A=l.slice(-C.length)===C;return i||(l=(A?l.slice(0,-C.length):l)+"(?:"+C+"(?=$))?"),s?l+="$":l+=i&&A?"":"(?="+C+"|$)",zk(new RegExp("^"+l,Bk(n)),t)}function JL(e,t,n){return Nx(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Tq(e,t):Nx(e)?Iq(e,t,n):Oq(e,t,n)}var Q4={},Lq={get exports(){return Q4},set exports(e){Q4=e}},Gr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=typeof Symbol=="function"&&Symbol.for,Nk=ca?Symbol.for("react.element"):60103,$k=ca?Symbol.for("react.portal"):60106,Qb=ca?Symbol.for("react.fragment"):60107,Yb=ca?Symbol.for("react.strict_mode"):60108,Jb=ca?Symbol.for("react.profiler"):60114,ew=ca?Symbol.for("react.provider"):60109,tw=ca?Symbol.for("react.context"):60110,Uk=ca?Symbol.for("react.async_mode"):60111,nw=ca?Symbol.for("react.concurrent_mode"):60111,rw=ca?Symbol.for("react.forward_ref"):60112,iw=ca?Symbol.for("react.suspense"):60113,Mq=ca?Symbol.for("react.suspense_list"):60120,ow=ca?Symbol.for("react.memo"):60115,aw=ca?Symbol.for("react.lazy"):60116,Rq=ca?Symbol.for("react.block"):60121,Fq=ca?Symbol.for("react.fundamental"):60117,Dq=ca?Symbol.for("react.responder"):60118,zq=ca?Symbol.for("react.scope"):60119;function rl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Nk:switch(e=e.type,e){case Uk:case nw:case Qb:case Jb:case Yb:case iw:return e;default:switch(e=e&&e.$$typeof,e){case tw:case rw:case aw:case ow:case ew:return e;default:return t}}case $k:return t}}}function eM(e){return rl(e)===nw}Gr.AsyncMode=Uk;Gr.ConcurrentMode=nw;Gr.ContextConsumer=tw;Gr.ContextProvider=ew;Gr.Element=Nk;Gr.ForwardRef=rw;Gr.Fragment=Qb;Gr.Lazy=aw;Gr.Memo=ow;Gr.Portal=$k;Gr.Profiler=Jb;Gr.StrictMode=Yb;Gr.Suspense=iw;Gr.isAsyncMode=function(e){return eM(e)||rl(e)===Uk};Gr.isConcurrentMode=eM;Gr.isContextConsumer=function(e){return rl(e)===tw};Gr.isContextProvider=function(e){return rl(e)===ew};Gr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nk};Gr.isForwardRef=function(e){return rl(e)===rw};Gr.isFragment=function(e){return rl(e)===Qb};Gr.isLazy=function(e){return rl(e)===aw};Gr.isMemo=function(e){return rl(e)===ow};Gr.isPortal=function(e){return rl(e)===$k};Gr.isProfiler=function(e){return rl(e)===Jb};Gr.isStrictMode=function(e){return rl(e)===Yb};Gr.isSuspense=function(e){return rl(e)===iw};Gr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Qb||e===nw||e===Jb||e===Yb||e===iw||e===Mq||typeof e=="object"&&e!==null&&(e.$$typeof===aw||e.$$typeof===ow||e.$$typeof===ew||e.$$typeof===tw||e.$$typeof===rw||e.$$typeof===Fq||e.$$typeof===Dq||e.$$typeof===zq||e.$$typeof===Rq)};Gr.typeOf=rl;(function(e){e.exports=Gr})(Lq);function Ad(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,l;for(l=0;l<i.length;l++)s=i[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var cE={},Bq={get exports(){return cE},set exports(e){cE=e}},Wr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=typeof Symbol=="function"&&Symbol.for,jk=fa?Symbol.for("react.element"):60103,Vk=fa?Symbol.for("react.portal"):60106,sw=fa?Symbol.for("react.fragment"):60107,lw=fa?Symbol.for("react.strict_mode"):60108,uw=fa?Symbol.for("react.profiler"):60114,cw=fa?Symbol.for("react.provider"):60109,fw=fa?Symbol.for("react.context"):60110,qk=fa?Symbol.for("react.async_mode"):60111,pw=fa?Symbol.for("react.concurrent_mode"):60111,hw=fa?Symbol.for("react.forward_ref"):60112,dw=fa?Symbol.for("react.suspense"):60113,Nq=fa?Symbol.for("react.suspense_list"):60120,mw=fa?Symbol.for("react.memo"):60115,gw=fa?Symbol.for("react.lazy"):60116,$q=fa?Symbol.for("react.block"):60121,Uq=fa?Symbol.for("react.fundamental"):60117,jq=fa?Symbol.for("react.responder"):60118,Vq=fa?Symbol.for("react.scope"):60119;function il(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jk:switch(e=e.type,e){case qk:case pw:case sw:case uw:case lw:case dw:return e;default:switch(e=e&&e.$$typeof,e){case fw:case hw:case gw:case mw:case cw:return e;default:return t}}case Vk:return t}}}function tM(e){return il(e)===pw}Wr.AsyncMode=qk;Wr.ConcurrentMode=pw;Wr.ContextConsumer=fw;Wr.ContextProvider=cw;Wr.Element=jk;Wr.ForwardRef=hw;Wr.Fragment=sw;Wr.Lazy=gw;Wr.Memo=mw;Wr.Portal=Vk;Wr.Profiler=uw;Wr.StrictMode=lw;Wr.Suspense=dw;Wr.isAsyncMode=function(e){return tM(e)||il(e)===qk};Wr.isConcurrentMode=tM;Wr.isContextConsumer=function(e){return il(e)===fw};Wr.isContextProvider=function(e){return il(e)===cw};Wr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jk};Wr.isForwardRef=function(e){return il(e)===hw};Wr.isFragment=function(e){return il(e)===sw};Wr.isLazy=function(e){return il(e)===gw};Wr.isMemo=function(e){return il(e)===mw};Wr.isPortal=function(e){return il(e)===Vk};Wr.isProfiler=function(e){return il(e)===uw};Wr.isStrictMode=function(e){return il(e)===lw};Wr.isSuspense=function(e){return il(e)===dw};Wr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sw||e===pw||e===uw||e===lw||e===dw||e===Nq||typeof e=="object"&&e!==null&&(e.$$typeof===gw||e.$$typeof===mw||e.$$typeof===cw||e.$$typeof===fw||e.$$typeof===hw||e.$$typeof===Uq||e.$$typeof===jq||e.$$typeof===Vq||e.$$typeof===$q)};Wr.typeOf=il;(function(e){e.exports=Wr})(Bq);var nM=cE,qq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rM={};rM[nM.ForwardRef]=qq;rM[nM.Memo]=Hq;var lS=1073741823,Y4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function Gq(){var e="__global_unique_id__";return Y4[e]=(Y4[e]||0)+1}function Wq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Kq(e){var t=[];return{on:function(i){t.push(i)},off:function(i){t=t.filter(function(s){return s!==i})},get:function(){return e},set:function(i,s){e=i,t.forEach(function(l){return l(e,s)})}}}function Zq(e){return Array.isArray(e)?e[0]:e}function Xq(e,t){var n,i,s="__create-react-context-"+Gq()+"__",l=function(g){Bl(_,g);function _(){for(var C,A=arguments.length,I=new Array(A),O=0;O<A;O++)I[O]=arguments[O];return C=g.call.apply(g,[this].concat(I))||this,C.emitter=Kq(C.props.value),C}var w=_.prototype;return w.getChildContext=function(){var A;return A={},A[s]=this.emitter,A},w.componentWillReceiveProps=function(A){if(this.props.value!==A.value){var I=this.props.value,O=A.value,D;Wq(I,O)?D=0:(D=typeof t=="function"?t(I,O):lS,D|=0,D!==0&&this.emitter.set(A.value,D))}},w.render=function(){return this.props.children},_}(hn.Component);l.childContextTypes=(n={},n[s]=On.object.isRequired,n);var a=function(g){Bl(_,g);function _(){for(var C,A=arguments.length,I=new Array(A),O=0;O<A;O++)I[O]=arguments[O];return C=g.call.apply(g,[this].concat(I))||this,C.observedBits=void 0,C.state={value:C.getValue()},C.onUpdate=function(D,B){var H=C.observedBits|0;H&B&&C.setState({value:C.getValue()})},C}var w=_.prototype;return w.componentWillReceiveProps=function(A){var I=A.observedBits;this.observedBits=I??lS},w.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var A=this.props.observedBits;this.observedBits=A??lS},w.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},w.getValue=function(){return this.context[s]?this.context[s].get():e},w.render=function(){return Zq(this.props.children)(this.state.value)},_}(hn.Component);return a.contextTypes=(i={},i[s]=On.object,i),{Provider:l,Consumer:a}}var Qq=hn.createContext||Xq,iM=function(t){var n=Qq();return n.displayName=t,n},Yq=iM("Router-History"),yg=iM("Router"),yw=function(e){Bl(t,e),t.computeRootMatch=function(s){return{path:"/",url:"/",params:{},isExact:s==="/"}};function t(i){var s;return s=e.call(this,i)||this,s.state={location:i.history.location},s._isMounted=!1,s._pendingLocation=null,i.staticContext||(s.unlisten=i.history.listen(function(l){s._pendingLocation=l})),s}var n=t.prototype;return n.componentDidMount=function(){var s=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(l){s._isMounted&&s.setState({location:l})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return hn.createElement(yg.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},hn.createElement(Yq.Provider,{children:this.props.children||null,value:this.props.history}))},t}(hn.Component);hn.Component;hn.Component;var J4={},Jq=1e4,eP=0;function eH(e,t){var n=""+t.end+t.strict+t.sensitive,i=J4[n]||(J4[n]={});if(i[e])return i[e];var s=[],l=_d(e,s,t),a={regexp:l,keys:s};return eP<Jq&&(i[e]=a,eP++),a}function Hk(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,s=n.exact,l=s===void 0?!1:s,a=n.strict,g=a===void 0?!1:a,_=n.sensitive,w=_===void 0?!1:_,C=[].concat(i);return C.reduce(function(A,I){if(!I&&I!=="")return null;if(A)return A;var O=eH(I,{end:l,strict:g,sensitive:w}),D=O.regexp,B=O.keys,H=D.exec(e);if(!H)return null;var R=H[0],U=H.slice(1),q=e===R;return l&&!q?null:{path:I,url:I==="/"&&R===""?"/":R,isExact:q,params:B.reduce(function(Y,se,W){return Y[se.name]=U[W],Y},{})}},null)}function tH(e){return hn.Children.count(e)===0}hn.Component;function Gk(e){return e.charAt(0)==="/"?e:"/"+e}function nH(e,t){return e?Ca({},t,{pathname:Gk(e)+t.pathname}):t}function rH(e,t){if(!e)return t;var n=Gk(e);return t.pathname.indexOf(n)!==0?t:Ca({},t,{pathname:t.pathname.substr(n.length)})}function tP(e){return typeof e=="string"?e:Ss(e)}function uS(e){return function(){kd(!1)}}function nP(){}hn.Component;hn.Component;hn.useContext;var oM=function(e){Bl(t,e);function t(){for(var i,s=arguments.length,l=new Array(s),a=0;a<s;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,i.history=ZL(i.props),i}var n=t.prototype;return n.render=function(){return hn.createElement(yw,{history:this.history,children:this.props.children})},t}(hn.Component);hn.Component;var fE=function(t,n){return typeof t=="function"?t(n):t},pE=function(t,n){return typeof t=="string"?Qs(t,null,null,n):t},Wk=function(t){return t},vg=hn.forwardRef;typeof vg>"u"&&(vg=Wk);function iH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var oH=vg(function(e,t){var n=e.innerRef,i=e.navigate,s=e.onClick,l=Ad(e,["innerRef","navigate","onClick"]),a=l.target,g=Ca({},l,{onClick:function(w){try{s&&s(w)}catch(C){throw w.preventDefault(),C}!w.defaultPrevented&&w.button===0&&(!a||a==="_self")&&!iH(w)&&(w.preventDefault(),i())}});return Wk!==vg?g.ref=t||n:g.ref=n,hn.createElement("a",g)}),aH=vg(function(e,t){var n=e.component,i=n===void 0?oH:n,s=e.replace,l=e.to,a=e.innerRef,g=Ad(e,["component","replace","to","innerRef"]);return hn.createElement(yg.Consumer,null,function(_){_||kd(!1);var w=_.history,C=pE(fE(l,_.location),_.location),A=C?w.createHref(C):"",I=Ca({},g,{href:A,navigate:function(){var D=fE(l,_.location),B=Ss(_.location)===Ss(pE(D)),H=s||B?w.replace:w.push;H(D)}});return Wk!==vg?I.ref=t||a:I.innerRef=a,hn.createElement(i,I)})}),aM=function(t){return t},$x=hn.forwardRef;typeof $x>"u"&&($x=aM);function sH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(i){return i}).join(" ")}$x(function(e,t){var n=e["aria-current"],i=n===void 0?"page":n,s=e.activeClassName,l=s===void 0?"active":s,a=e.activeStyle,g=e.className,_=e.exact,w=e.isActive,C=e.location,A=e.sensitive,I=e.strict,O=e.style,D=e.to,B=e.innerRef,H=Ad(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return hn.createElement(yg.Consumer,null,function(R){R||kd(!1);var U=C||R.location,q=pE(fE(D,U),U),Y=q.pathname,se=Y&&Y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),W=se?Hk(U.pathname,{path:se,exact:_,sensitive:A,strict:I}):null,ce=!!(w?w(W,U):W),xe=typeof g=="function"?g(ce):g,Me=typeof O=="function"?O(ce):O;ce&&(xe=sH(xe,l),Me=Ca({},Me,a));var $e=Ca({"aria-current":ce&&i||null,className:xe,style:Me,to:q},H);return aM!==$x?$e.ref=t||B:$e.innerRef=B,hn.createElement(aH,$e)})});var Kk=function(){};function sM(e){try{return e.apply(this,[].slice.call(arguments,1))}catch(t){return t=t instanceof Error?t:new Error(t),setTimeout(function(){throw t}),t}}function Gv(e){return typeof e=="string"}function Ux(e){return typeof e=="object"&&e!==null}function Wv(e){return typeof e=="function"}function lM(e){return Wv(e)&&"types"in e}function uM(e){return Wv(e)&&"type"in e}function lH(e){return Ux(e)&&Gv(e.type)&&"payload"in e}function uH(e,t,n){var i=e.get(t);i===void 0&&e.set(t,i=new Set),i.add(n)}function cH(e,t,n){var i=e.get(t);i!==void 0&&(i.delete(n),i.size===0&&e.delete(t))}function cS(e,t){e.includes(t)||e.push(t)}function ff(e,t){return Object.assign(new Error("Reatom: "+e),{data:t})}function Zk(e){return{atom:e,cause:"init",ctx:{},state:void 0,tracks:void 0}}function fH(e,t){var n=t===void 0?{}:t,i=n.patch,s=i===void 0?new Map:i,l=n.getCache,a=l===void 0?function(O,D){return D??Zk(O)}:l,g=n.effects,_=g===void 0?[]:g,w=n.causes,C=w===void 0?[]:w;C=C.concat({actions:e,patch:s});var A=e.map(function(O){return O.type}).join(", "),I={actions:e,getCache:a,process:function(O,D){var B=s.get(O);if(B==null){D=a(O,D);var H=(B=O(I,D)).cause,R=B.state,U=B.listeners;s.set(O,B),Object.is(R,D.state)?B.cause=D.cause:(U==null?void 0:U.size)>0&&I.schedule(function(q,Y){return U.forEach(function(se){return sM(se,R,Y)})},H)}return B},schedule:function(O,D){D===void 0&&(D=A);var B=C.concat([D]);_.push(function(H){return O(function(R){return H(R,B)},B)})}};return I}function rP(e,t){return t===void 0&&(t=Xk),t.getState(e)}var pH=0;function m_(e,t,n){n===void 0&&(n={});var i=Gv(n)?{id:n}:n,s=i.decorators,l=s===void 0?[]:s,a=i.id,g=a===void 0?"atom"+ ++pH:a,_=i.store,w=_===void 0?Xk:_,C=[],A=[],I={},O={};if(!Wv(t)||!Gv(g))throw ff("Atom arguments");Object.entries(e).forEach(function(H){var R=H[0],U=H[1];if(!Wv(U))throw ff("Invalid atom dependencies (type "+typeof U+") at "+R,U);if(lM(U))U.types.forEach(function(se){return cS(A,se)});else{var q;if(uM(U))O[R]=q=U.type;else{var Y=function(){return{payload:U.apply(void 0,[].slice.call(arguments)),type:q,targets:[B]}};Y.type=q=R+"_"+g,Y.dispatch=function(){return w.dispatch(Y.apply(void 0,[].slice.call(arguments)))},I[R]=Y,R[0]!="_"&&(B[R]=Y)}cS(C,q),cS(A,q)}});var D=l.reduce(function(H,R){return R(H)},function(H,R,U,q,Y){var se=function(W){return q[W].apply(q,[].slice.call(arguments,1))};return function(W,ce){var xe,Me=W.actions,$e=W.process,Le=W.schedule,Ge=ce.atom,Ye=ce.ctx,ht=ce.state,Lt=ce.listeners,Dt=[],qt=Kk,Ne=function(K,ae){qt();var lt=$e(K,ae);return xe==null&&Dt.every(function(Ot){return Ot.atom.id!=K.id})&&Dt.push(lt),lt},ve={create:se,get:function(K){return Ne(R[K]).state},getUnlistedState:function(K){return qt(),$e(K).state},onAction:function(K,ae){var lt,Ot;if(qt(),xe!=null)throw ff("Can not react to action inside another reaction");var Ht=(lt=Y[K])!=null?lt:(Ot=q[K])==null?void 0:Ot.type;if(Ht==null)throw ff("Unknown action",{name:K});Me.forEach(function(Ut){Ht==Ut.type&&(xe=K,K!=Ht&&(xe+=" ("+Ht+")"),xe+=" handler",ae(Ut.payload),xe=void 0)})},onChange:function(K,ae){var lt;if(qt(),xe!=null)throw ff("Can not react to atom changes inside another reaction");var Ot=R[K],Ht=(lt=ce.tracks)==null?void 0:lt.find(function(Kt){return Kt.atom.id==Ot.id}),Ut=Ne(Ot,Ht);Ht!=null&&Object.is(Ht.state,Ut.state)||(xe=K,K!=Ge.id&&(xe+=" ("+Ge.id+")"),xe+=" handler",ae(Ut.state,Ht==null?void 0:Ht.state),xe=void 0)},onInit:function(K){ce.tracks==null&&K()},schedule:function(K){qt(),Le(function(ae,lt){return K(ae,Ye,lt)},xe)}},_e="init";return(ce.tracks==null||Me.some(function(K){var ae=K.type;return U.includes(ae)&&(_e=ae+" action",!0)})||ce.tracks.some(function(K){return!Object.is(K.state,Ne(K.atom,K).state)&&(_e=K.atom.id+" atom",!0)}))&&(Dt.length=0,ht=H(ve,ht)),qt=function(){throw ff("Outdated track call")},{atom:Ge,cause:_e,ctx:Ye,state:ht,tracks:Dt,listeners:Lt}}}(t,e,C,I,O));function B(H,R){return R===void 0&&(R=Zk(B)),D(H,R)}return B.id=g,B.getState=function(){return w.getState(B)},B.subscribe=function(H){return w.subscribe(B,H)},B.types=A,B}var hH=Symbol();function cM(e){var t=e===void 0?{}:e,n=t.callSafety,i=n===void 0?sM:n,s=t.createTemplateCache,l=s===void 0?Zk:s,a=t.onError,g=t.onPatch,_=t.now,w=_===void 0?Date.now.bind(Date):_,C=new Map,A=new WeakMap,I=[],O=[];function D(R){if(!lM(R))throw ff("passed thing is not an atom");(function(U,q){var Y,se=q(U);if(se.tracks===void 0)return!1;if(((Y=se.listeners)==null?void 0:Y.size)>0)return!0;for(var W=[se.tracks];W.length>0;)for(var ce=W.pop(),xe=0;xe<ce.length;xe++){var Me=ce[xe];if(Me!=q(Me.atom))return!1;W.push(Me.tracks)}return!0})(R,H.getCache)||H.dispatch({type:"invalidate "+R.id+" [~"+Math.random()+"]",payload:null,targets:[R]})}a&&I.push(a),g&&O.push(g);var B=function(R,U){var q,Y;return(q=(Y=A.get(R))!=null?Y:U)!=null?q:l(R)},H={dispatch:function R(U,q){var Y=w(),se=Array.isArray(U)?U:[U];if(se.length==0||!se.every(lH))throw ff("dispatch arguments");var W=new Map,ce=[],xe=fH(se,{patch:W,getCache:B,effects:ce,causes:q}),Me=function(){return{actions:se,patch:W,causes:q??[],start:Y,end:w()}};try{se.forEach(function(Ge){var Ye,ht=Ge.type,Lt=Ge.targets;Lt==null||Lt.forEach(function(Dt){return xe.process(Dt)}),(Ye=C.get(ht))==null||Ye.forEach(function(Dt){return xe.process(Dt)})}),W.forEach(function(Ge,Ye){return A.set(Ye,Ge)})}catch(Ge){var $e=Me();throw I.forEach(function(Ye){return Ye(Ge,$e)}),Ge}var Le=Me();O.forEach(function(Ge){return Ge(Le)}),ce.forEach(function(Ge){return i(Ge,R)})},getCache:B,getState:function(R){return D(R),B(R).state},onError:function(R){return I.push(R),function(){return I=I.filter(function(U){return U!==R})}},onPatch:function(R){return O.push(R),function(){return O=O.filter(function(U){return U!==R})}},subscribe:function(R,U){var q;if(!Wv(U))throw ff("subscribe callback is not a function");D(R);var Y=B(R),se=(q=Y.listeners)!=null?q:Y.listeners=new Set;se.size==0&&R.types.forEach(function(xe){return uH(C,xe,R)});var W=hH,ce=function(xe,Me){var $e=A.get(R);Object.is(W,$e.state)||U(W=xe,Me)};return se.add(ce),i(U,Y.state,[]),function(){se.delete(ce),se.size==0&&R.types.forEach(function(xe){return cH(C,xe,R)})}}};return H}var Xk=cM(),fM=hn.createContext(Xk),dH=function(e){return e()};function pM(e,t){return function(){var n=t.apply(void 0,[].slice.call(arguments));n&&dH(function(){e.dispatch(n)})}}function hE(e,t){t===void 0&&(t=[]);var n=hn.useContext(fM);return hn.useCallback(pM(n,e),t.concat(n))}function iP(e,t,n){var i=e;typeof t=="function"?(n!=null||(n=[]),e=hn.useMemo(function(){return m_({origin:i},function(C){return t((0,C.get)("origin"))})},n.concat(i))):n=t??[];var s=hn.useContext(fM);n=n.concat([e,s]);var l=hn.useState(function(){return rP(e,s)}),a=l[0],g=l[1],_=hn.useRef(a);_.current=a=rP(e,s);var w=hn.useMemo(function(){return Object.entries(i).reduce(function(C,A){var I=A[0],O=A[1];return uM(O)&&(C[I]=pM(s,O)),C},{})},n);return hn.useEffect(function(){return s.subscribe(e,function(C){return Object.is(C,_.current)||g(_.current=C)})},n),hn.useDebugValue(a),[a,w]}const oP=["http","https","mailto","tel"];function mH(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const i=t.indexOf(":");if(i===-1)return t;let s=-1;for(;++s<oP.length;){const l=oP[s];if(i===l.length&&t.slice(0,l.length).toLowerCase()===l)return t}return s=t.indexOf("?"),s!==-1&&i>s||(s=t.indexOf("#"),s!==-1&&i>s)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var gH=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const hM=gH;function lv(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?aP(e.position):"start"in e||"end"in e?aP(e):"line"in e||"column"in e?dE(e):""}function dE(e){return sP(e&&e.line)+":"+sP(e&&e.column)}function aP(e){return dE(e&&e.start)+"-"+dE(e&&e.end)}function sP(e){return e&&typeof e=="number"?e:1}class Ul extends Error{constructor(t,n,i){const s=[null,null];let l={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(i=n,n=void 0),typeof i=="string"){const a=i.indexOf(":");a===-1?s[1]=i:(s[0]=i.slice(0,a),s[1]=i.slice(a+1))}n&&("type"in n||"position"in n?n.position&&(l=n.position):"start"in n||"end"in n?l=n:("line"in n||"column"in n)&&(l.start=n)),this.name=lv(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=l.start.line,this.column=l.start.column,this.source=s[0],this.ruleId=s[1],this.position=l,this.actual,this.expected,this.file,this.url,this.note}}Ul.prototype.file="";Ul.prototype.name="";Ul.prototype.reason="";Ul.prototype.message="";Ul.prototype.stack="";Ul.prototype.fatal=null;Ul.prototype.column=null;Ul.prototype.line=null;Ul.prototype.source=null;Ul.prototype.ruleId=null;Ul.prototype.position=null;const ec={basename:yH,dirname:vH,extname:_H,join:xH,sep:"/"};function yH(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');g_(e);let n=0,i=-1,s=e.length,l;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.charCodeAt(s)===47){if(l){n=s+1;break}}else i<0&&(l=!0,i=s+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let a=-1,g=t.length-1;for(;s--;)if(e.charCodeAt(s)===47){if(l){n=s+1;break}}else a<0&&(l=!0,a=s+1),g>-1&&(e.charCodeAt(s)===t.charCodeAt(g--)?g<0&&(i=s):(g=-1,i=a));return n===i?i=a:i<0&&(i=e.length),e.slice(n,i)}function vH(e){if(g_(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.charCodeAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function _H(e){g_(e);let t=e.length,n=-1,i=0,s=-1,l=0,a;for(;t--;){const g=e.charCodeAt(t);if(g===47){if(a){i=t+1;break}continue}n<0&&(a=!0,n=t+1),g===46?s<0?s=t:l!==1&&(l=1):s>-1&&(l=-1)}return s<0||n<0||l===0||l===1&&s===n-1&&s===i+1?"":e.slice(s,n)}function xH(...e){let t=-1,n;for(;++t<e.length;)g_(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":bH(n)}function bH(e){g_(e);const t=e.charCodeAt(0)===47;let n=wH(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wH(e,t){let n="",i=0,s=-1,l=0,a=-1,g,_;for(;++a<=e.length;){if(a<e.length)g=e.charCodeAt(a);else{if(g===47)break;g=47}if(g===47){if(!(s===a-1||l===1))if(s!==a-1&&l===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(_=n.lastIndexOf("/"),_!==n.length-1){_<0?(n="",i=0):(n=n.slice(0,_),i=n.length-1-n.lastIndexOf("/")),s=a,l=0;continue}}else if(n.length>0){n="",i=0,s=a,l=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),i=a-s-1;s=a,l=0}else g===46&&l>-1?l++:l=-1}return n}function g_(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const SH={cwd:CH};function CH(){return"/"}function mE(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function EH(e){if(typeof e=="string")e=new URL(e);else if(!mE(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return kH(e)}function kH(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const i=t.charCodeAt(n+2);if(i===70||i===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const fS=["history","path","basename","stem","extname","dirname"];class dM{constructor(t){let n;t?typeof t=="string"||hM(t)?n={value:t}:mE(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=SH.cwd(),this.value,this.stored,this.result,this.map;let i=-1;for(;++i<fS.length;){const l=fS[i];l in n&&n[l]!==void 0&&(this[l]=l==="history"?[...n[l]]:n[l])}let s;for(s in n)fS.includes(s)||(this[s]=n[s])}get path(){return this.history[this.history.length-1]}set path(t){mE(t)&&(t=EH(t)),hS(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?ec.dirname(this.path):void 0}set dirname(t){lP(this.basename,"dirname"),this.path=ec.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?ec.basename(this.path):void 0}set basename(t){hS(t,"basename"),pS(t,"basename"),this.path=ec.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?ec.extname(this.path):void 0}set extname(t){if(pS(t,"extname"),lP(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ec.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?ec.basename(this.path,this.extname):void 0}set stem(t){hS(t,"stem"),pS(t,"stem"),this.path=ec.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,i){const s=new Ul(t,n,i);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}info(t,n,i){const s=this.message(t,n,i);return s.fatal=null,s}fail(t,n,i){const s=this.message(t,n,i);throw s.fatal=!0,s}}function pS(e,t){if(e&&e.includes(ec.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ec.sep+"`")}function hS(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function lP(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function uP(e){if(e)throw e}var j1=Object.prototype.hasOwnProperty,mM=Object.prototype.toString,cP=Object.defineProperty,fP=Object.getOwnPropertyDescriptor,pP=function(t){return typeof Array.isArray=="function"?Array.isArray(t):mM.call(t)==="[object Array]"},hP=function(t){if(!t||mM.call(t)!=="[object Object]")return!1;var n=j1.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&j1.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;var s;for(s in t);return typeof s>"u"||j1.call(t,s)},dP=function(t,n){cP&&n.name==="__proto__"?cP(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},mP=function(t,n){if(n==="__proto__")if(j1.call(t,n)){if(fP)return fP(t,n).value}else return;return t[n]},gP=function e(){var t,n,i,s,l,a,g=arguments[0],_=1,w=arguments.length,C=!1;for(typeof g=="boolean"&&(C=g,g=arguments[1]||{},_=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});_<w;++_)if(t=arguments[_],t!=null)for(n in t)i=mP(g,n),s=mP(t,n),g!==s&&(C&&s&&(hP(s)||(l=pP(s)))?(l?(l=!1,a=i&&pP(i)?i:[]):a=i&&hP(i)?i:{},dP(g,{name:n,newValue:e(C,a,s)})):typeof s<"u"&&dP(g,{name:n,newValue:s}));return g};function gE(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function AH(){const e=[],t={run:n,use:i};return t;function n(...s){let l=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);g(null,...s);function g(_,...w){const C=e[++l];let A=-1;if(_){a(_);return}for(;++A<s.length;)(w[A]===null||w[A]===void 0)&&(w[A]=s[A]);s=w,C?PH(C,g)(...w):a(null,...w)}}function i(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function PH(e,t){let n;return i;function i(...a){const g=e.length>a.length;let _;g&&a.push(s);try{_=e.apply(this,a)}catch(w){const C=w;if(g&&n)throw C;return s(C)}g||(_ instanceof Promise?_.then(l,s):_ instanceof Error?s(_):l(_))}function s(a,...g){n||(n=!0,t(a,...g))}function l(a){s(null,a)}}const TH=yM().freeze(),gM={}.hasOwnProperty;function yM(){const e=AH(),t=[];let n={},i,s=-1;return l.data=a,l.Parser=void 0,l.Compiler=void 0,l.freeze=g,l.attachers=t,l.use=_,l.parse=w,l.stringify=C,l.run=A,l.runSync=I,l.process=O,l.processSync=D,l;function l(){const B=yM();let H=-1;for(;++H<t.length;)B.use(...t[H]);return B.data(gP(!0,{},n)),B}function a(B,H){return typeof B=="string"?arguments.length===2?(gS("data",i),n[B]=H,l):gM.call(n,B)&&n[B]||null:B?(gS("data",i),n=B,l):n}function g(){if(i)return l;for(;++s<t.length;){const[B,...H]=t[s];if(H[0]===!1)continue;H[0]===!0&&(H[0]=void 0);const R=B.call(l,...H);typeof R=="function"&&e.use(R)}return i=!0,s=Number.POSITIVE_INFINITY,l}function _(B,...H){let R;if(gS("use",i),B!=null)if(typeof B=="function")se(B,...H);else if(typeof B=="object")Array.isArray(B)?Y(B):q(B);else throw new TypeError("Expected usable value, not `"+B+"`");return R&&(n.settings=Object.assign(n.settings||{},R)),l;function U(W){if(typeof W=="function")se(W);else if(typeof W=="object")if(Array.isArray(W)){const[ce,...xe]=W;se(ce,...xe)}else q(W);else throw new TypeError("Expected usable value, not `"+W+"`")}function q(W){Y(W.plugins),W.settings&&(R=Object.assign(R||{},W.settings))}function Y(W){let ce=-1;if(W!=null)if(Array.isArray(W))for(;++ce<W.length;){const xe=W[ce];U(xe)}else throw new TypeError("Expected a list of plugins, not `"+W+"`")}function se(W,ce){let xe=-1,Me;for(;++xe<t.length;)if(t[xe][0]===W){Me=t[xe];break}Me?(gE(Me[1])&&gE(ce)&&(ce=gP(!0,Me[1],ce)),Me[1]=ce):t.push([...arguments])}}function w(B){l.freeze();const H=Ly(B),R=l.Parser;return dS("parse",R),yP(R,"parse")?new R(String(H),H).parse():R(String(H),H)}function C(B,H){l.freeze();const R=Ly(H),U=l.Compiler;return mS("stringify",U),vP(B),yP(U,"compile")?new U(B,R).compile():U(B,R)}function A(B,H,R){if(vP(B),l.freeze(),!R&&typeof H=="function"&&(R=H,H=void 0),!R)return new Promise(U);U(null,R);function U(q,Y){e.run(B,Ly(H),se);function se(W,ce,xe){ce=ce||B,W?Y(W):q?q(ce):R(null,ce,xe)}}}function I(B,H){let R,U;return l.run(B,H,q),_P("runSync","run",U),R;function q(Y,se){uP(Y),R=se,U=!0}}function O(B,H){if(l.freeze(),dS("process",l.Parser),mS("process",l.Compiler),!H)return new Promise(R);R(null,H);function R(U,q){const Y=Ly(B);l.run(l.parse(Y),Y,(W,ce,xe)=>{if(W||!ce||!xe)se(W);else{const Me=l.stringify(ce,xe);Me==null||(LH(Me)?xe.value=Me:xe.result=Me),se(W,xe)}});function se(W,ce){W||!ce?q(W):U?U(ce):H(null,ce)}}}function D(B){let H;l.freeze(),dS("processSync",l.Parser),mS("processSync",l.Compiler);const R=Ly(B);return l.process(R,U),_P("processSync","process",H),R;function U(q){H=!0,uP(q)}}}function yP(e,t){return typeof e=="function"&&e.prototype&&(IH(e.prototype)||t in e.prototype)}function IH(e){let t;for(t in e)if(gM.call(e,t))return!0;return!1}function dS(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function mS(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function gS(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function vP(e){if(!gE(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function _P(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ly(e){return OH(e)?e:new dM(e)}function OH(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function LH(e){return typeof e=="string"||hM(e)}function MH(e,t){var{includeImageAlt:n=!0}=t||{};return vM(e,n)}function vM(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&xP(e.children,t)||Array.isArray(e)&&xP(e,t))||""}function xP(e,t){for(var n=[],i=-1;++i<e.length;)n[i]=vM(e[i],t);return n.join("")}function lc(e,t,n,i){const s=e.length;let l=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);l<i.length;)a=i.slice(l,l+1e4),a.unshift(t,0),[].splice.apply(e,a),l+=1e4,t+=1e4}function Il(e,t){return e.length>0?(lc(e,e.length,0,t),e):t}const bP={}.hasOwnProperty;function RH(e){const t={};let n=-1;for(;++n<e.length;)FH(t,e[n]);return t}function FH(e,t){let n;for(n in t){const s=(bP.call(e,n)?e[n]:void 0)||(e[n]={}),l=t[n];let a;for(a in l){bP.call(s,a)||(s[a]=[]);const g=l[a];DH(s[a],Array.isArray(g)?g:g?[g]:[])}}}function DH(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);lc(e,0,0,i)}const zH=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,nc=rh(/[A-Za-z]/),yE=rh(/\d/),BH=rh(/[\dA-Fa-f]/),Ys=rh(/[\dA-Za-z]/),NH=rh(/[!-/:-@[-`{-~]/),wP=rh(/[#-'*+\--9=?A-Z^-~]/);function vE(e){return e!==null&&(e<32||e===127)}function Rl(e){return e!==null&&(e<0||e===32)}function Bn(e){return e!==null&&e<-2}function Io(e){return e===-2||e===-1||e===32}const $H=rh(/\s/),UH=rh(zH);function rh(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function ai(e,t,n,i){const s=i?i-1:Number.POSITIVE_INFINITY;let l=0;return a;function a(_){return Io(_)?(e.enter(n),g(_)):t(_)}function g(_){return Io(_)&&l++<s?(e.consume(_),g):(e.exit(n),t(_))}}const jH={tokenize:VH};function VH(e){const t=e.attempt(this.parser.constructs.contentInitial,i,s);let n;return t;function i(g){if(g===null){e.consume(g);return}return e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),ai(e,t,"linePrefix")}function s(g){return e.enter("paragraph"),l(g)}function l(g){const _=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=_),n=_,a(g)}function a(g){if(g===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(g);return}return Bn(g)?(e.consume(g),e.exit("chunkText"),l):(e.consume(g),a)}}const qH={tokenize:HH},SP={tokenize:GH};function HH(e){const t=this,n=[];let i=0,s,l,a;return g;function g(q){if(i<n.length){const Y=n[i];return t.containerState=Y[1],e.attempt(Y[0].continuation,_,w)(q)}return w(q)}function _(q){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&U();const Y=t.events.length;let se=Y,W;for(;se--;)if(t.events[se][0]==="exit"&&t.events[se][1].type==="chunkFlow"){W=t.events[se][1].end;break}R(i);let ce=Y;for(;ce<t.events.length;)t.events[ce][1].end=Object.assign({},W),ce++;return lc(t.events,se+1,0,t.events.slice(Y)),t.events.length=ce,w(q)}return g(q)}function w(q){if(i===n.length){if(!s)return I(q);if(s.currentConstruct&&s.currentConstruct.concrete)return D(q);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(SP,C,A)(q)}function C(q){return s&&U(),R(i),I(q)}function A(q){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,D(q)}function I(q){return t.containerState={},e.attempt(SP,O,D)(q)}function O(q){return i++,n.push([t.currentConstruct,t.containerState]),I(q)}function D(q){if(q===null){s&&U(),R(0),e.consume(q);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:l,_tokenizer:s}),B(q)}function B(q){if(q===null){H(e.exit("chunkFlow"),!0),R(0),e.consume(q);return}return Bn(q)?(e.consume(q),H(e.exit("chunkFlow")),i=0,t.interrupt=void 0,g):(e.consume(q),B)}function H(q,Y){const se=t.sliceStream(q);if(Y&&se.push(null),q.previous=l,l&&(l.next=q),l=q,s.defineSkip(q.start),s.write(se),t.parser.lazy[q.start.line]){let W=s.events.length;for(;W--;)if(s.events[W][1].start.offset<a&&(!s.events[W][1].end||s.events[W][1].end.offset>a))return;const ce=t.events.length;let xe=ce,Me,$e;for(;xe--;)if(t.events[xe][0]==="exit"&&t.events[xe][1].type==="chunkFlow"){if(Me){$e=t.events[xe][1].end;break}Me=!0}for(R(i),W=ce;W<t.events.length;)t.events[W][1].end=Object.assign({},$e),W++;lc(t.events,xe+1,0,t.events.slice(ce)),t.events.length=W}}function R(q){let Y=n.length;for(;Y-- >q;){const se=n[Y];t.containerState=se[1],se[0].exit.call(t,e)}n.length=q}function U(){s.write([null]),l=void 0,s=void 0,t.containerState._closeFlow=void 0}}function GH(e,t,n){return ai(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function CP(e){if(e===null||Rl(e)||$H(e))return 1;if(UH(e))return 2}function Qk(e,t,n){const i=[];let s=-1;for(;++s<e.length;){const l=e[s].resolveAll;l&&!i.includes(l)&&(t=l(t,n),i.push(l))}return t}const _E={name:"attention",tokenize:KH,resolveAll:WH};function WH(e,t){let n=-1,i,s,l,a,g,_,w,C;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;_=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const A=Object.assign({},e[i][1].end),I=Object.assign({},e[n][1].start);EP(A,-_),EP(I,_),a={type:_>1?"strongSequence":"emphasisSequence",start:A,end:Object.assign({},e[i][1].end)},g={type:_>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:I},l={type:_>1?"strongText":"emphasisText",start:Object.assign({},e[i][1].end),end:Object.assign({},e[n][1].start)},s={type:_>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},g.end)},e[i][1].end=Object.assign({},a.start),e[n][1].start=Object.assign({},g.end),w=[],e[i][1].end.offset-e[i][1].start.offset&&(w=Il(w,[["enter",e[i][1],t],["exit",e[i][1],t]])),w=Il(w,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",l,t]]),w=Il(w,Qk(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),w=Il(w,[["exit",l,t],["enter",g,t],["exit",g,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(C=2,w=Il(w,[["enter",e[n][1],t],["exit",e[n][1],t]])):C=0,lc(e,i-1,n-i+3,w),n=i+w.length-C-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function KH(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,s=CP(i);let l;return a;function a(_){return e.enter("attentionSequence"),l=_,g(_)}function g(_){if(_===l)return e.consume(_),g;const w=e.exit("attentionSequence"),C=CP(_),A=!C||C===2&&s||n.includes(_),I=!s||s===2&&C||n.includes(i);return w._open=!!(l===42?A:A&&(s||!I)),w._close=!!(l===42?I:I&&(C||!A)),t(_)}}function EP(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ZH={name:"autolink",tokenize:XH};function XH(e,t,n){let i=1;return s;function s(D){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(D),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l}function l(D){return nc(D)?(e.consume(D),a):wP(D)?w(D):n(D)}function a(D){return D===43||D===45||D===46||Ys(D)?g(D):w(D)}function g(D){return D===58?(e.consume(D),_):(D===43||D===45||D===46||Ys(D))&&i++<32?(e.consume(D),g):w(D)}function _(D){return D===62?(e.exit("autolinkProtocol"),O(D)):D===null||D===32||D===60||vE(D)?n(D):(e.consume(D),_)}function w(D){return D===64?(e.consume(D),i=0,C):wP(D)?(e.consume(D),w):n(D)}function C(D){return Ys(D)?A(D):n(D)}function A(D){return D===46?(e.consume(D),i=0,C):D===62?(e.exit("autolinkProtocol").type="autolinkEmail",O(D)):I(D)}function I(D){return(D===45||Ys(D))&&i++<63?(e.consume(D),D===45?I:A):n(D)}function O(D){return e.enter("autolinkMarker"),e.consume(D),e.exit("autolinkMarker"),e.exit("autolink"),t}}const vw={tokenize:QH,partial:!0};function QH(e,t,n){return ai(e,i,"linePrefix");function i(s){return s===null||Bn(s)?t(s):n(s)}}const _M={name:"blockQuote",tokenize:YH,continuation:{tokenize:JH},exit:eG};function YH(e,t,n){const i=this;return s;function s(a){if(a===62){const g=i.containerState;return g.open||(e.enter("blockQuote",{_container:!0}),g.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),l}return n(a)}function l(a){return Io(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function JH(e,t,n){return ai(e,e.attempt(_M,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function eG(e){e.exit("blockQuote")}const xM={name:"characterEscape",tokenize:tG};function tG(e,t,n){return i;function i(l){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(l),e.exit("escapeMarker"),s}function s(l){return NH(l)?(e.enter("characterEscapeValue"),e.consume(l),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(l)}}const kP=document.createElement("i");function Yk(e){const t="&"+e+";";kP.innerHTML=t;const n=kP.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const bM={name:"characterReference",tokenize:nG};function nG(e,t,n){const i=this;let s=0,l,a;return g;function g(A){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),_}function _(A){return A===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(A),e.exit("characterReferenceMarkerNumeric"),w):(e.enter("characterReferenceValue"),l=31,a=Ys,C(A))}function w(A){return A===88||A===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(A),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),l=6,a=BH,C):(e.enter("characterReferenceValue"),l=7,a=yE,C(A))}function C(A){let I;return A===59&&s?(I=e.exit("characterReferenceValue"),a===Ys&&!Yk(i.sliceSerialize(I))?n(A):(e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):a(A)&&s++<l?(e.consume(A),C):n(A)}}const AP={name:"codeFenced",tokenize:rG,concrete:!0};function rG(e,t,n){const i=this,s={tokenize:se,partial:!0},l={tokenize:Y,partial:!0},a=this.events[this.events.length-1],g=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0;let _=0,w;return C;function C(W){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),w=W,A(W)}function A(W){return W===w?(e.consume(W),_++,A):(e.exit("codeFencedFenceSequence"),_<3?n(W):ai(e,I,"whitespace")(W))}function I(W){return W===null||Bn(W)?H(W):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),O(W))}function O(W){return W===null||Rl(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ai(e,D,"whitespace")(W)):W===96&&W===w?n(W):(e.consume(W),O)}function D(W){return W===null||Bn(W)?H(W):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),B(W))}function B(W){return W===null||Bn(W)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),H(W)):W===96&&W===w?n(W):(e.consume(W),B)}function H(W){return e.exit("codeFencedFence"),i.interrupt?t(W):R(W)}function R(W){return W===null?q(W):Bn(W)?e.attempt(l,e.attempt(s,q,g?ai(e,R,"linePrefix",g+1):R),q)(W):(e.enter("codeFlowValue"),U(W))}function U(W){return W===null||Bn(W)?(e.exit("codeFlowValue"),R(W)):(e.consume(W),U)}function q(W){return e.exit("codeFenced"),t(W)}function Y(W,ce,xe){const Me=this;return $e;function $e(Ge){return W.enter("lineEnding"),W.consume(Ge),W.exit("lineEnding"),Le}function Le(Ge){return Me.parser.lazy[Me.now().line]?xe(Ge):ce(Ge)}}function se(W,ce,xe){let Me=0;return ai(W,$e,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function $e(Ye){return W.enter("codeFencedFence"),W.enter("codeFencedFenceSequence"),Le(Ye)}function Le(Ye){return Ye===w?(W.consume(Ye),Me++,Le):Me<_?xe(Ye):(W.exit("codeFencedFenceSequence"),ai(W,Ge,"whitespace")(Ye))}function Ge(Ye){return Ye===null||Bn(Ye)?(W.exit("codeFencedFence"),ce(Ye)):xe(Ye)}}}const yS={name:"codeIndented",tokenize:oG},iG={tokenize:aG,partial:!0};function oG(e,t,n){const i=this;return s;function s(w){return e.enter("codeIndented"),ai(e,l,"linePrefix",4+1)(w)}function l(w){const C=i.events[i.events.length-1];return C&&C[1].type==="linePrefix"&&C[2].sliceSerialize(C[1],!0).length>=4?a(w):n(w)}function a(w){return w===null?_(w):Bn(w)?e.attempt(iG,a,_)(w):(e.enter("codeFlowValue"),g(w))}function g(w){return w===null||Bn(w)?(e.exit("codeFlowValue"),a(w)):(e.consume(w),g)}function _(w){return e.exit("codeIndented"),t(w)}}function aG(e,t,n){const i=this;return s;function s(a){return i.parser.lazy[i.now().line]?n(a):Bn(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):ai(e,l,"linePrefix",4+1)(a)}function l(a){const g=i.events[i.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?t(a):Bn(a)?s(a):n(a)}}const sG={name:"codeText",tokenize:cG,resolve:lG,previous:uG};function lG(e){let t=e.length-4,n=3,i,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)s===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(s=i):(i===t||e[i][1].type==="lineEnding")&&(e[s][1].type="codeTextData",i!==s+2&&(e[s][1].end=e[i-1][1].end,e.splice(s+2,i-s-2),t-=i-s-2,i=s+2),s=void 0);return e}function uG(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cG(e,t,n){let i=0,s,l;return a;function a(A){return e.enter("codeText"),e.enter("codeTextSequence"),g(A)}function g(A){return A===96?(e.consume(A),i++,g):(e.exit("codeTextSequence"),_(A))}function _(A){return A===null?n(A):A===96?(l=e.enter("codeTextSequence"),s=0,C(A)):A===32?(e.enter("space"),e.consume(A),e.exit("space"),_):Bn(A)?(e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),_):(e.enter("codeTextData"),w(A))}function w(A){return A===null||A===32||A===96||Bn(A)?(e.exit("codeTextData"),_(A)):(e.consume(A),w)}function C(A){return A===96?(e.consume(A),s++,C):s===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(A)):(l.type="codeTextData",w(A))}}function wM(e){const t={};let n=-1,i,s,l,a,g,_,w;for(;++n<e.length;){for(;n in t;)n=t[n];if(i=e[n],n&&i[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(_=i[1]._tokenizer.events,l=0,l<_.length&&_[l][1].type==="lineEndingBlank"&&(l+=2),l<_.length&&_[l][1].type==="content"))for(;++l<_.length&&_[l][1].type!=="content";)_[l][1].type==="chunkText"&&(_[l][1]._isInFirstContentOfListItem=!0,l++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,fG(e,n)),n=t[n],w=!0);else if(i[1]._container){for(l=n,s=void 0;l--&&(a=e[l],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(s&&(e[s][1].type="lineEndingBlank"),a[1].type="lineEnding",s=l);s&&(i[1].end=Object.assign({},e[s][1].start),g=e.slice(s,n),g.unshift(i),lc(e,s,n-s+1,g))}}return!w}function fG(e,t){const n=e[t][1],i=e[t][2];let s=t-1;const l=[],a=n._tokenizer||i.parser[n.contentType](n.start),g=a.events,_=[],w={};let C,A,I=-1,O=n,D=0,B=0;const H=[B];for(;O;){for(;e[++s][1]!==O;);l.push(s),O._tokenizer||(C=i.sliceStream(O),O.next||C.push(null),A&&a.defineSkip(O.start),O._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(C),O._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),A=O,O=O.next}for(O=n;++I<g.length;)g[I][0]==="exit"&&g[I-1][0]==="enter"&&g[I][1].type===g[I-1][1].type&&g[I][1].start.line!==g[I][1].end.line&&(B=I+1,H.push(B),O._tokenizer=void 0,O.previous=void 0,O=O.next);for(a.events=[],O?(O._tokenizer=void 0,O.previous=void 0):H.pop(),I=H.length;I--;){const R=g.slice(H[I],H[I+1]),U=l.pop();_.unshift([U,U+R.length-1]),lc(e,U,2,R)}for(I=-1;++I<_.length;)w[D+_[I][0]]=D+_[I][1],D+=_[I][1]-_[I][0]-1;return w}const pG={tokenize:mG,resolve:dG},hG={tokenize:gG,partial:!0};function dG(e){return wM(e),e}function mG(e,t){let n;return i;function i(g){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(g)}function s(g){return g===null?l(g):Bn(g)?e.check(hG,a,l)(g):(e.consume(g),s)}function l(g){return e.exit("chunkContent"),e.exit("content"),t(g)}function a(g){return e.consume(g),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function gG(e,t,n){const i=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ai(e,l,"linePrefix")}function l(a){if(a===null||Bn(a))return n(a);const g=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?t(a):e.interrupt(i.parser.constructs.flow,n,t)(a)}}function SM(e,t,n,i,s,l,a,g,_){const w=_||Number.POSITIVE_INFINITY;let C=0;return A;function A(R){return R===60?(e.enter(i),e.enter(s),e.enter(l),e.consume(R),e.exit(l),I):R===null||R===41||vE(R)?n(R):(e.enter(i),e.enter(a),e.enter(g),e.enter("chunkString",{contentType:"string"}),B(R))}function I(R){return R===62?(e.enter(l),e.consume(R),e.exit(l),e.exit(s),e.exit(i),t):(e.enter(g),e.enter("chunkString",{contentType:"string"}),O(R))}function O(R){return R===62?(e.exit("chunkString"),e.exit(g),I(R)):R===null||R===60||Bn(R)?n(R):(e.consume(R),R===92?D:O)}function D(R){return R===60||R===62||R===92?(e.consume(R),O):O(R)}function B(R){return R===40?++C>w?n(R):(e.consume(R),B):R===41?C--?(e.consume(R),B):(e.exit("chunkString"),e.exit(g),e.exit(a),e.exit(i),t(R)):R===null||Rl(R)?C?n(R):(e.exit("chunkString"),e.exit(g),e.exit(a),e.exit(i),t(R)):vE(R)?n(R):(e.consume(R),R===92?H:B)}function H(R){return R===40||R===41||R===92?(e.consume(R),B):B(R)}}function CM(e,t,n,i,s,l){const a=this;let g=0,_;return w;function w(O){return e.enter(i),e.enter(s),e.consume(O),e.exit(s),e.enter(l),C}function C(O){return O===null||O===91||O===93&&!_||O===94&&!g&&"_hiddenFootnoteSupport"in a.parser.constructs||g>999?n(O):O===93?(e.exit(l),e.enter(s),e.consume(O),e.exit(s),e.exit(i),t):Bn(O)?(e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),C):(e.enter("chunkString",{contentType:"string"}),A(O))}function A(O){return O===null||O===91||O===93||Bn(O)||g++>999?(e.exit("chunkString"),C(O)):(e.consume(O),_=_||!Io(O),O===92?I:A)}function I(O){return O===91||O===92||O===93?(e.consume(O),g++,A):A(O)}}function EM(e,t,n,i,s,l){let a;return g;function g(I){return e.enter(i),e.enter(s),e.consume(I),e.exit(s),a=I===40?41:I,_}function _(I){return I===a?(e.enter(s),e.consume(I),e.exit(s),e.exit(i),t):(e.enter(l),w(I))}function w(I){return I===a?(e.exit(l),_(a)):I===null?n(I):Bn(I)?(e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),ai(e,w,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),C(I))}function C(I){return I===a||I===null||Bn(I)?(e.exit("chunkString"),w(I)):(e.consume(I),I===92?A:C)}function A(I){return I===a||I===92?(e.consume(I),C):C(I)}}function uv(e,t){let n;return i;function i(s){return Bn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,i):Io(s)?ai(e,i,n?"linePrefix":"lineSuffix")(s):t(s)}}function sg(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const yG={name:"definition",tokenize:_G},vG={tokenize:xG,partial:!0};function _G(e,t,n){const i=this;let s;return l;function l(_){return e.enter("definition"),CM.call(i,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(_)}function a(_){return s=sg(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),_===58?(e.enter("definitionMarker"),e.consume(_),e.exit("definitionMarker"),uv(e,SM(e,e.attempt(vG,ai(e,g,"whitespace"),ai(e,g,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(_)}function g(_){return _===null||Bn(_)?(e.exit("definition"),i.parser.defined.includes(s)||i.parser.defined.push(s),t(_)):n(_)}}function xG(e,t,n){return i;function i(a){return Rl(a)?uv(e,s)(a):n(a)}function s(a){return a===34||a===39||a===40?EM(e,ai(e,l,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a):n(a)}function l(a){return a===null||Bn(a)?t(a):n(a)}}const bG={name:"hardBreakEscape",tokenize:wG};function wG(e,t,n){return i;function i(l){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(l),s}function s(l){return Bn(l)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(l)):n(l)}}const SG={name:"headingAtx",tokenize:EG,resolve:CG};function CG(e,t){let n=e.length-2,i=3,s,l;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(s={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},l={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},lc(e,i,n-i+1,[["enter",s,t],["enter",l,t],["exit",l,t],["exit",s,t]])),e}function EG(e,t,n){const i=this;let s=0;return l;function l(C){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(C)}function a(C){return C===35&&s++<6?(e.consume(C),a):C===null||Rl(C)?(e.exit("atxHeadingSequence"),i.interrupt?t(C):g(C)):n(C)}function g(C){return C===35?(e.enter("atxHeadingSequence"),_(C)):C===null||Bn(C)?(e.exit("atxHeading"),t(C)):Io(C)?ai(e,g,"whitespace")(C):(e.enter("atxHeadingText"),w(C))}function _(C){return C===35?(e.consume(C),_):(e.exit("atxHeadingSequence"),g(C))}function w(C){return C===null||C===35||Rl(C)?(e.exit("atxHeadingText"),g(C)):(e.consume(C),w)}}const kG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],PP=["pre","script","style","textarea"],AG={name:"htmlFlow",tokenize:IG,resolveTo:TG,concrete:!0},PG={tokenize:OG,partial:!0};function TG(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function IG(e,t,n){const i=this;let s,l,a,g,_;return w;function w(ae){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(ae),C}function C(ae){return ae===33?(e.consume(ae),A):ae===47?(e.consume(ae),D):ae===63?(e.consume(ae),s=3,i.interrupt?t:ve):nc(ae)?(e.consume(ae),a=String.fromCharCode(ae),l=!0,B):n(ae)}function A(ae){return ae===45?(e.consume(ae),s=2,I):ae===91?(e.consume(ae),s=5,a="CDATA[",g=0,O):nc(ae)?(e.consume(ae),s=4,i.interrupt?t:ve):n(ae)}function I(ae){return ae===45?(e.consume(ae),i.interrupt?t:ve):n(ae)}function O(ae){return ae===a.charCodeAt(g++)?(e.consume(ae),g===a.length?i.interrupt?t:Le:O):n(ae)}function D(ae){return nc(ae)?(e.consume(ae),a=String.fromCharCode(ae),B):n(ae)}function B(ae){return ae===null||ae===47||ae===62||Rl(ae)?ae!==47&&l&&PP.includes(a.toLowerCase())?(s=1,i.interrupt?t(ae):Le(ae)):kG.includes(a.toLowerCase())?(s=6,ae===47?(e.consume(ae),H):i.interrupt?t(ae):Le(ae)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(ae):l?U(ae):R(ae)):ae===45||Ys(ae)?(e.consume(ae),a+=String.fromCharCode(ae),B):n(ae)}function H(ae){return ae===62?(e.consume(ae),i.interrupt?t:Le):n(ae)}function R(ae){return Io(ae)?(e.consume(ae),R):Me(ae)}function U(ae){return ae===47?(e.consume(ae),Me):ae===58||ae===95||nc(ae)?(e.consume(ae),q):Io(ae)?(e.consume(ae),U):Me(ae)}function q(ae){return ae===45||ae===46||ae===58||ae===95||Ys(ae)?(e.consume(ae),q):Y(ae)}function Y(ae){return ae===61?(e.consume(ae),se):Io(ae)?(e.consume(ae),Y):U(ae)}function se(ae){return ae===null||ae===60||ae===61||ae===62||ae===96?n(ae):ae===34||ae===39?(e.consume(ae),_=ae,W):Io(ae)?(e.consume(ae),se):(_=null,ce(ae))}function W(ae){return ae===null||Bn(ae)?n(ae):ae===_?(e.consume(ae),xe):(e.consume(ae),W)}function ce(ae){return ae===null||ae===34||ae===39||ae===60||ae===61||ae===62||ae===96||Rl(ae)?Y(ae):(e.consume(ae),ce)}function xe(ae){return ae===47||ae===62||Io(ae)?U(ae):n(ae)}function Me(ae){return ae===62?(e.consume(ae),$e):n(ae)}function $e(ae){return Io(ae)?(e.consume(ae),$e):ae===null||Bn(ae)?Le(ae):n(ae)}function Le(ae){return ae===45&&s===2?(e.consume(ae),Lt):ae===60&&s===1?(e.consume(ae),Dt):ae===62&&s===4?(e.consume(ae),_e):ae===63&&s===3?(e.consume(ae),ve):ae===93&&s===5?(e.consume(ae),Ne):Bn(ae)&&(s===6||s===7)?e.check(PG,_e,Ge)(ae):ae===null||Bn(ae)?Ge(ae):(e.consume(ae),Le)}function Ge(ae){return e.exit("htmlFlowData"),Ye(ae)}function Ye(ae){return ae===null?K(ae):Bn(ae)?e.attempt({tokenize:ht,partial:!0},Ye,K)(ae):(e.enter("htmlFlowData"),Le(ae))}function ht(ae,lt,Ot){return Ht;function Ht(Kt){return ae.enter("lineEnding"),ae.consume(Kt),ae.exit("lineEnding"),Ut}function Ut(Kt){return i.parser.lazy[i.now().line]?Ot(Kt):lt(Kt)}}function Lt(ae){return ae===45?(e.consume(ae),ve):Le(ae)}function Dt(ae){return ae===47?(e.consume(ae),a="",qt):Le(ae)}function qt(ae){return ae===62&&PP.includes(a.toLowerCase())?(e.consume(ae),_e):nc(ae)&&a.length<8?(e.consume(ae),a+=String.fromCharCode(ae),qt):Le(ae)}function Ne(ae){return ae===93?(e.consume(ae),ve):Le(ae)}function ve(ae){return ae===62?(e.consume(ae),_e):ae===45&&s===2?(e.consume(ae),ve):Le(ae)}function _e(ae){return ae===null||Bn(ae)?(e.exit("htmlFlowData"),K(ae)):(e.consume(ae),_e)}function K(ae){return e.exit("htmlFlow"),t(ae)}}function OG(e,t,n){return i;function i(s){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),e.attempt(vw,t,n)}}const LG={name:"htmlText",tokenize:MG};function MG(e,t,n){const i=this;let s,l,a,g;return _;function _(K){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(K),w}function w(K){return K===33?(e.consume(K),C):K===47?(e.consume(K),ce):K===63?(e.consume(K),se):nc(K)?(e.consume(K),$e):n(K)}function C(K){return K===45?(e.consume(K),A):K===91?(e.consume(K),l="CDATA[",a=0,H):nc(K)?(e.consume(K),Y):n(K)}function A(K){return K===45?(e.consume(K),I):n(K)}function I(K){return K===null||K===62?n(K):K===45?(e.consume(K),O):D(K)}function O(K){return K===null||K===62?n(K):D(K)}function D(K){return K===null?n(K):K===45?(e.consume(K),B):Bn(K)?(g=D,Ne(K)):(e.consume(K),D)}function B(K){return K===45?(e.consume(K),_e):D(K)}function H(K){return K===l.charCodeAt(a++)?(e.consume(K),a===l.length?R:H):n(K)}function R(K){return K===null?n(K):K===93?(e.consume(K),U):Bn(K)?(g=R,Ne(K)):(e.consume(K),R)}function U(K){return K===93?(e.consume(K),q):R(K)}function q(K){return K===62?_e(K):K===93?(e.consume(K),q):R(K)}function Y(K){return K===null||K===62?_e(K):Bn(K)?(g=Y,Ne(K)):(e.consume(K),Y)}function se(K){return K===null?n(K):K===63?(e.consume(K),W):Bn(K)?(g=se,Ne(K)):(e.consume(K),se)}function W(K){return K===62?_e(K):se(K)}function ce(K){return nc(K)?(e.consume(K),xe):n(K)}function xe(K){return K===45||Ys(K)?(e.consume(K),xe):Me(K)}function Me(K){return Bn(K)?(g=Me,Ne(K)):Io(K)?(e.consume(K),Me):_e(K)}function $e(K){return K===45||Ys(K)?(e.consume(K),$e):K===47||K===62||Rl(K)?Le(K):n(K)}function Le(K){return K===47?(e.consume(K),_e):K===58||K===95||nc(K)?(e.consume(K),Ge):Bn(K)?(g=Le,Ne(K)):Io(K)?(e.consume(K),Le):_e(K)}function Ge(K){return K===45||K===46||K===58||K===95||Ys(K)?(e.consume(K),Ge):Ye(K)}function Ye(K){return K===61?(e.consume(K),ht):Bn(K)?(g=Ye,Ne(K)):Io(K)?(e.consume(K),Ye):Le(K)}function ht(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(e.consume(K),s=K,Lt):Bn(K)?(g=ht,Ne(K)):Io(K)?(e.consume(K),ht):(e.consume(K),s=void 0,qt)}function Lt(K){return K===s?(e.consume(K),Dt):K===null?n(K):Bn(K)?(g=Lt,Ne(K)):(e.consume(K),Lt)}function Dt(K){return K===62||K===47||Rl(K)?Le(K):n(K)}function qt(K){return K===null||K===34||K===39||K===60||K===61||K===96?n(K):K===62||Rl(K)?Le(K):(e.consume(K),qt)}function Ne(K){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(K),e.exit("lineEnding"),ai(e,ve,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ve(K){return e.enter("htmlTextData"),g(K)}function _e(K){return K===62?(e.consume(K),e.exit("htmlTextData"),e.exit("htmlText"),t):n(K)}}const Jk={name:"labelEnd",tokenize:NG,resolveTo:BG,resolveAll:zG},RG={tokenize:$G},FG={tokenize:UG},DG={tokenize:jG};function zG(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function BG(e,t){let n=e.length,i=0,s,l,a,g;for(;n--;)if(s=e[n][1],l){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(l=n,s.type!=="labelLink")){i=2;break}}else s.type==="labelEnd"&&(a=n);const _={type:e[l][1].type==="labelLink"?"link":"image",start:Object.assign({},e[l][1].start),end:Object.assign({},e[e.length-1][1].end)},w={type:"label",start:Object.assign({},e[l][1].start),end:Object.assign({},e[a][1].end)},C={type:"labelText",start:Object.assign({},e[l+i+2][1].end),end:Object.assign({},e[a-2][1].start)};return g=[["enter",_,t],["enter",w,t]],g=Il(g,e.slice(l+1,l+i+3)),g=Il(g,[["enter",C,t]]),g=Il(g,Qk(t.parser.constructs.insideSpan.null,e.slice(l+i+4,a-3),t)),g=Il(g,[["exit",C,t],e[a-2],e[a-1],["exit",w,t]]),g=Il(g,e.slice(a+1)),g=Il(g,[["exit",_,t]]),lc(e,l,e.length,g),e}function NG(e,t,n){const i=this;let s=i.events.length,l,a;for(;s--;)if((i.events[s][1].type==="labelImage"||i.events[s][1].type==="labelLink")&&!i.events[s][1]._balanced){l=i.events[s][1];break}return g;function g(C){return l?l._inactive?w(C):(a=i.parser.defined.includes(sg(i.sliceSerialize({start:l.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(C),e.exit("labelMarker"),e.exit("labelEnd"),_):n(C)}function _(C){return C===40?e.attempt(RG,t,a?t:w)(C):C===91?e.attempt(FG,t,a?e.attempt(DG,t,w):w)(C):a?t(C):w(C)}function w(C){return l._balanced=!0,n(C)}}function $G(e,t,n){return i;function i(_){return e.enter("resource"),e.enter("resourceMarker"),e.consume(_),e.exit("resourceMarker"),uv(e,s)}function s(_){return _===41?g(_):SM(e,l,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(_)}function l(_){return Rl(_)?uv(e,a)(_):g(_)}function a(_){return _===34||_===39||_===40?EM(e,uv(e,g),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(_):g(_)}function g(_){return _===41?(e.enter("resourceMarker"),e.consume(_),e.exit("resourceMarker"),e.exit("resource"),t):n(_)}}function UG(e,t,n){const i=this;return s;function s(a){return CM.call(i,e,l,n,"reference","referenceMarker","referenceString")(a)}function l(a){return i.parser.defined.includes(sg(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(a):n(a)}}function jG(e,t,n){return i;function i(l){return e.enter("reference"),e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),s}function s(l){return l===93?(e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),e.exit("reference"),t):n(l)}}const VG={name:"labelStartImage",tokenize:qG,resolveAll:Jk.resolveAll};function qG(e,t,n){const i=this;return s;function s(g){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(g),e.exit("labelImageMarker"),l}function l(g){return g===91?(e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelImage"),a):n(g)}function a(g){return g===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(g):t(g)}}const HG={name:"labelStartLink",tokenize:GG,resolveAll:Jk.resolveAll};function GG(e,t,n){const i=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),l}function l(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):t(a)}}const vS={name:"lineEnding",tokenize:WG};function WG(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),ai(e,t,"linePrefix")}}const V1={name:"thematicBreak",tokenize:KG};function KG(e,t,n){let i=0,s;return l;function l(_){return e.enter("thematicBreak"),s=_,a(_)}function a(_){return _===s?(e.enter("thematicBreakSequence"),g(_)):Io(_)?ai(e,a,"whitespace")(_):i<3||_!==null&&!Bn(_)?n(_):(e.exit("thematicBreak"),t(_))}function g(_){return _===s?(e.consume(_),i++,g):(e.exit("thematicBreakSequence"),a(_))}}const ws={name:"list",tokenize:QG,continuation:{tokenize:YG},exit:eW},ZG={tokenize:tW,partial:!0},XG={tokenize:JG,partial:!0};function QG(e,t,n){const i=this,s=i.events[i.events.length-1];let l=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return g;function g(O){const D=i.containerState.type||(O===42||O===43||O===45?"listUnordered":"listOrdered");if(D==="listUnordered"?!i.containerState.marker||O===i.containerState.marker:yE(O)){if(i.containerState.type||(i.containerState.type=D,e.enter(D,{_container:!0})),D==="listUnordered")return e.enter("listItemPrefix"),O===42||O===45?e.check(V1,n,w)(O):w(O);if(!i.interrupt||O===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),_(O)}return n(O)}function _(O){return yE(O)&&++a<10?(e.consume(O),_):(!i.interrupt||a<2)&&(i.containerState.marker?O===i.containerState.marker:O===41||O===46)?(e.exit("listItemValue"),w(O)):n(O)}function w(O){return e.enter("listItemMarker"),e.consume(O),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||O,e.check(vw,i.interrupt?n:C,e.attempt(ZG,I,A))}function C(O){return i.containerState.initialBlankLine=!0,l++,I(O)}function A(O){return Io(O)?(e.enter("listItemPrefixWhitespace"),e.consume(O),e.exit("listItemPrefixWhitespace"),I):n(O)}function I(O){return i.containerState.size=l+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(O)}}function YG(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(vw,s,l);function s(g){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ai(e,t,"listItemIndent",i.containerState.size+1)(g)}function l(g){return i.containerState.furtherBlankLines||!Io(g)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(g)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(XG,t,a)(g))}function a(g){return i.containerState._closeFlow=!0,i.interrupt=void 0,ai(e,e.attempt(ws,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g)}}function JG(e,t,n){const i=this;return ai(e,s,"listItemIndent",i.containerState.size+1);function s(l){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?t(l):n(l)}}function eW(e){e.exit(this.containerState.type)}function tW(e,t,n){const i=this;return ai(e,s,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function s(l){const a=i.events[i.events.length-1];return!Io(l)&&a&&a[1].type==="listItemPrefixWhitespace"?t(l):n(l)}}const TP={name:"setextUnderline",tokenize:rW,resolveTo:nW};function nW(e,t){let n=e.length,i,s,l;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!l&&e[n][1].type==="definition"&&(l=n);const a={type:"setextHeading",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[s][1].type="setextHeadingText",l?(e.splice(s,0,["enter",a,t]),e.splice(l+1,0,["exit",e[i][1],t]),e[i][1].end=Object.assign({},e[l][1].end)):e[i][1]=a,e.push(["exit",a,t]),e}function rW(e,t,n){const i=this;let s=i.events.length,l,a;for(;s--;)if(i.events[s][1].type!=="lineEnding"&&i.events[s][1].type!=="linePrefix"&&i.events[s][1].type!=="content"){a=i.events[s][1].type==="paragraph";break}return g;function g(C){return!i.parser.lazy[i.now().line]&&(i.interrupt||a)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),l=C,_(C)):n(C)}function _(C){return C===l?(e.consume(C),_):(e.exit("setextHeadingLineSequence"),ai(e,w,"lineSuffix")(C))}function w(C){return C===null||Bn(C)?(e.exit("setextHeadingLine"),t(C)):n(C)}}const iW={tokenize:oW};function oW(e){const t=this,n=e.attempt(vw,i,e.attempt(this.parser.constructs.flowInitial,s,ai(e,e.attempt(this.parser.constructs.flow,s,e.attempt(pG,s)),"linePrefix")));return n;function i(l){if(l===null){e.consume(l);return}return e.enter("lineEndingBlank"),e.consume(l),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const aW={resolveAll:AM()},sW=kM("string"),lW=kM("text");function kM(e){return{tokenize:t,resolveAll:AM(e==="text"?uW:void 0)};function t(n){const i=this,s=this.parser.constructs[e],l=n.attempt(s,a,g);return a;function a(C){return w(C)?l(C):g(C)}function g(C){if(C===null){n.consume(C);return}return n.enter("data"),n.consume(C),_}function _(C){return w(C)?(n.exit("data"),l(C)):(n.consume(C),_)}function w(C){if(C===null)return!0;const A=s[C];let I=-1;if(A)for(;++I<A.length;){const O=A[I];if(!O.previous||O.previous.call(i,i.previous))return!0}return!1}}}function AM(e){return t;function t(n,i){let s=-1,l;for(;++s<=n.length;)l===void 0?n[s]&&n[s][1].type==="data"&&(l=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==l+2&&(n[l][1].end=n[s-1][1].end,n.splice(l+2,s-l-2),s=l+2),l=void 0);return e?e(n,i):n}}function uW(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],s=t.sliceStream(i);let l=s.length,a=-1,g=0,_;for(;l--;){const w=s[l];if(typeof w=="string"){for(a=w.length;w.charCodeAt(a-1)===32;)g++,a--;if(a)break;a=-1}else if(w===-2)_=!0,g++;else if(w!==-1){l++;break}}if(g){const w={type:n===e.length||_||g<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-g,offset:i.end.offset-g,_index:i.start._index+l,_bufferIndex:l?a:i.start._bufferIndex+a},end:Object.assign({},i.end)};i.end=Object.assign({},w.start),i.start.offset===i.end.offset?Object.assign(i,w):(e.splice(n,0,["enter",w,t],["exit",w,t]),n+=2)}n++}return e}function cW(e,t,n){let i=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},l=[];let a=[],g=[];const _={consume:U,enter:q,exit:Y,attempt:ce(se),check:ce(W),interrupt:ce(W,{interrupt:!0})},w={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:O,sliceSerialize:I,now:D,defineSkip:B,write:A};let C=t.tokenize.call(w,_);return t.resolveAll&&l.push(t),w;function A(Le){return a=Il(a,Le),H(),a[a.length-1]!==null?[]:(xe(t,0),w.events=Qk(l,w.events,w),w.events)}function I(Le,Ge){return pW(O(Le),Ge)}function O(Le){return fW(a,Le)}function D(){return Object.assign({},i)}function B(Le){s[Le.line]=Le.column,$e()}function H(){let Le;for(;i._index<a.length;){const Ge=a[i._index];if(typeof Ge=="string")for(Le=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===Le&&i._bufferIndex<Ge.length;)R(Ge.charCodeAt(i._bufferIndex));else R(Ge)}}function R(Le){C=C(Le)}function U(Le){Bn(Le)?(i.line++,i.column=1,i.offset+=Le===-3?2:1,$e()):Le!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),w.previous=Le}function q(Le,Ge){const Ye=Ge||{};return Ye.type=Le,Ye.start=D(),w.events.push(["enter",Ye,w]),g.push(Ye),Ye}function Y(Le){const Ge=g.pop();return Ge.end=D(),w.events.push(["exit",Ge,w]),Ge}function se(Le,Ge){xe(Le,Ge.from)}function W(Le,Ge){Ge.restore()}function ce(Le,Ge){return Ye;function Ye(ht,Lt,Dt){let qt,Ne,ve,_e;return Array.isArray(ht)?ae(ht):"tokenize"in ht?ae([ht]):K(ht);function K(Ut){return Kt;function Kt(cn){const sn=cn!==null&&Ut[cn],wr=cn!==null&&Ut.null,pr=[...Array.isArray(sn)?sn:sn?[sn]:[],...Array.isArray(wr)?wr:wr?[wr]:[]];return ae(pr)(cn)}}function ae(Ut){return qt=Ut,Ne=0,Ut.length===0?Dt:lt(Ut[Ne])}function lt(Ut){return Kt;function Kt(cn){return _e=Me(),ve=Ut,Ut.partial||(w.currentConstruct=Ut),Ut.name&&w.parser.constructs.disable.null.includes(Ut.name)?Ht():Ut.tokenize.call(Ge?Object.assign(Object.create(w),Ge):w,_,Ot,Ht)(cn)}}function Ot(Ut){return Le(ve,_e),Lt}function Ht(Ut){return _e.restore(),++Ne<qt.length?lt(qt[Ne]):Dt}}}function xe(Le,Ge){Le.resolveAll&&!l.includes(Le)&&l.push(Le),Le.resolve&&lc(w.events,Ge,w.events.length-Ge,Le.resolve(w.events.slice(Ge),w)),Le.resolveTo&&(w.events=Le.resolveTo(w.events,w))}function Me(){const Le=D(),Ge=w.previous,Ye=w.currentConstruct,ht=w.events.length,Lt=Array.from(g);return{restore:Dt,from:ht};function Dt(){i=Le,w.previous=Ge,w.currentConstruct=Ye,w.events.length=ht,g=Lt,$e()}}function $e(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}function fW(e,t){const n=t.start._index,i=t.start._bufferIndex,s=t.end._index,l=t.end._bufferIndex;let a;return n===s?a=[e[n].slice(i,l)]:(a=e.slice(n,s),i>-1&&(a[0]=a[0].slice(i)),l>0&&a.push(e[s].slice(0,l))),a}function pW(e,t){let n=-1;const i=[];let s;for(;++n<e.length;){const l=e[n];let a;if(typeof l=="string")a=l;else switch(l){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(l)}s=l===-2,i.push(a)}return i.join("")}const hW={[42]:ws,[43]:ws,[45]:ws,[48]:ws,[49]:ws,[50]:ws,[51]:ws,[52]:ws,[53]:ws,[54]:ws,[55]:ws,[56]:ws,[57]:ws,[62]:_M},dW={[91]:yG},mW={[-2]:yS,[-1]:yS,[32]:yS},gW={[35]:SG,[42]:V1,[45]:[TP,V1],[60]:AG,[61]:TP,[95]:V1,[96]:AP,[126]:AP},yW={[38]:bM,[92]:xM},vW={[-5]:vS,[-4]:vS,[-3]:vS,[33]:VG,[38]:bM,[42]:_E,[60]:[ZH,LG],[91]:HG,[92]:[bG,xM],[93]:Jk,[95]:_E,[96]:sG},_W={null:[_E,aW]},xW={null:[42,95]},bW={null:[]},wW=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xW,contentInitial:dW,disable:bW,document:hW,flow:gW,flowInitial:mW,insideSpan:_W,string:yW,text:vW},Symbol.toStringTag,{value:"Module"}));function SW(e={}){const t=RH([wW].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:i(jH),document:i(qH),flow:i(iW),string:i(sW),text:i(lW)};return n;function i(s){return l;function l(a){return cW(n,s,a)}}}const IP=/[\0\t\n\r]/g;function CW(){let e=1,t="",n=!0,i;return s;function s(l,a,g){const _=[];let w,C,A,I,O;for(l=t+l.toString(a),A=0,t="",n&&(l.charCodeAt(0)===65279&&A++,n=void 0);A<l.length;){if(IP.lastIndex=A,w=IP.exec(l),I=w&&w.index!==void 0?w.index:l.length,O=l.charCodeAt(I),!w){t=l.slice(A);break}if(O===10&&A===I&&i)_.push(-3),i=void 0;else switch(i&&(_.push(-5),i=void 0),A<I&&(_.push(l.slice(A,I)),e+=I-A),O){case 0:{_.push(65533),e++;break}case 9:{for(C=Math.ceil(e/4)*4,_.push(-2);e++<C;)_.push(-1);break}case 10:{_.push(-4),e=1;break}default:i=!0,e=1}A=I+1}return g&&(i&&_.push(-5),t&&_.push(t),_.push(null)),_}}function EW(e){for(;!wM(e););return e}function PM(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const kW=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function AW(e){return e.replace(kW,PW)}function PW(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),l=s===120||s===88;return PM(n.slice(l?2:1),l?16:10)}return Yk(n)||e}const xE={}.hasOwnProperty,TW=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),IW(n)(EW(SW(n).document().write(CW()(e,t,!0))))};function IW(e={}){const t=TM({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:_(ui),autolinkProtocol:Ge,autolinkEmail:Ge,atxHeading:_(yo),blockQuote:_(li),characterEscape:Ge,characterReference:Ge,codeFenced:_(dn),codeFencedFenceInfo:w,codeFencedFenceMeta:w,codeIndented:_(dn,w),codeText:_($r,w),codeTextData:Ge,data:Ge,codeFlowValue:Ge,definition:_(Ur),definitionDestinationString:w,definitionLabelString:w,definitionTitleString:w,emphasis:_(go),hardBreakEscape:_(ro),hardBreakTrailing:_(ro),htmlFlow:_(ls,w),htmlFlowData:Ge,htmlText:_(ls,w),htmlTextData:Ge,image:_(Ci),label:w,link:_(ui),listItem:_(Ii),listItemValue:B,listOrdered:_(Lo,D),listUnordered:_(Lo),paragraph:_(Oi),reference:Ut,referenceString:w,resourceDestinationString:w,resourceTitleString:w,setextHeading:_(yo),strong:_(Mo),thematicBreak:_(Xe)},exit:{atxHeading:A(),atxHeadingSequence:xe,autolink:A(),autolinkEmail:pr,autolinkProtocol:wr,blockQuote:A(),characterEscapeValue:Ye,characterReferenceMarkerHexadecimal:cn,characterReferenceMarkerNumeric:cn,characterReferenceValue:sn,codeFenced:A(q),codeFencedFence:U,codeFencedFenceInfo:H,codeFencedFenceMeta:R,codeFlowValue:Ye,codeIndented:A(Y),codeText:A(Ne),codeTextData:Ye,data:Ye,definition:A(),definitionDestinationString:ce,definitionLabelString:se,definitionTitleString:W,emphasis:A(),hardBreakEscape:A(Lt),hardBreakTrailing:A(Lt),htmlFlow:A(Dt),htmlFlowData:Ye,htmlText:A(qt),htmlTextData:Ye,image:A(_e),label:ae,labelText:K,lineEnding:ht,link:A(ve),listItem:A(),listOrdered:A(),listUnordered:A(),paragraph:A(),referenceString:Kt,resourceDestinationString:lt,resourceTitleString:Ot,resource:Ht,setextHeading:A(Le),setextHeadingLineSequence:$e,setextHeadingText:Me,strong:A(),thematicBreak:A()}},e.mdastExtensions||[]),n={};return i;function i(ue){let Re={type:"root",children:[]};const nt=[Re],Tt=[],bn=[],Jn={stack:nt,tokenStack:Tt,config:t,enter:C,exit:I,buffer:w,resume:O,setData:l,getData:a};let tn=-1;for(;++tn<ue.length;)if(ue[tn][1].type==="listOrdered"||ue[tn][1].type==="listUnordered")if(ue[tn][0]==="enter")bn.push(tn);else{const Pn=bn.pop();tn=s(ue,Pn,tn)}for(tn=-1;++tn<ue.length;){const Pn=t[ue[tn][0]];xE.call(Pn,ue[tn][1].type)&&Pn[ue[tn][1].type].call(Object.assign({sliceSerialize:ue[tn][2].sliceSerialize},Jn),ue[tn][1])}if(Tt.length>0){const Pn=Tt[Tt.length-1];(Pn[1]||OP).call(Jn,void 0,Pn[0])}for(Re.position={start:g(ue.length>0?ue[0][1].start:{line:1,column:1,offset:0}),end:g(ue.length>0?ue[ue.length-2][1].end:{line:1,column:1,offset:0})},tn=-1;++tn<t.transforms.length;)Re=t.transforms[tn](Re)||Re;return Re}function s(ue,Re,nt){let Tt=Re-1,bn=-1,Jn=!1,tn,Pn,_r,Sr;for(;++Tt<=nt;){const Vn=ue[Tt];if(Vn[1].type==="listUnordered"||Vn[1].type==="listOrdered"||Vn[1].type==="blockQuote"?(Vn[0]==="enter"?bn++:bn--,Sr=void 0):Vn[1].type==="lineEndingBlank"?Vn[0]==="enter"&&(tn&&!Sr&&!bn&&!_r&&(_r=Tt),Sr=void 0):Vn[1].type==="linePrefix"||Vn[1].type==="listItemValue"||Vn[1].type==="listItemMarker"||Vn[1].type==="listItemPrefix"||Vn[1].type==="listItemPrefixWhitespace"||(Sr=void 0),!bn&&Vn[0]==="enter"&&Vn[1].type==="listItemPrefix"||bn===-1&&Vn[0]==="exit"&&(Vn[1].type==="listUnordered"||Vn[1].type==="listOrdered")){if(tn){let qi=Tt;for(Pn=void 0;qi--;){const Mr=ue[qi];if(Mr[1].type==="lineEnding"||Mr[1].type==="lineEndingBlank"){if(Mr[0]==="exit")continue;Pn&&(ue[Pn][1].type="lineEndingBlank",Jn=!0),Mr[1].type="lineEnding",Pn=qi}else if(!(Mr[1].type==="linePrefix"||Mr[1].type==="blockQuotePrefix"||Mr[1].type==="blockQuotePrefixWhitespace"||Mr[1].type==="blockQuoteMarker"||Mr[1].type==="listItemIndent"))break}_r&&(!Pn||_r<Pn)&&(tn._spread=!0),tn.end=Object.assign({},Pn?ue[Pn][1].start:Vn[1].end),ue.splice(Pn||Tt,0,["exit",tn,Vn[2]]),Tt++,nt++}Vn[1].type==="listItemPrefix"&&(tn={type:"listItem",_spread:!1,start:Object.assign({},Vn[1].start)},ue.splice(Tt,0,["enter",tn,Vn[2]]),Tt++,nt++,_r=void 0,Sr=!0)}}return ue[Re][1]._spread=Jn,nt}function l(ue,Re){n[ue]=Re}function a(ue){return n[ue]}function g(ue){return{line:ue.line,column:ue.column,offset:ue.offset}}function _(ue,Re){return nt;function nt(Tt){C.call(this,ue(Tt),Tt),Re&&Re.call(this,Tt)}}function w(){this.stack.push({type:"fragment",children:[]})}function C(ue,Re,nt){return this.stack[this.stack.length-1].children.push(ue),this.stack.push(ue),this.tokenStack.push([Re,nt]),ue.position={start:g(Re.start)},ue}function A(ue){return Re;function Re(nt){ue&&ue.call(this,nt),I.call(this,nt)}}function I(ue,Re){const nt=this.stack.pop(),Tt=this.tokenStack.pop();if(Tt)Tt[0].type!==ue.type&&(Re?Re.call(this,ue,Tt[0]):(Tt[1]||OP).call(this,ue,Tt[0]));else throw new Error("Cannot close `"+ue.type+"` ("+lv({start:ue.start,end:ue.end})+"): its not open");return nt.position.end=g(ue.end),nt}function O(){return MH(this.stack.pop())}function D(){l("expectingFirstListItemValue",!0)}function B(ue){if(a("expectingFirstListItemValue")){const Re=this.stack[this.stack.length-2];Re.start=Number.parseInt(this.sliceSerialize(ue),10),l("expectingFirstListItemValue")}}function H(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.lang=ue}function R(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.meta=ue}function U(){a("flowCodeInside")||(this.buffer(),l("flowCodeInside",!0))}function q(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ue.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),l("flowCodeInside")}function Y(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ue.replace(/(\r?\n|\r)$/g,"")}function se(ue){const Re=this.resume(),nt=this.stack[this.stack.length-1];nt.label=Re,nt.identifier=sg(this.sliceSerialize(ue)).toLowerCase()}function W(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.title=ue}function ce(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.url=ue}function xe(ue){const Re=this.stack[this.stack.length-1];if(!Re.depth){const nt=this.sliceSerialize(ue).length;Re.depth=nt}}function Me(){l("setextHeadingSlurpLineEnding",!0)}function $e(ue){const Re=this.stack[this.stack.length-1];Re.depth=this.sliceSerialize(ue).charCodeAt(0)===61?1:2}function Le(){l("setextHeadingSlurpLineEnding")}function Ge(ue){const Re=this.stack[this.stack.length-1];let nt=Re.children[Re.children.length-1];(!nt||nt.type!=="text")&&(nt=Ro(),nt.position={start:g(ue.start)},Re.children.push(nt)),this.stack.push(nt)}function Ye(ue){const Re=this.stack.pop();Re.value+=this.sliceSerialize(ue),Re.position.end=g(ue.end)}function ht(ue){const Re=this.stack[this.stack.length-1];if(a("atHardBreak")){const nt=Re.children[Re.children.length-1];nt.position.end=g(ue.end),l("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Re.type)&&(Ge.call(this,ue),Ye.call(this,ue))}function Lt(){l("atHardBreak",!0)}function Dt(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ue}function qt(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ue}function Ne(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ue}function ve(){const ue=this.stack[this.stack.length-1];a("inReference")?(ue.type+="Reference",ue.referenceType=a("referenceType")||"shortcut",delete ue.url,delete ue.title):(delete ue.identifier,delete ue.label),l("referenceType")}function _e(){const ue=this.stack[this.stack.length-1];a("inReference")?(ue.type+="Reference",ue.referenceType=a("referenceType")||"shortcut",delete ue.url,delete ue.title):(delete ue.identifier,delete ue.label),l("referenceType")}function K(ue){const Re=this.stack[this.stack.length-2],nt=this.sliceSerialize(ue);Re.label=AW(nt),Re.identifier=sg(nt).toLowerCase()}function ae(){const ue=this.stack[this.stack.length-1],Re=this.resume(),nt=this.stack[this.stack.length-1];l("inReference",!0),nt.type==="link"?nt.children=ue.children:nt.alt=Re}function lt(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.url=ue}function Ot(){const ue=this.resume(),Re=this.stack[this.stack.length-1];Re.title=ue}function Ht(){l("inReference")}function Ut(){l("referenceType","collapsed")}function Kt(ue){const Re=this.resume(),nt=this.stack[this.stack.length-1];nt.label=Re,nt.identifier=sg(this.sliceSerialize(ue)).toLowerCase(),l("referenceType","full")}function cn(ue){l("characterReferenceType",ue.type)}function sn(ue){const Re=this.sliceSerialize(ue),nt=a("characterReferenceType");let Tt;nt?(Tt=PM(Re,nt==="characterReferenceMarkerNumeric"?10:16),l("characterReferenceType")):Tt=Yk(Re);const bn=this.stack.pop();bn.value+=Tt,bn.position.end=g(ue.end)}function wr(ue){Ye.call(this,ue);const Re=this.stack[this.stack.length-1];Re.url=this.sliceSerialize(ue)}function pr(ue){Ye.call(this,ue);const Re=this.stack[this.stack.length-1];Re.url="mailto:"+this.sliceSerialize(ue)}function li(){return{type:"blockquote",children:[]}}function dn(){return{type:"code",lang:null,meta:null,value:""}}function $r(){return{type:"inlineCode",value:""}}function Ur(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function go(){return{type:"emphasis",children:[]}}function yo(){return{type:"heading",depth:void 0,children:[]}}function ro(){return{type:"break"}}function ls(){return{type:"html",value:""}}function Ci(){return{type:"image",title:null,url:"",alt:null}}function ui(){return{type:"link",title:null,url:"",children:[]}}function Lo(ue){return{type:"list",ordered:ue.type==="listOrdered",start:null,spread:ue._spread,children:[]}}function Ii(ue){return{type:"listItem",spread:ue._spread,checked:null,children:[]}}function Oi(){return{type:"paragraph",children:[]}}function Mo(){return{type:"strong",children:[]}}function Ro(){return{type:"text",value:""}}function Xe(){return{type:"thematicBreak"}}}function TM(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?TM(e,i):OW(e,i)}return e}function OW(e,t){let n;for(n in t)if(xE.call(t,n)){const i=n==="canContainEols"||n==="transforms",l=(xE.call(e,n)?e[n]:void 0)||(e[n]=i?[]:{}),a=t[n];a&&(i?e[n]=[...l,...a]:Object.assign(l,a))}}function OP(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+lv({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+lv({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+lv({start:t.start,end:t.end})+") is still open")}function LW(e){Object.assign(this,{Parser:n=>{const i=this.data("settings");return TW(n,Object.assign({},i,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var Ko=function(e,t,n){var i={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(i,t),Array.isArray(n)?i.children=n:n!=null&&(i.value=String(n)),i};const q1={}.hasOwnProperty;function MW(e,t){const n=t.data||{};return"value"in t&&!(q1.call(n,"hName")||q1.call(n,"hProperties")||q1.call(n,"hChildren"))?e.augment(t,Ko("text",t.value)):e(t,"div",Va(e,t))}function IM(e,t,n){const i=t&&t.type;let s;if(!i)throw new Error("Expected node, got `"+t+"`");return q1.call(e.handlers,i)?s=e.handlers[i]:e.passThrough&&e.passThrough.includes(i)?s=RW:s=e.unknownHandler,(typeof s=="function"?s:MW)(e,t,n)}function RW(e,t){return"children"in t?{...t,children:Va(e,t)}:t}function Va(e,t){const n=[];if("children"in t){const i=t.children;let s=-1;for(;++s<i.length;){const l=IM(e,i[s],t);if(l){if(s&&i[s-1].type==="break"&&(!Array.isArray(l)&&l.type==="text"&&(l.value=l.value.replace(/^\s+/,"")),!Array.isArray(l)&&l.type==="element")){const a=l.children[0];a&&a.type==="text"&&(a.value=a.value.replace(/^\s+/,""))}Array.isArray(l)?n.push(...l):n.push(l)}}}return n}const OM=function(e){if(e==null)return BW;if(typeof e=="string")return zW(e);if(typeof e=="object")return Array.isArray(e)?FW(e):DW(e);if(typeof e=="function")return _w(e);throw new Error("Expected function, string, or object as test")};function FW(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=OM(e[n]);return _w(i);function i(...s){let l=-1;for(;++l<t.length;)if(t[l].call(this,...s))return!0;return!1}}function DW(e){return _w(t);function t(n){let i;for(i in e)if(n[i]!==e[i])return!1;return!0}}function zW(e){return _w(t);function t(n){return n&&n.type===e}}function _w(e){return t;function t(...n){return!!e.call(this,...n)}}function BW(){return!0}const NW=!0,$W="skip",LP=!1,UW=function(e,t,n,i){typeof t=="function"&&typeof n!="function"&&(i=n,n=t,t=null);const s=OM(t),l=i?-1:1;a(e,null,[])();function a(g,_,w){const C=typeof g=="object"&&g!==null?g:{};let A;return typeof C.type=="string"&&(A=typeof C.tagName=="string"?C.tagName:typeof C.name=="string"?C.name:void 0,Object.defineProperty(I,"name",{value:"node ("+(C.type+(A?"<"+A+">":""))+")"})),I;function I(){let O=[],D,B,H;if((!t||s(g,_,w[w.length-1]||null))&&(O=jW(n(g,w)),O[0]===LP))return O;if(g.children&&O[0]!==$W)for(B=(i?g.children.length:-1)+l,H=w.concat(g);B>-1&&B<g.children.length;){if(D=a(g.children[B],B,H)(),D[0]===LP)return D;B=typeof D[1]=="number"?D[1]:B+l}return O}}};function jW(e){return Array.isArray(e)?e:typeof e=="number"?[NW,e]:[e]}const eA=function(e,t,n,i){typeof t=="function"&&typeof n!="function"&&(i=n,n=t,t=null),UW(e,t,s,i);function s(l,a){const g=a[a.length-1];return n(l,g?g.children.indexOf(l):null,g)}},LM=RM("start"),MM=RM("end");function RM(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};return{line:i.line||null,column:i.column||null,offset:i.offset>-1?i.offset:null}}}function VW(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const MP={}.hasOwnProperty;function qW(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return eA(e,"definition",i=>{const s=RP(i.identifier);s&&!MP.call(t,s)&&(t[s]=i)}),n;function n(i){const s=RP(i);return s&&MP.call(t,s)?t[s]:null}}function RP(e){return String(e||"").toUpperCase()}const HW={'"':"quot","&":"amp","<":"lt",">":"gt"};function GW(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+HW[n]+";"}}function FM(e,t){const n=GW(WW(e||""));if(!t)return n;const i=n.indexOf(":"),s=n.indexOf("?"),l=n.indexOf("#"),a=n.indexOf("/");return i<0||a>-1&&i>a||s>-1&&i>s||l>-1&&i>l||t.test(n.slice(0,i))?n:""}function WW(e){const t=[];let n=-1,i=0,s=0;for(;++n<e.length;){const l=e.charCodeAt(n);let a="";if(l===37&&Ys(e.charCodeAt(n+1))&&Ys(e.charCodeAt(n+2)))s=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(a=String.fromCharCode(l));else if(l>55295&&l<57344){const g=e.charCodeAt(n+1);l<56320&&g>56319&&g<57344?(a=String.fromCharCode(l,g),s=1):a=""}else a=String.fromCharCode(l);a&&(t.push(e.slice(i,n),encodeURIComponent(a)),i=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(i)}function df(e,t){const n=[];let i=-1;for(t&&n.push(Ko("text",`
`));++i<e.length;)i&&n.push(Ko("text",`
`)),n.push(e[i]);return t&&e.length>0&&n.push(Ko("text",`
`)),n}function KW(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const i=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!i)continue;const s=Va(e,i),l=String(i.identifier),a=FM(l.toLowerCase());let g=0;const _=[];for(;++g<=e.footnoteCounts[l];){const A={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+a+(g>1?"-"+g:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};g>1&&A.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(g)}]}),_.length>0&&_.push({type:"text",value:" "}),_.push(A)}const w=s[s.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const A=w.children[w.children.length-1];A&&A.type==="text"?A.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(..._)}else s.push(..._);const C={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+a},children:df(s,!0)};i.position&&(C.position=i.position),n.push(C)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[Ko("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:df(n,!0)},{type:"text",value:`
`}]}}function ZW(e,t){return e(t,"blockquote",df(Va(e,t),!0))}function XW(e,t){return[e(t,"br"),Ko("text",`
`)]}function QW(e,t){const n=t.value?t.value+`
`:"",i=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),s={};i&&(s.className=["language-"+i]);const l=e(t,"code",s,[Ko("text",n)]);return t.meta&&(l.data={meta:t.meta}),e(t.position,"pre",[l])}function YW(e,t){return e(t,"del",Va(e,t))}function JW(e,t){return e(t,"em",Va(e,t))}function DM(e,t){const n=String(t.identifier),i=FM(n.toLowerCase()),s=e.footnoteOrder.indexOf(n);let l;s===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,l=e.footnoteOrder.length):(e.footnoteCounts[n]++,l=s+1);const a=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+i,id:e.clobberPrefix+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[Ko("text",String(l))])])}function eK(e,t){const n=e.footnoteById;let i=1;for(;i in n;)i++;const s=String(i);return n[s]={type:"footnoteDefinition",identifier:s,children:[{type:"paragraph",children:t.children}],position:t.position},DM(e,{type:"footnoteReference",identifier:s,position:t.position})}function tK(e,t){return e(t,"h"+t.depth,Va(e,t))}function nK(e,t){return e.dangerous?e.augment(t,Ko("raw",t.value)):null}var FP={};function rK(e){var t,n,i=FP[e];if(i)return i;for(i=FP[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?i.push(n):i.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)i[e.charCodeAt(t)]=e[t];return i}function xw(e,t,n){var i,s,l,a,g,_="";for(typeof t!="string"&&(n=t,t=xw.defaultChars),typeof n>"u"&&(n=!0),g=rK(t),i=0,s=e.length;i<s;i++){if(l=e.charCodeAt(i),n&&l===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){_+=e.slice(i,i+3),i+=2;continue}if(l<128){_+=g[l];continue}if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&i+1<s&&(a=e.charCodeAt(i+1),a>=56320&&a<=57343)){_+=encodeURIComponent(e[i]+e[i+1]),i++;continue}_+="%EF%BF%BD";continue}_+=encodeURIComponent(e[i])}return _}xw.defaultChars=";/?:@&=+$,-_.!~*'()#";xw.componentChars="-_.!~*'()";var bw=xw;function zM(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return Ko("text","!["+t.alt+i);const s=Va(e,t),l=s[0];l&&l.type==="text"?l.value="["+l.value:s.unshift(Ko("text","["));const a=s[s.length-1];return a&&a.type==="text"?a.value+=i:s.push(Ko("text",i)),s}function iK(e,t){const n=e.definition(t.identifier);if(!n)return zM(e,t);const i={src:bw(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(i.title=n.title),e(t,"img",i)}function oK(e,t){const n={src:bw(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function aK(e,t){return e(t,"code",[Ko("text",t.value.replace(/\r?\n|\r/g," "))])}function sK(e,t){const n=e.definition(t.identifier);if(!n)return zM(e,t);const i={href:bw(n.url||"")};return n.title!==null&&n.title!==void 0&&(i.title=n.title),e(t,"a",i,Va(e,t))}function lK(e,t){const n={href:bw(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Va(e,t))}function uK(e,t,n){const i=Va(e,t),s=n?cK(n):BM(t),l={},a=[];if(typeof t.checked=="boolean"){let w;i[0]&&i[0].type==="element"&&i[0].tagName==="p"?w=i[0]:(w=e(null,"p",[]),i.unshift(w)),w.children.length>0&&w.children.unshift(Ko("text"," ")),w.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),l.className=["task-list-item"]}let g=-1;for(;++g<i.length;){const w=i[g];(s||g!==0||w.type!=="element"||w.tagName!=="p")&&a.push(Ko("text",`
`)),w.type==="element"&&w.tagName==="p"&&!s?a.push(...w.children):a.push(w)}const _=i[i.length-1];return _&&(s||!("tagName"in _)||_.tagName!=="p")&&a.push(Ko("text",`
`)),e(t,"li",l,a)}function cK(e){let t=e.spread;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=BM(n[i]);return!!t}function BM(e){const t=e.spread;return t??e.children.length>1}function fK(e,t){const n={},i=t.ordered?"ol":"ul",s=Va(e,t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++l<s.length;){const a=s[l];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,i,n,df(s,!0))}function pK(e,t){return e(t,"p",Va(e,t))}function hK(e,t){return e.augment(t,Ko("root",df(Va(e,t))))}function dK(e,t){return e(t,"strong",Va(e,t))}function mK(e,t){const n=t.children;let i=-1;const s=t.align||[],l=[];for(;++i<n.length;){const a=n[i].children,g=i===0?"th":"td",_=[];let w=-1;const C=t.align?s.length:a.length;for(;++w<C;){const A=a[w];_.push(e(A,g,{align:s[w]},A?Va(e,A):[]))}l[i]=e(n[i],"tr",df(_,!0))}return e(t,"table",df([e(l[0].position,"thead",df([l[0]],!0))].concat(l[1]?e({start:LM(l[1]),end:MM(l[l.length-1])},"tbody",df(l.slice(1),!0)):[]),!0))}const DP=9,zP=32;function gK(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),s=0;const l=[];for(;i;)l.push(BP(t.slice(s,i.index),s>0,!0),i[0]),s=i.index+i[0].length,i=n.exec(t);return l.push(BP(t.slice(s),s>0,!1)),l.join("")}function BP(e,t,n){let i=0,s=e.length;if(t){let l=e.codePointAt(i);for(;l===DP||l===zP;)i++,l=e.codePointAt(i)}if(n){let l=e.codePointAt(s-1);for(;l===DP||l===zP;)s--,l=e.codePointAt(s-1)}return s>i?e.slice(i,s):""}function yK(e,t){return e.augment(t,Ko("text",gK(String(t.value))))}function vK(e,t){return e(t,"hr")}const _K={blockquote:ZW,break:XW,code:QW,delete:YW,emphasis:JW,footnoteReference:DM,footnote:eK,heading:tK,html:nK,imageReference:iK,image:oK,inlineCode:aK,linkReference:sK,link:lK,listItem:uK,list:fK,paragraph:pK,root:hK,strong:dK,table:mK,text:yK,thematicBreak:vK,toml:c1,yaml:c1,definition:c1,footnoteDefinition:c1};function c1(){return null}const xK={}.hasOwnProperty;function bK(e,t){const n=t||{},i=n.allowDangerousHtml||!1,s={};return a.dangerous=i,a.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,a.footnoteLabel=n.footnoteLabel||"Footnotes",a.footnoteLabelTagName=n.footnoteLabelTagName||"h2",a.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},a.footnoteBackLabel=n.footnoteBackLabel||"Back to content",a.definition=qW(e),a.footnoteById=s,a.footnoteOrder=[],a.footnoteCounts={},a.augment=l,a.handlers={..._K,...n.handlers},a.unknownHandler=n.unknownHandler,a.passThrough=n.passThrough,eA(e,"footnoteDefinition",g=>{const _=String(g.identifier).toUpperCase();xK.call(s,_)||(s[_]=g)}),a;function l(g,_){if(g&&"data"in g&&g.data){const w=g.data;w.hName&&(_.type!=="element"&&(_={type:"element",tagName:"",properties:{},children:[]}),_.tagName=w.hName),_.type==="element"&&w.hProperties&&(_.properties={..._.properties,...w.hProperties}),"children"in _&&_.children&&w.hChildren&&(_.children=w.hChildren)}if(g){const w="type"in g?g:{position:g};VW(w)||(_.position={start:LM(w),end:MM(w)})}return _}function a(g,_,w,C){return Array.isArray(w)&&(C=w,w={}),l(g,{type:"element",tagName:_,properties:w||{},children:C||[]})}}function NM(e,t){const n=bK(e,t),i=IM(n,e,null),s=KW(n);return s&&i.children.push(Ko("text",`
`),s),Array.isArray(i)?{type:"root",children:i}:i}const wK=function(e,t){return e&&"run"in e?CK(e,t):EK(e||t)},SK=wK;function CK(e,t){return(n,i,s)=>{e.run(NM(n,t),i,l=>{s(l)})}}function EK(e){return t=>NM(t,e)}class y_{constructor(t,n,i){this.property=t,this.normal=n,i&&(this.space=i)}}y_.prototype.property={};y_.prototype.normal={};y_.prototype.space=null;function $M(e,t){const n={},i={};let s=-1;for(;++s<e.length;)Object.assign(n,e[s].property),Object.assign(i,e[s].normal);return new y_(n,i,t)}function bE(e){return e.toLowerCase()}class jl{constructor(t,n){this.property=t,this.attribute=n}}jl.prototype.space=null;jl.prototype.boolean=!1;jl.prototype.booleanish=!1;jl.prototype.overloadedBoolean=!1;jl.prototype.number=!1;jl.prototype.commaSeparated=!1;jl.prototype.spaceSeparated=!1;jl.prototype.commaOrSpaceSeparated=!1;jl.prototype.mustUseProperty=!1;jl.prototype.defined=!1;let kK=0;const Yn=Pd(),Po=Pd(),UM=Pd(),kt=Pd(),wi=Pd(),lg=Pd(),Gs=Pd();function Pd(){return 2**++kK}const wE=Object.freeze(Object.defineProperty({__proto__:null,boolean:Yn,booleanish:Po,commaOrSpaceSeparated:Gs,commaSeparated:lg,number:kt,overloadedBoolean:UM,spaceSeparated:wi},Symbol.toStringTag,{value:"Module"})),_S=Object.keys(wE);class tA extends jl{constructor(t,n,i,s){let l=-1;if(super(t,n),NP(this,"space",s),typeof i=="number")for(;++l<_S.length;){const a=_S[l];NP(this,_S[l],(i&wE[a])===wE[a])}}}tA.prototype.defined=!0;function NP(e,t,n){n&&(e[t]=n)}const AK={}.hasOwnProperty;function Ig(e){const t={},n={};let i;for(i in e.properties)if(AK.call(e.properties,i)){const s=e.properties[i],l=new tA(i,e.transform(e.attributes||{},i),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(l.mustUseProperty=!0),t[i]=l,n[bE(i)]=i,n[bE(l.attribute)]=i}return new y_(t,n,e.space)}const jM=Ig({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),VM=Ig({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function qM(e,t){return t in e?e[t]:t}function HM(e,t){return qM(e,t.toLowerCase())}const GM=Ig({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:HM,properties:{xmlns:null,xmlnsXLink:null}}),WM=Ig({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Po,ariaAutoComplete:null,ariaBusy:Po,ariaChecked:Po,ariaColCount:kt,ariaColIndex:kt,ariaColSpan:kt,ariaControls:wi,ariaCurrent:null,ariaDescribedBy:wi,ariaDetails:null,ariaDisabled:Po,ariaDropEffect:wi,ariaErrorMessage:null,ariaExpanded:Po,ariaFlowTo:wi,ariaGrabbed:Po,ariaHasPopup:null,ariaHidden:Po,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wi,ariaLevel:kt,ariaLive:null,ariaModal:Po,ariaMultiLine:Po,ariaMultiSelectable:Po,ariaOrientation:null,ariaOwns:wi,ariaPlaceholder:null,ariaPosInSet:kt,ariaPressed:Po,ariaReadOnly:Po,ariaRelevant:null,ariaRequired:Po,ariaRoleDescription:wi,ariaRowCount:kt,ariaRowIndex:kt,ariaRowSpan:kt,ariaSelected:Po,ariaSetSize:kt,ariaSort:null,ariaValueMax:kt,ariaValueMin:kt,ariaValueNow:kt,ariaValueText:null,role:null}}),PK=Ig({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:HM,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:lg,acceptCharset:wi,accessKey:wi,action:null,allow:null,allowFullScreen:Yn,allowPaymentRequest:Yn,allowUserMedia:Yn,alt:null,as:null,async:Yn,autoCapitalize:null,autoComplete:wi,autoFocus:Yn,autoPlay:Yn,capture:Yn,charSet:null,checked:Yn,cite:null,className:wi,cols:kt,colSpan:null,content:null,contentEditable:Po,controls:Yn,controlsList:wi,coords:kt|lg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Yn,defer:Yn,dir:null,dirName:null,disabled:Yn,download:UM,draggable:Po,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Yn,formTarget:null,headers:wi,height:kt,hidden:Yn,high:kt,href:null,hrefLang:null,htmlFor:wi,httpEquiv:wi,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:Yn,itemId:null,itemProp:wi,itemRef:wi,itemScope:Yn,itemType:wi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Yn,low:kt,manifest:null,max:null,maxLength:kt,media:null,method:null,min:null,minLength:kt,multiple:Yn,muted:Yn,name:null,nonce:null,noModule:Yn,noValidate:Yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Yn,optimum:kt,pattern:null,ping:wi,placeholder:null,playsInline:Yn,poster:null,preload:null,readOnly:Yn,referrerPolicy:null,rel:wi,required:Yn,reversed:Yn,rows:kt,rowSpan:kt,sandbox:wi,scope:null,scoped:Yn,seamless:Yn,selected:Yn,shape:null,size:kt,sizes:null,slot:null,span:kt,spellCheck:Po,src:null,srcDoc:null,srcLang:null,srcSet:null,start:kt,step:null,style:null,tabIndex:kt,target:null,title:null,translate:null,type:null,typeMustMatch:Yn,useMap:null,value:Po,width:kt,wrap:null,align:null,aLink:null,archive:wi,axis:null,background:null,bgColor:null,border:kt,borderColor:null,bottomMargin:kt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Yn,declare:Yn,event:null,face:null,frame:null,frameBorder:null,hSpace:kt,leftMargin:kt,link:null,longDesc:null,lowSrc:null,marginHeight:kt,marginWidth:kt,noResize:Yn,noHref:Yn,noShade:Yn,noWrap:Yn,object:null,profile:null,prompt:null,rev:null,rightMargin:kt,rules:null,scheme:null,scrolling:Po,standby:null,summary:null,text:null,topMargin:kt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:kt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Yn,disableRemotePlayback:Yn,prefix:null,property:null,results:kt,security:null,unselectable:null}}),TK=Ig({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:qM,properties:{about:Gs,accentHeight:kt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:kt,amplitude:kt,arabicForm:null,ascent:kt,attributeName:null,attributeType:null,azimuth:kt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:kt,by:null,calcMode:null,capHeight:kt,className:wi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:kt,diffuseConstant:kt,direction:null,display:null,dur:null,divisor:kt,dominantBaseline:null,download:Yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:kt,enableBackground:null,end:null,event:null,exponent:kt,externalResourcesRequired:null,fill:null,fillOpacity:kt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:lg,g2:lg,glyphName:lg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:kt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:kt,horizOriginX:kt,horizOriginY:kt,id:null,ideographic:kt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:kt,k:kt,k1:kt,k2:kt,k3:kt,k4:kt,kernelMatrix:Gs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:kt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:kt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:kt,overlineThickness:kt,paintOrder:null,panose1:null,path:null,pathLength:kt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:kt,pointsAtY:kt,pointsAtZ:kt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Gs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Gs,rev:Gs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Gs,requiredFeatures:Gs,requiredFonts:Gs,requiredFormats:Gs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:kt,specularExponent:kt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:kt,strikethroughThickness:kt,string:null,stroke:null,strokeDashArray:Gs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:kt,strokeOpacity:kt,strokeWidth:null,style:null,surfaceScale:kt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Gs,tabIndex:kt,tableValues:null,target:null,targetX:kt,targetY:kt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Gs,to:null,transform:null,u1:null,u2:null,underlinePosition:kt,underlineThickness:kt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:kt,values:null,vAlphabetic:kt,vMathematical:kt,vectorEffect:null,vHanging:kt,vIdeographic:kt,version:null,vertAdvY:kt,vertOriginX:kt,vertOriginY:kt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:kt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),IK=/^data[-\w.:]+$/i,$P=/-[a-z]/g,OK=/[A-Z]/g;function LK(e,t){const n=bE(t);let i=t,s=jl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&IK.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace($P,RK);i="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!$P.test(l)){let a=l.replace(OK,MK);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=tA}return new s(i,t)}function MK(e){return"-"+e.toLowerCase()}function RK(e){return e.charAt(1).toUpperCase()}const UP={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},FK=$M([VM,jM,GM,WM,PK],"html"),DK=$M([VM,jM,GM,WM,TK],"svg");function zK(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{eA(t,"element",(n,i,s)=>{const l=s;let a;if(e.allowedElements?a=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(n.tagName)),!a&&e.allowElement&&typeof i=="number"&&(a=!e.allowElement(n,i,l)),a&&typeof i=="number")return e.unwrapDisallowed&&n.children?l.children.splice(i,1,...n.children):l.children.splice(i,1),i})}}function BK(e){var t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function NK(e){return e.join(" ").trim()}function $K(e,t){var n=t||{};return e[e.length-1]===""&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var jx={},UK={get exports(){return jx},set exports(e){jx=e}},jP=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,jK=/\n/g,VK=/^\s*/,qK=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,HK=/^:\s*/,GK=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,WK=/^[;\s]*/,KK=/^\s+|\s+$/g,ZK=`
`,VP="/",qP="*",ed="",XK="comment",QK="declaration",YK=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,i=1;function s(D){var B=D.match(jK);B&&(n+=B.length);var H=D.lastIndexOf(ZK);i=~H?D.length-H:i+D.length}function l(){var D={line:n,column:i};return function(B){return B.position=new a(D),w(),B}}function a(D){this.start=D,this.end={line:n,column:i},this.source=t.source}a.prototype.content=e;function g(D){var B=new Error(t.source+":"+n+":"+i+": "+D);if(B.reason=D,B.filename=t.source,B.line=n,B.column=i,B.source=e,!t.silent)throw B}function _(D){var B=D.exec(e);if(B){var H=B[0];return s(H),e=e.slice(H.length),B}}function w(){_(VK)}function C(D){var B;for(D=D||[];B=A();)B!==!1&&D.push(B);return D}function A(){var D=l();if(!(VP!=e.charAt(0)||qP!=e.charAt(1))){for(var B=2;ed!=e.charAt(B)&&(qP!=e.charAt(B)||VP!=e.charAt(B+1));)++B;if(B+=2,ed===e.charAt(B-1))return g("End of comment missing");var H=e.slice(2,B-2);return i+=2,s(H),e=e.slice(B),i+=2,D({type:XK,comment:H})}}function I(){var D=l(),B=_(qK);if(B){if(A(),!_(HK))return g("property missing ':'");var H=_(GK),R=D({type:QK,property:HP(B[0].replace(jP,ed)),value:H?HP(H[0].replace(jP,ed)):ed});return _(WK),R}}function O(){var D=[];C(D);for(var B;B=I();)B!==!1&&(D.push(B),C(D));return D}return w(),O()};function HP(e){return e?e.replace(KK,ed):ed}var JK=YK;function KM(e,t){var n=null;if(!e||typeof e!="string")return n;for(var i,s=JK(e),l=typeof t=="function",a,g,_=0,w=s.length;_<w;_++)i=s[_],a=i.property,g=i.value,l?t(a,g,i):g&&(n||(n={}),n[a]=g);return n}UK.exports=KM;jx.default=KM;const eZ=jx,SE={}.hasOwnProperty,tZ=new Set(["table","thead","tbody","tfoot","tr"]);function ZM(e,t){const n=[];let i=-1,s;for(;++i<t.children.length;)s=t.children[i],s.type==="element"?n.push(nZ(e,s,i,t)):s.type==="text"?(t.type!=="element"||!tZ.has(t.tagName)||!BK(s))&&n.push(s.value):s.type==="raw"&&!e.options.skipHtml&&n.push(s.value);return n}function nZ(e,t,n,i){const s=e.options,l=s.transformLinkUri===void 0?mH:s.transformLinkUri,a=e.schema,g=t.tagName,_={};let w=a,C;if(a.space==="html"&&g==="svg"&&(w=DK,e.schema=w),t.properties)for(C in t.properties)SE.call(t.properties,C)&&iZ(_,C,t.properties[C],e);(g==="ol"||g==="ul")&&e.listDepth++;const A=ZM(e,t);(g==="ol"||g==="ul")&&e.listDepth--,e.schema=a;const I=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},O=s.components&&SE.call(s.components,g)?s.components[g]:g,D=typeof O=="string"||O===hn.Fragment;if(!uq.isValidElementType(O))throw new TypeError(`Component for name \`${g}\` not defined or is not renderable`);if(_.key=[g,I.start.line,I.start.column,n].join("-"),g==="a"&&s.linkTarget&&(_.target=typeof s.linkTarget=="function"?s.linkTarget(String(_.href||""),t.children,typeof _.title=="string"?_.title:null):s.linkTarget),g==="a"&&l&&(_.href=l(String(_.href||""),t.children,typeof _.title=="string"?_.title:null)),!D&&g==="code"&&i.type==="element"&&i.tagName!=="pre"&&(_.inline=!0),!D&&(g==="h1"||g==="h2"||g==="h3"||g==="h4"||g==="h5"||g==="h6")&&(_.level=Number.parseInt(g.charAt(1),10)),g==="img"&&s.transformImageUri&&(_.src=s.transformImageUri(String(_.src||""),String(_.alt||""),typeof _.title=="string"?_.title:null)),!D&&g==="li"&&i.type==="element"){const B=rZ(t);_.checked=B&&B.properties?!!B.properties.checked:null,_.index=xS(i,t),_.ordered=i.tagName==="ol"}return!D&&(g==="ol"||g==="ul")&&(_.ordered=g==="ol",_.depth=e.listDepth),(g==="td"||g==="th")&&(_.align&&(_.style||(_.style={}),_.style.textAlign=_.align,delete _.align),D||(_.isHeader=g==="th")),!D&&g==="tr"&&i.type==="element"&&(_.isHeader=i.tagName==="thead"),s.sourcePos&&(_["data-sourcepos"]=sZ(I)),!D&&s.rawSourcePos&&(_.sourcePosition=t.position),!D&&s.includeElementIndex&&(_.index=xS(i,t),_.siblingCount=xS(i)),D||(_.node=t),A.length>0?hn.createElement(O,_,A):hn.createElement(O,_)}function rZ(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function xS(e,t){let n=-1,i=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&i++;return i}function iZ(e,t,n,i){const s=LK(i.schema,t);let l=n;l==null||l!==l||(Array.isArray(l)&&(l=s.commaSeparated?$K(l):NK(l)),s.property==="style"&&typeof l=="string"&&(l=oZ(l)),s.space&&s.property?e[SE.call(UP,s.property)?UP[s.property]:s.property]=l:s.attribute&&(e[s.attribute]=l))}function oZ(e){const t={};try{eZ(e,n)}catch{}return t;function n(i,s){const l=i.slice(0,4)==="-ms-"?`ms-${i.slice(4)}`:i;t[l.replace(/-([a-z])/g,aZ)]=s}}function aZ(e,t){return t.toUpperCase()}function sZ(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const GP={}.hasOwnProperty,lZ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",f1={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function XM(e){for(const l in f1)if(GP.call(f1,l)&&GP.call(e,l)){const a=f1[l];console.warn(`[react-markdown] Warning: please ${a.to?`use \`${a.to}\` instead of`:"remove"} \`${l}\` (see <${lZ}#${a.id}> for more info)`),delete f1[l]}const t=TH().use(LW).use(e.remarkPlugins||[]).use(SK,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(zK,e),n=new dM;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const i=t.runSync(t.parse(n),n);if(i.type!=="root")throw new TypeError("Expected a `root` node");let s=hn.createElement(hn.Fragment,{},ZM({options:e,schema:FK,listDepth:0},i));return e.className&&(s=hn.createElement("div",{className:e.className},s)),s}XM.propTypes={children:On.string,className:On.string,allowElement:On.func,allowedElements:On.arrayOf(On.string),disallowedElements:On.arrayOf(On.string),unwrapDisallowed:On.bool,remarkPlugins:On.arrayOf(On.oneOfType([On.object,On.func,On.arrayOf(On.oneOfType([On.bool,On.string,On.object,On.func,On.arrayOf(On.any)]))])),rehypePlugins:On.arrayOf(On.oneOfType([On.object,On.func,On.arrayOf(On.oneOfType([On.bool,On.string,On.object,On.func,On.arrayOf(On.any)]))])),sourcePos:On.bool,rawSourcePos:On.bool,skipHtml:On.bool,includeElementIndex:On.bool,transformLinkUri:On.oneOfType([On.func,On.bool]),linkTarget:On.oneOfType([On.func,On.string]),transformImageUri:On.func,components:On.object};function CE(){return CE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},CE.apply(this,arguments)}var uZ=["decorators"],cZ=0;function fZ(e,t,n){n===void 0&&(n="primitive"+ ++cZ),t!=null||(t={set:function(C,A){return A},change:function(C,A){return A(C)}});var i=Gv(n)?{id:n}:n,s=i.decorators,l=s===void 0?[]:s,a=function(C,A){if(C==null)return{};var I,O,D={},B=Object.keys(C);for(O=0;O<B.length;O++)A.indexOf(I=B[O])>=0||(D[I]=C[I]);return D}(i,uZ);(l=l.slice()).unshift(function(C){return function(A,I){var O;return I.tracks==null&&(I.tracks=[],(O=I).state!=null||(O.state=e)),A.actions.forEach(function(D){var B,H=w.indexOf(D.type);H!=-1&&(I==I&&(I=Object.assign({},I)),I.state=(B=t)[g[H]].apply(B,[I.state].concat(D.payload)))}),I}});var g=Object.keys(t),_=m_(g.reduce(function(C,A){return C[A]=function(){return[].slice.call(arguments)},C},{}),Kk,CE({decorators:l},a)),w=g.map(function(C){return _[C].type});return _}var pZ=0;function hZ(e,t){return e===void 0&&(e=!1),t===void 0&&(t="boolean"+ ++pZ),fZ(e,{toggle:function(n){return!n},setTrue:function(){return!0},setFalse:function(){return!1},change:function(n,i){return i(n)},set:function(n,i){return i}},t)}function EE(){return EE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},EE.apply(this,arguments)}var dZ=["decorators"],mZ=0;function QM(e,t,n){n===void 0&&(n="primitive"+ ++mZ),t!=null||(t={set:function(C,A){return A},change:function(C,A){return A(C)}});var i=Gv(n)?{id:n}:n,s=i.decorators,l=s===void 0?[]:s,a=function(C,A){if(C==null)return{};var I,O,D={},B=Object.keys(C);for(O=0;O<B.length;O++)A.indexOf(I=B[O])>=0||(D[I]=C[I]);return D}(i,dZ);(l=l.slice()).unshift(function(C){return function(A,I){var O;return I.tracks==null&&(I.tracks=[],(O=I).state!=null||(O.state=e)),A.actions.forEach(function(D){var B,H=w.indexOf(D.type);H!=-1&&(I==I&&(I=Object.assign({},I)),I.state=(B=t)[g[H]].apply(B,[I.state].concat(D.payload)))}),I}});var g=Object.keys(t),_=m_(g.reduce(function(C,A){return C[A]=function(){return[].slice.call(arguments)},C},{}),Kk,EE({decorators:l},a)),w=g.map(function(C){return _[C].type});return _}const gZ={APP_LOGIN:"app_login",ANALYTICS_PANEL:"analytics_panel",ADVANCED_ANALYTICS_PANEL:"advanced_analytics_panel",EVENTS_LIST:"events_list",FEED_SELECTOR:"feed_selector",EVENTS_LIST__FEED_SELECTOR:"events_list__feed_selector",EVENTS_LIST__BBOX_FILTER:"events_list__bbox_filter",MAP_LAYERS_PANEL:"map_layers_panel",SIDE_BAR:"side_bar",BIVARIATE_MANAGER:"bivariate_manager",CURRENT_EVENT:"current_event",FOCUSED_GEOMETRY_LAYER:"focused_geometry_layer",LAYERS_IN_AREA:"layers_in_area",MAP_RULER:"map_ruler",TOASTS:"toasts",BOUNDARY_SELECTOR:"boundary_selector",DRAW_TOOLS:"draw_tools",FOCUSED_GEOMETRY_EDITOR:"focused_geometry_editor",GEOMETRY_UPLOADER:"geometry_uploader",LEGEND_PANEL:"legend_panel",REPORTS:"reports",INTERACTIVE_MAP:"interactive_map",CURRENT_EPISODE:"current_episode",GEOCODER:"geocoder",EPISODE_LIST:"episode_list",COMMUNITIES:"communities",FEATURE_SETTINGS:"feature_settings",OSM_EDIT_LINK:"osm_edit_link",TOOLTIP:"tooltip",CREATE_LAYER:"create_layer",HEADER:"header",INTERCOM:"intercom",BIVARIATE_COLOR_MANAGER:"bivariate_color_manager",EPISODES_TIMELINE:"episodes_timeline",LOCATE_ME:"locate_me",USE_3RDPARTY_ANALYTICS:"use_3rdparty_analytics",LIVE_SENSOR:"live_sensor",MCDA:"mcda"},yZ="METRICS";function vZ(e,t){if(!globalThis.CustomEvent)return;const n=new CustomEvent(yZ,{detail:{name:e,payload:t}});globalThis.dispatchEvent(n)}class _Z{constructor(){un(this,"storage",new Map)}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}get length(){return this.storage.size}key(t){return this.storage.keys()[t]??null}}class YM{constructor(t){un(this,"storage");this.storageAvailable(t)?this.storage=globalThis[t]:(console.warn("Switching to in memory storage"),this.storage=new _Z)}storageAvailable(t){try{const n=globalThis[t],i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(n){console.warn(`${t} in not available.`),console.debug(n)}}setItem(t,n){return this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}get length(){return this.storage.length}clear(){return this.storage.clear()}key(t){return this.storage.key(t)}removeItem(t){return this.storage.removeItem(t)}}new YM("sessionStorage");const Qp=new YM("localStorage"),nA=!!Qp.getItem("KONTUR_DEBUG");Qp.getItem("KONTUR_METRICS_DEBUG");Qp.getItem("KONTUR_WARN");const WP=Qp.getItem("KONTUR_TRACE_TYPE"),xZ=!!Qp.getItem("KONTUR_TRACE_PATCH");function bZ(e){var n;const t=`\x1B[94m${Math.trunc(performance.now())}\x1B[m `;(n=e.actions.filter(i=>!i.type.startsWith("invalidate ")))==null||n.map(i=>{var s;if(((s=i.targets)==null?void 0:s.length)===1){const l=String(i.targets[0].id);if(i.type.endsWith(l)){const a=i.type.substring(0,i.type.length-l.length-1),g={_error:"\x1B[30;101m",_done:"\x1B[30;102m"}[a]??"\x1B[22;31m";console.warn(`${t}\x1B[1;32m${l} ${g}${a}\x1B[m`,i.payload,{"+":e.causes})}}else console.warn(`${t}\x1B[1;32m${i.type}\x1B[m`,i.payload,i.targets,{"+":e.causes})})}function wZ(){return cM({onPatch:e=>{{xZ&&bZ(e);for(const t of e.actions)t.type.includes("invalidate")||(vZ(t.type,t.payload),WP&&t.type.includes(WP)&&console.trace("TRACE:",t.type,e))}}})}const JM=wZ(),ww=e=>({store:JM,...typeof e=="string"?{id:e}:e}),Ti=(e,t,n)=>m_(e,t,ww(n)),eR=(e,t)=>hZ(e,ww(t));let tR=0;function nR(e=new Set,t=`set${++tR}`){return QM(e,{set:(n,i)=>n.has(i)?n:new Set(n).add(i),delete:(n,i)=>{const s=n=new Set(n);return s.delete(i)?s:n},clear:()=>new Set,change:(n,i)=>i(new Set(n))},ww(t))}function Og(e=new Map,t=`map${++tR}`){return QM(e,{set:(n,i,s)=>n.get(i)===s?n:new Map(n).set(i,s),delete:(n,i)=>{const s=n=new Map(n);return s.delete(i)?s:n},clear:()=>new Map,change:(n,i)=>i(new Map(n))},ww(t))}const Kv=Ti({setCurrentTooltip:e=>e,resetCurrentTooltip:()=>null,turnOffById:e=>e},({onAction:e},t=null)=>(e("setCurrentTooltip",n=>t=n),e("resetCurrentTooltip",()=>t=null),e("turnOffById",n=>{(t==null?void 0:t.initiatorId)===n&&(t=null)}),t),"[Shared state] currentTooltipAtom");function SZ(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function CZ(e,t){e.classList?e.classList.add(t):SZ(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function KP(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function EZ(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=KP(e.className,t):e.setAttribute("class",KP(e.className&&e.className.baseVal||"",t))}const ZP={disabled:!1},rR=hn.createContext(null);var iR=function(t){return t.scrollTop},Gy="unmounted",Qh="exited",Yh="entering",Fm="entered",kE="exiting",wf=function(e){Bl(t,e);function t(i,s){var l;l=e.call(this,i,s)||this;var a=s,g=a&&!a.isMounting?i.enter:i.appear,_;return l.appearStatus=null,i.in?g?(_=Qh,l.appearStatus=Yh):_=Fm:i.unmountOnExit||i.mountOnEnter?_=Gy:_=Qh,l.state={status:_},l.nextCallback=null,l}t.getDerivedStateFromProps=function(s,l){var a=s.in;return a&&l.status===Gy?{status:Qh}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var l=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Yh&&a!==Fm&&(l=Yh):(a===Yh||a===Fm)&&(l=kE)}this.updateStatus(!1,l)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,l,a,g;return l=a=g=s,s!=null&&typeof s!="number"&&(l=s.exit,a=s.enter,g=s.appear!==void 0?s.appear:a),{exit:l,enter:a,appear:g}},n.updateStatus=function(s,l){if(s===void 0&&(s=!1),l!==null)if(this.cancelNextCallback(),l===Yh){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:K0.findDOMNode(this);a&&iR(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qh&&this.setState({status:Gy})},n.performEnter=function(s){var l=this,a=this.props.enter,g=this.context?this.context.isMounting:s,_=this.props.nodeRef?[g]:[K0.findDOMNode(this),g],w=_[0],C=_[1],A=this.getTimeouts(),I=g?A.appear:A.enter;if(!s&&!a||ZP.disabled){this.safeSetState({status:Fm},function(){l.props.onEntered(w)});return}this.props.onEnter(w,C),this.safeSetState({status:Yh},function(){l.props.onEntering(w,C),l.onTransitionEnd(I,function(){l.safeSetState({status:Fm},function(){l.props.onEntered(w,C)})})})},n.performExit=function(){var s=this,l=this.props.exit,a=this.getTimeouts(),g=this.props.nodeRef?void 0:K0.findDOMNode(this);if(!l||ZP.disabled){this.safeSetState({status:Qh},function(){s.props.onExited(g)});return}this.props.onExit(g),this.safeSetState({status:kE},function(){s.props.onExiting(g),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:Qh},function(){s.props.onExited(g)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,l){l=this.setNextCallback(l),this.setState(s,l)},n.setNextCallback=function(s){var l=this,a=!0;return this.nextCallback=function(g){a&&(a=!1,l.nextCallback=null,s(g))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,l){this.setNextCallback(l);var a=this.props.nodeRef?this.props.nodeRef.current:K0.findDOMNode(this),g=s==null&&!this.props.addEndListener;if(!a||g){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var _=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],w=_[0],C=_[1];this.props.addEndListener(w,C)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Gy)return null;var l=this.props,a=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var g=Ad(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return hn.createElement(rR.Provider,{value:null},typeof a=="function"?a(s,g):hn.cloneElement(hn.Children.only(a),g))},t}(hn.Component);wf.contextType=rR;wf.propTypes={};function Am(){}wf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Am,onEntering:Am,onEntered:Am,onExit:Am,onExiting:Am,onExited:Am};wf.UNMOUNTED=Gy;wf.EXITED=Qh;wf.ENTERING=Yh;wf.ENTERED=Fm;wf.EXITING=kE;const kZ=wf;var AZ=function(t,n){return t&&n&&n.split(" ").forEach(function(i){return CZ(t,i)})},bS=function(t,n){return t&&n&&n.split(" ").forEach(function(i){return EZ(t,i)})},rA=function(e){Bl(t,e);function t(){for(var i,s=arguments.length,l=new Array(s),a=0;a<s;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,i.appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(g,_){var w=i.resolveArguments(g,_),C=w[0],A=w[1];i.removeClasses(C,"exit"),i.addClass(C,A?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(g,_)},i.onEntering=function(g,_){var w=i.resolveArguments(g,_),C=w[0],A=w[1],I=A?"appear":"enter";i.addClass(C,I,"active"),i.props.onEntering&&i.props.onEntering(g,_)},i.onEntered=function(g,_){var w=i.resolveArguments(g,_),C=w[0],A=w[1],I=A?"appear":"enter";i.removeClasses(C,I),i.addClass(C,I,"done"),i.props.onEntered&&i.props.onEntered(g,_)},i.onExit=function(g){var _=i.resolveArguments(g),w=_[0];i.removeClasses(w,"appear"),i.removeClasses(w,"enter"),i.addClass(w,"exit","base"),i.props.onExit&&i.props.onExit(g)},i.onExiting=function(g){var _=i.resolveArguments(g),w=_[0];i.addClass(w,"exit","active"),i.props.onExiting&&i.props.onExiting(g)},i.onExited=function(g){var _=i.resolveArguments(g),w=_[0];i.removeClasses(w,"exit"),i.addClass(w,"exit","done"),i.props.onExited&&i.props.onExited(g)},i.resolveArguments=function(g,_){return i.props.nodeRef?[i.props.nodeRef.current,g]:[g,_]},i.getClassNames=function(g){var _=i.props.classNames,w=typeof _=="string",C=w&&_?_+"-":"",A=w?""+C+g:_[g],I=w?A+"-active":_[g+"Active"],O=w?A+"-done":_[g+"Done"];return{baseClassName:A,activeClassName:I,doneClassName:O}},i}var n=t.prototype;return n.addClass=function(s,l,a){var g=this.getClassNames(l)[a+"ClassName"],_=this.getClassNames("enter"),w=_.doneClassName;l==="appear"&&a==="done"&&w&&(g+=" "+w),a==="active"&&s&&iR(s),g&&(this.appliedClasses[l][a]=g,AZ(s,g))},n.removeClasses=function(s,l){var a=this.appliedClasses[l],g=a.base,_=a.active,w=a.done;this.appliedClasses[l]={},g&&bS(s,g),_&&bS(s,_),w&&bS(s,w)},n.render=function(){var s=this.props;s.classNames;var l=Ad(s,["classNames"]);return hn.createElement(kZ,Ca({},l,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(hn.Component);rA.defaultProps={classNames:""};rA.propTypes={};const PZ=rA;function Gp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}const TZ="_fadeEnter_1fjeq_1",IZ="_fadeEnterActive_1fjeq_5",OZ="_fadeExit_1fjeq_10",LZ="_fadeExitActive_1fjeq_14",p1={fadeEnter:TZ,fadeEnterActive:IZ,fadeExit:OZ,fadeExitActive:LZ},MZ={enter:p1.fadeEnter,enterActive:p1.fadeEnterActive,exit:p1.fadeExit,exitActive:p1.fadeExitActive},RZ=({children:e,...t})=>{const n=mt.useRef(null);return Ze(PZ,{...t,nodeRef:n,children:e(n)})};function FZ(e){if(!e)return"";let t=e;const n=/(.?.?https|.?.?http)(:\/\/)([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/gm,i=e.matchAll(n);let s=0;return[...i].forEach(l=>{const[a,g,,_,w]=l,C=l.index??0,A=a.length;if(a.startsWith("](")||a.indexOf("[http")>-1)return;const I=a.indexOf("http"),O=a.substring(I),D=a.substring(0,I),B=_.replace("www.",""),H=`${D}[${B}${w??""}](${O})`,R=DZ(t)(C+s,A,H);s+=H.length-A,t=R}),t}function DZ(e){return function(t,n,i){return t<0&&(t+=e.length,t<0&&(t=0)),e.slice(0,t)+(i||"")+e.slice(t+n)}}const oR=mt.memo(function(e){return Ze("a",{href:e.href,target:"_blank",rel:"noreferrer",onClick:zZ,children:e.children})});function zZ(e){e.stopPropagation()}oR.displayName="LinkRenderer";const XP=ZL(),BZ=Ti({_set:e=>e},({onAction:e,onInit:t,schedule:n,create:i},s=XP.location)=>(t(()=>{n(l=>{XP.listen(a=>{l(i("_set",a))})})}),e("_set",l=>s=l),s),"currentLocationAtom"),NZ=Ti({currentLocationAtom:BZ},({onChange:e,schedule:t,getUnlistedState:n})=>{e("currentLocationAtom",(i,s)=>{const l=n(Kv);i.pathname!==(s==null?void 0:s.pathname)&&(l!=null&&l.position)&&t(a=>{a(Kv.resetCurrentTooltip())})})}),$Z="_markdown_mj6ia_1",UZ={markdown:$Z};function aR(){const[e,{resetCurrentTooltip:t}]=iP(Kv);iP(NZ);const n=mt.useCallback(s=>{var l;t(),(l=e==null?void 0:e.onClose)==null||l.call(e,s,t)},[t,e]),i=mt.useCallback(s=>{var l;(l=e==null?void 0:e.onOuterClick)==null||l.call(e,s,t)},[t,e]);return Ze(RZ,{in:!!e,timeout:300,classNames:MZ,children:s=>Ze(Bb,{children:e&&Ze(UV,{transitionRef:s,position:e.position,hoverBehavior:e.hoverBehavior,getPlacement:e.position.predefinedPosition,classes:e.popupClasses,onClose:n,onOuterClick:i,children:typeof e.popup=="string"?Ze(XM,{components:{a:oR},className:UZ.markdown,children:FZ(e.popup)}):e.popup})})})}function Eu(e){return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function Vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jZ(e,t){if(Eu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(Eu(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sR(e){var t=jZ(e,"string");return Eu(t)==="symbol"?t:String(t)}function QP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,sR(i.key),i)}}function ql(e,t,n){return t&&QP(e.prototype,t),n&&QP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sw(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bx(e,t)}function v_(e,t){if(t&&(Eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gp(e)}function uc(e){return uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uc(e)}function Sf(e,t,n){return t=sR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VZ(e){if(Array.isArray(e))return e}function qZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function HZ(e,t){if(e){if(typeof e=="string")return YP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(e,t)}}function GZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WZ(e){return VZ(e)||qZ(e)||HZ(e)||GZ()}function JP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function eT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var KZ={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,n){console&&console[t]&&console[t].apply(console,n)}},ZZ=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vl(this,e),this.init(t,n)}return ql(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=n||KZ,this.options=i,this.debug=i.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return this.forward(i,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return this.forward(i,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return this.forward(i,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,i,s,l){return l&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(s).concat(this.prefix," ").concat(n[0])),this.logger[i](n))}},{key:"create",value:function(n){return new e(this.logger,eT(eT({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new e(this.logger,n)}}]),e}(),rc=new ZZ,Yp=function(){function e(){Vl(this,e),this.observers={}}return ql(e,[{key:"on",value:function(n,i){var s=this;return n.split(" ").forEach(function(l){s.observers[l]=s.observers[l]||[],s.observers[l].push(i)}),this}},{key:"off",value:function(n,i){if(this.observers[n]){if(!i){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(s){return s!==i})}}},{key:"emit",value:function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];if(this.observers[n]){var a=[].concat(this.observers[n]);a.forEach(function(_){_.apply(void 0,s)})}if(this.observers["*"]){var g=[].concat(this.observers["*"]);g.forEach(function(_){_.apply(_,[n].concat(s))})}}}]),e}();function My(){var e,t,n=new Promise(function(i,s){e=i,t=s});return n.resolve=e,n.reject=t,n}function tT(e){return e==null?"":""+e}function XZ(e,t,n){e.forEach(function(i){t[i]&&(n[i]=t[i])})}function iA(e,t,n){function i(g){return g&&g.indexOf("###")>-1?g.replace(/###/g,"."):g}function s(){return!e||typeof e=="string"}for(var l=typeof t!="string"?[].concat(t):t.split(".");l.length>1;){if(s())return{};var a=i(l.shift());!e[a]&&n&&(e[a]=new n),Object.prototype.hasOwnProperty.call(e,a)?e=e[a]:e={}}return s()?{}:{obj:e,k:i(l.shift())}}function nT(e,t,n){var i=iA(e,t,Object),s=i.obj,l=i.k;s[l]=n}function QZ(e,t,n,i){var s=iA(e,t,Object),l=s.obj,a=s.k;l[a]=l[a]||[],i&&(l[a]=l[a].concat(n)),i||l[a].push(n)}function Vx(e,t){var n=iA(e,t),i=n.obj,s=n.k;if(i)return i[s]}function rT(e,t,n){var i=Vx(e,n);return i!==void 0?i:Vx(t,n)}function lR(e,t,n){for(var i in t)i!=="__proto__"&&i!=="constructor"&&(i in e?typeof e[i]=="string"||e[i]instanceof String||typeof t[i]=="string"||t[i]instanceof String?n&&(e[i]=t[i]):lR(e[i],t[i],n):e[i]=t[i]);return e}function Pm(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var YZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function JZ(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return YZ[t]}):e}var Cw=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,eX=[" ",",","?","!",";"];function tX(e,t,n){t=t||"",n=n||"";var i=eX.filter(function(g){return t.indexOf(g)<0&&n.indexOf(g)<0});if(i.length===0)return!0;var s=new RegExp("(".concat(i.map(function(g){return g==="?"?"\\?":g}).join("|"),")")),l=!s.test(e);if(!l){var a=e.indexOf(n);a>0&&!s.test(e.substring(0,a))&&(l=!0)}return l}function iT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function h1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function nX(e){var t=rX();return function(){var i=uc(e),s;if(t){var l=uc(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return v_(this,s)}}function rX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uR(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var i=t.split(n),s=e,l=0;l<i.length;++l){if(!s||typeof s[i[l]]=="string"&&l+1<i.length)return;if(s[i[l]]===void 0){for(var a=2,g=i.slice(l,l+a).join(n),_=s[g];_===void 0&&i.length>l+a;)a++,g=i.slice(l,l+a).join(n),_=s[g];if(_===void 0)return;if(_===null)return null;if(t.endsWith(g)){if(typeof _=="string")return _;if(g&&typeof _[g]=="string")return _[g]}var w=i.slice(l+a).join(n);return w?uR(_,w,n):void 0}s=s[i[l]]}return s}}var iX=function(e){Sw(n,e);var t=nX(n);function n(i){var s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Vl(this,n),s=t.call(this),Cw&&Yp.call(Gp(s)),s.data=i||{},s.options=l,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.options.ignoreJSONStructure===void 0&&(s.options.ignoreJSONStructure=!0),s}return ql(n,[{key:"addNamespaces",value:function(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}},{key:"removeNamespaces",value:function(s){var l=this.options.ns.indexOf(s);l>-1&&this.options.ns.splice(l,1)}},{key:"getResource",value:function(s,l,a){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},_=g.keySeparator!==void 0?g.keySeparator:this.options.keySeparator,w=g.ignoreJSONStructure!==void 0?g.ignoreJSONStructure:this.options.ignoreJSONStructure,C=[s,l];a&&typeof a!="string"&&(C=C.concat(a)),a&&typeof a=="string"&&(C=C.concat(_?a.split(_):a)),s.indexOf(".")>-1&&(C=s.split("."));var A=Vx(this.data,C);return A||!w||typeof a!="string"?A:uR(this.data&&this.data[s]&&this.data[s][l],a,_)}},{key:"addResource",value:function(s,l,a,g){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},w=this.options.keySeparator;w===void 0&&(w=".");var C=[s,l];a&&(C=C.concat(w?a.split(w):a)),s.indexOf(".")>-1&&(C=s.split("."),g=l,l=C[1]),this.addNamespaces(l),nT(this.data,C,g),_.silent||this.emit("added",s,l,a,g)}},{key:"addResources",value:function(s,l,a){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var _ in a)(typeof a[_]=="string"||Object.prototype.toString.apply(a[_])==="[object Array]")&&this.addResource(s,l,_,a[_],{silent:!0});g.silent||this.emit("added",s,l,a)}},{key:"addResourceBundle",value:function(s,l,a,g,_){var w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},C=[s,l];s.indexOf(".")>-1&&(C=s.split("."),g=a,a=l,l=C[1]),this.addNamespaces(l);var A=Vx(this.data,C)||{};g?lR(A,a,_):A=h1(h1({},A),a),nT(this.data,C,A),w.silent||this.emit("added",s,l,a)}},{key:"removeResourceBundle",value:function(s,l){this.hasResourceBundle(s,l)&&delete this.data[s][l],this.removeNamespaces(l),this.emit("removed",s,l)}},{key:"hasResourceBundle",value:function(s,l){return this.getResource(s,l)!==void 0}},{key:"getResourceBundle",value:function(s,l){return l||(l=this.options.defaultNS),this.options.compatibilityAPI==="v1"?h1(h1({},{}),this.getResource(s,l)):this.getResource(s,l)}},{key:"getDataByLanguage",value:function(s){return this.data[s]}},{key:"hasLanguageSomeTranslations",value:function(s){var l=this.getDataByLanguage(s),a=l&&Object.keys(l)||[];return!!a.find(function(g){return l[g]&&Object.keys(l[g]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(Yp),cR={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,n,i,s,l){var a=this;return t.forEach(function(g){a.processors[g]&&(n=a.processors[g].process(n,i,s,l))}),n}};function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function oX(e){var t=aX();return function(){var i=uc(e),s;if(t){var l=uc(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return v_(this,s)}}function aX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var aT={},sT=function(e){Sw(n,e);var t=oX(n);function n(i){var s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vl(this,n),s=t.call(this),Cw&&Yp.call(Gp(s)),XZ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,Gp(s)),s.options=l,s.options.keySeparator===void 0&&(s.options.keySeparator="."),s.logger=rc.create("translator"),s}return ql(n,[{key:"changeLanguage",value:function(s){s&&(this.language=s)}},{key:"exists",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(s==null)return!1;var a=this.resolve(s,l);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(s,l){var a=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var g=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,_=l.ns||this.options.defaultNS||[],w=a&&s.indexOf(a)>-1,C=!this.options.userDefinedKeySeparator&&!l.keySeparator&&!this.options.userDefinedNsSeparator&&!l.nsSeparator&&!tX(s,a,g);if(w&&!C){var A=s.match(this.interpolator.nestingRegexp);if(A&&A.length>0)return{key:s,namespaces:_};var I=s.split(a);(a!==g||a===g&&this.options.ns.indexOf(I[0])>-1)&&(_=I.shift()),s=I.join(g)}return typeof _=="string"&&(_=[_]),{key:s,namespaces:_}}},{key:"translate",value:function(s,l,a){var g=this;if(Eu(l)!=="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),l||(l={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);var _=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,w=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,C=this.extractFromKey(s[s.length-1],l),A=C.key,I=C.namespaces,O=I[I.length-1],D=l.lng||this.language,B=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(D&&D.toLowerCase()==="cimode"){if(B){var H=l.nsSeparator||this.options.nsSeparator;return _?(R.res="".concat(O).concat(H).concat(A),R):"".concat(O).concat(H).concat(A)}return _?(R.res=A,R):A}var R=this.resolve(s,l),U=R&&R.res,q=R&&R.usedKey||A,Y=R&&R.exactUsedKey||A,se=Object.prototype.toString.apply(U),W=["[object Number]","[object Function]","[object RegExp]"],ce=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,xe=!this.i18nFormat||this.i18nFormat.handleAsObject,Me=typeof U!="string"&&typeof U!="boolean"&&typeof U!="number";if(xe&&U&&Me&&W.indexOf(se)<0&&!(typeof ce=="string"&&se==="[object Array]")){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var $e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(q,U,ns(ns({},l),{},{ns:I})):"key '".concat(A," (").concat(this.language,")' returned an object instead of string.");return _?(R.res=$e,R):$e}if(w){var Le=se==="[object Array]",Ge=Le?[]:{},Ye=Le?Y:q;for(var ht in U)if(Object.prototype.hasOwnProperty.call(U,ht)){var Lt="".concat(Ye).concat(w).concat(ht);Ge[ht]=this.translate(Lt,ns(ns({},l),{joinArrays:!1,ns:I})),Ge[ht]===Lt&&(Ge[ht]=U[ht])}U=Ge}}else if(xe&&typeof ce=="string"&&se==="[object Array]")U=U.join(ce),U&&(U=this.extendTranslation(U,s,l,a));else{var Dt=!1,qt=!1,Ne=l.count!==void 0&&typeof l.count!="string",ve=n.hasDefaultValue(l),_e=Ne?this.pluralResolver.getSuffix(D,l.count,l):"",K=l["defaultValue".concat(_e)]||l.defaultValue;!this.isValidLookup(U)&&ve&&(Dt=!0,U=K),this.isValidLookup(U)||(qt=!0,U=A);var ae=l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,lt=ae&&qt?void 0:U,Ot=ve&&K!==U&&this.options.updateMissing;if(qt||Dt||Ot){if(this.logger.log(Ot?"updateKey":"missingKey",D,O,A,Ot?K:U),w){var Ht=this.resolve(A,ns(ns({},l),{},{keySeparator:!1}));Ht&&Ht.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Ut=[],Kt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Kt&&Kt[0])for(var cn=0;cn<Kt.length;cn++)Ut.push(Kt[cn]);else this.options.saveMissingTo==="all"?Ut=this.languageUtils.toResolveHierarchy(l.lng||this.language):Ut.push(l.lng||this.language);var sn=function(pr,li,dn){var $r=ve&&dn!==U?dn:lt;g.options.missingKeyHandler?g.options.missingKeyHandler(pr,O,li,$r,Ot,l):g.backendConnector&&g.backendConnector.saveMissing&&g.backendConnector.saveMissing(pr,O,li,$r,Ot,l),g.emit("missingKey",pr,O,li,U)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Ne?Ut.forEach(function(wr){g.pluralResolver.getSuffixes(wr,l).forEach(function(pr){sn([wr],A+pr,l["defaultValue".concat(pr)]||K)})}):sn(Ut,A,K))}U=this.extendTranslation(U,s,l,R,a),qt&&U===A&&this.options.appendNamespaceToMissingKey&&(U="".concat(O,":").concat(A)),(qt||Dt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?U=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(O,":").concat(A):A,Dt?U:void 0):U=this.options.parseMissingKeyHandler(U))}return _?(R.res=U,R):U}},{key:"extendTranslation",value:function(s,l,a,g,_){var w=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,ns(ns({},this.options.interpolation.defaultVariables),a),g.usedLng,g.usedNS,g.usedKey,{resolved:g});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(ns(ns({},a),{interpolation:ns(ns({},this.options.interpolation),a.interpolation)}));var C=typeof s=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),A;if(C){var I=s.match(this.interpolator.nestingRegexp);A=I&&I.length}var O=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(O=ns(ns({},this.options.interpolation.defaultVariables),O)),s=this.interpolator.interpolate(s,O,a.lng||this.language,a),C){var D=s.match(this.interpolator.nestingRegexp),B=D&&D.length;A<B&&(a.nest=!1)}a.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var U=arguments.length,q=new Array(U),Y=0;Y<U;Y++)q[Y]=arguments[Y];return _&&_[0]===q[0]&&!a.context?(w.logger.warn("It seems you are nesting recursively key: ".concat(q[0]," in key: ").concat(l[0])),null):w.translate.apply(w,q.concat([l]))},a)),a.interpolation&&this.interpolator.reset()}var H=a.postProcess||this.options.postProcess,R=typeof H=="string"?[H]:H;return s!=null&&R&&R.length&&a.applyPostProcessor!==!1&&(s=cR.handle(R,s,l,this.options&&this.options.postProcessPassResolved?ns({i18nResolved:g},a):a,this)),s}},{key:"resolve",value:function(s){var l=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g,_,w,C,A;return typeof s=="string"&&(s=[s]),s.forEach(function(I){if(!l.isValidLookup(g)){var O=l.extractFromKey(I,a),D=O.key;_=D;var B=O.namespaces;l.options.fallbackNS&&(B=B.concat(l.options.fallbackNS));var H=a.count!==void 0&&typeof a.count!="string",R=H&&!a.ordinal&&a.count===0&&l.pluralResolver.shouldUseIntlApi(),U=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",q=a.lngs?a.lngs:l.languageUtils.toResolveHierarchy(a.lng||l.language,a.fallbackLng);B.forEach(function(Y){l.isValidLookup(g)||(A=Y,!aT["".concat(q[0],"-").concat(Y)]&&l.utils&&l.utils.hasLoadedNamespace&&!l.utils.hasLoadedNamespace(A)&&(aT["".concat(q[0],"-").concat(Y)]=!0,l.logger.warn('key "'.concat(_,'" for languages "').concat(q.join(", "),`" won't get resolved as namespace "`).concat(A,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),q.forEach(function(se){if(!l.isValidLookup(g)){C=se;var W=[D];if(l.i18nFormat&&l.i18nFormat.addLookupKeys)l.i18nFormat.addLookupKeys(W,D,se,Y,a);else{var ce;H&&(ce=l.pluralResolver.getSuffix(se,a.count,a));var xe="".concat(l.options.pluralSeparator,"zero");if(H&&(W.push(D+ce),R&&W.push(D+xe)),U){var Me="".concat(D).concat(l.options.contextSeparator).concat(a.context);W.push(Me),H&&(W.push(Me+ce),R&&W.push(Me+xe))}}for(var $e;$e=W.pop();)l.isValidLookup(g)||(w=$e,g=l.getResource(se,Y,$e,a))}}))})}}),{res:g,usedKey:_,exactUsedKey:w,usedLng:C,usedNS:A}}},{key:"isValidLookup",value:function(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}},{key:"getResource",value:function(s,l,a){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,l,a,g):this.resourceStore.getResource(s,l,a,g)}}],[{key:"hasDefaultValue",value:function(s){var l="defaultValue";for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&l===a.substring(0,l.length)&&s[a]!==void 0)return!0;return!1}}]),n}(Yp);function wS(e){return e.charAt(0).toUpperCase()+e.slice(1)}var lT=function(){function e(t){Vl(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=rc.create("languageUtils")}return ql(e,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var i=n.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var i=n.split("-");return this.formatLanguageCode(i[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var i=["hans","hant","latn","cyrl","cans","mong","arab"],s=n.split("-");return this.options.lowerCaseLng?s=s.map(function(l){return l.toLowerCase()}):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),i.indexOf(s[1].toLowerCase())>-1&&(s[1]=wS(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),i.indexOf(s[1].toLowerCase())>-1&&(s[1]=wS(s[1].toLowerCase())),i.indexOf(s[2].toLowerCase())>-1&&(s[2]=wS(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var i=this;if(!n)return null;var s;return n.forEach(function(l){if(!s){var a=i.formatLanguageCode(l);(!i.options.supportedLngs||i.isSupportedCode(a))&&(s=a)}}),!s&&this.options.supportedLngs&&n.forEach(function(l){if(!s){var a=i.getLanguagePartFromCode(l);if(i.isSupportedCode(a))return s=a;s=i.options.supportedLngs.find(function(g){if(g.indexOf(a)===0)return g})}}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}},{key:"getFallbackCodes",value:function(n,i){if(!n)return[];if(typeof n=="function"&&(n=n(i)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!i)return n.default||[];var s=n[i];return s||(s=n[this.getScriptPartFromCode(i)]),s||(s=n[this.formatLanguageCode(i)]),s||(s=n[this.getLanguagePartFromCode(i)]),s||(s=n.default),s||[]}},{key:"toResolveHierarchy",value:function(n,i){var s=this,l=this.getFallbackCodes(i||this.options.fallbackLng||[],n),a=[],g=function(w){w&&(s.isSupportedCode(w)?a.push(w):s.logger.warn("rejecting language code not found in supportedLngs: ".concat(w)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&g(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&g(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&g(this.getLanguagePartFromCode(n))):typeof n=="string"&&g(this.formatLanguageCode(n)),l.forEach(function(_){a.indexOf(_)<0&&g(s.formatLanguageCode(_))}),a}}]),e}(),sX=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],lX={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}},uX=["v1","v2","v3"],uT={zero:0,one:1,two:2,few:3,many:4,other:5};function cX(){var e={};return sX.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:lX[t.fc]}})}),e}var fX=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vl(this,e),this.languageUtils=t,this.options=n,this.logger=rc.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=cX()}return ql(e,[{key:"addRule",value:function(n,i){this.rules[n]=i}},{key:"getRule",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:i.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(n,i);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,s).map(function(l){return"".concat(i).concat(l)})}},{key:"getSuffixes",value:function(n){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=this.getRule(n,s);return l?this.shouldUseIntlApi()?l.resolvedOptions().pluralCategories.sort(function(a,g){return uT[a]-uT[g]}).map(function(a){return"".concat(i.options.prepend).concat(a)}):l.numbers.map(function(a){return i.getSuffix(n,a,s)}):[]}},{key:"getSuffix",value:function(n,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=this.getRule(n,s);return l?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(l.select(i)):this.getSuffixRetroCompatible(l,i):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,i){var s=this,l=n.noAbs?n.plurals(i):n.plurals(Math.abs(i)),a=n.numbers[l];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var g=function(){return s.options.prepend&&a.toString()?s.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):g():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?g():this.options.prepend&&l.toString()?this.options.prepend+l.toString():l.toString()}},{key:"shouldUseIntlApi",value:function(){return!uX.includes(this.options.compatibilityJSON)}}]),e}();function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function yu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var pX=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vl(this,e),this.logger=rc.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(n){return n},this.init(t)}return ql(e,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var i=n.interpolation;this.escape=i.escape!==void 0?i.escape:JZ,this.escapeValue=i.escapeValue!==void 0?i.escapeValue:!0,this.useRawValueToEscape=i.useRawValueToEscape!==void 0?i.useRawValueToEscape:!1,this.prefix=i.prefix?Pm(i.prefix):i.prefixEscaped||"{{",this.suffix=i.suffix?Pm(i.suffix):i.suffixEscaped||"}}",this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||",",this.unescapePrefix=i.unescapeSuffix?"":i.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":i.unescapeSuffix||"",this.nestingPrefix=i.nestingPrefix?Pm(i.nestingPrefix):i.nestingPrefixEscaped||Pm("$t("),this.nestingSuffix=i.nestingSuffix?Pm(i.nestingSuffix):i.nestingSuffixEscaped||Pm(")"),this.nestingOptionsSeparator=i.nestingOptionsSeparator?i.nestingOptionsSeparator:i.nestingOptionsSeparator||",",this.maxReplaces=i.maxReplaces?i.maxReplaces:1e3,this.alwaysFormat=i.alwaysFormat!==void 0?i.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var i="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(i,"g");var s="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(s,"g")}},{key:"interpolate",value:function(n,i,s,l){var a=this,g,_,w,C=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function A(H){return H.replace(/\$/g,"$$$$")}var I=function(R){if(R.indexOf(a.formatSeparator)<0){var U=rT(i,C,R);return a.alwaysFormat?a.format(U,void 0,s,yu(yu(yu({},l),i),{},{interpolationkey:R})):U}var q=R.split(a.formatSeparator),Y=q.shift().trim(),se=q.join(a.formatSeparator).trim();return a.format(rT(i,C,Y),se,s,yu(yu(yu({},l),i),{},{interpolationkey:Y}))};this.resetRegExp();var O=l&&l.missingInterpolationHandler||this.options.missingInterpolationHandler,D=l&&l.interpolation&&l.interpolation.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,B=[{regex:this.regexpUnescape,safeValue:function(R){return A(R)}},{regex:this.regexp,safeValue:function(R){return a.escapeValue?A(a.escape(R)):A(R)}}];return B.forEach(function(H){for(w=0;g=H.regex.exec(n);){var R=g[1].trim();if(_=I(R),_===void 0)if(typeof O=="function"){var U=O(n,g,l);_=typeof U=="string"?U:""}else if(l&&l.hasOwnProperty(R))_="";else if(D){_=g[0];continue}else a.logger.warn("missed to pass in variable ".concat(R," for interpolating ").concat(n)),_="";else typeof _!="string"&&!a.useRawValueToEscape&&(_=tT(_));var q=H.safeValue(_);if(n=n.replace(g[0],q),D?(H.regex.lastIndex+=_.length,H.regex.lastIndex-=g[0].length):H.regex.lastIndex=0,w++,w>=a.maxReplaces)break}}),n}},{key:"nest",value:function(n,i){var s=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,g,_;function w(O,D){var B=this.nestingOptionsSeparator;if(O.indexOf(B)<0)return O;var H=O.split(new RegExp("".concat(B,"[ ]*{"))),R="{".concat(H[1]);O=H[0],R=this.interpolate(R,_);var U=R.match(/'/g),q=R.match(/"/g);(U&&U.length%2===0&&!q||q.length%2!==0)&&(R=R.replace(/'/g,'"'));try{_=JSON.parse(R),D&&(_=yu(yu({},D),_))}catch(Y){return this.logger.warn("failed parsing options string in nesting for key ".concat(O),Y),"".concat(O).concat(B).concat(R)}return delete _.defaultValue,O}for(;a=this.nestingRegexp.exec(n);){var C=[];_=yu({},l),_=_.replace&&typeof _.replace!="string"?_.replace:_,_.applyPostProcessor=!1,delete _.defaultValue;var A=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var I=a[1].split(this.formatSeparator).map(function(O){return O.trim()});a[1]=I.shift(),C=I,A=!0}if(g=i(w.call(this,a[1].trim(),_),_),g&&a[0]===n&&typeof g!="string")return g;typeof g!="string"&&(g=tT(g)),g||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(n)),g=""),A&&(g=C.reduce(function(O,D){return s.format(O,D,l.lng,yu(yu({},l),{},{interpolationkey:a[1].trim()}))},g.trim())),n=n.replace(a[0],g),this.regexp.lastIndex=0}return n}}]),e}();function fT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Sp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function hX(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var i=e.split("(");t=i[0].toLowerCase().trim();var s=i[1].substring(0,i[1].length-1);if(t==="currency"&&s.indexOf(":")<0)n.currency||(n.currency=s.trim());else if(t==="relativetime"&&s.indexOf(":")<0)n.range||(n.range=s.trim());else{var l=s.split(";");l.forEach(function(a){if(a){var g=a.split(":"),_=WZ(g),w=_[0],C=_.slice(1),A=C.join(":").trim().replace(/^'+|'+$/g,"");n[w.trim()]||(n[w.trim()]=A),A==="false"&&(n[w.trim()]=!1),A==="true"&&(n[w.trim()]=!0),isNaN(A)||(n[w.trim()]=parseInt(A,10))}})}}return{formatName:t,formatOptions:n}}function Tm(e){var t={};return function(i,s,l){var a=s+JSON.stringify(l),g=t[a];return g||(g=e(s,l),t[a]=g),g(i)}}var dX=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vl(this,e),this.logger=rc.create("formatter"),this.options=t,this.formats={number:Tm(function(n,i){var s=new Intl.NumberFormat(n,i);return function(l){return s.format(l)}}),currency:Tm(function(n,i){var s=new Intl.NumberFormat(n,Sp(Sp({},i),{},{style:"currency"}));return function(l){return s.format(l)}}),datetime:Tm(function(n,i){var s=new Intl.DateTimeFormat(n,Sp({},i));return function(l){return s.format(l)}}),relativetime:Tm(function(n,i){var s=new Intl.RelativeTimeFormat(n,Sp({},i));return function(l){return s.format(l,i.range||"day")}}),list:Tm(function(n,i){var s=new Intl.ListFormat(n,Sp({},i));return function(l){return s.format(l)}})},this.init(t)}return ql(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},s=i.interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}},{key:"add",value:function(n,i){this.formats[n.toLowerCase().trim()]=i}},{key:"addCached",value:function(n,i){this.formats[n.toLowerCase().trim()]=Tm(i)}},{key:"format",value:function(n,i,s,l){var a=this,g=i.split(this.formatSeparator),_=g.reduce(function(w,C){var A=hX(C),I=A.formatName,O=A.formatOptions;if(a.formats[I]){var D=w;try{var B=l&&l.formatParams&&l.formatParams[l.interpolationkey]||{},H=B.locale||B.lng||l.locale||l.lng||s;D=a.formats[I](w,H,Sp(Sp(Sp({},O),l),B))}catch(R){a.logger.warn(R)}return D}else a.logger.warn("there was no format function for ".concat(I));return w},n);return _}}]),e}();function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function hT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function mX(e){var t=gX();return function(){var i=uc(e),s;if(t){var l=uc(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return v_(this,s)}}function gX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yX(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var vX=function(e){Sw(n,e);var t=mX(n);function n(i,s,l){var a,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Vl(this,n),a=t.call(this),Cw&&Yp.call(Gp(a)),a.backend=i,a.store=s,a.services=l,a.languageUtils=l.languageUtils,a.options=g,a.logger=rc.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=g.maxParallelReads||10,a.readingCalls=0,a.maxRetries=g.maxRetries>=0?g.maxRetries:5,a.retryTimeout=g.retryTimeout>=1?g.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(l,g.backend,g),a}return ql(n,[{key:"queueLoad",value:function(s,l,a,g){var _=this,w={},C={},A={},I={};return s.forEach(function(O){var D=!0;l.forEach(function(B){var H="".concat(O,"|").concat(B);!a.reload&&_.store.hasResourceBundle(O,B)?_.state[H]=2:_.state[H]<0||(_.state[H]===1?C[H]===void 0&&(C[H]=!0):(_.state[H]=1,D=!1,C[H]===void 0&&(C[H]=!0),w[H]===void 0&&(w[H]=!0),I[B]===void 0&&(I[B]=!0)))}),D||(A[O]=!0)}),(Object.keys(w).length||Object.keys(C).length)&&this.queue.push({pending:C,pendingCount:Object.keys(C).length,loaded:{},errors:[],callback:g}),{toLoad:Object.keys(w),pending:Object.keys(C),toLoadLanguages:Object.keys(A),toLoadNamespaces:Object.keys(I)}}},{key:"loaded",value:function(s,l,a){var g=s.split("|"),_=g[0],w=g[1];l&&this.emit("failedLoading",_,w,l),a&&this.store.addResourceBundle(_,w,a),this.state[s]=l?-1:2;var C={};this.queue.forEach(function(A){QZ(A.loaded,[_],w),yX(A,s),l&&A.errors.push(l),A.pendingCount===0&&!A.done&&(Object.keys(A.loaded).forEach(function(I){C[I]||(C[I]={});var O=A.loaded[I];O.length&&O.forEach(function(D){C[I][D]===void 0&&(C[I][D]=!0)})}),A.done=!0,A.errors.length?A.callback(A.errors):A.callback())}),this.emit("loaded",C),this.queue=this.queue.filter(function(A){return!A.done})}},{key:"read",value:function(s,l,a){var g=this,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,C=arguments.length>5?arguments[5]:void 0;if(!s.length)return C(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:l,fcName:a,tried:_,wait:w,callback:C});return}this.readingCalls++;var A=function(B,H){if(g.readingCalls--,g.waitingReads.length>0){var R=g.waitingReads.shift();g.read(R.lng,R.ns,R.fcName,R.tried,R.wait,R.callback)}if(B&&H&&_<g.maxRetries){setTimeout(function(){g.read.call(g,s,l,a,_+1,w*2,C)},w);return}C(B,H)},I=this.backend[a].bind(this.backend);if(I.length===2){try{var O=I(s,l);O&&typeof O.then=="function"?O.then(function(D){return A(null,D)}).catch(A):A(null,O)}catch(D){A(D)}return}return I(s,l,A)}},{key:"prepareLoading",value:function(s,l){var a=this,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),_&&_();typeof s=="string"&&(s=this.languageUtils.toResolveHierarchy(s)),typeof l=="string"&&(l=[l]);var w=this.queueLoad(s,l,g,_);if(!w.toLoad.length)return w.pending.length||_(),null;w.toLoad.forEach(function(C){a.loadOne(C)})}},{key:"load",value:function(s,l,a){this.prepareLoading(s,l,{},a)}},{key:"reload",value:function(s,l,a){this.prepareLoading(s,l,{reload:!0},a)}},{key:"loadOne",value:function(s){var l=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",g=s.split("|"),_=g[0],w=g[1];this.read(_,w,"read",void 0,void 0,function(C,A){C&&l.logger.warn("".concat(a,"loading namespace ").concat(w," for language ").concat(_," failed"),C),!C&&A&&l.logger.log("".concat(a,"loaded namespace ").concat(w," for language ").concat(_),A),l.loaded(s,C,A)})}},{key:"saveMissing",value:function(s,l,a,g,_){var w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},C=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(l)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(l,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var A=hT(hT({},w),{},{isUpdate:_}),I=this.backend.create.bind(this.backend);if(I.length<6)try{var O;I.length===5?O=I(s,l,a,g,A):O=I(s,l,a,g),O&&typeof O.then=="function"?O.then(function(D){return C(null,D)}).catch(C):C(null,O)}catch(D){C(D)}else I(s,l,a,g,C,A)}!s||!s[0]||this.store.addResource(s[0],l,a,g)}}}]),n}(Yp);function dT(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var n={};if(Eu(t[1])==="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),Eu(t[2])==="object"||Eu(t[3])==="object"){var i=t[3]||t[2];Object.keys(i).forEach(function(s){n[s]=i[s]})}return n},interpolation:{escapeValue:!0,format:function(t,n,i,s){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function mT(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function gT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _X(e){var t=xX();return function(){var i=uc(e),s;if(t){var l=uc(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return v_(this,s)}}function xX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d1(){}function bX(e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(function(n){typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}var qx=function(e){Sw(n,e);var t=_X(n);function n(){var i,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;if(Vl(this,n),i=t.call(this),Cw&&Yp.call(Gp(i)),i.options=mT(s),i.services={},i.logger=rc,i.modules={external:[]},bX(Gp(i)),l&&!i.isInitialized&&!s.isClone){if(!i.options.initImmediate)return i.init(s,l),v_(i,Gp(i));setTimeout(function(){i.init(s,l)},0)}return i}return ql(n,[{key:"init",value:function(){var s=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof l=="function"&&(a=l,l={}),!l.defaultNS&&l.defaultNS!==!1&&l.ns&&(typeof l.ns=="string"?l.defaultNS=l.ns:l.ns.indexOf("translation")<0&&(l.defaultNS=l.ns[0]));var g=dT();this.options=Yu(Yu(Yu({},g),this.options),mT(l)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Yu(Yu({},g.interpolation),this.options.interpolation)),l.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=l.keySeparator),l.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=l.nsSeparator);function _(R){return R?typeof R=="function"?new R:R:null}if(!this.options.isClone){this.modules.logger?rc.init(_(this.modules.logger),this.options):rc.init(null,this.options);var w;this.modules.formatter?w=this.modules.formatter:typeof Intl<"u"&&(w=dX);var C=new lT(this.options);this.store=new iX(this.options.resources,this.options);var A=this.services;A.logger=rc,A.resourceStore=this.store,A.languageUtils=C,A.pluralResolver=new fX(C,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),w&&(!this.options.interpolation.format||this.options.interpolation.format===g.interpolation.format)&&(A.formatter=_(w),A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new pX(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new vX(_(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",function(R){for(var U=arguments.length,q=new Array(U>1?U-1:0),Y=1;Y<U;Y++)q[Y-1]=arguments[Y];s.emit.apply(s,[R].concat(q))}),this.modules.languageDetector&&(A.languageDetector=_(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=_(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new sT(this.services,this.options),this.translator.on("*",function(R){for(var U=arguments.length,q=new Array(U>1?U-1:0),Y=1;Y<U;Y++)q[Y-1]=arguments[Y];s.emit.apply(s,[R].concat(q))}),this.modules.external.forEach(function(R){R.init&&R.init(s)})}if(this.format=this.options.interpolation.format,a||(a=d1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var I=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);I.length>0&&I[0]!=="dev"&&(this.options.lng=I[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var O=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];O.forEach(function(R){s[R]=function(){var U;return(U=s.store)[R].apply(U,arguments)}});var D=["addResource","addResources","addResourceBundle","removeResourceBundle"];D.forEach(function(R){s[R]=function(){var U;return(U=s.store)[R].apply(U,arguments),s}});var B=My(),H=function(){var U=function(Y,se){s.isInitialized&&!s.initializedStoreOnce&&s.logger.warn("init: i18next is already initialized. You should call init just once!"),s.isInitialized=!0,s.options.isClone||s.logger.log("initialized",s.options),s.emit("initialized",s.options),B.resolve(se),a(Y,se)};if(s.languages&&s.options.compatibilityAPI!=="v1"&&!s.isInitialized)return U(null,s.t.bind(s));s.changeLanguage(s.options.lng,U)};return this.options.resources||!this.options.initImmediate?H():setTimeout(H,0),B}},{key:"loadResources",value:function(s){var l=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d1,g=a,_=typeof s=="string"?s:this.language;if(typeof s=="function"&&(g=s),!this.options.resources||this.options.partialBundledLanguages){if(_&&_.toLowerCase()==="cimode")return g();var w=[],C=function(O){if(O){var D=l.services.languageUtils.toResolveHierarchy(O);D.forEach(function(B){w.indexOf(B)<0&&w.push(B)})}};if(_)C(_);else{var A=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);A.forEach(function(I){return C(I)})}this.options.preload&&this.options.preload.forEach(function(I){return C(I)}),this.services.backendConnector.load(w,this.options.ns,function(I){!I&&!l.resolvedLanguage&&l.language&&l.setResolvedLanguage(l.language),g(I)})}else g(null)}},{key:"reloadResources",value:function(s,l,a){var g=My();return s||(s=this.languages),l||(l=this.options.ns),a||(a=d1),this.services.backendConnector.reload(s,l,function(_){g.resolve(),a(_)}),g}},{key:"use",value:function(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&cR.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}},{key:"setResolvedLanguage",value:function(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1))for(var l=0;l<this.languages.length;l++){var a=this.languages[l];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(s,l){var a=this;this.isLanguageChangingTo=s;var g=My();this.emit("languageChanging",s);var _=function(I){a.language=I,a.languages=a.services.languageUtils.toResolveHierarchy(I),a.resolvedLanguage=void 0,a.setResolvedLanguage(I)},w=function(I,O){O?(_(O),a.translator.changeLanguage(O),a.isLanguageChangingTo=void 0,a.emit("languageChanged",O),a.logger.log("languageChanged",O)):a.isLanguageChangingTo=void 0,g.resolve(function(){return a.t.apply(a,arguments)}),l&&l(I,function(){return a.t.apply(a,arguments)})},C=function(I){!s&&!I&&a.services.languageDetector&&(I=[]);var O=typeof I=="string"?I:a.services.languageUtils.getBestMatchFromCodes(I);O&&(a.language||_(O),a.translator.language||a.translator.changeLanguage(O),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(O)),a.loadResources(O,function(D){w(D,O)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?C(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(C):this.services.languageDetector.detect(C):C(s),g}},{key:"getFixedT",value:function(s,l,a){var g=this,_=function w(C,A){var I;if(Eu(A)!=="object"){for(var O=arguments.length,D=new Array(O>2?O-2:0),B=2;B<O;B++)D[B-2]=arguments[B];I=g.options.overloadTranslationOptionHandler([C,A].concat(D))}else I=Yu({},A);I.lng=I.lng||w.lng,I.lngs=I.lngs||w.lngs,I.ns=I.ns||w.ns,I.keyPrefix=I.keyPrefix||a||w.keyPrefix;var H=g.options.keySeparator||".",R;return I.keyPrefix&&Array.isArray(C)?R=C.map(function(U){return"".concat(I.keyPrefix).concat(H).concat(U)}):R=I.keyPrefix?"".concat(I.keyPrefix).concat(H).concat(C):C,g.t(R,I)};return typeof s=="string"?_.lng=s:_.lngs=s,_.ns=l,_.keyPrefix=a,_}},{key:"t",value:function(){var s;return this.translator&&(s=this.translator).translate.apply(s,arguments)}},{key:"exists",value:function(){var s;return this.translator&&(s=this.translator).exists.apply(s,arguments)}},{key:"setDefaultNamespace",value:function(s){this.options.defaultNS=s}},{key:"hasLoadedNamespace",value:function(s){var l=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var g=this.resolvedLanguage||this.languages[0],_=this.options?this.options.fallbackLng:!1,w=this.languages[this.languages.length-1];if(g.toLowerCase()==="cimode")return!0;var C=function(O,D){var B=l.services.backendConnector.state["".concat(O,"|").concat(D)];return B===-1||B===2};if(a.precheck){var A=a.precheck(this,C);if(A!==void 0)return A}return!!(this.hasResourceBundle(g,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||C(g,s)&&(!_||C(w,s)))}},{key:"loadNamespaces",value:function(s,l){var a=this,g=My();return this.options.ns?(typeof s=="string"&&(s=[s]),s.forEach(function(_){a.options.ns.indexOf(_)<0&&a.options.ns.push(_)}),this.loadResources(function(_){g.resolve(),l&&l(_)}),g):(l&&l(),Promise.resolve())}},{key:"loadLanguages",value:function(s,l){var a=My();typeof s=="string"&&(s=[s]);var g=this.options.preload||[],_=s.filter(function(w){return g.indexOf(w)<0});return _.length?(this.options.preload=g.concat(_),this.loadResources(function(w){a.resolve(),l&&l(w)}),a):(l&&l(),Promise.resolve())}},{key:"dir",value:function(s){if(s||(s=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!s)return"rtl";var l=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new lT(dT());return l.indexOf(a.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var s=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d1,g=Yu(Yu(Yu({},this.options),l),{isClone:!0}),_=new n(g);(l.debug!==void 0||l.prefix!==void 0)&&(_.logger=_.logger.clone(l));var w=["store","services","language"];return w.forEach(function(C){_[C]=s[C]}),_.services=Yu({},this.services),_.services.utils={hasLoadedNamespace:_.hasLoadedNamespace.bind(_)},_.translator=new sT(_.services,_.options),_.translator.on("*",function(C){for(var A=arguments.length,I=new Array(A>1?A-1:0),O=1;O<A;O++)I[O-1]=arguments[O];_.emit.apply(_,[C].concat(I))}),_.init(g,a),_.translator.options=_.options,_.translator.backendConnector.services.utils={hasLoadedNamespace:_.hasLoadedNamespace.bind(_)},_}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(Yp);Sf(qx,"createInstance",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new qx(e,t)});var ua=qx.createInstance();ua.createInstance=qx.createInstance;ua.createInstance;ua.dir;ua.init;ua.loadResources;ua.reloadResources;ua.use;ua.changeLanguage;ua.getFixedT;ua.t;ua.exists;ua.setDefaultNamespace;ua.hasLoadedNamespace;ua.loadNamespaces;ua.loadLanguages;var wX=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,SX={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},CX=function(t){return SX[t]},EX=function(t){return t.replace(wX,CX)};function yT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function vT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(n),!0).forEach(function(i){Sf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var _T={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:EX};function kX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_T=vT(vT({},_T),e)}var AX={type:"3rdParty",init:function(t){kX(t.options.react)}};mt.createContext();(function(){function e(){Vl(this,e),this.usedNamespaces={}}return ql(e,[{key:"addUsedNamespaces",value:function(n){var i=this;n.forEach(function(s){i.usedNamespaces[s]||(i.usedNamespaces[s]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e})();var fR=[],PX=fR.forEach,TX=fR.slice;function IX(e){return PX.call(TX.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var xT=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OX=function(t,n,i){var s=i||{};s.path=s.path||"/";var l=encodeURIComponent(n),a="".concat(t,"=").concat(l);if(s.maxAge>0){var g=s.maxAge-0;if(Number.isNaN(g))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(g))}if(s.domain){if(!xT.test(s.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(s.domain)}if(s.path){if(!xT.test(s.path))throw new TypeError("option path is invalid");a+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite){var _=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(_){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},bT={create:function(t,n,i,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(l.expires=new Date,l.expires.setTime(l.expires.getTime()+i*60*1e3)),s&&(l.domain=s),document.cookie=OX(t,encodeURIComponent(n),l)},read:function(t){for(var n="".concat(t,"="),i=document.cookie.split(";"),s=0;s<i.length;s++){for(var l=i[s];l.charAt(0)===" ";)l=l.substring(1,l.length);if(l.indexOf(n)===0)return l.substring(n.length,l.length)}return null},remove:function(t){this.create(t,"",-1)}},LX={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=bT.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&bT.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},MX={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=i.substring(1),l=s.split("&"),a=0;a<l.length;a++){var g=l[a].indexOf("=");if(g>0){var _=l[a].substring(0,g);_===t.lookupQuerystring&&(n=l[a].substring(g+1))}}}return n}},Ry=null,wT=function(){if(Ry!==null)return Ry;try{Ry=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Ry=!1}return Ry},RX={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&wT()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&wT()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},Fy=null,ST=function(){if(Fy!==null)return Fy;try{Fy=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Fy=!1}return Fy},FX={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&ST()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&ST()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},DX={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},zX={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},BX={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},NX={name:"subdomain",lookup:function(t){var n=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,i=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[n]}};function $X(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var pR=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vl(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return ql(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=IX(i,this.options||{},$X()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(LX),this.addDetector(MX),this.addDetector(RX),this.addDetector(FX),this.addDetector(DX),this.addDetector(zX),this.addDetector(BX),this.addDetector(NX)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var s=[];return n.forEach(function(l){if(i.detectors[l]){var a=i.detectors[l].lookup(i.options);a&&typeof a=="string"&&(a=[a]),a&&(s=s.concat(a))}}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var s=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(l){s.detectors[l]&&s.detectors[l].cacheUserLanguage(n,s.options)}))}}]),e}();pR.type="languageDetector";const UX="km",jX="m",VX="to",qX="Logout",HX="Save",GX="Cancel",WX="Create",KX="Disasters",ZX="Loading...",XX="Loading events",QX="Legend",YX="maps",JX="Vertical direction",eQ="Horizontal direction",tQ="Legend presentation",nQ="Layers",rQ="Feed",iQ="Deselect",oQ="Gathering data",aQ="Updated",sQ="No data received",lQ="Wrong data received",uQ="Error",cQ="Sort Icon",fQ={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"The feed contains real-time data about Cyclones, Droughts, Earthquakes, Floods, Volcanoes, Wildfires."},pQ={default:"Sorry, we are having issues, which will be fixed soon",timeout:"Request Timeout",cannot_connect:"Can't connect to server",forbidden:"Forbidden",not_found:"Not found",unknown:"Unknown",server_error:"Server Error"},hQ={overlays:"Overlays",basemap:"Basemap"},dQ={layers_in_selected_area:"Layers in selected area",your_layers:"Your Layers",kontur_analytics:"Kontur Analytics",qa:"QA",osmbasedmap:"OpenStreetMap Based",other:"Other",elevation:"Elevation",photo:"Photo",map:"Map"},mQ={load_world_data:"Load World Data",numerator:"Numerator",normalized_by:"Normalized By",sum:"Sum",min:"Min",max:"Max",mean:"Mean",stddev:"Stddev",median:"Median",filter_numerator:"Filter Numerator",filter_denominator:"Filter Denominator"},gQ={title:"Multi-criteria decision analysis",name:"MCDA"},yQ={warning_title:"Can't use map as filter",warning_description:"Map not ready yet, try later",bbox_filter_button:"Use map view as filter",analytics:{affected_people:{tooltip:"Affected People",value:"No humanitarian impact"},settled_area_tooltip:"Settled Area",loss_tooltip:"Estimated loss"},no_event_in_feed:"Event not found in the current event feed",no_selected_disaster:"No disaster selected",chose_disaster:"Choose disaster",no_historical_disasters:"No historical disasters in this area",no_feed_disasters:"No disasters in this feed",no_disasters:"No disasters",severity_unknown:"Unknown",severity_termination:"Termination",severity_minor:"Minor",severity_moderate:"Moderate",severity_severe:"Severe",severity_extreme:"Extreme",open_timeline_button:"Open timeline"},vQ={edit_layer:"Edit Layer",edit_features:"Edit Features",delete_layer:"Delete Layer",create_layer:"Create Layer",saving_layer:"Saving layer...",field_name:"Field name",layer_name:"Layer name",marker_icon:"Marker icon",type:"Type",select:"Select",short_text:"Short Text",long_text:"Long Text",link:"Link",image:"Image",fields:"Fields",add_field:"Add field",location:"Location",edit_feature_placeholder:"Select some feature for start edit feature properties"},_Q={header_title:"Analytics",error_loading:"Error while fetching analytics data",info_short:"Calculations are made for the selected area."},xQ={header_title:"Advanced analytics",error:"Error while fetching advanced analytics data"},bQ={not_found:"Sorry, requested event not found.",error:"An error occured!",analytics_for_selected:"Analytics for a selected area",will_be_provided:"will be provided here"},wQ={area:"Area",line:"Line",point:"Point",finish_drawing:"Finish Drawing",caption:"Click on the map to begin drawing",no_geometry_error:"No drawn geometry to download",overlap_error:"Polygon should not overlap itself",save_features:"Save features"},SQ={title:"Focus to administrative boundary"},CQ={title:"Focus to uploaded geometry",error:"Error while reading uploaded file"},EQ={title:"Focus to freehand geometry"},kQ={settings:{name:"Selected Area"}},AQ={self_directions_not_supported:"Self intersections are not supported!"},PQ={panel:{header:"Bivariate Matrix"},matrix:{caption:{base_axis:"Base axis",annex_axis:"Annex axis",tooltip:{p1:"Charts involving the Base and Annex axes help establish a relationship between two data sets.",li1:"Annex axis - parameters that we analyse",li2:"Base axis - reference point in the analysis",b:"Ex: the best location to open a cafe",p2:"We can explore the number of eatery places (Annex axis) against Population density (Base axis).",p3:"In this scenario, we are first interested in a small number of eatery places, and the number of people in that place gives us additional information."}},header:{title:"Choose two layers to explore correlations",hint:"Layers and correlations are displayed for the current Selected Area"},icon:{population:"Value divided by Population",area_km2:"Value divided by Area",total_building_count:"Value divided by Total Buildings Estimate",populated_area_km2:"Value divided by Populated Area",one:"Without divider",roads:"Value divided by Total Roads Length"},progress:{rendering:"Rendering",applied:"Applied on the map"},loading_error:"Unfortunately, we cannot display the matrix. Try refreshing the page or come back later."},legend:{high:"High",low:"Low",medium:"Medium"},color_manager:{not_defined:"Not defined",sentiments_combinations_filter:"Sentiments combinations",layers_filter:"Layers",no_legends:"There are no legends satisfying the conditions.",no_data:"No Data.",sentiments_tab:"Sentiments",color_legends_tab:"Color Legends",layers_tab:"Layers (indicators)"}},TQ={biv_color_manager:"olor manager",edit_osm:"Edit in OpenStreetMap",ruler:"Ruler",collapse:"Collapse",expand:"Expand",icon_alt:"Application logo"},IQ={email:"Email",password:"Password",login_button:"Login",sign_up:"Sign up",logging_in:"Logging in...",log_in:"Log in",description:"Please log in to change your settings",error:{email_empty:"Email has not to be empty!",email_invalid:"Email has to be valid!",password:"Password has not to be empty!",connect:"Couldn't connect to authentication service"}},OQ={title:"Disaster Ninja Reports",no_data:"No data for this report",sorting:"Sorting data...",loading:"Loading data",search_location:"Search location",open_josm:"Open via JOSM remote control",josm_logo_alt:"JOSM logo",see_all:"See all reports",wrong_id:"Wrong report ID",description:"<0>Kontur </0> generates several reports that help validate OpenStreetMap quality. They contain links to areas on <4>osm.org </4> and links to open them in the JOSM editor with enabled remote control for editing."},LQ={map:"Map",about:"About",reports:"Reports",profile:"Profile",privacy:"Privacy"},MQ={title:"Welcome to Disaster Ninja!",intro:"Do you want to be notified about ongoing disasters? Are you interested in instant population data and other analytics for any region in the world? Disaster Ninja showcases some of <2>Kontur</2>s capabilities in addressing these needs.<br/><br/>We initially designed it as a decision support tool for humanitarian mappers. Now it has grown in functionality and use cases. Whether you work in disaster management, build a smart city, or perform research on climate change, Disaster Ninja can help you to:",l1:"1. Stay up to date with the latest hazard events globally.",p1:"The Disasters panel continually refreshes to inform you about ongoing events. It consumes data from the <2>Kontur Event Feed</2>, which you can also access via an API.",l2:"2. Focus on your area of interest.",p2:"The Drawing Tools panel allows you to draw or upload your own geometry on the map. You can also focus on a disaster-exposed area or an administrative unit  a country, city, or region.",l3:"3. Get analytics for the focused area.",p3:"The Analytics panel shows the number of people living in that area per <2>Kontur Population</2> and estimated mapping gaps in OpenStreetMap. Konturs customers have access to hundreds of other indicators through Advanced Analytics.",l4:"4. Explore data on the map and make conclusions.",p4:"The Layers panel gives you various options to display two indicators simultaneously on a bivariate map, e.g., population density and distance to the nearest fire station. Use the color legend to assess which areas require attention. <br/>Hint: in general, green indicates low risk / few gaps, red  high risk / many gaps.",p5:"In addition, you can switch to Reports in the left panel to access data on potential errors and inconsistencies in OpenStreetMap and help fix them by mapping the respective area with the JOSM editor.",goToMap:"Go to the map now",p6:"We hope you find this tool valuable. Use the chatbox on Disaster Ninja for any questions about the functionality, and we will be happy to guide you. You can also contact us by email at <1>hello@kontur.io</1> if you have feedback or suggestions on improving the tool.<br/><br/>Disaster Ninja is an open-source project. Find the code in <8>Konturs GitHub account</8>."},RQ={interfaceTheme:"Theme",interfaceLanguage:"Language",units:"Units",fullName:"Full Name",email:"Email",metric:"metric",imperialBeta:"imperial (beta)",profileSettingsHeader:"Profile",appSettingsHeader:"Settings",saveButton:"Save changes",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Default disaster feed",defaultOSMeditor:"Default OpenStreetMap editor (beta)",successNotification:"All changes have been applied successfully",languageOption:{en:"English",es:"Spanish",ar:"Arabic",ko:"Korean",id:"Indonesian",de:"German",uk:"Ukrainian"}},FQ={not_found_request:"Sorry, requested event not found."},DQ={get_location_error:"Error while getting location",feature_title:"Locate me"},zQ="Episode",BQ="Loading Episodes",NQ={header:"We value your privacy",body:`We use absolutely necessary cookies to provide you personalized services and optional cookies to improve Disaster Ninja and your experience. You can manage cookies settings or withdraw consent to optional cookies at any time.
For more information, please, check our [Privacy Policy](about/privacy)`,decline_all:"Decline optional cookies",accept_all:"Accept optional cookies"},$Q={start:"Start sensor recording",finish:"Stop sensor recording",finishMessage:"Recording has been finished",startMessage:"Recording has been started",noSensorsError:"Your device desn't have the required sensors"},UQ={km:UX,m:jX,to:VX,logout:qX,save:HX,cancel:GX,create:WX,disasters:KX,loading:ZX,loading_events:XX,legend:QX,maps:YX,vertical_direction:JX,horizontal_direction:eQ,legend_presentation:tQ,layers:nQ,feed:rQ,deselect:iQ,spinner_text:oQ,updated:aQ,no_data_received:sQ,wrong_data_received:lQ,error:uQ,sort_icon:cQ,configs:fQ,errors:pQ,categories:hQ,groups:dQ,advanced_analytics_data_list:mQ,mcda:gQ,event_list:yQ,create_layer:vQ,analytics_panel:_Q,advanced_analytics_panel:xQ,advanced_analytics_empty:bQ,draw_tools:wQ,boundary_selector:SQ,geometry_uploader:CQ,focus_geometry:EQ,focus_geometry_layer:kQ,drawings:AQ,bivariate:PQ,sidebar:TQ,login:IQ,reports:OQ,modes:LQ,about:MQ,profile:RQ,current_event:FQ,locate_me:DQ,episode:zQ,loading_episodes:BQ,cookie_banner:NQ,live_sensor:$Q},jQ="km",VQ="m",qQ="a",HQ="mapas",GQ="Cierre de sesin",WQ="Guardar",KQ="Cancelar",ZQ="Crear",XQ="Desastres",QQ="Cargando...",YQ="Cargando eventos",JQ="Leyenda",eY="Direccin vertical",tY="Direccin horizontal",nY="Presentacin de la leyenda",rY="Capas",iY={color_manager:{layers_filter:"Capas",not_defined:"No definido",sentiments_combinations_filter:"Combinaciones de sentimientos",no_legends:"No hay leyendas que cumplan las condiciones.",no_data:"No hay datos.",sentiments_tab:"Sentimientos",color_legends_tab:"Leyendas de colores",layers_tab:"Capas (indicadores)"},panel:{header:"Matriz bivariada"},matrix:{caption:{base_axis:"Eje base",annex_axis:"Eje anexo",tooltip:{p1:"Las grficas que incluyen los ejes base y anexo ayudan a establecer una relacin entre dos conjuntos de datos.",li1:"Eje anexo: parmetros que analizamos",li2:"Eje base: punto de referencia en el anlisis",b:"Ej.: la mejor ubicacin para abrir una cafetera",p2:"Podemos explorar el nmero de locales de comida (eje anexo) frente a la densidad de poblacin (eje base).",p3:"En este escenario, en primer lugar nos interesa un nmero reducido de locales de comida, y la cantidad de personas presentes nos da informacin adicional."}},header:{title:"Elija dos capas para explorar las correlaciones",hint:"Las capas y correlaciones se muestran para el rea seleccionada actual"},icon:{population:"Valor dividido por la poblacin",area_km2:"Valor dividido por el rea",total_building_count:"Valor dividido por la estimacin total de edificios",populated_area_km2:"Valor dividido por el rea poblada",one:"Sin divisor",roads:"Valor dividido por la longitud total de las carreteras"},progress:{rendering:"Renderizado",applied:"Aplicado en el mapa"}},legend:{high:"Alto",low:"Bajo",medium:"Medio"}},oY="Fuente",aY="Anular la seleccin",sY="Recopilacin de datos",lY="Actualizado",uY="No se han recibido datos",cY="Se han recibido datos errneos",fY="Error",pY="Icono de ordenar",hY={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"El feed contiene datos en tiempo real sobre Ciclones, Sequas, Terremotos, Inundaciones, Volcanes, Incendios forestales."},dY={default:"Lo sentimos, estamos teniendo problemas, que pronto se solucionarn",timeout:"Se agot el tiempo de espera de la solicitud",cannot_connect:"No se puede conectar al servidor",forbidden:"Prohibido",not_found:"No encontrado",unknown:"Desconocido",server_error:"Error del servidor"},mY={severity_unknown:"Desconocido",warning_title:"No se puede utilizar el mapa como filtro",warning_description:"El mapa an no est listo, intntelo ms tarde",bbox_filter_button:"Usar la vista del mapa como filtro",analytics:{affected_people:{tooltip:"Personas afectadas",value:"Sin impacto humanitario"},settled_area_tooltip:"rea habitada",loss_tooltip:"Prdida estimada"},no_event_in_feed:"Evento no encontrado en el feed de eventos actual",no_selected_disaster:"No se ha seleccionado ningn desastre",chose_disaster:"Seleccione el desastre"},gY={overlays:"Superposiciones",basemap:"Mapa base"},yY={layers_in_selected_area:"Capas en el rea seleccionada",your_layers:"Sus capas",kontur_analytics:"Anlisis de Kontur",qa:"Certificacin de calidad",osmbasedmap:"Basado en OpenStreetMap",other:"Otros",elevation:"Elevacin",photo:"Foto",map:"Mapa"},vY={map:"Mapa",about:"Acerca de",reports:"Informes",profile:"Perfil"},_Y={load_world_data:"Cargar datos mundiales",numerator:"Numerador",normalized_by:"Normalizado por",sum:"Suma",min:"Mn.",max:"Mx.",mean:"Media",stddev:"Desv. est.",median:"Mediana",filter_denominator:"Filtrar Denominador"},xY={},bY={edit_layer:"Editar capa",edit_features:"Editar caractersticas",delete_layer:"Eliminar capa",create_layer:"Crear capa",saving_layer:"Guardando capa...",field_name:"Nombre de campo",layer_name:"Nombre de la capa",marker_icon:"Icono de marcador",type:"Tipo",select:"Seleccionar",short_text:"Texto corto",long_text:"Texto largo",link:"Enlace",image:"Imagen",fields:"Campos",add_field:"Agregar campo",location:"Ubicacin",edit_feature_placeholder:"Seleccione una caracterstica para comenzar a editar las propiedades de la misma"},wY={header_title:"Anlisis",error_loading:"Error en la obtencin de datos de anlisis"},SY={header_title:"Anlisis avanzado",error:"Error en la obtencin de datos de anlisis Avanzado"},CY={not_found:"Lo sentimos, el evento solicitado no se ha encontrado.",error:"Se produjo un error!"},EY={not_found_request:"Lo sentimos, el evento solicitado no se ha encontrado."},kY={area:"rea",line:"Lnea",point:"Punto",finish_drawing:"Terminar el dibujo",caption:"Haga clic en el mapa para empezar a dibujar",no_geometry_error:"No hay geometra dibujada para descargar",overlap_error:"El polgono no debe superponerse sobre s mismo",save_features:"Guardar caractersticas"},AY={title:"Enfocar en el lmite administrativo"},PY={title:"Enfocar en la geometra cargada",error:"Error al leer el archivo cargado"},TY={title:"Enfocar en la geometra a mano"},IY={settings:{name:"rea seleccionada"}},OY={self_directions_not_supported:"No se admiten las autointersecciones!"},LY={biv_color_manager:"Administrador de color",edit_osm:"Editar en OpenStreetMap",ruler:"Regla",collapse:"Contraer",expand:"Expandir",icon_alt:"Logotipo de la aplicacin"},MY={email:"Correo electrnico",password:"Contrasea",login_button:"Inicio de sesin",sign_up:"Registrarse",logging_in:"Iniciando sesin...",log_in:"Iniciar sesin",description:"Acceda a su cuenta para cambiar los ajustes",error:{email_empty:"El correo electrnico no debe estar vaco!",email_invalid:"El correo electrnico debe ser vlido!",password:"La contrasea no debe estar vaca!",connect:"No se pudo conectar con el servicio de autenticacin"}},RY={email:"Correo electrnico",profileSettingsHeader:"Perfil",interfaceTheme:"Tema",interfaceLanguage:"Idioma",units:"Unidades",fullName:"Nombre completo",metric:"mtricas",imperialBeta:"imperiales (beta)",appSettingsHeader:"Ajustes",saveButton:"Guardar cambios",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Feed de desastres predeterminado",defaultOSMeditor:"Editor predeterminado de OpenStreetMap (beta)",successNotification:"Todos los cambios se han aplicado correctamente",languageOption:{en:"Ingls",es:"Espaol",ar:"rabe",ko:"oreano",id:"Indonesio",de:"Alemn",uk:"Ucranio"}},FY={title:"Informes de Disaster Ninja",no_data:"No hay datos para este informe",sorting:"Ordenando datos...",loading:"Cargando datos",search_location:"Buscar ubicacin",open_josm:"Abrir a travs del control remoto JOSM",josm_logo_alt:"Logotipo de JOSM",see_all:"Ver todos los informes",wrong_id:"ID de informe incorrecto",description:"<0>Kontur </0> genera una serie de informes tiles para validar la calidad de OpenStreetMap. Contienen enlaces a zonas en <4>osm.org </4> y enlaces para abrirlas en el editor JOSM con control remoto habilitado para la edicin."},DY={title:"Bienvenido a Disaster Ninja!",intro:"Desea recibir notificaciones sobre desastres en curso? Le interesan los datos de poblacin instantneos y otros datos analticos de alguna regin del mundo? Disaster Ninja muestra algunas de las capacidades de <2>Kontur</2> para ocuparse de estas necesidades.<br/><br/> Inicialmente la diseamos como una herramienta de apoyo a los mapeadores de servicios humanitarios. Ahora ha ampliado sus funcionalidades y aplicaciones prcticas. Tanto si trabaja en la gestin de desastres como si construye una ciudad inteligente o realiza investigaciones sobre el cambio climtico, Disaster Ninja puede ayudarle a:",l1:"1. Estar al da con los ltimos eventos peligrosos a nivel mundial.",p1:"El panel de Desastres se actualiza continuamente para informarle sobre los acontecimientos en curso. Utiliza la informacin proporcionada por <2>Kontur Event Feed</2>, a la que tambin puede acceder a travs de la interfaz de la aplicacin.",l2:"2. Centrarse en su rea de inters.",p2:"El panel de Herramientas de Dibujo le permite dibujar o subir su propia geometra en el mapa. Tambin puede centrarse en un rea o en una unidad administrativa - pas, ciudad o regin  expuesta a desastres.",l3:"3. Recibir anlisis de su rea de inters.",p3:"El panel de Anlisis le muestra el nmero de personas que viven en la zona segn <2>Kontur Population</2> y segn una estimacin de las zonas sin mapear en OpenStreetMap. Los clientes de Kontur tienen acceso a cientos de otros indicadores a travs de Advance Analytics.",l4:"4. Explorar los datos del mapa y sacar sus propias conclusiones.",p4:"El panel Capas le ofrece varias opciones para mostrar dos indicadores en simultneo en un mapa bivariado, p. ej:, la densidad de poblacin y la distancia a la estacin de bomberos ms cercana. Utilice las leyendas de colores para evaluar qu reas requieren atencin. <br/>Consejo: en general, el verde indica riesgo bajo / pocas zonas sin mapear, el rojo  riesgo alto / muchas zonas sin mapear.",p5:"Adems, puede cambiar a Informes en el panel de la izquierda para acceder a los datos sobre posibles errores e inconsistencias en OpenStreetMap y ayudarle a realizar correcciones mapeando la zona correspondiente con el editor JOSM.",goToMap:"Ir al mapa ahora",p6:"Esperamos que esta herramienta le resulte valiosa. Utilice el chat de Disaster Ninja si tiene alguna pregunta sobre sus funcionalidades y estaremos encantados de ayudarle. Tambin puede contactarnos por correo electrnico en <1>hello@kontur.io</1> si tiene algn comentario o sugerencia para mejorar la herramienta.<br/><br/> Disaster Ninja es un proyecto de cdigo abierto. Encuentre el cdigo en la <8>cuenta de GitHub de Kontur</8>."},zY={get_location_error:"Error al obtener la ubicacin",feature_title:"Localizarme"},BY="Episodio",NY="Cargando episodios",$Y={},UY={},jY={km:jQ,m:VQ,to:qQ,maps:HQ,logout:GQ,save:WQ,cancel:KQ,create:ZQ,disasters:XQ,loading:QQ,loading_events:YQ,legend:JQ,vertical_direction:eY,horizontal_direction:tY,legend_presentation:nY,layers:rY,bivariate:iY,feed:oY,deselect:aY,spinner_text:sY,updated:lY,no_data_received:uY,wrong_data_received:cY,error:fY,sort_icon:pY,configs:hY,errors:dY,event_list:mY,categories:gY,groups:yY,modes:vY,advanced_analytics_data_list:_Y,mcda:xY,create_layer:bY,analytics_panel:wY,advanced_analytics_panel:SY,advanced_analytics_empty:CY,current_event:EY,draw_tools:kY,boundary_selector:AY,geometry_uploader:PY,focus_geometry:TY,focus_geometry_layer:IY,drawings:OY,sidebar:LY,login:MY,profile:RY,reports:FY,about:DY,locate_me:zY,episode:BY,loading_episodes:NY,cookie_banner:$Y,live_sensor:UY},VY="",qY="",HY="",GY="",WY=" ",KY="",ZY="",XY="",QY="",YY=" ...",JY="  ",eJ=" ",tJ=" ",nJ=" ",rJ="  ",iJ="",oJ={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:"    .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:" ()"},panel:{header:"  "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:"            .",li1:"  -    ",li2:"  -    ",b:":    ",p2:"     ( )    ( ).",p3:"                  ."}},header:{title:"   ",hint:"      "},icon:{population:"    ",area_km2:"   ",total_building_count:"     ",populated_area_km2:"    ",one:" ",roads:"     "},progress:{rendering:"",applied:"  "}},legend:{high:"",low:"",medium:""}},aJ="",sJ="",lJ=" ",uJ="",cJ="   ",fJ="   ",pJ="",hJ=" ",dJ={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"            ."},mJ={default:"     ",timeout:"  ",cannot_connect:"   ",forbidden:"",not_found:"   ",unknown:" ",server_error:"  "},gJ={severity_unknown:" ",warning_title:"     ",warning_description:"     ",bbox_filter_button:"    ",analytics:{affected_people:{tooltip:" ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"        ",no_selected_disaster:"   ",chose_disaster:" "},yJ={overlays:"",basemap:" "},vJ={layers_in_selected_area:"   ",your_layers:"",kontur_analytics:" ",qa:" ",osmbasedmap:"    ",other:"",elevation:"",photo:"",map:""},_J={map:"",about:"",reports:"",profile:" "},xJ={load_world_data:"  ",numerator:"",normalized_by:" ",sum:"",min:" ",max:" ",mean:"",stddev:"Stddev",median:"",filter_denominator:" "},bJ={},wJ={edit_layer:" ",edit_features:" ",delete_layer:" ",create_layer:" ",saving_layer:" ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:" ",long_text:" ",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"      "},SJ={header_title:"",error_loading:"    "},CJ={header_title:" ",error:"     "},EJ={not_found:"    .",error:" !"},kJ={not_found_request:"    ."},AJ={area:"",line:"",point:"",finish_drawing:" ",caption:"    ",no_geometry_error:"    ",overlap_error:"     ",save_features:" "},PJ={title:"   "},TJ={title:"   ",error:"      "},IJ={title:"   "},OJ={settings:{name:" "}},LJ={self_directions_not_supported:"   !"},MJ={biv_color_manager:" ",edit_osm:"  OpenStreetMap",ruler:"",collapse:"",expand:"",icon_alt:" "},RJ={email:" ",password:" ",login_button:" ",sign_up:" ",logging_in:"  ...",log_in:" ",description:"    ",error:{email_empty:"      !",email_invalid:"     !",password:"      !",connect:"    "}},FJ={email:" ",profileSettingsHeader:" ",interfaceTheme:"",interfaceLanguage:"",units:"",fullName:" ",metric:"",imperialBeta:" ()",appSettingsHeader:"",saveButton:" ",konturTheme:"Kontur",HOTTheme:"","userBio(about)":"",defaultDisasterFeed:"  ",defaultOSMeditor:" OpenStreetMap  ()",successNotification:"    ",languageOption:{en:"",es:"",ar:"",ko:"",id:"",de:"",uk:""}},DJ={title:" Disaster Ninja",no_data:"    ",sorting:"  ...",loading:"  ",search_location:"  ",open_josm:"     JOSM  ",josm_logo_alt:" JOSM",see_all:"  ",wrong_id:"  ",description:" <0> Kontur</0>        OpenStreetMap.        <4> osm.org </4>      JOSM      ."},zJ={title:"  Disaster Ninja!",intro:"                    Disaster Ninja   <2>Kontur</2>    .<br/><br/>          .     .                    Disaster Ninja :",l1:"1.          .",p1:"       .     <2>Kontur Event Feed</2>         .",l2:"2.    .",p2:"             .           -     .",l3:"3.     .",p3:"           <2>Kontur Population</2>     OpenStreetMap.   Kontur         .",l4:"4.       .",p4:"  Layers                     .         . <br/>        /    -   /   .",p5:"                   OpenStreetMap            JOSM.",goToMap:"   ",p6:"      .     Disaster Ninja       .       <1>hello@kontur.io</1>         .<br/><br/> Disaster Ninja   .      <8>Kontur</8>  <8>GitHub</8>."},BJ={get_location_error:"     ",feature_title:" "},NJ="",$J="  ",UJ={},jJ={},VJ={km:VY,m:qY,to:HY,maps:GY,logout:WY,save:KY,cancel:ZY,create:XY,disasters:QY,loading:YY,loading_events:JY,legend:eJ,vertical_direction:tJ,horizontal_direction:nJ,legend_presentation:rJ,layers:iJ,bivariate:oJ,feed:aJ,deselect:sJ,spinner_text:lJ,updated:uJ,no_data_received:cJ,wrong_data_received:fJ,error:pJ,sort_icon:hJ,configs:dJ,errors:mJ,event_list:gJ,categories:yJ,groups:vJ,modes:_J,advanced_analytics_data_list:xJ,mcda:bJ,create_layer:wJ,analytics_panel:SJ,advanced_analytics_panel:CJ,advanced_analytics_empty:EJ,current_event:kJ,draw_tools:AJ,boundary_selector:PJ,geometry_uploader:TJ,focus_geometry:IJ,focus_geometry_layer:OJ,drawings:LJ,sidebar:MJ,login:RJ,profile:FJ,reports:DJ,about:zJ,locate_me:BJ,episode:NJ,loading_episodes:$J,cookie_banner:UJ,live_sensor:jJ},qJ="",HJ="",GJ="",WJ="",KJ="",ZJ="",XJ="",QJ="",YJ="",JJ=" ...",eee="  ",tee="",nee=" ",ree=" ",iee=" ",oee="",aee={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:"   .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:"()"},panel:{header:" "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:"              .",li1:"  -   ",li2:"  -  ",b:":    ",p2:" ( )   ( )   .",p3:"       ,         ."}},header:{title:"      .",hint:"      ."},icon:{population:"  ",area_km2:"  ",total_building_count:"    ",populated_area_km2:"    ",one:" ",roads:"    "},progress:{rendering:"",applied:" "}},legend:{high:"",low:"",medium:""}},see="",lee=" ",uee=" ",cee="",fee="  ",pee="  ",hee="",dee=" ",mee={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:" , , , ,  ,     ."},gee={default:".  .   .",timeout:"  ",cannot_connect:"   .",forbidden:"  ",not_found:"  ",unknown:"  ",server_error:" "},yee={severity_unknown:"  ",warning_title:"    .",warning_description:"    .     .",bbox_filter_button:"   ",analytics:{affected_people:{tooltip:"  ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"      ",no_selected_disaster:"  ",chose_disaster:" "},vee={overlays:"",basemap:""},_ee={layers_in_selected_area:"   ",your_layers:"",kontur_analytics:"Kontur Analytics",qa:"QA",osmbasedmap:"OpenStreetMap ",other:"",elevation:"",photo:"",map:""},xee={map:"",about:"",reports:"",profile:""},bee={load_world_data:"   ",numerator:"",normalized_by:" :",sum:"",min:"",max:"",mean:"",stddev:"  ",median:"",filter_denominator:" "},wee={},See={edit_layer:" ",edit_features:" ",delete_layer:" ",create_layer:" ",saving_layer:"  ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:" ",long_text:" ",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"      ."},Cee={header_title:"",error_loading:"     ."},Eee={header_title:" ",error:"      ."},kee={not_found:".     .",error:" ."},Aee={not_found_request:".     ."},Pee={area:"",line:"",point:"",finish_drawing:" ",caption:"   .",no_geometry_error:"     .",overlap_error:"     .",save_features:" "},Tee={title:"   "},Iee={title:"    ",error:"     ."},Oee={title:"      "},Lee={settings:{name:" "}},Mee={self_directions_not_supported:"   ."},Ree={biv_color_manager:" ",edit_osm:"OpenStreetMap ",ruler:"",collapse:"",expand:"",icon_alt:" "},Fee={email:"",password:"",login_button:"",sign_up:"",logging_in:" ...",log_in:"",description:"  .",error:{email_empty:"   .",email_invalid:"   .",password:"   .",connect:"    ."}},Dee={email:"",profileSettingsHeader:"",interfaceTheme:"",interfaceLanguage:"",units:"",fullName:" ",metric:"",imperialBeta:" ()",appSettingsHeader:"",saveButton:"  ",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"  ",defaultOSMeditor:" OpenStreetMap ()",successNotification:"    .",languageOption:{en:"",es:"",ar:"",ko:"",id:" ",de:" ",uk:" "}},zee={title:"Disaster Ninja ",no_data:"   .",sorting:"  ...",loading:"  ",search_location:" ",open_josm:"JOSM    ",josm_logo_alt:"JOSM ",see_all:"  ",wrong_id:"  ID",description:"<0>Kontur</0>     OpenStreetMap   .  <4>osm.org </4>   ,    JOSM          ."},Bee={title:"Disaster Ninja   !",intro:"      ?            ? Disaster Ninja        <2>Kontur</2>  .<br/><br/>         ,      .  ,   ,               .",l1:"1.        .",p1:"           . <2>Kontur  </2>  , API      .",l2:"2.     .",p2:"           .     (: , , )    .",l3:"3.     .",p3:"  <2>Kontur </2>      OpenStreetMap     .   Kontur          .",l4:"4.       .",p4:"               (:  ,    ).       . <br/>:   /    /  .",p5:",     OpenStreetMap      , JOSM          .",goToMap:"   .",p6:"     .     Disaster Ninja       .        , <1>hello@kontur.io</1>    .<br/><br/>Disaster Ninja   . <8>Kontur GitHub </8>  ."},Nee={get_location_error:"    .",feature_title:"  "},$ee="",Uee="  ",jee={},Vee={},qee={km:qJ,m:HJ,to:GJ,maps:WJ,logout:KJ,save:ZJ,cancel:XJ,create:QJ,disasters:YJ,loading:JJ,loading_events:eee,legend:tee,vertical_direction:nee,horizontal_direction:ree,legend_presentation:iee,layers:oee,bivariate:aee,feed:see,deselect:lee,spinner_text:uee,updated:cee,no_data_received:fee,wrong_data_received:pee,error:hee,sort_icon:dee,configs:mee,errors:gee,event_list:yee,categories:vee,groups:_ee,modes:xee,advanced_analytics_data_list:bee,mcda:wee,create_layer:See,analytics_panel:Cee,advanced_analytics_panel:Eee,advanced_analytics_empty:kee,current_event:Aee,draw_tools:Pee,boundary_selector:Tee,geometry_uploader:Iee,focus_geometry:Oee,focus_geometry_layer:Lee,drawings:Mee,sidebar:Ree,login:Fee,profile:Dee,reports:zee,about:Bee,locate_me:Nee,episode:$ee,loading_episodes:Uee,cookie_banner:jee,live_sensor:Vee},Hee="km",Gee="m",Wee="ke",Kee="peta",Zee="Keluar",Xee="Simpan",Qee="Batalkan",Yee="Buat",Jee="Bencana",ete="Memuat...",tte="Memuat kejadian",nte="Legenda",rte="Arah vertikal",ite="Arah horizontal",ote="Penyajian legenda",ate="Lapisan",ste={color_manager:{layers_filter:"Lapisan",not_defined:"Tidak terdefinisi",sentiments_combinations_filter:"Gabungan sentimen",no_legends:"Tidak ada legenda yang memenuhi kondisi ini.",no_data:"Tidak Ada Data.",sentiments_tab:"Sentimen",color_legends_tab:"Legenda Warna",layers_tab:"Lapisan (indikator)"},panel:{header:"Matriks Bivariat"},matrix:{caption:{base_axis:"Sumbu Dasar",annex_axis:"Sumbu Tambahan",tooltip:{p1:"Diagram yang mencakup sumbu Dasar dan sumbu Tambahan membantu menetapkan hubungan antara dua kumpulan data.",li1:"Sumbu Tambahan - parameter yang kita analisis",li2:"Sumbu Dasar - titik referensi dalam analisis",b:"Contoh: lokasi terbaik untuk membuka kafe",p2:"Kita dapat menyelidiki jumlah tempat makan (sumbu Tambahan) terhadap Kerapatan populasi (sumbu Dasar).",p3:"Dalam skenario ini, pada awalnya kita tertarik dengan beberapa tempat makan, lalu kita mendapatkan informasi tambahan dari jumlah orang di tempat itu."}},header:{title:"Pilih dua lapisan untuk memeriksa korelasi",hint:"Lapisan dan korelasi ditampilkan untuk Area Pilihan terkini"},icon:{population:"Nilai dibagi dengan Populasi",area_km2:"Nilai dibagi dengan Area",total_building_count:"Nilai dibagi dengan Perkiraan Jumlah Bangunan",populated_area_km2:"Nilai dibagi dengan Area Berpenduduk",one:"Tanpa pembagi",roads:"Nilai dibagi dengan Total Panjang Jalan"},progress:{rendering:"Merender",applied:"Diterapkan pada peta"}},legend:{high:"Tinggi",low:"Rendah",medium:"Sedang"}},lte="Feed",ute="Batalkan Pilihan",cte="Mengumpulkan data",fte="Diperbarui",pte="Tidak ada data yang diterima",hte="Data yang diterima salah",dte="Kesalahan",mte="Sortir Ikon",gte={Kontur_public_feed:"Publik Kontur",Kontur_public_feed_description:"Feed berisi data waktu-nyata tentang Angin Topan, Kekeringan, Gempa, Banjir, Gunung Meletus, Kebakaran Hutan."},yte={default:"Maaf, kami mengalami masalah yang akan segera diperbaiki",timeout:"Waktu Permintaan Habis",cannot_connect:"Tidak dapat terhubung ke server",forbidden:"Terlarang",not_found:"Tidak ditemukan",unknown:"Tidak diketahui",server_error:"Kesalahan Server"},vte={severity_unknown:"Tidak diketahui",warning_title:"Tidak dapat menggunakan peta sebagai filter",warning_description:"Peta belum siap, coba nanti",bbox_filter_button:"Gunakan tampilan peta sebagai filter",analytics:{affected_people:{tooltip:"Orang yang Terdampak",value:"Tidak berdampak kemanusiaan"},settled_area_tooltip:"Area yang Ditempati",loss_tooltip:"Estimasi kerugian"},no_event_in_feed:"Kejadian tidak ditemukan di feed kejadian terkini",no_selected_disaster:"Tidak ada bencana yang dipilih",chose_disaster:"Pilih bencana"},_te={overlays:"Tumpang Susun",basemap:"Peta Dasar"},xte={layers_in_selected_area:"Lapisan di area pilihan",your_layers:"Lapisan Anda",kontur_analytics:"Analitik Kontur",qa:"QA",osmbasedmap:"Berbasis OpenStreetMap",other:"Lainnya",elevation:"Elevasi",photo:"Foto",map:"Peta"},bte={map:"Peta",about:"Tentang",reports:"Laporan",profile:"Profil"},wte={load_world_data:"Memuat Data Dunia",numerator:"Pembilang",normalized_by:"Dinormalkan Dengan",sum:"Jumlah",min:"Min",max:"Maks",mean:"Rerata",stddev:"Simpangan baku",median:"Median",filter_denominator:"Filter Penyebut"},Ste={},Cte={edit_layer:"Edit Lapisan",edit_features:"Edit Fitur",delete_layer:"Hapus Lapisan",create_layer:"Buat Lapisan",saving_layer:"Menyimpan lapisan...",field_name:"Nama bidang",layer_name:"Nama lapisan",marker_icon:"Ikon penanda",type:"Jenis",select:"Pilih",short_text:"Teks Singkat",long_text:"Teks Panjang",link:"Tautan",image:"Gambar",fields:"Bidang",add_field:"Tambahkan bidang",location:"Lokasi",edit_feature_placeholder:"Pilih beberapa fitur untuk mulai mengedit properti fitur"},Ete={header_title:"Analitik",error_loading:"Kesalahan saat mengambil data analitik"},kte={header_title:"Analitik tingkat lanjut",error:"Kesalahan saat mengambil data analitik tingkat lanjut"},Ate={not_found:"Maaf, kejadian yang diminta tidak ditemukan.",error:"Terjadi kesalahan!"},Pte={not_found_request:"Maaf, kejadian yang diminta tidak ditemukan."},Tte={area:"Area",line:"Garis",point:"Titik",finish_drawing:"Selesai Menggambar",caption:"Klik peta untuk mulai menggambar",no_geometry_error:"Tidak ada gambar geometri untuk diunduh",overlap_error:"Poligon tidak boleh bertumpang-tindih sendiri",save_features:"Simpan fitur"},Ite={title:"Fokus ke batas administratif"},Ote={title:"Fokus ke geometri unggahan",error:"Kesalahan saat membaca file unggahan"},Lte={title:"Fokus ke geometri bebas"},Mte={settings:{name:"Area Pilihan"}},Rte={self_directions_not_supported:"Tidak mendukung perpotongan dengan dirinya sendiri!"},Fte={biv_color_manager:"Pengelola warna",edit_osm:"Edit di OpenStreetMap",ruler:"Penggaris",collapse:"Ciutkan",expand:"Bentangkan",icon_alt:"Logo aplikasi"},Dte={email:"Email",password:"Kata Sandi",login_button:"Masuk",sign_up:"Daftar",logging_in:"Masuk...",log_in:"Masuk",description:"Masuk untuk mengubah pengaturan Anda",error:{email_empty:"Email tidak boleh kosong!",email_invalid:"Email harus valid!",password:"Kata sandi tidak boleh kosong!",connect:"Tidak dapat terhubung ke layanan autentikasi"}},zte={email:"Email",profileSettingsHeader:"Profil",interfaceTheme:"Tema",interfaceLanguage:"Bahasa",units:"Satuan",fullName:"Nama Lengkap",metric:"metrik",imperialBeta:"imperial (beta)",appSettingsHeader:"Pengaturan",saveButton:"Simpan perubahan",konturTheme:"Kontur",HOTTheme:"HANGAT","userBio(about)":"Bio",defaultDisasterFeed:"Feed bencana bawaan",defaultOSMeditor:"Editor OpenStreetMap bawaan (beta)",successNotification:"Semua perubahan telah berhasil diterapkan",languageOption:{en:"Inggris",es:"Spanyol",ar:"Arab",ko:"Korea",id:"Indonesia",de:"Jerman",uk:"Orang Ukraina"}},Bte={title:"Laporan Disaster Ninja",no_data:"Tidak ada data untuk laporan ini",sorting:"Menyortir data...",loading:"Memuat data",search_location:"Cari lokasi",open_josm:"Buka melalui kendali jarak jaruh JOSM",josm_logo_alt:"Logo JOSM",see_all:"Lihat semua laporan",wrong_id:"ID laporan salah",description:"<0>Kontur </0> menghasilkan beberapa laporan yang membantu memvalidasi kualitas OpenStreetMap. Laporan tersebut berisi tautan ke area di <4>osm.org </4> dan tautan untuk membukanya di editor JOSM dengan kendali jarak jauh untuk pengeditan yang diaktifkan."},Nte={title:"Selamat datang di Disaster Ninja!",intro:"Apakah Anda ingin menerima kabar tentang bencana yang sedang terjadi? Anda tertarik dengan data populasi dan analitik lainnya yang tersaji seketika untuk wilayah mana pun di dunia? Disaster Ninja menampilkan beberapa kemampuan dari <2>Kontur</2> dalam mengatasi berbagai kebutuhan ini.<br/><br/>Pada awalnya, kami merancang alat ini sebagai alat bantu untuk pemetaan kemanusiaan. Kini, fungsionalitas dan kasus penggunaannya telah bertambah. Apakah Anda bekerja pada pengelolaan bencana, membangun kota cerdas, ataupun meneliti perubahan iklim, Disaster Ninja dapat membantu Anda untuk:",l1:"1. Selalu mendapatkan kabar terbaru tentang kejadian berbahaya terkini di seluruh dunia.",p1:"Panel Bencana disegarkan secara terus-menerus untuk memberi tahu Anda kejadian yang sedang berlangsung. Panel ini memakai data dari <2>Feed Kejadian Kontur</2>, yang juga dapat diakses melalui API.",l2:"2. Fokus pada area perhatian Anda.",p2:"Panel Peralatan Gambar memungkinkan Anda menggambar atau mengunggah geometri Anda sendiri pada peta. Anda juga dapat berfokus pada area yang terpapar bencana atau satuan administratif  negara, kota, atau wilayah.",l3:"3. Dapatkan analitik untuk area yang menjadi fokus.",p3:"Panel Analitik memperlihatkan jumlah orang yang tinggal di area tersebut untuk setiap <2>Populasi Kontur</2> dan perkiraan kesenjangan pemetaan di OpenStreetMap. Pelanggan Kontur memiliki akses ke ratusan indikator lainnya melalui Analitik Lanjut.",l4:"4. Selidiki data pada peta dan buat kesimpulan.",p4:"Panel Lapisan memberi Anda berbagai opsi untuk menampilkan dua indikator secara serentak pada peta bivariat, misalnya kepadatan populasi dan jarak ke stasiun pemadam kebakaran terdekat. Gunakan legenda warna untuk menilai area mana yang perlu diperhatikan. <br/>Petunjuk: secara umum, warna hijau menunjukkan risiko rendah/sedikit kesenjangan, warna merah  risiko tinggi/banyak kesenjangan.",p5:"Selain itu, Anda dapat beralih ke Laporan di panel kiri untuk mengakses data tentang potensi kesalahan dan inkonsistensi di OpenStreetMap serta membantu memperbaikinya dengan memetakan masing-masing area menggunakan editor JOSM.",goToMap:"Buka peta sekarang",p6:"Kami berharap agar alat ini bermanfaat bagi Anda. Gunakan kotak obrolan di Disaster Ninja untuk setiap pertanyaan tentang fungsionalitas, dan kami dengan senang hati akan memandu Anda. Anda juga dapat menghubungi kami melalui email di <1>hello@kontur.io</1> jika Anda memiliki tanggapan atau saran untuk meningkatkan alat ini.<br/><br/>Disaster Ninja adalah proyek sumber terbuka. Temukan kodenya di <8>akun GitHub Kontur</8>."},$te={get_location_error:"Kesalahan saat memperoleh lokasi",feature_title:"Temukan saya"},Ute="Episode",jte="Memuat Episode",Vte={},qte={},Hte={km:Hee,m:Gee,to:Wee,maps:Kee,logout:Zee,save:Xee,cancel:Qee,create:Yee,disasters:Jee,loading:ete,loading_events:tte,legend:nte,vertical_direction:rte,horizontal_direction:ite,legend_presentation:ote,layers:ate,bivariate:ste,feed:lte,deselect:ute,spinner_text:cte,updated:fte,no_data_received:pte,wrong_data_received:hte,error:dte,sort_icon:mte,configs:gte,errors:yte,event_list:vte,categories:_te,groups:xte,modes:bte,advanced_analytics_data_list:wte,mcda:Ste,create_layer:Cte,analytics_panel:Ete,advanced_analytics_panel:kte,advanced_analytics_empty:Ate,current_event:Pte,draw_tools:Tte,boundary_selector:Ite,geometry_uploader:Ote,focus_geometry:Lte,focus_geometry_layer:Mte,drawings:Rte,sidebar:Fte,login:Dte,profile:zte,reports:Bte,about:Nte,locate_me:$te,episode:Ute,loading_episodes:jte,cookie_banner:Vte,live_sensor:qte},Gte="km",Wte="m",Kte="bis",Zte="Karten",Xte="Abmelden",Qte="Speichern",Yte="Abbrechen",Jte="Erstellen",ene="Katastrophen",tne="Wird geladen...",nne="Ereignisse werden geladen",rne="Legende",ine="Vertikale Richtung",one="Horizontale Richtung",ane="Darstellung der Legende",sne="Ebenen",lne={color_manager:{layers_filter:"Ebenen",not_defined:"Nicht definiert",sentiments_combinations_filter:"Stimmungs-Kombinationen",no_legends:"Es gibt keine Legenden, die den Kriterien entsprechen.",no_data:"Keine Daten.",sentiments_tab:"Stimmungen",color_legends_tab:"Farbe Legenden",layers_tab:"Ebenen (Indikatoren)"},panel:{header:"Bivariate Matrix"},matrix:{caption:{base_axis:"Basisachse",annex_axis:"Hilfsachse",tooltip:{p1:"Diagramme mit der Basis- und der Hilfsachse helfen, eine Beziehung zwischen zwei Datenstzen herzustellen.",li1:"Hilfsachse - Parameter, die wir analysieren",li2:"Basisachse - Referenzpunkt in der Analyse",b:"Beispiel: der beste Standort fr die Erffnung eines Cafs",p2:"Wir knnen die Anzahl der Lokale (Hilfsachse) gegen die Bevlkerungsdichte (Basisachse) untersuchen.",p3:"In diesem Szenario liegt unser Interesse zunchst auf einer kleinen Anzahl von Lokalen, wobei uns die Anzahl der Personen in diesem Ort zustzliche Informationen liefert."}},header:{title:"Whlen Sie zwei Ebenen, um Zusammenhnge zu untersuchen",hint:"Die Ebenen und Zusammenhnge werden fr den aktuellen ausgewhlten Bereich angezeigt"},icon:{population:"Wert geteilt durch Einwohnerzahl",area_km2:"Wert geteilt durch Flche",total_building_count:"Wert geteilt durch geschtzte Gesamtbebauung",populated_area_km2:"Wert geteilt durch bevlkerte Flche",one:"Ohne Teilung",roads:"Wert geteilt durch die Gesamtlnge der Straen"},progress:{rendering:"bertragung",applied:"Wird auf die Karte angewendet"}},legend:{high:"Hoch",low:"Niedrig",medium:"Mittel"}},une="Feed",cne="Auswahl aufheben",fne="Daten sammeln",pne="Aktualisiert",hne="Keine Daten erhalten",dne="Falsche Daten empfangen",mne="Fehler",gne="Sortiersymbol",yne={Kontur_public_feed:"Kontur ffentlichkeit",Kontur_public_feed_description:"Der Feed enthlt Echtzeitdaten ber Wirbelstrme, Drren, Erdbeben, berschwemmungen, Vulkanausbrche und Waldbrnde."},vne={default:"Leider gibt es derzeit ein paar Probleme, die wir in Krze beheben werden",timeout:"Zeitberschreitung der Anfrage",cannot_connect:"Die Verbindung zum Server kann nicht hergestellt werden",forbidden:"Verboten",not_found:"Nicht gefunden",unknown:"Unbekannt",server_error:"Serverfehler"},_ne={severity_unknown:"Unbekannt",warning_title:"Die Karte kann nicht als Filter verwendet werden",warning_description:"Die Karte ist noch nicht bereit. Bitte versuchen Sie es spter.",bbox_filter_button:"Kartenansicht als Filter verwenden",analytics:{affected_people:{tooltip:"Betroffene Menschen",value:"Keine humanitren Auswirkungen"},settled_area_tooltip:"Besiedeltes Gebiet",loss_tooltip:"Geschtzter Verlust"},no_event_in_feed:"Das Ereignis wurde nicht im aktuellen Ereignis-Feed gefunden",no_selected_disaster:"Keine Katastrophe ausgewhlt",chose_disaster:"Katastrophe auswhlen"},xne={overlays:"berlagerungen",basemap:"Basiskarte"},bne={layers_in_selected_area:"Ebenen im ausgewhlten Bereich",your_layers:"Ihre Ebenen",kontur_analytics:"Kontur Analytik",qa:"QS",osmbasedmap:"Basierend auf OpenStreetMap",other:"Andere",elevation:"Hhe",photo:"Foto",map:"Karte"},wne={map:"Karte",about:"ber uns",reports:"Berichte",profile:"Profil"},Sne={load_world_data:"Weltdaten laden",numerator:"Zhler",normalized_by:"Normalisiert auf",sum:"Summe",min:"Min",max:"Max",mean:"Mittelwert",stddev:"SD",median:"Median",filter_denominator:"Filter Nenner"},Cne={},Ene={edit_layer:"Ebene bearbeiten",edit_features:"Merkmale bearbeiten",delete_layer:"Ebene lschen",create_layer:"Ebene erstellen",saving_layer:"Ebene wird gespeichert...",field_name:"Feldname",layer_name:"Name der Ebene",marker_icon:"Markierungssymbol",type:"Typ",select:"Auswhlen",short_text:"Kurzer Text",long_text:"Langer Text",link:"Link",image:"Bild",fields:"Felder",add_field:"Feld hinzufgen",location:"Standort",edit_feature_placeholder:"Whlen Sie einige Merkmale aus, um Merkmalseigenschaften zu bearbeiten"},kne={header_title:"Analytik",error_loading:"Fehler beim Abrufen von Analysedaten"},Ane={header_title:"Erweiterte Analytik",error:"Fehler beim Abrufen von erweiterten Analysedaten"},Pne={not_found:"Leider wurde das gewnschte Ereignis nicht gefunden.",error:"Es ist ein Fehler aufgetreten!"},Tne={not_found_request:"Leider wurde das gewnschte Ereignis nicht gefunden."},Ine={area:"Gebiet",line:"Linie",point:"Punkt",finish_drawing:"Zeichnen beenden",caption:"Klicken Sie auf die Karte, um mit dem Zeichnen zu beginnen",no_geometry_error:"Keine gezeichnete Formen zum Herunterladen",overlap_error:"Das Polygon darf sich nicht berschneiden",save_features:"Merkmale speichern"},One={title:"Fokus auf die Verwaltungsgrenze"},Lne={title:"Fokus auf die hochgeladene geometrische Form",error:"Fehler beim Lesen der hochgeladenen Datei"},Mne={title:"Fokus auf freihndig gezeichnete Formen"},Rne={settings:{name:"Ausgewhltes Gebiet"}},Fne={self_directions_not_supported:"berschneidungen werden nicht untersttzt!"},Dne={biv_color_manager:"Farbmanager",edit_osm:"In OpenStreetMap bearbeiten",ruler:"Lineal",collapse:"Zusammenklappen",expand:"Erweitern",icon_alt:"Logo der Anwendung"},zne={email:"E-Mail",password:"Passwort",login_button:"Anmelden",sign_up:"Registrieren",logging_in:"Anmelden...",log_in:"Einloggen",description:"Bitte melden Sie sich an, um Ihre Einstellungen zu ndern",error:{email_empty:"E-Mail darf nicht leer sein!",email_invalid:"E-Mail muss gltig sein!",password:"Passwort darf nicht leer sein!",connect:"Die Verbindung zum Authentifizierungsdienst konnte nicht hergestellt werden"}},Bne={email:"E-Mail",profileSettingsHeader:"Profil",interfaceTheme:"Thema",interfaceLanguage:"Sprache",units:"Einheiten",fullName:"Vollstndiger Name",metric:"metrisch",imperialBeta:"imperial (beta)",appSettingsHeader:"Einstellungen",saveButton:"nderungen speichern",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Standardmige Katastrophenmeldung",defaultOSMeditor:"Standardmiger OpenStreetMap-Editor (Beta)",successNotification:"Alle nderungen wurden erfolgreich bernommen",languageOption:{en:"Englisch",es:"Spanisch",ar:"Arabisch",ko:"Koreanisch",id:"Indonesisch",de:"Deutsch",uk:"Ukrainisch"}},Nne={title:"Disaster Ninja Berichte",no_data:"Keine Daten fr diesen Bericht",sorting:"Daten werden sortiert...",loading:"Daten werden geladen",search_location:"Standort suchen",open_josm:"ffnen ber die JOSM-Fernsteuerung",josm_logo_alt:"JOSM-Logo",see_all:"Alle Berichte anzeigen",wrong_id:"Falsche Berichts-ID",description:"<0>Kontur </0> generiert verschiedene Berichte, die bei der berprfung der Qualitt von OpenStreetMap helfen. Sie enthalten Links zu Gebieten auf <4>osm.org </4> und Links, um sie im JOSM-Editor mit aktivierter Fernsteuerung zur Bearbeitung ffnen zu knnen."},$ne={title:"Willkommen bei Disaster Ninja!",intro:"Mchten Sie ber aktuelle Katastrophen informiert werden? Sind Sie an sofortigen Bevlkerungsdaten und anderen Analysen fr eine beliebige Region auf der Welt interessiert? Disaster Ninja zeigt Ihnen einige der Funktionen von <2>Kontur</2>, mit denen diese Anforderungen umgesetzt werden knnen.<br/><br/>Ursprnglich haben wir es als Entscheidungshilfe fr Kartografen im humanitren Bereich entwickelt. Mittlerweile ist der Funktionsumfang und der Anwendungsbereich des Programms erweitert worden. Ganz gleich, ob Sie im Katastrophenmanagement ttig sind, eine intelligente Stadt bauen oder ber den Klimawandel forschen, Disaster Ninja kann Ihnen dabei helfen:",l1:"1. ber die aktuellen Gefahrenereignisse weltweit auf dem Laufenden zu bleiben.",p1:"Das Bedienfeld von Disasters wird kontinuierlich aktualisiert, um Sie ber aktuelle Ereignisse zu informieren. Es bezieht die Daten aus dem <2>Kontur Ereignis-Feed</2>, auf den Sie auch ber eine API zugreifen knnen.",l2:"2. Den Fokus auf Ihr Interessengebiet zu legen.",p2:"Mit den Zeichenwerkzeugen knnen Sie Ihre eigene geometrische Form auf die Karte zeichnen oder hochladen. Sie knnen sich auch auf ein von einer Katastrophe betroffenes Gebiet oder eine Verwaltungseinheit - ein Land, eine Stadt oder eine Region - konzentrieren.",l3:"3. Die Analytik fr den ausgewhlten Bereich aufrufen.",p3:"Das Bedienfeld Analytik zeigt die Anzahl der in diesem Gebiet lebenden Menschen pro <2>Kontur Bevlkerung</2> und geschtzte Kartierungslcken in OpenStreetMap. Kontur-Kunden haben ber Erweiterte Analytik Zugang zu Hunderten von weiteren Indikatoren.",l4:"4. Die Daten auf der Karte entdecken und Schlussfolgerungen ziehen.",p4:"Das Ebenen-Panel bietet Ihnen verschiedene Optionen, um zwei Indikatoren gleichzeitig auf einer bivariaten Karte anzuzeigen, z. B. die Bevlkerungsdichte und die Entfernung zur nchsten Feuerwache. Verwenden Sie die Farblegende, um zu beurteilen, welche Bereiche Aufmerksamkeit erfordern. <br/>Tipp: Im Allgemeinen bedeutet grn ein geringes Risiko / wenige Lcken, rot ein hohes Risiko / viele Lcken.",p5:"Auerdem knnen Sie im linken Bereich zu Berichte wechseln, um auf Daten zu potenziellen Fehlern und Unstimmigkeiten in OpenStreetMap zuzugreifen und dabei zu helfen, diese zu beheben, indem Sie das entsprechende Gebiet mit dem JOSM-Editor kartieren.",goToMap:"Jetzt die Karte aufrufen",p6:"Wir hoffen, dass dieses Tool Ihnen von Nutzen ist. Wenn Sie Fragen zur Funktionalitt haben, knnen Sie die Chatbox auf Disaster Ninja nutzen, und wir helfen Ihnen gerne weiter. Sie knnen uns auch eine E-Mail an <1>hello@kontur.io</1> schreiben, wenn Sie Feedback oder Vorschlge zur Verbesserung des Tools haben.<br/><br/>Disaster Ninja ist ein Open-Source-Projekt. Sie finden den Code in <8>Konturs GitHub-Konto</8>."},Une={get_location_error:"Fehler beim Abrufen des Standorts",feature_title:"Standort finden"},jne="Episode",Vne="Episoden werden geladen",qne={},Hne={},Gne={km:Gte,m:Wte,to:Kte,maps:Zte,logout:Xte,save:Qte,cancel:Yte,create:Jte,disasters:ene,loading:tne,loading_events:nne,legend:rne,vertical_direction:ine,horizontal_direction:one,legend_presentation:ane,layers:sne,bivariate:lne,feed:une,deselect:cne,spinner_text:fne,updated:pne,no_data_received:hne,wrong_data_received:dne,error:mne,sort_icon:gne,configs:yne,errors:vne,event_list:_ne,categories:xne,groups:bne,modes:wne,advanced_analytics_data_list:Sne,mcda:Cne,create_layer:Ene,analytics_panel:kne,advanced_analytics_panel:Ane,advanced_analytics_empty:Pne,current_event:Tne,draw_tools:Ine,boundary_selector:One,geometry_uploader:Lne,focus_geometry:Mne,focus_geometry_layer:Rne,drawings:Fne,sidebar:Dne,login:zne,profile:Bne,reports:Nne,about:$ne,locate_me:Une,episode:jne,loading_episodes:Vne,cookie_banner:qne,live_sensor:Hne},Wne="",Kne="",Zne="",Xne="",Qne="",Yne="",Jne="",ere="",tre="",nre="...",rre=" ",ire="",ore=" ",are=" ",sre=" ",lre="",ure={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:" ,   .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:" ()"},panel:{header:" "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:",      ,       .",li1:"  - ,   ",li2:"  -   ",b:":     ",p2:"      ( )    ( ).",p3:"         ,          ."}},header:{title:"  ,    ",hint:"      "},icon:{population:",    ",area_km2:",   ",total_building_count:",     ",populated_area_km2:",    ",one:" ",roads:",     "},progress:{rendering:"",applied:"  "},loading_error:" ,     .     ."},legend:{high:"",low:"",medium:""}},cre="",fre=" ",pre=" ",hre="",dre=" ",mre="  ",gre="",yre=" ",vre={Kontur_public_feed_description:"       , , , , ,  ."},_re={default:",    ,    ",timeout:"   ",cannot_connect:"  '  ",forbidden:"",not_found:" ",unknown:"",server_error:" "},xre={severity_unknown:"",warning_title:"     ",warning_description:"   ,  ",bbox_filter_button:"    ",analytics:{affected_people:{tooltip:"  ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"      ",no_selected_disaster:"  ",chose_disaster:" ",no_historical_disasters:"     ",no_feed_disasters:"   ",no_disasters:" ",severity_termination:"",severity_minor:"",severity_moderate:"",severity_severe:"",severity_extreme:"",open_timeline_button:"  "},bre={overlays:"",basemap:" "},wre={layers_in_selected_area:"   ",your_layers:" ",kontur_analytics:" Kontur",qa:" ",osmbasedmap:"  OpenStreetMap",other:"",elevation:"'",photo:"",map:""},Sre={map:"",about:" ",reports:"",profile:"",privacy:""},Cre={load_world_data:"    ",numerator:"",normalized_by:" ",sum:"",min:".",max:".",mean:"",stddev:" ",median:"",filter_numerator:" ",filter_denominator:" "},Ere={},kre={edit_layer:" ",edit_features:" '",delete_layer:" ",create_layer:" ",saving_layer:" ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:"()",long_text:"()",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"     "},Are={header_title:"",error_loading:"     "},Pre={header_title:" ",error:"      "},Tre={not_found:",   .",error:" !",analytics_for_selected:"   ",will_be_provided:"  "},Ire={not_found_request:",   ."},Ore={area:"",line:"",point:"",finish_drawing:" ",caption:"  ,   ",no_geometry_error:"   ",overlap_error:"     ",save_features:" '"},Lre={title:"   "},Mre={title:"   ",error:"    "},Rre={title:"   "},Fre={settings:{name:" "}},Dre={self_directions_not_supported:"  !"},zre={biv_color_manager:" ",edit_osm:"  OpenStreetMap",ruler:"",collapse:"",expand:"",icon_alt:" "},Bre={email:" ",password:"",login_button:"",sign_up:"",logging_in:"...",log_in:"",description:",   ",error:{email_empty:"     !",email_invalid:"    !",password:"    !",connect:"  '   "}},Nre={email:" ",profileSettingsHeader:"",interfaceTheme:"",interfaceLanguage:"",units:" ",fullName:" '",metric:" ",imperialBeta:"  ()",appSettingsHeader:"",saveButton:" ","userBio(about)":" ",defaultDisasterFeed:"   ",defaultOSMeditor:" OpenStreetMap   ()",successNotification:"   ",languageOption:{en:"",es:"",ar:"",ko:"",id:"",de:"",uk:""}},$re={title:" Disaster Ninja",no_data:"   ",sorting:" ...",loading:" ",search_location:" ",open_josm:"  JOSM",josm_logo_alt:" JOSM",see_all:"  ",wrong_id:" ID ",description:"<0>Kontur </0>         OpenStreetMap.     <4>osm.org</4>  ,      JOSM  ."},Ure={title:"  Disaster Ninja!",intro:"     ?           -  ? Disaster Ninja  <2>Kontur</2>    .<br/><br/>           .    .   ,         ,         , Disaster Ninja   :",l1:"1.        .",p1:"   ,      .      <2>Kontur</2>,        API.",l2:"2.     .",p2:' " "        .      ,     ,      ,   .',l3:"3.     .",p3:"    ,        <2> Kontur</2>      OpenStreetMap.  Kontur          .",l4:"4.       .",p4:' ""          , ,        .   ,  ,    . <br/>:       /  ,     /  .',p5:" ,        ,             OpenStreetMap    ,     JOSM.",goToMap:"  ",p6:" ,     .     Disaster Ninja,   -   ,      .         <1>hello@kontur.io</1>          .<br/><br/> Disaster Ninja     .      GitHub <8>Kontur</8>."},jre={get_location_error:"    ",feature_title:" "},Vre="",qre=" ",Hre={header:"   ",body:`     cookies,     ,    cookies,   Disaster Ninja   .   -    cookies        cookies.
  ,   [ ]( /)`,decline_all:"  cookies",accept_all:"  cookies"},Gre={start:"    ",finish:"    ",finishMessage:"  ",startMessage:"  ",noSensorsError:"     "},Wre={km:Wne,m:Kne,to:Zne,maps:Xne,logout:Qne,save:Yne,cancel:Jne,create:ere,disasters:tre,loading:nre,loading_events:rre,legend:ire,vertical_direction:ore,horizontal_direction:are,legend_presentation:sre,layers:lre,bivariate:ure,feed:cre,deselect:fre,spinner_text:pre,updated:hre,no_data_received:dre,wrong_data_received:mre,error:gre,sort_icon:yre,configs:vre,errors:_re,event_list:xre,categories:bre,groups:wre,modes:Sre,advanced_analytics_data_list:Cre,mcda:Ere,create_layer:kre,analytics_panel:Are,advanced_analytics_panel:Pre,advanced_analytics_empty:Tre,current_event:Ire,draw_tools:Ore,boundary_selector:Lre,geometry_uploader:Mre,focus_geometry:Rre,focus_geometry_layer:Fre,drawings:Dre,sidebar:zre,login:Bre,profile:Nre,reports:$re,about:Ure,locate_me:jre,episode:Vre,loading_episodes:qre,cookie_banner:Hre,live_sensor:Gre},Kre="en";ua.use(pR).use(AX).init({fallbackLng:Kre,debug:!1,defaultNS:"common",interpolation:{escapeValue:!1},contextSeparator:":",pluralSeparator:":",resources:{en:{common:UQ},es:{common:jY},ar:{common:VJ},ko:{common:qee},id:{common:Hte},de:{common:Gne},uk:{common:Wre}}});const Or={t:(e,t)=>{const n=ua.t(e,t);return typeof n=="string"?n:(console.error(`Not supported translation result for key: ${e}`),e)},instance:ua},ba=3,hR=[0,ba-1,ba*ba-ba,ba*ba-1],Hx=`${Or.t("bivariate.legend.low")}`,Gx=`${Or.t("bivariate.legend.high")}`,dR=Or.t("bivariate.legend.medium"),Zre=e=>Array.from(Array(ba),(t,n)=>n).includes(e),AE=e=>{const t=ba*ba-ba;return Array.from(Array(ba),(n,i)=>t+i).includes(e)},PE=e=>Array.from(Array(ba),(t,n)=>n*ba).includes(e),Xre=e=>Array.from(Array(ba),(t,n)=>n*ba+(ba-1)).includes(e);const Ew=mt.memo(({children:e,tooltipText:t,renderTooltip:n,tooltipId:i,hoverBehavior:s=!0,popupClasses:l})=>{const a=hE(Kv.setCurrentTooltip),g=hE(Kv.resetCurrentTooltip),_=A=>{t&&a({popupClasses:l,popup:t,position:{x:A.clientX,y:A.clientY},onOuterClick(I,O){O()},initiatorId:i,hoverBehavior:s})};return e({showTooltip:(A,...I)=>{n?n(A,a,...I):_(A)},hideTooltip:()=>{g()}})});Ew.displayName="TooltipWrapper";function id(e){return["get",e]}function Qre(e){return["var",e]}function CT(e,t){return["<",e,t]}function TE(e,t){return["!=",e,t]}function Yre(e,t){return["==",e,t]}function IE(e,t){return[e,t]}function OE(...e){const t=e.pop();return["case",...e.flat(2),t]}function Jre(...e){return["concat",...e]}function eie(e,t,n){return["let",e,t,n]}function mR(...e){return["any",...e]}function LE(e){return typeof e=="string"?e==="1"?1:id(e):Array.isArray(e)?e.map((t,n)=>n===0?t:LE(t)):e}const tie=64,ME=e=>String.fromCharCode(tie+e);function nie(e,t){const n=LE(e.propName),i=LE(t.propName);return Jre(OE(e.borders.map((s,l)=>IE(CT(n,s),ME(l))),ME(e.borders.length)),OE(t.borders.map((s,l)=>IE(CT(i,s),l)),t.borders.length))}function rie(e,t,n){return OE(Object.entries(t).map(([i,s])=>IE(Yre(Qre(e),i),s)),n)}function iie(e){return Object.fromEntries(e.map(Object.values))}function oie(e,t){return mR(TE(["/",id(e.quotient[0]),id(e.quotient[1])],0),TE(["/",id(t.quotient[0]),id(t.quotient[1])],0))}function aie(e,t,n){return eie("class",nie({propName:["/",...e.quotient],borders:e.steps.reduce((i,{value:s})=>(i.push(s),i),[])},{propName:["/",...t.quotient],borders:t.steps.reduce((i,{value:s})=>(i.push(s),i),[])}),rie("class",n,"transparent"))}function gR({x:e,y:t,colors:n,source:i,sourceLayer:s,id:l="bivariate"}){const a={id:l,type:"fill",layout:{},filter:oie(e,t),paint:{"fill-color":aie(e,t,iie(n)),"fill-opacity":1,"fill-antialias":!1}};return i&&(a.source=i),s&&(a["source-layer"]=s),a}function sie(e,t="id"){const n=e.reduce((i,s)=>{const l=s[t].slice(0,1);return i[l]?i[l].push(s):i[l]=[s],i},{});return Object.values(n)}function lie(e,t="id"){return[...sie(e,t)].reverse().reduce((i,s)=>i.concat(s),[])}const uie=e=>e!==null&&typeof e=="object"&&"message"in e,yR=e=>e.charAt(0).toUpperCase()+e.slice(1),cie=e=>e.map(yR).join(", "),RE=(e,t)=>e.reduce((n,i)=>n+i[t],0),fie=e=>e!=null,pie=e=>Array.isArray(e)?cie(e):yR(e),ET=e=>{if(!e)return"";const[t,n]=e;return kT(t.unit.id)?n.name==="one"?`${t.label} (${t.unit.shortName})`:kT(n.unit.id)?n.name==="area_km2"?`${t.label} (${t.unit.shortName}/${n.unit.shortName})`:`${t.label} to ${n.label} (${t.unit.shortName}/${n.unit.shortName})`:`${t.label} to ${n.label} (${t.unit.shortName})`:`${t.label} to ${n.label}`},kT=e=>!!(e&&e!=="other"),hie="_tooltipRoot_zjmcz_1",die="_tooltipRow_zjmcz_11",mie="_sentimentDirection_zjmcz_17",gie="_sentimentLabel_zjmcz_21",yie="_sentimentInfo_zjmcz_25",vie="_indicator_zjmcz_29",Im={tooltipRoot:hie,tooltipRow:die,sentimentDirection:mie,sentimentLabel:gie,sentimentInfo:yie,indicator:vie},_ie=({children:e,hints:t})=>{const n=(i,s,l,a)=>{t&&hR.includes(a)&&s({popup:Ze(xie,{cellIndex:a,hints:t}),position:{x:i.clientX,y:i.clientY},hoverBehavior:!0})};return mt.isValidElement(e)?Ze(Ew,{renderTooltip:n,children:({showTooltip:i,hideTooltip:s})=>mt.cloneElement(e,{onCellPointerOver:i,onCellPointerLeave:s})}):null},xie=({hints:e,cellIndex:t})=>{var i,s,l,a,g,_;if(!e)return null;const n=[{label:(i=e.x)==null?void 0:i.label,direction:(l=(s=e.x)==null?void 0:s.direction)==null?void 0:l[AE(t)?0:1],indicator:AE(t)?Hx:Gx},{label:(a=e.y)==null?void 0:a.label,direction:(_=(g=e.y)==null?void 0:g.direction)==null?void 0:_[PE(t)?0:1],indicator:PE(t)?Hx:Gx}];return Ze("div",{className:to(Im.tooltipRoot),children:n.map(({label:w,direction:C,indicator:A},I)=>jn("div",{className:to(Im.tooltipRow),children:[Ze("span",{className:to(Im.indicator),children:A}),jn("span",{className:to(Im.sentimentInfo),children:[jn("span",{className:to(Im.sentimentLabel),children:[w," "]}),C&&Ze("span",{className:to(Im.sentimentDirection),children:pie(C)})]})]},I))})},bie={hints:{x:{label:"Average NDVI, JUN 2019",direction:[["bad"],["good"]]},y:{label:"Multi-hazard exposure PDC GRVA",direction:[["unimportant"],["bad","important"]]}}},wie={x:{label:"Multi-hazard exposure PDC GRVA to 1",steps:[{label:"",value:0},{label:"",value:.48},{label:"",value:.62},{label:"",value:1}],quality:.997101882904748,quotient:["mhe_index","one"]},y:{label:"Average NDVI, JUN 2019 to 1",steps:[{label:"",value:-1},{label:"",value:.3625118070036407},{label:"",value:.6441754083082613},{label:"",value:1}],quality:.9410965072118505,quotient:["avg_ndvi","one"]}},Sie=[{label:"C1",color:"rgba(90,200,127,0.5)"},{label:"C2",color:"rgba(179,165,130,0.5)"},{label:"C3",color:"rgba(153,153,153,0.5)"},{label:"B1",color:"rgba(169,218,122,0.5)"},{label:"B2",color:"rgba(195,163,111,0.5)"},{label:"B3",color:"rgba(204,103,116,0.5)"},{label:"A1",color:"rgba(232,232,157,0.5)"},{label:"A2",color:"rgba(216,159,88,0.5)"},{label:"A3",color:"rgba(228,26,28,0.5)"}];function Cie(){return jn(oM,{children:[Ze(aR,{}),Ze(_ie,{meta:bie,children:Ze(oq,{showAxisLabels:!0,size:ba,axis:wie,cells:Sie})})]})}const Eie="_LegendGrid_1ko5k_1",kie="_LegendGridCell_1ko5k_10",Aie="_LegendGridCellChanged_1ko5k_17",Pie="_LegendGridCellUndefinedChanged_1ko5k_22",Tie="_CircleIndicator_1ko5k_26",Iie="_UndefinedColorsIndicator_1ko5k_36",Om={LegendGrid:Eie,LegendGridCell:kie,LegendGridCellChanged:Aie,LegendGridCellUndefinedChanged:Pie,CircleIndicator:Tie,UndefinedColorsIndicator:Iie},Dy=({legendSteps:e,changes:t={}})=>{const n=hR.map(s=>e[s]),i=e.some(s=>s.isFallbackColor);return jn("div",{className:Om.LegendGrid,children:[n.map(s=>{var w;let l=s.color,a=!1,g,_;if(t[s.label]){a=!0;const C=(w=t[s.label])==null?void 0:w.color;l=C,g=C?Om.LegendGridCellChanged:Om.LegendGridCellUndefinedChanged}return l&&(_={backgroundColor:l}),Ze("div",{className:to(Om.LegendGridCell,g),style:_,children:a&&Ze("div",{className:Om.CircleIndicator})},s.label)}),i&&Ze("div",{className:Om.UndefinedColorsIndicator,children:Ze(Oie,{})})]})},Oie=()=>jn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[Ze("circle",{cx:"10",cy:"10",r:"10",fill:"white"}),Ze("path",{d:"M10 3C6.13438 3 3 6.13438 3 10C3 13.8656 6.13438 17 10 17C13.8656 17 17 13.8656 17 10C17 6.13438 13.8656 3 10 3ZM10 15.8125C6.79063 15.8125 4.1875 13.2094 4.1875 10C4.1875 6.79063 6.79063 4.1875 10 4.1875C13.2094 4.1875 15.8125 6.79063 15.8125 10C15.8125 13.2094 13.2094 15.8125 10 15.8125Z",fill:"#F5222D"}),Ze("path",{d:"M9.25 12.75C9.25 12.9489 9.32902 13.1397 9.46967 13.2803C9.61032 13.421 9.80109 13.5 10 13.5C10.1989 13.5 10.3897 13.421 10.5303 13.2803C10.671 13.1397 10.75 12.9489 10.75 12.75C10.75 12.5511 10.671 12.3603 10.5303 12.2197C10.3897 12.079 10.1989 12 10 12C9.80109 12 9.61032 12.079 9.46967 12.2197C9.32902 12.3603 9.25 12.5511 9.25 12.75ZM9.625 11H10.375C10.4438 11 10.5 10.9438 10.5 10.875V6.625C10.5 6.55625 10.4438 6.5 10.375 6.5H9.625C9.55625 6.5 9.5 6.55625 9.5 6.625V10.875C9.5 10.9438 9.55625 11 9.625 11Z",fill:"#F5222D"})]}),zy=[{label:"A1",color:"rgba(232,232,157,0.5)"},{label:"A2",color:"rgba(216,159,88,0.5)"},{label:"A3",color:"rgba(228,26,28,0.5)"},{label:"B1",color:"rgba(169,218,122,0.5)"},{label:"B2",color:"rgba(159,171,87,0.5)"},{label:"B3",color:"rgba(140,127,57,0.5)"},{label:"C1",color:"rgba(90,200,127,0.5)"},{label:"C2",color:"rgba(88,176,117,0.5)"},{label:"C3",color:"rgba(83,152,106,0.5)"}],Lie=jn("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:["All next colors - undefined",Ze(Dy,{legendSteps:zy,changes:{A1:{color:void 0},A3:{color:void 0},C1:{color:void 0},C3:{color:void 0}}}),"No changes",Ze(Dy,{legendSteps:zy,changes:{}}),"All changed",Ze(Dy,{legendSteps:zy,changes:{A1:{color:"rgba(173, 169, 200, 0.5)"},A3:{color:"rgba(12, 155, 237, 0.5)"},C1:{color:"rgba(171, 216, 237, 0.5)"},C3:{color:"rgba(83, 152, 106, 0.5)"}}}),"Half of cells changed",Ze(Dy,{legendSteps:zy,changes:{A1:{color:"rgba(173, 169, 200, 0.5)"},C3:{color:"rgba(83, 152, 106, 0.5)"}}}),"Half of cells changed, half comes incorrect",Ze(Dy,{legendSteps:zy,changes:{A1:{color:void 0},A3:{color:"rgba(12, 155, 237, 0.5)"},C1:{color:"rgba(173, 169, 200, 0.5)"},C3:{color:void 0}}})]}),Mie="modulepreload",Rie=function(e,t){return new URL(e,t).href},AT={},Fie=function(t,n,i){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=Rie(l,i),l in AT)return;AT[l]=!0;const a=l.endsWith(".css"),g=a?'[rel="stylesheet"]':"";if(!!i)for(let C=s.length-1;C>=0;C--){const A=s[C];if(A.href===l&&(!a||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const w=document.createElement("link");if(w.rel=a?"stylesheet":Mie,a||(w.as="script",w.crossOrigin=""),w.href=l,document.head.appendChild(w),a)return new Promise((C,A)=>{w.addEventListener("load",C),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},Die=e=>new Proxy({},{get:(t,n)=>{if(typeof n=="string")return mt.lazy(()=>e(n).then(i=>({default:i[n]})))}}),PT="bivariate-greetings-disabled",zie="_container_zzzsn_1",Bie="_closeButton_zzzsn_8",TT={container:zie,closeButton:Bie},{BivariateGreetings:Nie}=Die(()=>Fie(()=>import("./BivariateGreetings-ca614728.js"),[],import.meta.url)),$ie=({className:e})=>{const[t,n]=mt.useState(!1);mt.useEffect(()=>{!Qp.getItem(PT)&&!t&&n(!0)},[]);const i=()=>{n(!1),Qp.setItem(PT,"true")};return t?jn("div",{className:to(e,TT.container),children:[Ze(mt.Suspense,{fallback:null,children:Ze(Nie,{})}),Ze("div",{onClick:i,className:TT.closeButton,children:Ze(Jj,{})})]}):null},Uie=()=>Ze($ie,{});var jie=0;function Vie(e){var t=e.get,n=e.set,i=e.throttle,s=i===void 0?0:i;return function(l){var a="__persistIntervalId"+ ++jie;return function(g){return function(_,w){var C=w.atom.id;w.tracks==null&&(w.state=t(l??C));var A=g(_,w);return n!=null&&_.schedule(function(){var I;s==0?n(l??C,A.state):((I=A.ctx[a])!=null?I:null)===null&&(A.ctx[a]=setTimeout(function(){A.ctx[a]=null,n(l??C,_.getCache(A.atom).state)},150))}),A}}}}var qie={get:function(e){var t,n=(t=globalThis.localStorage)==null?void 0:t.getItem(e);return n?JSON.parse(n):void 0},set:function(e,t){var n;return(n=globalThis.localStorage)==null?void 0:n.setItem(e,JSON.stringify(t))},throttle:150};Vie(qie);function Hie(e,t){if(Object.is(e,t))return!0;if(Ux(e)&&Ux(t)){var n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every(function(s){return Object.is(e[s],t[s])})}return!1}function vR(e){return e===void 0&&(e=Hie),function(t){return function(n,i){var s=t(n,i);return i.tracks!=null&&e(i.state,s.state)&&(s.state=i.state),s}}}class _g extends Error{constructor(n,i,s=0){super(n);un(this,"problem");un(this,"status",0);this.problem=i,this.status=s,Object.setPrototypeOf(this,_g.prototype)}}function _R(e){return e.problem?typeof e.problem=="object":!1}const xR="Abort error",IT=e=>e?typeof e=="string"?e===xR:_R(e)?e.problem.kind==="canceled":e instanceof DOMException?e.name==="AbortError":!1:!1;async function Gie(e,t){return new Promise((n,i)=>{if(e.signal.aborted)return Promise.reject(new DOMException("Aborted","AbortError"));const s=()=>{e.signal.removeEventListener("abort",s),i(new DOMException("Aborted","AbortError"))};e.signal.addEventListener("abort",s),t.then(n).catch(i).finally(()=>e.signal.removeEventListener("abort",s))})}function Wie(e){return"loading"in e||"error"in e}const Kie="",Zie=e=>(...t)=>{e===Kie&&console.log(...t)},SS={inheritState:!1,store:JM,auto:!0},bR=(e=>t=>{if(!e.has(t))return e.add(t),t;console.warn(`Atom with name ${t} already exist. Full page reload recommended`);const n=t+performance.now();return bR(n)})(new Set);function wR(e,t,n,i={}){const s=Zie(n),l={...i,auto:i.auto??SS.auto,inheritState:i.inheritState??SS.inheritState,store:i.store??SS.store},a={request:_=>_,refetch:()=>null,cancel:()=>null,_done:(_,w)=>({params:_,data:w}),_error:(_,w)=>({params:_,error:w}),_loading:_=>({params:_})};return e&&(a.depsAtom=e),Ti(a,({onAction:_,schedule:w,create:C,onChange:A,get:I},O={loading:!1,data:null,error:null,lastParams:null,dirty:!1})=>{const D={...O};return _("request",B=>{D.dirty=!0,w(async(H,R)=>{if(s("1. Request",B),R.abortController){s("2. Cancel flow"),R.abortController.abort(),delete R.abortController;let q=!1;try{s("2.1. Cancel flow: await activeRequest"),await R.activeRequest}catch(Y){s("2.2. Cancel flow: activeRequest have error"),q=IT(Y)}q&&(s("2.3. Cancel flow: activeRequest was canceled"),s("2.4. Repeat request"),H(C("request",B)));return}s("3. Set loading state"),H(C("_loading",B));const U=new AbortController;try{R.abortController=U,R.activeRequest=Gie(U,t(B,U)),s("4. Wait result");const q=await R.activeRequest;q===void 0&&console.warn("resourceAtom: fetcherResult undefined"),delete R.activeRequest,s("5. Check that it was aborted:"),U.signal.throwIfAborted(),s("5.1.A. request was not aborted"),R.abortController===U&&(s("5.1.A.1. Done"),delete R.abortController,H(C("_done",B,q)),l.onSuccess&&l.onSuccess(H,B,q))}catch(q){if(IT(q))s("5.1.B. request was aborted"),s("5.1.B.1. Error"),H(C("_error",B,xR));else if(R.abortController===U){delete R.abortController,s("5.1.C Not abort error"),console.error(`[${n}]:`,q);const Y=uie(q)?q.message:typeof q=="string"?q:"Unknown";H(C("_error",B,Y))}}})}),_("refetch",()=>{w((B,H)=>{O.dirty&&!O.loading?B(C("request",D.lastParams)):console.error(`[${n}]:`,"Do not call refetch before request")})}),_("cancel",()=>{w(async(B,H)=>{H.abortController&&(H.abortController.abort(),delete H.abortController)})}),_("_loading",({params:B})=>{D.loading=!0,D.error=null,D.lastParams=B}),_("_error",({params:B,error:H})=>{D.error=H,D.lastParams=B,D.loading=!1}),_("_done",({data:B,params:H})=>{D.data=B,D.error=null,D.loading=!1,D.lastParams=H}),a.depsAtom?A("depsAtom",B=>{var H;Ux(B)?(l.inheritState&&(D.loading=B.loading||D.loading,D.error=B.error||D.error),Wie(B)?!B.loading&&!B.error&&B.dirty&&w(R=>R(C("request",B.data))):w(R=>R(C("request",B)))):B!==null?w(R=>R(C("request",B))):console.warn(`Resource atom with name ${n} skips running as its dependency state ${(H=a==null?void 0:a.depsAtom)==null?void 0:H.id} is null`)}):l.auto&&!D.dirty&&w(B=>B(C("request",null))),D},{id:bR(n),store:l.store,decorators:[vR()]})}const Fp={global:{},custom:{},overrides:{},merged:{}};function Xie(){var n,i,s,l;const e=globalThis.konturAppConfig??{},t={apiGateway:e.API_GATEWAY,reportsApi:e.REPORTS_API,bivariateTilesRelativeUrl:e.BIVARIATE_TILES_RELATIVE_URL,bivariateTilesServer:e.BIVARIATE_TILES_SERVER,bivariateTilesIndicatorsClass:e.BIVARIATE_TILES_INDICATORS_CLASS,refreshIntervalSec:e.REFRESH_INTERVAL_SEC,mapBaseStyle:e.MAP_BASE_STYLE,featuresByDefault:e.FEATURES_BY_DEFAULT,defaultFeed:e.DEFAULT_FEED,keycloakUrl:e.KEYCLOAK_URL,keycloakRealm:e.KEYCLOAK_REALM,keycloakClientId:e.KEYCLOAK_CLIENT_ID,yandexMetricaId:e.YANDEX_METRICA_ID,baseUrl:{BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_BASE_PATH,autoFocus:{desktopPaddings:{top:((n=e.AUTOFOCUS_PADDINGS)==null?void 0:n[0])??0,right:((i=e.AUTOFOCUS_PADDINGS)==null?void 0:i[1])??0,bottom:((s=e.AUTOFOCUS_PADDINGS)==null?void 0:s[2])??0,left:((l=e.AUTOFOCUS_PADDINGS)==null?void 0:l[3])??0},maxZoom:e.AUTOFOCUS_ZOOM},intercom:{name:e.INTERCOM_DEFAULT_NAME,app_id:e.INTERCOM_APP_ID,custom_launcher_selector:e.INTERCOM_SELECTOR},osmEditors:e.OSM_EDITORS||[{id:"josm",title:"JOSM",url:"https://www.openstreetmap.org/edit?editor=remote#map="}],effectiveFeatures:{}};return Fp.global=t,t}function Qie(e){return e.features&&e.features.length>0?Object.fromEntries((e.features??[]).map(t=>[t.name,t.configuration||!0])):Object.fromEntries((e.featuresByDefault??[]).map(t=>[t,!0]))}function Yie(){Xie();const e={defaultLayers:[],...Fp.global,...Fp.custom,...Fp.overrides};return e.effectiveFeatures=Qie(e),Object.assign(Fp.merged,e),e}Yie();const no=new Proxy(Fp.merged,{get(e,t){return nA&&console.warn("\x1B[1;35m appConfig\x1B[0m",t,Fp.merged[t]),Fp.merged[t]}});console.info(`%c Disaster Ninja ${{}.PACKAGE_VERSION} deployment:
  - Build Time: ${{}.BUILD_TIME}
  - Git Branch: ${{}.GIT_BRANCH}
  - Git Commit: #${{}.GIT_COMMIT_HASH}
  - Git Commit Time: ${{}.GIT_COMMIT_TIME}
  `,"color: #bada55");const Jie="application/json",SR="Content-Type",CS=Symbol();function OT(e={}){var t;return(t=Object.entries(e).find(([n])=>n.toLowerCase()===SR.toLowerCase()))===null||t===void 0?void 0:t[1]}function LT(e){return/^application\/.*json.*/.test(e)}const ld=function(e,t,n=!1){return Object.entries(t).reduce((i,[s,l])=>{const a=e[s];return Array.isArray(a)&&Array.isArray(l)?i[s]=n?[...a,...l]:l:typeof a=="object"&&typeof l=="object"?i[s]=ld(a,l,n):i[s]=l,i},{...e})},xg={options:{},errorType:"text",polyfills:{},polyfill(e,t=!0,n=!1,...i){const s=this.polyfills[e]||(typeof self<"u"?self[e]:null)||(typeof global<"u"?global[e]:null);if(t&&!s)throw new Error(e+" is not defined");return n&&s?new s(...i):s}};function eoe(e,t=!1){xg.options=t?e:ld(xg.options,e)}function toe(e,t=!1){xg.polyfills=t?e:ld(xg.polyfills,e)}function noe(e){xg.errorType=e}const roe=e=>t=>e.reduceRight((n,i)=>i(n),t)||t;class CR extends Error{}const ioe=e=>{const t=Object.create(null);e=e._addons.reduce((q,Y)=>Y.beforeRequest&&Y.beforeRequest(q,e._options,t)||q,e);const{_url:n,_options:i,_config:s,_catchers:l,_resolvers:a,_middlewares:g,_addons:_}=e,w=new Map(l),C=ld(s.options,i);let A=n;const I=roe(g)((q,Y)=>(A=q,s.polyfill("fetch")(q,Y)))(n,C),O=new Error,D=I.catch(q=>{throw{__wrap:q}}).then(q=>{if(!q.ok){const Y=new CR;if(Y.cause=O,Y.stack=Y.stack+`
CAUSE: `+O.stack,Y.response=q,Y.url=A,q.type==="opaque")throw Y;return q.text().then(se=>{var W;if(Y.message=se,s.errorType==="json"||((W=q.headers.get("Content-Type"))===null||W===void 0?void 0:W.split(";")[0])==="application/json")try{Y.json=JSON.parse(se)}catch{}throw Y.text=se,Y.status=q.status,Y})}return q}),B=q=>q.catch(Y=>{const se=Y.__wrap||Y,W=se.status&&w.get(se.status)||w.get(se.name)||Y.__wrap&&w.has(CS)&&w.get(CS);if(W)return W(se,e);throw se}),H=q=>Y=>B(q?D.then(se=>se&&se[q]()).then(se=>Y?Y(se):se):D.then(se=>Y?Y(se):se)),R={_wretchReq:e,_fetchReq:I,_sharedState:t,res:H(null),json:H("json"),blob:H("blob"),formData:H("formData"),arrayBuffer:H("arrayBuffer"),text:H("text"),error(q,Y){return w.set(q,Y),this},badRequest(q){return this.error(400,q)},unauthorized(q){return this.error(401,q)},forbidden(q){return this.error(403,q)},notFound(q){return this.error(404,q)},timeout(q){return this.error(408,q)},internalError(q){return this.error(500,q)},fetchError(q){return this.error(CS,q)}},U=_.reduce((q,Y)=>({...q,...Y.resolver}),R);return a.reduce((q,Y)=>Y(q,e),U)},ooe={_url:"",_options:{},_config:xg,_catchers:new Map,_resolvers:[],_deferred:[],_middlewares:[],_addons:[],addon(e){return{...this,_addons:[...this._addons,e],...e.wretch}},errorType(e){return{...this,_config:{...this._config,errorType:e}}},polyfills(e,t=!1){return{...this,_config:{...this._config,polyfills:t?e:ld(this._config.polyfills,e)}}},url(e,t=!1){if(t)return{...this,_url:e};const n=this._url.split("?");return{...this,_url:n.length>1?n[0]+e+"?"+n[1]:this._url+e}},options(e,t=!1){return{...this,_options:t?e:ld(this._options,e)}},headers(e){return{...this,_options:ld(this._options,{headers:e||{}})}},accept(e){return this.headers({Accept:e})},content(e){return this.headers({[SR]:e})},auth(e){return this.headers({Authorization:e})},catcher(e,t){const n=new Map(this._catchers);return n.set(e,t),{...this,_catchers:n}},resolve(e,t=!1){return{...this,_resolvers:t?[e]:[...this._resolvers,e]}},defer(e,t=!1){return{...this,_deferred:t?[e]:[...this._deferred,e]}},middlewares(e,t=!1){return{...this,_middlewares:t?e:[...this._middlewares,...e]}},fetch(e=this._options.method,t="",n=null){let i=this.url(t).options({method:e});const s=OT(i._options.headers),l=typeof n=="object"&&(!i._options.headers||!s||LT(s));return i=n?l?i.json(n,s):i.body(n):i,ioe(i._deferred.reduce((a,g)=>g(a,a._url,a._options),i))},get(e=""){return this.fetch("GET",e)},delete(e=""){return this.fetch("DELETE",e)},put(e,t=""){return this.fetch("PUT",t,e)},post(e,t=""){return this.fetch("POST",t,e)},patch(e,t=""){return this.fetch("PATCH",t,e)},head(e=""){return this.fetch("HEAD",e)},opts(e=""){return this.fetch("OPTIONS",e)},body(e){return{...this,_options:{...this._options,body:e}}},json(e,t){const n=OT(this._options.headers);return this.content(t||LT(n)&&n||Jie).body(JSON.stringify(e))}};function xf(e="",t={}){return{...ooe,_url:e,_options:t}}xf.default=xf;xf.options=eoe;xf.errorType=noe;xf.polyfills=toe;xf.WretchError=CR;function MT(e){return typeof e<"u"?e:""}const aoe=(e,t,n,i)=>{let s;if(typeof t=="string")s=t;else{const a=i.polyfill("URLSearchParams",!0,!0);for(const g in t){const _=t[g];if(t[g]instanceof Array)for(const w of _)a.append(g,MT(w));else a.append(g,MT(_))}s=a.toString()}const l=e.split("?");return s?n||l.length<2?l[0]+"?"+s:e+"&"+s:n?l[0]:e},soe={wretch:{query(e,t=!1){return{...this,_url:aoe(this._url,e,t,this._config)}}}},loe=soe;function RT(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(typeof t=="object"?JSON.stringify(t):""+t)}function uoe(e){return Object.keys(e).map(t=>{const n=e[t];return n instanceof Array?n.map(i=>RT(t,i)).join("&"):RT(t,n)}).join("&")}const coe={wretch:{formUrl(e){return this.body(typeof e=="string"?e:uoe(e)).content("application/x-www-form-urlencoded")}}},foe=coe;function FE(e){this.message=e}FE.prototype=new Error,FE.prototype.name="InvalidCharacterError";var FT=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new FE("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,s=0,l=0,a="";i=t.charAt(l++);~i&&(n=s%4?64*n+i:i,s++%4)?a+=String.fromCharCode(255&n>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function poe(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(FT(n).replace(/(.)/g,function(i,s){var l=s.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}(t)}catch{return FT(t)}}function Wx(e){this.message=e}function hoe(e,t){if(typeof e!="string")throw new Wx("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(poe(e.split(".")[n]))}catch(i){throw new Wx("Invalid token specified: "+i.message)}}Wx.prototype=new Error,Wx.prototype.name="InvalidTokenError";function doe(e){if(e!=null&&e.json){const t=e==null?void 0:e.json;if(t!==null){if(Array.isArray(t))return t.map(n=>n.name&&n.message?`${n.name}: ${n.message}`:n).join("<br/>");if(t!=null&&t.error)return t.error;if(t!=null&&t.errors&&Array.isArray(t.errors))return t.errors.reduce((n,i)=>(i!=null&&i.message&&n.push(i.message),n),[]).join("<br/>")}return String(t)}return(e==null?void 0:e.text)??(e==null?void 0:e.message)??"Unknown Error"}function DT(e){var s,l;let t="",n={kind:"unknown",temporary:!0},i=0;return e instanceof _g?e:(nA&&console.error(e),e instanceof xf.WretchError?(i=e.status,i===400?n={kind:"bad-request"}:i===401?(t=((s=e.json)==null?void 0:s.error_description)??(e==null?void 0:e.message)??"Auth error",n={kind:"unauthorized",data:(l=e.json)==null?void 0:l.error}):i===403?n={kind:"forbidden"}:i===404?n={kind:"not-found"}:i===408?n={kind:"timeout",temporary:!0}:i>=500&&(n={kind:"server",data:(e==null?void 0:e.json)??(e==null?void 0:e.text)})):moe(e)?n={kind:"canceled"}:n={kind:"client-unknown"},t||(t=doe(e)),new _g(t||"Unknown error",n,i))}function moe(e){var t;return(e==null?void 0:e.name)==="AbortError"||((t=e==null?void 0:e.problem)==null?void 0:t.kind)==="canceled"}const By={GET:"get",POST:"post",PUT:"put",PATCH:"patch",DELETE:"delete"},ES="auth_token",Ap=class{constructor({instanceId:t="default",notificationService:n,loginApiPath:i="",refreshTokenApiPath:s="",keycloakClientId:l="",unauthorizedCallback:a,disableAuth:g=!1,storage:_=Qp,baseURL:w}){un(this,"instanceId");un(this,"notificationService");un(this,"unauthorizedCallback");un(this,"loginApiPath");un(this,"refreshTokenApiPath");un(this,"disableAuth");un(this,"storage");un(this,"token","");un(this,"refreshToken","");un(this,"tokenExpirationDate");un(this,"tokenRefreshFlowPromise");un(this,"expiredTokenCallback",()=>{});un(this,"keycloakClientId");un(this,"baseURL");un(this,"timeToRefresh",1e3*60*5);this.instanceId=t,this.notificationService=n,this.loginApiPath=i,this.refreshTokenApiPath=s,this.keycloakClientId=l,this.disableAuth=g,this.storage=_,this.unauthorizedCallback=a,this.baseURL=w}static getInstance(t="default"){if(Ap.instances[t])return Ap.instances[t];throw new Error("You have to initialize api client first!")}static init(t){const n=t.instanceId||"default";if(Ap.instances[n])throw new Error(`Api client instance with Id: ${n} already initialized`);return Ap.instances[n]=new Ap(t),Ap.instances[n]}storeTokens(t,n){let i="";try{const s=hoe(t);if(nA&&console.debug({decodedToken:s,now:new Date().getTime()}),s&&s.exp){const l=new Date(s.exp*1e3);if(l>new Date)return this.token=t,this.refreshToken=n,this.tokenExpirationDate=l,this.storage.setItem(ES,JSON.stringify({token:t,refreshToken:n})),!0;i="Token is expired right after receiving, clock is out of sync"}}catch{i="Token decode error"}throw new _g(i||"Token error",{kind:"bad-data"})}checkLocalAuthToken(){try{const t=this.storage.getItem(ES);if(t){const{token:n,refreshToken:i}=JSON.parse(t);if(n&&i)return this.storeTokens(n,i)}}catch{}return this.resetAuth(),!1}resetAuth(){this.token="",this.refreshToken="",this.tokenExpirationDate=void 0,this.storage.removeItem(ES)}async _tokenRefreshFlow(){if(!this.tokenExpirationDate)return!1;const t=this.tokenExpirationDate.getTime()-new Date().getTime();if(t<0)return this.resetAuth(),this.expiredTokenCallback(),!1;if(t<this.timeToRefresh)try{await this.refreshAuthToken()}catch{return!1}return!0}async isTokenOk(){this.tokenRefreshFlowPromise||(this.tokenRefreshFlowPromise=this._tokenRefreshFlow());const t=await this.tokenRefreshFlowPromise;return this.tokenRefreshFlowPromise=void 0,t}async login(t,n){const i={username:t,password:n,client_id:this.keycloakClientId,grant_type:"password"};return await this.requestTokenOrThrow(this.loginApiPath,i)}async refreshAuthToken(){const t={client_id:this.keycloakClientId,refresh_token:this.refreshToken,grant_type:"refresh_token"};return await this.requestTokenOrThrow(this.refreshTokenApiPath,t)}async requestTokenOrThrow(t,n){var i;try{const s=await xf(t).addon(foe).formUrl(n).errorType("json").post().res(kS);if((i=s==null?void 0:s.data)!=null&&i.access_token)return this.storeTokens(s.data.access_token,s.data.refresh_token);throw new _g("Token error",{kind:"bad-data"})}catch(s){throw DT(s)}}async logout(){this.resetAuth()}async call(t,n,i,s=!this.disableAuth,l={}){var _;const a=["post","put","patch"];let g=xf(this.baseURL,{mode:"cors"}).addon(loe).url(n);l.signal&&(g=g.options({signal:l.signal})),l.headers&&(g=g.headers(l.headers)),!this.disableAuth&&s&&this.token&&await this.isTokenOk()&&(g=g.auth(`Bearer ${this.token}`).catcher(401,async(C,A)=>(await this.refreshAuthToken(),A.auth(`Bearer ${this.token}`).fetch().unauthorized(I=>{throw I}).res(kS)))),i&&(g=a.includes(t)?g.json(i):g.query(i));try{return(await g[t]().res(kS)).data}catch(w){const C=DT(w);if(C.problem.kind==="canceled")throw C;C.problem.kind==="unauthorized"&&(this.resetAuth(),(_=this.unauthorizedCallback)==null||_.call(this,this));const A=l.errorsConfig;throw A&&A.messages&&(typeof A.messages!="string"?C.status in A.messages&&(C.message=A.messages[C.status]):C.message=A.messages),(A==null?void 0:A.hideErrors)!==!0&&this.notificationService.error({title:"Error",description:C.message}),C}}async get(t,n,i=!this.disableAuth,s){return this.call(By.GET,t,n,i,s)}async post(t,n,i=!this.disableAuth,s){return this.call(By.POST,t,n,i,s)}async put(t,n,i=!this.disableAuth,s){return this.call(By.PUT,t,n,i,s)}async patch(t,n,i=!this.disableAuth,s){return this.call(By.PATCH,t,n,i,s)}async delete(t,n=!this.disableAuth,i){return this.call(By.DELETE,t,void 0,n,i)}};let ud=Ap;un(ud,"instances",{});async function kS(e){return e.status===204?(e.data=null,e):(e.ok?(e.headers.get("content-type")??"").includes("application/json")?e.data=await e.json():e.data=await e.text():console.debug("autoParseBody",e),e)}const Wy=Ti({showNotification:(e,t,n)=>({type:e,message:t,lifetimeSec:n}),removeNotification:e=>e},({onAction:e,schedule:t,create:n},i=[])=>(e("showNotification",({type:s,message:l,lifetimeSec:a})=>{const g=fV(4),_=()=>Wy.removeNotification.dispatch(g);i=[...i,{id:g,type:s,message:l,lifetimeSec:a,onClose:_}],t(w=>{setTimeout(_,a*1e3)})}),e("removeNotification",s=>i=i.filter(({id:l})=>l!==s)),[...i]),"[Shared state] currentNotificationAtom"),Ym=class{constructor(){un(this,"defaultLifetimeSec",10)}static getInstance(){if(Ym.instance)return Ym.instance;throw new Error("You have to initialize api client first!")}static init(){Ym.instance=new Ym}error(t,n){Wy.showNotification.dispatch("error",t,n||this.defaultLifetimeSec)}warning(t,n){Wy.showNotification.dispatch("warning",t,n||this.defaultLifetimeSec)}info(t,n){Wy.showNotification.dispatch("info",t,n||this.defaultLifetimeSec)}success(t,n){Wy.showNotification.dispatch("success",t,n||this.defaultLifetimeSec)}};let cv=Ym;un(cv,"instance");cv.init();const ER=cv.getInstance();ud.init({notificationService:ER,baseURL:no.apiGateway,loginApiPath:`${no.keycloakUrl}/auth/realms/${no.keycloakRealm}/protocol/openid-connect/token`,refreshTokenApiPath:`${no.keycloakUrl}/auth/realms/${no.keycloakRealm}/protocol/openid-connect/token`,keycloakClientId:no.keycloakClientId,unauthorizedCallback(e){var t;e.logout(),(t=e.expiredTokenCallback)==null||t.call(e)}});const kR=ud.getInstance();ud.init({instanceId:"reports",notificationService:ER,baseURL:no.reportsApi,disableAuth:!0});ud.getInstance("reports");/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fv(e,t,n,i){function s(l){return l instanceof n?l:new n(function(a){a(l)})}return new(n||(n=Promise))(function(l,a){function g(C){try{w(i.next(C))}catch(A){a(A)}}function _(C){try{w(i.throw(C))}catch(A){a(A)}}function w(C){C.done?l(C.value):s(C.value).then(g,_)}w((i=i.apply(e,t||[])).next())})}class Vi{constructor(){this.mutex=Promise.resolve()}lock(){let t=()=>{};return this.mutex=this.mutex.then(()=>new Promise(t)),new Promise(n=>{t=n})}dispatch(t){return fv(this,void 0,void 0,function*(){const n=yield this.lock();try{return yield Promise.resolve(t())}finally{n()}})}}var AS;function goe(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}const DE=goe(),PS=(AS=DE.Buffer)!==null&&AS!==void 0?AS:null,yoe=DE.TextEncoder?new DE.TextEncoder:null;function AR(e,t){return(e&15)+(e>>6|e>>3&8)<<4|(t&15)+(t>>6|t>>3&8)}function voe(e,t){const n=t.length>>1;for(let i=0;i<n;i++){const s=i<<1;e[i]=AR(t.charCodeAt(s),t.charCodeAt(s+1))}}function _oe(e,t){if(e.length!==t.length*2)return!1;for(let n=0;n<t.length;n++){const i=n<<1;if(t[n]!==AR(e.charCodeAt(i),e.charCodeAt(i+1)))return!1}return!0}const zT="a".charCodeAt(0)-10,BT="0".charCodeAt(0);function NT(e,t,n){let i=0;for(let s=0;s<n;s++){let l=t[s]>>>4;e[i++]=l>9?l+zT:l+BT,l=t[s]&15,e[i++]=l>9?l+zT:l+BT}return String.fromCharCode.apply(null,e)}const $T=PS!==null?e=>{if(typeof e=="string"){const t=PS.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(PS.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return yoe.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},UT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ky=new Uint8Array(256);for(let e=0;e<UT.length;e++)Ky[UT.charCodeAt(e)]=e;function xoe(e){let t=Math.floor(e.length*.75);const n=e.length;return e[n-1]==="="&&(t-=1,e[n-2]==="="&&(t-=1)),t}function boe(e){const t=xoe(e),n=e.length,i=new Uint8Array(t);let s=0;for(let l=0;l<n;l+=4){const a=Ky[e.charCodeAt(l)],g=Ky[e.charCodeAt(l+1)],_=Ky[e.charCodeAt(l+2)],w=Ky[e.charCodeAt(l+3)];i[s]=a<<2|g>>4,s+=1,i[s]=(g&15)<<4|_>>2,s+=1,i[s]=(_&3)<<6|w&63,s+=1}return i}const m1=16*1024,Ny=4,woe=new Vi,TS=new Map;function Soe(e,t){return fv(this,void 0,void 0,function*(){let n=null,i=null,s=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");const l=(W,ce=0)=>{i.set(W,ce)},a=()=>i,g=()=>n.exports,_=W=>{n.exports.Hash_SetMemorySize(W);const ce=n.exports.Hash_GetBuffer(),xe=n.exports.memory.buffer;i=new Uint8Array(xe,ce,W)},w=()=>new DataView(n.exports.memory.buffer).getUint32(n.exports.STATE_SIZE,!0),C=woe.dispatch(()=>fv(this,void 0,void 0,function*(){if(!TS.has(e.name)){const ce=boe(e.data),xe=WebAssembly.compile(ce);TS.set(e.name,xe)}const W=yield TS.get(e.name);n=yield WebAssembly.instantiate(W,{})})),A=()=>fv(this,void 0,void 0,function*(){n||(yield C);const W=n.exports.Hash_GetBuffer(),ce=n.exports.memory.buffer;i=new Uint8Array(ce,W,m1)}),I=(W=null)=>{s=!0,n.exports.Hash_Init(W)},O=W=>{let ce=0;for(;ce<W.length;){const xe=W.subarray(ce,ce+m1);ce+=xe.length,i.set(xe),n.exports.Hash_Update(xe.length)}},D=W=>{if(!s)throw new Error("update() called before init()");const ce=$T(W);O(ce)},B=new Uint8Array(t*2),H=(W,ce=null)=>{if(!s)throw new Error("digest() called before init()");return s=!1,n.exports.Hash_Final(ce),W==="binary"?i.slice(0,t):NT(B,i,t)},R=()=>{if(!s)throw new Error("save() can only be called after init() and before digest()");const W=n.exports.Hash_GetState(),ce=w(),xe=n.exports.memory.buffer,Me=new Uint8Array(xe,W,ce),$e=new Uint8Array(Ny+ce);return voe($e,e.hash),$e.set(Me,Ny),$e},U=W=>{if(!(W instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const ce=n.exports.Hash_GetState(),xe=w(),Me=Ny+xe,$e=n.exports.memory.buffer;if(W.length!==Me)throw new Error(`Bad state length (expected ${Me} bytes, got ${W.length})`);if(!_oe(e.hash,W.subarray(0,Ny)))throw new Error("This state was written by an incompatible hash implementation");const Le=W.subarray(Ny);new Uint8Array($e,ce,xe).set(Le),s=!0},q=W=>typeof W=="string"?W.length<m1/4:W.byteLength<m1;let Y=q;switch(e.name){case"argon2":case"scrypt":Y=()=>!0;break;case"blake2b":case"blake2s":Y=(W,ce)=>ce<=512&&q(W);break;case"blake3":Y=(W,ce)=>ce===0&&q(W);break;case"xxhash64":case"xxhash3":case"xxhash128":Y=()=>!1;break}const se=(W,ce=null,xe=null)=>{if(!Y(W,ce))return I(ce),D(W),H("hex",xe);const Me=$T(W);return i.set(Me),n.exports.Hash_Calculate(Me.length,ce,xe),NT(B,i,t)};return yield A(),{getMemory:a,writeMemory:l,getExports:g,setMemorySize:_,init:I,update:D,digest:H,save:R,load:U,calculate:se,hashLength:t}})}function Coe(e,t,n){return fv(this,void 0,void 0,function*(){const i=yield e.lock(),s=yield Soe(t,n);return i(),s})}new Vi;new Vi;new Vi;new Vi;var Eoe="crc32",koe="AGFzbQEAAAABEQRgAAF/YAF/AGAAAGACf38AAwgHAAEBAQIAAwQFAXABAQEFBAEBAgIGDgJ/AUGQyQULfwBBgAgLB3AIBm1lbW9yeQIADkhhc2hfR2V0QnVmZmVyAAAJSGFzaF9Jbml0AAILSGFzaF9VcGRhdGUAAwpIYXNoX0ZpbmFsAAQNSGFzaF9HZXRTdGF0ZQAFDkhhc2hfQ2FsY3VsYXRlAAYKU1RBVEVfU0laRQMBCq0HBwUAQYAJC8MDAQN/QYCJASEBQQAhAgNAIAFBAEEAQQBBAEEAQQBBAEEAIAJBAXFrIABxIAJBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzNgIAIAFBBGohASACQQFqIgJBgAJHDQALQQAhAANAIABBhJEBaiAAQYSJAWooAgAiAkH/AXFBAnRBgIkBaigCACACQQh2cyICNgIAIABBhJkBaiACQf8BcUECdEGAiQFqKAIAIAJBCHZzIgI2AgAgAEGEoQFqIAJB/wFxQQJ0QYCJAWooAgAgAkEIdnMiAjYCACAAQYSpAWogAkH/AXFBAnRBgIkBaigCACACQQh2cyICNgIAIABBhLEBaiACQf8BcUECdEGAiQFqKAIAIAJBCHZzIgI2AgAgAEGEuQFqIAJB/wFxQQJ0QYCJAWooAgAgAkEIdnMiAjYCACAAQYTBAWogAkH/AXFBAnRBgIkBaigCACACQQh2czYCACAAQQRqIgBB/AdHDQALCycAAkBBACgCgMkBIABGDQAgABABQQAgADYCgMkBC0EAQQA2AoTJAQuhAgEDf0EAKAKEyQFBf3MhAUGACSECAkAgAEEISQ0AQYAJIQIDQCACQQRqKAIAIgNBDnZB/AdxQYCRAWooAgAgA0EWdkH8B3FBgIkBaigCAHMgA0EGdkH8B3FBgJkBaigCAHMgA0H/AXFBAnRBgKEBaigCAHMgAigCACABcyIBQRZ2QfwHcUGAqQFqKAIAcyABQQ52QfwHcUGAsQFqKAIAcyABQQZ2QfwHcUGAuQFqKAIAcyABQf8BcUECdEGAwQFqKAIAcyEBIAJBCGohAiAAQXhqIgBBB0sNAAsLAkAgAEUNAANAIAFB/wFxIAItAABzQQJ0QYCJAWooAgAgAUEIdnMhASACQQFqIQIgAEF/aiIADQALC0EAIAFBf3M2AoTJAQszAQF/QQBBACgChMkBIgBBGHQgAEEIdEGAgPwHcXIgAEEIdkGA/gNxIABBGHZycjYCgAkLBgBBhMkBC1oAAkBBACgCgMkBIAFGDQAgARABQQAgATYCgMkBC0EAQQA2AoTJASAAEANBAEEAKAKEyQEiAUEYdCABQQh0QYCA/AdxciABQQh2QYD+A3EgAUEYdnJyNgKACQsLCwEAQYAICwQEAAAA",Aoe="749723dc",Poe={name:Eoe,data:koe,hash:Aoe};const Toe=new Vi;let g1=null;function Ioe(e){if(g1===null)return Coe(Toe,Poe,4).then(t=>(g1=t,g1.calculate(e,3988292384)));try{const t=g1.calculate(e,3988292384);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;new Vi;const Ooe={username:"",email:"",fullName:"",language:"en",useMetricUnits:!0,subscribedToKonturUpdates:!1,bio:"",osmEditor:no.osmEditors[0].id,defaultFeed:no.defaultFeed,theme:"kontur"},IS={...Ooe},__=Og(new Map,"layersSettings"),ug=Og(new Map,"mountedLayers"),PR=Ti({setMap:e=>e,resetMap:()=>null},({onAction:e,schedule:t},n=null)=>(e("setMap",i=>{n=i,t(s=>{s(ug.clear())})}),e("resetMap",()=>{n=null}),n),"[Shared state] currentMapAtom");function Loe(e,t){const n=new Blob([JSON.stringify(e)],{type:"json"}),i=document.createElement("a"),s=URL.createObjectURL(n);i.href=s,i.download=t,document.body.appendChild(i),i.click(),clearTimeout(setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)},0))}const cd=nR(new Set,"enabledLayers"),pv=nR(new Set,"hiddenLayers"),oA=Og(new Map,"layersLegends"),TR=Og(new Map,"layersMeta"),IR=Og(new Map,"layersSources"),OR=Og(new Map,"layersMenus");function Dm(e){if(e&&typeof e=="object"){const t=Object.getOwnPropertyNames(e);for(const n of t){const i=e[n];Dm(i)}return Object.freeze(e)}return e}const jT="bivariate-layer-",Moe="bivariate-source-",Roe={overlay:{name:Or.t("categories.overlays"),openByDefault:!0,mutuallyExclusive:!1,order:1},base:{name:Or.t("categories.basemap"),openByDefault:!1,mutuallyExclusive:!0,order:2}},Foe={layersInSelectedArea:{name:Or.t("groups.layers_in_selected_area"),openByDefault:!0,mutuallyExclusive:!1,order:0},user_layers:{name:Or.t("groups.your_layers"),openByDefault:!0,mutuallyExclusive:!1,order:1},bivariate:{name:Or.t("groups.kontur_analytics"),openByDefault:!0,mutuallyExclusive:!0,order:2},qa:{name:Or.t("groups.qa"),openByDefault:!0,mutuallyExclusive:!1,order:3},osmbasedmap:{name:Or.t("groups.osmbasedmap"),openByDefault:!1,mutuallyExclusive:!1,order:4},other:{name:Or.t("groups.other"),openByDefault:!1,mutuallyExclusive:!1,order:999},elevation:{name:Or.t("groups.elevation"),openByDefault:!0,mutuallyExclusive:!1},photo:{name:Or.t("groups.photo"),openByDefault:!0,mutuallyExclusive:!1},map:{name:Or.t("groups.map"),openByDefault:!0,mutuallyExclusive:!1}},Doe=Foe,zoe=new Proxy(Doe,{get(e,t,n){const i=Reflect.get(e,t,n);return i||{name:t,openByDefault:!0,mutuallyExclusive:!1,order:100}},set(e,t,n,i){return Reflect.set(e,t,n,i)}}),Boe=Ti({},({},e=zoe)=>e,"layersGroupsSettingsAtom"),Noe=Roe,$oe=new Proxy(Noe,{get(e,t,n){const i=Reflect.get(e,t,n);return i||{name:t,openByDefault:!0,mutuallyExclusive:!1,order:100}},set(e,t,n,i){return Reflect.set(e,t,n,i)}}),Uoe=Ti({},({},e=$oe)=>e,"layersCategoriesSettingsAtom"),joe=(()=>{let e=null;Boe.subscribe(s=>e=s);let t=null;Uoe.subscribe(s=>t=s);let n=null;cd.subscribe(s=>n=s);let i=null;return __.subscribe(s=>i=s),s=>{var C,A,I,O;if(!e||!t||!n||!i)return[];const l=(C=s.settings)==null?void 0:C.category,a=(A=s.settings)==null?void 0:A.group,g=l&&((I=t[l])==null?void 0:I.mutuallyExclusive),_=a&&((O=e[a])==null?void 0:O.mutuallyExclusive);if(!g&&!_)return[];const w=new Set;return n.forEach(D=>{var H,R;if(s.id===D)return;const B=i.get(D);B&&(g?((H=B.data)==null?void 0:H.category)===l&&w.add(D):_&&((R=B.data)==null?void 0:R.group)===a&&w.add(D))}),Array.from(w).map(D=>cd.delete(D))}})(),Voe={enable:()=>null,disable:()=>null,hide:()=>null,show:()=>null,download:()=>null,destroy:()=>null},qoe=e=>(...t)=>console.error(`[Logical layer: ${e}]:`,...t);function Hoe(e,t,n,i){let s=!1;const l=Ti({...Voe,layersSettingsAtom:__,layersLegendsAtom:oA,layersMetaAtom:TR,layersSourcesAtom:IR,enabledLayersAtom:cd,mountedLayersAtom:ug,hiddenLayersAtom:pv,layersMenusAtom:OR,_patchState:a=>a},({get:a,onAction:g,getUnlistedState:_,onInit:w,schedule:C,create:A},I={id:e,error:null,isEnabled:!1,isLoading:!1,isMounted:!1,isVisible:!0,isDownloadable:!1,settings:null,meta:null,legend:null,source:null,contextMenu:null,style:null})=>{var Me,$e;const O=[],D=i||_(PR),B={isLoading:!1,data:null,error:null},H=a("layersSettingsAtom").get(e)??B,R=a("layersMetaAtom").get(e)??B,U=a("layersLegendsAtom").get(e)??B,q=a("layersSourcesAtom").get(e)??B,Y=a("layersMenusAtom").get(e)??null,se=qoe(I.id),W={id:I.id,error:I.error,isLoading:[H,R,U,q].some(Le=>Le.isLoading),isEnabled:a("enabledLayersAtom").has(e),isMounted:a("mountedLayersAtom").has(e),isVisible:!a("hiddenLayersAtom").has(e),isDownloadable:((Me=q.data)==null?void 0:Me.source.type)==="geojson",settings:Dm(H.data),meta:Dm(R.data),legend:Dm(U.data),source:Dm(q.data),contextMenu:Dm(Y),style:(($e=q.data)==null?void 0:$e.style)??null};w(()=>{try{t.willInit({map:D,state:{...W}})}catch(Le){se(Le),W.error=Le}}),g("enable",()=>{W.isEnabled=!0,O.push(cd.set(e),...joe(I))}),g("disable",()=>{W.isEnabled=!1,O.push(cd.delete(e))}),g("hide",()=>{if(D)try{t.willHide({map:D,state:{...W}}),W.isVisible=!1,O.push(pv.set(e))}catch(Le){se(Le),W.error=Le}}),g("show",()=>{if(D)try{t.willUnhide({map:D,state:{...W}}),W.isVisible=!0,O.push(pv.delete(e))}catch(Le){se(Le),W.error=Le}}),g("download",()=>{var Le,Ge;try{if(!I.isDownloadable)return;if(!((Le=I.source)!=null&&Le.source)){se("Download failed, source unavailable");return}I.source.source.type==="geojson"?Loe(I.source.source.data,`${((Ge=I.settings)==null?void 0:Ge.name)||I.id||"Disaster Ninja map layer"}-${new Date().toISOString()}.json`):se("Only geojson layers can be downloaded")}catch(Ye){se(Ye),W.error=Ye}});const ce=!s&&W.isEnabled!==W.isMounted;if(!(I.isMounted!==W.isMounted)&&ce&&!W.isLoading)try{W.isMounted?D&&(t.willUnMount({map:D,state:{...W}}),W.isMounted=!1,O.push(ug.delete(e))):D&&(t.willMount({map:D,state:{...W}}),W.isMounted=!0,O.push(ug.set(e,l)))}catch(Le){se(Le),W.error=Le}if(I.isMounted&&W.isMounted){if(I.legend!==W.legend&&D)try{t.willLegendUpdate({map:D,state:{...W}})}catch(Ye){se(Ye),W.error=Ye}if(I.source!==W.source&&D)try{t.willSourceUpdate({map:D,state:{...W}})}catch(Ye){se(Ye),W.error=Ye}}return g("destroy",()=>{s=!0;try{t.willDestroy({map:D,state:{...W}}),_(n).has(I.id)&&O.push(n.unregister(I.id,{notifyLayerAboutDestroy:!1}))}catch(Le){se(Le),W.error=Le}}),g("_patchState",Le=>{Object.assign(W,Le)}),O.length&&C(Le=>{Le(O),t.setErrorState(Ge=>{se(Ge),Le(A("_patchState",{error:Ge.message}))})}),W},{id:e,decorators:[vR()]});return l}const VT=new WeakMap,qT=new WeakMap,Goe=e=>{const t=Ti({register:n=>Array.isArray(n)?n:[n],unregister:(n,{notifyLayerAboutDestroy:i}={})=>({ids:Array.isArray(n)?n:[n],notifyLayerAboutDestroy:i}),_delete:n=>Array.isArray(n)?n:[n]},({onAction:n,create:i,schedule:s},l=new Map)=>(n("register",a=>{const g=new Map(l);a.forEach(({id:_,renderer:w,cleanUpActions:C,map:A})=>{const I=Hoe(_,w,t,A);g.set(_,I),C&&VT.set(I,C),qT.set(I,I.subscribe(()=>null))}),l=g}),n("unregister",({ids:a,notifyLayerAboutDestroy:g})=>{a.forEach(_=>{const w=l.get(_);w?s(C=>{qT.get(w)();const I=[...VT.get(w)||[],ug.delete(_),pv.delete(_),g&&w.destroy(),i("_delete",_)].filter(O=>!!O);C(I)}):console.error(`Attempt unregister not existing layer with id: ${_}`)})}),n("_delete",a=>{const g=new Map(l);a.forEach(_=>{g.delete(_)}),l=g}),l),e);return t},zm=Goe("layersRegistryAtom"),zE=Ti({setUser:(e=IS)=>e},({onAction:e,schedule:t,getUnlistedState:n},i=IS)=>(e("setUser",s=>{s?i=s:i=IS;const l=Array.from(n(__)).filter(([,_])=>{var w;return(w=_==null?void 0:_.data)==null?void 0:w.ownedByUser}).map(([_])=>_);if(!l.length)return;const a=Array.from(n(zm)).filter(([_])=>l.includes(_)).map(([_,w])=>w);if(!a.length)return;const g=a.map(_=>_.destroy());t(_=>{_(g)})}),i),"[Shared state] currentUserAtom"),Woe=Ti({open:()=>null,close:()=>null},({onAction:e},t={isOpen:!1})=>(e("open",()=>t={...t,isOpen:!0}),e("close",()=>t={...t,isOpen:!1}),t),"episodesPanelState"),LR=Ti({setFocusedGeometry:(e,t)=>({source:e,geometry:t}),_update:e=>e,reset:()=>null,currentUserAtom:zE,episodesPanelState:Woe},({onAction:e,schedule:t,create:n,getUnlistedState:i,onChange:s},l=null)=>(e("setFocusedGeometry",({source:a,geometry:g})=>{const _=i(zE);a&&g?t(async(w,C)=>{const A=await Ioe(JSON.stringify({geometry:g,source:a,user:_.email}));if(!l||!C.hash||C.hash!==A){C.hash=A;const I={...g,hash:A};w(n("_update",{source:a,geometry:I}))}}):l=null}),e("reset",()=>{l=null}),e("_update",a=>{l=a}),s("currentUserAtom",()=>{var a;l&&((a=l.source)==null?void 0:a.type)!=="event"&&(l={...l})}),l),"[Shared state] focusedGeometryAtom"),Koe=[["count","area_km2"],["building_count","area_km2"],["highway_length","area_km2"],["local_hours","area_km2"],["avgmax_ts","one"],["days_mintemp_above_25c_1c","one"],["population","area_km2"],["total_hours","area_km2"],["view_count","area_km2"]];function MR(e){const t=Array.isArray(e)?[]:{};for(const n in e){const i=e[n];i&&typeof i=="object"?t[n]=MR(i):t[n]=i}return t}const Zoe=window.structuredClone??MR;function RR(e){const t=Zoe(e);return"properties"in t&&(t.properties={}),"features"in t&&t.features.length&&(t.features=t.features.map(n=>RR(n))),t}function FR(e){return!e||!e.geometry||e.geometry.type==="FeatureCollection"&&!e.geometry.features.length}function Xoe(e){const t={importantLayers:Koe};return e&&!FR(e)&&(t.geoJSON=RR(e==null?void 0:e.geometry)),t}function Qoe(e){if(e.hasOwnProperty("errors")&&Array.isArray(e.errors))return e.errors.reduce((t,n)=>(n.hasOwnProperty("message")&&t.push(n.message),t),[]).join("<br/>")}const Yoe=m_({focusedGeometryAtom:LR},({onChange:e},t={focusedGeometry:null})=>(e("focusedGeometryAtom",n=>{t={focusedGeometry:n}}),t),"bivariateStatisticsDependencyAtom");let y1;const DR=wR(Yoe,async({focusedGeometry:e},t)=>{if(!(e!=null&&e.geometry)&&y1)return y1;let n;try{const i=Xoe(e);n=await kR.post("/bivariate_matrix",i,!0,{signal:t.signal})}catch(i){if(_R(i)&&i.problem.kind==="canceled")return null;throw i}if(!n)throw new Error(Or.t("no_data_received"));if(!(n!=null&&n.data)){const i=Qoe(n);throw new Error(i||Or.t("no_data_received"))}return FR(e)&&!y1&&(y1=n.data),n.data},"bivariateStatisticsResource");var Je=Je||{};Je.Geometry=function(){};Je.Geometry.intersectLineLine=function(e,t){var n=(e.intercept-t.intercept)/(t.slope-e.slope),i=e.slope*n+e.intercept;return{x:n,y:i}};Je.Geometry.distanceFromOrigin=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))};Je.Geometry.distanceLineFromOrigin=function(e){return Math.abs(e.intercept)/Math.sqrt(Math.pow(e.slope,2)+1)};Je.Geometry.perpendicularThroughPoint=function(e,t){var n=-1/e.slope,i=t.y-n*t.x;return{slope:n,intercept:i}};Je.Geometry.angleFromOrigin=function(e){return Math.atan2(e.y,e.x)};Je.Geometry.normalizeAngle=function(e){var t=2*Math.PI;return(e%t+t)%t};Je.Geometry.lengthOfRayUntilIntersect=function(e,t){return t.intercept/(Math.sin(e)-t.slope*Math.cos(e))};Je.Hsluv=function(){};Je.Hsluv.getBounds=function(e){for(var t=[],n=Math.pow(e+16,3)/1560896,i=n>Je.Hsluv.epsilon?n:e/Je.Hsluv.kappa,s=0;s<3;)for(var l=s++,a=Je.Hsluv.m[l][0],g=Je.Hsluv.m[l][1],_=Je.Hsluv.m[l][2],w=0;w<2;){var C=w++,A=(284517*a-94839*_)*i,I=(838422*_+769860*g+731718*a)*e*i-769860*C*e,O=(632260*_-126452*g)*i+126452*C;t.push({slope:A/O,intercept:I/O})}return t};Je.Hsluv.maxSafeChromaForL=function(e){for(var t=Je.Hsluv.getBounds(e),n=1/0,i=0;i<t.length;){var s=t[i];++i;var l=Je.Geometry.distanceLineFromOrigin(s);n=Math.min(n,l)}return n};Je.Hsluv.maxChromaForLH=function(e,t){for(var n=t/360*Math.PI*2,i=Je.Hsluv.getBounds(e),s=1/0,l=0;l<i.length;){var a=i[l];++l;var g=Je.Geometry.lengthOfRayUntilIntersect(n,a);g>=0&&(s=Math.min(s,g))}return s};Je.Hsluv.dotProduct=function(e,t){for(var n=0,i=0,s=e.length;i<s;){var l=i++;n+=e[l]*t[l]}return n};Je.Hsluv.fromLinear=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055};Je.Hsluv.toLinear=function(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92};Je.Hsluv.xyzToRgb=function(e){return[Je.Hsluv.fromLinear(Je.Hsluv.dotProduct(Je.Hsluv.m[0],e)),Je.Hsluv.fromLinear(Je.Hsluv.dotProduct(Je.Hsluv.m[1],e)),Je.Hsluv.fromLinear(Je.Hsluv.dotProduct(Je.Hsluv.m[2],e))]};Je.Hsluv.rgbToXyz=function(e){var t=[Je.Hsluv.toLinear(e[0]),Je.Hsluv.toLinear(e[1]),Je.Hsluv.toLinear(e[2])];return[Je.Hsluv.dotProduct(Je.Hsluv.minv[0],t),Je.Hsluv.dotProduct(Je.Hsluv.minv[1],t),Je.Hsluv.dotProduct(Je.Hsluv.minv[2],t)]};Je.Hsluv.yToL=function(e){return e<=Je.Hsluv.epsilon?e/Je.Hsluv.refY*Je.Hsluv.kappa:116*Math.pow(e/Je.Hsluv.refY,.3333333333333333)-16};Je.Hsluv.lToY=function(e){return e<=8?Je.Hsluv.refY*e/Je.Hsluv.kappa:Je.Hsluv.refY*Math.pow((e+16)/116,3)};Je.Hsluv.xyzToLuv=function(e){var t=e[0],n=e[1],i=e[2],s=t+15*n+3*i,l=4*t,a=9*n;s!=0?(l/=s,a/=s):(l=NaN,a=NaN);var g=Je.Hsluv.yToL(n);if(g==0)return[0,0,0];var _=13*g*(l-Je.Hsluv.refU),w=13*g*(a-Je.Hsluv.refV);return[g,_,w]};Je.Hsluv.luvToXyz=function(e){var t=e[0],n=e[1],i=e[2];if(t==0)return[0,0,0];var s=n/(13*t)+Je.Hsluv.refU,l=i/(13*t)+Je.Hsluv.refV,a=Je.Hsluv.lToY(t),g=0-9*a*s/((s-4)*l-s*l),_=(9*a-15*l*a-l*g)/(3*l);return[g,a,_]};Je.Hsluv.luvToLch=function(e){var t=e[0],n=e[1],i=e[2],s=Math.sqrt(n*n+i*i),l;if(s<1e-8)l=0;else{var a=Math.atan2(i,n);l=a*180/Math.PI,l<0&&(l=360+l)}return[t,s,l]};Je.Hsluv.lchToLuv=function(e){var t=e[0],n=e[1],i=e[2],s=i/360*2*Math.PI,l=Math.cos(s)*n,a=Math.sin(s)*n;return[t,l,a]};Je.Hsluv.hsluvToLch=function(e){var t=e[0],n=e[1],i=e[2];if(i>99.9999999)return[100,0,t];if(i<1e-8)return[0,0,t];var s=Je.Hsluv.maxChromaForLH(i,t),l=s/100*n;return[i,l,t]};Je.Hsluv.lchToHsluv=function(e){var t=e[0],n=e[1],i=e[2];if(t>99.9999999)return[i,0,100];if(t<1e-8)return[i,0,0];var s=Je.Hsluv.maxChromaForLH(t,i),l=n/s*100;return[i,l,t]};Je.Hsluv.hpluvToLch=function(e){var t=e[0],n=e[1],i=e[2];if(i>99.9999999)return[100,0,t];if(i<1e-8)return[0,0,t];var s=Je.Hsluv.maxSafeChromaForL(i),l=s/100*n;return[i,l,t]};Je.Hsluv.lchToHpluv=function(e){var t=e[0],n=e[1],i=e[2];if(t>99.9999999)return[i,0,100];if(t<1e-8)return[i,0,0];var s=Je.Hsluv.maxSafeChromaForL(t),l=n/s*100;return[i,l,t]};Je.Hsluv.rgbToHex=function(e){for(var t="#",n=0;n<3;){var i=n++,s=e[i],l=Math.round(s*255),a=l%16,g=(l-a)/16|0;t+=Je.Hsluv.hexChars.charAt(g)+Je.Hsluv.hexChars.charAt(a)}return t};Je.Hsluv.hexToRgb=function(e){e=e.toLowerCase();for(var t=[],n=0;n<3;){var i=n++,s=Je.Hsluv.hexChars.indexOf(e.charAt(i*2+1)),l=Je.Hsluv.hexChars.indexOf(e.charAt(i*2+2)),a=s*16+l;t.push(a/255)}return t};Je.Hsluv.lchToRgb=function(e){return Je.Hsluv.xyzToRgb(Je.Hsluv.luvToXyz(Je.Hsluv.lchToLuv(e)))};Je.Hsluv.rgbToLch=function(e){return Je.Hsluv.luvToLch(Je.Hsluv.xyzToLuv(Je.Hsluv.rgbToXyz(e)))};Je.Hsluv.hsluvToRgb=function(e){return Je.Hsluv.lchToRgb(Je.Hsluv.hsluvToLch(e))};Je.Hsluv.rgbToHsluv=function(e){return Je.Hsluv.lchToHsluv(Je.Hsluv.rgbToLch(e))};Je.Hsluv.hpluvToRgb=function(e){return Je.Hsluv.lchToRgb(Je.Hsluv.hpluvToLch(e))};Je.Hsluv.rgbToHpluv=function(e){return Je.Hsluv.lchToHpluv(Je.Hsluv.rgbToLch(e))};Je.Hsluv.hsluvToHex=function(e){return Je.Hsluv.rgbToHex(Je.Hsluv.hsluvToRgb(e))};Je.Hsluv.hpluvToHex=function(e){return Je.Hsluv.rgbToHex(Je.Hsluv.hpluvToRgb(e))};Je.Hsluv.hexToHsluv=function(e){return Je.Hsluv.rgbToHsluv(Je.Hsluv.hexToRgb(e))};Je.Hsluv.hexToHpluv=function(e){return Je.Hsluv.rgbToHpluv(Je.Hsluv.hexToRgb(e))};Je.Hsluv.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]];Je.Hsluv.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],[.019330818715591,.11919477979462,.95053215224966]];Je.Hsluv.refY=1;Je.Hsluv.refU=.19783000664283;Je.Hsluv.refV=.46831999493879;Je.Hsluv.kappa=903.2962962;Je.Hsluv.epsilon=.0088564516;Je.Hsluv.hexChars="0123456789abcdef";var Joe={hsluvToRgb:Je.Hsluv.hsluvToRgb,rgbToHsluv:Je.Hsluv.rgbToHsluv,hpluvToRgb:Je.Hsluv.hpluvToRgb,rgbToHpluv:Je.Hsluv.rgbToHpluv,hsluvToHex:Je.Hsluv.hsluvToHex,hexToHsluv:Je.Hsluv.hexToHsluv,hpluvToHex:Je.Hsluv.hpluvToHex,hexToHpluv:Je.Hsluv.hexToHpluv,lchToHpluv:Je.Hsluv.lchToHpluv,hpluvToLch:Je.Hsluv.hpluvToLch,lchToHsluv:Je.Hsluv.lchToHsluv,hsluvToLch:Je.Hsluv.hsluvToLch,lchToLuv:Je.Hsluv.lchToLuv,luvToLch:Je.Hsluv.luvToLch,xyzToLuv:Je.Hsluv.xyzToLuv,luvToXyz:Je.Hsluv.luvToXyz,xyzToRgb:Je.Hsluv.xyzToRgb,rgbToXyz:Je.Hsluv.rgbToXyz,lchToRgb:Je.Hsluv.lchToRgb,rgbToLch:Je.Hsluv.rgbToLch},rf=Joe;function Kx(e){const t=/https?:/;t.test(e)?e=window.location.protocol+e.replace(t,""):e=`${no.bivariateTilesServer??`${window.location.protocol}${window.location.host}${no.baseUrl}`}${e}`,e=e.replace("{bbox}","{bbox-epsg-3857}").replace("{proj}","EPSG:3857").replace("{width}","256").replace("{height}","256").replace("{zoom}","{z}").replace("{-y}","{y}");const n=(e.match(/{switch:(.*?)}/)||["",""])[1].split(",")[0];return e=e.replace(/{switch:(.*?)}/,n),e}function eae(e,t){return e+(((t-e)%360+540)%360-180)*.5}function HT(e,t){return(e+t)/2}function $y(e,t){return[eae(e[0],t[0]),HT(e[1],t[1]),HT(e[2],t[2])]}function of(e){if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)){let t=e.substring(1).split("");t.length===3&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]);const n=parseInt(`0x${t.join("")}`,0);return`rgba(${[n>>16&255,n>>8&255,n&255].join(",")},0.5)`}throw new Error("Bad Hex")}function v1(e,t){const n=(Array.isArray(t[0])?[...t[0]]:[t[0]]).sort(),i=(Array.isArray(t[1])?[...t[1]]:[t[1]]).sort(),s=Array.from(new Set(n.concat(i))),l=e.combinations.find(({corner:a})=>{if(s.length!==a.length)return!1;for(let g=0;g<s.length;g+=1)if(s[g]!==a[g])return!1;return!0});return l!=null&&l.color?{color:l.color}:{color:e.fallback,isFallbackColor:!0}}function tae(e,t,n,i,s,l){var B,H;const{indicators:a,colors:g,axis:_}=s,w=_.find(R=>R.quotient[0]===e&&R.quotient[1]===t),C=_.find(R=>R.quotient[0]===n&&R.quotient[1]===i);if(!w||!C)return;const A=(B=a.find(R=>R.name===e))==null?void 0:B.direction,I=(H=a.find(R=>R.name===n))==null?void 0:H.direction;if(!A||!I)return;const O=rae(g,A,I),D=nae(w,C,O,s==null?void 0:s.meta,l);return[O,D]}const nae=(e,t,n,i,s)=>gR({id:`${e.quotient.join("&")}|${t.quotient.join("&")}`,x:e,y:t,colors:n,sourceLayer:s,source:{type:"vector",tiles:[`${Kx(no.bivariateTilesRelativeUrl)}{z}/{x}/{y}.mvt?indicatorsClass=${no.bivariateTilesIndicatorsClass}`],maxzoom:i.max_zoom,minzoom:0}}),rae=(e,t,n)=>{const i=v1(e,[t[0],n[0]]),s=v1(e,[t[1],n[0]]),l=v1(e,[t[0],n[1]]),a=v1(e,[t[1],n[1]]),g=rf.hexToHsluv(i.color),_=rf.hexToHsluv(s.color),w=rf.hexToHsluv(l.color),C=rf.hexToHsluv(a.color),A=$y(g,w),I=$y(g,_),O=$y(w,C),D=$y(_,C),B=$y(I,O);return[{id:"A1",color:of(i.color),isFallbackColor:i.isFallbackColor},{id:"A2",color:of(rf.hsluvToHex(A))},{id:"A3",color:of(l.color),isFallbackColor:l.isFallbackColor},{id:"B1",color:of(rf.hsluvToHex(I))},{id:"B2",color:of(rf.hsluvToHex(B))},{id:"B3",color:of(rf.hsluvToHex(O))},{id:"C1",color:of(s.color),isFallbackColor:s.isFallbackColor},{id:"C2",color:of(rf.hsluvToHex(D))},{id:"C3",color:of(a.color),isFallbackColor:a.isFallbackColor}]};function iae(e,t){return gR({id:`${e.axis.x.quotient.join("&")}|${e.axis.y.quotient.join("&")}`,x:e.axis.x,y:e.axis.y,colors:[...e.steps].sort((n,i)=>n.label>i.label?1:-1).map(n=>({id:n.label,color:n.color})),sourceLayer:t})}function oae(e,t,n,i,s,l,a){const g=a.axis.find(w=>w.quotient[0]===n&&w.quotient[1]===i),_=a.axis.find(w=>w.quotient[0]===s&&w.quotient[1]===l);if(!(!g||!_))return aae(e,g,_,t)}const aae=(e,t,n,i)=>({name:e,axis:{x:t,y:n},type:"bivariate",steps:i.map(({id:s,color:l,isFallbackColor:a})=>({label:s,color:l,isFallbackColor:a}))});function sae(e,t,n,i,s){var O,D,B,H;const l=s.indicators.find(R=>R.name===e),a=s.indicators.find(R=>R.name===n),g=l==null?void 0:l.label,_=a==null?void 0:a.label,w=(O=s.indicators.find(R=>R.name===t))==null?void 0:O.label,C=(D=s.indicators.find(R=>R.name===i))==null?void 0:D.label;let A=[];return(B=l==null?void 0:l.copyrights)!=null&&B.length&&(A=A.concat(l.copyrights)),(H=a==null?void 0:a.copyrights)!=null&&H.length&&(A=A.concat(a.copyrights)),{description:`This map shows relation of ${g} (normalized by ${w}) to the base of ${_} (normalized by ${C}).`,copyrights:A,hints:{x:{label:g,direction:l==null?void 0:l.direction},y:{label:_,direction:a==null?void 0:a.direction}}}}function lae(e,t,n,i){const s=e.findIndex(g=>{if(n<g.value)return!0}),l=ME(s),a=t.findIndex(g=>{if(i<g.value)return!0});return l+a}const uae=e=>{const{correlationRates:t}=e,n=[],i=[];for(const s of t){const l=s.x.quotient,a=s.x.parent||l;let g=n.find(A=>A.parent===JSON.stringify(a));g?g.quotients.find(A=>JSON.stringify(A)===JSON.stringify(l))||g.quotients.push(l):(g={parent:JSON.stringify(a),quotients:[l],selectedQuotient:l},n.push(g));const _=s.y.quotient,w=s.y.parent||_;let C=i.find(A=>A.parent===JSON.stringify(w));C?C.quotients.find(A=>JSON.stringify(A)===JSON.stringify(_))||C.quotients.push(_):(C={parent:JSON.stringify(w),quotients:[_],selectedQuotient:_},i.push(C))}for(const s of n){const l=s.quotients.find(a=>JSON.stringify(a)===s.parent);l&&(s.selectedQuotient=l)}for(const s of i){const l=s.quotients.find(a=>JSON.stringify(a)===s.parent);l&&(s.selectedQuotient=l)}return{x:n,y:i}},_1=Ti({setNumerators:(e,t)=>({xGroups:e,yGroups:t}),bivariateStatisticsResourceAtom:DR},({get:e,onAction:t,onChange:n},i={xGroups:[],yGroups:[]})=>(n("bivariateStatisticsResourceAtom",({data:s,loading:l})=>{if(s&&!l){const a=s.polygonStatistic.bivariateStatistic,g=uae(a);i={xGroups:g.x,yGroups:g.y}}}),t("setNumerators",s=>{i=s}),i),"bivariateNumerators"),cae=()=>({legend:[],source:[],meta:[],settings:[],menu:[]}),x1=([e,t])=>[e,{data:t,isLoading:!1,error:null}];function GT(e){const t=e.reduce((s,{id:l,...a})=>(Object.keys(a).forEach(g=>{s[g].push([l,a[g]])}),s),cae()),n=[],i=[];if(t.legend.length){const s=t.legend.map(x1);n.push(oA.change(l=>new Map([...l,...s])))}if(t.source.length){const s=t.source.map(x1);n.push(IR.change(l=>new Map([...l,...s])))}if(t.meta.length){const s=t.meta.map(x1);n.push(TR.change(l=>new Map([...l,...s])))}if(t.settings.length){const s=t.settings.map(x1);n.push(__.change(l=>new Map([...l,...s])))}if(t.menu.length){const s=t.menu;n.push(OR.change(l=>new Map([...l,...s])))}return[n,i]}var Zx={},fae={get exports(){return Zx},set exports(e){Zx=e}};(function(e,t){(function(n,i){e.exports=i()})(Ol,function(){var n,i,s;function l(a,g){if(!n)n=g;else if(!i)i=g;else{var _="var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk);",w={};n(w),s=g(w),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}return l(["exports"],function(a){function g(r,o){return r(o={exports:{}},o.exports),o.exports}var _=w;function w(r,o,u,d){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=d,this.p2x=u,this.p2y=d}w.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},w.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},w.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},w.prototype.solveCurveX=function(r,o){var u,d,y,x,S;for(o===void 0&&(o=1e-6),y=r,S=0;S<8;S++){if(x=this.sampleCurveX(y)-r,Math.abs(x)<o)return y;var T=this.sampleCurveDerivativeX(y);if(Math.abs(T)<1e-6)break;y-=x/T}if((y=r)<(u=0))return u;if(y>(d=1))return d;for(;u<d;){if(x=this.sampleCurveX(y),Math.abs(x-r)<o)return y;r>x?u=y:d=y,y=.5*(d-u)+u}return y},w.prototype.solve=function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))};var C=A;function A(r,o){this.x=r,this.y=o}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,o){return this.clone()._rotateAround(r,o)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)},_matMult:function(r){var o=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=o,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var o=Math.cos(r),u=Math.sin(r),d=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=d,this},_rotateAround:function(r,o){var u=Math.cos(r),d=Math.sin(r),y=o.y+d*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-d*(this.y-o.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(r){return r instanceof A?r:Array.isArray(r)?new A(r[0],r[1]):r};var I=typeof self<"u"?self:{},O=Math.pow(2,53)-1;function D(r,o,u,d){var y=new _(r,o,u,d);return function(x){return y.solve(x)}}var B=D(.25,.1,.25,1);function H(r,o,u){return Math.min(u,Math.max(o,r))}function R(r,o,u){var d=u-o,y=((r-o)%d+d)%d+o;return y===o?u:y}function U(r){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var d=0,y=o;d<y.length;d+=1){var x=y[d];for(var S in x)r[S]=x[S]}return r}var q=1;function Y(){return q++}function se(){return function r(o){return o?(o^16*Math.random()>>o/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function W(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function ce(r,o){r.forEach(function(u){o[u]&&(o[u]=o[u].bind(o))})}function xe(r,o){return r.indexOf(o,r.length-o.length)!==-1}function Me(r,o,u){var d={};for(var y in r)d[y]=o.call(u||this,r[y],y,r);return d}function $e(r,o,u){var d={};for(var y in r)o.call(u||this,r[y],y,r)&&(d[y]=r[y]);return d}function Le(r){return Array.isArray(r)?r.map(Le):typeof r=="object"&&r?Me(r,Le):r}var Ge={};function Ye(r){Ge[r]||(typeof console<"u"&&console.warn(r),Ge[r]=!0)}function ht(r,o,u){return(u.y-r.y)*(o.x-r.x)>(o.y-r.y)*(u.x-r.x)}function Lt(r){for(var o=0,u=0,d=r.length,y=d-1,x=void 0,S=void 0;u<d;y=u++)o+=((S=r[y]).x-(x=r[u]).x)*(x.y+S.y);return o}function Dt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qt(r){var o={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(d,y,x,S){var T=x||S;return o[y]=!T||T.toLowerCase(),""}),o["max-age"]){var u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}var Ne=null;function ve(r){if(Ne==null){var o=r.navigator?r.navigator.userAgent:null;Ne=!!r.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ne}function _e(r){try{var o=I[r];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}var K,ae,lt,Ot,Ht=I.performance&&I.performance.now?I.performance.now.bind(I.performance):Date.now.bind(Date),Ut=I.requestAnimationFrame||I.mozRequestAnimationFrame||I.webkitRequestAnimationFrame||I.msRequestAnimationFrame,Kt=I.cancelAnimationFrame||I.mozCancelAnimationFrame||I.webkitCancelAnimationFrame||I.msCancelAnimationFrame,cn={now:Ht,frame:function(r){var o=Ut(r);return{cancel:function(){return Kt(o)}}},getImageData:function(r,o){o===void 0&&(o=0);var u=I.document.createElement("canvas"),d=u.getContext("2d");if(!d)throw new Error("failed to create canvas 2d context");return u.width=r.width,u.height=r.height,d.drawImage(r,0,0,r.width,r.height),d.getImageData(-o,-o,r.width+2*o,r.height+2*o)},resolveURL:function(r){return K||(K=I.document.createElement("a")),K.href=r,K.href},hardwareConcurrency:I.navigator&&I.navigator.hardwareConcurrency||4,get devicePixelRatio(){return I.devicePixelRatio},get prefersReducedMotion(){return!!I.matchMedia&&(ae==null&&(ae=I.matchMedia("(prefers-reduced-motion: reduce)")),ae.matches)}},sn={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},wr={supported:!1,testSupport:function(r){!pr&&Ot&&(li?dn(r):lt=r)}},pr=!1,li=!1;function dn(r){var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Ot),r.isContextLost())return;wr.supported=!0}catch{}r.deleteTexture(o),pr=!0}I.document&&((Ot=I.document.createElement("img")).onload=function(){lt&&dn(lt),lt=null,li=!0},Ot.onerror=function(){pr=!0,lt=null},Ot.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var $r="01",Ur=function(r,o){this._transformRequestFn=r,this._customAccessToken=o,this._createSkuToken()};function go(r){return r.indexOf("mapbox:")===0}Ur.prototype._createSkuToken=function(){var r=function(){for(var o="",u=0;u<10;u++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",$r,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},Ur.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ur.prototype.transformRequest=function(r,o){return this._transformRequestFn&&this._transformRequestFn(r,o)||{url:r}},Ur.prototype.normalizeStyleURL=function(r,o){if(!go(r))return r;var u=Ci(r);return u.path="/styles/v1"+u.path,this._makeAPIURL(u,this._customAccessToken||o)},Ur.prototype.normalizeGlyphsURL=function(r,o){if(!go(r))return r;var u=Ci(r);return u.path="/fonts/v1"+u.path,this._makeAPIURL(u,this._customAccessToken||o)},Ur.prototype.normalizeSourceURL=function(r,o){if(!go(r))return r;var u=Ci(r);return u.path="/v4/"+u.authority+".json",u.params.push("secure"),this._makeAPIURL(u,this._customAccessToken||o)},Ur.prototype.normalizeSpriteURL=function(r,o,u,d){var y=Ci(r);return go(r)?(y.path="/styles/v1"+y.path+"/sprite"+o+u,this._makeAPIURL(y,this._customAccessToken||d)):(y.path+=""+o+u,ui(y))},Ur.prototype.normalizeTileURL=function(r,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!go(r))return r;var u=Ci(r);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,(cn.devicePixelRatio>=2||o===512?"@2x":"")+(wr.supported?".webp":"$1")),u.path=u.path.replace(/^.+\/v4\//,"/"),u.path="/v4"+u.path;var d=this._customAccessToken||function(y){for(var x=0,S=y;x<S.length;x+=1){var T=S[x].match(/^access_token=(.*)$/);if(T)return T[1]}return null}(u.params)||sn.ACCESS_TOKEN;return sn.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&u.params.push("sku="+this._skuToken),this._makeAPIURL(u,d)},Ur.prototype.canonicalizeTileURL=function(r,o){var u=Ci(r);if(!u.path.match(/(^\/v4\/)/)||!u.path.match(/\.[\w]+$/))return r;var d="mapbox://tiles/";d+=u.path.replace("/v4/","");var y=u.params;return o&&(y=y.filter(function(x){return!x.match(/^access_token=/)})),y.length&&(d+="?"+y.join("&")),d},Ur.prototype.canonicalizeTileset=function(r,o){for(var u=!!o&&go(o),d=[],y=0,x=r.tiles||[];y<x.length;y+=1){var S=x[y];ro(S)?d.push(this.canonicalizeTileURL(S,u)):d.push(S)}return d},Ur.prototype._makeAPIURL=function(r,o){var u="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",d=Ci(sn.API_URL);if(r.protocol=d.protocol,r.authority=d.authority,r.protocol==="http"){var y=r.params.indexOf("secure");y>=0&&r.params.splice(y,1)}if(d.path!=="/"&&(r.path=""+d.path+r.path),!sn.REQUIRE_ACCESS_TOKEN)return ui(r);if(!(o=o||sn.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+u);if(o[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+u);return r.params=r.params.filter(function(x){return x.indexOf("access_token")===-1}),r.params.push("access_token="+o),ui(r)},Ur.prototype.setTransformRequest=function(r){this._transformRequestFn=r};var yo=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ro(r){return yo.test(r)}var ls=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ci(r){var o=r.match(ls);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function ui(r){var o=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+o}function Lo(r){if(!r)return null;var o=r.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(I.atob(o[1]).split("").map(function(u){return"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ii=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ii.prototype.getStorageKey=function(r){var o,u=Lo(sn.ACCESS_TOKEN);return o=u&&u.u?I.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,function(d,y){return String.fromCharCode(+("0x"+y))})):sn.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+o:"mapbox.eventData:"+o},Ii.prototype.fetchEventData=function(){var r=_e("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{var d=I.localStorage.getItem(o);d&&(this.eventData=JSON.parse(d));var y=I.localStorage.getItem(u);y&&(this.anonId=y)}catch{Ye("Unable to read from LocalStorage")}},Ii.prototype.saveEventData=function(){var r=_e("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{I.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&I.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{Ye("Unable to write to LocalStorage")}},Ii.prototype.processRequests=function(r){},Ii.prototype.postEvent=function(r,o,u,d){var y=this;if(sn.EVENTS_URL){var x=Ci(sn.EVENTS_URL);x.params.push("access_token="+(d||sn.ACCESS_TOKEN||""));var S={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.3",skuId:$r,userId:this.anonId},T=o?U(S,o):S,M={url:ui(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([T])};this.pendingRequest=V(M,function(z){y.pendingRequest=null,u(z),y.saveEventData(),y.processRequests(d)})}},Ii.prototype.queueRequest=function(r,o){this.queue.push(r),this.processRequests(o)};var Oi,Mo,Ro=function(r){function o(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.postMapLoadEvent=function(u,d,y,x){this.skuToken=y,(sn.EVENTS_URL&&x||sn.ACCESS_TOKEN&&Array.isArray(u)&&u.some(function(S){return go(S)||ro(S)}))&&this.queueRequest({id:d,timestamp:Date.now()},x)},o.prototype.processRequests=function(u){var d=this;if(!this.pendingRequest&&this.queue.length!==0){var y=this.queue.shift(),x=y.id,S=y.timestamp;x&&this.success[x]||(this.anonId||this.fetchEventData(),W(this.anonId)||(this.anonId=se()),this.postEvent(S,{skuToken:this.skuToken},function(T){T||x&&(d.success[x]=!0)},u))}},o}(Ii),Xe=new(function(r){function o(u){r.call(this,"appUserTurnstile"),this._customAccessToken=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.postTurnstileEvent=function(u,d){sn.EVENTS_URL&&sn.ACCESS_TOKEN&&Array.isArray(u)&&u.some(function(y){return go(y)||ro(y)})&&this.queueRequest(Date.now(),d)},o.prototype.processRequests=function(u){var d=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var y=Lo(sn.ACCESS_TOKEN),x=y?y.u:sn.ACCESS_TOKEN,S=x!==this.eventData.tokenU;W(this.anonId)||(this.anonId=se(),S=!0);var T=this.queue.shift();if(this.eventData.lastSuccess){var M=new Date(this.eventData.lastSuccess),z=new Date(T),$=(T-this.eventData.lastSuccess)/864e5;S=S||$>=1||$<-1||M.getDate()!==z.getDate()}else S=!0;if(!S)return this.processRequests();this.postEvent(T,{"enabled.telemetry":!1},function(j){j||(d.eventData.lastSuccess=T,d.eventData.tokenU=x)},u)}},o}(Ii)),ue=Xe.postTurnstileEvent.bind(Xe),Re=new Ro,nt=Re.postMapLoadEvent.bind(Re),Tt=500,bn=50;function Jn(){I.caches&&!Oi&&(Oi=I.caches.open("mapbox-tiles"))}function tn(r){var o=r.indexOf("?");return o<0?r:r.slice(0,o)}var Pn,_r=1/0;function Sr(){return Pn==null&&(Pn=I.OffscreenCanvas&&new I.OffscreenCanvas(1,1).getContext("2d")&&typeof I.createImageBitmap=="function"),Pn}var Vn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Vn);var qi=function(r){function o(u,d,y){d===401&&ro(y)&&(u+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,u),this.status=d,this.url=y,this.name=this.constructor.name,this.message=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},o}(Error),Mr=Dt()?function(){return self.worker&&self.worker.referrer}:function(){return(I.location.protocol==="blob:"?I.parent:I).location.href};function Fo(r,o){var u,d=new I.AbortController,y=new I.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:Mr(),signal:d.signal}),x=!1,S=!1,T=(u=y.url).indexOf("sku=")>0&&ro(u);r.type==="json"&&y.headers.set("Accept","application/json");var M=function($,j,Q){if(!S){if($&&$.message!=="SecurityError"&&Ye($),j&&Q)return z(j);var ee=Date.now();I.fetch(y).then(function(pe){if(pe.ok){var he=T?pe.clone():null;return z(pe,he,ee)}return o(new qi(pe.statusText,pe.status,r.url))}).catch(function(pe){pe.code!==20&&o(new Error(pe.message))})}},z=function($,j,Q){(r.type==="arrayBuffer"?$.arrayBuffer():r.type==="json"?$.json():$.text()).then(function(ee){S||(j&&Q&&function(pe,he,Pe){if(Jn(),Oi){var we={status:he.status,statusText:he.statusText,headers:new I.Headers};he.headers.forEach(function(Be,Ve){return we.headers.set(Ve,Be)});var De=qt(he.headers.get("Cache-Control")||"");De["no-store"]||(De["max-age"]&&we.headers.set("Expires",new Date(Pe+1e3*De["max-age"]).toUTCString()),new Date(we.headers.get("Expires")).getTime()-Pe<42e4||function(Be,Ve){if(Mo===void 0)try{new Response(new ReadableStream),Mo=!0}catch{Mo=!1}Mo?Ve(Be.body):Be.blob().then(Ve)}(he,function(Be){var Ve=new I.Response(Be,we);Jn(),Oi&&Oi.then(function(qe){return qe.put(tn(pe.url),Ve)}).catch(function(qe){return Ye(qe.message)})}))}}(y,j,Q),x=!0,o(null,ee,$.headers.get("Cache-Control"),$.headers.get("Expires")))}).catch(function(ee){S||o(new Error(ee.message))})};return T?function($,j){if(Jn(),!Oi)return j(null);var Q=tn($.url);Oi.then(function(ee){ee.match(Q).then(function(pe){var he=function(Pe){if(!Pe)return!1;var we=new Date(Pe.headers.get("Expires")||0),De=qt(Pe.headers.get("Cache-Control")||"");return we>Date.now()&&!De["no-cache"]}(pe);ee.delete(Q),he&&ee.put(Q,pe.clone()),j(null,pe,he)}).catch(j)}).catch(j)}(y,M):M(null,null),{cancel:function(){S=!0,x||d.abort()}}}var pa,io,ei=function(r,o){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,o);if(!Dt()){var u=r.url.substring(0,r.url.indexOf("://"));return(sn.REGISTERED_PROTOCOLS[u]||Fo)(r,o)}}if(!(/^file:/.test(d=r.url)||/^file:/.test(Mr())&&!/^\w+:/.test(d))){if(I.fetch&&I.Request&&I.AbortController&&I.Request.prototype.hasOwnProperty("signal"))return Fo(r,o);if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,o,void 0,!0)}var d;return function(y,x){var S=new I.XMLHttpRequest;for(var T in S.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(S.responseType="arraybuffer"),y.headers)S.setRequestHeader(T,y.headers[T]);return y.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=y.credentials==="include",S.onerror=function(){x(new Error(S.statusText))},S.onload=function(){if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){var M=S.response;if(y.type==="json")try{M=JSON.parse(S.response)}catch(z){return x(z)}x(null,M,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else x(new qi(S.statusText,S.status,y.url))},S.send(y.body),{cancel:function(){return S.abort()}}}(r,o)},or=function(r,o){return ei(U(r,{type:"arrayBuffer"}),o)},V=function(r,o){return ei(U(r,{method:"POST"}),o)},Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";pa=[],io=0;var J=function(r,o){if(wr.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),io>=sn.MAX_PARALLEL_IMAGE_REQUESTS){var u={requestParameters:r,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return pa.push(u),u}io++;var d=!1,y=function(){if(!d)for(d=!0,io--;pa.length&&io<sn.MAX_PARALLEL_IMAGE_REQUESTS;){var S=pa.shift();S.cancelled||(S.cancel=J(S.requestParameters,S.callback).cancel)}},x=or(r,function(S,T,M,z){y(),S?o(S):T&&(Sr()?function($,j){var Q=new I.Blob([new Uint8Array($)],{type:"image/png"});I.createImageBitmap(Q).then(function(ee){j(null,ee)}).catch(function(ee){j(new Error("Could not load image because of "+ee.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(T,o):function($,j,Q,ee){var pe=new I.Image,he=I.URL;pe.onload=function(){j(null,pe),he.revokeObjectURL(pe.src),pe.onload=null,I.requestAnimationFrame(function(){pe.src=Z})},pe.onerror=function(){return j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Pe=new I.Blob([new Uint8Array($)],{type:"image/png"});pe.cacheControl=Q,pe.expires=ee,pe.src=$.byteLength?he.createObjectURL(Pe):Z}(T,o,M,z))});return{cancel:function(){x.cancel(),y()}}};function oe(r,o,u){u[r]&&u[r].indexOf(o)!==-1||(u[r]=u[r]||[],u[r].push(o))}function ge(r,o,u){if(u&&u[r]){var d=u[r].indexOf(o);d!==-1&&u[r].splice(d,1)}}var Ae=function(r,o){o===void 0&&(o={}),U(this,o),this.type=r},Te=function(r){function o(u,d){d===void 0&&(d={}),r.call(this,"error",U({error:u},d))}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Ae),Ee=function(){};Ee.prototype.on=function(r,o){return this._listeners=this._listeners||{},oe(r,o,this._listeners),this},Ee.prototype.off=function(r,o){return ge(r,o,this._listeners),ge(r,o,this._oneTimeListeners),this},Ee.prototype.once=function(r,o){return this._oneTimeListeners=this._oneTimeListeners||{},oe(r,o,this._oneTimeListeners),this},Ee.prototype.fire=function(r,o){typeof r=="string"&&(r=new Ae(r,o||{}));var u=r.type;if(this.listens(u)){r.target=this;for(var d=0,y=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];d<y.length;d+=1)y[d].call(this,r);for(var x=0,S=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];x<S.length;x+=1){var T=S[x];ge(u,T,this._oneTimeListeners),T.call(this,r)}var M=this._eventedParent;M&&(U(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(r))}else r instanceof Te&&console.error(r.error);return this},Ee.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},Ee.prototype.setEventedParent=function(r,o){return this._eventedParent=r,this._eventedParentData=o,this};var le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},be=function(r,o,u,d){this.message=(r?r+": ":"")+u,d&&(this.identifier=d),o!=null&&o.__line__&&(this.line=o.__line__)};function at(r){var o=r.value;return o?[new be(r.key,o,"constants have been deprecated as of v8")]:[]}function vt(r){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var d=0,y=o;d<y.length;d+=1){var x=y[d];for(var S in x)r[S]=x[S]}return r}function je(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function st(r){if(Array.isArray(r))return r.map(st);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var o={};for(var u in r)o[u]=st(r[u]);return o}return je(r)}var Mt=function(r){function o(u,d){r.call(this,d),this.message=d,this.key=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Error),Rt=function(r,o){o===void 0&&(o=[]),this.parent=r,this.bindings={};for(var u=0,d=o;u<d.length;u+=1){var y=d[u];this.bindings[y[0]]=y[1]}};Rt.prototype.concat=function(r){return new Rt(this,r)},Rt.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},Rt.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var jt={kind:"null"},rt={kind:"number"},xt={kind:"string"},ot={kind:"boolean"},mn={kind:"color"},gn={kind:"object"},zt={kind:"value"},tr={kind:"collator"},Tn={kind:"formatted"},ar={kind:"resolvedImage"};function Tr(r,o){return{kind:"array",itemType:r,N:o}}function qn(r){if(r.kind==="array"){var o=qn(r.itemType);return typeof r.N=="number"?"array<"+o+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+o+">"}return r.kind}var xr=[jt,rt,xt,ot,mn,Tn,gn,Tr(zt),ar];function zr(r,o){if(o.kind==="error")return null;if(r.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!zr(r.itemType,o.itemType))&&(typeof r.N!="number"||r.N===o.N))return null}else{if(r.kind===o.kind)return null;if(r.kind==="value"){for(var u=0,d=xr;u<d.length;u+=1)if(!zr(d[u],o))return null}}return"Expected "+qn(r)+" but found "+qn(o)+" instead."}function hr(r,o){return o.some(function(u){return u.kind===r.kind})}function Cn(r,o){return o.some(function(u){return u==="null"?r===null:u==="array"?Array.isArray(r):u==="object"?r&&!Array.isArray(r)&&typeof r=="object":u===typeof r})}var Iu=g(function(r,o){var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(T){return(T=Math.round(T))<0?0:T>255?255:T}function y(T){return d(T[T.length-1]==="%"?parseFloat(T)/100*255:parseInt(T))}function x(T){return(M=T[T.length-1]==="%"?parseFloat(T)/100:parseFloat(T))<0?0:M>1?1:M;var M}function S(T,M,z){return z<0?z+=1:z>1&&(z-=1),6*z<1?T+(M-T)*z*6:2*z<1?M:3*z<2?T+(M-T)*(2/3-z)*6:T}try{o.parseCSSColor=function(T){var M,z=T.replace(/ /g,"").toLowerCase();if(z in u)return u[z].slice();if(z[0]==="#")return z.length===4?(M=parseInt(z.substr(1),16))>=0&&M<=4095?[(3840&M)>>4|(3840&M)>>8,240&M|(240&M)>>4,15&M|(15&M)<<4,1]:null:z.length===7&&(M=parseInt(z.substr(1),16))>=0&&M<=16777215?[(16711680&M)>>16,(65280&M)>>8,255&M,1]:null;var $=z.indexOf("("),j=z.indexOf(")");if($!==-1&&j+1===z.length){var Q=z.substr(0,$),ee=z.substr($+1,j-($+1)).split(","),pe=1;switch(Q){case"rgba":if(ee.length!==4)return null;pe=x(ee.pop());case"rgb":return ee.length!==3?null:[y(ee[0]),y(ee[1]),y(ee[2]),pe];case"hsla":if(ee.length!==4)return null;pe=x(ee.pop());case"hsl":if(ee.length!==3)return null;var he=(parseFloat(ee[0])%360+360)%360/360,Pe=x(ee[1]),we=x(ee[2]),De=we<=.5?we*(Pe+1):we+Pe-we*Pe,Be=2*we-De;return[d(255*S(Be,De,he+1/3)),d(255*S(Be,De,he)),d(255*S(Be,De,he-1/3)),pe];default:return null}}return null}}catch{}}).parseCSSColor,Fn=function(r,o,u,d){d===void 0&&(d=1),this.r=r,this.g=o,this.b=u,this.a=d};Fn.parse=function(r){if(r){if(r instanceof Fn)return r;if(typeof r=="string"){var o=Iu(r);if(o)return new Fn(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},Fn.prototype.toString=function(){var r=this.toArray(),o=r[1],u=r[2],d=r[3];return"rgba("+Math.round(r[0])+","+Math.round(o)+","+Math.round(u)+","+d+")"},Fn.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Fn.black=new Fn(0,0,0,1),Fn.white=new Fn(1,1,1,1),Fn.transparent=new Fn(0,0,0,0),Fn.red=new Fn(1,0,0,1);var Hl=function(r,o,u){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Hl.prototype.compare=function(r,o){return this.collator.compare(r,o)},Hl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Cf=function(r,o,u,d,y){this.text=r,this.image=o,this.scale=u,this.fontStack=d,this.textColor=y},Ei=function(r){this.sections=r};Ei.fromString=function(r){return new Ei([new Cf(r,null,null,null,null)])},Ei.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},Ei.factory=function(r){return r instanceof Ei?r:Ei.fromString(r)},Ei.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},Ei.prototype.serialize=function(){for(var r=["format"],o=0,u=this.sections;o<u.length;o+=1){var d=u[o];if(d.image)r.push(["image",d.image.name]);else{r.push(d.text);var y={};d.fontStack&&(y["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(y["font-scale"]=d.scale),d.textColor&&(y["text-color"]=["rgba"].concat(d.textColor.toArray())),r.push(y)}}return r};var vo=function(r){this.name=r.name,this.available=r.available};function Ef(r,o,u,d){return typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:"Invalid rgba value ["+[r,o,u,d].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof d=="number"?[r,o,u,d]:[r,o,u]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ts(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Fn||r instanceof Hl||r instanceof Ei||r instanceof vo)return!0;if(Array.isArray(r)){for(var o=0,u=r;o<u.length;o+=1)if(!Ts(u[o]))return!1;return!0}if(typeof r=="object"){for(var d in r)if(!Ts(r[d]))return!1;return!0}return!1}function ki(r){if(r===null)return jt;if(typeof r=="string")return xt;if(typeof r=="boolean")return ot;if(typeof r=="number")return rt;if(r instanceof Fn)return mn;if(r instanceof Hl)return tr;if(r instanceof Ei)return Tn;if(r instanceof vo)return ar;if(Array.isArray(r)){for(var o,u=r.length,d=0,y=r;d<y.length;d+=1){var x=ki(y[d]);if(o){if(o===x)continue;o=zt;break}o=x}return Tr(o||zt,u)}return gn}function qa(r){var o=typeof r;return r===null?"":o==="string"||o==="number"||o==="boolean"?String(r):r instanceof Fn||r instanceof Ei||r instanceof vo?r.toString():JSON.stringify(r)}vo.prototype.toString=function(){return this.name},vo.fromString=function(r){return r?new vo({name:r,available:!1}):null},vo.prototype.serialize=function(){return["image",this.name]};var Do=function(r,o){this.type=r,this.value=o};Do.parse=function(r,o){if(r.length!==2)return o.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!Ts(r[1]))return o.error("invalid value");var u=r[1],d=ki(u),y=o.expectedType;return d.kind!=="array"||d.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(d=y),new Do(d,u)},Do.prototype.evaluate=function(){return this.value},Do.prototype.eachChild=function(){},Do.prototype.outputDefined=function(){return!0},Do.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fn?["rgba"].concat(this.value.toArray()):this.value instanceof Ei?this.value.serialize():this.value};var Ir=function(r){this.name="ExpressionEvaluationError",this.message=r};Ir.prototype.toJSON=function(){return this.message};var zo={string:xt,number:rt,boolean:ot,object:gn},Hi=function(r,o){this.type=r,this.args=o};Hi.parse=function(r,o){if(r.length<2)return o.error("Expected at least one argument.");var u,d=1,y=r[0];if(y==="array"){var x,S;if(r.length>2){var T=r[1];if(typeof T!="string"||!(T in zo)||T==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);x=zo[T],d++}else x=zt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=r[2],d++}u=Tr(x,S)}else u=zo[y];for(var M=[];d<r.length;d++){var z=o.parse(r[d],d,zt);if(!z)return null;M.push(z)}return new Hi(u,M)},Hi.prototype.evaluate=function(r){for(var o=0;o<this.args.length;o++){var u=this.args[o].evaluate(r);if(!zr(this.type,ki(u)))return u;if(o===this.args.length-1)throw new Ir("Expected value to be of type "+qn(this.type)+", but found "+qn(ki(u))+" instead.")}return null},Hi.prototype.eachChild=function(r){this.args.forEach(r)},Hi.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Hi.prototype.serialize=function(){var r=this.type,o=[r.kind];if(r.kind==="array"){var u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){o.push(u.kind);var d=r.N;(typeof d=="number"||this.args.length>1)&&o.push(d)}}return o.concat(this.args.map(function(y){return y.serialize()}))};var Bo=function(r){this.type=Tn,this.sections=r};Bo.parse=function(r,o){if(r.length<2)return o.error("Expected at least one argument.");var u=r[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");for(var d=[],y=!1,x=1;x<=r.length-1;++x){var S=r[x];if(y&&typeof S=="object"&&!Array.isArray(S)){y=!1;var T=null;if(S["font-scale"]&&!(T=o.parse(S["font-scale"],1,rt)))return null;var M=null;if(S["text-font"]&&!(M=o.parse(S["text-font"],1,Tr(xt))))return null;var z=null;if(S["text-color"]&&!(z=o.parse(S["text-color"],1,mn)))return null;var $=d[d.length-1];$.scale=T,$.font=M,$.textColor=z}else{var j=o.parse(r[x],1,zt);if(!j)return null;var Q=j.type.kind;if(Q!=="string"&&Q!=="value"&&Q!=="null"&&Q!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,d.push({content:j,scale:null,font:null,textColor:null})}}return new Bo(d)},Bo.prototype.evaluate=function(r){return new Ei(this.sections.map(function(o){var u=o.content.evaluate(r);return ki(u)===ar?new Cf("",u,null,null,null):new Cf(qa(u),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))},Bo.prototype.eachChild=function(r){for(var o=0,u=this.sections;o<u.length;o+=1){var d=u[o];r(d.content),d.scale&&r(d.scale),d.font&&r(d.font),d.textColor&&r(d.textColor)}},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){for(var r=["format"],o=0,u=this.sections;o<u.length;o+=1){var d=u[o];r.push(d.content.serialize());var y={};d.scale&&(y["font-scale"]=d.scale.serialize()),d.font&&(y["text-font"]=d.font.serialize()),d.textColor&&(y["text-color"]=d.textColor.serialize()),r.push(y)}return r};var Ha=function(r){this.type=ar,this.input=r};Ha.parse=function(r,o){if(r.length!==2)return o.error("Expected two arguments.");var u=o.parse(r[1],1,xt);return u?new Ha(u):o.error("No image name provided.")},Ha.prototype.evaluate=function(r){var o=this.input.evaluate(r),u=vo.fromString(o);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(o)>-1),u},Ha.prototype.eachChild=function(r){r(this.input)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){return["image",this.input.serialize()]};var Lg={"to-boolean":ot,"to-color":mn,"to-number":rt,"to-string":xt},ha=function(r,o){this.type=r,this.args=o};ha.parse=function(r,o){if(r.length<2)return o.error("Expected at least one argument.");var u=r[0];if((u==="to-boolean"||u==="to-string")&&r.length!==2)return o.error("Expected one argument.");for(var d=Lg[u],y=[],x=1;x<r.length;x++){var S=o.parse(r[x],x,zt);if(!S)return null;y.push(S)}return new ha(d,y)},ha.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var o,u,d=0,y=this.args;d<y.length;d+=1){if(u=null,(o=y[d].evaluate(r))instanceof Fn)return o;if(typeof o=="string"){var x=r.parseColor(o);if(x)return x}else if(Array.isArray(o)&&!(u=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":Ef(o[0],o[1],o[2],o[3])))return new Fn(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Ir(u||"Could not parse color from value '"+(typeof o=="string"?o:String(JSON.stringify(o)))+"'")}if(this.type.kind==="number"){for(var S=null,T=0,M=this.args;T<M.length;T+=1){if((S=M[T].evaluate(r))===null)return 0;var z=Number(S);if(!isNaN(z))return z}throw new Ir("Could not convert "+JSON.stringify(S)+" to number.")}return this.type.kind==="formatted"?Ei.fromString(qa(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?vo.fromString(qa(this.args[0].evaluate(r))):qa(this.args[0].evaluate(r))},ha.prototype.eachChild=function(r){this.args.forEach(r)},ha.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},ha.prototype.serialize=function(){if(this.type.kind==="formatted")return new Bo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ha(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(o){r.push(o.serialize())}),r};var kf=["Unknown","Point","LineString","Polygon"],Ga=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ga.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ga.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?kf[this.feature.type]:this.feature.type:null},Ga.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ga.prototype.canonicalID=function(){return this.canonical},Ga.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ga.prototype.parseColor=function(r){var o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=Fn.parse(r)),o};var Kr=function(r,o,u,d){this.name=r,this.type=o,this._evaluate=u,this.args=d};Kr.prototype.evaluate=function(r){return this._evaluate(r,this.args)},Kr.prototype.eachChild=function(r){this.args.forEach(r)},Kr.prototype.outputDefined=function(){return!1},Kr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},Kr.parse=function(r,o){var u,d=r[0],y=Kr.definitions[d];if(!y)return o.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0);for(var x=Array.isArray(y)?y[0]:y.type,S=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,T=S.filter(function(Gt){var Et=Gt[0];return!Array.isArray(Et)||Et.length===r.length-1}),M=null,z=0,$=T;z<$.length;z+=1){var j=$[z],Q=j[0],ee=j[1];M=new sr(o.registry,o.path,null,o.scope);for(var pe=[],he=!1,Pe=1;Pe<r.length;Pe++){var we=r[Pe],De=Array.isArray(Q)?Q[Pe-1]:Q.type,Be=M.parse(we,1+pe.length,De);if(!Be){he=!0;break}pe.push(Be)}if(!he)if(Array.isArray(Q)&&Q.length!==pe.length)M.error("Expected "+Q.length+" arguments, but found "+pe.length+" instead.");else{for(var Ve=0;Ve<pe.length;Ve++){var qe=Array.isArray(Q)?Q[Ve]:Q.type,et=pe[Ve];M.concat(Ve+1).checkSubtype(qe,et.type)}if(M.errors.length===0)return new Kr(d,x,ee,pe)}}if(T.length===1)(u=o.errors).push.apply(u,M.errors);else{for(var dt=(T.length?T:S).map(function(Gt){var Et;return Et=Gt[0],Array.isArray(Et)?"("+Et.map(qn).join(", ")+")":"("+qn(Et.type)+"...)"}).join(" | "),_t=[],Nt=1;Nt<r.length;Nt++){var wt=o.parse(r[Nt],1+_t.length);if(!wt)return null;_t.push(qn(wt.type))}o.error("Expected arguments of type "+dt+", but found ("+_t.join(", ")+") instead.")}return null},Kr.register=function(r,o){for(var u in Kr.definitions=o,o)r[u]=Kr};var ci=function(r,o,u){this.type=tr,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=o};function Gl(r,o){r[0]=Math.min(r[0],o[0]),r[1]=Math.min(r[1],o[1]),r[2]=Math.max(r[2],o[0]),r[3]=Math.max(r[3],o[1])}function Af(r,o){return!(r[0]<=o[0]||r[2]>=o[2]||r[1]<=o[1]||r[3]>=o[3])}function Td(r,o){var u=(180+r[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,y=Math.pow(2,o.z);return[Math.round(u*y*8192),Math.round(d*y*8192)]}function Id(r,o,u){return o[1]>r[1]!=u[1]>r[1]&&r[0]<(u[0]-o[0])*(r[1]-o[1])/(u[1]-o[1])+o[0]}function Pf(r,o){for(var u,d,y,x,S,T,M,z=!1,$=0,j=o.length;$<j;$++)for(var Q=o[$],ee=0,pe=Q.length;ee<pe-1;ee++){if((x=(u=r)[0]-(d=Q[ee])[0])*(M=u[1]-(y=Q[ee+1])[1])-(T=u[0]-y[0])*(S=u[1]-d[1])==0&&x*T<=0&&S*M<=0)return!1;Id(r,Q[ee],Q[ee+1])&&(z=!z)}return z}function Od(r,o){for(var u=0;u<o.length;u++)if(Pf(r,o[u]))return!0;return!1}function Ld(r,o,u,d){var y=d[0]-u[0],x=d[1]-u[1],S=(r[0]-u[0])*x-y*(r[1]-u[1]),T=(o[0]-u[0])*x-y*(o[1]-u[1]);return S>0&&T<0||S<0&&T>0}function Mg(r,o,u){for(var d=0,y=u;d<y.length;d+=1)for(var x=y[d],S=0;S<x.length-1;++S)if((j=[($=x[S+1])[0]-(z=x[S])[0],$[1]-z[1]])[0]*(Q=[(M=o)[0]-(T=r)[0],M[1]-T[1]])[1]-j[1]*Q[0]!=0&&Ld(T,M,z,$)&&Ld(z,$,T,M))return!0;var T,M,z,$,j,Q;return!1}function ih(r,o){for(var u=0;u<r.length;++u)if(!Pf(r[u],o))return!1;for(var d=0;d<r.length-1;++d)if(Mg(r[d],r[d+1],o))return!1;return!0}function pc(r,o){for(var u=0;u<o.length;u++)if(ih(r,o[u]))return!0;return!1}function Tf(r,o,u){for(var d=[],y=0;y<r.length;y++){for(var x=[],S=0;S<r[y].length;S++){var T=Td(r[y][S],u);Gl(o,T),x.push(T)}d.push(x)}return d}function hc(r,o,u){for(var d=[],y=0;y<r.length;y++){var x=Tf(r[y],o,u);d.push(x)}return d}function Md(r,o,u,d){if(r[0]<u[0]||r[0]>u[2]){var y=.5*d,x=r[0]-u[0]>y?-d:u[0]-r[0]>y?d:0;x===0&&(x=r[0]-u[2]>y?-d:u[2]-r[0]>y?d:0),r[0]+=x}Gl(o,r)}function If(r,o,u,d){for(var y=8192*Math.pow(2,d.z),x=[8192*d.x,8192*d.y],S=[],T=0,M=r;T<M.length;T+=1)for(var z=0,$=M[T];z<$.length;z+=1){var j=$[z],Q=[j.x+x[0],j.y+x[1]];Md(Q,o,u,y),S.push(Q)}return S}function dc(r,o,u,d){for(var y,x=8192*Math.pow(2,d.z),S=[8192*d.x,8192*d.y],T=[],M=0,z=r;M<z.length;M+=1){for(var $=[],j=0,Q=z[M];j<Q.length;j+=1){var ee=Q[j],pe=[ee.x+S[0],ee.y+S[1]];Gl(o,pe),$.push(pe)}T.push($)}if(o[2]-o[0]<=x/2){(y=o)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(var he=0,Pe=T;he<Pe.length;he+=1)for(var we=0,De=Pe[he];we<De.length;we+=1)Md(De[we],o,u,x)}return T}ci.parse=function(r,o){if(r.length!==2)return o.error("Expected one argument.");var u=r[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");var d=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,ot);if(!d)return null;var y=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,ot);if(!y)return null;var x=null;return u.locale&&!(x=o.parse(u.locale,1,xt))?null:new ci(d,y,x)},ci.prototype.evaluate=function(r){return new Hl(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},ci.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var No=function(r,o){this.type=ot,this.geojson=r,this.geometries=o};function Wl(r){if(r instanceof Kr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof No)return!1;var o=!0;return r.eachChild(function(u){o&&!Wl(u)&&(o=!1)}),o}function ol(r){if(r instanceof Kr&&r.name==="feature-state")return!1;var o=!0;return r.eachChild(function(u){o&&!ol(u)&&(o=!1)}),o}function Of(r,o){if(r instanceof Kr&&o.indexOf(r.name)>=0)return!1;var u=!0;return r.eachChild(function(d){u&&!Of(d,o)&&(u=!1)}),u}No.parse=function(r,o){if(r.length!==2)return o.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(Ts(r[1])){var u=r[1];if(u.type==="FeatureCollection")for(var d=0;d<u.features.length;++d){var y=u.features[d].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new No(u,u.features[d].geometry)}else if(u.type==="Feature"){var x=u.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new No(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new No(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},No.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,u){var d=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(u.type==="Polygon"){var S=Tf(u.coordinates,y,x),T=If(o.geometry(),d,y,x);if(!Af(d,y))return!1;for(var M=0,z=T;M<z.length;M+=1)if(!Pf(z[M],S))return!1}if(u.type==="MultiPolygon"){var $=hc(u.coordinates,y,x),j=If(o.geometry(),d,y,x);if(!Af(d,y))return!1;for(var Q=0,ee=j;Q<ee.length;Q+=1)if(!Od(ee[Q],$))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,u){var d=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(u.type==="Polygon"){var S=Tf(u.coordinates,y,x),T=dc(o.geometry(),d,y,x);if(!Af(d,y))return!1;for(var M=0,z=T;M<z.length;M+=1)if(!ih(z[M],S))return!1}if(u.type==="MultiPolygon"){var $=hc(u.coordinates,y,x),j=dc(o.geometry(),d,y,x);if(!Af(d,y))return!1;for(var Q=0,ee=j;Q<ee.length;Q+=1)if(!pc(ee[Q],$))return!1}return!0}(r,this.geometries)}return!1},No.prototype.eachChild=function(){},No.prototype.outputDefined=function(){return!0},No.prototype.serialize=function(){return["within",this.geojson]};var al=function(r,o){this.type=o.type,this.name=r,this.boundExpression=o};al.parse=function(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");var u=r[1];return o.scope.has(u)?new al(u,o.scope.get(u)):o.error('Unknown variable "'+u+'". Make sure "'+u+'" has been bound in an enclosing "let" expression before using it.',1)},al.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},al.prototype.eachChild=function(){},al.prototype.outputDefined=function(){return!1},al.prototype.serialize=function(){return["var",this.name]};var sr=function(r,o,u,d,y){o===void 0&&(o=[]),d===void 0&&(d=new Rt),y===void 0&&(y=[]),this.registry=r,this.path=o,this.key=o.map(function(x){return"["+x+"]"}).join(""),this.scope=d,this.errors=y,this.expectedType=u};function er(r,o){for(var u,d=r.length-1,y=0,x=d,S=0;y<=x;)if((u=r[S=Math.floor((y+x)/2)])<=o){if(S===d||o<r[S+1])return S;y=S+1}else{if(!(u>o))throw new Ir("Input is not a number.");x=S-1}return 0}sr.prototype.parse=function(r,o,u,d,y){return y===void 0&&(y={}),o?this.concat(o,u,d)._parse(r,y):this._parse(r,y)},sr.prototype._parse=function(r,o){function u(z,$,j){return j==="assert"?new Hi($,[z]):j==="coerce"?new ha($,[z]):z}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=r[0];if(typeof d!="string")return this.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var y=this.registry[d];if(y){var x=y.parse(r,this);if(!x)return null;if(this.expectedType){var S=this.expectedType,T=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||T.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(S,T))return null}else x=u(x,S,o.typeAnnotation||"coerce");else x=u(x,S,o.typeAnnotation||"assert")}if(!(x instanceof Do)&&x.type.kind!=="resolvedImage"&&function z($){if($ instanceof al)return z($.boundExpression);if($ instanceof Kr&&$.name==="error"||$ instanceof ci||$ instanceof No)return!1;var j=$ instanceof ha||$ instanceof Hi,Q=!0;return $.eachChild(function(ee){Q=j?Q&&z(ee):Q&&ee instanceof Do}),!!Q&&Wl($)&&Of($,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(x)){var M=new Ga;try{x=new Do(x.type,x.evaluate(M))}catch(z){return this.error(z.message),null}}return x}return this.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},sr.prototype.concat=function(r,o,u){var d=typeof r=="number"?this.path.concat(r):this.path,y=u?this.scope.concat(u):this.scope;return new sr(this.registry,d,o||null,y,this.errors)},sr.prototype.error=function(r){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];var d=""+this.key+o.map(function(y){return"["+y+"]"}).join("");this.errors.push(new Mt(d,r))},sr.prototype.checkSubtype=function(r,o){var u=zr(r,o);return u&&this.error(u),u};var Wa=function(r,o,u){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(var d=0,y=u;d<y.length;d+=1){var x=y[d],S=x[1];this.labels.push(x[0]),this.outputs.push(S)}};function fi(r,o,u){return r*(1-u)+o*u}Wa.parse=function(r,o){if(r.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");var u=o.parse(r[1],1,rt);if(!u)return null;var d=[],y=null;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);for(var x=1;x<r.length;x+=2){var S=x===1?-1/0:r[x],T=r[x+1],M=x,z=x+1;if(typeof S!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(d.length&&d[d.length-1][0]>=S)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);var $=o.parse(T,z,y);if(!$)return null;y=y||$.type,d.push([S,$])}return new Wa(y,u,d)},Wa.prototype.evaluate=function(r){var o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);var d=this.input.evaluate(r);if(d<=o[0])return u[0].evaluate(r);var y=o.length;return d>=o[y-1]?u[y-1].evaluate(r):u[er(o,d)].evaluate(r)},Wa.prototype.eachChild=function(r){r(this.input);for(var o=0,u=this.outputs;o<u.length;o+=1)r(u[o])},Wa.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Wa.prototype.serialize=function(){for(var r=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&r.push(this.labels[o]),r.push(this.outputs[o].serialize());return r};var Lf=Object.freeze({__proto__:null,number:fi,color:function(r,o,u){return new Fn(fi(r.r,o.r,u),fi(r.g,o.g,u),fi(r.b,o.b,u),fi(r.a,o.a,u))},array:function(r,o,u){return r.map(function(d,y){return fi(d,o[y],u)})}}),Rd=6/29*3*(6/29),Rg=Math.PI/180,Fg=180/Math.PI;function Mf(r){return r>.008856451679035631?Math.pow(r,1/3):r/Rd+4/29}function oh(r){return r>6/29?r*r*r:Rd*(r-4/29)}function Li(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function mc(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function sl(r){var o=mc(r.r),u=mc(r.g),d=mc(r.b),y=Mf((.4124564*o+.3575761*u+.1804375*d)/.95047),x=Mf((.2126729*o+.7151522*u+.072175*d)/1);return{l:116*x-16,a:500*(y-x),b:200*(x-Mf((.0193339*o+.119192*u+.9503041*d)/1.08883)),alpha:r.a}}function ah(r){var o=(r.l+16)/116,u=isNaN(r.a)?o:o+r.a/500,d=isNaN(r.b)?o:o-r.b/200;return o=1*oh(o),u=.95047*oh(u),d=1.08883*oh(d),new Fn(Li(3.2404542*u-1.5371385*o-.4985314*d),Li(-.969266*u+1.8760108*o+.041556*d),Li(.0556434*u-.2040259*o+1.0572252*d),r.alpha)}function sh(r,o,u){var d=o-r;return r+u*(d>180||d<-180?d-360*Math.round(d/360):d)}var _o={forward:sl,reverse:ah,interpolate:function(r,o,u){return{l:fi(r.l,o.l,u),a:fi(r.a,o.a,u),b:fi(r.b,o.b,u),alpha:fi(r.alpha,o.alpha,u)}}},Ou={forward:function(r){var o=sl(r),u=o.l,d=o.a,y=o.b,x=Math.atan2(y,d)*Fg;return{h:x<0?x+360:x,c:Math.sqrt(d*d+y*y),l:u,alpha:r.a}},reverse:function(r){var o=r.h*Rg,u=r.c;return ah({l:r.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:r.alpha})},interpolate:function(r,o,u){return{h:sh(r.h,o.h,u),c:fi(r.c,o.c,u),l:fi(r.l,o.l,u),alpha:fi(r.alpha,o.alpha,u)}}},lh=Object.freeze({__proto__:null,lab:_o,hcl:Ou}),Mi=function(r,o,u,d,y){this.type=r,this.operator=o,this.interpolation=u,this.input=d,this.labels=[],this.outputs=[];for(var x=0,S=y;x<S.length;x+=1){var T=S[x],M=T[1];this.labels.push(T[0]),this.outputs.push(M)}};function Rf(r,o,u,d){var y=d-u,x=r-u;return y===0?0:o===1?x/y:(Math.pow(o,x)-1)/(Math.pow(o,y)-1)}Mi.interpolationFactor=function(r,o,u,d){var y=0;if(r.name==="exponential")y=Rf(o,r.base,u,d);else if(r.name==="linear")y=Rf(o,1,u,d);else if(r.name==="cubic-bezier"){var x=r.controlPoints;y=new _(x[0],x[1],x[2],x[3]).solve(Rf(o,1,u,d))}return y},Mi.parse=function(r,o){var u=r[0],d=r[1],y=r[2],x=r.slice(3);if(!Array.isArray(d)||d.length===0)return o.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){var S=d[1];if(typeof S!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:S}}else{if(d[0]!=="cubic-bezier")return o.error("Unknown interpolation type "+String(d[0]),1,0);var T=d.slice(1);if(T.length!==4||T.some(function(Pe){return typeof Pe!="number"||Pe<0||Pe>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:T}}if(r.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(y=o.parse(y,2,rt)))return null;var M=[],z=null;u==="interpolate-hcl"||u==="interpolate-lab"?z=mn:o.expectedType&&o.expectedType.kind!=="value"&&(z=o.expectedType);for(var $=0;$<x.length;$+=2){var j=x[$],Q=x[$+1],ee=$+3,pe=$+4;if(typeof j!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(M.length&&M[M.length-1][0]>=j)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);var he=o.parse(Q,pe,z);if(!he)return null;z=z||he.type,M.push([j,he])}return z.kind==="number"||z.kind==="color"||z.kind==="array"&&z.itemType.kind==="number"&&typeof z.N=="number"?new Mi(z,u,d,y,M):o.error("Type "+qn(z)+" is not interpolatable.")},Mi.prototype.evaluate=function(r){var o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(r);var d=this.input.evaluate(r);if(d<=o[0])return u[0].evaluate(r);var y=o.length;if(d>=o[y-1])return u[y-1].evaluate(r);var x=er(o,d),S=Mi.interpolationFactor(this.interpolation,d,o[x],o[x+1]),T=u[x].evaluate(r),M=u[x+1].evaluate(r);return this.operator==="interpolate"?Lf[this.type.kind.toLowerCase()](T,M,S):this.operator==="interpolate-hcl"?Ou.reverse(Ou.interpolate(Ou.forward(T),Ou.forward(M),S)):_o.reverse(_o.interpolate(_o.forward(T),_o.forward(M),S))},Mi.prototype.eachChild=function(r){r(this.input);for(var o=0,u=this.outputs;o<u.length;o+=1)r(u[o])},Mi.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Mi.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var o=[this.operator,r,this.input.serialize()],u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o};var Is=function(r,o){this.type=r,this.args=o};Is.parse=function(r,o){if(r.length<2)return o.error("Expectected at least one argument.");var u=null,d=o.expectedType;d&&d.kind!=="value"&&(u=d);for(var y=[],x=0,S=r.slice(1);x<S.length;x+=1){var T=o.parse(S[x],1+y.length,u,void 0,{typeAnnotation:"omit"});if(!T)return null;u=u||T.type,y.push(T)}var M=d&&y.some(function(z){return zr(d,z.type)});return new Is(M?zt:u,y)},Is.prototype.evaluate=function(r){for(var o,u=null,d=0,y=0,x=this.args;y<x.length&&(d++,(u=x[y].evaluate(r))&&u instanceof vo&&!u.available&&(o||(o=u.name),u=null,d===this.args.length&&(u=o)),u===null);y+=1);return u},Is.prototype.eachChild=function(r){this.args.forEach(r)},Is.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Is.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(o){r.push(o.serialize())}),r};var Os=function(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o};Os.prototype.evaluate=function(r){return this.result.evaluate(r)},Os.prototype.eachChild=function(r){for(var o=0,u=this.bindings;o<u.length;o+=1)r(u[o][1]);r(this.result)},Os.parse=function(r,o){if(r.length<4)return o.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var u=[],d=1;d<r.length-1;d+=2){var y=r[d];if(typeof y!="string")return o.error("Expected string, but found "+typeof y+" instead.",d);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",d);var x=o.parse(r[d+1],d+1);if(!x)return null;u.push([y,x])}var S=o.parse(r[r.length-1],r.length-1,o.expectedType,u);return S?new Os(u,S):null},Os.prototype.outputDefined=function(){return this.result.outputDefined()},Os.prototype.serialize=function(){for(var r=["let"],o=0,u=this.bindings;o<u.length;o+=1){var d=u[o];r.push(d[0],d[1].serialize())}return r.push(this.result.serialize()),r};var Ri=function(r,o,u){this.type=r,this.index=o,this.input=u};Ri.parse=function(r,o){if(r.length!==3)return o.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,rt),d=o.parse(r[2],2,Tr(o.expectedType||zt));return u&&d?new Ri(d.type.itemType,u,d):null},Ri.prototype.evaluate=function(r){var o=this.index.evaluate(r),u=this.input.evaluate(r);if(o<0)throw new Ir("Array index out of bounds: "+o+" < 0.");if(o>=u.length)throw new Ir("Array index out of bounds: "+o+" > "+(u.length-1)+".");if(o!==Math.floor(o))throw new Ir("Array index must be an integer, but found "+o+" instead.");return u[o]},Ri.prototype.eachChild=function(r){r(this.index),r(this.input)},Ri.prototype.outputDefined=function(){return!1},Ri.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Kl=function(r,o){this.type=ot,this.needle=r,this.haystack=o};Kl.parse=function(r,o){if(r.length!==3)return o.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,zt),d=o.parse(r[2],2,zt);return u&&d?hr(u.type,[ot,xt,rt,jt,zt])?new Kl(u,d):o.error("Expected first argument to be of type boolean, string, number or null, but found "+qn(u.type)+" instead"):null},Kl.prototype.evaluate=function(r){var o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!u)return!1;if(!Cn(o,["boolean","string","number","null"]))throw new Ir("Expected first argument to be of type boolean, string, number or null, but found "+qn(ki(o))+" instead.");if(!Cn(u,["string","array"]))throw new Ir("Expected second argument to be of type array or string, but found "+qn(ki(u))+" instead.");return u.indexOf(o)>=0},Kl.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},Kl.prototype.outputDefined=function(){return!0},Kl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Fi=function(r,o,u){this.type=rt,this.needle=r,this.haystack=o,this.fromIndex=u};Fi.parse=function(r,o){if(r.length<=2||r.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,zt),d=o.parse(r[2],2,zt);if(!u||!d)return null;if(!hr(u.type,[ot,xt,rt,jt,zt]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+qn(u.type)+" instead");if(r.length===4){var y=o.parse(r[3],3,rt);return y?new Fi(u,d,y):null}return new Fi(u,d)},Fi.prototype.evaluate=function(r){var o=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!Cn(o,["boolean","string","number","null"]))throw new Ir("Expected first argument to be of type boolean, string, number or null, but found "+qn(ki(o))+" instead.");if(!Cn(u,["string","array"]))throw new Ir("Expected second argument to be of type array or string, but found "+qn(ki(u))+" instead.");if(this.fromIndex){var d=this.fromIndex.evaluate(r);return u.indexOf(o,d)}return u.indexOf(o)},Fi.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Fi.prototype.outputDefined=function(){return!1},Fi.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Zl=function(r,o,u,d,y,x){this.inputType=r,this.type=o,this.input=u,this.cases=d,this.outputs=y,this.otherwise=x};Zl.parse=function(r,o){if(r.length<5)return o.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return o.error("Expected an even number of arguments.");var u,d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);for(var y={},x=[],S=2;S<r.length-1;S+=2){var T=r[S],M=r[S+1];Array.isArray(T)||(T=[T]);var z=o.concat(S);if(T.length===0)return z.error("Expected at least one branch label.");for(var $=0,j=T;$<j.length;$+=1){var Q=j[$];if(typeof Q!="number"&&typeof Q!="string")return z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return z.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Q=="number"&&Math.floor(Q)!==Q)return z.error("Numeric branch labels must be integer values.");if(u){if(z.checkSubtype(u,ki(Q)))return null}else u=ki(Q);if(y[String(Q)]!==void 0)return z.error("Branch labels must be unique.");y[String(Q)]=x.length}var ee=o.parse(M,S,d);if(!ee)return null;d=d||ee.type,x.push(ee)}var pe=o.parse(r[1],1,zt);if(!pe)return null;var he=o.parse(r[r.length-1],r.length-1,d);return he?pe.type.kind!=="value"&&o.concat(1).checkSubtype(u,pe.type)?null:new Zl(u,d,pe,y,x,he):null},Zl.prototype.evaluate=function(r){var o=this.input.evaluate(r);return(ki(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)},Zl.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},Zl.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},Zl.prototype.serialize=function(){for(var r=this,o=["match",this.input.serialize()],u=[],d={},y=0,x=Object.keys(this.cases).sort();y<x.length;y+=1){var S=x[y];(j=d[this.cases[S]])===void 0?(d[this.cases[S]]=u.length,u.push([this.cases[S],[S]])):u[j][1].push(S)}for(var T=function(ee){return r.inputType.kind==="number"?Number(ee):ee},M=0,z=u;M<z.length;M+=1){var $=z[M],j=$[0],Q=$[1];o.push(Q.length===1?T(Q[0]):Q.map(T)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var ll=function(r,o,u){this.type=r,this.branches=o,this.otherwise=u};ll.parse=function(r,o){if(r.length<4)return o.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return o.error("Expected an odd number of arguments.");var u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);for(var d=[],y=1;y<r.length-1;y+=2){var x=o.parse(r[y],y,ot);if(!x)return null;var S=o.parse(r[y+1],y+1,u);if(!S)return null;d.push([x,S]),u=u||S.type}var T=o.parse(r[r.length-1],r.length-1,u);return T?new ll(u,d,T):null},ll.prototype.evaluate=function(r){for(var o=0,u=this.branches;o<u.length;o+=1){var d=u[o],y=d[1];if(d[0].evaluate(r))return y.evaluate(r)}return this.otherwise.evaluate(r)},ll.prototype.eachChild=function(r){for(var o=0,u=this.branches;o<u.length;o+=1){var d=u[o],y=d[1];r(d[0]),r(y)}r(this.otherwise)},ll.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},ll.prototype.serialize=function(){var r=["case"];return this.eachChild(function(o){r.push(o.serialize())}),r};var $o=function(r,o,u,d){this.type=r,this.input=o,this.beginIndex=u,this.endIndex=d};function gc(r,o){return r==="=="||r==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Cr(r,o,u,d){return d.compare(o,u)===0}function Er(r,o,u){var d=r!=="=="&&r!=="!=";return function(){function y(x,S,T){this.type=ot,this.lhs=x,this.rhs=S,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||S.type.kind==="value"}return y.parse=function(x,S){if(x.length!==3&&x.length!==4)return S.error("Expected two or three arguments.");var T=x[0],M=S.parse(x[1],1,zt);if(!M)return null;if(!gc(T,M.type))return S.concat(1).error('"'+T+`" comparisons are not supported for type '`+qn(M.type)+"'.");var z=S.parse(x[2],2,zt);if(!z)return null;if(!gc(T,z.type))return S.concat(2).error('"'+T+`" comparisons are not supported for type '`+qn(z.type)+"'.");if(M.type.kind!==z.type.kind&&M.type.kind!=="value"&&z.type.kind!=="value")return S.error("Cannot compare types '"+qn(M.type)+"' and '"+qn(z.type)+"'.");d&&(M.type.kind==="value"&&z.type.kind!=="value"?M=new Hi(z.type,[M]):M.type.kind!=="value"&&z.type.kind==="value"&&(z=new Hi(M.type,[z])));var $=null;if(x.length===4){if(M.type.kind!=="string"&&z.type.kind!=="string"&&M.type.kind!=="value"&&z.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(!($=S.parse(x[3],3,tr)))return null}return new y(M,z,$)},y.prototype.evaluate=function(x){var S=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){var M=ki(S),z=ki(T);if(M.kind!==z.kind||M.kind!=="string"&&M.kind!=="number")throw new Ir('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+M.kind+", "+z.kind+") instead.")}if(this.collator&&!d&&this.hasUntypedArgument){var $=ki(S),j=ki(T);if($.kind!=="string"||j.kind!=="string")return o(x,S,T)}return this.collator?u(x,S,T,this.collator.evaluate(x)):o(x,S,T)},y.prototype.eachChild=function(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)},y.prototype.outputDefined=function(){return!0},y.prototype.serialize=function(){var x=[r];return this.eachChild(function(S){x.push(S.serialize())}),x},y}()}$o.parse=function(r,o){if(r.length<=2||r.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1,zt),d=o.parse(r[2],2,rt);if(!u||!d)return null;if(!hr(u.type,[Tr(zt),xt,zt]))return o.error("Expected first argument to be of type array or string, but found "+qn(u.type)+" instead");if(r.length===4){var y=o.parse(r[3],3,rt);return y?new $o(u.type,u,d,y):null}return new $o(u.type,u,d)},$o.prototype.evaluate=function(r){var o=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!Cn(o,["string","array"]))throw new Ir("Expected first argument to be of type array or string, but found "+qn(ki(o))+" instead.");if(this.endIndex){var d=this.endIndex.evaluate(r);return o.slice(u,d)}return o.slice(u)},$o.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},$o.prototype.outputDefined=function(){return!1},$o.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ka=Er("==",function(r,o,u){return o===u},Cr),Ff=Er("!=",function(r,o,u){return o!==u},function(r,o,u,d){return!Cr(0,o,u,d)}),Fd=Er("<",function(r,o,u){return o<u},function(r,o,u,d){return d.compare(o,u)<0}),Df=Er(">",function(r,o,u){return o>u},function(r,o,u,d){return d.compare(o,u)>0}),Dd=Er("<=",function(r,o,u){return o<=u},function(r,o,u,d){return d.compare(o,u)<=0}),Dg=Er(">=",function(r,o,u){return o>=u},function(r,o,u,d){return d.compare(o,u)>=0}),ul=function(r,o,u,d,y){this.type=xt,this.number=r,this.locale=o,this.currency=u,this.minFractionDigits=d,this.maxFractionDigits=y};ul.parse=function(r,o){if(r.length!==3)return o.error("Expected two arguments.");var u=o.parse(r[1],1,rt);if(!u)return null;var d=r[2];if(typeof d!="object"||Array.isArray(d))return o.error("NumberFormat options argument must be an object.");var y=null;if(d.locale&&!(y=o.parse(d.locale,1,xt)))return null;var x=null;if(d.currency&&!(x=o.parse(d.currency,1,xt)))return null;var S=null;if(d["min-fraction-digits"]&&!(S=o.parse(d["min-fraction-digits"],1,rt)))return null;var T=null;return d["max-fraction-digits"]&&!(T=o.parse(d["max-fraction-digits"],1,rt))?null:new ul(u,y,x,S,T)},ul.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},ul.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},ul.prototype.outputDefined=function(){return!1},ul.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Ls=function(r){this.type=rt,this.input=r};Ls.parse=function(r,o){if(r.length!==2)return o.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var u=o.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error("Expected argument of type string or array, but found "+qn(u.type)+" instead."):new Ls(u):null},Ls.prototype.evaluate=function(r){var o=this.input.evaluate(r);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Ir("Expected value to be of type string or array, but found "+qn(ki(o))+" instead.")},Ls.prototype.eachChild=function(r){r(this.input)},Ls.prototype.outputDefined=function(){return!1},Ls.prototype.serialize=function(){var r=["length"];return this.eachChild(function(o){r.push(o.serialize())}),r};var Ms={"==":Ka,"!=":Ff,">":Df,"<":Fd,">=":Dg,"<=":Dd,array:Hi,at:Ri,boolean:Hi,case:ll,coalesce:Is,collator:ci,format:Bo,image:Ha,in:Kl,"index-of":Fi,interpolate:Mi,"interpolate-hcl":Mi,"interpolate-lab":Mi,length:Ls,let:Os,literal:Do,match:Zl,number:Hi,"number-format":ul,object:Hi,slice:$o,step:Wa,string:Hi,"to-boolean":ha,"to-color":ha,"to-number":ha,"to-string":ha,var:al,within:No};function Xl(r,o){var u=o[0],d=o[1],y=o[2],x=o[3];u=u.evaluate(r),d=d.evaluate(r),y=y.evaluate(r);var S=x?x.evaluate(r):1,T=Ef(u,d,y,S);if(T)throw new Ir(T);return new Fn(u/255*S,d/255*S,y/255*S,S)}function zd(r,o){return r in o}function zf(r,o){var u=o[r];return u===void 0?null:u}function cl(r){return{type:r}}function yc(r){return{result:"success",value:r}}function Rs(r){return{result:"error",value:r}}function Ql(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Bf(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function vc(r){return!!r.expression&&r.expression.interpolated}function dr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Nf(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function uh(r){return r}function Gi(r,o,u){return r!==void 0?r:o!==void 0?o:u!==void 0?u:void 0}function ch(r,o,u,d,y){return Gi(typeof u===y?d[u]:void 0,r.default,o.default)}function _c(r,o,u){if(dr(u)!=="number")return Gi(r.default,o.default);var d=r.stops.length;if(d===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[d-1][0])return r.stops[d-1][1];var y=er(r.stops.map(function(x){return x[0]}),u);return r.stops[y][1]}function Lu(r,o,u){var d=r.base!==void 0?r.base:1;if(dr(u)!=="number")return Gi(r.default,o.default);var y=r.stops.length;if(y===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[y-1][0])return r.stops[y-1][1];var x=er(r.stops.map(function(j){return j[0]}),u),S=function(j,Q,ee,pe){var he=pe-ee,Pe=j-ee;return he===0?0:Q===1?Pe/he:(Math.pow(Q,Pe)-1)/(Math.pow(Q,he)-1)}(u,d,r.stops[x][0],r.stops[x+1][0]),T=r.stops[x][1],M=r.stops[x+1][1],z=Lf[o.type]||uh;if(r.colorSpace&&r.colorSpace!=="rgb"){var $=lh[r.colorSpace];z=function(j,Q){return $.reverse($.interpolate($.forward(j),$.forward(Q),S))}}return typeof T.evaluate=="function"?{evaluate:function(){for(var j=[],Q=arguments.length;Q--;)j[Q]=arguments[Q];var ee=T.evaluate.apply(void 0,j),pe=M.evaluate.apply(void 0,j);if(ee!==void 0&&pe!==void 0)return z(ee,pe,S)}}:z(T,M,S)}function fh(r,o,u){return o.type==="color"?u=Fn.parse(u):o.type==="formatted"?u=Ei.fromString(u.toString()):o.type==="resolvedImage"?u=vo.fromString(u.toString()):dr(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0),Gi(u,r.default,o.default)}Kr.register(Ms,{error:[{kind:"error"},[xt],function(r,o){throw new Ir(o[0].evaluate(r))}],typeof:[xt,[zt],function(r,o){return qn(ki(o[0].evaluate(r)))}],"to-rgba":[Tr(rt,4),[mn],function(r,o){return o[0].evaluate(r).toArray()}],rgb:[mn,[rt,rt,rt],Xl],rgba:[mn,[rt,rt,rt,rt],Xl],has:{type:ot,overloads:[[[xt],function(r,o){return zd(o[0].evaluate(r),r.properties())}],[[xt,gn],function(r,o){var u=o[1];return zd(o[0].evaluate(r),u.evaluate(r))}]]},get:{type:zt,overloads:[[[xt],function(r,o){return zf(o[0].evaluate(r),r.properties())}],[[xt,gn],function(r,o){var u=o[1];return zf(o[0].evaluate(r),u.evaluate(r))}]]},"feature-state":[zt,[xt],function(r,o){return zf(o[0].evaluate(r),r.featureState||{})}],properties:[gn,[],function(r){return r.properties()}],"geometry-type":[xt,[],function(r){return r.geometryType()}],id:[zt,[],function(r){return r.id()}],zoom:[rt,[],function(r){return r.globals.zoom}],"heatmap-density":[rt,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[rt,[],function(r){return r.globals.lineProgress||0}],accumulated:[zt,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[rt,cl(rt),function(r,o){for(var u=0,d=0,y=o;d<y.length;d+=1)u+=y[d].evaluate(r);return u}],"*":[rt,cl(rt),function(r,o){for(var u=1,d=0,y=o;d<y.length;d+=1)u*=y[d].evaluate(r);return u}],"-":{type:rt,overloads:[[[rt,rt],function(r,o){var u=o[1];return o[0].evaluate(r)-u.evaluate(r)}],[[rt],function(r,o){return-o[0].evaluate(r)}]]},"/":[rt,[rt,rt],function(r,o){var u=o[1];return o[0].evaluate(r)/u.evaluate(r)}],"%":[rt,[rt,rt],function(r,o){var u=o[1];return o[0].evaluate(r)%u.evaluate(r)}],ln2:[rt,[],function(){return Math.LN2}],pi:[rt,[],function(){return Math.PI}],e:[rt,[],function(){return Math.E}],"^":[rt,[rt,rt],function(r,o){var u=o[1];return Math.pow(o[0].evaluate(r),u.evaluate(r))}],sqrt:[rt,[rt],function(r,o){return Math.sqrt(o[0].evaluate(r))}],log10:[rt,[rt],function(r,o){return Math.log(o[0].evaluate(r))/Math.LN10}],ln:[rt,[rt],function(r,o){return Math.log(o[0].evaluate(r))}],log2:[rt,[rt],function(r,o){return Math.log(o[0].evaluate(r))/Math.LN2}],sin:[rt,[rt],function(r,o){return Math.sin(o[0].evaluate(r))}],cos:[rt,[rt],function(r,o){return Math.cos(o[0].evaluate(r))}],tan:[rt,[rt],function(r,o){return Math.tan(o[0].evaluate(r))}],asin:[rt,[rt],function(r,o){return Math.asin(o[0].evaluate(r))}],acos:[rt,[rt],function(r,o){return Math.acos(o[0].evaluate(r))}],atan:[rt,[rt],function(r,o){return Math.atan(o[0].evaluate(r))}],min:[rt,cl(rt),function(r,o){return Math.min.apply(Math,o.map(function(u){return u.evaluate(r)}))}],max:[rt,cl(rt),function(r,o){return Math.max.apply(Math,o.map(function(u){return u.evaluate(r)}))}],abs:[rt,[rt],function(r,o){return Math.abs(o[0].evaluate(r))}],round:[rt,[rt],function(r,o){var u=o[0].evaluate(r);return u<0?-Math.round(-u):Math.round(u)}],floor:[rt,[rt],function(r,o){return Math.floor(o[0].evaluate(r))}],ceil:[rt,[rt],function(r,o){return Math.ceil(o[0].evaluate(r))}],"filter-==":[ot,[xt,zt],function(r,o){var u=o[0],d=o[1];return r.properties()[u.value]===d.value}],"filter-id-==":[ot,[zt],function(r,o){var u=o[0];return r.id()===u.value}],"filter-type-==":[ot,[xt],function(r,o){var u=o[0];return r.geometryType()===u.value}],"filter-<":[ot,[xt,zt],function(r,o){var u=o[0],d=o[1],y=r.properties()[u.value],x=d.value;return typeof y==typeof x&&y<x}],"filter-id-<":[ot,[zt],function(r,o){var u=o[0],d=r.id(),y=u.value;return typeof d==typeof y&&d<y}],"filter->":[ot,[xt,zt],function(r,o){var u=o[0],d=o[1],y=r.properties()[u.value],x=d.value;return typeof y==typeof x&&y>x}],"filter-id->":[ot,[zt],function(r,o){var u=o[0],d=r.id(),y=u.value;return typeof d==typeof y&&d>y}],"filter-<=":[ot,[xt,zt],function(r,o){var u=o[0],d=o[1],y=r.properties()[u.value],x=d.value;return typeof y==typeof x&&y<=x}],"filter-id-<=":[ot,[zt],function(r,o){var u=o[0],d=r.id(),y=u.value;return typeof d==typeof y&&d<=y}],"filter->=":[ot,[xt,zt],function(r,o){var u=o[0],d=o[1],y=r.properties()[u.value],x=d.value;return typeof y==typeof x&&y>=x}],"filter-id->=":[ot,[zt],function(r,o){var u=o[0],d=r.id(),y=u.value;return typeof d==typeof y&&d>=y}],"filter-has":[ot,[zt],function(r,o){return o[0].value in r.properties()}],"filter-has-id":[ot,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[ot,[Tr(xt)],function(r,o){return o[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[ot,[Tr(zt)],function(r,o){return o[0].value.indexOf(r.id())>=0}],"filter-in-small":[ot,[xt,Tr(zt)],function(r,o){var u=o[0];return o[1].value.indexOf(r.properties()[u.value])>=0}],"filter-in-large":[ot,[xt,Tr(zt)],function(r,o){var u=o[0],d=o[1];return function(y,x,S,T){for(;S<=T;){var M=S+T>>1;if(x[M]===y)return!0;x[M]>y?T=M-1:S=M+1}return!1}(r.properties()[u.value],d.value,0,d.value.length-1)}],all:{type:ot,overloads:[[[ot,ot],function(r,o){var u=o[1];return o[0].evaluate(r)&&u.evaluate(r)}],[cl(ot),function(r,o){for(var u=0,d=o;u<d.length;u+=1)if(!d[u].evaluate(r))return!1;return!0}]]},any:{type:ot,overloads:[[[ot,ot],function(r,o){var u=o[1];return o[0].evaluate(r)||u.evaluate(r)}],[cl(ot),function(r,o){for(var u=0,d=o;u<d.length;u+=1)if(d[u].evaluate(r))return!0;return!1}]]},"!":[ot,[ot],function(r,o){return!o[0].evaluate(r)}],"is-supported-script":[ot,[xt],function(r,o){var u=r.globals&&r.globals.isSupportedScript;return!u||u(o[0].evaluate(r))}],upcase:[xt,[xt],function(r,o){return o[0].evaluate(r).toUpperCase()}],downcase:[xt,[xt],function(r,o){return o[0].evaluate(r).toLowerCase()}],concat:[xt,cl(zt),function(r,o){return o.map(function(u){return qa(u.evaluate(r))}).join("")}],"resolved-locale":[xt,[tr],function(r,o){return o[0].evaluate(r).resolvedLocale()}]});var Mu=function(r,o){this.expression=r,this._warningHistory={},this._evaluator=new Ga,this._defaultValue=o?function(u){return u.type==="color"&&Nf(u.default)?new Fn(0,0,0,0):u.type==="color"?Fn.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null};function $f(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Ms}function Uf(r,o){var u=new sr(Ms,[],o?function(y){var x={color:mn,string:xt,number:rt,enum:xt,boolean:ot,formatted:Tn,resolvedImage:ar};return y.type==="array"?Tr(x[y.value]||zt,y.length):x[y.type]}(o):void 0),d=u.parse(r,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?yc(new Mu(d,o)):Rs(u.errors)}Mu.prototype.evaluateWithoutErrorHandling=function(r,o,u,d,y,x){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=d,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)},Mu.prototype.evaluate=function(r,o,u,d,y,x){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=d,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{var S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Ir("Expected value to be one of "+Object.keys(this._enumValues).map(function(T){return JSON.stringify(T)}).join(", ")+", but found "+JSON.stringify(S)+" instead.");return S}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}};var xc=function(r,o){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!ol(o.expression)};xc.prototype.evaluateWithoutErrorHandling=function(r,o,u,d,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,d,y,x)},xc.prototype.evaluate=function(r,o,u,d,y,x){return this._styleExpression.evaluate(r,o,u,d,y,x)};var Ru=function(r,o,u,d){this.kind=r,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!ol(o.expression),this.interpolationType=d};function fl(r,o){if((r=Uf(r,o)).result==="error")return r;var u=r.value.expression,d=Wl(u);if(!d&&!Ql(o))return Rs([new Mt("","data expressions not supported")]);var y=Of(u,["zoom"]);if(!y&&!Bf(o))return Rs([new Mt("","zoom expressions not supported")]);var x=function S(T){var M=null;if(T instanceof Os)M=S(T.result);else if(T instanceof Is)for(var z=0,$=T.args;z<$.length&&!(M=S($[z]));z+=1);else(T instanceof Wa||T instanceof Mi)&&T.input instanceof Kr&&T.input.name==="zoom"&&(M=T);return M instanceof Mt||T.eachChild(function(j){var Q=S(j);Q instanceof Mt?M=Q:!M&&Q?M=new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):M&&Q&&M!==Q&&(M=new Mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),M}(u);return x||y?x instanceof Mt?Rs([x]):x instanceof Mi&&!vc(o)?Rs([new Mt("",'"interpolate" expressions cannot be used with this property')]):yc(x?new Ru(d?"camera":"composite",r.value,x.labels,x instanceof Mi?x.interpolation:void 0):new xc(d?"constant":"source",r.value)):Rs([new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Ru.prototype.evaluateWithoutErrorHandling=function(r,o,u,d,y,x){return this._styleExpression.evaluateWithoutErrorHandling(r,o,u,d,y,x)},Ru.prototype.evaluate=function(r,o,u,d,y,x){return this._styleExpression.evaluate(r,o,u,d,y,x)},Ru.prototype.interpolationFactor=function(r,o,u){return this.interpolationType?Mi.interpolationFactor(this.interpolationType,r,o,u):0};var bc=function(r,o){this._parameters=r,this._specification=o,vt(this,function u(d,y){var x,S,T,M=y.type==="color",z=d.stops&&typeof d.stops[0][0]=="object",$=z||!(z||d.property!==void 0),j=d.type||(vc(y)?"exponential":"interval");if(M&&((d=vt({},d)).stops&&(d.stops=d.stops.map(function(wt){return[wt[0],Fn.parse(wt[1])]})),d.default=Fn.parse(d.default?d.default:y.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!lh[d.colorSpace])throw new Error("Unknown color space: "+d.colorSpace);if(j==="exponential")x=Lu;else if(j==="interval")x=_c;else if(j==="categorical"){x=ch,S=Object.create(null);for(var Q=0,ee=d.stops;Q<ee.length;Q+=1){var pe=ee[Q];S[pe[0]]=pe[1]}T=typeof d.stops[0][0]}else{if(j!=="identity")throw new Error('Unknown function type "'+j+'"');x=fh}if(z){for(var he={},Pe=[],we=0;we<d.stops.length;we++){var De=d.stops[we],Be=De[0].zoom;he[Be]===void 0&&(he[Be]={zoom:Be,type:d.type,property:d.property,default:d.default,stops:[]},Pe.push(Be)),he[Be].stops.push([De[0].value,De[1]])}for(var Ve=[],qe=0,et=Pe;qe<et.length;qe+=1){var dt=et[qe];Ve.push([he[dt].zoom,u(he[dt],y)])}var _t={name:"linear"};return{kind:"composite",interpolationType:_t,interpolationFactor:Mi.interpolationFactor.bind(void 0,_t),zoomStops:Ve.map(function(wt){return wt[0]}),evaluate:function(wt,Gt){var Et=wt.zoom;return Lu({stops:Ve,base:d.base},y,Et).evaluate(Et,Gt)}}}if($){var Nt=j==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:Nt,interpolationFactor:Mi.interpolationFactor.bind(void 0,Nt),zoomStops:d.stops.map(function(wt){return wt[0]}),evaluate:function(wt){return x(d,y,wt.zoom,S,T)}}}return{kind:"source",evaluate:function(wt,Gt){var Et=Gt&&Gt.properties?Gt.properties[d.property]:void 0;return Et===void 0?Gi(d.default,y.default):x(d,y,Et,S,T)}}}(this._parameters,this._specification))};function Za(r){var o=r.key,u=r.value,d=r.valueSpec||{},y=r.objectElementValidators||{},x=r.style,S=r.styleSpec,T=[],M=dr(u);if(M!=="object")return[new be(o,u,"object expected, "+M+" found")];for(var z in u){var $=z.split(".")[0],j=d[$]||d["*"],Q=void 0;if(y[$])Q=y[$];else if(d[$])Q=zn;else if(y["*"])Q=y["*"];else{if(!d["*"]){T.push(new be(o,u[z],'unknown property "'+z+'"'));continue}Q=zn}T=T.concat(Q({key:(o&&o+".")+z,value:u[z],valueSpec:j,style:x,styleSpec:S,object:u,objectKey:z},u))}for(var ee in d)y[ee]||d[ee].required&&d[ee].default===void 0&&u[ee]===void 0&&T.push(new be(o,u,'missing required property "'+ee+'"'));return T}function jf(r){var o=r.value,u=r.valueSpec,d=r.style,y=r.styleSpec,x=r.key,S=r.arrayElementValidator||zn;if(dr(o)!=="array")return[new be(x,o,"array expected, "+dr(o)+" found")];if(u.length&&o.length!==u.length)return[new be(x,o,"array length "+u.length+" expected, length "+o.length+" found")];if(u["min-length"]&&o.length<u["min-length"])return[new be(x,o,"array length at least "+u["min-length"]+" expected, length "+o.length+" found")];var T={type:u.value,values:u.values};y.$version<7&&(T.function=u.function),dr(u.value)==="object"&&(T=u.value);for(var M=[],z=0;z<o.length;z++)M=M.concat(S({array:o,arrayIndex:z,value:o[z],valueSpec:T,style:d,styleSpec:y,key:x+"["+z+"]"}));return M}function ph(r){var o=r.key,u=r.value,d=r.valueSpec,y=dr(u);return y==="number"&&u!=u&&(y="NaN"),y!=="number"?[new be(o,u,"number expected, "+y+" found")]:"minimum"in d&&u<d.minimum?[new be(o,u,u+" is less than the minimum value "+d.minimum)]:"maximum"in d&&u>d.maximum?[new be(o,u,u+" is greater than the maximum value "+d.maximum)]:[]}function us(r){var o,u,d,y=r.valueSpec,x=je(r.value.type),S={},T=x!=="categorical"&&r.value.property===void 0,M=!T,z=dr(r.value.stops)==="array"&&dr(r.value.stops[0])==="array"&&dr(r.value.stops[0][0])==="object",$=Za({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(ee){if(x==="identity")return[new be(ee.key,ee.value,'identity function may not have a "stops" property')];var pe=[],he=ee.value;return pe=pe.concat(jf({key:ee.key,value:he,valueSpec:ee.valueSpec,style:ee.style,styleSpec:ee.styleSpec,arrayElementValidator:j})),dr(he)==="array"&&he.length===0&&pe.push(new be(ee.key,he,"array must have at least one stop")),pe},default:function(ee){return zn({key:ee.key,value:ee.value,valueSpec:y,style:ee.style,styleSpec:ee.styleSpec})}}});return x==="identity"&&T&&$.push(new be(r.key,r.value,'missing required property "property"')),x==="identity"||r.value.stops||$.push(new be(r.key,r.value,'missing required property "stops"')),x==="exponential"&&r.valueSpec.expression&&!vc(r.valueSpec)&&$.push(new be(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(M&&!Ql(r.valueSpec)?$.push(new be(r.key,r.value,"property functions not supported")):T&&!Bf(r.valueSpec)&&$.push(new be(r.key,r.value,"zoom functions not supported"))),x!=="categorical"&&!z||r.value.property!==void 0||$.push(new be(r.key,r.value,'"property" property is required')),$;function j(ee){var pe=[],he=ee.value,Pe=ee.key;if(dr(he)!=="array")return[new be(Pe,he,"array expected, "+dr(he)+" found")];if(he.length!==2)return[new be(Pe,he,"array length 2 expected, length "+he.length+" found")];if(z){if(dr(he[0])!=="object")return[new be(Pe,he,"object expected, "+dr(he[0])+" found")];if(he[0].zoom===void 0)return[new be(Pe,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new be(Pe,he,"object stop key must have value")];if(d&&d>je(he[0].zoom))return[new be(Pe,he[0].zoom,"stop zoom values must appear in ascending order")];je(he[0].zoom)!==d&&(d=je(he[0].zoom),u=void 0,S={}),pe=pe.concat(Za({key:Pe+"[0]",value:he[0],valueSpec:{zoom:{}},style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{zoom:ph,value:Q}}))}else pe=pe.concat(Q({key:Pe+"[0]",value:he[0],valueSpec:{},style:ee.style,styleSpec:ee.styleSpec},he));return $f(st(he[1]))?pe.concat([new be(Pe+"[1]",he[1],"expressions are not allowed in function stops.")]):pe.concat(zn({key:Pe+"[1]",value:he[1],valueSpec:y,style:ee.style,styleSpec:ee.styleSpec}))}function Q(ee,pe){var he=dr(ee.value),Pe=je(ee.value),we=ee.value!==null?ee.value:pe;if(o){if(he!==o)return[new be(ee.key,we,he+" stop domain type must match previous stop domain type "+o)]}else o=he;if(he!=="number"&&he!=="string"&&he!=="boolean")return[new be(ee.key,we,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&x!=="categorical"){var De="number expected, "+he+" found";return Ql(y)&&x===void 0&&(De+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new be(ee.key,we,De)]}return x!=="categorical"||he!=="number"||isFinite(Pe)&&Math.floor(Pe)===Pe?x!=="categorical"&&he==="number"&&u!==void 0&&Pe<u?[new be(ee.key,we,"stop domain values must appear in ascending order")]:(u=Pe,x==="categorical"&&Pe in S?[new be(ee.key,we,"stop domain values must be unique")]:(S[Pe]=!0,[])):[new be(ee.key,we,"integer expected, found "+Pe)]}}function cs(r){var o=(r.expressionContext==="property"?fl:Uf)(st(r.value),r.valueSpec);if(o.result==="error")return o.value.map(function(d){return new be(""+r.key+d.key,r.value,d.message)});var u=o.value.expression||o.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!u.outputDefined())return[new be(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ol(u))return[new be(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!ol(u))return[new be(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Of(u,["zoom","feature-state"]))return[new be(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Wl(u))return[new be(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wc(r){var o=r.key,u=r.value,d=r.valueSpec,y=[];return Array.isArray(d.values)?d.values.indexOf(je(u))===-1&&y.push(new be(o,u,"expected one of ["+d.values.join(", ")+"], "+JSON.stringify(u)+" found")):Object.keys(d.values).indexOf(je(u))===-1&&y.push(new be(o,u,"expected one of ["+Object.keys(d.values).join(", ")+"], "+JSON.stringify(u)+" found")),y}function Sc(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var o=0,u=r.slice(1);o<u.length;o+=1){var d=u[o];if(!Sc(d)&&typeof d!="boolean")return!1}return!0;default:return!0}}bc.deserialize=function(r){return new bc(r._parameters,r._specification)},bc.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var zg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fs(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};Sc(r)||(r=Cc(r));var o=Uf(r,zg);if(o.result==="error")throw new Error(o.value.map(function(u){return u.key+": "+u.message}).join(", "));return{filter:function(u,d,y){return o.value.evaluate(u,d,{},y)},needGeometry:function u(d){if(!Array.isArray(d))return!1;if(d[0]==="within")return!0;for(var y=1;y<d.length;y++)if(u(d[y]))return!0;return!1}(r)}}function Xa(r,o){return r<o?-1:r>o?1:0}function Cc(r){if(!r)return!0;var o,u=r[0];return r.length<=1?u!=="any":u==="=="?hh(r[1],r[2],"=="):u==="!="?Vf(hh(r[1],r[2],"==")):u==="<"||u===">"||u==="<="||u===">="?hh(r[1],r[2],u):u==="any"?(o=r.slice(1),["any"].concat(o.map(Cc))):u==="all"?["all"].concat(r.slice(1).map(Cc)):u==="none"?["all"].concat(r.slice(1).map(Cc).map(Vf)):u==="in"?Bd(r[1],r.slice(2)):u==="!in"?Vf(Bd(r[1],r.slice(2))):u==="has"?Nd(r[1]):u==="!has"?Vf(Nd(r[1])):u!=="within"||r}function hh(r,o,u){switch(r){case"$type":return["filter-type-"+u,o];case"$id":return["filter-id-"+u,o];default:return["filter-"+u,r,o]}}function Bd(r,o){if(o.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(function(u){return typeof u!=typeof o[0]})?["filter-in-large",r,["literal",o.sort(Xa)]]:["filter-in-small",r,["literal",o]]}}function Nd(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Vf(r){return["!",r]}function qf(r){return Sc(st(r.value))?cs(vt({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function o(u){var d=u.value,y=u.key;if(dr(d)!=="array")return[new be(y,d,"array expected, "+dr(d)+" found")];var x,S=u.styleSpec,T=[];if(d.length<1)return[new be(y,d,"filter array must have at least 1 element")];switch(T=T.concat(wc({key:y+"[0]",value:d[0],valueSpec:S.filter_operator,style:u.style,styleSpec:u.styleSpec})),je(d[0])){case"<":case"<=":case">":case">=":d.length>=2&&je(d[1])==="$type"&&T.push(new be(y,d,'"$type" cannot be use with operator "'+d[0]+'"'));case"==":case"!=":d.length!==3&&T.push(new be(y,d,'filter array for operator "'+d[0]+'" must have 3 elements'));case"in":case"!in":d.length>=2&&(x=dr(d[1]))!=="string"&&T.push(new be(y+"[1]",d[1],"string expected, "+x+" found"));for(var M=2;M<d.length;M++)x=dr(d[M]),je(d[1])==="$type"?T=T.concat(wc({key:y+"["+M+"]",value:d[M],valueSpec:S.geometry_type,style:u.style,styleSpec:u.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&T.push(new be(y+"["+M+"]",d[M],"string, number, or boolean expected, "+x+" found"));break;case"any":case"all":case"none":for(var z=1;z<d.length;z++)T=T.concat(o({key:y+"["+z+"]",value:d[z],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":x=dr(d[1]),d.length!==2?T.push(new be(y,d,'filter array for "'+d[0]+'" operator must have 2 elements')):x!=="string"&&T.push(new be(y+"[1]",d[1],"string expected, "+x+" found"));break;case"within":x=dr(d[1]),d.length!==2?T.push(new be(y,d,'filter array for "'+d[0]+'" operator must have 2 elements')):x!=="object"&&T.push(new be(y+"[1]",d[1],"object expected, "+x+" found"))}return T}(r)}function pl(r,o){var u=r.key,d=r.style,y=r.styleSpec,x=r.value,S=r.objectKey,T=y[o+"_"+r.layerType];if(!T)return[];var M=S.match(/^(.*)-transition$/);if(o==="paint"&&M&&T[M[1]]&&T[M[1]].transition)return zn({key:u,value:x,valueSpec:y.transition,style:d,styleSpec:y});var z,$=r.valueSpec||T[S];if(!$)return[new be(u,x,'unknown property "'+S+'"')];if(dr(x)==="string"&&Ql($)&&!$.tokens&&(z=/^{([^}]+)}$/.exec(x)))return[new be(u,x,'"'+S+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(z[1])+" }`.")];var j=[];return r.layerType==="symbol"&&(S==="text-field"&&d&&!d.glyphs&&j.push(new be(u,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Nf(st(x))&&je(x.type)==="identity"&&j.push(new be(u,x,'"text-font" does not support identity functions'))),j.concat(zn({key:r.key,value:x,valueSpec:$,style:d,styleSpec:y,expressionContext:"property",propertyType:o,propertyKey:S}))}function ze(r){return pl(r,"paint")}function it(r){return pl(r,"layout")}function Qe(r){var o=[],u=r.value,d=r.key,y=r.style,x=r.styleSpec;u.type||u.ref||o.push(new be(d,u,'either "type" or "ref" is required'));var S,T=je(u.type),M=je(u.ref);if(u.id)for(var z=je(u.id),$=0;$<r.arrayIndex;$++){var j=y.layers[$];je(j.id)===z&&o.push(new be(d,u.id,'duplicate layer id "'+u.id+'", previously used at line '+j.id.__line__))}if("ref"in u)["type","source","source-layer","filter","layout"].forEach(function(pe){pe in u&&o.push(new be(d,u[pe],'"'+pe+'" is prohibited for ref layers'))}),y.layers.forEach(function(pe){je(pe.id)===M&&(S=pe)}),S?S.ref?o.push(new be(d,u.ref,"ref cannot reference another ref layer")):T=je(S.type):o.push(new be(d,u.ref,'ref layer "'+M+'" not found'));else if(T!=="background")if(u.source){var Q=y.sources&&y.sources[u.source],ee=Q&&je(Q.type);Q?ee==="vector"&&T==="raster"?o.push(new be(d,u.source,'layer "'+u.id+'" requires a raster source')):ee==="raster"&&T!=="raster"?o.push(new be(d,u.source,'layer "'+u.id+'" requires a vector source')):ee!=="vector"||u["source-layer"]?ee==="raster-dem"&&T!=="hillshade"?o.push(new be(d,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!u.paint||!u.paint["line-gradient"]||ee==="geojson"&&Q.lineMetrics||o.push(new be(d,u,'layer "'+u.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):o.push(new be(d,u,'layer "'+u.id+'" must specify a "source-layer"')):o.push(new be(d,u.source,'source "'+u.source+'" not found'))}else o.push(new be(d,u,'missing required property "source"'));return o=o.concat(Za({key:d,value:u,valueSpec:x.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return zn({key:d+".type",value:u.type,valueSpec:x.layer.type,style:r.style,styleSpec:r.styleSpec,object:u,objectKey:"type"})},filter:qf,layout:function(pe){return Za({layer:u,key:pe.key,value:pe.value,style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{"*":function(he){return it(vt({layerType:T},he))}}})},paint:function(pe){return Za({layer:u,key:pe.key,value:pe.value,style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{"*":function(he){return ze(vt({layerType:T},he))}}})}}}))}function yt(r){var o=r.value,u=r.key,d=dr(o);return d!=="string"?[new be(u,o,"string expected, "+d+" found")]:[]}var Sn={promoteId:function(r){var o=r.key,u=r.value;if(dr(u)==="string")return yt({key:o,value:u});var d=[];for(var y in u)d.push.apply(d,yt({key:o+"."+y,value:u[y]}));return d}};function Zn(r){var o=r.value,u=r.key,d=r.styleSpec,y=r.style;if(!o.type)return[new be(u,o,'"type" is required')];var x,S=je(o.type);switch(S){case"vector":case"raster":case"raster-dem":return Za({key:u,value:o,valueSpec:d["source_"+S.replace("-","_")],style:r.style,styleSpec:d,objectElementValidators:Sn});case"geojson":if(x=Za({key:u,value:o,valueSpec:d.source_geojson,style:y,styleSpec:d,objectElementValidators:Sn}),o.cluster)for(var T in o.clusterProperties){var M=o.clusterProperties[T],z=M[0],$=typeof z=="string"?[z,["accumulated"],["get",T]]:z;x.push.apply(x,cs({key:u+"."+T+".map",value:M[1],expressionContext:"cluster-map"})),x.push.apply(x,cs({key:u+"."+T+".reduce",value:$,expressionContext:"cluster-reduce"}))}return x;case"video":return Za({key:u,value:o,valueSpec:d.source_video,style:y,styleSpec:d});case"image":return Za({key:u,value:o,valueSpec:d.source_image,style:y,styleSpec:d});case"canvas":return[new be(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wc({key:u+".type",value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:d})}}function Br(r){var o=r.value,u=r.styleSpec,d=u.light,y=r.style,x=[],S=dr(o);if(o===void 0)return x;if(S!=="object")return x.concat([new be("light",o,"object expected, "+S+" found")]);for(var T in o){var M=T.match(/^(.*)-transition$/);x=x.concat(M&&d[M[1]]&&d[M[1]].transition?zn({key:T,value:o[T],valueSpec:u.transition,style:y,styleSpec:u}):d[T]?zn({key:T,value:o[T],valueSpec:d[T],style:y,styleSpec:u}):[new be(T,o[T],'unknown property "'+T+'"')])}return x}var nn={"*":function(){return[]},array:jf,boolean:function(r){var o=r.value,u=r.key,d=dr(o);return d!=="boolean"?[new be(u,o,"boolean expected, "+d+" found")]:[]},number:ph,color:function(r){var o=r.key,u=r.value,d=dr(u);return d!=="string"?[new be(o,u,"color expected, "+d+" found")]:Iu(u)===null?[new be(o,u,'color expected, "'+u+'" found')]:[]},constants:at,enum:wc,filter:qf,function:us,layer:Qe,object:Za,source:Zn,light:Br,string:yt,formatted:function(r){return yt(r).length===0?[]:cs(r)},resolvedImage:function(r){return yt(r).length===0?[]:cs(r)}};function zn(r){var o=r.value,u=r.valueSpec,d=r.styleSpec;return u.expression&&Nf(je(o))?us(r):u.expression&&$f(st(o))?cs(r):u.type&&nn[u.type]?nn[u.type](r):Za(vt({},r,{valueSpec:u.type?d[u.type]:u}))}function Yl(r){var o=r.value,u=r.key,d=yt(r);return d.length||(o.indexOf("{fontstack}")===-1&&d.push(new be(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&d.push(new be(u,o,'"glyphs" url must include a "{range}" token'))),d}function mi(r,o){o===void 0&&(o=le);var u=[];return u=u.concat(zn({key:"",value:r,valueSpec:o.$root,styleSpec:o,style:r,objectElementValidators:{glyphs:Yl,"*":function(){return[]}}})),r.constants&&(u=u.concat(at({key:"constants",value:r.constants,style:r,styleSpec:o}))),Ec(u)}function Ec(r){return[].concat(r).sort(function(o,u){return o.line-u.line})}function Fu(r){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];return Ec(r.apply(this,o))}}mi.source=Fu(Zn),mi.light=Fu(Br),mi.layer=Fu(Qe),mi.filter=Fu(qf),mi.paintProperty=Fu(ze),mi.layoutProperty=Fu(it);var fs=mi,Hf=fs.light,hl=fs.paintProperty,lr=fs.layoutProperty;function kc(r,o){var u=!1;if(o&&o.length)for(var d=0,y=o;d<y.length;d+=1)r.fire(new Te(new Error(y[d].message))),u=!0;return u}var Wi=xo;function xo(r,o,u){var d=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var y=new Int32Array(this.arrayBuffer);r=y[0],this.d=(o=y[1])+2*(u=y[2]);for(var x=0;x<this.d*this.d;x++){var S=y[3+x],T=y[3+x+1];d.push(S===T?null:y.subarray(S,T))}var M=y[3+d.length+1];this.keys=y.subarray(y[3+d.length],M),this.bboxes=y.subarray(M),this.insert=this._insertReadonly}else{this.d=o+2*u;for(var z=0;z<this.d*this.d;z++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=u,this.scale=o/r,this.uid=0;var $=u/o*r;this.min=-$,this.max=r+$}xo.prototype.insert=function(r,o,u,d,y){this._forEachCell(o,u,d,y,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(y)},xo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xo.prototype._insertCell=function(r,o,u,d,y,x){this.cells[y].push(x)},xo.prototype.query=function(r,o,u,d,y){var x=this.min,S=this.max;if(r<=x&&o<=x&&S<=u&&S<=d&&!y)return Array.prototype.slice.call(this.keys);var T=[];return this._forEachCell(r,o,u,d,this._queryCell,T,{},y),T},xo.prototype._queryCell=function(r,o,u,d,y,x,S,T){var M=this.cells[y];if(M!==null)for(var z=this.keys,$=this.bboxes,j=0;j<M.length;j++){var Q=M[j];if(S[Q]===void 0){var ee=4*Q;(T?T($[ee+0],$[ee+1],$[ee+2],$[ee+3]):r<=$[ee+2]&&o<=$[ee+3]&&u>=$[ee+0]&&d>=$[ee+1])?(S[Q]=!0,x.push(z[Q])):S[Q]=!1}}},xo.prototype._forEachCell=function(r,o,u,d,y,x,S,T){for(var M=this._convertToCellCoord(r),z=this._convertToCellCoord(o),$=this._convertToCellCoord(u),j=this._convertToCellCoord(d),Q=M;Q<=$;Q++)for(var ee=z;ee<=j;ee++){var pe=this.d*ee+Q;if((!T||T(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&y.call(this,r,o,u,d,pe,x,S,T))return}},xo.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},xo.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},xo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,o=3+this.cells.length+1+1,u=0,d=0;d<this.cells.length;d++)u+=this.cells[d].length;var y=new Int32Array(o+u+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var x=o,S=0;S<r.length;S++){var T=r[S];y[3+S]=x,y.set(T,x),x+=T.length}return y[3+r.length]=x,y.set(this.keys,x),y[3+r.length+1]=x+=this.keys.length,y.set(this.bboxes,x),x+=this.bboxes.length,y.buffer};var $d=I.ImageData,Di=I.ImageBitmap,Zo={};function At(r,o,u){u===void 0&&(u={}),Object.defineProperty(o,"_classRegistryKey",{value:r,writeable:!1}),Zo[r]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}for(var Ea in At("Object",Object),Wi.serialize=function(r,o){var u=r.toArrayBuffer();return o&&o.push(u),{buffer:u}},Wi.deserialize=function(r){return new Wi(r.buffer)},At("Grid",Wi),At("Color",Fn),At("Error",Error),At("ResolvedImage",vo),At("StylePropertyFunction",bc),At("StyleExpression",Mu,{omit:["_evaluator"]}),At("ZoomDependentExpression",Ru),At("ZoomConstantExpression",xc),At("CompoundExpression",Kr,{omit:["_evaluate"]}),Ms)Ms[Ea]._classRegistryKey||At("Expression_"+Ea,Ms[Ea]);function Ds(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function zs(r){return Di&&r instanceof Di}function oo(r,o){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(Ds(r)||zs(r))return o&&o.push(r),r;if(ArrayBuffer.isView(r)){var u=r;return o&&o.push(u.buffer),u}if(r instanceof $d)return o&&o.push(r.data.buffer),r;if(Array.isArray(r)){for(var d=[],y=0,x=r;y<x.length;y+=1)d.push(oo(x[y],o));return d}if(typeof r=="object"){var S=r.constructor,T=S._classRegistryKey;if(!T)throw new Error("can't serialize object of unregistered class");var M=S.serialize?S.serialize(r,o):{};if(!S.serialize){for(var z in r)if(r.hasOwnProperty(z)&&!(Zo[T].omit.indexOf(z)>=0)){var $=r[z];M[z]=Zo[T].shallow.indexOf(z)>=0?$:oo($,o)}r instanceof Error&&(M.message=r.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return T!=="Object"&&(M.$name=T),M}throw new Error("can't serialize object of type "+typeof r)}function Du(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Ds(r)||zs(r)||ArrayBuffer.isView(r)||r instanceof $d)return r;if(Array.isArray(r))return r.map(Du);if(typeof r=="object"){var o=r.$name||"Object",u=Zo[o].klass;if(!u)throw new Error("can't deserialize unregistered class "+o);if(u.deserialize)return u.deserialize(r);for(var d=Object.create(u.prototype),y=0,x=Object.keys(r);y<x.length;y+=1){var S=x[y];if(S!=="$name"){var T=r[S];d[S]=Zo[o].shallow.indexOf(S)>=0?T:Du(T)}}return d}throw new Error("can't deserialize object of type "+typeof r)}var bo=function(){this.first=!0};bo.prototype.update=function(r,o){var u=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=u,!0))};var It={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function Ac(r){for(var o=0,u=r;o<u.length;o+=1)if(dl(u[o].charCodeAt(0)))return!0;return!1}function dl(r){return!(r!==746&&r!==747&&(r<4352||!(It["Bopomofo Extended"](r)||It.Bopomofo(r)||It["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||It["CJK Compatibility Ideographs"](r)||It["CJK Compatibility"](r)||It["CJK Radicals Supplement"](r)||It["CJK Strokes"](r)||!(!It["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||It["CJK Unified Ideographs Extension A"](r)||It["CJK Unified Ideographs"](r)||It["Enclosed CJK Letters and Months"](r)||It["Hangul Compatibility Jamo"](r)||It["Hangul Jamo Extended-A"](r)||It["Hangul Jamo Extended-B"](r)||It["Hangul Jamo"](r)||It["Hangul Syllables"](r)||It.Hiragana(r)||It["Ideographic Description Characters"](r)||It.Kanbun(r)||It["Kangxi Radicals"](r)||It["Katakana Phonetic Extensions"](r)||It.Katakana(r)&&r!==12540||!(!It["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!It["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||It["Unified Canadian Aboriginal Syllabics"](r)||It["Unified Canadian Aboriginal Syllabics Extended"](r)||It["Vertical Forms"](r)||It["Yijing Hexagram Symbols"](r)||It["Yi Syllables"](r)||It["Yi Radicals"](r))))}function Ki(r){return!(dl(r)||function(o){return!!(It["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||It["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||It["Letterlike Symbols"](o)||It["Number Forms"](o)||It["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||It["Control Pictures"](o)&&o!==9251||It["Optical Character Recognition"](o)||It["Enclosed Alphanumerics"](o)||It["Geometric Shapes"](o)||It["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||It["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||It["CJK Symbols and Punctuation"](o)||It.Katakana(o)||It["Private Use Area"](o)||It["CJK Compatibility Forms"](o)||It["Small Form Variants"](o)||It["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(r))}function Zi(r){return r>=1424&&r<=2303||It["Arabic Presentation Forms-A"](r)||It["Arabic Presentation Forms-B"](r)}function Gf(r,o){return!(!o&&Zi(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||It.Khmer(r))}function Ud(r){for(var o=0,u=r;o<u.length;o+=1)if(Zi(u[o].charCodeAt(0)))return!0;return!1}var dh=null,Xi="unavailable",Qa=null,zu=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Xi="error"),dh&&dh(r)};function mh(){Wf.fire(new Ae("pluginStateChange",{pluginStatus:Xi,pluginURL:Qa}))}var Wf=new Ee,Ya=function(){return Xi},jd=function(){if(Xi!=="deferred"||!Qa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xi="loading",mh(),Qa&&or({url:Qa},function(r){r?zu(r):(Xi="loaded",mh())})},In={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Xi==="loaded"||In.applyArabicShaping!=null},isLoading:function(){return Xi==="loading"},setState:function(r){Xi=r.pluginStatus,Qa=r.pluginURL},isParsed:function(){return In.applyArabicShaping!=null&&In.processBidirectionalText!=null&&In.processStyledBidirectionalText!=null},getPluginURL:function(){return Qa}},xn=function(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bo,this.transition={})};xn.prototype.isSupportedScript=function(r){return function(o,u){for(var d=0,y=o;d<y.length;d+=1)if(!Gf(y[d].charCodeAt(0),u))return!1;return!0}(r,In.isLoaded())},xn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},xn.prototype.getCrossfadeParameters=function(){var r=this.zoom,o=r-Math.floor(r),u=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*o}};var ka=function(r,o){this.property=r,this.value=o,this.expression=function(u,d){if(Nf(u))return new bc(u,d);if($f(u)){var y=fl(u,d);if(y.result==="error")throw new Error(y.value.map(function(S){return S.key+": "+S.message}).join(", "));return y.value}var x=u;return typeof u=="string"&&d.type==="color"&&(x=Fn.parse(u)),{kind:"constant",evaluate:function(){return x}}}(o===void 0?r.specification.default:o,r.specification)};ka.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ka.prototype.possiblyEvaluate=function(r,o,u){return this.property.possiblyEvaluate(this,r,o,u)};var Xo=function(r){this.property=r,this.value=new ka(r,void 0)};Xo.prototype.transitioned=function(r,o){return new Jl(this.property,this.value,o,U({},r.transition,this.transition),r.now)},Xo.prototype.untransitioned=function(){return new Jl(this.property,this.value,null,{},0)};var Qo=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};Qo.prototype.getValue=function(r){return Le(this._values[r].value.value)},Qo.prototype.setValue=function(r,o){this._values.hasOwnProperty(r)||(this._values[r]=new Xo(this._values[r].property)),this._values[r].value=new ka(this._values[r].property,o===null?void 0:Le(o))},Qo.prototype.getTransition=function(r){return Le(this._values[r].transition)},Qo.prototype.setTransition=function(r,o){this._values.hasOwnProperty(r)||(this._values[r]=new Xo(this._values[r].property)),this._values[r].transition=Le(o)||void 0},Qo.prototype.serialize=function(){for(var r={},o=0,u=Object.keys(this._values);o<u.length;o+=1){var d=u[o],y=this.getValue(d);y!==void 0&&(r[d]=y);var x=this.getTransition(d);x!==void 0&&(r[d+"-transition"]=x)}return r},Qo.prototype.transitioned=function(r,o){for(var u=new Aa(this._properties),d=0,y=Object.keys(this._values);d<y.length;d+=1){var x=y[d];u._values[x]=this._values[x].transitioned(r,o._values[x])}return u},Qo.prototype.untransitioned=function(){for(var r=new Aa(this._properties),o=0,u=Object.keys(this._values);o<u.length;o+=1){var d=u[o];r._values[d]=this._values[d].untransitioned()}return r};var Jl=function(r,o,u,d,y){this.property=r,this.value=o,this.begin=y+d.delay||0,this.end=this.begin+d.duration||0,r.specification.transition&&(d.delay||d.duration)&&(this.prior=u)};Jl.prototype.possiblyEvaluate=function(r,o,u){var d=r.now||0,y=this.value.possiblyEvaluate(r,o,u),x=this.prior;if(x){if(d>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(d<this.begin)return x.possiblyEvaluate(r,o,u);var S=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,o,u),y,function(T){if(T<=0)return 0;if(T>=1)return 1;var M=T*T,z=M*T;return 4*(T<.5?z:3*(T-M)+z-.75)}(S))}return y};var Aa=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Aa.prototype.possiblyEvaluate=function(r,o,u){for(var d=new Ta(this._properties),y=0,x=Object.keys(this._values);y<x.length;y+=1){var S=x[y];d._values[S]=this._values[S].possiblyEvaluate(r,o,u)}return d},Aa.prototype.hasTransition=function(){for(var r=0,o=Object.keys(this._values);r<o.length;r+=1)if(this._values[o[r]].prior)return!0;return!1};var Pa=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};Pa.prototype.getValue=function(r){return Le(this._values[r].value)},Pa.prototype.setValue=function(r,o){this._values[r]=new ka(this._values[r].property,o===null?void 0:Le(o))},Pa.prototype.serialize=function(){for(var r={},o=0,u=Object.keys(this._values);o<u.length;o+=1){var d=u[o],y=this.getValue(d);y!==void 0&&(r[d]=y)}return r},Pa.prototype.possiblyEvaluate=function(r,o,u){for(var d=new Ta(this._properties),y=0,x=Object.keys(this._values);y<x.length;y+=1){var S=x[y];d._values[S]=this._values[S].possiblyEvaluate(r,o,u)}return d};var Uo=function(r,o,u){this.property=r,this.value=o,this.parameters=u};Uo.prototype.isConstant=function(){return this.value.kind==="constant"},Uo.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},Uo.prototype.evaluate=function(r,o,u,d){return this.property.evaluate(this.value,this.parameters,r,o,u,d)};var Ta=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};Ta.prototype.get=function(r){return this._values[r]};var St=function(r){this.specification=r};St.prototype.possiblyEvaluate=function(r,o){return r.expression.evaluate(o)},St.prototype.interpolate=function(r,o,u){var d=Lf[this.specification.type];return d?d(r,o,u):r};var Qt=function(r,o){this.specification=r,this.overrides=o};Qt.prototype.possiblyEvaluate=function(r,o,u,d){return new Uo(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},u,d)}:r.expression,o)},Qt.prototype.interpolate=function(r,o,u){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new Uo(this,{kind:"constant",value:void 0},r.parameters);var d=Lf[this.specification.type];return d?new Uo(this,{kind:"constant",value:d(r.value.value,o.value.value,u)},r.parameters):r},Qt.prototype.evaluate=function(r,o,u,d,y,x){return r.kind==="constant"?r.value:r.evaluate(o,u,d,y,x)};var ao=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.possiblyEvaluate=function(u,d,y,x){if(u.value===void 0)return new Uo(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){var S=u.expression.evaluate(d,null,{},y,x),T=u.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,M=this._calculate(T,T,T,d);return new Uo(this,{kind:"constant",value:M},d)}if(u.expression.kind==="camera"){var z=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new Uo(this,{kind:"constant",value:z},d)}return new Uo(this,u.expression,d)},o.prototype.evaluate=function(u,d,y,x,S,T){if(u.kind==="source"){var M=u.evaluate(d,y,x,S,T);return this._calculate(M,M,M,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},y,x),u.evaluate({zoom:Math.floor(d.zoom)},y,x),u.evaluate({zoom:Math.floor(d.zoom)+1},y,x),d):u.value},o.prototype._calculate=function(u,d,y,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:y,to:d}},o.prototype.interpolate=function(u){return u},o}(Qt),so=function(r){this.specification=r};so.prototype.possiblyEvaluate=function(r,o,u,d){if(r.value!==void 0){if(r.expression.kind==="constant"){var y=r.expression.evaluate(o,null,{},u,d);return this._calculate(y,y,y,o)}return this._calculate(r.expression.evaluate(new xn(Math.floor(o.zoom-1),o)),r.expression.evaluate(new xn(Math.floor(o.zoom),o)),r.expression.evaluate(new xn(Math.floor(o.zoom+1),o)),o)}},so.prototype._calculate=function(r,o,u,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:u,to:o}},so.prototype.interpolate=function(r){return r};var Bs=function(r){this.specification=r};Bs.prototype.possiblyEvaluate=function(r,o,u,d){return!!r.expression.evaluate(o,null,{},u,d)},Bs.prototype.interpolate=function(){return!1};var Yo=function(r){for(var o in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var u=r[o];u.specification.overridable&&this.overridableProperties.push(o);var d=this.defaultPropertyValues[o]=new ka(u,void 0),y=this.defaultTransitionablePropertyValues[o]=new Xo(u);this.defaultTransitioningPropertyValues[o]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=d.possiblyEvaluate({})}};At("DataDrivenProperty",Qt),At("DataConstantProperty",St),At("CrossFadedDataDrivenProperty",ao),At("CrossFadedProperty",so),At("ColorRampProperty",Bs);var Ia=function(r){function o(u,d){if(r.call(this),this.id=u.id,this.type=u.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},u.type!=="custom"&&(this.metadata=(u=u).metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),d.layout&&(this._unevaluatedLayout=new Pa(d.layout)),d.paint)){for(var y in this._transitionablePaint=new Qo(d.paint),u.paint)this.setPaintProperty(y,u.paint[y],{validate:!1});for(var x in u.layout)this.setLayoutProperty(x,u.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ta(d.paint)}}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},o.prototype.getLayoutProperty=function(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)},o.prototype.setLayoutProperty=function(u,d,y){y===void 0&&(y={}),d!=null&&this._validate(lr,"layers."+this.id+".layout."+u,u,d,y)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)},o.prototype.getPaintProperty=function(u){return xe(u,"-transition")?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)},o.prototype.setPaintProperty=function(u,d,y){if(y===void 0&&(y={}),d!=null&&this._validate(hl,"layers."+this.id+".paint."+u,u,d,y))return!1;if(xe(u,"-transition"))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;var x=this._transitionablePaint._values[u],S=x.property.specification["property-type"]==="cross-faded-data-driven",T=x.value.isDataDriven(),M=x.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);var z=this._transitionablePaint._values[u].value;return z.isDataDriven()||T||S||this._handleOverridablePaintPropertyUpdate(u,M,z)},o.prototype._handleSpecialPaintPropertyUpdate=function(u){},o.prototype._handleOverridablePaintPropertyUpdate=function(u,d,y){return!1},o.prototype.isHidden=function(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"},o.prototype.updateTransitions=function(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)},o.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},o.prototype.recalculate=function(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)},o.prototype.serialize=function(){var u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),$e(u,function(d,y){return!(d===void 0||y==="layout"&&!Object.keys(d).length||y==="paint"&&!Object.keys(d).length)})},o.prototype._validate=function(u,d,y,x,S){return S===void 0&&(S={}),(!S||S.validate!==!1)&&kc(this,u.call(fs,{key:d,layerType:this.type,objectKey:y,value:x,styleSpec:le,style:{glyphs:!0,sprite:!0}}))},o.prototype.is3D=function(){return!1},o.prototype.isTileClipped=function(){return!1},o.prototype.hasOffscreenPass=function(){return!1},o.prototype.resize=function(){},o.prototype.isStateDependent=function(){for(var u in this.paint._values){var d=this.paint.get(u);if(d instanceof Uo&&Ql(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1},o}(Ee),Bg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ns=function(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ur=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ti(r,o){o===void 0&&(o=1);var u=0,d=0;return{members:r.map(function(y){var x=Bg[y.type].BYTES_PER_ELEMENT,S=u=Kf(u,Math.max(o,x)),T=y.components||1;return d=Math.max(d,x),u+=x*T,{name:y.name,type:y.type,components:T,offset:S}}),size:Kf(u,Math.max(d,o)),alignment:o}}function Kf(r,o){return Math.ceil(r/o)*o}ur.serialize=function(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},ur.deserialize=function(r){var o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o},ur.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ur.prototype.clear=function(){this.length=0},ur.prototype.resize=function(r){this.reserve(r),this.length=r},ur.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}},ur.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var re=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d){var y=this.length;return this.resize(y+1),this.emplace(y,u,d)},o.prototype.emplace=function(u,d,y){var x=2*u;return this.int16[x+0]=d,this.int16[x+1]=y,u},o}(ur);re.prototype.bytesPerElement=4,At("StructArrayLayout2i4",re);var Jo=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,u,d,y,x)},o.prototype.emplace=function(u,d,y,x,S){var T=4*u;return this.int16[T+0]=d,this.int16[T+1]=y,this.int16[T+2]=x,this.int16[T+3]=S,u},o}(ur);Jo.prototype.bytesPerElement=8,At("StructArrayLayout4i8",Jo);var lo=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T){var M=this.length;return this.resize(M+1),this.emplace(M,u,d,y,x,S,T)},o.prototype.emplace=function(u,d,y,x,S,T,M){var z=6*u;return this.int16[z+0]=d,this.int16[z+1]=y,this.int16[z+2]=x,this.int16[z+3]=S,this.int16[z+4]=T,this.int16[z+5]=M,u},o}(ur);lo.prototype.bytesPerElement=12,At("StructArrayLayout2i4i12",lo);var jo=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T){var M=this.length;return this.resize(M+1),this.emplace(M,u,d,y,x,S,T)},o.prototype.emplace=function(u,d,y,x,S,T,M){var z=4*u,$=8*u;return this.int16[z+0]=d,this.int16[z+1]=y,this.uint8[$+4]=x,this.uint8[$+5]=S,this.uint8[$+6]=T,this.uint8[$+7]=M,u},o}(ur);jo.prototype.bytesPerElement=8,At("StructArrayLayout2i4ub8",jo);var Dn=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d){var y=this.length;return this.resize(y+1),this.emplace(y,u,d)},o.prototype.emplace=function(u,d,y){var x=2*u;return this.float32[x+0]=d,this.float32[x+1]=y,u},o}(ur);Dn.prototype.bytesPerElement=8,At("StructArrayLayout2f8",Dn);var $s=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T,M,z,$,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,u,d,y,x,S,T,M,z,$,j)},o.prototype.emplace=function(u,d,y,x,S,T,M,z,$,j,Q){var ee=10*u;return this.uint16[ee+0]=d,this.uint16[ee+1]=y,this.uint16[ee+2]=x,this.uint16[ee+3]=S,this.uint16[ee+4]=T,this.uint16[ee+5]=M,this.uint16[ee+6]=z,this.uint16[ee+7]=$,this.uint16[ee+8]=j,this.uint16[ee+9]=Q,u},o}(ur);$s.prototype.bytesPerElement=20,At("StructArrayLayout10ui20",$s);var Bu=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T,M,z,$,j,Q,ee){var pe=this.length;return this.resize(pe+1),this.emplace(pe,u,d,y,x,S,T,M,z,$,j,Q,ee)},o.prototype.emplace=function(u,d,y,x,S,T,M,z,$,j,Q,ee,pe){var he=12*u;return this.int16[he+0]=d,this.int16[he+1]=y,this.int16[he+2]=x,this.int16[he+3]=S,this.uint16[he+4]=T,this.uint16[he+5]=M,this.uint16[he+6]=z,this.uint16[he+7]=$,this.int16[he+8]=j,this.int16[he+9]=Q,this.int16[he+10]=ee,this.int16[he+11]=pe,u},o}(ur);Bu.prototype.bytesPerElement=24,At("StructArrayLayout4i4ui4i24",Bu);var Pc=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y){var x=this.length;return this.resize(x+1),this.emplace(x,u,d,y)},o.prototype.emplace=function(u,d,y,x){var S=3*u;return this.float32[S+0]=d,this.float32[S+1]=y,this.float32[S+2]=x,u},o}(ur);Pc.prototype.bytesPerElement=12,At("StructArrayLayout3f12",Pc);var Us=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u){var d=this.length;return this.resize(d+1),this.emplace(d,u)},o.prototype.emplace=function(u,d){return this.uint32[1*u+0]=d,u},o}(ur);Us.prototype.bytesPerElement=4,At("StructArrayLayout1ul4",Us);var Tc=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T,M,z,$){var j=this.length;return this.resize(j+1),this.emplace(j,u,d,y,x,S,T,M,z,$)},o.prototype.emplace=function(u,d,y,x,S,T,M,z,$,j){var Q=10*u,ee=5*u;return this.int16[Q+0]=d,this.int16[Q+1]=y,this.int16[Q+2]=x,this.int16[Q+3]=S,this.int16[Q+4]=T,this.int16[Q+5]=M,this.uint32[ee+3]=z,this.uint16[Q+8]=$,this.uint16[Q+9]=j,u},o}(ur);Tc.prototype.bytesPerElement=20,At("StructArrayLayout6i1ul2ui20",Tc);var ml=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T){var M=this.length;return this.resize(M+1),this.emplace(M,u,d,y,x,S,T)},o.prototype.emplace=function(u,d,y,x,S,T,M){var z=6*u;return this.int16[z+0]=d,this.int16[z+1]=y,this.int16[z+2]=x,this.int16[z+3]=S,this.int16[z+4]=T,this.int16[z+5]=M,u},o}(ur);ml.prototype.bytesPerElement=12,At("StructArrayLayout2i2i2i12",ml);var gh=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S){var T=this.length;return this.resize(T+1),this.emplace(T,u,d,y,x,S)},o.prototype.emplace=function(u,d,y,x,S,T){var M=4*u,z=8*u;return this.float32[M+0]=d,this.float32[M+1]=y,this.float32[M+2]=x,this.int16[z+6]=S,this.int16[z+7]=T,u},o}(ur);gh.prototype.bytesPerElement=16,At("StructArrayLayout2f1f2i16",gh);var yh=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,u,d,y,x)},o.prototype.emplace=function(u,d,y,x,S){var T=12*u,M=3*u;return this.uint8[T+0]=d,this.uint8[T+1]=y,this.float32[M+1]=x,this.float32[M+2]=S,u},o}(ur);yh.prototype.bytesPerElement=12,At("StructArrayLayout2ub2f12",yh);var da=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y){var x=this.length;return this.resize(x+1),this.emplace(x,u,d,y)},o.prototype.emplace=function(u,d,y,x){var S=3*u;return this.uint16[S+0]=d,this.uint16[S+1]=y,this.uint16[S+2]=x,u},o}(ur);da.prototype.bytesPerElement=6,At("StructArrayLayout3ui6",da);var Oa=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he,Pe,we,De){var Be=this.length;return this.resize(Be+1),this.emplace(Be,u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he,Pe,we,De)},o.prototype.emplace=function(u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he,Pe,we,De,Be){var Ve=24*u,qe=12*u,et=48*u;return this.int16[Ve+0]=d,this.int16[Ve+1]=y,this.uint16[Ve+2]=x,this.uint16[Ve+3]=S,this.uint32[qe+2]=T,this.uint32[qe+3]=M,this.uint32[qe+4]=z,this.uint16[Ve+10]=$,this.uint16[Ve+11]=j,this.uint16[Ve+12]=Q,this.float32[qe+7]=ee,this.float32[qe+8]=pe,this.uint8[et+36]=he,this.uint8[et+37]=Pe,this.uint8[et+38]=we,this.uint32[qe+10]=De,this.int16[Ve+22]=Be,u},o}(ur);Oa.prototype.bytesPerElement=48,At("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oa);var eu=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he,Pe,we,De,Be,Ve,qe,et,dt,_t,Nt,wt,Gt,Et,vn){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he,Pe,we,De,Be,Ve,qe,et,dt,_t,Nt,wt,Gt,Et,vn)},o.prototype.emplace=function(u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he,Pe,we,De,Be,Ve,qe,et,dt,_t,Nt,wt,Gt,Et,vn,Jt){var $t=34*u,En=17*u;return this.int16[$t+0]=d,this.int16[$t+1]=y,this.int16[$t+2]=x,this.int16[$t+3]=S,this.int16[$t+4]=T,this.int16[$t+5]=M,this.int16[$t+6]=z,this.int16[$t+7]=$,this.uint16[$t+8]=j,this.uint16[$t+9]=Q,this.uint16[$t+10]=ee,this.uint16[$t+11]=pe,this.uint16[$t+12]=he,this.uint16[$t+13]=Pe,this.uint16[$t+14]=we,this.uint16[$t+15]=De,this.uint16[$t+16]=Be,this.uint16[$t+17]=Ve,this.uint16[$t+18]=qe,this.uint16[$t+19]=et,this.uint16[$t+20]=dt,this.uint16[$t+21]=_t,this.uint16[$t+22]=Nt,this.uint32[En+12]=wt,this.float32[En+13]=Gt,this.float32[En+14]=Et,this.float32[En+15]=vn,this.float32[En+16]=Jt,u},o}(ur);eu.prototype.bytesPerElement=68,At("StructArrayLayout8i15ui1ul4f68",eu);var ma=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u){var d=this.length;return this.resize(d+1),this.emplace(d,u)},o.prototype.emplace=function(u,d){return this.float32[1*u+0]=d,u},o}(ur);ma.prototype.bytesPerElement=4,At("StructArrayLayout1f4",ma);var vh=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y){var x=this.length;return this.resize(x+1),this.emplace(x,u,d,y)},o.prototype.emplace=function(u,d,y,x){var S=3*u;return this.int16[S+0]=d,this.int16[S+1]=y,this.int16[S+2]=x,u},o}(ur);vh.prototype.bytesPerElement=6,At("StructArrayLayout3i6",vh);var _h=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y){var x=this.length;return this.resize(x+1),this.emplace(x,u,d,y)},o.prototype.emplace=function(u,d,y,x){var S=4*u;return this.uint32[2*u+0]=d,this.uint16[S+2]=y,this.uint16[S+3]=x,u},o}(ur);_h.prototype.bytesPerElement=8,At("StructArrayLayout1ul2ui8",_h);var Ic=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d){var y=this.length;return this.resize(y+1),this.emplace(y,u,d)},o.prototype.emplace=function(u,d,y){var x=2*u;return this.uint16[x+0]=d,this.uint16[x+1]=y,u},o}(ur);Ic.prototype.bytesPerElement=4,At("StructArrayLayout2ui4",Ic);var La=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u){var d=this.length;return this.resize(d+1),this.emplace(d,u)},o.prototype.emplace=function(u,d){return this.uint16[1*u+0]=d,u},o}(ur);La.prototype.bytesPerElement=2,At("StructArrayLayout1ui2",La);var c=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(u,d,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,u,d,y,x)},o.prototype.emplace=function(u,d,y,x,S){var T=4*u;return this.float32[T+0]=d,this.float32[T+1]=y,this.float32[T+2]=x,this.float32[T+3]=S,u},o}(ur);c.prototype.bytesPerElement=16,At("StructArrayLayout4f16",c);var p=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return u.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},u.x1.get=function(){return this._structArray.int16[this._pos2+2]},u.y1.get=function(){return this._structArray.int16[this._pos2+3]},u.x2.get=function(){return this._structArray.int16[this._pos2+4]},u.y2.get=function(){return this._structArray.int16[this._pos2+5]},u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.anchorPoint.get=function(){return new C(this.anchorPointX,this.anchorPointY)},Object.defineProperties(o.prototype,u),o}(Ns);p.prototype.size=20;var f=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new p(this,u)},o}(Tc);At("CollisionBoxArray",f);var m=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},u.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},u.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},u.segment.get=function(){return this._structArray.uint16[this._pos2+10]},u.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},u.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},u.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},u.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},u.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},u.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},u.placedOrientation.set=function(d){this._structArray.uint8[this._pos1+37]=d},u.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},u.hidden.set=function(d){this._structArray.uint8[this._pos1+38]=d},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},u.crossTileID.set=function(d){this._structArray.uint32[this._pos4+10]=d},u.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(o.prototype,u),o}(Ns);m.prototype.size=48;var b=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new m(this,u)},o}(Oa);At("PlacedSymbolArray",b);var E=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},u.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},u.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},u.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},u.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},u.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},u.key.get=function(){return this._structArray.uint16[this._pos2+8]},u.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},u.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},u.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},u.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},u.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},u.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},u.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},u.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},u.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},u.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},u.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},u.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},u.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},u.crossTileID.set=function(d){this._structArray.uint32[this._pos4+12]=d},u.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},u.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},u.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},u.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(o.prototype,u),o}(Ns);E.prototype.size=68;var P=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new E(this,u)},o}(eu);At("SymbolInstanceArray",P);var L=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getoffsetX=function(u){return this.float32[1*u+0]},o}(ma);At("GlyphOffsetArray",L);var N=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getx=function(u){return this.int16[3*u+0]},o.prototype.gety=function(u){return this.int16[3*u+1]},o.prototype.gettileUnitDistanceFromAnchor=function(u){return this.int16[3*u+2]},o}(vh);At("SymbolLineVertexArray",N);var G=function(r){function o(){r.apply(this,arguments)}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var u={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(o.prototype,u),o}(Ns);G.prototype.size=8;var te=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.get=function(u){return new G(this,u)},o}(_h);At("FeatureIndexArray",te);var ie=ti([{name:"a_pos",components:2,type:"Int16"}],4).members,ne=function(r){r===void 0&&(r=[]),this.segments=r};function ye(r,o){return 256*(r=H(Math.floor(r),0,255))+H(Math.floor(o),0,255)}ne.prototype.prepareSegment=function(r,o,u,d){var y=this.segments[this.segments.length-1];return r>ne.MAX_VERTEX_ARRAY_LENGTH&&Ye("Max vertices per segment is "+ne.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!y||y.vertexLength+r>ne.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==d)&&(y={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},d!==void 0&&(y.sortKey=d),this.segments.push(y)),y},ne.prototype.get=function(){return this.segments},ne.prototype.destroy=function(){for(var r=0,o=this.segments;r<o.length;r+=1){var u=o[r];for(var d in u.vaos)u.vaos[d].destroy()}},ne.simpleSegment=function(r,o,u,d){return new ne([{vertexOffset:r,primitiveOffset:o,vertexLength:u,primitiveLength:d,vaos:{},sortKey:0}])},ne.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,At("SegmentVector",ne);var me=ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ce=g(function(r){r.exports=function(o,u){var d,y,x,S,T,M,z,$;for(y=o.length-(d=3&o.length),x=u,T=3432918353,M=461845907,$=0;$<y;)z=255&o.charCodeAt($)|(255&o.charCodeAt(++$))<<8|(255&o.charCodeAt(++$))<<16|(255&o.charCodeAt(++$))<<24,++$,x=27492+(65535&(S=5*(65535&(x=(x^=z=(65535&(z=(z=(65535&z)*T+(((z>>>16)*T&65535)<<16)&4294967295)<<15|z>>>17))*M+(((z>>>16)*M&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(z=0,d){case 3:z^=(255&o.charCodeAt($+2))<<16;case 2:z^=(255&o.charCodeAt($+1))<<8;case 1:x^=z=(65535&(z=(z=(65535&(z^=255&o.charCodeAt($)))*T+(((z>>>16)*T&65535)<<16)&4294967295)<<15|z>>>17))*M+(((z>>>16)*M&65535)<<16)&4294967295}return x^=o.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}}),de=g(function(r){r.exports=function(o,u){for(var d,y=o.length,x=u^y,S=0;y>=4;)d=1540483477*(65535&(d=255&o.charCodeAt(S)|(255&o.charCodeAt(++S))<<8|(255&o.charCodeAt(++S))<<16|(255&o.charCodeAt(++S))<<24))+((1540483477*(d>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),y-=4,++S;switch(y){case 3:x^=(255&o.charCodeAt(S+2))<<16;case 2:x^=(255&o.charCodeAt(S+1))<<8;case 1:x=1540483477*(65535&(x^=255&o.charCodeAt(S)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}}),Se=Ce,Ie=de;Se.murmur3=Ce,Se.murmur2=Ie;var Fe=function(){this.ids=[],this.positions=[],this.indexed=!1};Fe.prototype.add=function(r,o,u,d){this.ids.push(He(r)),this.positions.push(o,u,d)},Fe.prototype.getPositions=function(r){for(var o=He(r),u=0,d=this.ids.length-1;u<d;){var y=u+d>>1;this.ids[y]>=o?d=y:u=y+1}for(var x=[];this.ids[u]===o;)x.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return x},Fe.serialize=function(r,o){var u=new Float64Array(r.ids),d=new Uint32Array(r.positions);return function y(x,S,T,M){for(;T<M;){for(var z=x[T+M>>1],$=T-1,j=M+1;;){do $++;while(x[$]<z);do j--;while(x[j]>z);if($>=j)break;Ke(x,$,j),Ke(S,3*$,3*j),Ke(S,3*$+1,3*j+1),Ke(S,3*$+2,3*j+2)}j-T<M-j?(y(x,S,T,j),T=j+1):(y(x,S,j+1,M),M=j)}}(u,d,0,u.length-1),o&&o.push(u.buffer,d.buffer),{ids:u,positions:d}},Fe.deserialize=function(r){var o=new Fe;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o};var We=Math.pow(2,53)-1;function He(r){var o=+r;return!isNaN(o)&&o<=We?o:Se(String(r))}function Ke(r,o,u){var d=r[o];r[o]=r[u],r[u]=d}At("FeaturePositionMap",Fe);var tt=function(r,o){this.gl=r.gl,this.location=o},pt=function(r){function o(u,d){r.call(this,u,d),this.current=0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))},o}(tt),ct=function(r){function o(u,d){r.call(this,u,d),this.current=0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))},o}(tt),bt=function(r){function o(u,d){r.call(this,u,d),this.current=[0,0]}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))},o}(tt),Bt=function(r){function o(u,d){r.call(this,u,d),this.current=[0,0,0]}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))},o}(tt),Xt=function(r){function o(u,d){r.call(this,u,d),this.current=[0,0,0,0]}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))},o}(tt),Wt=function(r){function o(u,d){r.call(this,u,d),this.current=Fn.transparent}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))},o}(tt),Nn=new Float32Array(16),Pt=function(r){function o(u,d){r.call(this,u,d),this.current=Nn}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(var d=1;d<16;d++)if(u[d]!==this.current[d]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}},o}(tt);function en(r){return[ye(255*r.r,255*r.g),ye(255*r.b,255*r.a)]}var wn=function(r,o,u){this.value=r,this.uniformNames=o.map(function(d){return"u_"+d}),this.type=u};wn.prototype.setUniform=function(r,o,u){r.set(u.constantOr(this.value))},wn.prototype.getBinding=function(r,o,u){return this.type==="color"?new Wt(r,o):new ct(r,o)};var fn=function(r,o){this.uniformNames=o.map(function(u){return"u_"+u}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};fn.prototype.setConstantPatternPositions=function(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr},fn.prototype.setUniform=function(r,o,u,d){var y=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)},fn.prototype.getBinding=function(r,o,u){return u.substr(0,9)==="u_pattern"?new Xt(r,o):new ct(r,o)};var on=function(r,o,u,d){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(function(y){return{name:"a_"+y,type:"Float32",components:u==="color"?2:1,offset:0}}),this.paintVertexArray=new d};on.prototype.populatePaintArray=function(r,o,u,d,y){var x=this.paintVertexArray.length,S=this.expression.evaluate(new xn(0),o,{},d,[],y);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)},on.prototype.updatePaintArray=function(r,o,u,d){var y=this.expression.evaluate({zoom:0},u,d);this._setPaintValue(r,o,y)},on.prototype._setPaintValue=function(r,o,u){if(this.type==="color")for(var d=en(u),y=r;y<o;y++)this.paintVertexArray.emplace(y,d[0],d[1]);else{for(var x=r;x<o;x++)this.paintVertexArray.emplace(x,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}},on.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},on.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ln=function(r,o,u,d,y,x){this.expression=r,this.uniformNames=o.map(function(S){return"u_"+S+"_t"}),this.type=u,this.useIntegerZoom=d,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=o.map(function(S){return{name:"a_"+S,type:"Float32",components:u==="color"?4:2,offset:0}}),this.paintVertexArray=new x};ln.prototype.populatePaintArray=function(r,o,u,d,y){var x=this.expression.evaluate(new xn(this.zoom),o,{},d,[],y),S=this.expression.evaluate(new xn(this.zoom+1),o,{},d,[],y),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,x,S)},ln.prototype.updatePaintArray=function(r,o,u,d){var y=this.expression.evaluate({zoom:this.zoom},u,d),x=this.expression.evaluate({zoom:this.zoom+1},u,d);this._setPaintValue(r,o,y,x)},ln.prototype._setPaintValue=function(r,o,u,d){if(this.type==="color")for(var y=en(u),x=en(d),S=r;S<o;S++)this.paintVertexArray.emplace(S,y[0],y[1],x[0],x[1]);else{for(var T=r;T<o;T++)this.paintVertexArray.emplace(T,u,d);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(d))}},ln.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ln.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ln.prototype.setUniform=function(r,o){var u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,d=H(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);r.set(d)},ln.prototype.getBinding=function(r,o,u){return new ct(r,o)};var rn=function(r,o,u,d,y,x){this.expression=r,this.type=o,this.useIntegerZoom=u,this.zoom=d,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y};rn.prototype.populatePaintArray=function(r,o,u){var d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(d,r,o.patterns&&o.patterns[this.layerId],u)},rn.prototype.updatePaintArray=function(r,o,u,d,y){this._setPaintValues(r,o,u.patterns&&u.patterns[this.layerId],y)},rn.prototype._setPaintValues=function(r,o,u,d){if(d&&u){var y=d[u.min],x=d[u.mid],S=d[u.max];if(y&&x&&S)for(var T=r;T<o;T++)this.zoomInPaintVertexArray.emplace(T,x.tl[0],x.tl[1],x.br[0],x.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],x.pixelRatio,y.pixelRatio),this.zoomOutPaintVertexArray.emplace(T,x.tl[0],x.tl[1],x.br[0],x.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],x.pixelRatio,S.pixelRatio)}},rn.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,me.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,me.members,this.expression.isStateDependent))},rn.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ft=function(r,o,u){this.binders={},this._buffers=[];var d=[];for(var y in r.paint._values)if(u(y)){var x=r.paint.get(y);if(x instanceof Uo&&Ql(x.property.specification)){var S=Zr(y,r.type),T=x.value,M=x.property.specification.type,z=x.property.useIntegerZoom,$=x.property.specification["property-type"],j=$==="cross-faded"||$==="cross-faded-data-driven";if(T.kind==="constant")this.binders[y]=j?new fn(T.value,S):new wn(T.value,S,M),d.push("/u_"+y);else if(T.kind==="source"||j){var Q=jr(y,M,"source");this.binders[y]=j?new rn(T,M,z,o,Q,r.id):new on(T,S,M,Q),d.push("/a_"+y)}else{var ee=jr(y,M,"composite");this.binders[y]=new ln(T,S,M,z,o,ee),d.push("/z_"+y)}}}this.cacheKey=d.sort().join("")};Ft.prototype.getMaxValue=function(r){var o=this.binders[r];return o instanceof on||o instanceof ln?o.maxValue:0},Ft.prototype.populatePaintArrays=function(r,o,u,d,y){for(var x in this.binders){var S=this.binders[x];(S instanceof on||S instanceof ln||S instanceof rn)&&S.populatePaintArray(r,o,u,d,y)}},Ft.prototype.setConstantPatternPositions=function(r,o){for(var u in this.binders){var d=this.binders[u];d instanceof fn&&d.setConstantPatternPositions(r,o)}},Ft.prototype.updatePaintArrays=function(r,o,u,d,y){var x=!1;for(var S in r)for(var T=0,M=o.getPositions(S);T<M.length;T+=1){var z=M[T],$=u.feature(z.index);for(var j in this.binders){var Q=this.binders[j];if((Q instanceof on||Q instanceof ln||Q instanceof rn)&&Q.expression.isStateDependent===!0){var ee=d.paint.get(j);Q.expression=ee.value,Q.updatePaintArray(z.start,z.end,$,r[S],y),x=!0}}}return x},Ft.prototype.defines=function(){var r=[];for(var o in this.binders){var u=this.binders[o];(u instanceof wn||u instanceof fn)&&r.push.apply(r,u.uniformNames.map(function(d){return"#define HAS_UNIFORM_"+d}))}return r},Ft.prototype.getBinderAttributes=function(){var r=[];for(var o in this.binders){var u=this.binders[o];if(u instanceof on||u instanceof ln)for(var d=0;d<u.paintVertexAttributes.length;d++)r.push(u.paintVertexAttributes[d].name);else if(u instanceof rn)for(var y=0;y<me.members.length;y++)r.push(me.members[y].name)}return r},Ft.prototype.getBinderUniforms=function(){var r=[];for(var o in this.binders){var u=this.binders[o];if(u instanceof wn||u instanceof fn||u instanceof ln)for(var d=0,y=u.uniformNames;d<y.length;d+=1)r.push(y[d])}return r},Ft.prototype.getPaintVertexBuffers=function(){return this._buffers},Ft.prototype.getUniforms=function(r,o){var u=[];for(var d in this.binders){var y=this.binders[d];if(y instanceof wn||y instanceof fn||y instanceof ln)for(var x=0,S=y.uniformNames;x<S.length;x+=1){var T=S[x];if(o[T]){var M=y.getBinding(r,o[T],T);u.push({name:T,property:d,binding:M})}}}return u},Ft.prototype.setUniforms=function(r,o,u,d){for(var y=0,x=o;y<x.length;y+=1){var S=x[y],T=S.name,M=S.property;this.binders[M].setUniform(S.binding,d,u.get(M),T)}},Ft.prototype.updatePaintBuffers=function(r){for(var o in this._buffers=[],this.binders){var u=this.binders[o];if(r&&u instanceof rn){var d=r.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(u instanceof on||u instanceof ln)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}},Ft.prototype.upload=function(r){for(var o in this.binders){var u=this.binders[o];(u instanceof on||u instanceof ln||u instanceof rn)&&u.upload(r)}this.updatePaintBuffers()},Ft.prototype.destroy=function(){for(var r in this.binders){var o=this.binders[r];(o instanceof on||o instanceof ln||o instanceof rn)&&o.destroy()}};var nr=function(r,o,u){u===void 0&&(u=function(){return!0}),this.programConfigurations={};for(var d=0,y=r;d<y.length;d+=1){var x=y[d];this.programConfigurations[x.id]=new Ft(x,o,u)}this.needsUpload=!1,this._featureMap=new Fe,this._bufferOffset=0};function Zr(r,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(o+"-","").replace(/-/g,"_")]}function jr(r,o,u){var d={color:{source:Dn,composite:c},number:{source:ma,composite:Dn}},y=function(x){return{"line-pattern":{source:$s,composite:$s},"fill-pattern":{source:$s,composite:$s},"fill-extrusion-pattern":{source:$s,composite:$s}}[x]}(r);return y&&y[u]||d[o][u]}nr.prototype.populatePaintArrays=function(r,o,u,d,y,x){for(var S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,o,d,y,x);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},nr.prototype.updatePaintArrays=function(r,o,u,d){for(var y=0,x=u;y<x.length;y+=1){var S=x[y];this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(r,this._featureMap,o,S,d)||this.needsUpload}},nr.prototype.get=function(r){return this.programConfigurations[r]},nr.prototype.upload=function(r){if(this.needsUpload){for(var o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}},nr.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},At("ConstantBinder",wn),At("CrossFadedConstantBinder",fn),At("SourceExpressionBinder",on),At("CrossFadedCompositeBinder",rn),At("CompositeExpressionBinder",ln),At("ProgramConfiguration",Ft,{omit:["_buffers"]}),At("ProgramConfigurationSet",nr);var pi=Math.pow(2,14)-1,ni=-pi-1;function kr(r){for(var o=8192/r.extent,u=r.loadGeometry(),d=0;d<u.length;d++)for(var y=u[d],x=0;x<y.length;x++){var S=y[x],T=Math.round(S.x*o),M=Math.round(S.y*o);S.x=H(T,ni,pi),S.y=H(M,ni,pi),(T<S.x||T>S.x+1||M<S.y||M>S.y+1)&&Ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return u}function Qi(r,o){return{type:r.type,id:r.id,properties:r.properties,geometry:o?kr(r):[]}}function Xr(r,o,u,d,y){r.emplaceBack(2*o+(d+1)/2,2*u+(y+1)/2)}var Yi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(o){return o.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new re,this.indexArray=new da,this.segments=new ne,this.programConfigurations=new nr(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(o){return o.isStateDependent()}).map(function(o){return o.id})};function wo(r,o){for(var u=0;u<r.length;u++)if(ea(o,r[u]))return!0;for(var d=0;d<o.length;d++)if(ea(r,o[d]))return!0;return!!gl(r,o)}function ps(r,o,u){return!!ea(r,o)||!!yl(o,r,u)}function ga(r,o){if(r.length===1)return Nu(o,r[0]);for(var u=0;u<o.length;u++)for(var d=o[u],y=0;y<d.length;y++)if(ea(r,d[y]))return!0;for(var x=0;x<r.length;x++)if(Nu(o,r[x]))return!0;for(var S=0;S<o.length;S++)if(gl(r,o[S]))return!0;return!1}function Oc(r,o,u){if(r.length>1){if(gl(r,o))return!0;for(var d=0;d<o.length;d++)if(yl(o[d],r,u))return!0}for(var y=0;y<r.length;y++)if(yl(r[y],o,u))return!0;return!1}function gl(r,o){if(r.length===0||o.length===0)return!1;for(var u=0;u<r.length-1;u++)for(var d=r[u],y=r[u+1],x=0;x<o.length-1;x++)if(hs(d,y,o[x],o[x+1]))return!0;return!1}function hs(r,o,u,d){return ht(r,u,d)!==ht(o,u,d)&&ht(r,o,u)!==ht(r,o,d)}function yl(r,o,u){var d=u*u;if(o.length===1)return r.distSqr(o[0])<d;for(var y=1;y<o.length;y++)if(Lc(r,o[y-1],o[y])<d)return!0;return!1}function Lc(r,o,u){var d=o.distSqr(u);if(d===0)return r.distSqr(o);var y=((r.x-o.x)*(u.x-o.x)+(r.y-o.y)*(u.y-o.y))/d;return r.distSqr(y<0?o:y>1?u:u.sub(o)._mult(y)._add(o))}function Nu(r,o){for(var u,d,y,x=!1,S=0;S<r.length;S++)for(var T=0,M=(u=r[S]).length-1;T<u.length;M=T++)(d=u[T]).y>o.y!=(y=u[M]).y>o.y&&o.x<(y.x-d.x)*(o.y-d.y)/(y.y-d.y)+d.x&&(x=!x);return x}function ea(r,o){for(var u=!1,d=0,y=r.length-1;d<r.length;y=d++){var x=r[d],S=r[y];x.y>o.y!=S.y>o.y&&o.x<(S.x-x.x)*(o.y-x.y)/(S.y-x.y)+x.x&&(u=!u)}return u}function $u(r,o,u){var d=u[0],y=u[2];if(r.x<d.x&&o.x<d.x||r.x>y.x&&o.x>y.x||r.y<d.y&&o.y<d.y||r.y>y.y&&o.y>y.y)return!1;var x=ht(r,o,u[0]);return x!==ht(r,o,u[1])||x!==ht(r,o,u[2])||x!==ht(r,o,u[3])}function gi(r,o,u){var d=o.paint.get(r).value;return d.kind==="constant"?d.value:u.programConfigurations.get(o.id).getMaxValue(r)}function Ja(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Ma(r,o,u,d,y){if(!o[0]&&!o[1])return r;var x=C.convert(o)._mult(y);u==="viewport"&&x._rotate(-d);for(var S=[],T=0;T<r.length;T++)S.push(r[T].sub(x));return S}Yi.prototype.populate=function(r,o,u){var d=this.layers[0],y=[],x=null,S=!1;d.type==="circle"&&(S=!(x=d.layout.get("circle-sort-key")).isConstant());for(var T=0,M=r;T<M.length;T+=1){var z=M[T],$=z.feature,j=z.id,Q=z.index,ee=z.sourceLayerIndex,pe=this.layers[0]._featureFilter.needGeometry,he=Qi($,pe);if(this.layers[0]._featureFilter.filter(new xn(this.zoom),he,u)){var Pe=S?x.evaluate(he,{},u):void 0,we={id:j,properties:$.properties,type:$.type,sourceLayerIndex:ee,index:Q,geometry:pe?he.geometry:kr($),patterns:{},sortKey:Pe};y.push(we)}}S&&y.sort(function(Nt,wt){return Nt.sortKey-wt.sortKey});for(var De=0,Be=y;De<Be.length;De+=1){var Ve=Be[De],qe=Ve.geometry,et=Ve.index,dt=Ve.sourceLayerIndex,_t=r[et].feature;this.addFeature(Ve,qe,et,u),o.featureIndex.insert(_t,qe,et,dt,this.index)}},Yi.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},Yi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ie),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yi.prototype.addFeature=function(r,o,u,d){for(var y=0,x=o;y<x.length;y+=1)for(var S=0,T=x[y];S<T.length;S+=1){var M=T[S],z=M.x,$=M.y;if(!(z<0||z>=8192||$<0||$>=8192)){var j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),Q=j.vertexLength;Xr(this.layoutVertexArray,z,$,-1,-1),Xr(this.layoutVertexArray,z,$,1,-1),Xr(this.layoutVertexArray,z,$,1,1),Xr(this.layoutVertexArray,z,$,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+3,Q+2),j.vertexLength+=4,j.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},d)},At("CircleBucket",Yi,{omit:["layers"]});var tu=new Yo({"circle-sort-key":new Qt(le.layout_circle["circle-sort-key"])}),ri={paint:new Yo({"circle-radius":new Qt(le.paint_circle["circle-radius"]),"circle-color":new Qt(le.paint_circle["circle-color"]),"circle-blur":new Qt(le.paint_circle["circle-blur"]),"circle-opacity":new Qt(le.paint_circle["circle-opacity"]),"circle-translate":new St(le.paint_circle["circle-translate"]),"circle-translate-anchor":new St(le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new St(le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new St(le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qt(le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qt(le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qt(le.paint_circle["circle-stroke-opacity"])}),layout:tu},Qr=typeof Float32Array<"u"?Float32Array:Array;function uo(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function nu(r,o,u){var d=o[0],y=o[1],x=o[2],S=o[3],T=o[4],M=o[5],z=o[6],$=o[7],j=o[8],Q=o[9],ee=o[10],pe=o[11],he=o[12],Pe=o[13],we=o[14],De=o[15],Be=u[0],Ve=u[1],qe=u[2],et=u[3];return r[0]=Be*d+Ve*T+qe*j+et*he,r[1]=Be*y+Ve*M+qe*Q+et*Pe,r[2]=Be*x+Ve*z+qe*ee+et*we,r[3]=Be*S+Ve*$+qe*pe+et*De,r[4]=(Be=u[4])*d+(Ve=u[5])*T+(qe=u[6])*j+(et=u[7])*he,r[5]=Be*y+Ve*M+qe*Q+et*Pe,r[6]=Be*x+Ve*z+qe*ee+et*we,r[7]=Be*S+Ve*$+qe*pe+et*De,r[8]=(Be=u[8])*d+(Ve=u[9])*T+(qe=u[10])*j+(et=u[11])*he,r[9]=Be*y+Ve*M+qe*Q+et*Pe,r[10]=Be*x+Ve*z+qe*ee+et*we,r[11]=Be*S+Ve*$+qe*pe+et*De,r[12]=(Be=u[12])*d+(Ve=u[13])*T+(qe=u[14])*j+(et=u[15])*he,r[13]=Be*y+Ve*M+qe*Q+et*Pe,r[14]=Be*x+Ve*z+qe*ee+et*we,r[15]=Be*S+Ve*$+qe*pe+et*De,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,o=0,u=arguments.length;u--;)o+=r[u]*r[u];return Math.sqrt(o)});var Zf,xh=nu;function Mc(r,o,u){var d=o[0],y=o[1],x=o[2],S=o[3];return r[0]=u[0]*d+u[4]*y+u[8]*x+u[12]*S,r[1]=u[1]*d+u[5]*y+u[9]*x+u[13]*S,r[2]=u[2]*d+u[6]*y+u[10]*x+u[14]*S,r[3]=u[3]*d+u[7]*y+u[11]*x+u[15]*S,r}Zf=new Qr(3),Qr!=Float32Array&&(Zf[0]=0,Zf[1]=0,Zf[2]=0),function(){var r=new Qr(4);Qr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var Rc=(function(){var r=new Qr(2);Qr!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function o(u){r.call(this,u,ri)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.createBucket=function(u){return new Yi(u)},o.prototype.queryRadius=function(u){var d=u;return gi("circle-radius",this,d)+gi("circle-stroke-width",this,d)+Ja(this.paint.get("circle-translate"))},o.prototype.queryIntersectsFeature=function(u,d,y,x,S,T,M,z){for(var $=Ma(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,M),j=this.paint.get("circle-radius").evaluate(d,y)+this.paint.get("circle-stroke-width").evaluate(d,y),Q=this.paint.get("circle-pitch-alignment")==="map",ee=Q?$:function(dt,_t){return dt.map(function(Nt){return bh(Nt,_t)})}($,z),pe=Q?j*M:j,he=0,Pe=x;he<Pe.length;he+=1)for(var we=0,De=Pe[he];we<De.length;we+=1){var Be=De[we],Ve=Q?Be:bh(Be,z),qe=pe,et=Mc([],[Be.x,Be.y,0,1],z);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?qe*=et[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(qe*=T.cameraToCenterDistance/et[3]),ps(ee,Ve,qe))return!0}return!1},o}(Ia));function bh(r,o){var u=Mc([],[r.x,r.y,0,1],o);return new C(u[0]/u[3],u[1]/u[3])}var vl=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Yi);function Fc(r,o,u,d){var y=o.width,x=o.height;if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==y*x*u)throw new RangeError("mismatched image size")}else d=new Uint8Array(y*x*u);return r.width=y,r.height=x,r.data=d,r}function Ng(r,o,u){var d=o.width,y=o.height;if(d!==r.width||y!==r.height){var x=Fc({},{width:d,height:y},u);Vd(r,x,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,d),height:Math.min(r.height,y)},u),r.width=d,r.height=y,r.data=x.data}}function Vd(r,o,u,d,y,x){if(y.width===0||y.height===0)return o;if(y.width>r.width||y.height>r.height||u.x>r.width-y.width||u.y>r.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>o.width||y.height>o.height||d.x>o.width-y.width||d.y>o.height-y.height)throw new RangeError("out of range destination coordinates for image copy");for(var S=r.data,T=o.data,M=0;M<y.height;M++)for(var z=((u.y+M)*r.width+u.x)*x,$=((d.y+M)*o.width+d.x)*x,j=0;j<y.width*x;j++)T[$+j]=S[z+j];return o}At("HeatmapBucket",vl,{omit:["layers"]});var Dc=function(r,o){Fc(this,r,1,o)};Dc.prototype.resize=function(r){Ng(this,r,1)},Dc.prototype.clone=function(){return new Dc({width:this.width,height:this.height},new Uint8Array(this.data))},Dc.copy=function(r,o,u,d,y){Vd(r,o,u,d,y,1)};var Vo=function(r,o){Fc(this,r,4,o)};Vo.prototype.resize=function(r){Ng(this,r,4)},Vo.prototype.replace=function(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Vo.prototype.clone=function(){return new Vo({width:this.width,height:this.height},new Uint8Array(this.data))},Vo.copy=function(r,o,u,d,y){Vd(r,o,u,d,y,4)},At("AlphaImage",Dc),At("RGBAImage",Vo);var kw={paint:new Yo({"heatmap-radius":new Qt(le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qt(le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new St(le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bs(le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new St(le.paint_heatmap["heatmap-opacity"])})};function qd(r){var o={},u=r.resolution||256,d=r.clips?r.clips.length:1,y=r.image||new Vo({width:u,height:d}),x=function(pe,he,Pe){o[r.evaluationKey]=Pe;var we=r.expression.evaluate(o);y.data[pe+he+0]=Math.floor(255*we.r/we.a),y.data[pe+he+1]=Math.floor(255*we.g/we.a),y.data[pe+he+2]=Math.floor(255*we.b/we.a),y.data[pe+he+3]=Math.floor(255*we.a)};if(r.clips)for(var S=0,T=0;S<d;++S,T+=4*u)for(var M=0,z=0;M<u;M++,z+=4){var $=M/(u-1),j=r.clips[S];x(T,z,j.start*(1-$)+j.end*$)}else for(var Q=0,ee=0;Q<u;Q++,ee+=4)x(0,ee,Q/(u-1));return y}var x_=function(r){function o(u){r.call(this,u,kw),this._updateColorRamp()}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.createBucket=function(u){return new vl(u)},o.prototype._handleSpecialPaintPropertyUpdate=function(u){u==="heatmap-color"&&this._updateColorRamp()},o.prototype._updateColorRamp=function(){this.colorRamp=qd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},o.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},o}(Ia),$g={paint:new Yo({"hillshade-illumination-direction":new St(le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new St(le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new St(le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new St(le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new St(le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new St(le.paint_hillshade["hillshade-accent-color"])})},Aw=function(r){function o(u){r.call(this,u,$g)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},o}(Ia),Ug=ti([{name:"a_pos",components:2,type:"Int16"}],4).members,Hn=Hd,Pw=Hd;function Hd(r,o,u){u=u||2;var d,y,x,S,T,M,z,$=o&&o.length,j=$?o[0]*u:r.length,Q=Xf(r,0,j,u,!0),ee=[];if(!Q||Q.next===Q.prev)return ee;if($&&(Q=function(he,Pe,we,De){var Be,Ve,qe,et=[];for(Be=0,Ve=Pe.length;Be<Ve;Be++)(qe=Xf(he,Pe[Be]*De,Be<Ve-1?Pe[Be+1]*De:he.length,De,!1))===qe.next&&(qe.steiner=!0),et.push(Uu(qe));for(et.sort(jg),Be=0;Be<et.length;Be++)b_(et[Be],we),we=ru(we,we.next);return we}(r,o,Q,u)),r.length>80*u){d=x=r[0],y=S=r[1];for(var pe=u;pe<j;pe+=u)(T=r[pe])<d&&(d=T),(M=r[pe+1])<y&&(y=M),T>x&&(x=T),M>S&&(S=M);z=(z=Math.max(x-d,S-y))!==0?1/z:0}return wh(Q,ee,u,d,y,z),ee}function Xf(r,o,u,d,y){var x,S;if(y===Zd(r,o,u,d)>0)for(x=o;x<u;x+=d)S=C_(x,r[x],r[x+1],S);else for(x=u-d;x>=o;x-=d)S=C_(x,r[x],r[x+1],S);return S&&Sh(S,S.next)&&(ms(S),S=S.next),S}function ru(r,o){if(!r)return r;o||(o=r);var u,d=r;do if(u=!1,d.steiner||!Sh(d,d.next)&&Yr(d.prev,d,d.next)!==0)d=d.next;else{if(ms(d),(d=o=d.prev)===d.next)break;u=!0}while(u||d!==o);return o}function wh(r,o,u,d,y,x,S){if(r){!S&&x&&function($,j,Q,ee){var pe=$;do pe.z===null&&(pe.z=ya(pe.x,pe.y,j,Q,ee)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==$);pe.prevZ.nextZ=null,pe.prevZ=null,function(he){var Pe,we,De,Be,Ve,qe,et,dt,_t=1;do{for(we=he,he=null,Ve=null,qe=0;we;){for(qe++,De=we,et=0,Pe=0;Pe<_t&&(et++,De=De.nextZ);Pe++);for(dt=_t;et>0||dt>0&&De;)et!==0&&(dt===0||!De||we.z<=De.z)?(Be=we,we=we.nextZ,et--):(Be=De,De=De.nextZ,dt--),Ve?Ve.nextZ=Be:he=Be,Be.prevZ=Ve,Ve=Be;we=De}Ve.nextZ=null,_t*=2}while(qe>1)}(pe)}(r,d,y,x);for(var T,M,z=r;r.prev!==r.next;)if(T=r.prev,M=r.next,x?ds(r,d,y,x):Tw(r))o.push(T.i/u),o.push(r.i/u),o.push(M.i/u),ms(r),r=M.next,z=M.next;else if((r=M)===z){S?S===1?wh(r=Iw(ru(r),o,u),o,u,d,y,x,2):S===2&&Gd(r,o,u,d,y,x):wh(ru(r),o,u,d,y,x,1);break}}}function Tw(r){var o=r.prev,u=r,d=r.next;if(Yr(o,u,d)>=0)return!1;for(var y=r.next.next;y!==r.prev;){if(ju(o.x,o.y,u.x,u.y,d.x,d.y,y.x,y.y)&&Yr(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function ds(r,o,u,d){var y=r.prev,x=r,S=r.next;if(Yr(y,x,S)>=0)return!1;for(var T=y.x>x.x?y.x>S.x?y.x:S.x:x.x>S.x?x.x:S.x,M=y.y>x.y?y.y>S.y?y.y:S.y:x.y>S.y?x.y:S.y,z=ya(y.x<x.x?y.x<S.x?y.x:S.x:x.x<S.x?x.x:S.x,y.y<x.y?y.y<S.y?y.y:S.y:x.y<S.y?x.y:S.y,o,u,d),$=ya(T,M,o,u,d),j=r.prevZ,Q=r.nextZ;j&&j.z>=z&&Q&&Q.z<=$;){if(j!==r.prev&&j!==r.next&&ju(y.x,y.y,x.x,x.y,S.x,S.y,j.x,j.y)&&Yr(j.prev,j,j.next)>=0||(j=j.prevZ,Q!==r.prev&&Q!==r.next&&ju(y.x,y.y,x.x,x.y,S.x,S.y,Q.x,Q.y)&&Yr(Q.prev,Q,Q.next)>=0))return!1;Q=Q.nextZ}for(;j&&j.z>=z;){if(j!==r.prev&&j!==r.next&&ju(y.x,y.y,x.x,x.y,S.x,S.y,j.x,j.y)&&Yr(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;Q&&Q.z<=$;){if(Q!==r.prev&&Q!==r.next&&ju(y.x,y.y,x.x,x.y,S.x,S.y,Q.x,Q.y)&&Yr(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}return!0}function Iw(r,o,u){var d=r;do{var y=d.prev,x=d.next.next;!Sh(y,x)&&Wd(y,d,d.next,x)&&zc(y,x)&&zc(x,y)&&(o.push(y.i/u),o.push(d.i/u),o.push(x.i/u),ms(d),ms(d.next),d=r=x),d=d.next}while(d!==r);return ru(d)}function Gd(r,o,u,d,y,x){var S=r;do{for(var T=S.next.next;T!==S.prev;){if(S.i!==T.i&&S_(S,T)){var M=iu(S,T);return S=ru(S,S.next),M=ru(M,M.next),wh(S,o,u,d,y,x),void wh(M,o,u,d,y,x)}T=T.next}S=S.next}while(S!==r)}function jg(r,o){return r.x-o.x}function b_(r,o){if(o=function(d,y){var x,S=y,T=d.x,M=d.y,z=-1/0;do{if(M<=S.y&&M>=S.next.y&&S.next.y!==S.y){var $=S.x+(M-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if($<=T&&$>z){if(z=$,$===T){if(M===S.y)return S;if(M===S.next.y)return S.next}x=S.x<S.next.x?S:S.next}}S=S.next}while(S!==y);if(!x)return null;if(T===z)return x;var j,Q=x,ee=x.x,pe=x.y,he=1/0;S=x;do T>=S.x&&S.x>=ee&&T!==S.x&&ju(M<pe?T:z,M,ee,pe,M<pe?z:T,M,S.x,S.y)&&(j=Math.abs(M-S.y)/(T-S.x),zc(S,d)&&(j<he||j===he&&(S.x>x.x||S.x===x.x&&w_(x,S)))&&(x=S,he=j)),S=S.next;while(S!==Q);return x}(r,o)){var u=iu(o,r);ru(o,o.next),ru(u,u.next)}}function w_(r,o){return Yr(r.prev,r,o.prev)<0&&Yr(o.next,r,r.next)<0}function ya(r,o,u,d,y){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*y)|r<<8))|r<<4))|r<<2))|r<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-d)*y)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Uu(r){var o=r,u=r;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==r);return u}function ju(r,o,u,d,y,x,S,T){return(y-S)*(o-T)-(r-S)*(x-T)>=0&&(r-S)*(d-T)-(u-S)*(o-T)>=0&&(u-S)*(x-T)-(y-S)*(d-T)>=0}function S_(r,o){return r.next.i!==o.i&&r.prev.i!==o.i&&!function(u,d){var y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==d.i&&y.next.i!==d.i&&Wd(y,y.next,u,d))return!0;y=y.next}while(y!==u);return!1}(r,o)&&(zc(r,o)&&zc(o,r)&&function(u,d){var y=u,x=!1,S=(u.x+d.x)/2,T=(u.y+d.y)/2;do y.y>T!=y.next.y>T&&y.next.y!==y.y&&S<(y.next.x-y.x)*(T-y.y)/(y.next.y-y.y)+y.x&&(x=!x),y=y.next;while(y!==u);return x}(r,o)&&(Yr(r.prev,r,o.prev)||Yr(r,o.prev,o))||Sh(r,o)&&Yr(r.prev,r,r.next)>0&&Yr(o.prev,o,o.next)>0)}function Yr(r,o,u){return(o.y-r.y)*(u.x-o.x)-(o.x-r.x)*(u.y-o.y)}function Sh(r,o){return r.x===o.x&&r.y===o.y}function Wd(r,o,u,d){var y=Qf(Yr(r,o,u)),x=Qf(Yr(r,o,d)),S=Qf(Yr(u,d,r)),T=Qf(Yr(u,d,o));return y!==x&&S!==T||!(y!==0||!Ch(r,u,o))||!(x!==0||!Ch(r,d,o))||!(S!==0||!Ch(u,r,d))||!(T!==0||!Ch(u,o,d))}function Ch(r,o,u){return o.x<=Math.max(r.x,u.x)&&o.x>=Math.min(r.x,u.x)&&o.y<=Math.max(r.y,u.y)&&o.y>=Math.min(r.y,u.y)}function Qf(r){return r>0?1:r<0?-1:0}function zc(r,o){return Yr(r.prev,r,r.next)<0?Yr(r,o,r.next)>=0&&Yr(r,r.prev,o)>=0:Yr(r,o,r.prev)<0||Yr(r,r.next,o)<0}function iu(r,o){var u=new Kd(r.i,r.x,r.y),d=new Kd(o.i,o.x,o.y),y=r.next,x=o.prev;return r.next=o,o.prev=r,u.next=y,y.prev=u,d.next=u,u.prev=d,x.next=d,d.prev=x,d}function C_(r,o,u,d){var y=new Kd(r,o,u);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function ms(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Kd(r,o,u){this.i=r,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zd(r,o,u,d){for(var y=0,x=o,S=u-d;x<u;x+=d)y+=(r[S]-r[x])*(r[x+1]+r[S+1]),S=x;return y}function Vg(r,o,u,d,y){(function x(S,T,M,z,$){for(;z>M;){if(z-M>600){var j=z-M+1,Q=T-M+1,ee=Math.log(j),pe=.5*Math.exp(2*ee/3),he=.5*Math.sqrt(ee*pe*(j-pe)/j)*(Q-j/2<0?-1:1);x(S,T,Math.max(M,Math.floor(T-Q*pe/j+he)),Math.min(z,Math.floor(T+(j-Q)*pe/j+he)),$)}var Pe=S[T],we=M,De=z;for(Eh(S,M,T),$(S[z],Pe)>0&&Eh(S,M,z);we<De;){for(Eh(S,we,De),we++,De--;$(S[we],Pe)<0;)we++;for(;$(S[De],Pe)>0;)De--}$(S[M],Pe)===0?Eh(S,M,De):Eh(S,++De,z),De<=T&&(M=De+1),T<=De&&(z=De-1)}})(r,o,u||0,d||r.length-1,y||Ow)}function Eh(r,o,u){var d=r[o];r[o]=r[u],r[u]=d}function Ow(r,o){return r<o?-1:r>o?1:0}function qg(r,o){var u=r.length;if(u<=1)return[r];for(var d,y,x=[],S=0;S<u;S++){var T=Lt(r[S]);T!==0&&(r[S].area=Math.abs(T),y===void 0&&(y=T<0),y===T<0?(d&&x.push(d),d=[r[S]]):d.push(r[S]))}if(d&&x.push(d),o>1)for(var M=0;M<x.length;M++)x[M].length<=o||(Vg(x[M],o,1,x[M].length-1,E_),x[M]=x[M].slice(0,o));return x}function E_(r,o){return o.area-r.area}function Xd(r,o,u){for(var d=u.patternDependencies,y=!1,x=0,S=o;x<S.length;x+=1){var T=S[x].paint.get(r+"-pattern");T.isConstant()||(y=!0);var M=T.constantOr(null);M&&(y=!0,d[M.to]=!0,d[M.from]=!0)}return y}function Hg(r,o,u,d,y){for(var x=y.patternDependencies,S=0,T=o;S<T.length;S+=1){var M=T[S],z=M.paint.get(r+"-pattern").value;if(z.kind!=="constant"){var $=z.evaluate({zoom:d-1},u,{},y.availableImages),j=z.evaluate({zoom:d},u,{},y.availableImages),Q=z.evaluate({zoom:d+1},u,{},y.availableImages);j=j&&j.name?j.name:j,Q=Q&&Q.name?Q.name:Q,x[$=$&&$.name?$.name:$]=!0,x[j]=!0,x[Q]=!0,u.patterns[M.id]={min:$,mid:j,max:Q}}}return u}Hd.deviation=function(r,o,u,d){var y=o&&o.length,x=Math.abs(Zd(r,0,y?o[0]*u:r.length,u));if(y)for(var S=0,T=o.length;S<T;S++)x-=Math.abs(Zd(r,o[S]*u,S<T-1?o[S+1]*u:r.length,u));var M=0;for(S=0;S<d.length;S+=3){var z=d[S]*u,$=d[S+1]*u,j=d[S+2]*u;M+=Math.abs((r[z]-r[j])*(r[$+1]-r[z+1])-(r[z]-r[$])*(r[j+1]-r[z+1]))}return x===0&&M===0?0:Math.abs((M-x)/x)},Hd.flatten=function(r){for(var o=r[0][0].length,u={vertices:[],holes:[],dimensions:o},d=0,y=0;y<r.length;y++){for(var x=0;x<r[y].length;x++)for(var S=0;S<o;S++)u.vertices.push(r[y][x][S]);y>0&&u.holes.push(d+=r[y-1].length)}return u},Hn.default=Pw;var gs=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(o){return o.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new re,this.indexArray=new da,this.indexArray2=new Ic,this.programConfigurations=new nr(r.layers,r.zoom),this.segments=new ne,this.segments2=new ne,this.stateDependentLayerIds=this.layers.filter(function(o){return o.isStateDependent()}).map(function(o){return o.id})};gs.prototype.populate=function(r,o,u){this.hasPattern=Xd("fill",this.layers,o);for(var d=this.layers[0].layout.get("fill-sort-key"),y=!d.isConstant(),x=[],S=0,T=r;S<T.length;S+=1){var M=T[S],z=M.feature,$=M.id,j=M.index,Q=M.sourceLayerIndex,ee=this.layers[0]._featureFilter.needGeometry,pe=Qi(z,ee);if(this.layers[0]._featureFilter.filter(new xn(this.zoom),pe,u)){var he=y?d.evaluate(pe,{},u,o.availableImages):void 0,Pe={id:$,properties:z.properties,type:z.type,sourceLayerIndex:Q,index:j,geometry:ee?pe.geometry:kr(z),patterns:{},sortKey:he};x.push(Pe)}}y&&x.sort(function(_t,Nt){return _t.sortKey-Nt.sortKey});for(var we=0,De=x;we<De.length;we+=1){var Be=De[we],Ve=Be.geometry,qe=Be.index,et=Be.sourceLayerIndex;if(this.hasPattern){var dt=Hg("fill",this.layers,Be,this.zoom,o);this.patternFeatures.push(dt)}else this.addFeature(Be,Ve,qe,u,{});o.featureIndex.insert(r[qe].feature,Ve,qe,et,this.index)}},gs.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},gs.prototype.addFeatures=function(r,o,u){for(var d=0,y=this.patternFeatures;d<y.length;d+=1){var x=y[d];this.addFeature(x,x.geometry,x.index,o,u)}},gs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gs.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ug),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},gs.prototype.addFeature=function(r,o,u,d,y){for(var x=0,S=qg(o,500);x<S.length;x+=1){for(var T=S[x],M=0,z=0,$=T;z<$.length;z+=1)M+=$[z].length;for(var j=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),Q=j.vertexLength,ee=[],pe=[],he=0,Pe=T;he<Pe.length;he+=1){var we=Pe[he];if(we.length!==0){we!==T[0]&&pe.push(ee.length/2);var De=this.segments2.prepareSegment(we.length,this.layoutVertexArray,this.indexArray2),Be=De.vertexLength;this.layoutVertexArray.emplaceBack(we[0].x,we[0].y),this.indexArray2.emplaceBack(Be+we.length-1,Be),ee.push(we[0].x),ee.push(we[0].y);for(var Ve=1;Ve<we.length;Ve++)this.layoutVertexArray.emplaceBack(we[Ve].x,we[Ve].y),this.indexArray2.emplaceBack(Be+Ve-1,Be+Ve),ee.push(we[Ve].x),ee.push(we[Ve].y);De.vertexLength+=we.length,De.primitiveLength+=we.length}}for(var qe=Hn(ee,pe),et=0;et<qe.length;et+=3)this.indexArray.emplaceBack(Q+qe[et],Q+qe[et+1],Q+qe[et+2]);j.vertexLength+=M,j.primitiveLength+=qe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,y,d)},At("FillBucket",gs,{omit:["layers","patternFeatures"]});var k_=new Yo({"fill-sort-key":new Qt(le.layout_fill["fill-sort-key"])}),Ra={paint:new Yo({"fill-antialias":new St(le.paint_fill["fill-antialias"]),"fill-opacity":new Qt(le.paint_fill["fill-opacity"]),"fill-color":new Qt(le.paint_fill["fill-color"]),"fill-outline-color":new Qt(le.paint_fill["fill-outline-color"]),"fill-translate":new St(le.paint_fill["fill-translate"]),"fill-translate-anchor":new St(le.paint_fill["fill-translate-anchor"]),"fill-pattern":new ao(le.paint_fill["fill-pattern"])}),layout:k_},_l=function(r){function o(u){r.call(this,u,Ra)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.recalculate=function(u,d){r.prototype.recalculate.call(this,u,d);var y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},o.prototype.createBucket=function(u){return new gs(u)},o.prototype.queryRadius=function(){return Ja(this.paint.get("fill-translate"))},o.prototype.queryIntersectsFeature=function(u,d,y,x,S,T,M){return ga(Ma(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,M),x)},o.prototype.isTileClipped=function(){return!0},o}(Ia),Lw=ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,A_=ou;function ou(r,o,u,d,y){this.properties={},this.extent=u,this.type=0,this._pbf=r,this._geometry=-1,this._keys=d,this._values=y,r.readFields(Yf,this,o)}function Yf(r,o,u){r==1?o.id=u.readVarint():r==2?function(d,y){for(var x=d.readVarint()+d.pos;d.pos<x;){var S=y._keys[d.readVarint()],T=y._values[d.readVarint()];y.properties[S]=T}}(u,o):r==3?o.type=u.readVarint():r==4&&(o._geometry=u.pos)}function P_(r){for(var o,u,d=0,y=0,x=r.length,S=x-1;y<x;S=y++)d+=((u=r[S]).x-(o=r[y]).x)*(o.y+u.y);return d}ou.types=["Unknown","Point","LineString","Polygon"],ou.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var o,u=r.readVarint()+r.pos,d=1,y=0,x=0,S=0,T=[];r.pos<u;){if(y<=0){var M=r.readVarint();d=7&M,y=M>>3}if(y--,d===1||d===2)x+=r.readSVarint(),S+=r.readSVarint(),d===1&&(o&&T.push(o),o=[]),o.push(new C(x,S));else{if(d!==7)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&T.push(o),T},ou.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var o=r.readVarint()+r.pos,u=1,d=0,y=0,x=0,S=1/0,T=-1/0,M=1/0,z=-1/0;r.pos<o;){if(d<=0){var $=r.readVarint();u=7&$,d=$>>3}if(d--,u===1||u===2)(y+=r.readSVarint())<S&&(S=y),y>T&&(T=y),(x+=r.readSVarint())<M&&(M=x),x>z&&(z=x);else if(u!==7)throw new Error("unknown command "+u)}return[S,M,T,z]},ou.prototype.toGeoJSON=function(r,o,u){var d,y,x=this.extent*Math.pow(2,u),S=this.extent*r,T=this.extent*o,M=this.loadGeometry(),z=ou.types[this.type];function $(ee){for(var pe=0;pe<ee.length;pe++){var he=ee[pe];ee[pe]=[360*(he.x+S)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+T)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(d=0;d<M.length;d++)j[d]=M[d][0];$(M=j);break;case 2:for(d=0;d<M.length;d++)$(M[d]);break;case 3:for(M=function(ee){var pe=ee.length;if(pe<=1)return[ee];for(var he,Pe,we=[],De=0;De<pe;De++){var Be=P_(ee[De]);Be!==0&&(Pe===void 0&&(Pe=Be<0),Pe===Be<0?(he&&we.push(he),he=[ee[De]]):he.push(ee[De]))}return he&&we.push(he),we}(M),d=0;d<M.length;d++)for(y=0;y<M[d].length;y++)$(M[d][y])}M.length===1?M=M[0]:z="Multi"+z;var Q={type:"Feature",geometry:{type:z,coordinates:M},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var Gg=T_;function T_(r,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(I_,this,o),this.length=this._features.length}function I_(r,o,u){r===15?o.version=u.readVarint():r===1?o.name=u.readString():r===5?o.extent=u.readVarint():r===2?o._features.push(u.pos):r===3?o._keys.push(u.readString()):r===4&&o._values.push(function(d){for(var y=null,x=d.readVarint()+d.pos;d.pos<x;){var S=d.readVarint()>>3;y=S===1?d.readString():S===2?d.readFloat():S===3?d.readDouble():S===4?d.readVarint64():S===5?d.readVarint():S===6?d.readSVarint():S===7?d.readBoolean():null}return y}(u))}function Jf(r,o,u){if(r===3){var d=new Gg(u,u.readVarint()+u.pos);d.length&&(o[d.name]=d)}}T_.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var o=this._pbf.readVarint()+this._pbf.pos;return new A_(this._pbf,o,this.extent,this._keys,this._values)};var xl={VectorTile:function(r,o){this.layers=r.readFields(Jf,{},o)},VectorTileFeature:A_,VectorTileLayer:Gg},Mw=xl.VectorTileFeature.types,Qd=Math.pow(2,13);function ep(r,o,u,d,y,x,S,T){r.emplaceBack(o,u,2*Math.floor(d*Qd)+S,y*Qd*2,x*Qd*2,Math.round(T))}var Fa=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(o){return o.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new lo,this.indexArray=new da,this.programConfigurations=new nr(r.layers,r.zoom),this.segments=new ne,this.stateDependentLayerIds=this.layers.filter(function(o){return o.isStateDependent()}).map(function(o){return o.id})};function O_(r,o){return r.x===o.x&&(r.x<0||r.x>8192)||r.y===o.y&&(r.y<0||r.y>8192)}Fa.prototype.populate=function(r,o,u){this.features=[],this.hasPattern=Xd("fill-extrusion",this.layers,o);for(var d=0,y=r;d<y.length;d+=1){var x=y[d],S=x.feature,T=x.id,M=x.index,z=x.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,j=Qi(S,$);if(this.layers[0]._featureFilter.filter(new xn(this.zoom),j,u)){var Q={id:T,sourceLayerIndex:z,index:M,geometry:$?j.geometry:kr(S),properties:S.properties,type:S.type,patterns:{}};this.hasPattern?this.features.push(Hg("fill-extrusion",this.layers,Q,this.zoom,o)):this.addFeature(Q,Q.geometry,M,u,{}),o.featureIndex.insert(S,Q.geometry,M,z,this.index,!0)}}},Fa.prototype.addFeatures=function(r,o,u){for(var d=0,y=this.features;d<y.length;d+=1){var x=y[d];this.addFeature(x,x.geometry,x.index,o,u)}},Fa.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},Fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fa.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Lw),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fa.prototype.addFeature=function(r,o,u,d,y){for(var x=0,S=qg(o,500);x<S.length;x+=1){for(var T=S[x],M=0,z=0,$=T;z<$.length;z+=1)M+=$[z].length;for(var j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Q=0,ee=T;Q<ee.length;Q+=1){var pe=ee[Q];if(pe.length!==0&&!((En=pe).every(function(pn){return pn.x<0})||En.every(function(pn){return pn.x>8192})||En.every(function(pn){return pn.y<0})||En.every(function(pn){return pn.y>8192})))for(var he=0,Pe=0;Pe<pe.length;Pe++){var we=pe[Pe];if(Pe>=1){var De=pe[Pe-1];if(!O_(we,De)){j.vertexLength+4>ne.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Be=we.sub(De)._perp()._unit(),Ve=De.dist(we);he+Ve>32768&&(he=0),ep(this.layoutVertexArray,we.x,we.y,Be.x,Be.y,0,0,he),ep(this.layoutVertexArray,we.x,we.y,Be.x,Be.y,0,1,he),ep(this.layoutVertexArray,De.x,De.y,Be.x,Be.y,0,0,he+=Ve),ep(this.layoutVertexArray,De.x,De.y,Be.x,Be.y,0,1,he);var qe=j.vertexLength;this.indexArray.emplaceBack(qe,qe+2,qe+1),this.indexArray.emplaceBack(qe+1,qe+2,qe+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+M>ne.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),Mw[r.type]==="Polygon"){for(var et=[],dt=[],_t=j.vertexLength,Nt=0,wt=T;Nt<wt.length;Nt+=1){var Gt=wt[Nt];if(Gt.length!==0){Gt!==T[0]&&dt.push(et.length/2);for(var Et=0;Et<Gt.length;Et++){var vn=Gt[Et];ep(this.layoutVertexArray,vn.x,vn.y,0,0,1,1,0),et.push(vn.x),et.push(vn.y)}}}for(var Jt=Hn(et,dt),$t=0;$t<Jt.length;$t+=3)this.indexArray.emplaceBack(_t+Jt[$t],_t+Jt[$t+2],_t+Jt[$t+1]);j.primitiveLength+=Jt.length/3,j.vertexLength+=M}}var En;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,y,d)},At("FillExtrusionBucket",Fa,{omit:["layers","features"]});var Yd={paint:new Yo({"fill-extrusion-opacity":new St(le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qt(le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new St(le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new St(le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ao(le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qt(le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qt(le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new St(le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Wg=function(r){function o(u){r.call(this,u,Yd)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.createBucket=function(u){return new Fa(u)},o.prototype.queryRadius=function(){return Ja(this.paint.get("fill-extrusion-translate"))},o.prototype.is3D=function(){return!0},o.prototype.queryIntersectsFeature=function(u,d,y,x,S,T,M,z){var $=Ma(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,M),j=this.paint.get("fill-extrusion-height").evaluate(d,y),Q=this.paint.get("fill-extrusion-base").evaluate(d,y),ee=function(he,Pe,we,De){for(var Be=[],Ve=0,qe=he;Ve<qe.length;Ve+=1){var et=qe[Ve],dt=[et.x,et.y,0,1];Mc(dt,dt,Pe),Be.push(new C(dt[0]/dt[3],dt[1]/dt[3]))}return Be}($,z),pe=function(he,Pe,we,De){for(var Be=[],Ve=[],qe=De[8]*Pe,et=De[9]*Pe,dt=De[10]*Pe,_t=De[11]*Pe,Nt=De[8]*we,wt=De[9]*we,Gt=De[10]*we,Et=De[11]*we,vn=0,Jt=he;vn<Jt.length;vn+=1){for(var $t=[],En=[],pn=0,$n=Jt[vn];pn<$n.length;pn+=1){var Zt=$n[pn],Xn=Zt.x,br=Zt.y,Fr=De[0]*Xn+De[4]*br+De[12],Vr=De[1]*Xn+De[5]*br+De[13],Dr=De[2]*Xn+De[6]*br+De[14],Nr=De[3]*Xn+De[7]*br+De[15],_i=Dr+dt,Ai=Nr+_t,Eo=Fr+Nt,Bi=Vr+wt,ko=Dr+Gt,ii=Nr+Et,Ni=new C((Fr+qe)/Ai,(Vr+et)/Ai);Ni.z=_i/Ai,$t.push(Ni);var Ln=new C(Eo/ii,Bi/ii);Ln.z=ko/ii,En.push(Ln)}Be.push($t),Ve.push(En)}return[Be,Ve]}(x,Q,j,z);return function(he,Pe,we){var De=1/0;ga(we,Pe)&&(De=L_(we,Pe[0]));for(var Be=0;Be<Pe.length;Be++)for(var Ve=Pe[Be],qe=he[Be],et=0;et<Ve.length-1;et++){var dt=Ve[et],_t=[dt,Ve[et+1],qe[et+1],qe[et],dt];wo(we,_t)&&(De=Math.min(De,L_(we,_t)))}return De!==1/0&&De}(pe[0],pe[1],ee)},o}(Ia);function Vu(r,o){return r.x*o.x+r.y*o.y}function L_(r,o){if(r.length===1){for(var u,d=0,y=o[d++];!u||y.equals(u);)if(!(u=o[d++]))return 1/0;for(;d<o.length;d++){var x=o[d],S=r[0],T=u.sub(y),M=x.sub(y),z=S.sub(y),$=Vu(T,T),j=Vu(T,M),Q=Vu(M,M),ee=Vu(z,T),pe=Vu(z,M),he=$*Q-j*j,Pe=(Q*ee-j*pe)/he,we=($*pe-j*ee)/he,De=y.z*(1-Pe-we)+u.z*Pe+x.z*we;if(isFinite(De))return De}return 1/0}for(var Be=1/0,Ve=0,qe=o;Ve<qe.length;Ve+=1)Be=Math.min(Be,qe[Ve].z);return Be}var M_=ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Jd=ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,R_=xl.VectorTileFeature.types,Kg=Math.cos(Math.PI/180*37.5),F_=Math.pow(2,14)/.5,So=function(r){var o=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(u){o.gradients[u.id]={}}),this.layoutVertexArray=new jo,this.layoutVertexArray2=new Dn,this.indexArray=new da,this.programConfigurations=new nr(r.layers,r.zoom),this.segments=new ne,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};So.prototype.populate=function(r,o,u){this.hasPattern=Xd("line",this.layers,o);for(var d=this.layers[0].layout.get("line-sort-key"),y=!d.isConstant(),x=[],S=0,T=r;S<T.length;S+=1){var M=T[S],z=M.feature,$=M.id,j=M.index,Q=M.sourceLayerIndex,ee=this.layers[0]._featureFilter.needGeometry,pe=Qi(z,ee);if(this.layers[0]._featureFilter.filter(new xn(this.zoom),pe,u)){var he=y?d.evaluate(pe,{},u):void 0,Pe={id:$,properties:z.properties,type:z.type,sourceLayerIndex:Q,index:j,geometry:ee?pe.geometry:kr(z),patterns:{},sortKey:he};x.push(Pe)}}y&&x.sort(function(_t,Nt){return _t.sortKey-Nt.sortKey});for(var we=0,De=x;we<De.length;we+=1){var Be=De[we],Ve=Be.geometry,qe=Be.index,et=Be.sourceLayerIndex;if(this.hasPattern){var dt=Hg("line",this.layers,Be,this.zoom,o);this.patternFeatures.push(dt)}else this.addFeature(Be,Ve,qe,u,{});o.featureIndex.insert(r[qe].feature,Ve,qe,et,this.index)}},So.prototype.update=function(r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,u)},So.prototype.addFeatures=function(r,o,u){for(var d=0,y=this.patternFeatures;d<y.length;d+=1){var x=y[d];this.addFeature(x,x.geometry,x.index,o,u)}},So.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},So.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},So.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Jd)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,M_),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},So.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},So.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},So.prototype.addFeature=function(r,o,u,d,y){var x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),T=x.get("line-cap"),M=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var $=0,j=o;$<j.length;$+=1)this.addLine(j[$],r,S,T,M,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,y,d)},So.prototype.addLine=function(r,o,u,d,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var S=0;S<r.length-1;S++)this.totalDistance+=r[S].dist(r[S+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var T=R_[o.type]==="Polygon",M=r.length;M>=2&&r[M-1].equals(r[M-2]);)M--;for(var z=0;z<M-1&&r[z].equals(r[z+1]);)z++;if(!(M<(T?3:2))){u==="bevel"&&(y=1.05);var $,j=this.overscaling<=16?122880/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray),ee=void 0,pe=void 0,he=void 0,Pe=void 0;this.e1=this.e2=-1,T&&(Pe=r[z].sub($=r[M-2])._unit()._perp());for(var we=z;we<M;we++)if(!(pe=we===M-1?T?r[z+1]:void 0:r[we+1])||!r[we].equals(pe)){Pe&&(he=Pe),$&&(ee=$),$=r[we],Pe=pe?pe.sub($)._unit()._perp():he;var De=(he=he||Pe).add(Pe);De.x===0&&De.y===0||De._unit();var Be=he.x*Pe.x+he.y*Pe.y,Ve=De.x*Pe.x+De.y*Pe.y,qe=Ve!==0?1/Ve:1/0,et=2*Math.sqrt(2-2*Ve),dt=Ve<Kg&&ee&&pe,_t=he.x*Pe.y-he.y*Pe.x>0;if(dt&&we>z){var Nt=$.dist(ee);if(Nt>2*j){var wt=$.sub($.sub(ee)._mult(j/Nt)._round());this.updateDistance(ee,wt),this.addCurrentVertex(wt,he,0,0,Q),ee=wt}}var Gt=ee&&pe,Et=Gt?u:T?"butt":d;if(Gt&&Et==="round"&&(qe<x?Et="miter":qe<=2&&(Et="fakeround")),Et==="miter"&&qe>y&&(Et="bevel"),Et==="bevel"&&(qe>2&&(Et="flipbevel"),qe<y&&(Et="miter")),ee&&this.updateDistance(ee,$),Et==="miter")De._mult(qe),this.addCurrentVertex($,De,0,0,Q);else if(Et==="flipbevel"){if(qe>100)De=Pe.mult(-1);else{var vn=qe*he.add(Pe).mag()/he.sub(Pe).mag();De._perp()._mult(vn*(_t?-1:1))}this.addCurrentVertex($,De,0,0,Q),this.addCurrentVertex($,De.mult(-1),0,0,Q)}else if(Et==="bevel"||Et==="fakeround"){var Jt=-Math.sqrt(qe*qe-1),$t=_t?Jt:0,En=_t?0:Jt;if(ee&&this.addCurrentVertex($,he,$t,En,Q),Et==="fakeround")for(var pn=Math.round(180*et/Math.PI/20),$n=1;$n<pn;$n++){var Zt=$n/pn;if(Zt!==.5){var Xn=Zt-.5;Zt+=Zt*Xn*(Zt-1)*((1.0904+Be*(Be*(3.55645-1.43519*Be)-3.2452))*Xn*Xn+(.848013+Be*(.215638*Be-1.06021)))}var br=Pe.sub(he)._mult(Zt)._add(he)._unit()._mult(_t?-1:1);this.addHalfVertex($,br.x,br.y,!1,_t,0,Q)}pe&&this.addCurrentVertex($,Pe,-$t,-En,Q)}else if(Et==="butt")this.addCurrentVertex($,De,0,0,Q);else if(Et==="square"){var Fr=ee?1:-1;this.addCurrentVertex($,De,Fr,Fr,Q)}else Et==="round"&&(ee&&(this.addCurrentVertex($,he,0,0,Q),this.addCurrentVertex($,he,1,1,Q,!0)),pe&&(this.addCurrentVertex($,Pe,-1,-1,Q,!0),this.addCurrentVertex($,Pe,0,0,Q)));if(dt&&we<M-1){var Vr=$.dist(pe);if(Vr>2*j){var Dr=$.add(pe.sub($)._mult(j/Vr)._round());this.updateDistance($,Dr),this.addCurrentVertex(Dr,Pe,0,0,Q),$=Dr}}}}},So.prototype.addCurrentVertex=function(r,o,u,d,y,x){x===void 0&&(x=!1);var S=o.y*d-o.x,T=-o.y-o.x*d;this.addHalfVertex(r,o.x+o.y*u,o.y-o.x*u,x,!1,u,y),this.addHalfVertex(r,S,T,x,!0,-d,y),this.distance>F_/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,o,u,d,y,x))},So.prototype.addHalfVertex=function(r,o,u,d,y,x,S){var T=.5*(this.lineClips?this.scaledDistance*(F_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(d?1:0),(r.y<<1)+(y?1:0),Math.round(63*o)+128,Math.round(63*u)+128,1+(x===0?0:x<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var M=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),S.primitiveLength++),y?this.e2=M:this.e1=M},So.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},So.prototype.updateDistance=function(r,o){this.distance+=r.dist(o),this.updateScaledDistance()},At("LineBucket",So,{omit:["layers","patternFeatures"]});var au=new Yo({"line-cap":new St(le.layout_line["line-cap"]),"line-join":new Qt(le.layout_line["line-join"]),"line-miter-limit":new St(le.layout_line["line-miter-limit"]),"line-round-limit":new St(le.layout_line["line-round-limit"]),"line-sort-key":new Qt(le.layout_line["line-sort-key"])}),Zg={paint:new Yo({"line-opacity":new Qt(le.paint_line["line-opacity"]),"line-color":new Qt(le.paint_line["line-color"]),"line-translate":new St(le.paint_line["line-translate"]),"line-translate-anchor":new St(le.paint_line["line-translate-anchor"]),"line-width":new Qt(le.paint_line["line-width"]),"line-gap-width":new Qt(le.paint_line["line-gap-width"]),"line-offset":new Qt(le.paint_line["line-offset"]),"line-blur":new Qt(le.paint_line["line-blur"]),"line-dasharray":new so(le.paint_line["line-dasharray"]),"line-pattern":new ao(le.paint_line["line-pattern"]),"line-gradient":new Bs(le.paint_line["line-gradient"])}),layout:au},Xg=new(function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.possiblyEvaluate=function(u,d){return d=new xn(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),r.prototype.possiblyEvaluate.call(this,u,d)},o.prototype.evaluate=function(u,d,y,x){return d=U({},d,{zoom:Math.floor(d.zoom)}),r.prototype.evaluate.call(this,u,d,y,x)},o}(Qt))(Zg.paint.properties["line-width"].specification);Xg.useIntegerZoom=!0;var Rw=function(r){function o(u){r.call(this,u,Zg),this.gradientVersion=0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype._handleSpecialPaintPropertyUpdate=function(u){u==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Wa,this.gradientVersion=(this.gradientVersion+1)%O)},o.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},o.prototype.recalculate=function(u,d){r.prototype.recalculate.call(this,u,d),this.paint._values["line-floorwidth"]=Xg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)},o.prototype.createBucket=function(u){return new So(u)},o.prototype.queryRadius=function(u){var d=u,y=Qg(gi("line-width",this,d),gi("line-gap-width",this,d)),x=gi("line-offset",this,d);return y/2+Math.abs(x)+Ja(this.paint.get("line-translate"))},o.prototype.queryIntersectsFeature=function(u,d,y,x,S,T,M){var z=Ma(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,M),$=M/2*Qg(this.paint.get("line-width").evaluate(d,y),this.paint.get("line-gap-width").evaluate(d,y)),j=this.paint.get("line-offset").evaluate(d,y);return j&&(x=function(Q,ee){for(var pe=[],he=new C(0,0),Pe=0;Pe<Q.length;Pe++){for(var we=Q[Pe],De=[],Be=0;Be<we.length;Be++){var Ve=we[Be],qe=we[Be+1],et=Be===0?he:Ve.sub(we[Be-1])._unit()._perp(),dt=Be===we.length-1?he:qe.sub(Ve)._unit()._perp(),_t=et._add(dt)._unit();_t._mult(1/(_t.x*dt.x+_t.y*dt.y)),De.push(_t._mult(ee)._add(Ve))}pe.push(De)}return pe}(x,j*M)),function(Q,ee,pe){for(var he=0;he<ee.length;he++){var Pe=ee[he];if(Q.length>=3){for(var we=0;we<Pe.length;we++)if(ea(Q,Pe[we]))return!0}if(Oc(Q,Pe,pe))return!0}return!1}(z,x,$)},o.prototype.isTileClipped=function(){return!0},o}(Ia);function Qg(r,o){return o>0?o+2*r:r}var Fw=ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Dw=ti([{name:"a_projected_pos",components:3,type:"Float32"}],4),su=(ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),em=(ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Yg=ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Jg(r,o,u){return r.sections.forEach(function(d){d.text=function(y,x,S){var T=x.layout.get("text-transform").evaluate(S,{});return T==="uppercase"?y=y.toLocaleUpperCase():T==="lowercase"&&(y=y.toLocaleLowerCase()),In.applyArabicShaping&&(y=In.applyArabicShaping(y)),y}(d.text,o,u)}),r}ti([{name:"triangle",components:3,type:"Uint16"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ti([{type:"Float32",name:"offsetX"}]),ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var qu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Bc=function(r,o,u,d,y){var x,S,T=8*y-d-1,M=(1<<T)-1,z=M>>1,$=-7,j=u?y-1:0,Q=u?-1:1,ee=r[o+j];for(j+=Q,x=ee&(1<<-$)-1,ee>>=-$,$+=T;$>0;x=256*x+r[o+j],j+=Q,$-=8);for(S=x&(1<<-$)-1,x>>=-$,$+=d;$>0;S=256*S+r[o+j],j+=Q,$-=8);if(x===0)x=1-z;else{if(x===M)return S?NaN:1/0*(ee?-1:1);S+=Math.pow(2,d),x-=z}return(ee?-1:1)*S*Math.pow(2,x-d)},yn=function(r,o,u,d,y,x){var S,T,M,z=8*x-y-1,$=(1<<z)-1,j=$>>1,Q=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,ee=d?0:x-1,pe=d?1:-1,he=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(T=isNaN(o)?1:0,S=$):(S=Math.floor(Math.log(o)/Math.LN2),o*(M=Math.pow(2,-S))<1&&(S--,M*=2),(o+=S+j>=1?Q/M:Q*Math.pow(2,1-j))*M>=2&&(S++,M/=2),S+j>=$?(T=0,S=$):S+j>=1?(T=(o*M-1)*Math.pow(2,y),S+=j):(T=o*Math.pow(2,j-1)*Math.pow(2,y),S=0));y>=8;r[u+ee]=255&T,ee+=pe,T/=256,y-=8);for(S=S<<y|T,z+=y;z>0;r[u+ee]=255&S,ee+=pe,S/=256,z-=8);r[u+ee-pe]|=128*he},Nc=mr;function mr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}mr.Varint=0,mr.Fixed64=1,mr.Bytes=2,mr.Fixed32=5;var Hu=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function lu(r){return r.type===mr.Bytes?r.readVarint()+r.pos:r.pos+1}function Gu(r,o,u){return u?4294967296*o+(r>>>0):4294967296*(o>>>0)+(r>>>0)}function ey(r,o,u){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(d);for(var y=u.pos-1;y>=r;y--)u.buf[y+d]=u.buf[y]}function ta(r,o){for(var u=0;u<r.length;u++)o.writeVarint(r[u])}function zw(r,o){for(var u=0;u<r.length;u++)o.writeSVarint(r[u])}function Bw(r,o){for(var u=0;u<r.length;u++)o.writeFloat(r[u])}function D_(r,o){for(var u=0;u<r.length;u++)o.writeDouble(r[u])}function Nw(r,o){for(var u=0;u<r.length;u++)o.writeBoolean(r[u])}function z_(r,o){for(var u=0;u<r.length;u++)o.writeFixed32(r[u])}function $w(r,o){for(var u=0;u<r.length;u++)o.writeSFixed32(r[u])}function Uw(r,o){for(var u=0;u<r.length;u++)o.writeFixed64(r[u])}function jw(r,o){for(var u=0;u<r.length;u++)o.writeSFixed64(r[u])}function ys(r,o){return(r[o]|r[o+1]<<8|r[o+2]<<16)+16777216*r[o+3]}function Ji(r,o,u){r[u]=o,r[u+1]=o>>>8,r[u+2]=o>>>16,r[u+3]=o>>>24}function tm(r,o){return(r[o]|r[o+1]<<8|r[o+2]<<16)+(r[o+3]<<24)}function Vw(r,o,u){r===1&&u.readMessage(ty,o)}function ty(r,o,u){if(r===3){var d=u.readMessage(qw,{}),y=d.width,x=d.height,S=d.left,T=d.top,M=d.advance;o.push({id:d.id,bitmap:new Dc({width:y+6,height:x+6},d.bitmap),metrics:{width:y,height:x,left:S,top:T,advance:M}})}}function qw(r,o,u){r===1?o.id=u.readVarint():r===2?o.bitmap=u.readBytes():r===3?o.width=u.readVarint():r===4?o.height=u.readVarint():r===5?o.left=u.readSVarint():r===6?o.top=u.readSVarint():r===7&&(o.advance=u.readVarint())}function B_(r){for(var o=0,u=0,d=0,y=r;d<y.length;d+=1){var x=y[d];o+=x.w*x.h,u=Math.max(u,x.w)}r.sort(function(he,Pe){return Pe.h-he.h});for(var S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}],T=0,M=0,z=0,$=r;z<$.length;z+=1)for(var j=$[z],Q=S.length-1;Q>=0;Q--){var ee=S[Q];if(!(j.w>ee.w||j.h>ee.h)){if(j.x=ee.x,j.y=ee.y,M=Math.max(M,j.y+j.h),T=Math.max(T,j.x+j.w),j.w===ee.w&&j.h===ee.h){var pe=S.pop();Q<S.length&&(S[Q]=pe)}else j.h===ee.h?(ee.x+=j.w,ee.w-=j.w):j.w===ee.w?(ee.y+=j.h,ee.h-=j.h):(S.push({x:ee.x+j.w,y:ee.y,w:ee.w-j.w,h:j.h}),ee.y+=j.h,ee.h-=j.h);break}}return{w:T,h:M,fill:o/(T*M)||0}}mr.prototype={destroy:function(){this.buf=null},readFields:function(r,o,u){for(u=u||this.length;this.pos<u;){var d=this.readVarint(),y=d>>3,x=this.pos;this.type=7&d,r(y,o,this),this.pos===x&&this.skip(d)}return o},readMessage:function(r,o){return this.readFields(r,o,this.readVarint()+this.pos)},readFixed32:function(){var r=ys(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=tm(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ys(this.buf,this.pos)+4294967296*ys(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=ys(this.buf,this.pos)+4294967296*tm(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=Bc(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Bc(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var o,u,d=this.buf;return o=127&(u=d[this.pos++]),u<128?o:(o|=(127&(u=d[this.pos++]))<<7,u<128?o:(o|=(127&(u=d[this.pos++]))<<14,u<128?o:(o|=(127&(u=d[this.pos++]))<<21,u<128?o:function(y,x,S){var T,M,z=S.buf;if(T=(112&(M=z[S.pos++]))>>4,M<128||(T|=(127&(M=z[S.pos++]))<<3,M<128)||(T|=(127&(M=z[S.pos++]))<<10,M<128)||(T|=(127&(M=z[S.pos++]))<<17,M<128)||(T|=(127&(M=z[S.pos++]))<<24,M<128)||(T|=(1&(M=z[S.pos++]))<<31,M<128))return Gu(y,T,x);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(u=d[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,o=this.pos;return this.pos=r,r-o>=12&&Hu?function(u,d,y){return Hu.decode(u.subarray(d,y))}(this.buf,o,r):function(u,d,y){for(var x="",S=d;S<y;){var T,M,z,$=u[S],j=null,Q=$>239?4:$>223?3:$>191?2:1;if(S+Q>y)break;Q===1?$<128&&(j=$):Q===2?(192&(T=u[S+1]))==128&&(j=(31&$)<<6|63&T)<=127&&(j=null):Q===3?(M=u[S+2],(192&(T=u[S+1]))==128&&(192&M)==128&&((j=(15&$)<<12|(63&T)<<6|63&M)<=2047||j>=55296&&j<=57343)&&(j=null)):Q===4&&(M=u[S+2],z=u[S+3],(192&(T=u[S+1]))==128&&(192&M)==128&&(192&z)==128&&((j=(15&$)<<18|(63&T)<<12|(63&M)<<6|63&z)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,Q=1):j>65535&&(j-=65536,x+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),x+=String.fromCharCode(j),S+=Q}return x}(this.buf,o,r)},readBytes:function(){var r=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,r);return this.pos=r,o},readPackedVarint:function(r,o){if(this.type!==mr.Bytes)return r.push(this.readVarint(o));var u=lu(this);for(r=r||[];this.pos<u;)r.push(this.readVarint(o));return r},readPackedSVarint:function(r){if(this.type!==mr.Bytes)return r.push(this.readSVarint());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==mr.Bytes)return r.push(this.readBoolean());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==mr.Bytes)return r.push(this.readFloat());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==mr.Bytes)return r.push(this.readDouble());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==mr.Bytes)return r.push(this.readFixed32());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==mr.Bytes)return r.push(this.readSFixed32());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==mr.Bytes)return r.push(this.readFixed64());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==mr.Bytes)return r.push(this.readSFixed64());var o=lu(this);for(r=r||[];this.pos<o;)r.push(this.readSFixed64());return r},skip:function(r){var o=7&r;if(o===mr.Varint)for(;this.buf[this.pos++]>127;);else if(o===mr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===mr.Fixed32)this.pos+=4;else{if(o!==mr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(r,o){this.writeVarint(r<<3|o)},realloc:function(r){for(var o=this.length||16;o<this.pos+r;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Ji(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Ji(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Ji(this.buf,-1&r,this.pos),Ji(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Ji(this.buf,-1&r,this.pos),Ji(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(o,u){var d,y;if(o>=0?(d=o%4294967296|0,y=o/4294967296|0):(y=~(-o/4294967296),4294967295^(d=~(-o%4294967296))?d=d+1|0:(d=0,y=y+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(x,S,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)}(d,0,u),function(x,S){var T=(7&x)<<4;S.buf[S.pos++]|=T|((x>>>=3)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x)))))}(y,u)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var o=this.pos;this.pos=function(d,y,x){for(var S,T,M=0;M<y.length;M++){if((S=y.charCodeAt(M))>55295&&S<57344){if(!T){S>56319||M+1===y.length?(d[x++]=239,d[x++]=191,d[x++]=189):T=S;continue}if(S<56320){d[x++]=239,d[x++]=191,d[x++]=189,T=S;continue}S=T-55296<<10|S-56320|65536,T=null}else T&&(d[x++]=239,d[x++]=191,d[x++]=189,T=null);S<128?d[x++]=S:(S<2048?d[x++]=S>>6|192:(S<65536?d[x++]=S>>12|224:(d[x++]=S>>18|240,d[x++]=S>>12&63|128),d[x++]=S>>6&63|128),d[x++]=63&S|128)}return x}(this.buf,r,this.pos);var u=this.pos-o;u>=128&&ey(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(r){this.realloc(4),yn(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),yn(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var o=r.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=r[u]},writeRawMessage:function(r,o){this.pos++;var u=this.pos;r(o,this);var d=this.pos-u;d>=128&&ey(u,d,this),this.pos=u-1,this.writeVarint(d),this.pos+=d},writeMessage:function(r,o,u){this.writeTag(r,mr.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(r,o){o.length&&this.writeMessage(r,ta,o)},writePackedSVarint:function(r,o){o.length&&this.writeMessage(r,zw,o)},writePackedBoolean:function(r,o){o.length&&this.writeMessage(r,Nw,o)},writePackedFloat:function(r,o){o.length&&this.writeMessage(r,Bw,o)},writePackedDouble:function(r,o){o.length&&this.writeMessage(r,D_,o)},writePackedFixed32:function(r,o){o.length&&this.writeMessage(r,z_,o)},writePackedSFixed32:function(r,o){o.length&&this.writeMessage(r,$w,o)},writePackedFixed64:function(r,o){o.length&&this.writeMessage(r,Uw,o)},writePackedSFixed64:function(r,o){o.length&&this.writeMessage(r,jw,o)},writeBytesField:function(r,o){this.writeTag(r,mr.Bytes),this.writeBytes(o)},writeFixed32Field:function(r,o){this.writeTag(r,mr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(r,o){this.writeTag(r,mr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(r,o){this.writeTag(r,mr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(r,o){this.writeTag(r,mr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(r,o){this.writeTag(r,mr.Varint),this.writeVarint(o)},writeSVarintField:function(r,o){this.writeTag(r,mr.Varint),this.writeSVarint(o)},writeStringField:function(r,o){this.writeTag(r,mr.Bytes),this.writeString(o)},writeFloatField:function(r,o){this.writeTag(r,mr.Fixed32),this.writeFloat(o)},writeDoubleField:function(r,o){this.writeTag(r,mr.Fixed64),this.writeDouble(o)},writeBooleanField:function(r,o){this.writeVarintField(r,!!o)}};var Wu=function(r,o){var u=o.pixelRatio,d=o.version,y=o.stretchX,x=o.stretchY,S=o.content;this.paddedRect=r,this.pixelRatio=u,this.stretchX=y,this.stretchY=x,this.content=S,this.version=d},tp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};tp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},tp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},tp.tlbr.get=function(){return this.tl.concat(this.br)},tp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Wu.prototype,tp);var np=function(r,o){var u={},d={};this.haveRenderCallbacks=[];var y=[];this.addImages(r,u,y),this.addImages(o,d,y);var x=B_(y),S=new Vo({width:x.w||1,height:x.h||1});for(var T in r){var M=r[T],z=u[T].paddedRect;Vo.copy(M.data,S,{x:0,y:0},{x:z.x+1,y:z.y+1},M.data)}for(var $ in o){var j=o[$],Q=d[$].paddedRect,ee=Q.x+1,pe=Q.y+1,he=j.data.width,Pe=j.data.height;Vo.copy(j.data,S,{x:0,y:0},{x:ee,y:pe},j.data),Vo.copy(j.data,S,{x:0,y:Pe-1},{x:ee,y:pe-1},{width:he,height:1}),Vo.copy(j.data,S,{x:0,y:0},{x:ee,y:pe+Pe},{width:he,height:1}),Vo.copy(j.data,S,{x:he-1,y:0},{x:ee-1,y:pe},{width:1,height:Pe}),Vo.copy(j.data,S,{x:0,y:0},{x:ee+he,y:pe},{width:1,height:Pe})}this.image=S,this.iconPositions=u,this.patternPositions=d};np.prototype.addImages=function(r,o,u){for(var d in r){var y=r[d],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};u.push(x),o[d]=new Wu(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(d)}},np.prototype.patchUpdatedImages=function(r,o){for(var u in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),o)},np.prototype.patchUpdatedImage=function(r,o,u){if(r&&o&&r.version!==o.version){r.version=o.version;var d=r.tl;u.update(o.data,void 0,{x:d[0],y:d[1]})}},At("ImagePosition",Wu),At("ImageAtlas",np);var Da={horizontal:1,vertical:2,horizontalOnly:3},rp=function(){this.scale=1,this.fontStack="",this.imageName=null};rp.forText=function(r,o){var u=new rp;return u.scale=r||1,u.fontStack=o,u},rp.forImage=function(r){var o=new rp;return o.imageName=r,o};var Co=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function nm(r,o,u,d,y,x,S,T,M,z,$,j,Q,ee,pe,he){var Pe,we=Co.fromFeature(r,y);j===Da.vertical&&we.verticalizePunctuation();var De=In.processBidirectionalText,Be=In.processStyledBidirectionalText;if(De&&we.sections.length===1){Pe=[];for(var Ve=0,qe=De(we.toString(),Ah(we,z,x,o,d,ee,pe));Ve<qe.length;Ve+=1){var et=qe[Ve],dt=new Co;dt.text=et,dt.sections=we.sections;for(var _t=0;_t<et.length;_t++)dt.sectionIndex.push(0);Pe.push(dt)}}else if(Be){Pe=[];for(var Nt=0,wt=Be(we.text,we.sectionIndex,Ah(we,z,x,o,d,ee,pe));Nt<wt.length;Nt+=1){var Gt=wt[Nt],Et=new Co;Et.text=Gt[0],Et.sectionIndex=Gt[1],Et.sections=we.sections,Pe.push(Et)}}else Pe=function($t,En){for(var pn=[],$n=$t.text,Zt=0,Xn=0,br=En;Xn<br.length;Xn+=1){var Fr=br[Xn];pn.push($t.substring(Zt,Fr)),Zt=Fr}return Zt<$n.length&&pn.push($t.substring(Zt,$n.length)),pn}(we,Ah(we,z,x,o,d,ee,pe));var vn=[],Jt={positionedLines:vn,text:we.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function($t,En,pn,$n,Zt,Xn,br,Fr,Vr,Dr,Nr,_i){for(var Ai=0,Eo=-17,Bi=0,ko=0,ii=Fr==="right"?1:Fr==="left"?0:.5,Ni=0,Ln=0,gr=Zt;Ln<gr.length;Ln+=1){var rr=gr[Ln];rr.trim();var Gn=rr.getMaxScale(),qo=24*(Gn-1),co={positionedGlyphs:[],lineOffset:0};$t.positionedLines[Ni]=co;var Wn=co.positionedGlyphs,hi=0;if(rr.length()){for(var fo=0;fo<rr.length();fo++){var Mn=rr.getSection(fo),_n=rr.getSectionIndex(fo),za=rr.getCharCode(fo),xi=0,Rn=null,wl=null,po=null,up=24,Wc=!(Vr===Da.horizontal||!Nr&&!dl(za)||Nr&&(kh[za]||(Ar=za,It.Arabic(Ar)||It["Arabic Supplement"](Ar)||It["Arabic Extended-A"](Ar)||It["Arabic Presentation Forms-A"](Ar)||It["Arabic Presentation Forms-B"](Ar))));if(Mn.imageName){var cp=$n[Mn.imageName];if(!cp)continue;po=Mn.imageName,$t.iconsInText=$t.iconsInText||!0,wl=cp.paddedRect;var cu=cp.displaySize;Mn.scale=24*Mn.scale/_i,xi=qo+(24-cu[1]*Mn.scale),up=(Rn={width:cu[0],height:cu[1],left:1,top:-3,advance:Wc?cu[1]:cu[0]}).advance;var fp=Wc?cu[0]*Mn.scale-24*Gn:cu[1]*Mn.scale-24*Gn;fp>0&&fp>hi&&(hi=fp)}else{var pp=pn[Mn.fontStack],hp=pp&&pp[za];if(hp&&hp.rect)wl=hp.rect,Rn=hp.metrics;else{var es=En[Mn.fontStack],Rh=es&&es[za];if(!Rh)continue;Rn=Rh.metrics}xi=24*(Gn-Mn.scale)}Wc?($t.verticalizable=!0,Wn.push({glyph:za,imageName:po,x:Ai,y:Eo+xi,vertical:Wc,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:_n,metrics:Rn,rect:wl}),Ai+=up*Mn.scale+Dr):(Wn.push({glyph:za,imageName:po,x:Ai,y:Eo+xi,vertical:Wc,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:_n,metrics:Rn,rect:wl}),Ai+=Rn.advance*Mn.scale+Dr)}Wn.length!==0&&(Bi=Math.max(Ai-Dr,Bi),U_(Wn,0,Wn.length-1,ii,hi)),Ai=0;var Kc=Xn*Gn+hi;co.lineOffset=Math.max(hi,qo),Eo+=Kc,ko=Math.max(Kc,ko),++Ni}else Eo+=Xn,++Ni}var Ar,Jr=Eo- -17,Zc=im(br),Xu=Zc.horizontalAlign,dp=Zc.verticalAlign;(function(fm,pm,Fh,Dh,zh,fu,Xc,Bh,Nh){var pu,ra=(pm-Fh)*zh;pu=fu!==Xc?-Bh*Dh- -17:(-Dh*Nh+.5)*Xc;for(var js=0,$h=fm;js<$h.length;js+=1)for(var Qc=0,Uh=$h[js].positionedGlyphs;Qc<Uh.length;Qc+=1){var mp=Uh[Qc];mp.x+=ra,mp.y+=pu}})($t.positionedLines,ii,Xu,dp,Bi,ko,Xn,Jr,Zt.length),$t.top+=-dp*Jr,$t.bottom=$t.top+Jr,$t.left+=-Xu*Bi,$t.right=$t.left+Bi}(Jt,o,u,d,Pe,S,T,M,j,z,Q,he),!function($t){for(var En=0,pn=$t;En<pn.length;En+=1)if(pn[En].positionedGlyphs.length!==0)return!1;return!0}(vn)&&Jt}Co.fromFeature=function(r,o){for(var u=new Co,d=0;d<r.sections.length;d++){var y=r.sections[d];y.image?u.addImageSection(y):u.addTextSection(y,o)}return u},Co.prototype.length=function(){return this.text.length},Co.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Co.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Co.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Co.prototype.verticalizePunctuation=function(){this.text=function(r){for(var o="",u=0;u<r.length;u++){var d=r.charCodeAt(u+1)||null,y=r.charCodeAt(u-1)||null;o+=d&&Ki(d)&&!qu[r[u+1]]||y&&Ki(y)&&!qu[r[u-1]]||!qu[r[u]]?r[u]:qu[r[u]]}return o}(this.text)},Co.prototype.trim=function(){for(var r=0,o=0;o<this.text.length&&kh[this.text.charCodeAt(o)];o++)r++;for(var u=this.text.length,d=this.text.length-1;d>=0&&d>=r&&kh[this.text.charCodeAt(d)];d--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)},Co.prototype.substring=function(r,o){var u=new Co;return u.text=this.text.substring(r,o),u.sectionIndex=this.sectionIndex.slice(r,o),u.sections=this.sections,u},Co.prototype.toString=function(){return this.text},Co.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(o,u){return Math.max(o,r.sections[u].scale)},0)},Co.prototype.addTextSection=function(r,o){this.text+=r.text,this.sections.push(rp.forText(r.scale,r.fontStack||o));for(var u=this.sections.length-1,d=0;d<r.text.length;++d)this.sectionIndex.push(u)},Co.prototype.addImageSection=function(r){var o=r.image?r.image.name:"";if(o.length!==0){var u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(rp.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Ye("Reached maximum number of images 6401")}else Ye("Can't add FormattedSection with an empty image.")},Co.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var kh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},na={};function N_(r,o,u,d,y,x){if(o.imageName){var S=d[o.imageName];return S?S.displaySize[0]*o.scale*24/x+y:0}var T=u[o.fontStack],M=T&&T[r];return M?M.metrics.advance*o.scale+y:0}function rm(r,o,u,d){var y=Math.pow(r-o,2);return d?r<o?y/2:2*y:y+Math.abs(u)*u}function $_(r,o,u){var d=0;return r===10&&(d-=1e4),u&&(d+=150),r!==40&&r!==65288||(d+=50),o!==41&&o!==65289||(d+=50),d}function ip(r,o,u,d,y,x){for(var S=null,T=rm(o,u,y,x),M=0,z=d;M<z.length;M+=1){var $=z[M],j=rm(o-$.x,u,y,x)+$.badness;j<=T&&(S=$,T=j)}return{index:r,x:o,priorBreak:S,badness:T}}function Ah(r,o,u,d,y,x,S){if(x!=="point")return[];if(!r)return[];for(var T,M=[],z=function(Pe,we,De,Be,Ve,qe){for(var et=0,dt=0;dt<Pe.length();dt++){var _t=Pe.getSection(dt);et+=N_(Pe.getCharCode(dt),_t,Be,Ve,we,qe)}return et/Math.max(1,Math.ceil(et/De))}(r,o,u,d,y,S),$=r.text.indexOf("")>=0,j=0,Q=0;Q<r.length();Q++){var ee=r.getSection(Q),pe=r.getCharCode(Q);if(kh[pe]||(j+=N_(pe,ee,d,y,o,S)),Q<r.length()-1){var he=!((T=pe)<11904||!(It["Bopomofo Extended"](T)||It.Bopomofo(T)||It["CJK Compatibility Forms"](T)||It["CJK Compatibility Ideographs"](T)||It["CJK Compatibility"](T)||It["CJK Radicals Supplement"](T)||It["CJK Strokes"](T)||It["CJK Symbols and Punctuation"](T)||It["CJK Unified Ideographs Extension A"](T)||It["CJK Unified Ideographs"](T)||It["Enclosed CJK Letters and Months"](T)||It["Halfwidth and Fullwidth Forms"](T)||It.Hiragana(T)||It["Ideographic Description Characters"](T)||It["Kangxi Radicals"](T)||It["Katakana Phonetic Extensions"](T)||It.Katakana(T)||It["Vertical Forms"](T)||It["Yi Radicals"](T)||It["Yi Syllables"](T)));(na[pe]||he||ee.imageName)&&M.push(ip(Q+1,j,z,M,$_(pe,r.getCharCode(Q+1),he&&$),!1))}}return function Pe(we){return we?Pe(we.priorBreak).concat(we.index):[]}(ip(r.length(),j,z,M,0,!0))}function im(r){var o=.5,u=.5;switch(r){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function U_(r,o,u,d,y){if(d||y)for(var x=r[u],S=(r[u].x+x.metrics.advance*x.scale)*d,T=o;T<=u;T++)r[T].x-=S,r[T].y+=y}function Ph(r,o,u,d,y,x){var S,T=r.image;if(T.content){var M=T.content,z=T.pixelRatio||1;S=[M[0]/z,M[1]/z,T.displaySize[0]-M[2]/z,T.displaySize[1]-M[3]/z]}var $,j,Q,ee,pe=o.left*x,he=o.right*x;u==="width"||u==="both"?(ee=y[0]+pe-d[3],j=y[0]+he+d[1]):j=(ee=y[0]+(pe+he-T.displaySize[0])/2)+T.displaySize[0];var Pe=o.top*x,we=o.bottom*x;return u==="height"||u==="both"?($=y[1]+Pe-d[0],Q=y[1]+we+d[2]):Q=($=y[1]+(Pe+we-T.displaySize[1])/2)+T.displaySize[1],{image:T,top:$,right:j,bottom:Q,left:ee,collisionPadding:S}}na[10]=!0,na[32]=!0,na[38]=!0,na[40]=!0,na[41]=!0,na[43]=!0,na[45]=!0,na[47]=!0,na[173]=!0,na[183]=!0,na[8203]=!0,na[8208]=!0,na[8211]=!0,na[8231]=!0;var $c=function(r){function o(u,d,y,x){r.call(this,u,d),this.angle=y,x!==void 0&&(this.segment=x)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.clone=function(){return new o(this.x,this.y,this.angle,this.segment)},o}(C);function vs(r,o){var u=o.expression;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new xn(r+1))};if(u.kind==="source")return{kind:"source"};for(var d=u.zoomStops,y=u.interpolationType,x=0;x<d.length&&d[x]<=r;)x++;for(var S=x=Math.max(0,x-1);S<d.length&&d[S]<r+1;)S++;S=Math.min(d.length-1,S);var T=d[x],M=d[S];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:y}:{kind:"camera",minZoom:T,maxZoom:M,minSize:u.evaluate(new xn(T)),maxSize:u.evaluate(new xn(M)),interpolationType:y}}function Ku(r,o,u){var d=o.uSize,y=u.lowerSize;return r.kind==="source"?y/128:r.kind==="composite"?fi(y/128,u.upperSize/128,o.uSizeT):d}function j_(r,o){var u=0,d=0;if(r.kind==="constant")d=r.layoutSize;else if(r.kind!=="source"){var y=r.interpolationType,x=y?H(Mi.interpolationFactor(y,o,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?d=fi(r.minSize,r.maxSize,x):u=x}return{uSizeT:u,uSize:d}}At("Anchor",$c);var V_=Object.freeze({__proto__:null,getSizeData:vs,evaluateSizeForFeature:Ku,evaluateSizeForZoom:j_,SIZE_PACK_FACTOR:128});function q_(r,o,u,d,y){if(o.segment===void 0)return!0;for(var x=o,S=o.segment+1,T=0;T>-u/2;){if(--S<0)return!1;T-=r[S].dist(x),x=r[S]}T+=r[S].dist(r[S+1]),S++;for(var M=[],z=0;T<u/2;){var $=r[S],j=r[S+1];if(!j)return!1;var Q=r[S-1].angleTo($)-$.angleTo(j);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:Q}),z+=Q;T-M[0].distance>d;)z-=M.shift().angleDelta;if(z>y)return!1;S++,T+=$.dist(j)}return!0}function H_(r){for(var o=0,u=0;u<r.length-1;u++)o+=r[u].dist(r[u+1]);return o}function G_(r,o,u){return r?.6*o*u:0}function W_(r,o){return Math.max(r?r.right-r.left:0,o?o.right-o.left:0)}function Hw(r,o,u,d,y,x){for(var S=G_(u,y,x),T=W_(u,d)*x,M=0,z=H_(r)/2,$=0;$<r.length-1;$++){var j=r[$],Q=r[$+1],ee=j.dist(Q);if(M+ee>z){var pe=(z-M)/ee,he=fi(j.x,Q.x,pe),Pe=fi(j.y,Q.y,pe),we=new $c(he,Pe,Q.angleTo(j),$);return we._round(),!S||q_(r,we,T,S,o)?we:void 0}M+=ee}}function Gw(r,o,u,d,y,x,S,T,M){var z=G_(d,x,S),$=W_(d,y),j=$*S,Q=r[0].x===0||r[0].x===M||r[0].y===0||r[0].y===M;return o-j<o/4&&(o=j+o/4),function ee(pe,he,Pe,we,De,Be,Ve,qe,et){for(var dt=Be/2,_t=H_(pe),Nt=0,wt=he-Pe,Gt=[],Et=0;Et<pe.length-1;Et++){for(var vn=pe[Et],Jt=pe[Et+1],$t=vn.dist(Jt),En=Jt.angleTo(vn);wt+Pe<Nt+$t;){var pn=((wt+=Pe)-Nt)/$t,$n=fi(vn.x,Jt.x,pn),Zt=fi(vn.y,Jt.y,pn);if($n>=0&&$n<et&&Zt>=0&&Zt<et&&wt-dt>=0&&wt+dt<=_t){var Xn=new $c($n,Zt,En,Et);Xn._round(),we&&!q_(pe,Xn,Be,we,De)||Gt.push(Xn)}}Nt+=$t}return qe||Gt.length||Ve||(Gt=ee(pe,Nt/2,Pe,we,De,Be,Ve,!0,et)),Gt}(r,Q?o/2*T%o:($/2+2*x)*S*T%o,o,z,u,j,Q,!1,M)}function K_(r,o,u,d,y){for(var x=[],S=0;S<r.length;S++)for(var T=r[S],M=void 0,z=0;z<T.length-1;z++){var $=T[z],j=T[z+1];$.x<o&&j.x<o||($.x<o?$=new C(o,$.y+(o-$.x)/(j.x-$.x)*(j.y-$.y))._round():j.x<o&&(j=new C(o,$.y+(o-$.x)/(j.x-$.x)*(j.y-$.y))._round()),$.y<u&&j.y<u||($.y<u?$=new C($.x+(u-$.y)/(j.y-$.y)*(j.x-$.x),u)._round():j.y<u&&(j=new C($.x+(u-$.y)/(j.y-$.y)*(j.x-$.x),u)._round()),$.x>=d&&j.x>=d||($.x>=d?$=new C(d,$.y+(d-$.x)/(j.x-$.x)*(j.y-$.y))._round():j.x>=d&&(j=new C(d,$.y+(d-$.x)/(j.x-$.x)*(j.y-$.y))._round()),$.y>=y&&j.y>=y||($.y>=y?$=new C($.x+(y-$.y)/(j.y-$.y)*(j.x-$.x),y)._round():j.y>=y&&(j=new C($.x+(y-$.y)/(j.y-$.y)*(j.x-$.x),y)._round()),M&&$.equals(M[M.length-1])||x.push(M=[$]),M.push(j)))))}return x}function Z_(r,o,u,d){var y=[],x=r.image,S=x.pixelRatio,T=x.paddedRect.w-2,M=x.paddedRect.h-2,z=r.right-r.left,$=r.bottom-r.top,j=x.stretchX||[[0,T]],Q=x.stretchY||[[0,M]],ee=function($n,Zt){return $n+Zt[1]-Zt[0]},pe=j.reduce(ee,0),he=Q.reduce(ee,0),Pe=T-pe,we=M-he,De=0,Be=pe,Ve=0,qe=he,et=0,dt=Pe,_t=0,Nt=we;if(x.content&&d){var wt=x.content;De=om(j,0,wt[0]),Ve=om(Q,0,wt[1]),Be=om(j,wt[0],wt[2]),qe=om(Q,wt[1],wt[3]),et=wt[0]-De,_t=wt[1]-Ve,dt=wt[2]-wt[0]-Be,Nt=wt[3]-wt[1]-qe}var Gt=function($n,Zt,Xn,br){var Fr=am($n.stretch-De,Be,z,r.left),Vr=Th($n.fixed-et,dt,$n.stretch,pe),Dr=am(Zt.stretch-Ve,qe,$,r.top),Nr=Th(Zt.fixed-_t,Nt,Zt.stretch,he),_i=am(Xn.stretch-De,Be,z,r.left),Ai=Th(Xn.fixed-et,dt,Xn.stretch,pe),Eo=am(br.stretch-Ve,qe,$,r.top),Bi=Th(br.fixed-_t,Nt,br.stretch,he),ko=new C(Fr,Dr),ii=new C(_i,Dr),Ni=new C(_i,Eo),Ln=new C(Fr,Eo),gr=new C(Vr/S,Nr/S),rr=new C(Ai/S,Bi/S),Gn=o*Math.PI/180;if(Gn){var qo=Math.sin(Gn),co=Math.cos(Gn),Wn=[co,-qo,qo,co];ko._matMult(Wn),ii._matMult(Wn),Ln._matMult(Wn),Ni._matMult(Wn)}var hi=$n.stretch+$n.fixed,fo=Zt.stretch+Zt.fixed;return{tl:ko,tr:ii,bl:Ln,br:Ni,tex:{x:x.paddedRect.x+1+hi,y:x.paddedRect.y+1+fo,w:Xn.stretch+Xn.fixed-hi,h:br.stretch+br.fixed-fo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gr,pixelOffsetBR:rr,minFontScaleX:dt/S/z,minFontScaleY:Nt/S/$,isSDF:u}};if(d&&(x.stretchX||x.stretchY))for(var Et=X_(j,Pe,pe),vn=X_(Q,we,he),Jt=0;Jt<Et.length-1;Jt++)for(var $t=Et[Jt],En=Et[Jt+1],pn=0;pn<vn.length-1;pn++)y.push(Gt($t,vn[pn],En,vn[pn+1]));else y.push(Gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return y}function om(r,o,u){for(var d=0,y=0,x=r;y<x.length;y+=1){var S=x[y];d+=Math.max(o,Math.min(u,S[1]))-Math.max(o,Math.min(u,S[0]))}return d}function X_(r,o,u){for(var d=[{fixed:-1,stretch:0}],y=0,x=r;y<x.length;y+=1){var S=x[y],T=S[0],M=S[1],z=d[d.length-1];d.push({fixed:T-z.stretch,stretch:z.stretch}),d.push({fixed:T-z.stretch,stretch:z.stretch+(M-T)})}return d.push({fixed:o+1,stretch:u}),d}function am(r,o,u,d){return r/o*u+d}function Th(r,o,u,d){return r-o*u/d}var Ih=function(r,o,u,d,y,x,S,T,M,z){if(this.boxStartIndex=r.length,M){var $=x.top,j=x.bottom,Q=x.collisionPadding;Q&&($-=Q[1],j+=Q[3]);var ee=j-$;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{var pe=x.top*S-T,he=x.bottom*S+T,Pe=x.left*S-T,we=x.right*S+T,De=x.collisionPadding;if(De&&(Pe-=De[0]*S,pe-=De[1]*S,we+=De[2]*S,he+=De[3]*S),z){var Be=new C(Pe,pe),Ve=new C(we,pe),qe=new C(Pe,he),et=new C(we,he),dt=z*Math.PI/180;Be._rotate(dt),Ve._rotate(dt),qe._rotate(dt),et._rotate(dt),Pe=Math.min(Be.x,Ve.x,qe.x,et.x),we=Math.max(Be.x,Ve.x,qe.x,et.x),pe=Math.min(Be.y,Ve.y,qe.y,et.y),he=Math.max(Be.y,Ve.y,qe.y,et.y)}r.emplaceBack(o.x,o.y,Pe,pe,we,he,u,d,y)}this.boxEndIndex=r.length},Uc=function(r,o){if(r===void 0&&(r=[]),o===void 0&&(o=Ww),this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(var u=(this.length>>1)-1;u>=0;u--)this._down(u)};function Ww(r,o){return r<o?-1:r>o?1:0}function Kw(r,o,u){o===void 0&&(o=1),u===void 0&&(u=!1);for(var d=1/0,y=1/0,x=-1/0,S=-1/0,T=r[0],M=0;M<T.length;M++){var z=T[M];(!M||z.x<d)&&(d=z.x),(!M||z.y<y)&&(y=z.y),(!M||z.x>x)&&(x=z.x),(!M||z.y>S)&&(S=z.y)}var $=Math.min(x-d,S-y),j=$/2,Q=new Uc([],Zw);if($===0)return new C(d,y);for(var ee=d;ee<x;ee+=$)for(var pe=y;pe<S;pe+=$)Q.push(new jc(ee+j,pe+j,j,r));for(var he=function(De){for(var Be=0,Ve=0,qe=0,et=De[0],dt=0,_t=et.length,Nt=_t-1;dt<_t;Nt=dt++){var wt=et[dt],Gt=et[Nt],Et=wt.x*Gt.y-Gt.x*wt.y;Ve+=(wt.x+Gt.x)*Et,qe+=(wt.y+Gt.y)*Et,Be+=3*Et}return new jc(Ve/Be,qe/Be,0,De)}(r),Pe=Q.length;Q.length;){var we=Q.pop();(we.d>he.d||!he.d)&&(he=we,u&&console.log("found best %d after %d probes",Math.round(1e4*we.d)/1e4,Pe)),we.max-he.d<=o||(Q.push(new jc(we.p.x-(j=we.h/2),we.p.y-j,j,r)),Q.push(new jc(we.p.x+j,we.p.y-j,j,r)),Q.push(new jc(we.p.x-j,we.p.y+j,j,r)),Q.push(new jc(we.p.x+j,we.p.y+j,j,r)),Pe+=4)}return u&&(console.log("num probes: "+Pe),console.log("best distance: "+he.d)),he.p}function Zw(r,o){return o.max-r.max}function jc(r,o,u,d){this.p=new C(r,o),this.h=u,this.d=function(y,x){for(var S=!1,T=1/0,M=0;M<x.length;M++)for(var z=x[M],$=0,j=z.length,Q=j-1;$<j;Q=$++){var ee=z[$],pe=z[Q];ee.y>y.y!=pe.y>y.y&&y.x<(pe.x-ee.x)*(y.y-ee.y)/(pe.y-ee.y)+ee.x&&(S=!S),T=Math.min(T,Lc(y,ee,pe))}return(S?1:-1)*Math.sqrt(T)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}Uc.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},Uc.prototype.pop=function(){if(this.length!==0){var r=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),r}},Uc.prototype.peek=function(){return this.data[0]},Uc.prototype._up=function(r){for(var o=this.data,u=this.compare,d=o[r];r>0;){var y=r-1>>1,x=o[y];if(u(d,x)>=0)break;o[r]=x,r=y}o[r]=d},Uc.prototype._down=function(r){for(var o=this.data,u=this.compare,d=this.length>>1,y=o[r];r<d;){var x=1+(r<<1),S=o[x],T=x+1;if(T<this.length&&u(o[T],S)<0&&(x=T,S=o[T]),u(S,y)>=0)break;o[r]=S,r=x}o[r]=y};var ny=Number.POSITIVE_INFINITY;function Q_(r,o){return o[1]!==ny?function(u,d,y){var x=0,S=0;switch(d=Math.abs(d),y=Math.abs(y),u){case"top-right":case"top-left":case"top":S=y-7;break;case"bottom-right":case"bottom-left":case"bottom":S=7-y}switch(u){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,S]}(r,o[0],o[1]):function(u,d){var y=0,x=0;d<0&&(d=0);var S=d/Math.sqrt(2);switch(u){case"top-right":case"top-left":x=S-7;break;case"bottom-right":case"bottom-left":x=7-S;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(u){case"top-right":case"bottom-right":y=-S;break;case"top-left":case"bottom-left":y=S;break;case"left":y=d;break;case"right":y=-d}return[y,x]}(r,o[0])}function ry(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Y_(r,o,u,d,y,x,S,T,M,z,$,j,Q,ee,pe){var he=function(Ve,qe,et,dt,_t,Nt,wt,Gt){for(var Et=dt.layout.get("text-rotate").evaluate(Nt,{})*Math.PI/180,vn=[],Jt=0,$t=qe.positionedLines;Jt<$t.length;Jt+=1)for(var En=$t[Jt],pn=0,$n=En.positionedGlyphs;pn<$n.length;pn+=1){var Zt=$n[pn];if(Zt.rect){var Xn=Zt.rect||{},br=4,Fr=!0,Vr=1,Dr=0,Nr=(_t||Gt)&&Zt.vertical,_i=Zt.metrics.advance*Zt.scale/2;if(Gt&&qe.verticalizable&&(Dr=En.lineOffset/2-(Zt.imageName?-(24-Zt.metrics.width*Zt.scale)/2:24*(Zt.scale-1))),Zt.imageName){var Ai=wt[Zt.imageName];Fr=Ai.sdf,br=1/(Vr=Ai.pixelRatio)}var Eo=_t?[Zt.x+_i,Zt.y]:[0,0],Bi=_t?[0,0]:[Zt.x+_i+et[0],Zt.y+et[1]-Dr],ko=[0,0];Nr&&(ko=Bi,Bi=[0,0]);var ii=(Zt.metrics.left-br)*Zt.scale-_i+Bi[0],Ni=(-Zt.metrics.top-br)*Zt.scale+Bi[1],Ln=ii+Xn.w*Zt.scale/Vr,gr=Ni+Xn.h*Zt.scale/Vr,rr=new C(ii,Ni),Gn=new C(Ln,Ni),qo=new C(ii,gr),co=new C(Ln,gr);if(Nr){var Wn=new C(-_i,_i- -17),hi=-Math.PI/2,fo=12-_i,Mn=new C(22-fo,-(Zt.imageName?fo:0)),_n=new(Function.prototype.bind.apply(C,[null].concat(ko)));rr._rotateAround(hi,Wn)._add(Mn)._add(_n),Gn._rotateAround(hi,Wn)._add(Mn)._add(_n),qo._rotateAround(hi,Wn)._add(Mn)._add(_n),co._rotateAround(hi,Wn)._add(Mn)._add(_n)}if(Et){var za=Math.sin(Et),xi=Math.cos(Et),Rn=[xi,-za,za,xi];rr._matMult(Rn),Gn._matMult(Rn),qo._matMult(Rn),co._matMult(Rn)}var wl=new C(0,0),po=new C(0,0);vn.push({tl:rr,tr:Gn,bl:qo,br:co,tex:Xn,writingMode:qe.writingMode,glyphOffset:Eo,sectionIndex:Zt.sectionIndex,isSDF:Fr,pixelOffsetTL:wl,pixelOffsetBR:po,minFontScaleX:0,minFontScaleY:0})}}return vn}(0,u,T,y,x,S,d,r.allowVerticalPlacement),Pe=r.textSizeData,we=null;Pe.kind==="source"?(we=[128*y.layout.get("text-size").evaluate(S,{})])[0]>32640&&Ye(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Pe.kind==="composite"&&((we=[128*ee.compositeTextSizes[0].evaluate(S,{},pe),128*ee.compositeTextSizes[1].evaluate(S,{},pe)])[0]>32640||we[1]>32640)&&Ye(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,he,we,T,x,S,z,o,M.lineStartIndex,M.lineLength,Q,pe);for(var De=0,Be=$;De<Be.length;De+=1)j[Be[De]]=r.text.placedSymbolArray.length-1;return 4*he.length}function J_(r){for(var o in r)return r[o];return null}function Xw(r,o,u,d){var y=r.compareText;if(o in y){for(var x=y[o],S=x.length-1;S>=0;S--)if(d.dist(x[S])<u)return!0}else y[o]=[];return y[o].push(d),!1}var _s=xl.VectorTileFeature.types,Qw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sm(r,o,u,d,y,x,S,T,M,z,$,j,Q){var ee=T?Math.min(32640,Math.round(T[0])):0,pe=T?Math.min(32640,Math.round(T[1])):0;r.emplaceBack(o,u,Math.round(32*d),Math.round(32*y),x,S,(ee<<1)+(M?1:0),pe,16*z,16*$,256*j,256*Q)}function iy(r,o,u){r.emplaceBack(o.x,o.y,u),r.emplaceBack(o.x,o.y,u),r.emplaceBack(o.x,o.y,u),r.emplaceBack(o.x,o.y,u)}function e0(r){for(var o=0,u=r.sections;o<u.length;o+=1)if(Ud(u[o].text))return!0;return!1}var op=function(r){this.layoutVertexArray=new Bu,this.indexArray=new da,this.programConfigurations=r,this.segments=new ne,this.dynamicLayoutVertexArray=new Pc,this.opacityVertexArray=new Us,this.placedSymbolArray=new b};op.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},op.prototype.upload=function(r,o,u,d){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Fw.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Dw.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Qw,!0),this.opacityVertexBuffer.itemSize=1),(u||d)&&this.programConfigurations.upload(r))},op.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},At("SymbolBuffers",op);var Oh=function(r,o,u){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new u,this.segments=new ne,this.collisionVertexArray=new yh};Oh.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,su.members,!0)},Oh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},At("CollisionBuffers",Oh);var cr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(x){return x.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uo([]),this.placementViewportMatrix=uo([]);var o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vs(this.zoom,o["text-size"]),this.iconSizeData=vs(this.zoom,o["icon-size"]);var u=this.layers[0].layout,d=u.get("symbol-sort-key"),y=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(function(x){return Da[x]})),this.stateDependentLayerIds=this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id}),this.sourceID=r.sourceID};cr.prototype.createArrays=function(){this.text=new op(new nr(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new op(new nr(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new L,this.lineVertexArray=new N,this.symbolInstances=new P},cr.prototype.calculateGlyphDependencies=function(r,o,u,d,y){for(var x=0;x<r.length;x++)if(o[r.charCodeAt(x)]=!0,(u||d)&&y){var S=qu[r.charAt(x)];S&&(o[S.charCodeAt(0)]=!0)}},cr.prototype.populate=function(r,o,u){var d=this.layers[0],y=d.layout,x=y.get("text-font"),S=y.get("text-field"),T=y.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof Ei&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),z=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,$=y.get("symbol-sort-key");if(this.features=[],M||z){for(var j=o.iconDependencies,Q=o.glyphDependencies,ee=o.availableImages,pe=new xn(this.zoom),he=0,Pe=r;he<Pe.length;he+=1){var we=Pe[he],De=we.feature,Be=we.id,Ve=we.index,qe=we.sourceLayerIndex,et=d._featureFilter.needGeometry,dt=Qi(De,et);if(d._featureFilter.filter(pe,dt,u)){et||(dt.geometry=kr(De));var _t=void 0;if(M){var Nt=d.getValueAndResolveTokens("text-field",dt,u,ee),wt=Ei.factory(Nt);e0(wt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ya()==="unavailable"||this.hasRTLText&&In.isParsed())&&(_t=Jg(wt,d,dt))}var Gt=void 0;if(z){var Et=d.getValueAndResolveTokens("icon-image",dt,u,ee);Gt=Et instanceof vo?Et:vo.fromString(Et)}if(_t||Gt){var vn=this.sortFeaturesByKey?$.evaluate(dt,{},u):void 0;if(this.features.push({id:Be,text:_t,icon:Gt,index:Ve,sourceLayerIndex:qe,geometry:dt.geometry,properties:De.properties,type:_s[De.type],sortKey:vn}),Gt&&(j[Gt.name]=!0),_t){var Jt=x.evaluate(dt,{},u).join(","),$t=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Da.vertical)>=0;for(var En=0,pn=_t.sections;En<pn.length;En+=1){var $n=pn[En];if($n.image)j[$n.image.name]=!0;else{var Zt=Ac(_t.toString()),Xn=$n.fontStack||Jt,br=Q[Xn]=Q[Xn]||{};this.calculateGlyphDependencies($n.text,br,$t,this.allowVerticalPlacement,Zt)}}}}}}y.get("symbol-placement")==="line"&&(this.features=function(Fr){var Vr={},Dr={},Nr=[],_i=0;function Ai(Wn){Nr.push(Fr[Wn]),_i++}function Eo(Wn,hi,fo){var Mn=Dr[Wn];return delete Dr[Wn],Dr[hi]=Mn,Nr[Mn].geometry[0].pop(),Nr[Mn].geometry[0]=Nr[Mn].geometry[0].concat(fo[0]),Mn}function Bi(Wn,hi,fo){var Mn=Vr[hi];return delete Vr[hi],Vr[Wn]=Mn,Nr[Mn].geometry[0].shift(),Nr[Mn].geometry[0]=fo[0].concat(Nr[Mn].geometry[0]),Mn}function ko(Wn,hi,fo){var Mn=fo?hi[0][hi[0].length-1]:hi[0][0];return Wn+":"+Mn.x+":"+Mn.y}for(var ii=0;ii<Fr.length;ii++){var Ni=Fr[ii],Ln=Ni.geometry,gr=Ni.text?Ni.text.toString():null;if(gr){var rr=ko(gr,Ln),Gn=ko(gr,Ln,!0);if(rr in Dr&&Gn in Vr&&Dr[rr]!==Vr[Gn]){var qo=Bi(rr,Gn,Ln),co=Eo(rr,Gn,Nr[qo].geometry);delete Vr[rr],delete Dr[Gn],Dr[ko(gr,Nr[co].geometry,!0)]=co,Nr[qo].geometry=null}else rr in Dr?Eo(rr,Gn,Ln):Gn in Vr?Bi(rr,Gn,Ln):(Ai(ii),Vr[rr]=_i-1,Dr[Gn]=_i-1)}else Ai(ii)}return Nr.filter(function(Wn){return Wn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Fr,Vr){return Fr.sortKey-Vr.sortKey})}},cr.prototype.update=function(r,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,u),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,u))},cr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},cr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},cr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},cr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},cr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},cr.prototype.addToLineVertexArray=function(r,o){var u=this.lineVertexArray.length;if(r.segment!==void 0){for(var d=r.dist(o[r.segment+1]),y=r.dist(o[r.segment]),x={},S=r.segment+1;S<o.length;S++)x[S]={x:o[S].x,y:o[S].y,tileUnitDistanceFromAnchor:d},S<o.length-1&&(d+=o[S+1].dist(o[S]));for(var T=r.segment||0;T>=0;T--)x[T]={x:o[T].x,y:o[T].y,tileUnitDistanceFromAnchor:y},T>0&&(y+=o[T-1].dist(o[T]));for(var M=0;M<o.length;M++){var z=x[M];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}},cr.prototype.addSymbols=function(r,o,u,d,y,x,S,T,M,z,$,j){for(var Q=r.indexArray,ee=r.layoutVertexArray,pe=r.segments.prepareSegment(4*o.length,ee,Q,this.canOverlap?x.sortKey:void 0),he=this.glyphOffsetArray.length,Pe=pe.vertexLength,we=this.allowVerticalPlacement&&S===Da.vertical?Math.PI/2:0,De=x.text&&x.text.sections,Be=0;Be<o.length;Be++){var Ve=o[Be],qe=Ve.tl,et=Ve.tr,dt=Ve.bl,_t=Ve.br,Nt=Ve.tex,wt=Ve.pixelOffsetTL,Gt=Ve.pixelOffsetBR,Et=Ve.minFontScaleX,vn=Ve.minFontScaleY,Jt=Ve.glyphOffset,$t=Ve.isSDF,En=Ve.sectionIndex,pn=pe.vertexLength,$n=Jt[1];sm(ee,T.x,T.y,qe.x,$n+qe.y,Nt.x,Nt.y,u,$t,wt.x,wt.y,Et,vn),sm(ee,T.x,T.y,et.x,$n+et.y,Nt.x+Nt.w,Nt.y,u,$t,Gt.x,wt.y,Et,vn),sm(ee,T.x,T.y,dt.x,$n+dt.y,Nt.x,Nt.y+Nt.h,u,$t,wt.x,Gt.y,Et,vn),sm(ee,T.x,T.y,_t.x,$n+_t.y,Nt.x+Nt.w,Nt.y+Nt.h,u,$t,Gt.x,Gt.y,Et,vn),iy(r.dynamicLayoutVertexArray,T,we),Q.emplaceBack(pn,pn+1,pn+2),Q.emplaceBack(pn+1,pn+2,pn+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Jt[0]),Be!==o.length-1&&En===o[Be+1].sectionIndex||r.programConfigurations.populatePaintArrays(ee.length,x,x.index,{},j,De&&De[En])}r.placedSymbolArray.emplaceBack(T.x,T.y,he,this.glyphOffsetArray.length-he,Pe,M,z,T.segment,u?u[0]:0,u?u[1]:0,d[0],d[1],S,0,!1,0,$)},cr.prototype._addCollisionDebugVertex=function(r,o,u,d,y,x){return o.emplaceBack(0,0),r.emplaceBack(u.x,u.y,d,y,Math.round(x.x),Math.round(x.y))},cr.prototype.addCollisionDebugVertices=function(r,o,u,d,y,x,S){var T=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),M=T.vertexLength,z=y.layoutVertexArray,$=y.collisionVertexArray,j=S.anchorX,Q=S.anchorY;this._addCollisionDebugVertex(z,$,x,j,Q,new C(r,o)),this._addCollisionDebugVertex(z,$,x,j,Q,new C(u,o)),this._addCollisionDebugVertex(z,$,x,j,Q,new C(u,d)),this._addCollisionDebugVertex(z,$,x,j,Q,new C(r,d)),T.vertexLength+=4;var ee=y.indexArray;ee.emplaceBack(M,M+1),ee.emplaceBack(M+1,M+2),ee.emplaceBack(M+2,M+3),ee.emplaceBack(M+3,M),T.primitiveLength+=4},cr.prototype.addDebugCollisionBoxes=function(r,o,u,d){for(var y=r;y<o;y++){var x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,d?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,u)}},cr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Oh(ml,em.members,Ic),this.iconCollisionBox=new Oh(ml,em.members,Ic);for(var r=0;r<this.symbolInstances.length;r++){var o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}},cr.prototype._deserializeCollisionBoxesForSymbol=function(r,o,u,d,y,x,S,T,M){for(var z={},$=o;$<u;$++){var j=r.get($);z.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},z.textFeatureIndex=j.featureIndex;break}for(var Q=d;Q<y;Q++){var ee=r.get(Q);z.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},z.verticalTextFeatureIndex=ee.featureIndex;break}for(var pe=x;pe<S;pe++){var he=r.get(pe);z.iconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},z.iconFeatureIndex=he.featureIndex;break}for(var Pe=T;Pe<M;Pe++){var we=r.get(Pe);z.verticalIconBox={x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,anchorPointX:we.anchorPointX,anchorPointY:we.anchorPointY},z.verticalIconFeatureIndex=we.featureIndex;break}return z},cr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var o=0;o<this.symbolInstances.length;o++){var u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}},cr.prototype.hasTextData=function(){return this.text.segments.get().length>0},cr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},cr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},cr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},cr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},cr.prototype.addIndicesForPlacedSymbol=function(r,o){for(var u=r.placedSymbolArray.get(o),d=u.vertexStartIndex+4*u.numGlyphs,y=u.vertexStartIndex;y<d;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)},cr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var o=Math.sin(r),u=Math.cos(r),d=[],y=[],x=[],S=0;S<this.symbolInstances.length;++S){x.push(S);var T=this.symbolInstances.get(S);d.push(0|Math.round(o*T.anchorX+u*T.anchorY)),y.push(T.featureIndex)}return x.sort(function(M,z){return d[M]-d[z]||y[z]-y[M]}),x},cr.prototype.addToSortKeyRanges=function(r,o){var u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})},cr.prototype.sortFeatures=function(r){var o=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,d=this.symbolInstanceIndexes;u<d.length;u+=1){var y=this.symbolInstances.get(d[u]);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(function(x,S,T){x>=0&&T.indexOf(x)===S&&o.addIndicesForPlacedSymbol(o.text,x)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},At("SymbolBucket",cr,{omit:["layers","collisionBoxArray","features","compareText"]}),cr.MAX_GLYPHS=65535,cr.addDynamicAttributes=iy;var Yw=new Yo({"symbol-placement":new St(le.layout_symbol["symbol-placement"]),"symbol-spacing":new St(le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new St(le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qt(le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new St(le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new St(le.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new St(le.layout_symbol["icon-ignore-placement"]),"icon-optional":new St(le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new St(le.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qt(le.layout_symbol["icon-size"]),"icon-text-fit":new St(le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new St(le.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qt(le.layout_symbol["icon-image"]),"icon-rotate":new Qt(le.layout_symbol["icon-rotate"]),"icon-padding":new St(le.layout_symbol["icon-padding"]),"icon-keep-upright":new St(le.layout_symbol["icon-keep-upright"]),"icon-offset":new Qt(le.layout_symbol["icon-offset"]),"icon-anchor":new Qt(le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new St(le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new St(le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new St(le.layout_symbol["text-rotation-alignment"]),"text-field":new Qt(le.layout_symbol["text-field"]),"text-font":new Qt(le.layout_symbol["text-font"]),"text-size":new Qt(le.layout_symbol["text-size"]),"text-max-width":new Qt(le.layout_symbol["text-max-width"]),"text-line-height":new St(le.layout_symbol["text-line-height"]),"text-letter-spacing":new Qt(le.layout_symbol["text-letter-spacing"]),"text-justify":new Qt(le.layout_symbol["text-justify"]),"text-radial-offset":new Qt(le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new St(le.layout_symbol["text-variable-anchor"]),"text-anchor":new Qt(le.layout_symbol["text-anchor"]),"text-max-angle":new St(le.layout_symbol["text-max-angle"]),"text-writing-mode":new St(le.layout_symbol["text-writing-mode"]),"text-rotate":new Qt(le.layout_symbol["text-rotate"]),"text-padding":new St(le.layout_symbol["text-padding"]),"text-keep-upright":new St(le.layout_symbol["text-keep-upright"]),"text-transform":new Qt(le.layout_symbol["text-transform"]),"text-offset":new Qt(le.layout_symbol["text-offset"]),"text-allow-overlap":new St(le.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new St(le.layout_symbol["text-ignore-placement"]),"text-optional":new St(le.layout_symbol["text-optional"])}),Lh={paint:new Yo({"icon-opacity":new Qt(le.paint_symbol["icon-opacity"]),"icon-color":new Qt(le.paint_symbol["icon-color"]),"icon-halo-color":new Qt(le.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qt(le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qt(le.paint_symbol["icon-halo-blur"]),"icon-translate":new St(le.paint_symbol["icon-translate"]),"icon-translate-anchor":new St(le.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qt(le.paint_symbol["text-opacity"]),"text-color":new Qt(le.paint_symbol["text-color"],{runtimeType:mn,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new Qt(le.paint_symbol["text-halo-color"]),"text-halo-width":new Qt(le.paint_symbol["text-halo-width"]),"text-halo-blur":new Qt(le.paint_symbol["text-halo-blur"]),"text-translate":new St(le.paint_symbol["text-translate"]),"text-translate-anchor":new St(le.paint_symbol["text-translate-anchor"])}),layout:Yw},ap=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:jt,this.defaultValue=r};ap.prototype.evaluate=function(r){if(r.formattedSection){var o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},ap.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},ap.prototype.outputDefined=function(){return!1},ap.prototype.serialize=function(){return null},At("FormatSectionOverride",ap,{omit:["defaultValue"]});var Jw=function(r){function o(u){r.call(this,u,Lh)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.recalculate=function(u,d){if(r.prototype.recalculate.call(this,u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var y=this.layout.get("text-writing-mode");if(y){for(var x=[],S=0,T=y;S<T.length;S+=1){var M=T[S];x.indexOf(M)<0&&x.push(M)}this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},o.prototype.getValueAndResolveTokens=function(u,d,y,x){var S=this.layout.get(u).evaluate(d,{},y,x),T=this._unevaluatedLayout._values[u];return T.isDataDriven()||$f(T.value)||!S?S:function(M,z){return z.replace(/{([^{}]+)}/g,function($,j){return j in M?String(M[j]):""})}(d.properties,S)},o.prototype.createBucket=function(u){return new cr(u)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype._setPaintOverrides=function(){for(var u=0,d=Lh.paint.overridableProperties;u<d.length;u+=1){var y=d[u];if(o.hasPaintOverride(this.layout,y)){var x,S=this.paint.get(y),T=new ap(S),M=new Mu(T,S.property.specification);x=S.value.kind==="constant"||S.value.kind==="source"?new xc("source",M):new Ru("composite",M,S.value.zoomStops,S.value._interpolationType),this.paint._values[y]=new Uo(S.property,x,S.parameters)}}},o.prototype._handleOverridablePaintPropertyUpdate=function(u,d,y){return!(!this.layout||d.isDataDriven()||y.isDataDriven())&&o.hasPaintOverride(this.layout,u)},o.hasPaintOverride=function(u,d){var y=u.get("text-field"),x=Lh.paint.properties[d],S=!1,T=function($){for(var j=0,Q=$;j<Q.length;j+=1)if(x.overrides&&x.overrides.hasOverride(Q[j]))return void(S=!0)};if(y.value.kind==="constant"&&y.value.value instanceof Ei)T(y.value.value.sections);else if(y.value.kind==="source"){var M=function($){S||($ instanceof Do&&ki($.value)===Tn?T($.value.sections):$ instanceof Bo?T($.sections):$.eachChild(M))},z=y.value;z._styleExpression&&M(z._styleExpression.expression)}return S},o}(Ia),e2={paint:new Yo({"background-color":new St(le.paint_background["background-color"]),"background-pattern":new so(le.paint_background["background-pattern"]),"background-opacity":new St(le.paint_background["background-opacity"])})},t2=function(r){function o(u){r.call(this,u,e2)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Ia),n2={paint:new Yo({"raster-opacity":new St(le.paint_raster["raster-opacity"]),"raster-hue-rotate":new St(le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new St(le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new St(le.paint_raster["raster-brightness-max"]),"raster-saturation":new St(le.paint_raster["raster-saturation"]),"raster-contrast":new St(le.paint_raster["raster-contrast"]),"raster-resampling":new St(le.paint_raster["raster-resampling"]),"raster-fade-duration":new St(le.paint_raster["raster-fade-duration"])})},r2=function(r){function o(u){r.call(this,u,n2)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o}(Ia),i2=function(r){function o(u){r.call(this,u,{}),this.implementation=u}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},o.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},o.prototype.recalculate=function(){},o.prototype.updateTransitions=function(){},o.prototype.hasTransition=function(){},o.prototype.serialize=function(){},o.prototype.onAdd=function(u){this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},o.prototype.onRemove=function(u){this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},o}(Ia),o2={circle:Rc,heatmap:x_,hillshade:Aw,fill:_l,"fill-extrusion":Wg,line:Rw,symbol:Jw,background:t2,raster:r2},t0=I.HTMLImageElement,n0=I.HTMLCanvasElement,r0=I.HTMLVideoElement,i0=I.ImageData,lm=I.ImageBitmap,Vc=function(r,o,u,d){this.context=r,this.format=u,this.texture=r.gl.createTexture(),this.update(o,d)};Vc.prototype.update=function(r,o,u){var d=r.width,y=r.height,x=!(this.size&&this.size[0]===d&&this.size[1]===y||u),S=this.context,T=S.gl;if(this.useMipmap=!!(o&&o.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!o||o.premultiply!==!1)),x)this.size=[d,y],r instanceof t0||r instanceof n0||r instanceof r0||r instanceof i0||lm&&r instanceof lm?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,d,y,0,this.format,T.UNSIGNED_BYTE,r.data);else{var M=u||{x:0,y:0},z=M.x,$=M.y;r instanceof t0||r instanceof n0||r instanceof r0||r instanceof i0||lm&&r instanceof lm?T.texSubImage2D(T.TEXTURE_2D,0,z,$,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,z,$,d,y,T.RGBA,T.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)},Vc.prototype.bind=function(r,o,u){var d=this.context.gl;d.bindTexture(d.TEXTURE_2D,this.texture),u!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(u=d.LINEAR),r!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,u||r),this.filter=r),o!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,o),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,o),this.wrap=o)},Vc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Vc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var oy=function(r){var o=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){o._triggered=!1,o._callback()})};oy.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},oy.prototype.remove=function(){delete this._channel,this._callback=function(){}};var sp=function(r,o,u){this.target=r,this.parent=o,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ce(["receive","process"],this),this.invoker=new oy(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Dt()?r:I};function o0(r,o,u){var d=2*Math.PI*6378137/256/Math.pow(2,u);return[r*d-2*Math.PI*6378137/2,o*d-2*Math.PI*6378137/2]}sp.prototype.send=function(r,o,u,d,y){var x=this;y===void 0&&(y=!1);var S=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[S]=u);var T=ve(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:r,hasCallback:!!u,targetMapId:d,mustQueue:y,sourceMapId:this.mapId,data:oo(o,T)},T),{cancel:function(){u&&delete x.callbacks[S],x.target.postMessage({id:S,type:"<cancel>",targetMapId:d,sourceMapId:x.mapId})}}},sp.prototype.receive=function(r){var o=r.data,u=o.id;if(u&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){delete this.tasks[u];var d=this.cancelCallbacks[u];delete this.cancelCallbacks[u],d&&d()}else Dt()||o.mustQueue?(this.tasks[u]=o,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,o)},sp.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),o=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),o&&this.processTask(r,o)}},sp.prototype.processTask=function(r,o){var u=this;if(o.type==="<response>"){var d=this.callbacks[r];delete this.callbacks[r],d&&(o.error?d(Du(o.error)):d(null,Du(o.data)))}else{var y=!1,x=ve(this.globalScope)?void 0:[],S=o.hasCallback?function($,j){y=!0,delete u.cancelCallbacks[r],u.target.postMessage({id:r,type:"<response>",sourceMapId:u.mapId,error:$?oo($):null,data:oo(j,x)},x)}:function($){y=!0},T=null,M=Du(o.data);if(this.parent[o.type])T=this.parent[o.type](o.sourceMapId,M,S);else if(this.parent.getWorkerSource){var z=o.type.split(".");T=this.parent.getWorkerSource(o.sourceMapId,z[0],M.source)[z[1]](M,S)}else S(new Error("Could not find function "+o.type));!y&&T&&T.cancel&&(this.cancelCallbacks[r]=T.cancel)}},sp.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var yi=function(r,o){r&&(o?this.setSouthWest(r).setNorthEast(o):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};yi.prototype.setNorthEast=function(r){return this._ne=r instanceof Rr?new Rr(r.lng,r.lat):Rr.convert(r),this},yi.prototype.setSouthWest=function(r){return this._sw=r instanceof Rr?new Rr(r.lng,r.lat):Rr.convert(r),this},yi.prototype.extend=function(r){var o,u,d=this._sw,y=this._ne;if(r instanceof Rr)o=r,u=r;else{if(!(r instanceof yi))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(yi.convert(r)):this.extend(Rr.convert(r)):this;if(u=r._ne,!(o=r._sw)||!u)return this}return d||y?(d.lng=Math.min(o.lng,d.lng),d.lat=Math.min(o.lat,d.lat),y.lng=Math.max(u.lng,y.lng),y.lat=Math.max(u.lat,y.lat)):(this._sw=new Rr(o.lng,o.lat),this._ne=new Rr(u.lng,u.lat)),this},yi.prototype.getCenter=function(){return new Rr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},yi.prototype.getSouthWest=function(){return this._sw},yi.prototype.getNorthEast=function(){return this._ne},yi.prototype.getNorthWest=function(){return new Rr(this.getWest(),this.getNorth())},yi.prototype.getSouthEast=function(){return new Rr(this.getEast(),this.getSouth())},yi.prototype.getWest=function(){return this._sw.lng},yi.prototype.getSouth=function(){return this._sw.lat},yi.prototype.getEast=function(){return this._ne.lng},yi.prototype.getNorth=function(){return this._ne.lat},yi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},yi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},yi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},yi.prototype.contains=function(r){var o=Rr.convert(r),u=o.lng,d=o.lat,y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y},yi.convert=function(r){return!r||r instanceof yi?r:new yi(r)};var Rr=function(r,o){if(isNaN(r)||isNaN(o))throw new Error("Invalid LngLat object: ("+r+", "+o+")");if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Rr.prototype.wrap=function(){return new Rr(R(this.lng,-180,180),this.lat)},Rr.prototype.toArray=function(){return[this.lng,this.lat]},Rr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Rr.prototype.distanceTo=function(r){var o=Math.PI/180,u=this.lat*o,d=r.lat*o,y=Math.sin(u)*Math.sin(d)+Math.cos(u)*Math.cos(d)*Math.cos((r.lng-this.lng)*o);return 63710088e-1*Math.acos(Math.min(y,1))},Rr.prototype.toBounds=function(r){r===void 0&&(r=0);var o=360*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new yi(new Rr(this.lng-u,this.lat-o),new Rr(this.lng+u,this.lat+o))},Rr.convert=function(r){if(r instanceof Rr)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Rr(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Rr(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var a0=2*Math.PI*63710088e-1;function um(r){return a0*Math.cos(r*Math.PI/180)}function ay(r){return(180+r)/360}function s0(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function l0(r,o){return r/um(o)}function sy(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var qc=function(r,o,u){u===void 0&&(u=0),this.x=+r,this.y=+o,this.z=+u};qc.fromLngLat=function(r,o){o===void 0&&(o=0);var u=Rr.convert(r);return new qc(ay(u.lng),s0(u.lat),l0(o,u.lat))},qc.prototype.toLngLat=function(){return new Rr(360*this.x-180,sy(this.y))},qc.prototype.toAltitude=function(){return this.z*um(sy(this.y))},qc.prototype.meterInMercatorCoordinateUnits=function(){return 1/a0*(r=sy(this.y),1/Math.cos(r*Math.PI/180));var r};var Hc=function(r,o,u){this.z=r,this.x=o,this.y=u,this.key=Mh(0,r,r,o,u)};Hc.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},Hc.prototype.url=function(r,o){var u,d,y,x,S,T=(d=this.y,y=this.z,x=o0(256*(u=this.x),256*(d=Math.pow(2,y)-d-1),y),S=o0(256*(u+1),256*(d+1),y),x[0]+","+x[1]+","+S[0]+","+S[1]),M=function(z,$,j){for(var Q,ee="",pe=z;pe>0;pe--)ee+=($&(Q=1<<pe-1)?1:0)+(j&Q?2:0);return ee}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",M).replace("{bbox-epsg-3857}",T)},Hc.prototype.getTilePoint=function(r){var o=Math.pow(2,this.z);return new C(8192*(r.x*o-this.x),8192*(r.y*o-this.y))},Hc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var u0=function(r,o){this.wrap=r,this.canonical=o,this.key=Mh(r,o.z,o.z,o.x,o.y)},vi=function(r,o,u,d,y){this.overscaledZ=r,this.wrap=o,this.canonical=new Hc(u,+d,+y),this.key=Mh(o,r,u,d,y)};function Mh(r,o,u,d,y){(r*=2)<0&&(r=-1*r-1);var x=1<<u;return(x*x*r+x*y+d).toString(36)+u.toString(36)+o.toString(36)}vi.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},vi.prototype.scaledTo=function(r){var o=this.canonical.z-r;return r>this.canonical.z?new vi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vi(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)},vi.prototype.calculateScaledKey=function(r,o){var u=this.canonical.z-r;return r>this.canonical.z?Mh(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):Mh(this.wrap*+o,r,r,this.canonical.x>>u,this.canonical.y>>u)},vi.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o},vi.prototype.children=function(r){if(this.overscaledZ>=r)return[new vi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var o=this.canonical.z+1,u=2*this.canonical.x,d=2*this.canonical.y;return[new vi(o,this.wrap,o,u,d),new vi(o,this.wrap,o,u+1,d),new vi(o,this.wrap,o,u,d+1),new vi(o,this.wrap,o,u+1,d+1)]},vi.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},vi.prototype.wrapped=function(){return new vi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},vi.prototype.unwrapTo=function(r){return new vi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},vi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},vi.prototype.toUnwrapped=function(){return new u0(this.wrap,this.canonical)},vi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},vi.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new qc(r.x-this.wrap,r.y))},At("CanonicalTileID",Hc),At("OverscaledTileID",vi,{omit:["posMatrix"]});var bl=function(r,o,u){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Ye('"'+u+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=o.height;var d=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=u||"mapbox";for(var y=0;y<d;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(d,y)]=this.data[this._idx(d-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,d)]=this.data[this._idx(y,d-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(d,-1)]=this.data[this._idx(d-1,0)],this.data[this._idx(-1,d)]=this.data[this._idx(0,d-1)],this.data[this._idx(d,d)]=this.data[this._idx(d-1,d-1)]};bl.prototype.get=function(r,o){var u=new Uint8Array(this.data.buffer),d=4*this._idx(r,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(u[d],u[d+1],u[d+2])},bl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},bl.prototype._idx=function(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)},bl.prototype._unpackMapbox=function(r,o,u){return(256*r*256+256*o+u)/10-1e4},bl.prototype._unpackTerrarium=function(r,o,u){return 256*r+o+u/256-32768},bl.prototype.getPixels=function(){return new Vo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},bl.prototype.backfillBorder=function(r,o,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var d=o*this.dim,y=o*this.dim+this.dim,x=u*this.dim,S=u*this.dim+this.dim;switch(o){case-1:d=y-1;break;case 1:y=d+1}switch(u){case-1:x=S-1;break;case 1:S=x+1}for(var T=-o*this.dim,M=-u*this.dim,z=x;z<S;z++)for(var $=d;$<y;$++)this.data[this._idx($,z)]=r.data[this._idx($+T,z+M)]},At("DEMData",bl);var cm=function(r){this._stringToNumber={},this._numberToString=[];for(var o=0;o<r.length;o++){var u=r[o];this._stringToNumber[u]=o,this._numberToString[o]=u}};cm.prototype.encode=function(r){return this._stringToNumber[r]},cm.prototype.decode=function(r){return this._numberToString[r]};var Gc=function(r,o,u,d,y){this.type="Feature",this._vectorTileFeature=r,r._z=o,r._x=u,r._y=d,this.properties=r.properties,this.id=y},ly={geometry:{configurable:!0}};ly.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ly.geometry.set=function(r){this._geometry=r},Gc.prototype.toJSON=function(){var r={geometry:this.geometry};for(var o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(r[o]=this[o]);return r},Object.defineProperties(Gc.prototype,ly);var lp=function(){this.state={},this.stateChanges={},this.deletedStates={}};lp.prototype.updateState=function(r,o,u){var d=String(o);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][d]=this.stateChanges[r][d]||{},U(this.stateChanges[r][d],u),this.deletedStates[r]===null)for(var y in this.deletedStates[r]={},this.state[r])y!==d&&(this.deletedStates[r][y]=null);else if(this.deletedStates[r]&&this.deletedStates[r][d]===null)for(var x in this.deletedStates[r][d]={},this.state[r][d])u[x]||(this.deletedStates[r][d][x]=null);else for(var S in u)this.deletedStates[r]&&this.deletedStates[r][d]&&this.deletedStates[r][d][S]===null&&delete this.deletedStates[r][d][S]},lp.prototype.removeFeatureState=function(r,o,u){if(this.deletedStates[r]!==null){var d=String(o);if(this.deletedStates[r]=this.deletedStates[r]||{},u&&o!==void 0)this.deletedStates[r][d]!==null&&(this.deletedStates[r][d]=this.deletedStates[r][d]||{},this.deletedStates[r][d][u]=null);else if(o!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][d])for(u in this.deletedStates[r][d]={},this.stateChanges[r][d])this.deletedStates[r][d][u]=null;else this.deletedStates[r][d]=null;else this.deletedStates[r]=null}},lp.prototype.getState=function(r,o){var u=String(o),d=U({},(this.state[r]||{})[u],(this.stateChanges[r]||{})[u]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var y=this.deletedStates[r][o];if(y===null)return{};for(var x in y)delete d[x]}return d},lp.prototype.initializeTileState=function(r,o){r.setFeatureState(this.state,o)},lp.prototype.coalesceChanges=function(r,o){var u={};for(var d in this.stateChanges){this.state[d]=this.state[d]||{};var y={};for(var x in this.stateChanges[d])this.state[d][x]||(this.state[d][x]={}),U(this.state[d][x],this.stateChanges[d][x]),y[x]=this.state[d][x];u[d]=y}for(var S in this.deletedStates){this.state[S]=this.state[S]||{};var T={};if(this.deletedStates[S]===null)for(var M in this.state[S])T[M]={},this.state[S][M]={};else for(var z in this.deletedStates[S]){if(this.deletedStates[S][z]===null)this.state[S][z]={};else for(var $=0,j=Object.keys(this.deletedStates[S][z]);$<j.length;$+=1)delete this.state[S][z][j[$]];T[z]=this.state[S][z]}u[S]=u[S]||{},U(u[S],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(var Q in r)r[Q].setFeatureState(u,o)};var uu=function(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Wi(8192,16,0),this.grid3D=new Wi(8192,16,0),this.featureIndexArray=new te,this.promoteId=o};function c0(r,o,u,d,y){return Me(r,function(x,S){var T=o instanceof Ta?o.get(S):null;return T&&T.evaluate?T.evaluate(u,d,y):T})}function f0(r){for(var o=1/0,u=1/0,d=-1/0,y=-1/0,x=0,S=r;x<S.length;x+=1){var T=S[x];o=Math.min(o,T.x),u=Math.min(u,T.y),d=Math.max(d,T.x),y=Math.max(y,T.y)}return{minX:o,minY:u,maxX:d,maxY:y}}function a2(r,o){return o-r}uu.prototype.insert=function(r,o,u,d,y,x){var S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,d,y);for(var T=x?this.grid3D:this.grid,M=0;M<o.length;M++){for(var z=o[M],$=[1/0,1/0,-1/0,-1/0],j=0;j<z.length;j++){var Q=z[j];$[0]=Math.min($[0],Q.x),$[1]=Math.min($[1],Q.y),$[2]=Math.max($[2],Q.x),$[3]=Math.max($[3],Q.y)}$[0]<8192&&$[1]<8192&&$[2]>=0&&$[3]>=0&&T.insert(S,$[0],$[1],$[2],$[3])}},uu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new xl.VectorTile(new Nc(this.rawTileData)).layers,this.sourceLayerCoder=new cm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},uu.prototype.query=function(r,o,u,d){var y=this;this.loadVTLayers();for(var x=r.params||{},S=8192/r.tileSize/r.scale,T=Fs(x.filter),M=r.queryGeometry,z=r.queryPadding*S,$=f0(M),j=this.grid.query($.minX-z,$.minY-z,$.maxX+z,$.maxY+z),Q=f0(r.cameraQueryGeometry),ee=this.grid3D.query(Q.minX-z,Q.minY-z,Q.maxX+z,Q.maxY+z,function(Ve,qe,et,dt){return function(_t,Nt,wt,Gt,Et){for(var vn=0,Jt=_t;vn<Jt.length;vn+=1){var $t=Jt[vn];if(Nt<=$t.x&&wt<=$t.y&&Gt>=$t.x&&Et>=$t.y)return!0}var En=[new C(Nt,wt),new C(Nt,Et),new C(Gt,Et),new C(Gt,wt)];if(_t.length>2){for(var pn=0,$n=En;pn<$n.length;pn+=1)if(ea(_t,$n[pn]))return!0}for(var Zt=0;Zt<_t.length-1;Zt++)if($u(_t[Zt],_t[Zt+1],En))return!0;return!1}(r.cameraQueryGeometry,Ve-z,qe-z,et+z,dt+z)}),pe=0,he=ee;pe<he.length;pe+=1)j.push(he[pe]);j.sort(a2);for(var Pe,we={},De=function(Ve){var qe=j[Ve];if(qe!==Pe){Pe=qe;var et=y.featureIndexArray.get(qe),dt=null;y.loadMatchingFeature(we,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,T,x.layers,x.availableImages,o,u,d,function(_t,Nt,wt){return dt||(dt=kr(_t)),Nt.queryIntersectsFeature(M,_t,wt,dt,y.z,r.transform,S,r.pixelPosMatrix)})}},Be=0;Be<j.length;Be++)De(Be);return we},uu.prototype.loadMatchingFeature=function(r,o,u,d,y,x,S,T,M,z,$){var j=this.bucketLayerIDs[o];if(!x||function(_t,Nt){for(var wt=0;wt<_t.length;wt++)if(Nt.indexOf(_t[wt])>=0)return!0;return!1}(x,j)){var Q=this.sourceLayerCoder.decode(u),ee=this.vtLayers[Q].feature(d);if(y.needGeometry){var pe=Qi(ee,!0);if(!y.filter(new xn(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!y.filter(new xn(this.tileID.overscaledZ),ee))return;for(var he=this.getId(ee,Q),Pe=0;Pe<j.length;Pe++){var we=j[Pe];if(!(x&&x.indexOf(we)<0)){var De=T[we];if(De){var Be={};he!==void 0&&z&&(Be=z.getState(De.sourceLayer||"_geojsonTileLayer",he));var Ve=U({},M[we]);Ve.paint=c0(Ve.paint,De.paint,ee,Be,S),Ve.layout=c0(Ve.layout,De.layout,ee,Be,S);var qe=!$||$(ee,De,Be);if(qe){var et=new Gc(ee,this.z,this.x,this.y,he);et.layer=Ve;var dt=r[we];dt===void 0&&(dt=r[we]=[]),dt.push({featureIndex:d,feature:et,intersectionZ:qe})}}}}}},uu.prototype.lookupSymbolFeatures=function(r,o,u,d,y,x,S,T){var M={};this.loadVTLayers();for(var z=Fs(y),$=0,j=r;$<j.length;$+=1)this.loadMatchingFeature(M,u,d,j[$],z,x,S,T,o);return M},uu.prototype.hasLayer=function(r){for(var o=0,u=this.bucketLayerIDs;o<u.length;o+=1)for(var d=0,y=u[o];d<y.length;d+=1)if(r===y[d])return!0;return!1},uu.prototype.getId=function(r,o){var u=r.id;return this.promoteId&&typeof(u=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]])=="boolean"&&(u=Number(u)),u},At("FeatureIndex",uu,{omit:["rawTileData","sourceLayerCoder"]});var zi=function(r,o){this.tileID=r,this.uid=Y(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};zi.prototype.registerFadeDuration=function(r){var o=r+this.timeAdded;o<cn.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)},zi.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},zi.prototype.loadVectorData=function(r,o,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var d in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(z,$){var j={};if(!$)return j;for(var Q=function(){var he=pe[ee],Pe=he.layerIds.map(function(Be){return $.getLayer(Be)}).filter(Boolean);if(Pe.length!==0){he.layers=Pe,he.stateDependentLayerIds&&(he.stateDependentLayers=he.stateDependentLayerIds.map(function(Be){return Pe.filter(function(Ve){return Ve.id===Be})[0]}));for(var we=0,De=Pe;we<De.length;we+=1)j[De[we].id]=he}},ee=0,pe=z;ee<pe.length;ee+=1)Q();return j}(r.buckets,o.style),this.hasSymbolBuckets=!1,this.buckets){var y=this.buckets[d];if(y instanceof cr){if(this.hasSymbolBuckets=!0,!u)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var x in this.buckets){var S=this.buckets[x];if(S instanceof cr&&S.hasRTLText){this.hasRTLText=!0,In.isLoading()||In.isLoaded()||Ya()!=="deferred"||jd();break}}for(var T in this.queryPadding=0,this.buckets){var M=this.buckets[T];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(T).queryRadius(M))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new f},zi.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},zi.prototype.getBucket=function(r){return this.buckets[r.id]},zi.prototype.upload=function(r){for(var o in this.buckets){var u=this.buckets[o];u.uploadPending()&&u.upload(r)}var d=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Vc(r,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Vc(r,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)},zi.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},zi.prototype.queryRenderedFeatures=function(r,o,u,d,y,x,S,T,M,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:y,scale:x,tileSize:this.tileSize,pixelPosMatrix:z,transform:T,params:S,queryPadding:this.queryPadding*M},r,o,u):{}},zi.prototype.querySourceFeatures=function(r,o){var u=this.latestFeatureIndex;if(u&&u.rawTileData){var d=u.loadVTLayers(),y=o?o.sourceLayer:"",x=d._geojsonTileLayer||d[y];if(x)for(var S=Fs(o&&o.filter),T=this.tileID.canonical,M=T.z,z=T.x,$=T.y,j={z:M,x:z,y:$},Q=0;Q<x.length;Q++){var ee=x.feature(Q);if(S.needGeometry){var pe=Qi(ee,!0);if(!S.filter(new xn(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!S.filter(new xn(this.tileID.overscaledZ),ee))continue;var he=u.getId(ee,y),Pe=new Gc(ee,M,z,$,he);Pe.tile=j,r.push(Pe)}}},zi.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},zi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},zi.prototype.setExpiryData=function(r){var o=this.expirationTime;if(r.cacheControl){var u=qt(r.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var d=Date.now(),y=!1;if(this.expirationTime>d)y=!1;else if(o)if(this.expirationTime<o)y=!0;else{var x=this.expirationTime-o;x?this.expirationTime=d+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},zi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},zi.prototype.setFeatureState=function(r,o){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var u=this.latestFeatureIndex.loadVTLayers();for(var d in this.buckets)if(o.style.hasLayer(d)){var y=this.buckets[d],x=y.layers[0].sourceLayer||"_geojsonTileLayer",S=u[x],T=r[x];if(S&&T&&Object.keys(T).length!==0){y.update(T,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});var M=o&&o.style&&o.style.getLayer(d);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(y)))}}}},zi.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},zi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<cn.now()},zi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},zi.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=cn.now()+r},zi.prototype.setDependencies=function(r,o){for(var u={},d=0,y=o;d<y.length;d+=1)u[y[d]]=!0;this.dependencies[r]=u},zi.prototype.hasDependency=function(r,o){for(var u=0,d=r;u<d.length;u+=1){var y=this.dependencies[d[u]];if(y){for(var x=0,S=o;x<S.length;x+=1)if(y[S[x]])return!0}}return!1};var Zu=I.performance,p0=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},Zu.mark(this._marks.start)};p0.prototype.finish=function(){Zu.mark(this._marks.end);var r=Zu.getEntriesByName(this._marks.measure);return r.length===0&&(Zu.measure(this._marks.measure,this._marks.start,this._marks.end),r=Zu.getEntriesByName(this._marks.measure),Zu.clearMarks(this._marks.start),Zu.clearMarks(this._marks.end),Zu.clearMeasures(this._marks.measure)),r},a.Actor=sp,a.AlphaImage=Dc,a.CanonicalTileID=Hc,a.CollisionBoxArray=f,a.Color=Fn,a.DEMData=bl,a.DataConstantProperty=St,a.DictionaryCoder=cm,a.EXTENT=8192,a.ErrorEvent=Te,a.EvaluationParameters=xn,a.Event=Ae,a.Evented=Ee,a.FeatureIndex=uu,a.FillBucket=gs,a.FillExtrusionBucket=Fa,a.ImageAtlas=np,a.ImagePosition=Wu,a.LineBucket=So,a.LngLat=Rr,a.LngLatBounds=yi,a.MercatorCoordinate=qc,a.ONE_EM=24,a.OverscaledTileID=vi,a.Point=C,a.Point$1=C,a.Properties=Yo,a.Protobuf=Nc,a.RGBAImage=Vo,a.RequestManager=Ur,a.RequestPerformance=p0,a.ResourceType=Vn,a.SegmentVector=ne,a.SourceFeatureState=lp,a.StructArrayLayout1ui2=La,a.StructArrayLayout2f1f2i16=gh,a.StructArrayLayout2i4=re,a.StructArrayLayout3ui6=da,a.StructArrayLayout4i8=Jo,a.SymbolBucket=cr,a.Texture=Vc,a.Tile=zi,a.Transitionable=Qo,a.Uniform1f=ct,a.Uniform1i=pt,a.Uniform2f=bt,a.Uniform3f=Bt,a.Uniform4f=Xt,a.UniformColor=Wt,a.UniformMatrix4f=Pt,a.UnwrappedTileID=u0,a.ValidationError=be,a.WritingMode=Da,a.ZoomHistory=bo,a.add=function(r,o,u){return r[0]=o[0]+u[0],r[1]=o[1]+u[1],r[2]=o[2]+u[2],r},a.addDynamicAttributes=iy,a.asyncAll=function(r,o,u){if(!r.length)return u(null,[]);var d=r.length,y=new Array(r.length),x=null;r.forEach(function(S,T){o(S,function(M,z){M&&(x=M),y[T]=z,--d==0&&u(x,y)})})},a.bezier=D,a.bindAll=ce,a.browser=cn,a.cacheEntryPossiblyAdded=function(r){++_r>bn&&(r.getActor().send("enforceCacheSizeLimit",Tt),_r=0)},a.clamp=H,a.clearTileCache=function(r){var o=I.caches.delete("mapbox-tiles");r&&o.catch(r).then(function(){return r()})},a.clipLine=K_,a.clone=function(r){var o=new Qr(16);return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.clone$1=Le,a.clone$2=function(r){var o=new Qr(3);return o[0]=r[0],o[1]=r[1],o[2]=r[2],o},a.collisionCircleLayout=Yg,a.config=sn,a.create=function(){var r=new Qr(16);return Qr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=function(){var r=new Qr(9);return Qr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},a.create$2=function(){var r=new Qr(4);return Qr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},a.createCommonjsModule=g,a.createExpression=Uf,a.createLayout=ti,a.createStyleLayer=function(r){return r.type==="custom"?new i2(r):new o2[r.type](r)},a.cross=function(r,o,u){var d=o[0],y=o[1],x=o[2],S=u[0],T=u[1],M=u[2];return r[0]=y*M-x*T,r[1]=x*S-d*M,r[2]=d*T-y*S,r},a.deepEqual=function r(o,u){if(Array.isArray(o)){if(!Array.isArray(u)||o.length!==u.length)return!1;for(var d=0;d<o.length;d++)if(!r(o[d],u[d]))return!1;return!0}if(typeof o=="object"&&o!==null&&u!==null){if(typeof u!="object"||Object.keys(o).length!==Object.keys(u).length)return!1;for(var y in o)if(!r(o[y],u[y]))return!1;return!0}return o===u},a.dot=function(r,o){return r[0]*o[0]+r[1]*o[1]+r[2]*o[2]},a.dot$1=function(r,o){return r[0]*o[0]+r[1]*o[1]+r[2]*o[2]+r[3]*o[3]},a.ease=B,a.emitValidationErrors=kc,a.endsWith=xe,a.enforceCacheSizeLimit=function(r){Jn(),Oi&&Oi.then(function(o){o.keys().then(function(u){for(var d=0;d<u.length-r;d++)o.delete(u[d])})})},a.evaluateSizeForFeature=Ku,a.evaluateSizeForZoom=j_,a.evaluateVariableOffset=Q_,a.evented=Wf,a.extend=U,a.featureFilter=Fs,a.filterObject=$e,a.fromRotation=function(r,o){var u=Math.sin(o),d=Math.cos(o);return r[0]=d,r[1]=u,r[2]=0,r[3]=-u,r[4]=d,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.getAnchorAlignment=im,a.getAnchorJustification=ry,a.getArrayBuffer=or,a.getImage=J,a.getJSON=function(r,o){return ei(U(r,{type:"json"}),o)},a.getRTLTextPluginStatus=Ya,a.getReferrer=Mr,a.getVideo=function(r,o){var u,d,y=I.document.createElement("video");y.muted=!0,y.onloadstart=function(){o(null,y)};for(var x=0;x<r.length;x++){var S=I.document.createElement("source");u=r[x],d=void 0,(d=I.document.createElement("a")).href=u,(d.protocol!==I.document.location.protocol||d.host!==I.document.location.host)&&(y.crossOrigin="Anonymous"),S.src=r[x],y.appendChild(S)}return{cancel:function(){}}},a.identity=uo,a.invert=function(r,o){var u=o[0],d=o[1],y=o[2],x=o[3],S=o[4],T=o[5],M=o[6],z=o[7],$=o[8],j=o[9],Q=o[10],ee=o[11],pe=o[12],he=o[13],Pe=o[14],we=o[15],De=u*T-d*S,Be=u*M-y*S,Ve=u*z-x*S,qe=d*M-y*T,et=d*z-x*T,dt=y*z-x*M,_t=$*he-j*pe,Nt=$*Pe-Q*pe,wt=$*we-ee*pe,Gt=j*Pe-Q*he,Et=j*we-ee*he,vn=Q*we-ee*Pe,Jt=De*vn-Be*Et+Ve*Gt+qe*wt-et*Nt+dt*_t;return Jt?(r[0]=(T*vn-M*Et+z*Gt)*(Jt=1/Jt),r[1]=(y*Et-d*vn-x*Gt)*Jt,r[2]=(he*dt-Pe*et+we*qe)*Jt,r[3]=(Q*et-j*dt-ee*qe)*Jt,r[4]=(M*wt-S*vn-z*Nt)*Jt,r[5]=(u*vn-y*wt+x*Nt)*Jt,r[6]=(Pe*Ve-pe*dt-we*Be)*Jt,r[7]=($*dt-Q*Ve+ee*Be)*Jt,r[8]=(S*Et-T*wt+z*_t)*Jt,r[9]=(d*wt-u*Et-x*_t)*Jt,r[10]=(pe*et-he*Ve+we*De)*Jt,r[11]=(j*Ve-$*et-ee*De)*Jt,r[12]=(T*Nt-S*Gt-M*_t)*Jt,r[13]=(u*Gt-d*Nt+y*_t)*Jt,r[14]=(he*Be-pe*qe-Pe*De)*Jt,r[15]=($*qe-j*Be+Q*De)*Jt,r):null},a.isChar=It,a.isMapboxURL=go,a.keysDifference=function(r,o){var u=[];for(var d in r)d in o||u.push(d);return u},a.makeRequest=ei,a.mapObject=Me,a.mercatorXfromLng=ay,a.mercatorYfromLat=s0,a.mercatorZfromAltitude=l0,a.mul=xh,a.multiply=nu,a.mvt=xl,a.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},a.normalize=function(r,o){var u=o[0],d=o[1],y=o[2],x=u*u+d*d+y*y;return x>0&&(x=1/Math.sqrt(x)),r[0]=o[0]*x,r[1]=o[1]*x,r[2]=o[2]*x,r},a.number=fi,a.offscreenCanvasSupported=Sr,a.ortho=function(r,o,u,d,y,x,S){var T=1/(o-u),M=1/(d-y),z=1/(x-S);return r[0]=-2*T,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*M,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*z,r[11]=0,r[12]=(o+u)*T,r[13]=(y+d)*M,r[14]=(S+x)*z,r[15]=1,r},a.parseGlyphPBF=function(r){return new Nc(r).readFields(Vw,[])},a.pbf=Nc,a.performSymbolLayout=function(r,o,u,d,y,x,S){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var T=r.layers[0].layout,M=r.layers[0]._unevaluatedLayout._values,z={};if(r.textSizeData.kind==="composite"){var $=r.textSizeData,j=$.maxZoom;z.compositeTextSizes=[M["text-size"].possiblyEvaluate(new xn($.minZoom),S),M["text-size"].possiblyEvaluate(new xn(j),S)]}if(r.iconSizeData.kind==="composite"){var Q=r.iconSizeData,ee=Q.maxZoom;z.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new xn(Q.minZoom),S),M["icon-size"].possiblyEvaluate(new xn(ee),S)]}z.layoutTextSize=M["text-size"].possiblyEvaluate(new xn(r.zoom+1),S),z.layoutIconSize=M["icon-size"].possiblyEvaluate(new xn(r.zoom+1),S),z.textMaxSize=M["text-size"].possiblyEvaluate(new xn(18));for(var pe=24*T.get("text-line-height"),he=T.get("text-rotation-alignment")==="map"&&T.get("symbol-placement")!=="point",Pe=T.get("text-keep-upright"),we=T.get("text-size"),De=function(){var qe=Ve[Be],et=T.get("text-font").evaluate(qe,{},S).join(","),dt=we.evaluate(qe,{},S),_t=z.layoutTextSize.evaluate(qe,{},S),Nt=z.layoutIconSize.evaluate(qe,{},S),wt={horizontal:{},vertical:void 0},Gt=qe.text,Et=[0,0];if(Gt){var vn=Gt.toString(),Jt=24*T.get("text-letter-spacing").evaluate(qe,{},S),$t=function(Ln){for(var gr=0,rr=Ln;gr<rr.length;gr+=1)if(Gn=rr[gr].charCodeAt(0),It.Arabic(Gn)||It["Arabic Supplement"](Gn)||It["Arabic Extended-A"](Gn)||It["Arabic Presentation Forms-A"](Gn)||It["Arabic Presentation Forms-B"](Gn))return!1;var Gn;return!0}(vn)?Jt:0,En=T.get("text-anchor").evaluate(qe,{},S),pn=T.get("text-variable-anchor");if(!pn){var $n=T.get("text-radial-offset").evaluate(qe,{},S);Et=$n?Q_(En,[24*$n,ny]):T.get("text-offset").evaluate(qe,{},S).map(function(Ln){return 24*Ln})}var Zt=he?"center":T.get("text-justify").evaluate(qe,{},S),Xn=T.get("symbol-placement"),br=Xn==="point"?24*T.get("text-max-width").evaluate(qe,{},S):0,Fr=function(){r.allowVerticalPlacement&&Ac(vn)&&(wt.vertical=nm(Gt,o,u,y,et,br,pe,En,"left",$t,Et,Da.vertical,!0,Xn,_t,dt))};if(!he&&pn){for(var Vr=Zt==="auto"?pn.map(function(Ln){return ry(Ln)}):[Zt],Dr=!1,Nr=0;Nr<Vr.length;Nr++){var _i=Vr[Nr];if(!wt.horizontal[_i])if(Dr)wt.horizontal[_i]=wt.horizontal[0];else{var Ai=nm(Gt,o,u,y,et,br,pe,"center",_i,$t,Et,Da.horizontal,!1,Xn,_t,dt);Ai&&(wt.horizontal[_i]=Ai,Dr=Ai.positionedLines.length===1)}}Fr()}else{Zt==="auto"&&(Zt=ry(En));var Eo=nm(Gt,o,u,y,et,br,pe,En,Zt,$t,Et,Da.horizontal,!1,Xn,_t,dt);Eo&&(wt.horizontal[Zt]=Eo),Fr(),Ac(vn)&&he&&Pe&&(wt.vertical=nm(Gt,o,u,y,et,br,pe,En,Zt,$t,Et,Da.vertical,!1,Xn,_t,dt))}}var Bi=void 0,ko=!1;if(qe.icon&&qe.icon.name){var ii=d[qe.icon.name];ii&&(Bi=function(Ln,gr,rr){var Gn=im(rr),qo=gr[0]-Ln.displaySize[0]*Gn.horizontalAlign,co=gr[1]-Ln.displaySize[1]*Gn.verticalAlign;return{image:Ln,top:co,bottom:co+Ln.displaySize[1],left:qo,right:qo+Ln.displaySize[0]}}(y[qe.icon.name],T.get("icon-offset").evaluate(qe,{},S),T.get("icon-anchor").evaluate(qe,{},S)),ko=ii.sdf,r.sdfIcons===void 0?r.sdfIcons=ii.sdf:r.sdfIcons!==ii.sdf&&Ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ii.pixelRatio!==r.pixelRatio||T.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var Ni=J_(wt.horizontal)||wt.vertical;r.iconsInText=!!Ni&&Ni.iconsInText,(Ni||Bi)&&function(Ln,gr,rr,Gn,qo,co,Wn,hi,fo,Mn,_n){var za=co.textMaxSize.evaluate(gr,{});za===void 0&&(za=Wn);var xi,Rn=Ln.layers[0].layout,wl=Rn.get("icon-offset").evaluate(gr,{},_n),po=J_(rr.horizontal),up=Wn/24,Wc=Ln.tilePixelRatio*up,cp=Ln.tilePixelRatio*za/24,cu=Ln.tilePixelRatio*hi,fp=Ln.tilePixelRatio*Rn.get("symbol-spacing"),pp=Rn.get("text-padding")*Ln.tilePixelRatio,hp=Rn.get("icon-padding")*Ln.tilePixelRatio,es=Rn.get("text-max-angle")/180*Math.PI,Rh=Rn.get("text-rotation-alignment")==="map"&&Rn.get("symbol-placement")!=="point",Kc=Rn.get("icon-rotation-alignment")==="map"&&Rn.get("symbol-placement")!=="point",Ar=Rn.get("symbol-placement"),Jr=fp/2,Zc=Rn.get("icon-text-fit");Gn&&Zc!=="none"&&(Ln.allowVerticalPlacement&&rr.vertical&&(xi=Ph(Gn,rr.vertical,Zc,Rn.get("icon-text-fit-padding"),wl,up)),po&&(Gn=Ph(Gn,po,Zc,Rn.get("icon-text-fit-padding"),wl,up)));var Xu=function(xs,gp){gp.x<0||gp.x>=8192||gp.y<0||gp.y>=8192||function(oi,Kn,s2,hu,yp,h0,dm,Sl,mm,jh,gm,ym,fy,d0,Vh,m0,g0,y0,vm,v0,ia,_m,_0,Cl,Ao){var va,Yc,vp,_p,Jc,xp=oi.addToLineVertexArray(Kn,s2),x0=0,b0=0,py=0,w0=0,hy=-1,dy=-1,El={},my=Se(""),gy=0,yy=0;if(Sl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(gy=(va=Sl.layout.get("text-offset").evaluate(ia,{},Cl).map(function(Gh){return 24*Gh}))[0],yy=va[1]):(gy=24*Sl.layout.get("text-radial-offset").evaluate(ia,{},Cl),yy=ny),oi.allowVerticalPlacement&&hu.vertical){var S0=Sl.layout.get("text-rotate").evaluate(ia,{},Cl)+90;_p=new Ih(mm,Kn,jh,gm,ym,hu.vertical,fy,d0,Vh,S0),dm&&(Jc=new Ih(mm,Kn,jh,gm,ym,dm,g0,y0,Vh,S0))}if(yp){var vy=Sl.layout.get("icon-rotate").evaluate(ia,{}),ef=Sl.layout.get("icon-text-fit")!=="none",C0=Z_(yp,vy,_0,ef),_y=dm?Z_(dm,vy,_0,ef):void 0;vp=new Ih(mm,Kn,jh,gm,ym,yp,g0,y0,!1,vy),x0=4*C0.length;var E0=oi.iconSizeData,qh=null;E0.kind==="source"?(qh=[128*Sl.layout.get("icon-size").evaluate(ia,{})])[0]>32640&&Ye(oi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):E0.kind==="composite"&&((qh=[128*_m.compositeIconSizes[0].evaluate(ia,{},Cl),128*_m.compositeIconSizes[1].evaluate(ia,{},Cl)])[0]>32640||qh[1]>32640)&&Ye(oi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),oi.addSymbols(oi.icon,C0,qh,v0,vm,ia,!1,Kn,xp.lineStartIndex,xp.lineLength,-1,Cl),hy=oi.icon.placedSymbolArray.length-1,_y&&(b0=4*_y.length,oi.addSymbols(oi.icon,_y,qh,v0,vm,ia,Da.vertical,Kn,xp.lineStartIndex,xp.lineLength,-1,Cl),dy=oi.icon.placedSymbolArray.length-1)}for(var k0 in hu.horizontal){var Hh=hu.horizontal[k0];if(!Yc){my=Se(Hh.text);var A0=Sl.layout.get("text-rotate").evaluate(ia,{},Cl);Yc=new Ih(mm,Kn,jh,gm,ym,Hh,fy,d0,Vh,A0)}var P0=Hh.positionedLines.length===1;if(py+=Y_(oi,Kn,Hh,h0,Sl,Vh,ia,m0,xp,hu.vertical?Da.horizontal:Da.horizontalOnly,P0?Object.keys(hu.horizontal):[k0],El,hy,_m,Cl),P0)break}hu.vertical&&(w0+=Y_(oi,Kn,hu.vertical,h0,Sl,Vh,ia,m0,xp,Da.vertical,["vertical"],El,dy,_m,Cl));var l2=Yc?Yc.boxStartIndex:oi.collisionBoxArray.length,u2=Yc?Yc.boxEndIndex:oi.collisionBoxArray.length,c2=_p?_p.boxStartIndex:oi.collisionBoxArray.length,f2=_p?_p.boxEndIndex:oi.collisionBoxArray.length,p2=vp?vp.boxStartIndex:oi.collisionBoxArray.length,h2=vp?vp.boxEndIndex:oi.collisionBoxArray.length,d2=Jc?Jc.boxStartIndex:oi.collisionBoxArray.length,m2=Jc?Jc.boxEndIndex:oi.collisionBoxArray.length,kl=-1,xm=function(Gh,I0){return Gh&&Gh.circleDiameter?Math.max(Gh.circleDiameter,I0):I0};kl=xm(Yc,kl),kl=xm(_p,kl),kl=xm(vp,kl);var T0=(kl=xm(Jc,kl))>-1?1:0;T0&&(kl*=Ao/24),oi.glyphOffsetArray.length>=cr.MAX_GLYPHS&&Ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ia.sortKey!==void 0&&oi.addToSortKeyRanges(oi.symbolInstances.length,ia.sortKey),oi.symbolInstances.emplaceBack(Kn.x,Kn.y,El.right>=0?El.right:-1,El.center>=0?El.center:-1,El.left>=0?El.left:-1,El.vertical||-1,hy,dy,my,l2,u2,c2,f2,p2,h2,d2,m2,jh,py,w0,x0,b0,T0,0,fy,gy,yy,kl)}(Ln,gp,xs,rr,Gn,qo,xi,Ln.layers[0],Ln.collisionBoxArray,gr.index,gr.sourceLayerIndex,Ln.index,Wc,pp,Rh,fo,cu,hp,Kc,wl,gr,co,Mn,_n,Wn)};if(Ar==="line")for(var dp=0,fm=K_(gr.geometry,0,0,8192,8192);dp<fm.length;dp+=1)for(var pm=fm[dp],Fh=0,Dh=Gw(pm,fp,es,rr.vertical||po,Gn,24,cp,Ln.overscaling,8192);Fh<Dh.length;Fh+=1){var zh=Dh[Fh];po&&Xw(Ln,po.text,Jr,zh)||Xu(pm,zh)}else if(Ar==="line-center")for(var fu=0,Xc=gr.geometry;fu<Xc.length;fu+=1){var Bh=Xc[fu];if(Bh.length>1){var Nh=Hw(Bh,es,rr.vertical||po,Gn,24,cp);Nh&&Xu(Bh,Nh)}}else if(gr.type==="Polygon")for(var pu=0,ra=qg(gr.geometry,0);pu<ra.length;pu+=1){var js=ra[pu],$h=Kw(js,16);Xu(js[0],new $c($h.x,$h.y,0))}else if(gr.type==="LineString")for(var Qc=0,Uh=gr.geometry;Qc<Uh.length;Qc+=1){var mp=Uh[Qc];Xu(mp,new $c(mp[0].x,mp[0].y,0))}else if(gr.type==="Point")for(var uy=0,cy=gr.geometry;uy<cy.length;uy+=1)for(var Vs=0,Un=cy[uy];Vs<Un.length;Vs+=1){var hm=Un[Vs];Xu([hm],new $c(hm.x,hm.y,0))}}(r,qe,wt,Bi,d,z,_t,Nt,Et,ko,S)},Be=0,Ve=r.features;Be<Ve.length;Be+=1)De();x&&r.generateCollisionDebugBuffers()},a.perspective=function(r,o,u,d,y){var x,S=1/Math.tan(o/2);return r[0]=S/u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,y!=null&&y!==1/0?(r[10]=(y+d)*(x=1/(d-y)),r[14]=2*y*d*x):(r[10]=-1,r[14]=-2*d),r},a.pick=function(r,o){for(var u={},d=0;d<o.length;d++){var y=o[d];y in r&&(u[y]=r[y])}return u},a.plugin=In,a.polygonIntersectsPolygon=wo,a.postMapLoadEvent=nt,a.postTurnstileEvent=ue,a.potpack=B_,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=At,a.registerForPluginStateChange=function(r){return r({pluginStatus:Xi,pluginURL:Qa}),Wf.on("pluginStateChange",r),r},a.renderColorRamp=qd,a.rotate=function(r,o,u){var d=o[0],y=o[1],x=o[2],S=o[3],T=Math.sin(u),M=Math.cos(u);return r[0]=d*M+x*T,r[1]=y*M+S*T,r[2]=d*-T+x*M,r[3]=y*-T+S*M,r},a.rotateX=function(r,o,u){var d=Math.sin(u),y=Math.cos(u),x=o[4],S=o[5],T=o[6],M=o[7],z=o[8],$=o[9],j=o[10],Q=o[11];return o!==r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[4]=x*y+z*d,r[5]=S*y+$*d,r[6]=T*y+j*d,r[7]=M*y+Q*d,r[8]=z*y-x*d,r[9]=$*y-S*d,r[10]=j*y-T*d,r[11]=Q*y-M*d,r},a.rotateZ=function(r,o,u){var d=Math.sin(u),y=Math.cos(u),x=o[0],S=o[1],T=o[2],M=o[3],z=o[4],$=o[5],j=o[6],Q=o[7];return o!==r&&(r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[0]=x*y+z*d,r[1]=S*y+$*d,r[2]=T*y+j*d,r[3]=M*y+Q*d,r[4]=z*y-x*d,r[5]=$*y-S*d,r[6]=j*y-T*d,r[7]=Q*y-M*d,r},a.scale=function(r,o,u){var d=u[0],y=u[1],x=u[2];return r[0]=o[0]*d,r[1]=o[1]*d,r[2]=o[2]*d,r[3]=o[3]*d,r[4]=o[4]*y,r[5]=o[5]*y,r[6]=o[6]*y,r[7]=o[7]*y,r[8]=o[8]*x,r[9]=o[9]*x,r[10]=o[10]*x,r[11]=o[11]*x,r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},a.scale$1=function(r,o,u){return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r[3]=o[3]*u,r},a.scale$2=function(r,o,u){return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r},a.setCacheLimits=function(r,o){Tt=r,bn=o},a.setRTLTextPlugin=function(r,o,u){if(u===void 0&&(u=!1),Xi==="deferred"||Xi==="loading"||Xi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Qa=cn.resolveURL(r),Xi="deferred",dh=o,mh(),u||jd()},a.sphericalToCartesian=function(r){var o=r[0],u=r[1],d=r[2];return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:o*Math.cos(u)*Math.sin(d),y:o*Math.sin(u)*Math.sin(d),z:o*Math.cos(d)}},a.sqrLen=function(r){var o=r[0],u=r[1];return o*o+u*u},a.styleSpec=le,a.sub=function(r,o,u){return r[0]=o[0]-u[0],r[1]=o[1]-u[1],r[2]=o[2]-u[2],r},a.symbolSize=V_,a.transformMat3=function(r,o,u){var d=o[0],y=o[1],x=o[2];return r[0]=d*u[0]+y*u[3]+x*u[6],r[1]=d*u[1]+y*u[4]+x*u[7],r[2]=d*u[2]+y*u[5]+x*u[8],r},a.transformMat4=Mc,a.translate=function(r,o,u){var d,y,x,S,T,M,z,$,j,Q,ee,pe,he=u[0],Pe=u[1],we=u[2];return o===r?(r[12]=o[0]*he+o[4]*Pe+o[8]*we+o[12],r[13]=o[1]*he+o[5]*Pe+o[9]*we+o[13],r[14]=o[2]*he+o[6]*Pe+o[10]*we+o[14],r[15]=o[3]*he+o[7]*Pe+o[11]*we+o[15]):(y=o[1],x=o[2],S=o[3],T=o[4],M=o[5],z=o[6],$=o[7],j=o[8],Q=o[9],ee=o[10],pe=o[11],r[0]=d=o[0],r[1]=y,r[2]=x,r[3]=S,r[4]=T,r[5]=M,r[6]=z,r[7]=$,r[8]=j,r[9]=Q,r[10]=ee,r[11]=pe,r[12]=d*he+T*Pe+j*we+o[12],r[13]=y*he+M*Pe+Q*we+o[13],r[14]=x*he+z*Pe+ee*we+o[14],r[15]=S*he+$*Pe+pe*we+o[15]),r},a.triggerPluginCompletionEvent=zu,a.uniqueId=Y,a.validateCustomStyleLayer=function(r){var o=[],u=r.id;return u===void 0&&o.push({message:"layers."+u+': missing required property "id"'}),r.render===void 0&&o.push({message:"layers."+u+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&o.push({message:"layers."+u+': property "renderingMode" must be either "2d" or "3d"'}),o},a.validateLight=Hf,a.validateStyle=fs,a.values=function(r){var o=[];for(var u in r)o.push(r[u]);return o},a.vectorTile=xl,a.version="1.15.3",a.warnOnce=Ye,a.webpSupported=wr,a.window=I,a.wrap=R}),l(["./shared"],function(a){function g(V){var Z=typeof V;if(Z==="number"||Z==="boolean"||Z==="string"||V==null)return JSON.stringify(V);if(Array.isArray(V)){for(var J="[",oe=0,ge=V;oe<ge.length;oe+=1)J+=g(ge[oe])+",";return J+"]"}for(var Ae=Object.keys(V).sort(),Te="{",Ee=0;Ee<Ae.length;Ee++)Te+=JSON.stringify(Ae[Ee])+":"+g(V[Ae[Ee]])+",";return Te+"}"}function _(V){for(var Z="",J=0,oe=a.refProperties;J<oe.length;J+=1)Z+="/"+g(V[oe[J]]);return Z}var w=function(V){this.keyCache={},V&&this.replace(V)};w.prototype.replace=function(V){this._layerConfigs={},this._layers={},this.update(V,[])},w.prototype.update=function(V,Z){for(var J=this,oe=0,ge=V;oe<ge.length;oe+=1){var Ae=ge[oe];this._layerConfigs[Ae.id]=Ae;var Te=this._layers[Ae.id]=a.createStyleLayer(Ae);Te._featureFilter=a.featureFilter(Te.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(var Ee=0,le=Z;Ee<le.length;Ee+=1){var be=le[Ee];delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be]}this.familiesBySource={};for(var at=0,vt=function(xt,ot){for(var mn={},gn=0;gn<xt.length;gn++){var zt=ot&&ot[xt[gn].id]||_(xt[gn]);ot&&(ot[xt[gn].id]=zt);var tr=mn[zt];tr||(tr=mn[zt]=[]),tr.push(xt[gn])}var Tn=[];for(var ar in mn)Tn.push(mn[ar]);return Tn}(a.values(this._layerConfigs),this.keyCache);at<vt.length;at+=1){var je=vt[at].map(function(xt){return J._layers[xt.id]}),st=je[0];if(st.visibility!=="none"){var Mt=st.source||"",Rt=this.familiesBySource[Mt];Rt||(Rt=this.familiesBySource[Mt]={});var jt=st.sourceLayer||"_geojsonTileLayer",rt=Rt[jt];rt||(rt=Rt[jt]=[]),rt.push(je)}}};var C=function(V){var Z={},J=[];for(var oe in V){var ge=V[oe],Ae=Z[oe]={};for(var Te in ge){var Ee=ge[+Te];if(Ee&&Ee.bitmap.width!==0&&Ee.bitmap.height!==0){var le={x:0,y:0,w:Ee.bitmap.width+2,h:Ee.bitmap.height+2};J.push(le),Ae[Te]={rect:le,metrics:Ee.metrics}}}}var be=a.potpack(J),at=new a.AlphaImage({width:be.w||1,height:be.h||1});for(var vt in V){var je=V[vt];for(var st in je){var Mt=je[+st];if(Mt&&Mt.bitmap.width!==0&&Mt.bitmap.height!==0){var Rt=Z[vt][st].rect;a.AlphaImage.copy(Mt.bitmap,at,{x:0,y:0},{x:Rt.x+1,y:Rt.y+1},Mt.bitmap)}}}this.image=at,this.positions=Z};a.register("GlyphAtlas",C);var A=function(V){this.tileID=new a.OverscaledTileID(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId};function I(V,Z,J){for(var oe=new a.EvaluationParameters(Z),ge=0,Ae=V;ge<Ae.length;ge+=1)Ae[ge].recalculate(oe,J)}function O(V,Z){var J=a.getArrayBuffer(V.request,function(oe,ge,Ae,Te){oe?Z(oe):ge&&Z(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(ge)),rawData:ge,cacheControl:Ae,expires:Te})});return function(){J.cancel(),Z()}}A.prototype.parse=function(V,Z,J,oe,ge){var Ae=this;this.status="parsing",this.data=V,this.collisionBoxArray=new a.CollisionBoxArray;var Te=new a.DictionaryCoder(Object.keys(V.layers).sort()),Ee=new a.FeatureIndex(this.tileID,this.promoteId);Ee.bucketLayerIDs=[];var le,be,at,vt,je={},st={featureIndex:Ee,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Mt=Z.familiesBySource[this.source];for(var Rt in Mt){var jt=V.layers[Rt];if(jt){jt.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Rt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var rt=Te.encode(Rt),xt=[],ot=0;ot<jt.length;ot++){var mn=jt.feature(ot),gn=Ee.getId(mn,Rt);xt.push({feature:mn,id:gn,index:ot,sourceLayerIndex:rt})}for(var zt=0,tr=Mt[Rt];zt<tr.length;zt+=1){var Tn=tr[zt],ar=Tn[0];ar.minzoom&&this.zoom<Math.floor(ar.minzoom)||ar.maxzoom&&this.zoom>=ar.maxzoom||ar.visibility!=="none"&&(I(Tn,this.zoom,J),(je[ar.id]=ar.createBucket({index:Ee.bucketLayerIDs.length,layers:Tn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rt,sourceID:this.source})).populate(xt,st,this.tileID.canonical),Ee.bucketLayerIDs.push(Tn.map(function(hr){return hr.id})))}}}var Tr=a.mapObject(st.glyphDependencies,function(hr){return Object.keys(hr).map(Number)});Object.keys(Tr).length?oe.send("getGlyphs",{uid:this.uid,stacks:Tr},function(hr,Cn){le||(le=hr,be=Cn,zr.call(Ae))}):be={};var qn=Object.keys(st.iconDependencies);qn.length?oe.send("getImages",{icons:qn,source:this.source,tileID:this.tileID,type:"icons"},function(hr,Cn){le||(le=hr,at=Cn,zr.call(Ae))}):at={};var xr=Object.keys(st.patternDependencies);function zr(){if(le)return ge(le);if(be&&at&&vt){var hr=new C(be),Cn=new a.ImageAtlas(at,vt);for(var Iu in je){var Fn=je[Iu];Fn instanceof a.SymbolBucket?(I(Fn.layers,this.zoom,J),a.performSymbolLayout(Fn,be,hr.positions,at,Cn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Fn.hasPattern&&(Fn instanceof a.LineBucket||Fn instanceof a.FillBucket||Fn instanceof a.FillExtrusionBucket)&&(I(Fn.layers,this.zoom,J),Fn.addFeatures(st,this.tileID.canonical,Cn.patternPositions))}this.status="done",ge(null,{buckets:a.values(je).filter(function(Hl){return!Hl.isEmpty()}),featureIndex:Ee,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hr.image,imageAtlas:Cn,glyphMap:this.returnDependencies?be:null,iconMap:this.returnDependencies?at:null,glyphPositions:this.returnDependencies?hr.positions:null})}}xr.length?oe.send("getImages",{icons:xr,source:this.source,tileID:this.tileID,type:"patterns"},function(hr,Cn){le||(le=hr,vt=Cn,zr.call(Ae))}):vt={},zr.call(this)};var D=function(V,Z,J,oe){this.actor=V,this.layerIndex=Z,this.availableImages=J,this.loadVectorData=oe||O,this.loading={},this.loaded={}};D.prototype.loadTile=function(V,Z){var J=this,oe=V.uid;this.loading||(this.loading={});var ge=!!(V&&V.request&&V.request.collectResourceTiming)&&new a.RequestPerformance(V.request),Ae=this.loading[oe]=new A(V);Ae.abort=this.loadVectorData(V,function(Te,Ee){if(delete J.loading[oe],Te||!Ee)return Ae.status="done",J.loaded[oe]=Ae,Z(Te);var le=Ee.rawData,be={};Ee.expires&&(be.expires=Ee.expires),Ee.cacheControl&&(be.cacheControl=Ee.cacheControl);var at={};if(ge){var vt=ge.finish();vt&&(at.resourceTiming=JSON.parse(JSON.stringify(vt)))}Ae.vectorTile=Ee.vectorTile,Ae.parse(Ee.vectorTile,J.layerIndex,J.availableImages,J.actor,function(je,st){if(je||!st)return Z(je);Z(null,a.extend({rawTileData:le.slice(0)},st,be,at))}),J.loaded=J.loaded||{},J.loaded[oe]=Ae})},D.prototype.reloadTile=function(V,Z){var J=this,oe=this.loaded,ge=V.uid,Ae=this;if(oe&&oe[ge]){var Te=oe[ge];Te.showCollisionBoxes=V.showCollisionBoxes;var Ee=function(le,be){var at=Te.reloadCallback;at&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,Ae.layerIndex,J.availableImages,Ae.actor,at)),Z(le,be)};Te.status==="parsing"?Te.reloadCallback=Ee:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,Ee):Ee())}},D.prototype.abortTile=function(V,Z){var J=this.loading,oe=V.uid;J&&J[oe]&&J[oe].abort&&(J[oe].abort(),delete J[oe]),Z()},D.prototype.removeTile=function(V,Z){var J=this.loaded,oe=V.uid;J&&J[oe]&&delete J[oe],Z()};var B=a.window.ImageBitmap,H=function(){this.loaded={}};function R(V,Z){if(V.length!==0){U(V[0],Z);for(var J=1;J<V.length;J++)U(V[J],!Z)}}function U(V,Z){for(var J=0,oe=0,ge=V.length,Ae=ge-1;oe<ge;Ae=oe++)J+=(V[oe][0]-V[Ae][0])*(V[Ae][1]+V[oe][1]);J>=0!=!!Z&&V.reverse()}H.prototype.loadTile=function(V,Z){var J=V.uid,oe=V.encoding,ge=V.rawImageData,Ae=B&&ge instanceof B?this.getImageData(ge):ge,Te=new a.DEMData(J,Ae,oe);this.loaded=this.loaded||{},this.loaded[J]=Te,Z(null,Te)},H.prototype.getImageData=function(V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(V.width,V.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=V.width,this.offscreenCanvas.height=V.height,this.offscreenCanvasContext.drawImage(V,0,0,V.width,V.height);var Z=this.offscreenCanvasContext.getImageData(-1,-1,V.width+2,V.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Z.width,height:Z.height},Z.data)},H.prototype.removeTile=function(V){var Z=this.loaded,J=V.uid;Z&&Z[J]&&delete Z[J]};var q=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Y=function(V){this._feature=V,this.extent=a.EXTENT,this.type=V.type,this.properties=V.tags,"id"in V&&!isNaN(V.id)&&(this.id=parseInt(V.id,10))};Y.prototype.loadGeometry=function(){if(this._feature.type===1){for(var V=[],Z=0,J=this._feature.geometry;Z<J.length;Z+=1){var oe=J[Z];V.push([new a.Point$1(oe[0],oe[1])])}return V}for(var ge=[],Ae=0,Te=this._feature.geometry;Ae<Te.length;Ae+=1){for(var Ee=[],le=0,be=Te[Ae];le<be.length;le+=1){var at=be[le];Ee.push(new a.Point$1(at[0],at[1]))}ge.push(Ee)}return ge},Y.prototype.toGeoJSON=function(V,Z,J){return q.call(this,V,Z,J)};var se=function(V){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=V.length,this._features=V};se.prototype.feature=function(V){return new Y(this._features[V])};var W=a.vectorTile.VectorTileFeature,ce=xe;function xe(V,Z){this.options=Z||{},this.features=V,this.length=V.length}function Me(V,Z){this.id=typeof V.id=="number"?V.id:void 0,this.type=V.type,this.rawGeometry=V.type===1?[V.geometry]:V.geometry,this.properties=V.tags,this.extent=Z||4096}xe.prototype.feature=function(V){return new Me(this.features[V],this.options.extent)},Me.prototype.loadGeometry=function(){var V=this.rawGeometry;this.geometry=[];for(var Z=0;Z<V.length;Z++){for(var J=V[Z],oe=[],ge=0;ge<J.length;ge++)oe.push(new a.Point$1(J[ge][0],J[ge][1]));this.geometry.push(oe)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var V=this.geometry,Z=1/0,J=-1/0,oe=1/0,ge=-1/0,Ae=0;Ae<V.length;Ae++)for(var Te=V[Ae],Ee=0;Ee<Te.length;Ee++){var le=Te[Ee];Z=Math.min(Z,le.x),J=Math.max(J,le.x),oe=Math.min(oe,le.y),ge=Math.max(ge,le.y)}return[Z,oe,J,ge]},Me.prototype.toGeoJSON=W.prototype.toGeoJSON;var $e=Ge,Le=ce;function Ge(V){var Z=new a.pbf;return function(J,oe){for(var ge in J.layers)oe.writeMessage(3,Ye,J.layers[ge])}(V,Z),Z.finish()}function Ye(V,Z){var J;Z.writeVarintField(15,V.version||1),Z.writeStringField(1,V.name||""),Z.writeVarintField(5,V.extent||4096);var oe={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<V.length;J++)oe.feature=V.feature(J),Z.writeMessage(2,ht,oe);var ge=oe.keys;for(J=0;J<ge.length;J++)Z.writeStringField(3,ge[J]);var Ae=oe.values;for(J=0;J<Ae.length;J++)Z.writeMessage(4,ve,Ae[J])}function ht(V,Z){var J=V.feature;J.id!==void 0&&Z.writeVarintField(1,J.id),Z.writeMessage(2,Lt,V),Z.writeVarintField(3,J.type),Z.writeMessage(4,Ne,J)}function Lt(V,Z){var J=V.feature,oe=V.keys,ge=V.values,Ae=V.keycache,Te=V.valuecache;for(var Ee in J.properties){var le=Ae[Ee];le===void 0&&(oe.push(Ee),Ae[Ee]=le=oe.length-1),Z.writeVarint(le);var be=J.properties[Ee],at=typeof be;at!=="string"&&at!=="boolean"&&at!=="number"&&(be=JSON.stringify(be));var vt=at+":"+be,je=Te[vt];je===void 0&&(ge.push(be),Te[vt]=je=ge.length-1),Z.writeVarint(je)}}function Dt(V,Z){return(Z<<3)+(7&V)}function qt(V){return V<<1^V>>31}function Ne(V,Z){for(var J=V.loadGeometry(),oe=V.type,ge=0,Ae=0,Te=J.length,Ee=0;Ee<Te;Ee++){var le=J[Ee],be=1;oe===1&&(be=le.length),Z.writeVarint(Dt(1,be));for(var at=oe===3?le.length-1:le.length,vt=0;vt<at;vt++){vt===1&&oe!==1&&Z.writeVarint(Dt(2,at-1));var je=le[vt].x-ge,st=le[vt].y-Ae;Z.writeVarint(qt(je)),Z.writeVarint(qt(st)),ge+=je,Ae+=st}oe===3&&Z.writeVarint(Dt(7,1))}}function ve(V,Z){var J=typeof V;J==="string"?Z.writeStringField(1,V):J==="boolean"?Z.writeBooleanField(7,V):J==="number"&&(V%1!=0?Z.writeDoubleField(3,V):V<0?Z.writeSVarintField(6,V):Z.writeVarintField(5,V))}function _e(V,Z,J,oe){K(V,J,oe),K(Z,2*J,2*oe),K(Z,2*J+1,2*oe+1)}function K(V,Z,J){var oe=V[Z];V[Z]=V[J],V[J]=oe}function ae(V,Z,J,oe){var ge=V-J,Ae=Z-oe;return ge*ge+Ae*Ae}$e.fromVectorTileJs=Ge,$e.fromGeojsonVt=function(V,Z){Z=Z||{};var J={};for(var oe in V)J[oe]=new ce(V[oe].features,Z),J[oe].name=oe,J[oe].version=Z.version,J[oe].extent=Z.extent;return Ge({layers:J})},$e.GeoJSONWrapper=Le;var lt=function(V){return V[0]},Ot=function(V){return V[1]},Ht=function(V,Z,J,oe,ge){Z===void 0&&(Z=lt),J===void 0&&(J=Ot),oe===void 0&&(oe=64),ge===void 0&&(ge=Float64Array),this.nodeSize=oe,this.points=V;for(var Ae=V.length<65536?Uint16Array:Uint32Array,Te=this.ids=new Ae(V.length),Ee=this.coords=new ge(2*V.length),le=0;le<V.length;le++)Te[le]=le,Ee[2*le]=Z(V[le]),Ee[2*le+1]=J(V[le]);(function be(at,vt,je,st,Mt,Rt){if(!(Mt-st<=je)){var jt=st+Mt>>1;(function rt(xt,ot,mn,gn,zt,tr){for(;zt>gn;){if(zt-gn>600){var Tn=zt-gn+1,ar=mn-gn+1,Tr=Math.log(Tn),qn=.5*Math.exp(2*Tr/3),xr=.5*Math.sqrt(Tr*qn*(Tn-qn)/Tn)*(ar-Tn/2<0?-1:1);rt(xt,ot,mn,Math.max(gn,Math.floor(mn-ar*qn/Tn+xr)),Math.min(zt,Math.floor(mn+(Tn-ar)*qn/Tn+xr)),tr)}var zr=ot[2*mn+tr],hr=gn,Cn=zt;for(_e(xt,ot,gn,mn),ot[2*zt+tr]>zr&&_e(xt,ot,gn,zt);hr<Cn;){for(_e(xt,ot,hr,Cn),hr++,Cn--;ot[2*hr+tr]<zr;)hr++;for(;ot[2*Cn+tr]>zr;)Cn--}ot[2*gn+tr]===zr?_e(xt,ot,gn,Cn):_e(xt,ot,++Cn,zt),Cn<=mn&&(gn=Cn+1),mn<=Cn&&(zt=Cn-1)}})(at,vt,jt,st,Mt,Rt%2),be(at,vt,je,st,jt-1,Rt+1),be(at,vt,je,jt+1,Mt,Rt+1)}})(Te,Ee,oe,0,Te.length-1,0)};Ht.prototype.range=function(V,Z,J,oe){return function(ge,Ae,Te,Ee,le,be,at){for(var vt,je,st=[0,ge.length-1,0],Mt=[];st.length;){var Rt=st.pop(),jt=st.pop(),rt=st.pop();if(jt-rt<=at)for(var xt=rt;xt<=jt;xt++)je=Ae[2*xt+1],(vt=Ae[2*xt])>=Te&&vt<=le&&je>=Ee&&je<=be&&Mt.push(ge[xt]);else{var ot=Math.floor((rt+jt)/2);je=Ae[2*ot+1],(vt=Ae[2*ot])>=Te&&vt<=le&&je>=Ee&&je<=be&&Mt.push(ge[ot]);var mn=(Rt+1)%2;(Rt===0?Te<=vt:Ee<=je)&&(st.push(rt),st.push(ot-1),st.push(mn)),(Rt===0?le>=vt:be>=je)&&(st.push(ot+1),st.push(jt),st.push(mn))}}return Mt}(this.ids,this.coords,V,Z,J,oe,this.nodeSize)},Ht.prototype.within=function(V,Z,J){return function(oe,ge,Ae,Te,Ee,le){for(var be=[0,oe.length-1,0],at=[],vt=Ee*Ee;be.length;){var je=be.pop(),st=be.pop(),Mt=be.pop();if(st-Mt<=le)for(var Rt=Mt;Rt<=st;Rt++)ae(ge[2*Rt],ge[2*Rt+1],Ae,Te)<=vt&&at.push(oe[Rt]);else{var jt=Math.floor((Mt+st)/2),rt=ge[2*jt],xt=ge[2*jt+1];ae(rt,xt,Ae,Te)<=vt&&at.push(oe[jt]);var ot=(je+1)%2;(je===0?Ae-Ee<=rt:Te-Ee<=xt)&&(be.push(Mt),be.push(jt-1),be.push(ot)),(je===0?Ae+Ee>=rt:Te+Ee>=xt)&&(be.push(jt+1),be.push(st),be.push(ot))}}return at}(this.ids,this.coords,V,Z,J,this.nodeSize)};var Ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(V){return V}},Kt=function(V){this.options=$r(Object.create(Ut),V),this.trees=new Array(this.options.maxZoom+1)};function cn(V,Z,J,oe,ge){return{x:V,y:Z,zoom:1/0,id:J,parentId:-1,numPoints:oe,properties:ge}}function sn(V,Z){var J=V.geometry.coordinates,oe=J[1];return{x:li(J[0]),y:dn(oe),zoom:1/0,index:Z,parentId:-1}}function wr(V){return{type:"Feature",id:V.id,properties:pr(V),geometry:{type:"Point",coordinates:[(oe=V.x,360*(oe-.5)),(Z=V.y,J=(180-360*Z)*Math.PI/180,360*Math.atan(Math.exp(J))/Math.PI-90)]}};var Z,J,oe}function pr(V){var Z=V.numPoints,J=Z>=1e4?Math.round(Z/1e3)+"k":Z>=1e3?Math.round(Z/100)/10+"k":Z;return $r($r({},V.properties),{cluster:!0,cluster_id:V.id,point_count:Z,point_count_abbreviated:J})}function li(V){return V/360+.5}function dn(V){var Z=Math.sin(V*Math.PI/180),J=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return J<0?0:J>1?1:J}function $r(V,Z){for(var J in Z)V[J]=Z[J];return V}function Ur(V){return V.x}function go(V){return V.y}function yo(V,Z,J,oe,ge,Ae){var Te=ge-J,Ee=Ae-oe;if(Te!==0||Ee!==0){var le=((V-J)*Te+(Z-oe)*Ee)/(Te*Te+Ee*Ee);le>1?(J=ge,oe=Ae):le>0&&(J+=Te*le,oe+=Ee*le)}return(Te=V-J)*Te+(Ee=Z-oe)*Ee}function ro(V,Z,J,oe){var ge={id:V===void 0?null:V,type:Z,geometry:J,tags:oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ae){var Te=Ae.geometry,Ee=Ae.type;if(Ee==="Point"||Ee==="MultiPoint"||Ee==="LineString")ls(Ae,Te);else if(Ee==="Polygon"||Ee==="MultiLineString")for(var le=0;le<Te.length;le++)ls(Ae,Te[le]);else if(Ee==="MultiPolygon")for(le=0;le<Te.length;le++)for(var be=0;be<Te[le].length;be++)ls(Ae,Te[le][be])}(ge),ge}function ls(V,Z){for(var J=0;J<Z.length;J+=3)V.minX=Math.min(V.minX,Z[J]),V.minY=Math.min(V.minY,Z[J+1]),V.maxX=Math.max(V.maxX,Z[J]),V.maxY=Math.max(V.maxY,Z[J+1])}function Ci(V,Z,J,oe){if(Z.geometry){var ge=Z.geometry.coordinates,Ae=Z.geometry.type,Te=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),Ee=[],le=Z.id;if(J.promoteId?le=Z.properties[J.promoteId]:J.generateId&&(le=oe||0),Ae==="Point")ui(ge,Ee);else if(Ae==="MultiPoint")for(var be=0;be<ge.length;be++)ui(ge[be],Ee);else if(Ae==="LineString")Lo(ge,Ee,Te,!1);else if(Ae==="MultiLineString"){if(J.lineMetrics){for(be=0;be<ge.length;be++)Lo(ge[be],Ee=[],Te,!1),V.push(ro(le,"LineString",Ee,Z.properties));return}Ii(ge,Ee,Te,!1)}else if(Ae==="Polygon")Ii(ge,Ee,Te,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(be=0;be<Z.geometry.geometries.length;be++)Ci(V,{id:le,geometry:Z.geometry.geometries[be],properties:Z.properties},J,oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(be=0;be<ge.length;be++){var at=[];Ii(ge[be],at,Te,!0),Ee.push(at)}}V.push(ro(le,Ae,Ee,Z.properties))}}function ui(V,Z){Z.push(Oi(V[0])),Z.push(Mo(V[1])),Z.push(0)}function Lo(V,Z,J,oe){for(var ge,Ae,Te=0,Ee=0;Ee<V.length;Ee++){var le=Oi(V[Ee][0]),be=Mo(V[Ee][1]);Z.push(le),Z.push(be),Z.push(0),Ee>0&&(Te+=oe?(ge*be-le*Ae)/2:Math.sqrt(Math.pow(le-ge,2)+Math.pow(be-Ae,2))),ge=le,Ae=be}var at=Z.length-3;Z[2]=1,function vt(je,st,Mt,Rt){for(var jt,rt=Rt,xt=Mt-st>>1,ot=Mt-st,mn=je[st],gn=je[st+1],zt=je[Mt],tr=je[Mt+1],Tn=st+3;Tn<Mt;Tn+=3){var ar=yo(je[Tn],je[Tn+1],mn,gn,zt,tr);if(ar>rt)jt=Tn,rt=ar;else if(ar===rt){var Tr=Math.abs(Tn-xt);Tr<ot&&(jt=Tn,ot=Tr)}}rt>Rt&&(jt-st>3&&vt(je,st,jt,Rt),je[jt+2]=rt,Mt-jt>3&&vt(je,jt,Mt,Rt))}(Z,0,at,J),Z[at+2]=1,Z.size=Math.abs(Te),Z.start=0,Z.end=Z.size}function Ii(V,Z,J,oe){for(var ge=0;ge<V.length;ge++){var Ae=[];Lo(V[ge],Ae,J,oe),Z.push(Ae)}}function Oi(V){return V/360+.5}function Mo(V){var Z=Math.sin(V*Math.PI/180),J=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return J<0?0:J>1?1:J}function Ro(V,Z,J,oe,ge,Ae,Te,Ee){if(oe/=Z,Ae>=(J/=Z)&&Te<oe)return V;if(Te<J||Ae>=oe)return null;for(var le=[],be=0;be<V.length;be++){var at=V[be],vt=at.geometry,je=at.type,st=ge===0?at.minX:at.minY,Mt=ge===0?at.maxX:at.maxY;if(st>=J&&Mt<oe)le.push(at);else if(!(Mt<J||st>=oe)){var Rt=[];if(je==="Point"||je==="MultiPoint")Xe(vt,Rt,J,oe,ge);else if(je==="LineString")ue(vt,Rt,J,oe,ge,!1,Ee.lineMetrics);else if(je==="MultiLineString")nt(vt,Rt,J,oe,ge,!1);else if(je==="Polygon")nt(vt,Rt,J,oe,ge,!0);else if(je==="MultiPolygon")for(var jt=0;jt<vt.length;jt++){var rt=[];nt(vt[jt],rt,J,oe,ge,!0),rt.length&&Rt.push(rt)}if(Rt.length){if(Ee.lineMetrics&&je==="LineString"){for(jt=0;jt<Rt.length;jt++)le.push(ro(at.id,je,Rt[jt],at.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(Rt.length===1?(je="LineString",Rt=Rt[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=Rt.length===3?"Point":"MultiPoint"),le.push(ro(at.id,je,Rt,at.tags))}}}return le.length?le:null}function Xe(V,Z,J,oe,ge){for(var Ae=0;Ae<V.length;Ae+=3){var Te=V[Ae+ge];Te>=J&&Te<=oe&&(Z.push(V[Ae]),Z.push(V[Ae+1]),Z.push(V[Ae+2]))}}function ue(V,Z,J,oe,ge,Ae,Te){for(var Ee,le,be=Re(V),at=ge===0?bn:Jn,vt=V.start,je=0;je<V.length-3;je+=3){var st=V[je],Mt=V[je+1],Rt=V[je+2],jt=V[je+3],rt=V[je+4],xt=ge===0?st:Mt,ot=ge===0?jt:rt,mn=!1;Te&&(Ee=Math.sqrt(Math.pow(st-jt,2)+Math.pow(Mt-rt,2))),xt<J?ot>J&&(le=at(be,st,Mt,jt,rt,J),Te&&(be.start=vt+Ee*le)):xt>oe?ot<oe&&(le=at(be,st,Mt,jt,rt,oe),Te&&(be.start=vt+Ee*le)):Tt(be,st,Mt,Rt),ot<J&&xt>=J&&(le=at(be,st,Mt,jt,rt,J),mn=!0),ot>oe&&xt<=oe&&(le=at(be,st,Mt,jt,rt,oe),mn=!0),!Ae&&mn&&(Te&&(be.end=vt+Ee*le),Z.push(be),be=Re(V)),Te&&(vt+=Ee)}var gn=V.length-3;st=V[gn],Mt=V[gn+1],Rt=V[gn+2],(xt=ge===0?st:Mt)>=J&&xt<=oe&&Tt(be,st,Mt,Rt),gn=be.length-3,Ae&&gn>=3&&(be[gn]!==be[0]||be[gn+1]!==be[1])&&Tt(be,be[0],be[1],be[2]),be.length&&Z.push(be)}function Re(V){var Z=[];return Z.size=V.size,Z.start=V.start,Z.end=V.end,Z}function nt(V,Z,J,oe,ge,Ae){for(var Te=0;Te<V.length;Te++)ue(V[Te],Z,J,oe,ge,Ae,!1)}function Tt(V,Z,J,oe){V.push(Z),V.push(J),V.push(oe)}function bn(V,Z,J,oe,ge,Ae){var Te=(Ae-Z)/(oe-Z);return V.push(Ae),V.push(J+(ge-J)*Te),V.push(1),Te}function Jn(V,Z,J,oe,ge,Ae){var Te=(Ae-J)/(ge-J);return V.push(Z+(oe-Z)*Te),V.push(Ae),V.push(1),Te}function tn(V,Z){for(var J=[],oe=0;oe<V.length;oe++){var ge,Ae=V[oe],Te=Ae.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")ge=Pn(Ae.geometry,Z);else if(Te==="MultiLineString"||Te==="Polygon"){ge=[];for(var Ee=0;Ee<Ae.geometry.length;Ee++)ge.push(Pn(Ae.geometry[Ee],Z))}else if(Te==="MultiPolygon")for(ge=[],Ee=0;Ee<Ae.geometry.length;Ee++){for(var le=[],be=0;be<Ae.geometry[Ee].length;be++)le.push(Pn(Ae.geometry[Ee][be],Z));ge.push(le)}J.push(ro(Ae.id,Te,ge,Ae.tags))}return J}function Pn(V,Z){var J=[];J.size=V.size,V.start!==void 0&&(J.start=V.start,J.end=V.end);for(var oe=0;oe<V.length;oe+=3)J.push(V[oe]+Z,V[oe+1],V[oe+2]);return J}function _r(V,Z){if(V.transformed)return V;var J,oe,ge,Ae=1<<V.z,Te=V.x,Ee=V.y;for(J=0;J<V.features.length;J++){var le=V.features[J],be=le.geometry,at=le.type;if(le.geometry=[],at===1)for(oe=0;oe<be.length;oe+=2)le.geometry.push(Sr(be[oe],be[oe+1],Z,Ae,Te,Ee));else for(oe=0;oe<be.length;oe++){var vt=[];for(ge=0;ge<be[oe].length;ge+=2)vt.push(Sr(be[oe][ge],be[oe][ge+1],Z,Ae,Te,Ee));le.geometry.push(vt)}}return V.transformed=!0,V}function Sr(V,Z,J,oe,ge,Ae){return[Math.round(J*(V*oe-ge)),Math.round(J*(Z*oe-Ae))]}function Vn(V,Z,J,oe,ge){for(var Ae=Z===ge.maxZoom?0:ge.tolerance/((1<<Z)*ge.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:oe,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ee=0;Ee<V.length;Ee++){Te.numFeatures++,qi(Te,V[Ee],Ae,ge);var le=V[Ee].minX,be=V[Ee].minY,at=V[Ee].maxX,vt=V[Ee].maxY;le<Te.minX&&(Te.minX=le),be<Te.minY&&(Te.minY=be),at>Te.maxX&&(Te.maxX=at),vt>Te.maxY&&(Te.maxY=vt)}return Te}function qi(V,Z,J,oe){var ge=Z.geometry,Ae=Z.type,Te=[];if(Ae==="Point"||Ae==="MultiPoint")for(var Ee=0;Ee<ge.length;Ee+=3)Te.push(ge[Ee]),Te.push(ge[Ee+1]),V.numPoints++,V.numSimplified++;else if(Ae==="LineString")Mr(Te,ge,V,J,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(Ee=0;Ee<ge.length;Ee++)Mr(Te,ge[Ee],V,J,Ae==="Polygon",Ee===0);else if(Ae==="MultiPolygon")for(var le=0;le<ge.length;le++){var be=ge[le];for(Ee=0;Ee<be.length;Ee++)Mr(Te,be[Ee],V,J,!0,Ee===0)}if(Te.length){var at=Z.tags||null;if(Ae==="LineString"&&oe.lineMetrics){for(var vt in at={},Z.tags)at[vt]=Z.tags[vt];at.mapbox_clip_start=ge.start/ge.size,at.mapbox_clip_end=ge.end/ge.size}var je={geometry:Te,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:at};Z.id!==null&&(je.id=Z.id),V.features.push(je)}}function Mr(V,Z,J,oe,ge,Ae){var Te=oe*oe;if(oe>0&&Z.size<(ge?Te:oe))J.numPoints+=Z.length/3;else{for(var Ee=[],le=0;le<Z.length;le+=3)(oe===0||Z[le+2]>Te)&&(J.numSimplified++,Ee.push(Z[le]),Ee.push(Z[le+1])),J.numPoints++;ge&&function(be,at){for(var vt=0,je=0,st=be.length,Mt=st-2;je<st;Mt=je,je+=2)vt+=(be[je]-be[Mt])*(be[je+1]+be[Mt+1]);if(vt>0===at)for(je=0,st=be.length;je<st/2;je+=2){var Rt=be[je],jt=be[je+1];be[je]=be[st-2-je],be[je+1]=be[st-1-je],be[st-2-je]=Rt,be[st-1-je]=jt}}(Ee,Ae),V.push(Ee)}}function Fo(V,Z){var J=(Z=this.options=function(ge,Ae){for(var Te in Ae)ge[Te]=Ae[Te];return ge}(Object.create(this.options),Z)).debug;if(J&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");var oe=function(ge,Ae){var Te=[];if(ge.type==="FeatureCollection")for(var Ee=0;Ee<ge.features.length;Ee++)Ci(Te,ge.features[Ee],Ae,Ee);else Ci(Te,ge.type==="Feature"?ge:{geometry:ge},Ae);return Te}(V,Z);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(oe=function(ge,Ae){var Te=Ae.buffer/Ae.extent,Ee=ge,le=Ro(ge,1,-1-Te,Te,0,-1,2,Ae),be=Ro(ge,1,1-Te,2+Te,0,-1,2,Ae);return(le||be)&&(Ee=Ro(ge,1,-Te,1+Te,0,-1,2,Ae)||[],le&&(Ee=tn(le,1).concat(Ee)),be&&(Ee=Ee.concat(tn(be,-1)))),Ee}(oe,Z)).length&&this.splitTile(oe,0,0,0),J&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pa(V,Z,J){return 32*((1<<V)*J+Z)+V}function io(V,Z){var J=V.tileID.canonical;if(!this._geoJSONIndex)return Z(null,null);var oe=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!oe)return Z(null,null);var ge=new se(oe.features),Ae=$e(ge);Ae.byteOffset===0&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),Z(null,{vectorTile:ge,rawData:Ae.buffer})}Kt.prototype.load=function(V){var Z=this.options,J=Z.log,oe=Z.minZoom,ge=Z.maxZoom,Ae=Z.nodeSize;J&&console.time("total time");var Te="prepare "+V.length+" points";J&&console.time(Te),this.points=V;for(var Ee=[],le=0;le<V.length;le++)V[le].geometry&&Ee.push(sn(V[le],le));this.trees[ge+1]=new Ht(Ee,Ur,go,Ae,Float32Array),J&&console.timeEnd(Te);for(var be=ge;be>=oe;be--){var at=+Date.now();Ee=this._cluster(Ee,be),this.trees[be]=new Ht(Ee,Ur,go,Ae,Float32Array),J&&console.log("z%d: %d clusters in %dms",be,Ee.length,+Date.now()-at)}return J&&console.timeEnd("total time"),this},Kt.prototype.getClusters=function(V,Z){var J=((V[0]+180)%360+360)%360-180,oe=Math.max(-90,Math.min(90,V[1])),ge=V[2]===180?180:((V[2]+180)%360+360)%360-180,Ae=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)J=-180,ge=180;else if(J>ge){var Te=this.getClusters([J,oe,180,Ae],Z),Ee=this.getClusters([-180,oe,ge,Ae],Z);return Te.concat(Ee)}for(var le=this.trees[this._limitZoom(Z)],be=[],at=0,vt=le.range(li(J),dn(Ae),li(ge),dn(oe));at<vt.length;at+=1){var je=le.points[vt[at]];be.push(je.numPoints?wr(je):this.points[je.index])}return be},Kt.prototype.getChildren=function(V){var Z=this._getOriginId(V),J=this._getOriginZoom(V),oe="No cluster with the specified id.",ge=this.trees[J];if(!ge)throw new Error(oe);var Ae=ge.points[Z];if(!Ae)throw new Error(oe);for(var Te=this.options.radius/(this.options.extent*Math.pow(2,J-1)),Ee=[],le=0,be=ge.within(Ae.x,Ae.y,Te);le<be.length;le+=1){var at=ge.points[be[le]];at.parentId===V&&Ee.push(at.numPoints?wr(at):this.points[at.index])}if(Ee.length===0)throw new Error(oe);return Ee},Kt.prototype.getLeaves=function(V,Z,J){var oe=[];return this._appendLeaves(oe,V,Z=Z||10,J=J||0,0),oe},Kt.prototype.getTile=function(V,Z,J){var oe=this.trees[this._limitZoom(V)],ge=Math.pow(2,V),Ae=this.options,Te=Ae.radius/Ae.extent,Ee=(J-Te)/ge,le=(J+1+Te)/ge,be={features:[]};return this._addTileFeatures(oe.range((Z-Te)/ge,Ee,(Z+1+Te)/ge,le),oe.points,Z,J,ge,be),Z===0&&this._addTileFeatures(oe.range(1-Te/ge,Ee,1,le),oe.points,ge,J,ge,be),Z===ge-1&&this._addTileFeatures(oe.range(0,Ee,Te/ge,le),oe.points,-1,J,ge,be),be.features.length?be:null},Kt.prototype.getClusterExpansionZoom=function(V){for(var Z=this._getOriginZoom(V)-1;Z<=this.options.maxZoom;){var J=this.getChildren(V);if(Z++,J.length!==1)break;V=J[0].properties.cluster_id}return Z},Kt.prototype._appendLeaves=function(V,Z,J,oe,ge){for(var Ae=0,Te=this.getChildren(Z);Ae<Te.length;Ae+=1){var Ee=Te[Ae],le=Ee.properties;if(le&&le.cluster?ge+le.point_count<=oe?ge+=le.point_count:ge=this._appendLeaves(V,le.cluster_id,J,oe,ge):ge<oe?ge++:V.push(Ee),V.length===J)break}return ge},Kt.prototype._addTileFeatures=function(V,Z,J,oe,ge,Ae){for(var Te=0,Ee=V;Te<Ee.length;Te+=1){var le=Z[Ee[Te]],be=le.numPoints,at={type:1,geometry:[[Math.round(this.options.extent*(le.x*ge-J)),Math.round(this.options.extent*(le.y*ge-oe))]],tags:be?pr(le):this.points[le.index].properties},vt=void 0;be?vt=le.id:this.options.generateId?vt=le.index:this.points[le.index].id&&(vt=this.points[le.index].id),vt!==void 0&&(at.id=vt),Ae.features.push(at)}},Kt.prototype._limitZoom=function(V){return Math.max(this.options.minZoom,Math.min(+V,this.options.maxZoom+1))},Kt.prototype._cluster=function(V,Z){for(var J=[],oe=this.options,ge=oe.reduce,Ae=oe.minPoints,Te=oe.radius/(oe.extent*Math.pow(2,Z)),Ee=0;Ee<V.length;Ee++){var le=V[Ee];if(!(le.zoom<=Z)){le.zoom=Z;for(var be=this.trees[Z+1],at=be.within(le.x,le.y,Te),vt=le.numPoints||1,je=vt,st=0,Mt=at;st<Mt.length;st+=1){var Rt=be.points[Mt[st]];Rt.zoom>Z&&(je+=Rt.numPoints||1)}if(je>=Ae){for(var jt=le.x*vt,rt=le.y*vt,xt=ge&&vt>1?this._map(le,!0):null,ot=(Ee<<5)+(Z+1)+this.points.length,mn=0,gn=at;mn<gn.length;mn+=1){var zt=be.points[gn[mn]];if(!(zt.zoom<=Z)){zt.zoom=Z;var tr=zt.numPoints||1;jt+=zt.x*tr,rt+=zt.y*tr,zt.parentId=ot,ge&&(xt||(xt=this._map(le,!0)),ge(xt,this._map(zt)))}}le.parentId=ot,J.push(cn(jt/je,rt/je,ot,je,xt))}else if(J.push(le),je>1)for(var Tn=0,ar=at;Tn<ar.length;Tn+=1){var Tr=be.points[ar[Tn]];Tr.zoom<=Z||(Tr.zoom=Z,J.push(Tr))}}}return J},Kt.prototype._getOriginId=function(V){return V-this.points.length>>5},Kt.prototype._getOriginZoom=function(V){return(V-this.points.length)%32},Kt.prototype._map=function(V,Z){if(V.numPoints)return Z?$r({},V.properties):V.properties;var J=this.points[V.index].properties,oe=this.options.map(J);return Z&&oe===J?$r({},oe):oe},Fo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fo.prototype.splitTile=function(V,Z,J,oe,ge,Ae,Te){for(var Ee=[V,Z,J,oe],le=this.options,be=le.debug;Ee.length;){oe=Ee.pop(),J=Ee.pop(),Z=Ee.pop(),V=Ee.pop();var at=1<<Z,vt=pa(Z,J,oe),je=this.tiles[vt];if(!je&&(be>1&&console.time("creation"),je=this.tiles[vt]=Vn(V,Z,J,oe,le),this.tileCoords.push({z:Z,x:J,y:oe}),be)){be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,J,oe,je.numFeatures,je.numPoints,je.numSimplified),console.timeEnd("creation"));var st="z"+Z;this.stats[st]=(this.stats[st]||0)+1,this.total++}if(je.source=V,ge){if(Z===le.maxZoom||Z===ge)continue;var Mt=1<<ge-Z;if(J!==Math.floor(Ae/Mt)||oe!==Math.floor(Te/Mt))continue}else if(Z===le.indexMaxZoom||je.numPoints<=le.indexMaxPoints)continue;if(je.source=null,V.length!==0){be>1&&console.time("clipping");var Rt,jt,rt,xt,ot,mn,gn=.5*le.buffer/le.extent,zt=.5-gn,tr=.5+gn,Tn=1+gn;Rt=jt=rt=xt=null,ot=Ro(V,at,J-gn,J+tr,0,je.minX,je.maxX,le),mn=Ro(V,at,J+zt,J+Tn,0,je.minX,je.maxX,le),V=null,ot&&(Rt=Ro(ot,at,oe-gn,oe+tr,1,je.minY,je.maxY,le),jt=Ro(ot,at,oe+zt,oe+Tn,1,je.minY,je.maxY,le),ot=null),mn&&(rt=Ro(mn,at,oe-gn,oe+tr,1,je.minY,je.maxY,le),xt=Ro(mn,at,oe+zt,oe+Tn,1,je.minY,je.maxY,le),mn=null),be>1&&console.timeEnd("clipping"),Ee.push(Rt||[],Z+1,2*J,2*oe),Ee.push(jt||[],Z+1,2*J,2*oe+1),Ee.push(rt||[],Z+1,2*J+1,2*oe),Ee.push(xt||[],Z+1,2*J+1,2*oe+1)}}},Fo.prototype.getTile=function(V,Z,J){var oe=this.options,ge=oe.extent,Ae=oe.debug;if(V<0||V>24)return null;var Te=1<<V,Ee=pa(V,Z=(Z%Te+Te)%Te,J);if(this.tiles[Ee])return _r(this.tiles[Ee],ge);Ae>1&&console.log("drilling down to z%d-%d-%d",V,Z,J);for(var le,be=V,at=Z,vt=J;!le&&be>0;)be--,at=Math.floor(at/2),vt=Math.floor(vt/2),le=this.tiles[pa(be,at,vt)];return le&&le.source?(Ae>1&&console.log("found parent tile z%d-%d-%d",be,at,vt),Ae>1&&console.time("drilling down"),this.splitTile(le.source,be,at,vt,V,Z,J),Ae>1&&console.timeEnd("drilling down"),this.tiles[Ee]?_r(this.tiles[Ee],ge):null):null};var ei=function(V){function Z(J,oe,ge,Ae){V.call(this,J,oe,ge,io),Ae&&(this.loadGeoJSON=Ae)}return V&&(Z.__proto__=V),(Z.prototype=Object.create(V&&V.prototype)).constructor=Z,Z.prototype.loadData=function(J,oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=oe,this._pendingLoadDataParams=J,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Z.prototype._loadData=function(){var J=this;if(this._pendingCallback&&this._pendingLoadDataParams){var oe=this._pendingCallback,ge=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ae=!!(ge&&ge.request&&ge.request.collectResourceTiming)&&new a.RequestPerformance(ge.request);this.loadGeoJSON(ge,function(Te,Ee){if(Te||!Ee)return oe(Te);if(typeof Ee!="object")return oe(new Error("Input data given to '"+ge.source+"' is not a valid GeoJSON object."));(function je(st,Mt){var Rt,jt=st&&st.type;if(jt==="FeatureCollection")for(Rt=0;Rt<st.features.length;Rt++)je(st.features[Rt],Mt);else if(jt==="GeometryCollection")for(Rt=0;Rt<st.geometries.length;Rt++)je(st.geometries[Rt],Mt);else if(jt==="Feature")je(st.geometry,Mt);else if(jt==="Polygon")R(st.coordinates,Mt);else if(jt==="MultiPolygon")for(Rt=0;Rt<st.coordinates.length;Rt++)R(st.coordinates[Rt],Mt);return st})(Ee,!0);try{if(ge.filter){var le=a.createExpression(ge.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(function(je){return je.key+": "+je.message}).join(", "));var be=Ee.features.filter(function(je){return le.value.evaluate({zoom:0},je)});Ee={type:"FeatureCollection",features:be}}J._geoJSONIndex=ge.cluster?new Kt(function(je){var st=je.superclusterOptions,Mt=je.clusterProperties;if(!Mt||!st)return st;for(var Rt={},jt={},rt={accumulated:null,zoom:0},xt={properties:null},ot=Object.keys(Mt),mn=0,gn=ot;mn<gn.length;mn+=1){var zt=gn[mn],tr=Mt[zt],Tn=tr[0],ar=a.createExpression(tr[1]),Tr=a.createExpression(typeof Tn=="string"?[Tn,["accumulated"],["get",zt]]:Tn);Rt[zt]=ar.value,jt[zt]=Tr.value}return st.map=function(qn){xt.properties=qn;for(var xr={},zr=0,hr=ot;zr<hr.length;zr+=1){var Cn=hr[zr];xr[Cn]=Rt[Cn].evaluate(rt,xt)}return xr},st.reduce=function(qn,xr){xt.properties=xr;for(var zr=0,hr=ot;zr<hr.length;zr+=1){var Cn=hr[zr];rt.accumulated=qn[Cn],qn[Cn]=jt[Cn].evaluate(rt,xt)}},st}(ge)).load(Ee.features):function(je,st){return new Fo(je,st)}(Ee,ge.geojsonVtOptions)}catch(je){return oe(je)}J.loaded={};var at={};if(Ae){var vt=Ae.finish();vt&&(at.resourceTiming={},at.resourceTiming[ge.source]=JSON.parse(JSON.stringify(vt)))}oe(null,at)})}},Z.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Z.prototype.reloadTile=function(J,oe){var ge=this.loaded;return ge&&ge[J.uid]?V.prototype.reloadTile.call(this,J,oe):this.loadTile(J,oe)},Z.prototype.loadGeoJSON=function(J,oe){if(J.request)a.getJSON(J.request,oe);else{if(typeof J.data!="string")return oe(new Error("Input data given to '"+J.source+"' is not a valid GeoJSON object."));try{return oe(null,JSON.parse(J.data))}catch{return oe(new Error("Input data given to '"+J.source+"' is not a valid GeoJSON object."))}}},Z.prototype.removeSource=function(J,oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),oe()},Z.prototype.getClusterExpansionZoom=function(J,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(J.clusterId))}catch(ge){oe(ge)}},Z.prototype.getClusterChildren=function(J,oe){try{oe(null,this._geoJSONIndex.getChildren(J.clusterId))}catch(ge){oe(ge)}},Z.prototype.getClusterLeaves=function(J,oe){try{oe(null,this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset))}catch(ge){oe(ge)}},Z}(D),or=function(V){var Z=this;this.self=V,this.actor=new a.Actor(V,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:D,geojson:ei},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(J,oe){if(Z.workerSourceTypes[J])throw new Error('Worker source with name "'+J+'" already registered.');Z.workerSourceTypes[J]=oe},this.self.registerRTLTextPlugin=function(J){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=J.applyArabicShaping,a.plugin.processBidirectionalText=J.processBidirectionalText,a.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}};return or.prototype.setReferrer=function(V,Z){this.referrer=Z},or.prototype.setImages=function(V,Z,J){for(var oe in this.availableImages[V]=Z,this.workerSources[V]){var ge=this.workerSources[V][oe];for(var Ae in ge)ge[Ae].availableImages=Z}J()},or.prototype.setLayers=function(V,Z,J){this.getLayerIndex(V).replace(Z),J()},or.prototype.updateLayers=function(V,Z,J){this.getLayerIndex(V).update(Z.layers,Z.removedIds),J()},or.prototype.loadTile=function(V,Z,J){this.getWorkerSource(V,Z.type,Z.source).loadTile(Z,J)},or.prototype.loadDEMTile=function(V,Z,J){this.getDEMWorkerSource(V,Z.source).loadTile(Z,J)},or.prototype.reloadTile=function(V,Z,J){this.getWorkerSource(V,Z.type,Z.source).reloadTile(Z,J)},or.prototype.abortTile=function(V,Z,J){this.getWorkerSource(V,Z.type,Z.source).abortTile(Z,J)},or.prototype.removeTile=function(V,Z,J){this.getWorkerSource(V,Z.type,Z.source).removeTile(Z,J)},or.prototype.removeDEMTile=function(V,Z){this.getDEMWorkerSource(V,Z.source).removeTile(Z)},or.prototype.removeSource=function(V,Z,J){if(this.workerSources[V]&&this.workerSources[V][Z.type]&&this.workerSources[V][Z.type][Z.source]){var oe=this.workerSources[V][Z.type][Z.source];delete this.workerSources[V][Z.type][Z.source],oe.removeSource!==void 0?oe.removeSource(Z,J):J()}},or.prototype.loadWorkerSource=function(V,Z,J){try{this.self.importScripts(Z.url),J()}catch(oe){J(oe.toString())}},or.prototype.syncRTLPluginState=function(V,Z,J){try{a.plugin.setState(Z);var oe=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&oe!=null){this.self.importScripts(oe);var ge=a.plugin.isParsed();J(ge?void 0:new Error("RTL Text Plugin failed to import scripts from "+oe),ge)}}catch(Ae){J(Ae.toString())}},or.prototype.getAvailableImages=function(V){var Z=this.availableImages[V];return Z||(Z=[]),Z},or.prototype.getLayerIndex=function(V){var Z=this.layerIndexes[V];return Z||(Z=this.layerIndexes[V]=new w),Z},or.prototype.getWorkerSource=function(V,Z,J){var oe=this;return this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][Z]||(this.workerSources[V][Z]={}),this.workerSources[V][Z][J]||(this.workerSources[V][Z][J]=new this.workerSourceTypes[Z]({send:function(ge,Ae,Te){oe.actor.send(ge,Ae,Te,V)}},this.getLayerIndex(V),this.getAvailableImages(V))),this.workerSources[V][Z][J]},or.prototype.getDEMWorkerSource=function(V,Z){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][Z]||(this.demWorkerSources[V][Z]=new H),this.demWorkerSources[V][Z]},or.prototype.enforceCacheSizeLimit=function(V,Z){a.enforceCacheSizeLimit(Z)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new or(self)),or}),l(["./shared"],function(a){var g=a.createCommonjsModule(function(c){function p(b){return!f(b)}function f(b){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var P,L,N=new Blob([""],{type:"text/javascript"}),G=URL.createObjectURL(N);try{L=new Worker(G),P=!0}catch{P=!1}return L&&L.terminate(),URL.revokeObjectURL(G),P}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var P=document.createElement("canvas");P.width=P.height=1;var L=P.getContext("2d");if(!L)return!1;var N=L.getImageData(0,0,1,1);return N&&N.width===P.width}()?(m[E=b&&b.failIfMajorPerformanceCaveat]===void 0&&(m[E]=function(P){var L=function(G){var te=document.createElement("canvas"),ie=Object.create(p.webGLContextAttributes);return ie.failIfMajorPerformanceCaveat=G,te.probablySupportsContext?te.probablySupportsContext("webgl",ie)||te.probablySupportsContext("experimental-webgl",ie):te.supportsContext?te.supportsContext("webgl",ie)||te.supportsContext("experimental-webgl",ie):te.getContext("webgl",ie)||te.getContext("experimental-webgl",ie)}(P);if(!L)return!1;var N=L.createShader(L.VERTEX_SHADER);return!(!N||L.isContextLost())&&(L.shaderSource(N,"void main() {}"),L.compileShader(N),L.getShaderParameter(N,L.COMPILE_STATUS)===!0)}(E)),m[E]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var E}c.exports?c.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=f);var m={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(c,p,f){var m=a.window.document.createElement(c);return p!==void 0&&(m.className=p),f&&f.appendChild(m),m},createNS:function(c,p){return a.window.document.createElementNS(c,p)}},w=a.window.document&&a.window.document.documentElement.style;function C(c){if(!w)return c[0];for(var p=0;p<c.length;p++)if(c[p]in w)return c[p];return c[0]}var A,I=C(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){w&&I&&(A=w[I],w[I]="none")},_.enableDrag=function(){w&&I&&(w[I]=A)};var O=C(["transform","WebkitTransform"]);_.setTransform=function(c,p){c.style[O]=p};var D=!1;try{var B=Object.defineProperty({},"passive",{get:function(){D=!0}});a.window.addEventListener("test",B,B),a.window.removeEventListener("test",B,B)}catch{D=!1}_.addEventListener=function(c,p,f,m){m===void 0&&(m={}),c.addEventListener(p,f,"passive"in m&&D?m:m.capture)},_.removeEventListener=function(c,p,f,m){m===void 0&&(m={}),c.removeEventListener(p,f,"passive"in m&&D?m:m.capture)};var H=function(c){c.preventDefault(),c.stopPropagation(),a.window.removeEventListener("click",H,!0)};function R(c){var p=c.userImage;return!!(p&&p.render&&p.render())&&(c.data.replace(new Uint8Array(p.data.buffer)),!0)}_.suppressClick=function(){a.window.addEventListener("click",H,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",H,!0)},0)},_.mousePos=function(c,p){var f=c.getBoundingClientRect();return new a.Point(p.clientX-f.left-c.clientLeft,p.clientY-f.top-c.clientTop)},_.touchPos=function(c,p){for(var f=c.getBoundingClientRect(),m=[],b=0;b<p.length;b++)m.push(new a.Point(p[b].clientX-f.left-c.clientLeft,p[b].clientY-f.top-c.clientTop));return m},_.mouseButton=function(c){return a.window.InstallTrigger!==void 0&&c.button===2&&c.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:c.button},_.remove=function(c){c.parentNode&&c.parentNode.removeChild(c)};var U=function(c){function p(){c.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(f){if(this.loaded!==f&&(this.loaded=f,f)){for(var m=0,b=this.requestors;m<b.length;m+=1){var E=b[m];this._notify(E.ids,E.callback)}this.requestors=[]}},p.prototype.getImage=function(f){return this.images[f]},p.prototype.addImage=function(f,m){this._validate(f,m)&&(this.images[f]=m)},p.prototype._validate=function(f,m){var b=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+f+'" has invalid "stretchX" value'))),b=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+f+'" has invalid "stretchY" value'))),b=!1),this._validateContent(m.content,m)||(this.fire(new a.ErrorEvent(new Error('Image "'+f+'" has invalid "content" value'))),b=!1),b},p.prototype._validateStretch=function(f,m){if(!f)return!0;for(var b=0,E=0,P=f;E<P.length;E+=1){var L=P[E];if(L[0]<b||L[1]<L[0]||m<L[1])return!1;b=L[1]}return!0},p.prototype._validateContent=function(f,m){return!(f&&(f.length!==4||f[0]<0||m.data.width<f[0]||f[1]<0||m.data.height<f[1]||f[2]<0||m.data.width<f[2]||f[3]<0||m.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))},p.prototype.updateImage=function(f,m){m.version=this.images[f].version+1,this.images[f]=m,this.updatedImages[f]=!0},p.prototype.removeImage=function(f){var m=this.images[f];delete this.images[f],delete this.patterns[f],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(f,m){var b=!0;if(!this.isLoaded())for(var E=0,P=f;E<P.length;E+=1)this.images[P[E]]||(b=!1);this.isLoaded()||b?this._notify(f,m):this.requestors.push({ids:f,callback:m})},p.prototype._notify=function(f,m){for(var b={},E=0,P=f;E<P.length;E+=1){var L=P[E];this.images[L]||this.fire(new a.Event("styleimagemissing",{id:L}));var N=this.images[L];N?b[L]={data:N.data.clone(),pixelRatio:N.pixelRatio,sdf:N.sdf,version:N.version,stretchX:N.stretchX,stretchY:N.stretchY,content:N.content,hasRenderCallback:!!(N.userImage&&N.userImage.render)}:a.warnOnce('Image "'+L+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}m(null,b)},p.prototype.getPixelSize=function(){var f=this.atlasImage;return{width:f.width,height:f.height}},p.prototype.getPattern=function(f){var m=this.patterns[f],b=this.getImage(f);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{var E={w:b.data.width+2,h:b.data.height+2,x:0,y:0},P=new a.ImagePosition(E,b);this.patterns[f]={bin:E,position:P}}return this._updatePatternAtlas(),this.patterns[f].position},p.prototype.bind=function(f){var m=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(f,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var f=[];for(var m in this.patterns)f.push(this.patterns[m].bin);var b=a.potpack(f),E=b.w,P=b.h,L=this.atlasImage;for(var N in L.resize({width:E||1,height:P||1}),this.patterns){var G=this.patterns[N].bin,te=G.x+1,ie=G.y+1,ne=this.images[N].data,ye=ne.width,me=ne.height;a.RGBAImage.copy(ne,L,{x:0,y:0},{x:te,y:ie},{width:ye,height:me}),a.RGBAImage.copy(ne,L,{x:0,y:me-1},{x:te,y:ie-1},{width:ye,height:1}),a.RGBAImage.copy(ne,L,{x:0,y:0},{x:te,y:ie+me},{width:ye,height:1}),a.RGBAImage.copy(ne,L,{x:ye-1,y:0},{x:te-1,y:ie},{width:1,height:me}),a.RGBAImage.copy(ne,L,{x:0,y:0},{x:te+ye,y:ie},{width:1,height:me})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(f){for(var m=0,b=f;m<b.length;m+=1){var E=b[m];if(!this.callbackDispatchedThisFrame[E]){this.callbackDispatchedThisFrame[E]=!0;var P=this.images[E];R(P)&&this.updateImage(E,P)}}},p}(a.Evented),q=W,Y=W,se=1e20;function W(c,p,f,m,b,E){this.fontSize=c||24,this.buffer=p===void 0?3:p,this.cutoff=m||.25,this.fontFamily=b||"sans-serif",this.fontWeight=E||"normal",this.radius=f||8;var P=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=P,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.d=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Int16Array(P),this.middle=Math.round(P/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ce(c,p,f,m,b,E,P){for(var L=0;L<p;L++){for(var N=0;N<f;N++)m[N]=c[N*p+L];for(xe(m,b,E,P,f),N=0;N<f;N++)c[N*p+L]=b[N]}for(N=0;N<f;N++){for(L=0;L<p;L++)m[L]=c[N*p+L];for(xe(m,b,E,P,p),L=0;L<p;L++)c[N*p+L]=Math.sqrt(b[L])}}function xe(c,p,f,m,b){f[0]=0,m[0]=-se,m[1]=+se;for(var E=1,P=0;E<b;E++){for(var L=(c[E]+E*E-(c[f[P]]+f[P]*f[P]))/(2*E-2*f[P]);L<=m[P];)P--,L=(c[E]+E*E-(c[f[P]]+f[P]*f[P]))/(2*E-2*f[P]);f[++P]=E,m[P]=L,m[P+1]=+se}for(E=0,P=0;E<b;E++){for(;m[P+1]<E;)P++;p[E]=(E-f[P])*(E-f[P])+c[f[P]]}}W.prototype.draw=function(c){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(c,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),f=new Uint8ClampedArray(this.size*this.size),m=0;m<this.size*this.size;m++){var b=p.data[4*m+3]/255;this.gridOuter[m]=b===1?0:b===0?se:Math.pow(Math.max(0,.5-b),2),this.gridInner[m]=b===1?se:b===0?0:Math.pow(Math.max(0,b-.5),2)}for(ce(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ce(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),m=0;m<this.size*this.size;m++)f[m]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[m]-this.gridInner[m])/this.radius+this.cutoff))));return f},q.default=Y;var Me=function(c,p){this.requestManager=c,this.localIdeographFontFamily=p,this.entries={}};Me.prototype.setURL=function(c){this.url=c},Me.prototype.getGlyphs=function(c,p){var f=this,m=[];for(var b in c)for(var E=0,P=c[b];E<P.length;E+=1)m.push({stack:b,id:P[E]});a.asyncAll(m,function(L,N){var G=L.stack,te=L.id,ie=f.entries[G];ie||(ie=f.entries[G]={glyphs:{},requests:{},ranges:{}});var ne=ie.glyphs[te];if(ne===void 0){if(ne=f._tinySDF(ie,G,te))return ie.glyphs[te]=ne,void N(null,{stack:G,id:te,glyph:ne});var ye=Math.floor(te/256);if(256*ye>65535)N(new Error("glyphs > 65535 not supported"));else if(ie.ranges[ye])N(null,{stack:G,id:te,glyph:ne});else{var me=ie.requests[ye];me||(me=ie.requests[ye]=[],Me.loadGlyphRange(G,ye,f.url,f.requestManager,function(Ce,de){if(de){for(var Se in de)f._doesCharSupportLocalGlyph(+Se)||(ie.glyphs[+Se]=de[+Se]);ie.ranges[ye]=!0}for(var Ie=0,Fe=me;Ie<Fe.length;Ie+=1)(0,Fe[Ie])(Ce,de);delete ie.requests[ye]})),me.push(function(Ce,de){Ce?N(Ce):de&&N(null,{stack:G,id:te,glyph:de[te]||null})})}}else N(null,{stack:G,id:te,glyph:ne})},function(L,N){if(L)p(L);else if(N){for(var G={},te=0,ie=N;te<ie.length;te+=1){var ne=ie[te],ye=ne.stack,me=ne.id,Ce=ne.glyph;(G[ye]||(G[ye]={}))[me]=Ce&&{id:Ce.id,bitmap:Ce.bitmap.clone(),metrics:Ce.metrics}}p(null,G)}})},Me.prototype._doesCharSupportLocalGlyph=function(c){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](c)||a.isChar["Hangul Syllables"](c)||a.isChar.Hiragana(c)||a.isChar.Katakana(c))},Me.prototype._tinySDF=function(c,p,f){var m=this.localIdeographFontFamily;if(m&&this._doesCharSupportLocalGlyph(f)){var b=c.tinySDF;if(!b){var E="400";/bold/i.test(p)?E="900":/medium/i.test(p)?E="500":/light/i.test(p)&&(E="200"),b=c.tinySDF=new Me.TinySDF(24,3,8,.25,m,E)}return{id:f,bitmap:new a.AlphaImage({width:30,height:30},b.draw(String.fromCharCode(f))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Me.loadGlyphRange=function(c,p,f,m,b){var E=256*p,P=E+255,L=m.transformRequest(m.normalizeGlyphsURL(f).replace("{fontstack}",c).replace("{range}",E+"-"+P),a.ResourceType.Glyphs);a.getArrayBuffer(L,function(N,G){if(N)b(N);else if(G){for(var te={},ie=0,ne=a.parseGlyphPBF(G);ie<ne.length;ie+=1){var ye=ne[ie];te[ye.id]=ye}b(null,te)}})},Me.TinySDF=q;var $e=function(){this.specification=a.styleSpec.light.position};$e.prototype.possiblyEvaluate=function(c,p){return a.sphericalToCartesian(c.expression.evaluate(p))},$e.prototype.interpolate=function(c,p,f){return{x:a.number(c.x,p.x,f),y:a.number(c.y,p.y,f),z:a.number(c.z,p.z,f)}};var Le=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new $e,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Ge=function(c){function p(f){c.call(this),this._transitionable=new a.Transitionable(Le),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(f,m){if(m===void 0&&(m={}),!this._validate(a.validateLight,f,m))for(var b in f){var E=f[b];a.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),E):this._transitionable.setValue(b,E)}},p.prototype.updateTransitions=function(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(f){this.properties=this._transitioning.possiblyEvaluate(f)},p.prototype._validate=function(f,m,b){return(!b||b.validate!==!1)&&a.emitValidationErrors(this,f.call(a.validateStyle,a.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},p}(a.Evented),Ye=function(c,p){this.width=c,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ye.prototype.getDash=function(c,p){var f=c.join(",")+String(p);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(c,p)),this.dashEntry[f]},Ye.prototype.getDashRanges=function(c,p,f){var m=[],b=c.length%2==1?-c[c.length-1]*f:0,E=c[0]*f,P=!0;m.push({left:b,right:E,isDash:P,zeroLength:c[0]===0});for(var L=c[0],N=1;N<c.length;N++){var G=c[N];m.push({left:b=L*f,right:E=(L+=G)*f,isDash:P=!P,zeroLength:G===0})}return m},Ye.prototype.addRoundDash=function(c,p,f){for(var m=p/2,b=-f;b<=f;b++)for(var E=this.width*(this.nextRow+f+b),P=0,L=c[P],N=0;N<this.width;N++){N/L.right>1&&(L=c[++P]);var G=Math.abs(N-L.left),te=Math.abs(N-L.right),ie=Math.min(G,te),ne=void 0,ye=b/f*(m+1);if(L.isDash){var me=m-Math.abs(ye);ne=Math.sqrt(ie*ie+me*me)}else ne=m-Math.sqrt(ie*ie+ye*ye);this.data[E+N]=Math.max(0,Math.min(255,ne+128))}},Ye.prototype.addRegularDash=function(c){for(var p=c.length-1;p>=0;--p){var f=c[p],m=c[p+1];f.zeroLength?c.splice(p,1):m&&m.isDash===f.isDash&&(m.left=f.left,c.splice(p,1))}var b=c[0],E=c[c.length-1];b.isDash===E.isDash&&(b.left=E.left-this.width,E.right=b.right+this.width);for(var P=this.width*this.nextRow,L=0,N=c[L],G=0;G<this.width;G++){G/N.right>1&&(N=c[++L]);var te=Math.abs(G-N.left),ie=Math.abs(G-N.right),ne=Math.min(te,ie);this.data[P+G]=Math.max(0,Math.min(255,(N.isDash?ne:-ne)+128))}},Ye.prototype.addDash=function(c,p){var f=p?7:0,m=2*f+1;if(this.nextRow+m>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var b=0,E=0;E<c.length;E++)b+=c[E];if(b!==0){var P=this.width/b,L=this.getDashRanges(c,this.width,P);p?this.addRoundDash(L,P,f):this.addRegularDash(L)}var N={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:b};return this.nextRow+=m,this.dirty=!0,N},Ye.prototype.bind=function(c){var p=c.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var ht=function c(p,f){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var m=this.workerPool.acquire(this.id),b=0;b<m.length;b++){var E=new c.Actor(m[b],f,this.id);E.name="Worker "+b,this.actors.push(E)}};function Lt(c,p,f){var m=function(b,E){if(b)return f(b);if(E){var P=a.pick(a.extend(E,c),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(P.vectorLayers=E.vector_layers,P.vectorLayerIds=P.vectorLayers.map(function(L){return L.id})),P.tiles=p.canonicalizeTileset(P,c.url),f(null,P)}};return c.url?a.getJSON(p.transformRequest(p.normalizeSourceURL(c.url),a.ResourceType.Source),m):a.browser.frame(function(){return m(null,c)})}ht.prototype.broadcast=function(c,p,f){a.asyncAll(this.actors,function(m,b){m.send(c,p,b)},f=f||function(){})},ht.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ht.prototype.remove=function(){this.actors.forEach(function(c){c.remove()}),this.actors=[],this.workerPool.release(this.id)},ht.Actor=a.Actor;var Dt=function(c,p,f){this.bounds=a.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=p||0,this.maxzoom=f||24};Dt.prototype.validateBounds=function(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]},Dt.prototype.contains=function(c){var p=Math.pow(2,c.z),f=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*p),m=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*p),b=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*p),E=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*p);return c.x>=f&&c.x<b&&c.y>=m&&c.y<E};var qt=function(c){function p(f,m,b,E){if(c.call(this),this.id=f,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(m,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.load=function(){var f=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Lt(this._options,this.map._requestManager,function(m,b){f._tileJSONRequest=null,f._loaded=!0,m?f.fire(new a.ErrorEvent(m)):b&&(a.extend(f,b),b.bounds&&(f.tileBounds=new Dt(b.bounds,f.minzoom,f.maxzoom)),a.postTurnstileEvent(b.tiles,f.map._requestManager._customAccessToken),a.postMapLoadEvent(b.tiles,f.map._getMapId(),f.map._requestManager._skuToken,f.map._requestManager._customAccessToken),f.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),f.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.setSourceProperty=function(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(f){var m=this;return this.setSourceProperty(function(){m._options.tiles=f}),this},p.prototype.setUrl=function(f){var m=this;return this.setSourceProperty(function(){m.url=f,m._options.url=f}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return a.extend({},this._options)},p.prototype.loadTile=function(f,m){var b=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(b,a.ResourceType.Tile),uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function P(L,N){return delete f.request,f.aborted?m(null):L&&L.status!==404?m(L):(N&&N.resourceTiming&&(f.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&f.setExpiryData(N),f.loadVectorData(N,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired"?f.state==="loading"?f.reloadCallback=m:f.request=f.actor.send("reloadTile",E,P.bind(this)):(f.actor=this.dispatcher.getActor(),f.request=f.actor.send("loadTile",E,P.bind(this)))},p.prototype.abortTile=function(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(a.Evented),Ne=function(c){function p(f,m,b,E){c.call(this),this.id=f,this.dispatcher=b,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},m),a.extend(this,a.pick(m,["url","scheme","tileSize"]))}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.load=function(){var f=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Lt(this._options,this.map._requestManager,function(m,b){f._tileJSONRequest=null,f._loaded=!0,m?f.fire(new a.ErrorEvent(m)):b&&(a.extend(f,b),b.bounds&&(f.tileBounds=new Dt(b.bounds,f.minzoom,f.maxzoom)),a.postTurnstileEvent(b.tiles),a.postMapLoadEvent(b.tiles,f.map._getMapId(),f.map._requestManager._skuToken),f.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),f.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return a.extend({},this._options)},p.prototype.hasTile=function(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)},p.prototype.loadTile=function(f,m){var b=this,E=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);f.request=a.getImage(this.map._requestManager.transformRequest(E,a.ResourceType.Tile),function(P,L){if(delete f.request,f.aborted)f.state="unloaded",m(null);else if(P)f.state="errored",m(P);else if(L){b.map._refreshExpiredTiles&&f.setExpiryData(L),delete L.cacheControl,delete L.expires;var N=b.map.painter.context,G=N.gl;f.texture=b.map.painter.getTileTexture(L.width),f.texture?f.texture.update(L,{useMipmap:!0}):(f.texture=new a.Texture(N,L,G.RGBA,{useMipmap:!0}),f.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),N.extTextureFilterAnisotropic&&G.texParameterf(G.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax)),f.state="loaded",a.cacheEntryPossiblyAdded(b.dispatcher),m(null)}})},p.prototype.abortTile=function(f,m){f.request&&(f.request.cancel(),delete f.request),m()},p.prototype.unloadTile=function(f,m){f.texture&&this.map.painter.saveTileTexture(f.texture),m()},p.prototype.hasTransition=function(){return!1},p}(a.Evented),ve=function(c){function p(f,m,b,E){c.call(this,f,m,b,E),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox"}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(f,m){var b=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function E(P,L){P&&(f.state="errored",m(P)),L&&(f.dem=L,f.needsHillshadePrepare=!0,f.state="loaded",m(null))}f.request=a.getImage(this.map._requestManager.transformRequest(b,a.ResourceType.Tile),function(P,L){if(delete f.request,f.aborted)f.state="unloaded",m(null);else if(P)f.state="errored",m(P);else if(L){this.map._refreshExpiredTiles&&f.setExpiryData(L),delete L.cacheControl,delete L.expires;var N=a.window.ImageBitmap&&L instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?L:a.browser.getImageData(L,1),G={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:N,encoding:this.encoding};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",G,E.bind(this)))}}.bind(this)),f.neighboringTiles=this._getNeighboringTiles(f.tileID)},p.prototype._getNeighboringTiles=function(f){var m=f.canonical,b=Math.pow(2,m.z),E=(m.x-1+b)%b,P=m.x===0?f.wrap-1:f.wrap,L=(m.x+1+b)%b,N=m.x+1===b?f.wrap+1:f.wrap,G={};return G[new a.OverscaledTileID(f.overscaledZ,P,m.z,E,m.y).key]={backfilled:!1},G[new a.OverscaledTileID(f.overscaledZ,N,m.z,L,m.y).key]={backfilled:!1},m.y>0&&(G[new a.OverscaledTileID(f.overscaledZ,P,m.z,E,m.y-1).key]={backfilled:!1},G[new a.OverscaledTileID(f.overscaledZ,f.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},G[new a.OverscaledTileID(f.overscaledZ,N,m.z,L,m.y-1).key]={backfilled:!1}),m.y+1<b&&(G[new a.OverscaledTileID(f.overscaledZ,P,m.z,E,m.y+1).key]={backfilled:!1},G[new a.OverscaledTileID(f.overscaledZ,f.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},G[new a.OverscaledTileID(f.overscaledZ,N,m.z,L,m.y+1).key]={backfilled:!1}),G},p.prototype.unloadTile=function(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded",f.actor&&f.actor.send("removeDEMTile",{uid:f.uid,source:this.id})},p}(Ne),_e=function(c){function p(f,m,b,E){c.call(this),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=b.getActor(),this.setEventedParent(E),this._data=m.data,this._options=a.extend({},m),this._collectResourceTiming=m.collectResourceTiming,this._resourceTiming=[],m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;var P=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*P,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*P,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?Math.min(m.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.EXTENT,radius:(m.clusterRadius||50)*P,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.load=function(){var f=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)f.fire(new a.ErrorEvent(m));else{var b={dataType:"source",sourceDataType:"metadata"};f._collectResourceTiming&&f._resourceTiming&&f._resourceTiming.length>0&&(b.resourceTiming=f._resourceTiming,f._resourceTiming=[]),f.fire(new a.Event("data",b))}})},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.setData=function(f){var m=this;return this._data=f,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(b){if(b)m.fire(new a.ErrorEvent(b));else{var E={dataType:"source",sourceDataType:"content"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(E.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new a.Event("data",E))}}),this},p.prototype.getClusterExpansionZoom=function(f,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},m),this},p.prototype.getClusterChildren=function(f,m){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},m),this},p.prototype.getClusterLeaves=function(f,m,b,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:m,offset:b},E),this},p.prototype._updateWorkerData=function(f){var m=this;this._loaded=!1;var b=a.extend({},this.workerOptions),E=this._data;typeof E=="string"?(b.request=this.map._requestManager.transformRequest(a.browser.resolveURL(E),a.ResourceType.Source),b.request.collectResourceTiming=this._collectResourceTiming):b.data=JSON.stringify(E),this.actor.send(this.type+".loadData",b,function(P,L){m._removed||L&&L.abandoned||(m._loaded=!0,L&&L.resourceTiming&&L.resourceTiming[m.id]&&(m._resourceTiming=L.resourceTiming[m.id].slice(0)),m.actor.send(m.type+".coalesce",{source:b.source},null),f(P))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(f,m){var b=this,E=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(E,{type:this.type,uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(P,L){return delete f.request,f.unloadVectorData(),f.aborted?m(null):P?m(P):(f.loadVectorData(L,b.map.painter,E==="reloadTile"),m(null))})},p.prototype.abortTile=function(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0},p.prototype.unloadTile=function(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(a.Evented),K=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ae=function(c){function p(f,m,b,E){c.call(this),this.id=f,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=m}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.load=function(f,m){var b=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(E,P){b._loaded=!0,E?b.fire(new a.ErrorEvent(E)):P&&(b.image=P,f&&(b.coordinates=f),m&&m(),b._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(f){var m=this;return this.image&&f.url?(this.options.url=f.url,this.load(f.coordinates,function(){m.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(f){this.map=f,this.load()},p.prototype.setCoordinates=function(f){var m=this;this.coordinates=f;var b=f.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(P){for(var L=1/0,N=1/0,G=-1/0,te=-1/0,ie=0,ne=P;ie<ne.length;ie+=1){var ye=ne[ie];L=Math.min(L,ye.x),N=Math.min(N,ye.y),G=Math.max(G,ye.x),te=Math.max(te,ye.y)}var me=Math.max(G-L,te-N),Ce=Math.max(0,Math.floor(-Math.log(me)/Math.LN2)),de=Math.pow(2,Ce);return new a.CanonicalTileID(Ce,Math.floor((L+G)/2*de),Math.floor((N+te)/2*de))}(b),this.minzoom=this.maxzoom=this.tileID.z;var E=b.map(function(P){return m.tileID.getTilePoint(P)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(E[2].x,E[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var f=this.map.painter.context,m=f.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(f,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},p.prototype.loadTile=function(f,m){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},m(null)):(f.state="errored",m(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(a.Evented),lt=function(c){function p(f,m,b,E){c.call(this,f,m,b,E),this.roundZoom=!0,this.type="video",this.options=m}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.load=function(){var f=this;this._loaded=!1;var m=this.options;this.urls=[];for(var b=0,E=m.urls;b<E.length;b+=1)this.urls.push(this.map._requestManager.transformRequest(E[b],a.ResourceType.Source).url);a.getVideo(this.urls,function(P,L){f._loaded=!0,P?f.fire(new a.ErrorEvent(P)):L&&(f.video=L,f.video.loop=!0,f.video.addEventListener("playing",function(){f.map.triggerRepaint()}),f.map&&f.video.play(),f._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(f){if(this.video){var m=this.video.seekable;f<m.start(0)||f>m.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+m.start(0)+" and "+m.end(0)+"-second mark."))):this.video.currentTime=f}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var f=this.map.painter.context,m=f.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(f,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(ae),Ot=function(c){function p(f,m,b,E){c.call(this,f,m,b,E),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some(function(P){return!Array.isArray(P)||P.length!==2||P.some(function(L){return typeof L!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+f,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+f,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+f,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+f,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+f,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var m=this.map.painter.context,b=m.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(m,this.canvas,b.RGBA,{premultiply:!0}),this.tiles){var P=this.tiles[E];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var f=0,m=[this.canvas.width,this.canvas.height];f<m.length;f+=1){var b=m[f];if(isNaN(b)||b<=0)return!0}return!1},p}(ae),Ht={vector:qt,raster:Ne,"raster-dem":ve,geojson:_e,video:lt,image:ae,canvas:Ot};function Ut(c,p){var f=a.identity([]);return a.translate(f,f,[1,1,0]),a.scale(f,f,[.5*c.width,.5*c.height,1]),a.multiply(f,f,c.calculatePosMatrix(p.toUnwrapped()))}function Kt(c,p,f,m,b,E){var P=function(Ce,de,Se){if(Ce)for(var Ie=0,Fe=Ce;Ie<Fe.length;Ie+=1){var We=de[Fe[Ie]];if(We&&We.source===Se&&We.type==="fill-extrusion")return!0}else for(var He in de){var Ke=de[He];if(Ke.source===Se&&Ke.type==="fill-extrusion")return!0}return!1}(b&&b.layers,p,c.id),L=E.maxPitchScaleFactor(),N=c.tilesIn(m,L,P);N.sort(cn);for(var G=[],te=0,ie=N;te<ie.length;te+=1){var ne=ie[te];G.push({wrappedTileID:ne.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(p,f,c._state,ne.queryGeometry,ne.cameraQueryGeometry,ne.scale,b,E,L,Ut(c.transform,ne.tileID))})}var ye=function(Ce){for(var de={},Se={},Ie=0,Fe=Ce;Ie<Fe.length;Ie+=1){var We=Fe[Ie],He=We.queryResults,Ke=We.wrappedTileID,tt=Se[Ke]=Se[Ke]||{};for(var pt in He)for(var ct=He[pt],bt=tt[pt]=tt[pt]||{},Bt=de[pt]=de[pt]||[],Xt=0,Wt=ct;Xt<Wt.length;Xt+=1){var Nn=Wt[Xt];bt[Nn.featureIndex]||(bt[Nn.featureIndex]=!0,Bt.push(Nn))}}return de}(G);for(var me in ye)ye[me].forEach(function(Ce){var de=Ce.feature,Se=c.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=Se});return ye}function cn(c,p){var f=c.tileID,m=p.tileID;return f.overscaledZ-m.overscaledZ||f.canonical.y-m.canonical.y||f.wrap-m.wrap||f.canonical.x-m.canonical.x}var sn=function(c,p){this.max=c,this.onRemove=p,this.reset()};sn.prototype.reset=function(){for(var c in this.data)for(var p=0,f=this.data[c];p<f.length;p+=1){var m=f[p];m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value)}return this.data={},this.order=[],this},sn.prototype.add=function(c,p,f){var m=this,b=c.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);var E={value:p,timeout:void 0};if(f!==void 0&&(E.timeout=setTimeout(function(){m.remove(c,E)},f)),this.data[b].push(E),this.order.push(b),this.order.length>this.max){var P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this},sn.prototype.has=function(c){return c.wrapped().key in this.data},sn.prototype.getAndRemove=function(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null},sn.prototype._getAndRemoveByKey=function(c){var p=this.data[c].shift();return p.timeout&&clearTimeout(p.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),p.value},sn.prototype.getByKey=function(c){var p=this.data[c];return p?p[0].value:null},sn.prototype.get=function(c){return this.has(c)?this.data[c.wrapped().key][0].value:null},sn.prototype.remove=function(c,p){if(!this.has(c))return this;var f=c.wrapped().key,m=p===void 0?0:this.data[f].indexOf(p),b=this.data[f][m];return this.data[f].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this},sn.prototype.setMaxSize=function(c){for(this.max=c;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},sn.prototype.filter=function(c){var p=[];for(var f in this.data)for(var m=0,b=this.data[f];m<b.length;m+=1){var E=b[m];c(E.value)||p.push(E)}for(var P=0,L=p;P<L.length;P+=1){var N=L[P];this.remove(N.value.tileID,N)}};var wr=function(c,p,f){this.context=c;var m=c.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};wr.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},wr.prototype.updateData=function(c){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)},wr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var pr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},li=function(c,p,f,m){this.length=p.length,this.attributes=f,this.itemSize=p.bytesPerElement,this.dynamicDraw=m,this.context=c;var b=c.gl;this.buffer=b.createBuffer(),c.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};li.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},li.prototype.updateData=function(c){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,c.arrayBuffer)},li.prototype.enableAttributes=function(c,p){for(var f=0;f<this.attributes.length;f++){var m=p.attributes[this.attributes[f].name];m!==void 0&&c.enableVertexAttribArray(m)}},li.prototype.setVertexAttribPointers=function(c,p,f){for(var m=0;m<this.attributes.length;m++){var b=this.attributes[m],E=p.attributes[b.name];E!==void 0&&c.vertexAttribPointer(E,b.components,c[pr[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}},li.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var dn=function(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};dn.prototype.get=function(){return this.current},dn.prototype.set=function(c){},dn.prototype.getDefault=function(){return this.default},dn.prototype.setDefault=function(){this.set(this.default)};var $r=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return a.Color.transparent},p.prototype.set=function(f){var m=this.current;(f.r!==m.r||f.g!==m.g||f.b!==m.b||f.a!==m.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)},p}(dn),Ur=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)},p}(dn),go=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)},p}(dn),yo=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(f){var m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||f[3]!==m[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)},p}(dn),ro=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)},p}(dn),ls=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)},p}(dn),Ci=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(f){var m=this.current;(f.func!==m.func||f.ref!==m.ref||f.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)},p}(dn),ui=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){var f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]},p.prototype.set=function(f){var m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)},p}(dn),Lo=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;f?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=f,this.dirty=!1}},p}(dn),Ii=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(f){var m=this.current;(f[0]!==m[0]||f[1]!==m[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)},p}(dn),Oi=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;f?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=f,this.dirty=!1}},p}(dn),Mo=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)},p}(dn),Ro=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;f?m.enable(m.BLEND):m.disable(m.BLEND),this.current=f,this.dirty=!1}},p}(dn),Xe=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){var f=this.gl;return[f.ONE,f.ZERO]},p.prototype.set=function(f){var m=this.current;(f[0]!==m[0]||f[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)},p}(dn),ue=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return a.Color.transparent},p.prototype.set=function(f){var m=this.current;(f.r!==m.r||f.g!==m.g||f.b!==m.b||f.a!==m.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)},p}(dn),Re=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)},p}(dn),nt=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;f?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=f,this.dirty=!1}},p}(dn),Tt=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)},p}(dn),bn=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)},p}(dn),Jn=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)},p}(dn),tn=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)},p}(dn),Pn=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){var f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]},p.prototype.set=function(f){var m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||f[3]!==m[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)},p}(dn),_r=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,f),this.current=f,this.dirty=!1}},p}(dn),Sr=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,f),this.current=f,this.dirty=!1}},p}(dn),Vn=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.bindTexture(m.TEXTURE_2D,f),this.current=f,this.dirty=!1}},p}(dn),qi=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}},p}(dn),Mr=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){var m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1},p}(dn),Fo=function(c){function p(f){c.call(this,f),this.vao=f.extVertexArrayObject}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)},p}(dn),pa=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}},p}(dn),io=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}},p}(dn),ei=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(f){if(f!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}},p}(dn),or=function(c){function p(f,m){c.call(this,f),this.context=f,this.parent=m}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(dn),V=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(f){if(f!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}},p}(or),Z=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.set=function(f){if(f!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,f),this.current=f,this.dirty=!1}},p}(or),J=function(c,p,f,m){this.context=c,this.width=p,this.height=f;var b=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new V(c,b),m&&(this.depthAttachment=new Z(c,b))};J.prototype.destroy=function(){var c=this.context.gl,p=this.colorAttachment.get();if(p&&c.deleteTexture(p),this.depthAttachment){var f=this.depthAttachment.get();f&&c.deleteRenderbuffer(f)}c.deleteFramebuffer(this.framebuffer)};var oe=function(c,p,f){this.func=c,this.mask=p,this.range=f};oe.ReadOnly=!1,oe.ReadWrite=!0,oe.disabled=new oe(519,oe.ReadOnly,[0,1]);var ge=function(c,p,f,m,b,E){this.test=c,this.ref=p,this.mask=f,this.fail=m,this.depthFail=b,this.pass=E};ge.disabled=new ge({func:519,mask:0},0,0,7680,7680,7680);var Ae=function(c,p,f){this.blendFunction=c,this.blendColor=p,this.mask=f};Ae.disabled=new Ae(Ae.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),Ae.unblended=new Ae(Ae.Replace,a.Color.transparent,[!0,!0,!0,!0]),Ae.alphaBlended=new Ae([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Te=function(c,p,f){this.enable=c,this.mode=p,this.frontFace=f};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var Ee=function(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new $r(this),this.clearDepth=new Ur(this),this.clearStencil=new go(this),this.colorMask=new yo(this),this.depthMask=new ro(this),this.stencilMask=new ls(this),this.stencilFunc=new Ci(this),this.stencilOp=new ui(this),this.stencilTest=new Lo(this),this.depthRange=new Ii(this),this.depthTest=new Oi(this),this.depthFunc=new Mo(this),this.blend=new Ro(this),this.blendFunc=new Xe(this),this.blendColor=new ue(this),this.blendEquation=new Re(this),this.cullFace=new nt(this),this.cullFaceSide=new Tt(this),this.frontFace=new bn(this),this.program=new Jn(this),this.activeTexture=new tn(this),this.viewport=new Pn(this),this.bindFramebuffer=new _r(this),this.bindRenderbuffer=new Sr(this),this.bindTexture=new Vn(this),this.bindVertexBuffer=new qi(this),this.bindElementBuffer=new Mr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Fo(this),this.pixelStoreUnpack=new pa(this),this.pixelStoreUnpackPremultiplyAlpha=new io(this),this.pixelStoreUnpackFlipY=new ei(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)};Ee.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ee.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ee.prototype.createIndexBuffer=function(c,p){return new wr(this,c,p)},Ee.prototype.createVertexBuffer=function(c,p,f){return new li(this,c,p,f)},Ee.prototype.createRenderbuffer=function(c,p,f){var m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,c,p,f),this.bindRenderbuffer.set(null),b},Ee.prototype.createFramebuffer=function(c,p,f){return new J(this,c,p,f)},Ee.prototype.clear=function(c){var p=c.color,f=c.depth,m=this.gl,b=0;p&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),m.clear(b)},Ee.prototype.setCullFace=function(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))},Ee.prototype.setDepthMode=function(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)},Ee.prototype.setStencilMode=function(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)},Ee.prototype.setColorMode=function(c){a.deepEqual(c.blendFunction,Ae.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)},Ee.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var le=function(c){function p(f,m,b){var E=this;c.call(this),this.id=f,this.dispatcher=b,this.on("data",function(P){P.dataType==="source"&&P.sourceDataType==="metadata"&&(E._sourceLoaded=!0),E._sourceLoaded&&!E._paused&&P.dataType==="source"&&P.sourceDataType==="content"&&(E.reload(),E.transform&&E.update(E.transform))}),this.on("error",function(){E._sourceErrored=!0}),this._source=function(P,L,N,G){var te=new Ht[L.type](P,L,N,G);if(te.id!==P)throw new Error("Expected Source id to be "+P+" instead of "+te.id);return a.bindAll(["load","abort","unload","serialize","prepare"],te),te}(f,m,b,this),this._tiles={},this._cache=new sn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.onAdd=function(f){this.map=f,this._maxTileCacheSize=f?f._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(f)},p.prototype.onRemove=function(f){this._source&&this._source.onRemove&&this._source.onRemove(f)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var f in this._tiles){var m=this._tiles[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var f=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,f&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(f,m){return this._source.loadTile(f,m)},p.prototype._unloadTile=function(f){if(this._source.unloadTile)return this._source.unloadTile(f,function(){})},p.prototype._abortTile=function(f){if(this._source.abortTile)return this._source.abortTile(f,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(f){for(var m in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var b=this._tiles[m];b.upload(f),b.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return a.values(this._tiles).map(function(f){return f.tileID}).sort(be).map(function(f){return f.key})},p.prototype.getRenderableIds=function(f){var m=this,b=[];for(var E in this._tiles)this._isIdRenderable(E,f)&&b.push(this._tiles[E]);return f?b.sort(function(P,L){var N=P.tileID,G=L.tileID,te=new a.Point(N.canonical.x,N.canonical.y)._rotate(m.transform.angle),ie=new a.Point(G.canonical.x,G.canonical.y)._rotate(m.transform.angle);return N.overscaledZ-G.overscaledZ||ie.y-te.y||ie.x-te.x}).map(function(P){return P.tileID.key}):b.map(function(P){return P.tileID}).sort(be).map(function(P){return P.key})},p.prototype.hasRenderableParent=function(f){var m=this.findLoadedParent(f,0);return!!m&&this._isIdRenderable(m.tileID.key)},p.prototype._isIdRenderable=function(f,m){return this._tiles[f]&&this._tiles[f].hasData()&&!this._coveredTiles[f]&&(m||!this._tiles[f].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var f in this._cache.reset(),this._tiles)this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")},p.prototype._reloadTile=function(f,m){var b=this._tiles[f];b&&(b.state!=="loading"&&(b.state=m),this._loadTile(b,this._tileLoaded.bind(this,b,f,m)))},p.prototype._tileLoaded=function(f,m,b,E){if(E)return f.state="errored",void(E.status!==404?this._source.fire(new a.ErrorEvent(E,{tile:f})):this.update(this.transform));f.timeAdded=a.browser.now(),b==="expired"&&(f.refreshedUponExpiration=!0),this._setTileReloadTimer(m,f),this.getSource().type==="raster-dem"&&f.dem&&this._backfillDEM(f),this._state.initializeTileState(f,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:f,coord:f.tileID}))},p.prototype._backfillDEM=function(f){for(var m=this.getRenderableIds(),b=0;b<m.length;b++){var E=m[b];if(f.neighboringTiles&&f.neighboringTiles[E]){var P=this.getTileByID(E);L(f,P),L(P,f)}}function L(N,G){N.needsHillshadePrepare=!0;var te=G.tileID.canonical.x-N.tileID.canonical.x,ie=G.tileID.canonical.y-N.tileID.canonical.y,ne=Math.pow(2,N.tileID.canonical.z),ye=G.tileID.key;te===0&&ie===0||Math.abs(ie)>1||(Math.abs(te)>1&&(Math.abs(te+ne)===1?te+=ne:Math.abs(te-ne)===1&&(te-=ne)),G.dem&&N.dem&&(N.dem.backfillBorder(G.dem,te,ie),N.neighboringTiles&&N.neighboringTiles[ye]&&(N.neighboringTiles[ye].backfilled=!0)))}},p.prototype.getTile=function(f){return this.getTileByID(f.key)},p.prototype.getTileByID=function(f){return this._tiles[f]},p.prototype._retainLoadedChildren=function(f,m,b,E){for(var P in this._tiles){var L=this._tiles[P];if(!(E[P]||!L.hasData()||L.tileID.overscaledZ<=m||L.tileID.overscaledZ>b)){for(var N=L.tileID;L&&L.tileID.overscaledZ>m+1;){var G=L.tileID.scaledTo(L.tileID.overscaledZ-1);(L=this._tiles[G.key])&&L.hasData()&&(N=G)}for(var te=N;te.overscaledZ>m;)if(f[(te=te.scaledTo(te.overscaledZ-1)).key]){E[N.key]=N;break}}}},p.prototype.findLoadedParent=function(f,m){if(f.key in this._loadedParentTiles){var b=this._loadedParentTiles[f.key];return b&&b.tileID.overscaledZ>=m?b:null}for(var E=f.overscaledZ-1;E>=m;E--){var P=f.scaledTo(E),L=this._getLoadedTile(P);if(L)return L}},p.prototype._getLoadedTile=function(f){var m=this._tiles[f.key];return m&&m.hasData()?m:this._cache.getByKey(f.wrapped().key)},p.prototype.updateCacheSize=function(f){var m=Math.ceil(f.width/this._source.tileSize)+1,b=Math.ceil(f.height/this._source.tileSize)+1,E=Math.floor(m*b*5),P=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(P)},p.prototype.handleWrapJump=function(f){var m=Math.round((f-(this._prevLng===void 0?f:this._prevLng))/360);if(this._prevLng=f,m){var b={};for(var E in this._tiles){var P=this._tiles[E];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+m),b[P.tileID.key]=P}for(var L in this._tiles=b,this._timers)clearTimeout(this._timers[L]),delete this._timers[L];for(var N in this._tiles)this._setTileReloadTimer(N,this._tiles[N])}},p.prototype.update=function(f){var m=this;if(this.transform=f,this._sourceLoaded&&!this._paused){var b;this.updateCacheSize(f),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?b=f.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(tt){return new a.OverscaledTileID(tt.canonical.z,tt.wrap,tt.canonical.z,tt.canonical.x,tt.canonical.y)}):(b=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(b=b.filter(function(tt){return m._source.hasTile(tt)}))):b=[];var E=f.coveringZoomLevel(this._source),P=Math.max(E-p.maxOverzooming,this._source.minzoom),L=Math.max(E+p.maxUnderzooming,this._source.minzoom),N=this._updateRetainedTiles(b,E);if(at(this._source.type)){for(var G={},te={},ie=0,ne=Object.keys(N);ie<ne.length;ie+=1){var ye=ne[ie],me=N[ye],Ce=this._tiles[ye];if(Ce&&!(Ce.fadeEndTime&&Ce.fadeEndTime<=a.browser.now())){var de=this.findLoadedParent(me,P);de&&(this._addTile(de.tileID),G[de.tileID.key]=de.tileID),te[ye]=me}}for(var Se in this._retainLoadedChildren(te,E,L,N),G)N[Se]||(this._coveredTiles[Se]=!0,N[Se]=G[Se])}for(var Ie in N)this._tiles[Ie].clearFadeHold();for(var Fe=0,We=a.keysDifference(this._tiles,N);Fe<We.length;Fe+=1){var He=We[Fe],Ke=this._tiles[He];Ke.hasSymbolBuckets&&!Ke.holdingForFade()?Ke.setHoldDuration(this.map._fadeDuration):Ke.hasSymbolBuckets&&!Ke.symbolFadeFinished()||this._removeTile(He)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var f in this._tiles)this._tiles[f].holdingForFade()&&this._removeTile(f)},p.prototype._updateRetainedTiles=function(f,m){for(var b={},E={},P=Math.max(m-p.maxOverzooming,this._source.minzoom),L=Math.max(m+p.maxUnderzooming,this._source.minzoom),N={},G=0,te=f;G<te.length;G+=1){var ie=te[G],ne=this._addTile(ie);b[ie.key]=ie,ne.hasData()||m<this._source.maxzoom&&(N[ie.key]=ie)}this._retainLoadedChildren(N,m,L,b);for(var ye=0,me=f;ye<me.length;ye+=1){var Ce=me[ye],de=this._tiles[Ce.key];if(!de.hasData()){if(m+1>this._source.maxzoom){var Se=Ce.children(this._source.maxzoom)[0],Ie=this.getTile(Se);if(Ie&&Ie.hasData()){b[Se.key]=Se;continue}}else{var Fe=Ce.children(this._source.maxzoom);if(b[Fe[0].key]&&b[Fe[1].key]&&b[Fe[2].key]&&b[Fe[3].key])continue}for(var We=de.wasRequested(),He=Ce.overscaledZ-1;He>=P;--He){var Ke=Ce.scaledTo(He);if(E[Ke.key]||(E[Ke.key]=!0,!(de=this.getTile(Ke))&&We&&(de=this._addTile(Ke)),de&&(b[Ke.key]=Ke,We=de.wasRequested(),de.hasData())))break}}}return b},p.prototype._updateLoadedParentTileCache=function(){for(var f in this._loadedParentTiles={},this._tiles){for(var m=[],b=void 0,E=this._tiles[f].tileID;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){b=this._loadedParentTiles[E.key];break}m.push(E.key);var P=E.scaledTo(E.overscaledZ-1);if(b=this._getLoadedTile(P))break;E=P}for(var L=0,N=m;L<N.length;L+=1)this._loadedParentTiles[N[L]]=b}},p.prototype._addTile=function(f){var m=this._tiles[f.key];if(m)return m;(m=this._cache.getAndRemove(f))&&(this._setTileReloadTimer(f.key,m),m.tileID=f,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[f.key]&&(clearTimeout(this._cacheTimers[f.key]),delete this._cacheTimers[f.key],this._setTileReloadTimer(f.key,m)));var b=!!m;return b||(m=new a.Tile(f,this._source.tileSize*f.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,f.key,m.state))),m?(m.uses++,this._tiles[f.key]=m,b||this._source.fire(new a.Event("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m):null},p.prototype._setTileReloadTimer=function(f,m){var b=this;f in this._timers&&(clearTimeout(this._timers[f]),delete this._timers[f]);var E=m.getExpiryTimeout();E&&(this._timers[f]=setTimeout(function(){b._reloadTile(f,"expired"),delete b._timers[f]},E))},p.prototype._removeTile=function(f){var m=this._tiles[f];m&&(m.uses--,delete this._tiles[f],this._timers[f]&&(clearTimeout(this._timers[f]),delete this._timers[f]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))},p.prototype.clearTiles=function(){for(var f in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(f);this._cache.reset()},p.prototype.tilesIn=function(f,m,b){var E=this,P=[],L=this.transform;if(!L)return P;for(var N=b?L.getCameraQueryGeometry(f):f,G=f.map(function(He){return L.pointCoordinate(He)}),te=N.map(function(He){return L.pointCoordinate(He)}),ie=this.getIds(),ne=1/0,ye=1/0,me=-1/0,Ce=-1/0,de=0,Se=te;de<Se.length;de+=1){var Ie=Se[de];ne=Math.min(ne,Ie.x),ye=Math.min(ye,Ie.y),me=Math.max(me,Ie.x),Ce=Math.max(Ce,Ie.y)}for(var Fe=function(He){var Ke=E._tiles[ie[He]];if(!Ke.holdingForFade()){var tt=Ke.tileID,pt=Math.pow(2,L.zoom-Ke.tileID.overscaledZ),ct=m*Ke.queryPadding*a.EXTENT/Ke.tileSize/pt,bt=[tt.getTilePoint(new a.MercatorCoordinate(ne,ye)),tt.getTilePoint(new a.MercatorCoordinate(me,Ce))];if(bt[0].x-ct<a.EXTENT&&bt[0].y-ct<a.EXTENT&&bt[1].x+ct>=0&&bt[1].y+ct>=0){var Bt=G.map(function(Wt){return tt.getTilePoint(Wt)}),Xt=te.map(function(Wt){return tt.getTilePoint(Wt)});P.push({tile:Ke,tileID:tt,queryGeometry:Bt,cameraQueryGeometry:Xt,scale:pt})}}},We=0;We<ie.length;We++)Fe(We);return P},p.prototype.getVisibleCoordinates=function(f){for(var m=this,b=this.getRenderableIds(f).map(function(N){return m._tiles[N].tileID}),E=0,P=b;E<P.length;E+=1){var L=P[E];L.posMatrix=this.transform.calculatePosMatrix(L.toUnwrapped())}return b},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(at(this._source.type))for(var f in this._tiles){var m=this._tiles[f];if(m.fadeEndTime!==void 0&&m.fadeEndTime>=a.browser.now())return!0}return!1},p.prototype.setFeatureState=function(f,m,b){this._state.updateState(f=f||"_geojsonTileLayer",m,b)},p.prototype.removeFeatureState=function(f,m,b){this._state.removeFeatureState(f=f||"_geojsonTileLayer",m,b)},p.prototype.getFeatureState=function(f,m){return this._state.getState(f=f||"_geojsonTileLayer",m)},p.prototype.setDependencies=function(f,m,b){var E=this._tiles[f];E&&E.setDependencies(m,b)},p.prototype.reloadTilesForDependencies=function(f,m){for(var b in this._tiles)this._tiles[b].hasDependency(f,m)&&this._reloadTile(b,"reloading");this._cache.filter(function(E){return!E.hasDependency(f,m)})},p}(a.Evented);function be(c,p){var f=Math.abs(2*c.wrap)-+(c.wrap<0),m=Math.abs(2*p.wrap)-+(p.wrap<0);return c.overscaledZ-p.overscaledZ||m-f||p.canonical.y-c.canonical.y||p.canonical.x-c.canonical.x}function at(c){return c==="raster"||c==="image"||c==="video"}function vt(){return new a.window.Worker(La.workerUrl)}le.maxOverzooming=10,le.maxUnderzooming=3;var je="mapboxgl_preloaded_worker_pool",st=function(){this.active={}};st.prototype.acquire=function(c){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new vt);return this.active[c]=!0,this.workers.slice()},st.prototype.release=function(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},st.prototype.isPreloaded=function(){return!!this.active[je]},st.prototype.numActive=function(){return Object.keys(this.active).length};var Mt,Rt=Math.floor(a.browser.hardwareConcurrency/2);function jt(){return Mt||(Mt=new st),Mt}function rt(c,p){var f={};for(var m in c)m!=="ref"&&(f[m]=c[m]);return a.refProperties.forEach(function(b){b in p&&(f[b]=p[b])}),f}function xt(c){c=c.slice();for(var p=Object.create(null),f=0;f<c.length;f++)p[c[f].id]=c[f];for(var m=0;m<c.length;m++)"ref"in c[m]&&(c[m]=rt(c[m],p[c[m].ref]));return c}st.workerCount=Math.max(Math.min(Rt,6),1);var ot={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function mn(c,p,f){f.push({command:ot.addSource,args:[c,p[c]]})}function gn(c,p,f){p.push({command:ot.removeSource,args:[c]}),f[c]=!0}function zt(c,p,f,m){gn(c,f,m),mn(c,p,f)}function tr(c,p,f){var m;for(m in c[f])if(c[f].hasOwnProperty(m)&&m!=="data"&&!a.deepEqual(c[f][m],p[f][m]))return!1;for(m in p[f])if(p[f].hasOwnProperty(m)&&m!=="data"&&!a.deepEqual(c[f][m],p[f][m]))return!1;return!0}function Tn(c,p,f,m,b,E){var P;for(P in p=p||{},c=c||{})c.hasOwnProperty(P)&&(a.deepEqual(c[P],p[P])||f.push({command:E,args:[m,P,p[P],b]}));for(P in p)p.hasOwnProperty(P)&&!c.hasOwnProperty(P)&&(a.deepEqual(c[P],p[P])||f.push({command:E,args:[m,P,p[P],b]}))}function ar(c){return c.id}function Tr(c,p){return c[p.id]=p,c}var qn=function(c,p){this.reset(c,p)};qn.prototype.reset=function(c,p){this.points=c||[],this._distances=[0];for(var f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qn.prototype.lerp=function(c){if(this.points.length===1)return this.points[0];c=a.clamp(c,0,1);for(var p=1,f=this._distances[p],m=c*this.paddedLength+this.padding;f<m&&p<this._distances.length;)f=this._distances[++p];var b=p-1,E=this._distances[b],P=f-E,L=P>0?(m-E)/P:0;return this.points[b].mult(1-L).add(this.points[p].mult(L))};var xr=function(c,p,f){var m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(c/f),this.yCellCount=Math.ceil(p/f);for(var E=0;E<this.xCellCount*this.yCellCount;E++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=p,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function zr(c,p,f,m,b){var E=a.create();return p?(a.scale(E,E,[1/b,1/b,1]),f||a.rotateZ(E,E,m.angle)):a.multiply(E,m.labelPlaneMatrix,c),E}function hr(c,p,f,m,b){if(p){var E=a.clone(c);return a.scale(E,E,[b,b,1]),f||a.rotateZ(E,E,-m.angle),E}return m.glCoordMatrix}function Cn(c,p){var f=[c.x,c.y,0,1];Do(f,f,p);var m=f[3];return{point:new a.Point(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function Iu(c,p){return .5+c/p*.5}function Fn(c,p){var f=c[0]/c[3],m=c[1]/c[3];return f>=-p[0]&&f<=p[0]&&m>=-p[1]&&m<=p[1]}function Hl(c,p,f,m,b,E,P,L){var N=m?c.textSizeData:c.iconSizeData,G=a.evaluateSizeForZoom(N,f.transform.zoom),te=[256/f.width*2+1,256/f.height*2+1],ie=m?c.text.dynamicLayoutVertexArray:c.icon.dynamicLayoutVertexArray;ie.clear();for(var ne=c.lineVertexArray,ye=m?c.text.placedSymbolArray:c.icon.placedSymbolArray,me=f.transform.width/f.transform.height,Ce=!1,de=0;de<ye.length;de++){var Se=ye.get(de);if(Se.hidden||Se.writingMode===a.WritingMode.vertical&&!Ce)qa(Se.numGlyphs,ie);else{Ce=!1;var Ie=[Se.anchorX,Se.anchorY,0,1];if(a.transformMat4(Ie,Ie,p),Fn(Ie,te)){var Fe=Iu(f.transform.cameraToCenterDistance,Ie[3]),We=a.evaluateSizeForFeature(N,G,Se),He=P?We/Fe:We*Fe,Ke=new a.Point(Se.anchorX,Se.anchorY),tt=Cn(Ke,b).point,pt={},ct=vo(Se,He,!1,L,p,b,E,c.glyphOffsetArray,ne,ie,tt,Ke,pt,me);Ce=ct.useVertical,(ct.notEnoughRoom||Ce||ct.needsFlipping&&vo(Se,He,!0,L,p,b,E,c.glyphOffsetArray,ne,ie,tt,Ke,pt,me).notEnoughRoom)&&qa(Se.numGlyphs,ie)}else qa(Se.numGlyphs,ie)}}m?c.text.dynamicLayoutVertexBuffer.updateData(ie):c.icon.dynamicLayoutVertexBuffer.updateData(ie)}function Cf(c,p,f,m,b,E,P,L,N,G,te){var ie=L.glyphStartIndex+L.numGlyphs,ne=L.lineStartIndex,ye=L.lineStartIndex+L.lineLength,me=p.getoffsetX(L.glyphStartIndex),Ce=p.getoffsetX(ie-1),de=Ts(c*me,f,m,b,E,P,L.segment,ne,ye,N,G,te);if(!de)return null;var Se=Ts(c*Ce,f,m,b,E,P,L.segment,ne,ye,N,G,te);return Se?{first:de,last:Se}:null}function Ei(c,p,f,m){return c===a.WritingMode.horizontal&&Math.abs(f.y-p.y)>Math.abs(f.x-p.x)*m?{useVertical:!0}:(c===a.WritingMode.vertical?p.y<f.y:p.x>f.x)?{needsFlipping:!0}:null}function vo(c,p,f,m,b,E,P,L,N,G,te,ie,ne,ye){var me,Ce=p/24,de=c.lineOffsetX*Ce,Se=c.lineOffsetY*Ce;if(c.numGlyphs>1){var Ie=c.glyphStartIndex+c.numGlyphs,Fe=c.lineStartIndex,We=c.lineStartIndex+c.lineLength,He=Cf(Ce,L,de,Se,f,te,ie,c,N,E,ne);if(!He)return{notEnoughRoom:!0};var Ke=Cn(He.first.point,P).point,tt=Cn(He.last.point,P).point;if(m&&!f){var pt=Ei(c.writingMode,Ke,tt,ye);if(pt)return pt}me=[He.first];for(var ct=c.glyphStartIndex+1;ct<Ie-1;ct++)me.push(Ts(Ce*L.getoffsetX(ct),de,Se,f,te,ie,c.segment,Fe,We,N,E,ne));me.push(He.last)}else{if(m&&!f){var bt=Cn(ie,b).point,Bt=c.lineStartIndex+c.segment+1,Xt=new a.Point(N.getx(Bt),N.gety(Bt)),Wt=Cn(Xt,b),Nn=Wt.signedDistanceFromCamera>0?Wt.point:Ef(ie,Xt,bt,1,b),Pt=Ei(c.writingMode,bt,Nn,ye);if(Pt)return Pt}var en=Ts(Ce*L.getoffsetX(c.glyphStartIndex),de,Se,f,te,ie,c.segment,c.lineStartIndex,c.lineStartIndex+c.lineLength,N,E,ne);if(!en)return{notEnoughRoom:!0};me=[en]}for(var wn=0,fn=me;wn<fn.length;wn+=1){var on=fn[wn];a.addDynamicAttributes(G,on.point,on.angle)}return{}}function Ef(c,p,f,m,b){var E=Cn(c.add(c.sub(p)._unit()),b).point,P=f.sub(E);return f.add(P._mult(m/P.mag()))}function Ts(c,p,f,m,b,E,P,L,N,G,te,ie){var ne=m?c-p:c+p,ye=ne>0?1:-1,me=0;m&&(ye*=-1,me=Math.PI),ye<0&&(me+=Math.PI);for(var Ce=ye>0?L+P:L+P+1,de=b,Se=b,Ie=0,Fe=0,We=Math.abs(ne),He=[];Ie+Fe<=We;){if((Ce+=ye)<L||Ce>=N)return null;if(Se=de,He.push(de),(de=ie[Ce])===void 0){var Ke=new a.Point(G.getx(Ce),G.gety(Ce)),tt=Cn(Ke,te);if(tt.signedDistanceFromCamera>0)de=ie[Ce]=tt.point;else{var pt=Ce-ye;de=Ef(Ie===0?E:new a.Point(G.getx(pt),G.gety(pt)),Ke,Se,We-Ie+1,te)}}Ie+=Fe,Fe=Se.dist(de)}var ct=(We-Ie)/Fe,bt=de.sub(Se),Bt=bt.mult(ct)._add(Se);Bt._add(bt._unit()._perp()._mult(f*ye));var Xt=me+Math.atan2(de.y-Se.y,de.x-Se.x);return He.push(Bt),{point:Bt,angle:Xt,path:He}}xr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},xr.prototype.insert=function(c,p,f,m,b){this._forEachCell(p,f,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(p),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(b)},xr.prototype.insertCircle=function(c,p,f,m){this._forEachCell(p-m,f-m,p+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(p),this.circles.push(f),this.circles.push(m)},xr.prototype._insertBoxCell=function(c,p,f,m,b,E){this.boxCells[b].push(E)},xr.prototype._insertCircleCell=function(c,p,f,m,b,E){this.circleCells[b].push(E)},xr.prototype._query=function(c,p,f,m,b,E){if(f<0||c>this.width||m<0||p>this.height)return!b&&[];var P=[];if(c<=0&&p<=0&&this.width<=f&&this.height<=m){if(b)return!0;for(var L=0;L<this.boxKeys.length;L++)P.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(var N=0;N<this.circleKeys.length;N++){var G=this.circles[3*N],te=this.circles[3*N+1],ie=this.circles[3*N+2];P.push({key:this.circleKeys[N],x1:G-ie,y1:te-ie,x2:G+ie,y2:te+ie})}return E?P.filter(E):P}return this._forEachCell(c,p,f,m,this._queryCell,P,{hitTest:b,seenUids:{box:{},circle:{}}},E),b?P.length>0:P},xr.prototype._queryCircle=function(c,p,f,m,b){var E=c-f,P=c+f,L=p-f,N=p+f;if(P<0||E>this.width||N<0||L>this.height)return!m&&[];var G=[];return this._forEachCell(E,L,P,N,this._queryCellCircle,G,{hitTest:m,circle:{x:c,y:p,radius:f},seenUids:{box:{},circle:{}}},b),m?G.length>0:G},xr.prototype.query=function(c,p,f,m,b){return this._query(c,p,f,m,!1,b)},xr.prototype.hitTest=function(c,p,f,m,b){return this._query(c,p,f,m,!0,b)},xr.prototype.hitTestCircle=function(c,p,f,m){return this._queryCircle(c,p,f,!0,m)},xr.prototype._queryCell=function(c,p,f,m,b,E,P,L){var N=P.seenUids,G=this.boxCells[b];if(G!==null)for(var te=this.bboxes,ie=0,ne=G;ie<ne.length;ie+=1){var ye=ne[ie];if(!N.box[ye]){N.box[ye]=!0;var me=4*ye;if(c<=te[me+2]&&p<=te[me+3]&&f>=te[me+0]&&m>=te[me+1]&&(!L||L(this.boxKeys[ye]))){if(P.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ye],x1:te[me],y1:te[me+1],x2:te[me+2],y2:te[me+3]})}}}var Ce=this.circleCells[b];if(Ce!==null)for(var de=this.circles,Se=0,Ie=Ce;Se<Ie.length;Se+=1){var Fe=Ie[Se];if(!N.circle[Fe]){N.circle[Fe]=!0;var We=3*Fe;if(this._circleAndRectCollide(de[We],de[We+1],de[We+2],c,p,f,m)&&(!L||L(this.circleKeys[Fe]))){if(P.hitTest)return E.push(!0),!0;var He=de[We],Ke=de[We+1],tt=de[We+2];E.push({key:this.circleKeys[Fe],x1:He-tt,y1:Ke-tt,x2:He+tt,y2:Ke+tt})}}}},xr.prototype._queryCellCircle=function(c,p,f,m,b,E,P,L){var N=P.circle,G=P.seenUids,te=this.boxCells[b];if(te!==null)for(var ie=this.bboxes,ne=0,ye=te;ne<ye.length;ne+=1){var me=ye[ne];if(!G.box[me]){G.box[me]=!0;var Ce=4*me;if(this._circleAndRectCollide(N.x,N.y,N.radius,ie[Ce+0],ie[Ce+1],ie[Ce+2],ie[Ce+3])&&(!L||L(this.boxKeys[me])))return E.push(!0),!0}}var de=this.circleCells[b];if(de!==null)for(var Se=this.circles,Ie=0,Fe=de;Ie<Fe.length;Ie+=1){var We=Fe[Ie];if(!G.circle[We]){G.circle[We]=!0;var He=3*We;if(this._circlesCollide(Se[He],Se[He+1],Se[He+2],N.x,N.y,N.radius)&&(!L||L(this.circleKeys[We])))return E.push(!0),!0}}},xr.prototype._forEachCell=function(c,p,f,m,b,E,P,L){for(var N=this._convertToXCellCoord(c),G=this._convertToYCellCoord(p),te=this._convertToXCellCoord(f),ie=this._convertToYCellCoord(m),ne=N;ne<=te;ne++)for(var ye=G;ye<=ie;ye++)if(b.call(this,c,p,f,m,this.xCellCount*ye+ne,E,P,L))return},xr.prototype._convertToXCellCoord=function(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))},xr.prototype._convertToYCellCoord=function(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))},xr.prototype._circlesCollide=function(c,p,f,m,b,E){var P=m-c,L=b-p,N=f+E;return N*N>P*P+L*L},xr.prototype._circleAndRectCollide=function(c,p,f,m,b,E,P){var L=(E-m)/2,N=Math.abs(c-(m+L));if(N>L+f)return!1;var G=(P-b)/2,te=Math.abs(p-(b+G));if(te>G+f)return!1;if(N<=L||te<=G)return!0;var ie=N-L,ne=te-G;return ie*ie+ne*ne<=f*f};var ki=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qa(c,p){for(var f=0;f<c;f++){var m=p.length;p.resize(m+4),p.float32.set(ki,3*m)}}function Do(c,p,f){var m=p[0],b=p[1];return c[0]=f[0]*m+f[4]*b+f[12],c[1]=f[1]*m+f[5]*b+f[13],c[3]=f[3]*m+f[7]*b+f[15],c}var Ir=function(c,p,f){p===void 0&&(p=new xr(c.width+200,c.height+200,25)),f===void 0&&(f=new xr(c.width+200,c.height+200,25)),this.transform=c,this.grid=p,this.ignoredGrid=f,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+100,this.screenBottomBoundary=c.height+100,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200};function zo(c,p,f){return p*(a.EXTENT/(c.tileSize*Math.pow(2,f-c.tileID.overscaledZ)))}Ir.prototype.placeCollisionBox=function(c,p,f,m,b){var E=this.projectAndGetPerspectiveRatio(m,c.anchorPointX,c.anchorPointY),P=f*E.perspectiveRatio,L=c.x1*P+E.point.x,N=c.y1*P+E.point.y,G=c.x2*P+E.point.x,te=c.y2*P+E.point.y;return!this.isInsideGrid(L,N,G,te)||!p&&this.grid.hitTest(L,N,G,te,b)?{box:[],offscreen:!1}:{box:[L,N,G,te],offscreen:this.isOffscreen(L,N,G,te)}},Ir.prototype.placeCollisionCircles=function(c,p,f,m,b,E,P,L,N,G,te,ie,ne){var ye=[],me=new a.Point(p.anchorX,p.anchorY),Ce=Cn(me,E),de=Iu(this.transform.cameraToCenterDistance,Ce.signedDistanceFromCamera),Se=(G?b/de:b*de)/a.ONE_EM,Ie=Cn(me,P).point,Fe=Cf(Se,m,p.lineOffsetX*Se,p.lineOffsetY*Se,!1,Ie,me,p,f,P,{}),We=!1,He=!1,Ke=!0;if(Fe){for(var tt=.5*ie*de+ne,pt=new a.Point(-100,-100),ct=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),bt=new qn,Bt=Fe.first,Xt=Fe.last,Wt=[],Nn=Bt.path.length-1;Nn>=1;Nn--)Wt.push(Bt.path[Nn]);for(var Pt=1;Pt<Xt.path.length;Pt++)Wt.push(Xt.path[Pt]);var en=2.5*tt;if(L){var wn=Wt.map(function(ga){return Cn(ga,L)});Wt=wn.some(function(ga){return ga.signedDistanceFromCamera<=0})?[]:wn.map(function(ga){return ga.point})}var fn=[];if(Wt.length>0){for(var on=Wt[0].clone(),ln=Wt[0].clone(),rn=1;rn<Wt.length;rn++)on.x=Math.min(on.x,Wt[rn].x),on.y=Math.min(on.y,Wt[rn].y),ln.x=Math.max(ln.x,Wt[rn].x),ln.y=Math.max(ln.y,Wt[rn].y);fn=on.x>=pt.x&&ln.x<=ct.x&&on.y>=pt.y&&ln.y<=ct.y?[Wt]:ln.x<pt.x||on.x>ct.x||ln.y<pt.y||on.y>ct.y?[]:a.clipLine([Wt],pt.x,pt.y,ct.x,ct.y)}for(var Ft=0,nr=fn;Ft<nr.length;Ft+=1){var Zr;bt.reset(nr[Ft],.25*tt),Zr=bt.length<=.5*tt?1:Math.ceil(bt.paddedLength/en)+1;for(var jr=0;jr<Zr;jr++){var pi=jr/Math.max(Zr-1,1),ni=bt.lerp(pi),kr=ni.x+100,Qi=ni.y+100;ye.push(kr,Qi,tt,0);var Xr=kr-tt,Yi=Qi-tt,wo=kr+tt,ps=Qi+tt;if(Ke=Ke&&this.isOffscreen(Xr,Yi,wo,ps),He=He||this.isInsideGrid(Xr,Yi,wo,ps),!c&&this.grid.hitTestCircle(kr,Qi,tt,te)&&(We=!0,!N))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!N&&We||!He?[]:ye,offscreen:Ke,collisionDetected:We}},Ir.prototype.queryRenderedSymbols=function(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],f=1/0,m=1/0,b=-1/0,E=-1/0,P=0,L=c;P<L.length;P+=1){var N=L[P],G=new a.Point(N.x+100,N.y+100);f=Math.min(f,G.x),m=Math.min(m,G.y),b=Math.max(b,G.x),E=Math.max(E,G.y),p.push(G)}for(var te={},ie={},ne=0,ye=this.grid.query(f,m,b,E).concat(this.ignoredGrid.query(f,m,b,E));ne<ye.length;ne+=1){var me=ye[ne],Ce=me.key;if(te[Ce.bucketInstanceId]===void 0&&(te[Ce.bucketInstanceId]={}),!te[Ce.bucketInstanceId][Ce.featureIndex]){var de=[new a.Point(me.x1,me.y1),new a.Point(me.x2,me.y1),new a.Point(me.x2,me.y2),new a.Point(me.x1,me.y2)];a.polygonIntersectsPolygon(p,de)&&(te[Ce.bucketInstanceId][Ce.featureIndex]=!0,ie[Ce.bucketInstanceId]===void 0&&(ie[Ce.bucketInstanceId]=[]),ie[Ce.bucketInstanceId].push(Ce.featureIndex))}}return ie},Ir.prototype.insertCollisionBox=function(c,p,f,m,b){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:m,collisionGroupID:b},c[0],c[1],c[2],c[3])},Ir.prototype.insertCollisionCircles=function(c,p,f,m,b){for(var E=p?this.ignoredGrid:this.grid,P={bucketInstanceId:f,featureIndex:m,collisionGroupID:b},L=0;L<c.length;L+=4)E.insertCircle(P,c[L],c[L+1],c[L+2])},Ir.prototype.projectAndGetPerspectiveRatio=function(c,p,f){var m=[p,f,0,1];return Do(m,m,c),{point:new a.Point((m[0]/m[3]+1)/2*this.transform.width+100,(-m[1]/m[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m[3]*.5}},Ir.prototype.isOffscreen=function(c,p,f,m){return f<100||c>=this.screenRightBoundary||m<100||p>this.screenBottomBoundary},Ir.prototype.isInsideGrid=function(c,p,f,m){return f>=0&&c<this.gridRightBoundary&&m>=0&&p<this.gridBottomBoundary},Ir.prototype.getViewportMatrix=function(){var c=a.identity([]);return a.translate(c,c,[-100,-100,0]),c};var Hi=function(c,p,f,m){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?p:-p))):m&&f?1:0,this.placed=f};Hi.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bo=function(c,p,f,m,b){this.text=new Hi(c?c.text:null,p,f,b),this.icon=new Hi(c?c.icon:null,p,m,b)};Bo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ha=function(c,p,f){this.text=c,this.icon=p,this.skipFade=f},Lg=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},ha=function(c,p,f,m,b){this.bucketInstanceId=c,this.featureIndex=p,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=b},kf=function(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}};function Ga(c,p,f,m,b){var E=a.getAnchorAlignment(c),P=-(E.horizontalAlign-.5)*p,L=-(E.verticalAlign-.5)*f,N=a.evaluateVariableOffset(c,m);return new a.Point(P+N[0]*b,L+N[1]*b)}function Kr(c,p,f,m,b,E){var P=c.x1,L=c.x2,N=c.y1,G=c.y2,te=c.anchorPointX,ie=c.anchorPointY,ne=new a.Point(p,f);return m&&ne._rotate(b?E:-E),{x1:P+ne.x,y1:N+ne.y,x2:L+ne.x,y2:G+ne.y,anchorPointX:te,anchorPointY:ie}}kf.prototype.get=function(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){var p=++this.maxGroupID;this.collisionGroups[c]={ID:p,predicate:function(f){return f.collisionGroupID===p}}}return this.collisionGroups[c]};var ci=function(c,p,f,m){this.transform=c.clone(),this.collisionIndex=new Ir(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new kf(f),this.collisionCircleArrays={},this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}};function Gl(c,p,f,m,b){c.emplaceBack(p?1:0,f?1:0,m||0,b||0),c.emplaceBack(p?1:0,f?1:0,m||0,b||0),c.emplaceBack(p?1:0,f?1:0,m||0,b||0),c.emplaceBack(p?1:0,f?1:0,m||0,b||0)}ci.prototype.getBucketParts=function(c,p,f,m){var b=f.getBucket(p),E=f.latestFeatureIndex;if(b&&E&&p.id===b.layerIds[0]){var P=f.collisionBoxArray,L=b.layers[0].layout,N=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),G=f.tileSize/a.EXTENT,te=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),ie=L.get("text-pitch-alignment")==="map",ne=L.get("text-rotation-alignment")==="map",ye=zo(f,1,this.transform.zoom),me=zr(te,ie,ne,this.transform,ye),Ce=null;if(ie){var de=hr(te,ie,ne,this.transform,ye);Ce=a.multiply([],this.transform.labelPlaneMatrix,de)}this.retainedQueryData[b.bucketInstanceId]=new ha(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,f.tileID);var Se={bucket:b,layout:L,posMatrix:te,textLabelPlaneMatrix:me,labelToScreenMatrix:Ce,scale:N,textPixelRatio:G,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(var Ie=0,Fe=b.sortKeyRanges;Ie<Fe.length;Ie+=1){var We=Fe[Ie];c.push({sortKey:We.sortKey,symbolInstanceStart:We.symbolInstanceStart,symbolInstanceEnd:We.symbolInstanceEnd,parameters:Se})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Se})}},ci.prototype.attemptAnchorPlacement=function(c,p,f,m,b,E,P,L,N,G,te,ie,ne,ye,me){var Ce,de=[ie.textOffset0,ie.textOffset1],Se=Ga(c,f,m,de,b),Ie=this.collisionIndex.placeCollisionBox(Kr(p,Se.x,Se.y,E,P,this.transform.angle),te,L,N,G.predicate);if(!me||this.collisionIndex.placeCollisionBox(Kr(me,Se.x,Se.y,E,P,this.transform.angle),te,L,N,G.predicate).box.length!==0)return Ie.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID].text&&(Ce=this.prevPlacement.variableOffsets[ie.crossTileID].anchor),this.variableOffsets[ie.crossTileID]={textOffset:de,width:f,height:m,anchor:c,textBoxScale:b,prevAnchor:Ce},this.markUsedJustification(ne,c,ie,ye),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,ye,ie),this.placedOrientations[ie.crossTileID]=ye),{shift:Se,placedGlyphBoxes:Ie}):void 0},ci.prototype.placeLayerBucketPart=function(c,p,f){var m=this,b=c.parameters,E=b.bucket,P=b.layout,L=b.posMatrix,N=b.textLabelPlaneMatrix,G=b.labelToScreenMatrix,te=b.textPixelRatio,ie=b.holdingForFade,ne=b.collisionBoxArray,ye=b.partiallyEvaluatedTextSize,me=b.collisionGroup,Ce=P.get("text-optional"),de=P.get("icon-optional"),Se=P.get("text-allow-overlap"),Ie=P.get("icon-allow-overlap"),Fe=P.get("text-rotation-alignment")==="map",We=P.get("text-pitch-alignment")==="map",He=P.get("icon-text-fit")!=="none",Ke=P.get("symbol-z-order")==="viewport-y",tt=Se&&(Ie||!E.hasIconData()||de),pt=Ie&&(Se||!E.hasTextData()||Ce);!E.collisionArrays&&ne&&E.deserializeCollisionBoxes(ne);var ct=function(Pt,en){if(!p[Pt.crossTileID])if(ie)m.placements[Pt.crossTileID]=new Ha(!1,!1,!1);else{var wn,fn=!1,on=!1,ln=!0,rn=null,Ft={box:null,offscreen:null},nr={box:null,offscreen:null},Zr=null,jr=null,pi=0,ni=0,kr=0;en.textFeatureIndex?pi=en.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(pi=Pt.featureIndex),en.verticalTextFeatureIndex&&(ni=en.verticalTextFeatureIndex);var Qi=en.textBox;if(Qi){var Xr=function(ri){var Qr=a.WritingMode.horizontal;if(E.allowVerticalPlacement&&!ri&&m.prevPlacement){var uo=m.prevPlacement.placedOrientations[Pt.crossTileID];uo&&(m.placedOrientations[Pt.crossTileID]=uo,m.markUsedOrientation(E,Qr=uo,Pt))}return Qr},Yi=function(ri,Qr){if(E.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&en.verticalTextBox)for(var uo=0,nu=E.writingModes;uo<nu.length&&(nu[uo]===a.WritingMode.vertical?(Ft=Qr(),nr=Ft):Ft=ri(),!(Ft&&Ft.box&&Ft.box.length));uo+=1);else Ft=ri()};if(P.get("text-variable-anchor")){var wo=P.get("text-variable-anchor");if(m.prevPlacement&&m.prevPlacement.variableOffsets[Pt.crossTileID]){var ps=m.prevPlacement.variableOffsets[Pt.crossTileID];wo.indexOf(ps.anchor)>0&&(wo=wo.filter(function(ri){return ri!==ps.anchor})).unshift(ps.anchor)}var ga=function(ri,Qr,uo){for(var nu=ri.x2-ri.x1,Zf=ri.y2-ri.y1,xh=Pt.textBoxScale,Mc=He&&!Ie?Qr:null,Rc={box:[],offscreen:!1},bh=Se?2*wo.length:wo.length,vl=0;vl<bh;++vl){var Fc=m.attemptAnchorPlacement(wo[vl%wo.length],ri,nu,Zf,xh,Fe,We,te,L,me,vl>=wo.length,Pt,E,uo,Mc);if(Fc&&(Rc=Fc.placedGlyphBoxes)&&Rc.box&&Rc.box.length){fn=!0,rn=Fc.shift;break}}return Rc};Yi(function(){return ga(Qi,en.iconBox,a.WritingMode.horizontal)},function(){var ri=en.verticalTextBox;return E.allowVerticalPlacement&&!(Ft&&Ft.box&&Ft.box.length)&&Pt.numVerticalGlyphVertices>0&&ri?ga(ri,en.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Ft&&(fn=Ft.box,ln=Ft.offscreen);var Oc=Xr(Ft&&Ft.box);if(!fn&&m.prevPlacement){var gl=m.prevPlacement.variableOffsets[Pt.crossTileID];gl&&(m.variableOffsets[Pt.crossTileID]=gl,m.markUsedJustification(E,gl.anchor,Pt,Oc))}}else{var hs=function(ri,Qr){var uo=m.collisionIndex.placeCollisionBox(ri,Se,te,L,me.predicate);return uo&&uo.box&&uo.box.length&&(m.markUsedOrientation(E,Qr,Pt),m.placedOrientations[Pt.crossTileID]=Qr),uo};Yi(function(){return hs(Qi,a.WritingMode.horizontal)},function(){var ri=en.verticalTextBox;return E.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&ri?hs(ri,a.WritingMode.vertical):{box:null,offscreen:null}}),Xr(Ft&&Ft.box&&Ft.box.length)}}if(fn=(wn=Ft)&&wn.box&&wn.box.length>0,ln=wn&&wn.offscreen,Pt.useRuntimeCollisionCircles){var yl=E.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),Lc=a.evaluateSizeForFeature(E.textSizeData,ye,yl),Nu=P.get("text-padding");Zr=m.collisionIndex.placeCollisionCircles(Se,yl,E.lineVertexArray,E.glyphOffsetArray,Lc,L,N,G,f,We,me.predicate,Pt.collisionCircleDiameter,Nu),fn=Se||Zr.circles.length>0&&!Zr.collisionDetected,ln=ln&&Zr.offscreen}if(en.iconFeatureIndex&&(kr=en.iconFeatureIndex),en.iconBox){var ea=function(ri){var Qr=He&&rn?Kr(ri,rn.x,rn.y,Fe,We,m.transform.angle):ri;return m.collisionIndex.placeCollisionBox(Qr,Ie,te,L,me.predicate)};on=nr&&nr.box&&nr.box.length&&en.verticalIconBox?(jr=ea(en.verticalIconBox)).box.length>0:(jr=ea(en.iconBox)).box.length>0,ln=ln&&jr.offscreen}var $u=Ce||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,gi=de||Pt.numIconVertices===0;if($u||gi?gi?$u||(on=on&&fn):fn=on&&fn:on=fn=on&&fn,fn&&wn&&wn.box&&m.collisionIndex.insertCollisionBox(wn.box,P.get("text-ignore-placement"),E.bucketInstanceId,nr&&nr.box&&ni?ni:pi,me.ID),on&&jr&&m.collisionIndex.insertCollisionBox(jr.box,P.get("icon-ignore-placement"),E.bucketInstanceId,kr,me.ID),Zr&&(fn&&m.collisionIndex.insertCollisionCircles(Zr.circles,P.get("text-ignore-placement"),E.bucketInstanceId,pi,me.ID),f)){var Ja=E.bucketInstanceId,Ma=m.collisionCircleArrays[Ja];Ma===void 0&&(Ma=m.collisionCircleArrays[Ja]=new Lg);for(var tu=0;tu<Zr.circles.length;tu+=4)Ma.circles.push(Zr.circles[tu+0]),Ma.circles.push(Zr.circles[tu+1]),Ma.circles.push(Zr.circles[tu+2]),Ma.circles.push(Zr.collisionDetected?1:0)}m.placements[Pt.crossTileID]=new Ha(fn||tt,on||pt,ln||E.justReloaded),p[Pt.crossTileID]=!0}};if(Ke)for(var bt=E.getSortedSymbolIndexes(this.transform.angle),Bt=bt.length-1;Bt>=0;--Bt){var Xt=bt[Bt];ct(E.symbolInstances.get(Xt),E.collisionArrays[Xt])}else for(var Wt=c.symbolInstanceStart;Wt<c.symbolInstanceEnd;Wt++)ct(E.symbolInstances.get(Wt),E.collisionArrays[Wt]);if(f&&E.bucketInstanceId in this.collisionCircleArrays){var Nn=this.collisionCircleArrays[E.bucketInstanceId];a.invert(Nn.invProjMatrix,L),Nn.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1},ci.prototype.markUsedJustification=function(c,p,f,m){var b;b=m===a.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(p)];for(var E=0,P=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];E<P.length;E+=1){var L=P[E];L>=0&&(c.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:f.crossTileID)}},ci.prototype.markUsedOrientation=function(c,p,f){for(var m=p===a.WritingMode.horizontal||p===a.WritingMode.horizontalOnly?p:0,b=p===a.WritingMode.vertical?p:0,E=0,P=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];E<P.length;E+=1)c.text.placedSymbolArray.get(P[E]).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=b)},ci.prototype.commit=function(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,f=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var m=p?p.symbolFadeChange(c):1,b=p?p.opacities:{},E=p?p.variableOffsets:{},P=p?p.placedOrientations:{};for(var L in this.placements){var N=this.placements[L],G=b[L];G?(this.opacities[L]=new Bo(G,m,N.text,N.icon),f=f||N.text!==G.text.placed||N.icon!==G.icon.placed):(this.opacities[L]=new Bo(null,m,N.text,N.icon,N.skipFade),f=f||N.text||N.icon)}for(var te in b){var ie=b[te];if(!this.opacities[te]){var ne=new Bo(ie,m,!1,!1);ne.isHidden()||(this.opacities[te]=ne,f=f||ie.text.placed||ie.icon.placed)}}for(var ye in E)this.variableOffsets[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.variableOffsets[ye]=E[ye]);for(var me in P)this.placedOrientations[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.placedOrientations[me]=P[me]);f?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:c)},ci.prototype.updateLayerOpacities=function(c,p){for(var f={},m=0,b=p;m<b.length;m+=1){var E=b[m],P=E.getBucket(c);P&&E.latestFeatureIndex&&c.id===P.layerIds[0]&&this.updateBucketOpacities(P,f,E.collisionBoxArray)}},ci.prototype.updateBucketOpacities=function(c,p,f){var m=this;c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();var b=c.layers[0].layout,E=new Bo(null,0,!1,!1,!0),P=b.get("text-allow-overlap"),L=b.get("icon-allow-overlap"),N=b.get("text-variable-anchor"),G=b.get("text-rotation-alignment")==="map",te=b.get("text-pitch-alignment")==="map",ie=b.get("icon-text-fit")!=="none",ne=new Bo(null,0,P&&(L||!c.hasIconData()||b.get("icon-optional")),L&&(P||!c.hasTextData()||b.get("text-optional")),!0);!c.collisionArrays&&f&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(f);for(var ye=function(Se,Ie,Fe){for(var We=0;We<Ie/4;We++)Se.opacityVertexArray.emplaceBack(Fe)},me=function(Se){var Ie=c.symbolInstances.get(Se),Fe=Ie.numHorizontalGlyphVertices,We=Ie.numVerticalGlyphVertices,He=Ie.crossTileID,Ke=m.opacities[He];p[He]?Ke=E:Ke||(m.opacities[He]=Ke=ne),p[He]=!0;var tt=Ie.numIconVertices>0,pt=m.placedOrientations[Ie.crossTileID],ct=pt===a.WritingMode.vertical,bt=pt===a.WritingMode.horizontal||pt===a.WritingMode.horizontalOnly;if(Fe>0||We>0){var Bt=ih(Ke.text);ye(c.text,Fe,ct?pc:Bt),ye(c.text,We,bt?pc:Bt);var Xt=Ke.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(function(Ft){Ft>=0&&(c.text.placedSymbolArray.get(Ft).hidden=Xt||ct?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=Xt||bt?1:0);var Wt=m.variableOffsets[Ie.crossTileID];Wt&&m.markUsedJustification(c,Wt.anchor,Ie,pt);var Nn=m.placedOrientations[Ie.crossTileID];Nn&&(m.markUsedJustification(c,"left",Ie,Nn),m.markUsedOrientation(c,Nn,Ie))}if(tt){var Pt=ih(Ke.icon),en=!(ie&&Ie.verticalPlacedIconSymbolIndex&&ct);Ie.placedIconSymbolIndex>=0&&(ye(c.icon,Ie.numIconVertices,en?Pt:pc),c.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(ye(c.icon,Ie.numVerticalIconVertices,en?pc:Pt),c.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){var wn=c.collisionArrays[Se];if(wn){var fn=new a.Point(0,0);if(wn.textBox||wn.verticalTextBox){var on=!0;if(N){var ln=m.variableOffsets[He];ln?(fn=Ga(ln.anchor,ln.width,ln.height,ln.textOffset,ln.textBoxScale),G&&fn._rotate(te?m.transform.angle:-m.transform.angle)):on=!1}wn.textBox&&Gl(c.textCollisionBox.collisionVertexArray,Ke.text.placed,!on||ct,fn.x,fn.y),wn.verticalTextBox&&Gl(c.textCollisionBox.collisionVertexArray,Ke.text.placed,!on||bt,fn.x,fn.y)}var rn=!!(!bt&&wn.verticalIconBox);wn.iconBox&&Gl(c.iconCollisionBox.collisionVertexArray,Ke.icon.placed,rn,ie?fn.x:0,ie?fn.y:0),wn.verticalIconBox&&Gl(c.iconCollisionBox.collisionVertexArray,Ke.icon.placed,!rn,ie?fn.x:0,ie?fn.y:0)}}},Ce=0;Ce<c.symbolInstances.length;Ce++)me(Ce);if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){var de=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=de.invProjMatrix,c.placementViewportMatrix=de.viewportMatrix,c.collisionCircleArray=de.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}},ci.prototype.symbolFadeChange=function(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ci.prototype.zoomAdjustment=function(c){return Math.max(0,(this.transform.zoom-c)/1.5)},ci.prototype.hasTransitions=function(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration},ci.prototype.stillRecent=function(c,p){var f=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*f>c},ci.prototype.setStale=function(){this.stale=!0};var Af=Math.pow(2,25),Td=Math.pow(2,24),Id=Math.pow(2,17),Pf=Math.pow(2,16),Od=Math.pow(2,9),Ld=Math.pow(2,8),Mg=Math.pow(2,1);function ih(c){if(c.opacity===0&&!c.placed)return 0;if(c.opacity===1&&c.placed)return 4294967295;var p=c.placed?1:0,f=Math.floor(127*c.opacity);return f*Af+p*Td+f*Id+p*Pf+f*Od+p*Ld+f*Mg+p}var pc=0,Tf=function(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Tf.prototype.continuePlacement=function(c,p,f,m,b){for(var E=this._bucketParts;this._currentTileIndex<c.length;)if(p.getBucketParts(E,m,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(function(P,L){return P.sortKey-L.sortKey}));this._currentPartIndex<E.length;)if(p.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,b())return!0;return!1};var hc=function(c,p,f,m,b,E,P){this.placement=new ci(c,b,E,P),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=m,this._done=!1};hc.prototype.isDone=function(){return this._done},hc.prototype.continuePlacement=function(c,p,f){for(var m=this,b=a.browser.now(),E=function(){var N=a.browser.now()-b;return!m._forceFullPlacement&&N>2};this._currentPlacementIndex>=0;){var P=p[c[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=L)&&(!P.maxzoom||P.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Tf(P)),this._inProgressLayer.continuePlacement(f[P.source],this.placement,this._showCollisionBoxes,P,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},hc.prototype.commit=function(c){return this.placement.commit(c),this.placement};var Md=512/a.EXTENT/2,If=function(c,p,f){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(var m=0;m<p.length;m++){var b=p.get(m),E=b.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,c)})}};If.prototype.getScaledCoordinates=function(c,p){var f=Md/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*a.EXTENT+c.anchorX)*f),y:Math.floor((p.canonical.y*a.EXTENT+c.anchorY)*f)}},If.prototype.findMatches=function(c,p,f){for(var m=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),b=0;b<c.length;b++){var E=c.get(b);if(!E.crossTileID){var P=this.indexedSymbolInstances[E.key];if(P)for(var L=this.getScaledCoordinates(E,p),N=0,G=P;N<G.length;N+=1){var te=G[N];if(Math.abs(te.coord.x-L.x)<=m&&Math.abs(te.coord.y-L.y)<=m&&!f[te.crossTileID]){f[te.crossTileID]=!0,E.crossTileID=te.crossTileID;break}}}}};var dc=function(){this.maxCrossTileID=0};dc.prototype.generate=function(){return++this.maxCrossTileID};var No=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};No.prototype.handleWrapJump=function(c){var p=Math.round((c-this.lng)/360);if(p!==0)for(var f in this.indexes){var m=this.indexes[f],b={};for(var E in m){var P=m[E];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+p),b[P.tileID.key]=P}this.indexes[f]=b}this.lng=c},No.prototype.addBucket=function(c,p,f){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(var m=0;m<p.symbolInstances.length;m++)p.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});var b=this.usedCrossTileIDs[c.overscaledZ];for(var E in this.indexes){var P=this.indexes[E];if(Number(E)>c.overscaledZ)for(var L in P){var N=P[L];N.tileID.isChildOf(c)&&N.findMatches(p.symbolInstances,c,b)}else{var G=P[c.scaledTo(Number(E)).key];G&&G.findMatches(p.symbolInstances,c,b)}}for(var te=0;te<p.symbolInstances.length;te++){var ie=p.symbolInstances.get(te);ie.crossTileID||(ie.crossTileID=f.generate(),b[ie.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new If(c,p.symbolInstances,p.bucketInstanceId),!0},No.prototype.removeBucketCrossTileIDs=function(c,p){for(var f in p.indexedSymbolInstances)for(var m=0,b=p.indexedSymbolInstances[f];m<b.length;m+=1)delete this.usedCrossTileIDs[c][b[m].crossTileID]},No.prototype.removeStaleBuckets=function(c){var p=!1;for(var f in this.indexes){var m=this.indexes[f];for(var b in m)c[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[b]),delete m[b],p=!0)}return p};var Wl=function(){this.layerIndexes={},this.crossTileIDs=new dc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wl.prototype.addLayer=function(c,p,f){var m=this.layerIndexes[c.id];m===void 0&&(m=this.layerIndexes[c.id]=new No);var b=!1,E={};m.handleWrapJump(f);for(var P=0,L=p;P<L.length;P+=1){var N=L[P],G=N.getBucket(c);G&&c.id===G.layerIds[0]&&(G.bucketInstanceId||(G.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(N.tileID,G,this.crossTileIDs)&&(b=!0),E[G.bucketInstanceId]=!0)}return m.removeStaleBuckets(E)&&(b=!0),b},Wl.prototype.pruneUnusedLayers=function(c){var p={};for(var f in c.forEach(function(m){p[m]=!0}),this.layerIndexes)p[f]||delete this.layerIndexes[f]};var ol=function(c,p){return a.emitValidationErrors(c,p&&p.filter(function(f){return f.identifier!=="source.canvas"}))},Of=a.pick(ot,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),al=a.pick(ot,["setCenter","setZoom","setBearing","setPitch"]),sr=function(){var c={},p=a.styleSpec.$version;for(var f in a.styleSpec.$root){var m,b=a.styleSpec.$root[f];b.required&&(m=f==="version"?p:b.type==="array"?[]:{})!=null&&(c[f]=m)}return c}(),er=function(c){function p(f,m){var b=this;m===void 0&&(m={}),c.call(this),this.map=f,this.dispatcher=new ht(jt(),this),this.imageManager=new U,this.imageManager.setEventedParent(this),this.glyphManager=new Me(f._requestManager,m.localIdeographFontFamily),this.lineAtlas=new Ye(256,512),this.crossTileSymbolIndex=new Wl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var E=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(P){E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},function(L,N){if(a.triggerPluginCompletionEvent(L),N&&N.every(function(te){return te}))for(var G in E.sourceCaches)E.sourceCaches[G].reload()})}),this.on("data",function(P){if(P.dataType==="source"&&P.sourceDataType==="metadata"){var L=b.sourceCaches[P.sourceId];if(L){var N=L.getSource();if(N&&N.vectorLayerIds)for(var G in b._layers){var te=b._layers[G];te.source===N.id&&b._validateLayer(te)}}}})}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.loadURL=function(f,m){var b=this;m===void 0&&(m={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var E=typeof m.validate=="boolean"?m.validate:!a.isMapboxURL(f);f=this.map._requestManager.normalizeStyleURL(f,m.accessToken);var P=this.map._requestManager.transformRequest(f,a.ResourceType.Style);this._request=a.getJSON(P,function(L,N){b._request=null,L?b.fire(new a.ErrorEvent(L)):N&&b._load(N,E)})},p.prototype.loadJSON=function(f,m){var b=this;m===void 0&&(m={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){b._request=null,b._load(f,m.validate!==!1)})},p.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(sr,!1)},p.prototype._load=function(f,m){if(!m||!ol(this,a.validateStyle(f))){for(var b in this._loaded=!0,this.stylesheet=f,f.sources)this.addSource(b,f.sources[b],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs);var E=xt(this.stylesheet.layers);this._order=E.map(function(G){return G.id}),this._layers={},this._serializedLayers={};for(var P=0,L=E;P<L.length;P+=1){var N=L[P];(N=a.createStyleLayer(N)).setEventedParent(this,{layer:{id:N.id}}),this._layers[N.id]=N,this._serializedLayers[N.id]=N.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ge(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},p.prototype._loadSprite=function(f){var m=this;this._spriteRequest=function(b,E,P){var L,N,G,te=a.browser.devicePixelRatio>1?"@2x":"",ie=a.getJSON(E.transformRequest(E.normalizeSpriteURL(b,te,".json"),a.ResourceType.SpriteJSON),function(me,Ce){ie=null,G||(G=me,L=Ce,ye())}),ne=a.getImage(E.transformRequest(E.normalizeSpriteURL(b,te,".png"),a.ResourceType.SpriteImage),function(me,Ce){ne=null,G||(G=me,N=Ce,ye())});function ye(){if(G)P(G);else if(L&&N){var me=a.browser.getImageData(N),Ce={};for(var de in L){var Se=L[de],Ie=Se.width,Fe=Se.height,We=Se.x,He=Se.y,Ke=Se.sdf,tt=Se.pixelRatio,pt=Se.stretchX,ct=Se.stretchY,bt=Se.content,Bt=new a.RGBAImage({width:Ie,height:Fe});a.RGBAImage.copy(me,Bt,{x:We,y:He},{x:0,y:0},{width:Ie,height:Fe}),Ce[de]={data:Bt,pixelRatio:tt,sdf:Ke,stretchX:pt,stretchY:ct,content:bt}}P(null,Ce)}}return{cancel:function(){ie&&(ie.cancel(),ie=null),ne&&(ne.cancel(),ne=null)}}}(f,this.map._requestManager,function(b,E){if(m._spriteRequest=null,b)m.fire(new a.ErrorEvent(b));else if(E)for(var P in E)m.imageManager.addImage(P,E[P]);m.imageManager.setLoaded(!0),m._availableImages=m.imageManager.listImages(),m.dispatcher.broadcast("setImages",m._availableImages),m.fire(new a.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(f){var m=this.sourceCaches[f.source];if(m){var b=f.sourceLayer;if(b){var E=m.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(b)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+b+'" does not exist on source "'+E.id+'" as specified by style layer "'+f.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var f in this.sourceCaches)if(!this.sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(f){for(var m=[],b=0,E=f;b<E.length;b+=1){var P=this._layers[E[b]];P.type!=="custom"&&m.push(P.serialize())}return m},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var f in this.sourceCaches)if(this.sourceCaches[f].hasTransition())return!0;for(var m in this._layers)if(this._layers[m].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(f){if(this._loaded){var m=this._changed;if(this._changed){var b=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);for(var P in(b.length||E.length)&&this._updateWorkerLayers(b,E),this._updatedSources){var L=this._updatedSources[P];L==="reload"?this._reloadSource(P):L==="clear"&&this._clearSource(P)}for(var N in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[N].updateTransitions(f);this.light.updateTransitions(f),this._resetUpdates()}var G={};for(var te in this.sourceCaches){var ie=this.sourceCaches[te];G[te]=ie.used,ie.used=!1}for(var ne=0,ye=this._order;ne<ye.length;ne+=1){var me=this._layers[ye[ne]];me.recalculate(f,this._availableImages),!me.isHidden(f.zoom)&&me.source&&(this.sourceCaches[me.source].used=!0)}for(var Ce in G){var de=this.sourceCaches[Ce];G[Ce]!==de.used&&de.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ce}))}this.light.recalculate(f),this.z=f.zoom,m&&this.fire(new a.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var f=Object.keys(this._changedImages);if(f.length){for(var m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}},p.prototype._updateWorkerLayers=function(f,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:m})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(f){var m=this;if(this._checkLoaded(),ol(this,a.validateStyle(f)))return!1;(f=a.clone$1(f)).layers=xt(f.layers);var b=function(P,L){if(!P)return[{command:ot.setStyle,args:[L]}];var N=[];try{if(!a.deepEqual(P.version,L.version))return[{command:ot.setStyle,args:[L]}];a.deepEqual(P.center,L.center)||N.push({command:ot.setCenter,args:[L.center]}),a.deepEqual(P.zoom,L.zoom)||N.push({command:ot.setZoom,args:[L.zoom]}),a.deepEqual(P.bearing,L.bearing)||N.push({command:ot.setBearing,args:[L.bearing]}),a.deepEqual(P.pitch,L.pitch)||N.push({command:ot.setPitch,args:[L.pitch]}),a.deepEqual(P.sprite,L.sprite)||N.push({command:ot.setSprite,args:[L.sprite]}),a.deepEqual(P.glyphs,L.glyphs)||N.push({command:ot.setGlyphs,args:[L.glyphs]}),a.deepEqual(P.transition,L.transition)||N.push({command:ot.setTransition,args:[L.transition]}),a.deepEqual(P.light,L.light)||N.push({command:ot.setLight,args:[L.light]});var G={},te=[];(function(ne,ye,me,Ce){var de;for(de in ye=ye||{},ne=ne||{})ne.hasOwnProperty(de)&&(ye.hasOwnProperty(de)||gn(de,me,Ce));for(de in ye)ye.hasOwnProperty(de)&&(ne.hasOwnProperty(de)?a.deepEqual(ne[de],ye[de])||(ne[de].type==="geojson"&&ye[de].type==="geojson"&&tr(ne,ye,de)?me.push({command:ot.setGeoJSONSourceData,args:[de,ye[de].data]}):zt(de,ye,me,Ce)):mn(de,ye,me))})(P.sources,L.sources,te,G);var ie=[];P.layers&&P.layers.forEach(function(ne){G[ne.source]?N.push({command:ot.removeLayer,args:[ne.id]}):ie.push(ne)}),N=N.concat(te),function(ne,ye,me){ye=ye||[];var Ce,de,Se,Ie,Fe,We,He,Ke=(ne=ne||[]).map(ar),tt=ye.map(ar),pt=ne.reduce(Tr,{}),ct=ye.reduce(Tr,{}),bt=Ke.slice(),Bt=Object.create(null);for(Ce=0,de=0;Ce<Ke.length;Ce++)ct.hasOwnProperty(Se=Ke[Ce])?de++:(me.push({command:ot.removeLayer,args:[Se]}),bt.splice(bt.indexOf(Se,de),1));for(Ce=0,de=0;Ce<tt.length;Ce++)bt[bt.length-1-Ce]!==(Se=tt[tt.length-1-Ce])&&(pt.hasOwnProperty(Se)?(me.push({command:ot.removeLayer,args:[Se]}),bt.splice(bt.lastIndexOf(Se,bt.length-de),1)):de++,me.push({command:ot.addLayer,args:[ct[Se],We=bt[bt.length-Ce]]}),bt.splice(bt.length-Ce,0,Se),Bt[Se]=!0);for(Ce=0;Ce<tt.length;Ce++)if(Ie=pt[Se=tt[Ce]],Fe=ct[Se],!Bt[Se]&&!a.deepEqual(Ie,Fe))if(a.deepEqual(Ie.source,Fe.source)&&a.deepEqual(Ie["source-layer"],Fe["source-layer"])&&a.deepEqual(Ie.type,Fe.type)){for(He in Tn(Ie.layout,Fe.layout,me,Se,null,ot.setLayoutProperty),Tn(Ie.paint,Fe.paint,me,Se,null,ot.setPaintProperty),a.deepEqual(Ie.filter,Fe.filter)||me.push({command:ot.setFilter,args:[Se,Fe.filter]}),a.deepEqual(Ie.minzoom,Fe.minzoom)&&a.deepEqual(Ie.maxzoom,Fe.maxzoom)||me.push({command:ot.setLayerZoomRange,args:[Se,Fe.minzoom,Fe.maxzoom]}),Ie)Ie.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Tn(Ie[He],Fe[He],me,Se,He.slice(6),ot.setPaintProperty):a.deepEqual(Ie[He],Fe[He])||me.push({command:ot.setLayerProperty,args:[Se,He,Fe[He]]}));for(He in Fe)Fe.hasOwnProperty(He)&&!Ie.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Tn(Ie[He],Fe[He],me,Se,He.slice(6),ot.setPaintProperty):a.deepEqual(Ie[He],Fe[He])||me.push({command:ot.setLayerProperty,args:[Se,He,Fe[He]]}))}else me.push({command:ot.removeLayer,args:[Se]}),We=bt[bt.lastIndexOf(Se)+1],me.push({command:ot.addLayer,args:[Fe,We]})}(ie,L.layers,N)}catch(ne){console.warn("Unable to compute style diff:",ne),N=[{command:ot.setStyle,args:[L]}]}return N}(this.serialize(),f).filter(function(P){return!(P.command in al)});if(b.length===0)return!1;var E=b.filter(function(P){return!(P.command in Of)});if(E.length>0)throw new Error("Unimplemented: "+E.map(function(P){return P.command}).join(", ")+".");return b.forEach(function(P){P.command!=="setTransition"&&m[P.command].apply(m,P.args)}),this.stylesheet=f,!0},p.prototype.addImage=function(f,m){if(this.getImage(f))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(f,m),this._afterImageUpdated(f)},p.prototype.updateImage=function(f,m){this.imageManager.updateImage(f,m)},p.prototype.getImage=function(f){return this.imageManager.getImage(f)},p.prototype.removeImage=function(f){if(!this.getImage(f))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(f),this._afterImageUpdated(f)},p.prototype._afterImageUpdated=function(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(f,m,b){var E=this;if(b===void 0&&(b={}),this._checkLoaded(),this.sourceCaches[f]!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(m).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.validateStyle.source,"sources."+f,m,null,b))){this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);var P=this.sourceCaches[f]=new le(f,m,this.dispatcher);P.style=this,P.setEventedParent(this,function(){return{isSourceLoaded:E.loaded(),source:P.serialize(),sourceId:f}}),P.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(f){if(this._checkLoaded(),this.sourceCaches[f]===void 0)throw new Error("There is no source with this ID");for(var m in this._layers)if(this._layers[m].source===f)return this.fire(new a.ErrorEvent(new Error('Source "'+f+'" cannot be removed while layer "'+m+'" is using it.')));var b=this.sourceCaches[f];delete this.sourceCaches[f],delete this._updatedSources[f],b.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:f})),b.setEventedParent(null),b.clearTiles(),b.onRemove&&b.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(f,m){this._checkLoaded(),this.sourceCaches[f].getSource().setData(m),this._changed=!0},p.prototype.getSource=function(f){return this.sourceCaches[f]&&this.sourceCaches[f].getSource()},p.prototype.addLayer=function(f,m,b){b===void 0&&(b={}),this._checkLoaded();var E=f.id;if(this.getLayer(E))this.fire(new a.ErrorEvent(new Error('Layer with id "'+E+'" already exists on this map')));else{var P;if(f.type==="custom"){if(ol(this,a.validateCustomStyleLayer(f)))return;P=a.createStyleLayer(f)}else{if(typeof f.source=="object"&&(this.addSource(E,f.source),f=a.clone$1(f),f=a.extend(f,{source:E})),this._validate(a.validateStyle.layer,"layers."+E,f,{arrayIndex:-1},b))return;P=a.createStyleLayer(f),this._validateLayer(P),P.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[P.id]=P.serialize()}var L=m?this._order.indexOf(m):this._order.length;if(m&&L===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.')));else{if(this._order.splice(L,0,E),this._layerOrderChanged=!0,this._layers[E]=P,this._removedLayers[E]&&P.source&&P.type!=="custom"){var N=this._removedLayers[E];delete this._removedLayers[E],N.type!==P.type?this._updatedSources[P.source]="clear":(this._updatedSources[P.source]="reload",this.sourceCaches[P.source].pause())}this._updateLayer(P),P.onAdd&&P.onAdd(this.map)}}},p.prototype.moveLayer=function(f,m){if(this._checkLoaded(),this._changed=!0,this._layers[f]){if(f!==m){var b=this._order.indexOf(f);this._order.splice(b,1);var E=m?this._order.indexOf(m):this._order.length;m&&E===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.'))):(this._order.splice(E,0,f),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(f){this._checkLoaded();var m=this._layers[f];if(m){m.setEventedParent(null);var b=this._order.indexOf(f);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=m,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],m.onRemove&&m.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(f){return this._layers[f]},p.prototype.hasLayer=function(f){return f in this._layers},p.prototype.setLayerZoomRange=function(f,m,b){this._checkLoaded();var E=this.getLayer(f);E?E.minzoom===m&&E.maxzoom===b||(m!=null&&(E.minzoom=m),b!=null&&(E.maxzoom=b),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(f,m,b){b===void 0&&(b={}),this._checkLoaded();var E=this.getLayer(f);if(E){if(!a.deepEqual(E.filter,m))return m==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(a.validateStyle.filter,"layers."+E.id+".filter",m,null,b)||(E.filter=a.clone$1(m),this._updateLayer(E)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(f){return a.clone$1(this.getLayer(f).filter)},p.prototype.setLayoutProperty=function(f,m,b,E){E===void 0&&(E={}),this._checkLoaded();var P=this.getLayer(f);P?a.deepEqual(P.getLayoutProperty(m),b)||(P.setLayoutProperty(m,b,E),this._updateLayer(P)):this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(f,m){var b=this.getLayer(f);if(b)return b.getLayoutProperty(m);this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(f,m,b,E){E===void 0&&(E={}),this._checkLoaded();var P=this.getLayer(f);P?a.deepEqual(P.getPaintProperty(m),b)||(P.setPaintProperty(m,b,E)&&this._updateLayer(P),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(f,m){return this.getLayer(f).getPaintProperty(m)},p.prototype.setFeatureState=function(f,m){this._checkLoaded();var b=f.source,E=f.sourceLayer,P=this.sourceCaches[b];if(P!==void 0){var L=P.getSource().type;L==="geojson"&&E?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):L!=="vector"||E?(f.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),P.setFeatureState(E,f.id,m)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(f,m){this._checkLoaded();var b=f.source,E=this.sourceCaches[b];if(E!==void 0){var P=E.getSource().type,L=P==="vector"?f.sourceLayer:void 0;P!=="vector"||L?m&&typeof f.id!="string"&&typeof f.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(L,f.id,m):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(f){this._checkLoaded();var m=f.source,b=f.sourceLayer,E=this.sourceCaches[m];if(E!==void 0){if(E.getSource().type!=="vector"||b)return f.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.getFeatureState(b,f.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(f){return f.serialize()}),layers:this._serializeLayers(this._order)},function(f){return f!==void 0})},p.prototype._updateLayer=function(f){this._updatedLayers[f.id]=!0,f.source&&!this._updatedSources[f.source]&&this.sourceCaches[f.source].getSource().type!=="raster"&&(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(f){for(var m=this,b=function(pt){return m._layers[pt].type==="fill-extrusion"},E={},P=[],L=this._order.length-1;L>=0;L--){var N=this._order[L];if(b(N)){E[N]=L;for(var G=0,te=f;G<te.length;G+=1){var ie=te[G][N];if(ie)for(var ne=0,ye=ie;ne<ye.length;ne+=1)P.push(ye[ne])}}}P.sort(function(pt,ct){return ct.intersectionZ-pt.intersectionZ});for(var me=[],Ce=this._order.length-1;Ce>=0;Ce--){var de=this._order[Ce];if(b(de))for(var Se=P.length-1;Se>=0;Se--){var Ie=P[Se].feature;if(E[Ie.layer.id]<Ce)break;me.push(Ie),P.pop()}else for(var Fe=0,We=f;Fe<We.length;Fe+=1){var He=We[Fe][de];if(He)for(var Ke=0,tt=He;Ke<tt.length;Ke+=1)me.push(tt[Ke].feature)}}return me},p.prototype.queryRenderedFeatures=function(f,m,b){m&&m.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",m.filter,null,m);var E={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var P=0,L=m.layers;P<L.length;P+=1){var N=L[P],G=this._layers[N];if(!G)return this.fire(new a.ErrorEvent(new Error("The layer '"+N+"' does not exist in the map's style and cannot be queried for features."))),[];E[G.source]=!0}}var te=[];for(var ie in m.availableImages=this._availableImages,this.sourceCaches)m.layers&&!E[ie]||te.push(Kt(this.sourceCaches[ie],this._layers,this._serializedLayers,f,m,b));return this.placement&&te.push(function(ne,ye,me,Ce,de,Se,Ie){for(var Fe={},We=Se.queryRenderedSymbols(Ce),He=[],Ke=0,tt=Object.keys(We).map(Number);Ke<tt.length;Ke+=1)He.push(Ie[tt[Ke]]);He.sort(cn);for(var pt=function(){var Wt=bt[ct],Nn=Wt.featureIndex.lookupSymbolFeatures(We[Wt.bucketInstanceId],ye,Wt.bucketIndex,Wt.sourceLayerIndex,de.filter,de.layers,de.availableImages,ne);for(var Pt in Nn){var en=Fe[Pt]=Fe[Pt]||[],wn=Nn[Pt];wn.sort(function(ln,rn){var Ft=Wt.featureSortOrder;if(Ft){var nr=Ft.indexOf(ln.featureIndex);return Ft.indexOf(rn.featureIndex)-nr}return rn.featureIndex-ln.featureIndex});for(var fn=0,on=wn;fn<on.length;fn+=1)en.push(on[fn])}},ct=0,bt=He;ct<bt.length;ct+=1)pt();var Bt=function(Wt){Fe[Wt].forEach(function(Nn){var Pt=Nn.feature,en=me[ne[Wt].source].getFeatureState(Pt.layer["source-layer"],Pt.id);Pt.source=Pt.layer.source,Pt.layer["source-layer"]&&(Pt.sourceLayer=Pt.layer["source-layer"]),Pt.state=en})};for(var Xt in Fe)Bt(Xt);return Fe}(this._layers,this._serializedLayers,this.sourceCaches,f,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(te)},p.prototype.querySourceFeatures=function(f,m){m&&m.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",m.filter,null,m);var b=this.sourceCaches[f];return b?function(E,P){for(var L=E.getRenderableIds().map(function(ye){return E.getTileByID(ye)}),N=[],G={},te=0;te<L.length;te++){var ie=L[te],ne=ie.tileID.canonical.key;G[ne]||(G[ne]=!0,ie.querySourceFeatures(N,P))}return N}(b,m):[]},p.prototype.addSourceType=function(f,m,b){return p.getSourceType(f)?b(new Error('A source type called "'+f+'" already exists.')):(p.setSourceType(f,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:m.workerSourceURL},b):b(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(f,m){m===void 0&&(m={}),this._checkLoaded();var b=this.light.getLight(),E=!1;for(var P in f)if(!a.deepEqual(f[P],b[P])){E=!0;break}if(E){var L={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(f,m),this.light.updateTransitions(L)}},p.prototype._validate=function(f,m,b,E,P){return P===void 0&&(P={}),(!P||P.validate!==!1)&&ol(this,f.call(a.validateStyle,a.extend({key:m,style:this.serialize(),value:b,styleSpec:a.styleSpec},E)))},p.prototype._remove=function(){for(var f in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[f].setEventedParent(null);for(var m in this.sourceCaches)this.sourceCaches[m].clearTiles(),this.sourceCaches[m].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(f){this.sourceCaches[f].clearTiles()},p.prototype._reloadSource=function(f){this.sourceCaches[f].resume(),this.sourceCaches[f].reload()},p.prototype._updateSources=function(f){for(var m in this.sourceCaches)this.sourceCaches[m].update(f)},p.prototype._generateCollisionBoxes=function(){for(var f in this.sourceCaches)this._reloadSource(f)},p.prototype._updatePlacement=function(f,m,b,E,P){P===void 0&&(P=!1);for(var L=!1,N=!1,G={},te=0,ie=this._order;te<ie.length;te+=1){var ne=this._layers[ie[te]];if(ne.type==="symbol"){if(!G[ne.source]){var ye=this.sourceCaches[ne.source];G[ne.source]=ye.getRenderableIds(!0).map(function(Ie){return ye.getTileByID(Ie)}).sort(function(Ie,Fe){return Fe.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(Fe.tileID)?-1:1)})}var me=this.crossTileSymbolIndex.addLayer(ne,G[ne.source],f.center.lng);L=L||me}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((P=P||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),f.zoom))&&(this.pauseablePlacement=new hc(f,this._order,P,m,b,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,G),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),N=!0),L&&this.pauseablePlacement.placement.setStale()),N||L)for(var Ce=0,de=this._order;Ce<de.length;Ce+=1){var Se=this._layers[de[Ce]];Se.type==="symbol"&&this.placement.updateLayerOpacities(Se,G[Se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var f in this.sourceCaches)this.sourceCaches[f].releaseSymbolFadeTiles()},p.prototype.getImages=function(f,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();var E=this.sourceCaches[m.source];E&&E.setDependencies(m.tileID.key,m.type,m.icons)},p.prototype.getGlyphs=function(f,m,b){this.glyphManager.getGlyphs(m.stacks,b)},p.prototype.getResource=function(f,m,b){return a.makeRequest(m,b)},p}(a.Evented);er.getSourceType=function(c){return Ht[c]},er.setSourceType=function(c,p){Ht[c]=p},er.registerForPluginStateChange=a.registerForPluginStateChange;var Wa=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),fi=Cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Lf=Cr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rd=Cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Rg=Cr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Fg=Cr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mf=Cr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),oh=Cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Li=Cr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),mc=Cr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),sl=Cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ah=Cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),sh=Cr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),_o=Cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ou=Cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),lh=Cr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Mi=Cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Rf=Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Is=Cr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Os=Cr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ri=Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Kl=Cr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Fi=Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Zl=Cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ll=Cr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),$o=Cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),gc=Cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Cr(c,p){var f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=p.match(/attribute ([\w]+) ([\w]+)/g),b=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=E?E.concat(b):b,L={};return{fragmentSource:c=c.replace(f,function(N,G,te,ie,ne){return L[ne]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_`+ne+`
varying `+te+" "+ie+" "+ne+`;
#else
uniform `+te+" "+ie+" u_"+ne+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ne+`
    `+te+" "+ie+" "+ne+" = u_"+ne+`;
#endif
`}),vertexSource:p=p.replace(f,function(N,G,te,ie,ne){var ye=ie==="float"?"vec2":"vec4",me=ne.match(/color/)?"color":ye;return L[ne]?G==="define"?`
#ifndef HAS_UNIFORM_u_`+ne+`
uniform lowp float u_`+ne+`_t;
attribute `+te+" "+ye+" a_"+ne+`;
varying `+te+" "+ie+" "+ne+`;
#else
uniform `+te+" "+ie+" u_"+ne+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ne+`
    `+ne+" = a_"+ne+`;
#else
    `+te+" "+ie+" "+ne+" = u_"+ne+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ne+`
    `+ne+" = unpack_mix_"+me+"(a_"+ne+", u_"+ne+`_t);
#else
    `+te+" "+ie+" "+ne+" = u_"+ne+`;
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_`+ne+`
uniform lowp float u_`+ne+`_t;
attribute `+te+" "+ye+" a_"+ne+`;
#else
uniform `+te+" "+ie+" u_"+ne+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ne+`
    `+te+" "+ie+" "+ne+" = a_"+ne+`;
#else
    `+te+" "+ie+" "+ne+" = u_"+ne+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ne+`
    `+te+" "+ie+" "+ne+" = unpack_mix_"+me+"(a_"+ne+", u_"+ne+`_t);
#else
    `+te+" "+ie+" "+ne+" = u_"+ne+`;
#endif
`}),staticAttributes:m,staticUniforms:P}}var Er=Object.freeze({__proto__:null,prelude:fi,background:Lf,backgroundPattern:Rd,circle:Rg,clippingMask:Fg,heatmap:Mf,heatmapTexture:oh,collisionBox:Li,collisionCircle:mc,debug:sl,fill:ah,fillOutline:sh,fillOutlinePattern:_o,fillPattern:Ou,fillExtrusion:lh,fillExtrusionPattern:Mi,hillshadePrepare:Rf,hillshade:Is,line:Os,lineGradient:Ri,linePattern:Kl,lineSDF:Fi,raster:Zl,symbolIcon:ll,symbolSDF:$o,symbolTextAndIcon:gc}),Ka=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ff(c){for(var p=[],f=0;f<c.length;f++)if(c[f]!==null){var m=c[f].split(" ");p.push(m.pop())}return p}Ka.prototype.bind=function(c,p,f,m,b,E,P,L){this.context=c;for(var N=this.boundPaintVertexBuffers.length!==m.length,G=0;!N&&G<m.length;G++)this.boundPaintVertexBuffers[G]!==m[G]&&(N=!0);c.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===f&&!N&&this.boundIndexBuffer===b&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===P&&this.boundDynamicVertexBuffer2===L?(c.bindVertexArrayOES.set(this.vao),P&&P.bind(),b&&b.dynamicDraw&&b.bind(),L&&L.bind()):this.freshBind(p,f,m,b,E,P,L)},Ka.prototype.freshBind=function(c,p,f,m,b,E,P){var L,N=c.numAttributes,G=this.context,te=G.gl;if(G.extVertexArrayObject)this.vao&&this.destroy(),this.vao=G.extVertexArrayObject.createVertexArrayOES(),G.bindVertexArrayOES.set(this.vao),L=0,this.boundProgram=c,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=P;else{L=G.currentNumAttributes||0;for(var ie=N;ie<L;ie++)te.disableVertexAttribArray(ie)}p.enableAttributes(te,c);for(var ne=0,ye=f;ne<ye.length;ne+=1)ye[ne].enableAttributes(te,c);E&&E.enableAttributes(te,c),P&&P.enableAttributes(te,c),p.bind(),p.setVertexAttribPointers(te,c,b);for(var me=0,Ce=f;me<Ce.length;me+=1){var de=Ce[me];de.bind(),de.setVertexAttribPointers(te,c,b)}E&&(E.bind(),E.setVertexAttribPointers(te,c,b)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(te,c,b)),G.currentNumAttributes=N},Ka.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Fd=function(c,p,f,m,b,E){var P=c.gl;this.program=P.createProgram();for(var L=Ff(f.staticAttributes),N=m?m.getBinderAttributes():[],G=L.concat(N),te=f.staticUniforms?Ff(f.staticUniforms):[],ie=m?m.getBinderUniforms():[],ne=[],ye=0,me=te.concat(ie);ye<me.length;ye+=1){var Ce=me[ye];ne.indexOf(Ce)<0&&ne.push(Ce)}var de=m?m.defines():[];E&&de.push("#define OVERDRAW_INSPECTOR;");var Se=de.concat(fi.fragmentSource,f.fragmentSource).join(`
`),Ie=de.concat(fi.vertexSource,f.vertexSource).join(`
`),Fe=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(Fe,Se),P.compileShader(Fe),P.attachShader(this.program,Fe);var We=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(We,Ie),P.compileShader(We),P.attachShader(this.program,We),this.attributes={};var He={};this.numAttributes=G.length;for(var Ke=0;Ke<this.numAttributes;Ke++)G[Ke]&&(P.bindAttribLocation(this.program,Ke,G[Ke]),this.attributes[G[Ke]]=Ke);P.linkProgram(this.program),P.deleteShader(We),P.deleteShader(Fe);for(var tt=0;tt<ne.length;tt++){var pt=ne[tt];if(pt&&!He[pt]){var ct=P.getUniformLocation(this.program,pt);ct&&(He[pt]=ct)}}this.fixedUniforms=b(c,He),this.binderUniforms=m?m.getUniforms(c,He):[]}}};function Df(c,p,f){var m=1/zo(f,1,p.transform.tileZoom),b=Math.pow(2,f.tileID.overscaledZ),E=f.tileSize*Math.pow(2,p.transform.tileZoom)/b,P=E*(f.tileID.canonical.x+f.tileID.wrap*b),L=E*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[m,c.fromScale,c.toScale],u_fade:c.t,u_pixel_coord_upper:[P>>16,L>>16],u_pixel_coord_lower:[65535&P,65535&L]}}Fd.prototype.draw=function(c,p,f,m,b,E,P,L,N,G,te,ie,ne,ye,me,Ce){var de,Se=c.gl;if(!this.failedToCreate){for(var Ie in c.program.set(this.program),c.setDepthMode(f),c.setStencilMode(m),c.setColorMode(b),c.setCullFace(E),this.fixedUniforms)this.fixedUniforms[Ie].set(P[Ie]);ye&&ye.setUniforms(c,this.binderUniforms,ie,{zoom:ne});for(var Fe=(de={},de[Se.LINES]=2,de[Se.TRIANGLES]=3,de[Se.LINE_STRIP]=1,de)[p],We=0,He=te.get();We<He.length;We+=1){var Ke=He[We],tt=Ke.vaos||(Ke.vaos={});(tt[L]||(tt[L]=new Ka)).bind(c,this,N,ye?ye.getPaintVertexBuffers():[],G,Ke.vertexOffset,me,Ce),Se.drawElements(p,Ke.primitiveLength*Fe,Se.UNSIGNED_SHORT,Ke.primitiveOffset*Fe*2)}}};var Dd=function(c,p,f,m){var b=p.style.light,E=b.properties.get("position"),P=[E.x,E.y,E.z],L=a.create$1();b.properties.get("anchor")==="viewport"&&a.fromRotation(L,-p.transform.angle),a.transformMat3(P,P,L);var N=b.properties.get("color");return{u_matrix:c,u_lightpos:P,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[N.r,N.g,N.b],u_vertical_gradient:+f,u_opacity:m}},Dg=function(c,p,f,m,b,E,P){return a.extend(Dd(c,p,f,m),Df(E,p,P),{u_height_factor:-Math.pow(2,b.overscaledZ)/P.tileSize/8})},ul=function(c){return{u_matrix:c}},Ls=function(c,p,f,m){return a.extend(ul(c),Df(f,p,m))},Ms=function(c,p){return{u_matrix:c,u_world:p}},Xl=function(c,p,f,m,b){return a.extend(Ls(c,p,f,m),{u_world:b})},zd=function(c,p,f,m){var b,E,P=c.transform;if(m.paint.get("circle-pitch-alignment")==="map"){var L=zo(f,1,P.zoom);b=!0,E=[L,L]}else b=!1,E=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:c.translatePosMatrix(p.posMatrix,f,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:E}},zf=function(c,p,f){var m=zo(f,1,p.zoom),b=Math.pow(2,p.zoom-f.tileID.overscaledZ),E=f.tileID.overscaleFactor();return{u_matrix:c,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[p.pixelsToGLUnits[0]/(m*b),p.pixelsToGLUnits[1]/(m*b)],u_overscale_factor:E}},cl=function(c,p,f){return{u_matrix:c,u_inv_matrix:p,u_camera_to_center_distance:f.cameraToCenterDistance,u_viewport_size:[f.width,f.height]}},yc=function(c,p,f){return f===void 0&&(f=1),{u_matrix:c,u_color:p,u_overlay:0,u_overlay_scale:f}},Rs=function(c){return{u_matrix:c}},Ql=function(c,p,f,m){return{u_matrix:c,u_extrude_scale:zo(p,1,f),u_intensity:m}},Bf=function(c,p,f){var m=c.transform;return{u_matrix:Gi(c,p,f),u_ratio:1/zo(p,1,m.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},vc=function(c,p,f,m){return a.extend(Bf(c,p,f),{u_image:0,u_image_height:m})},dr=function(c,p,f,m){var b=c.transform,E=uh(p,b);return{u_matrix:Gi(c,p,f),u_texsize:p.imageAtlasTexture.size,u_ratio:1/zo(p,1,b.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[E,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Nf=function(c,p,f,m,b){var E=c.lineAtlas,P=uh(p,c.transform),L=f.layout.get("line-cap")==="round",N=E.getDash(m.from,L),G=E.getDash(m.to,L),te=N.width*b.fromScale,ie=G.width*b.toScale;return a.extend(Bf(c,p,f),{u_patternscale_a:[P/te,-N.height/2],u_patternscale_b:[P/ie,-G.height/2],u_sdfgamma:E.width/(256*Math.min(te,ie)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:G.y,u_mix:b.t})};function uh(c,p){return 1/zo(c,1,p.tileZoom)}function Gi(c,p,f){return c.translatePosMatrix(p.tileID.posMatrix,p,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}var ch=function(c,p,f,m,b){return{u_matrix:c,u_tl_parent:p,u_scale_parent:f,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(P=b.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(E=b.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:_c(b.paint.get("raster-hue-rotate"))};var E,P};function _c(c){c*=Math.PI/180;var p=Math.sin(c),f=Math.cos(c);return[(2*f+1)/3,(-Math.sqrt(3)*p-f+1)/3,(Math.sqrt(3)*p-f+1)/3]}var Lu,fh=function(c,p,f,m,b,E,P,L,N,G){var te=b.transform;return{u_is_size_zoom_constant:+(c==="constant"||c==="source"),u_is_size_feature_constant:+(c==="constant"||c==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:te.width/te.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+N,u_pitch_with_map:+m,u_texsize:G,u_texture:0}},Mu=function(c,p,f,m,b,E,P,L,N,G,te){var ie=b.transform;return a.extend(fh(c,p,f,m,b,E,P,L,N,G),{u_gamma_scale:m?Math.cos(ie._pitch)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+te})},$f=function(c,p,f,m,b,E,P,L,N,G){return a.extend(Mu(c,p,f,m,b,E,P,L,!0,N,!0),{u_texsize_icon:G,u_texture_icon:1})},Uf=function(c,p,f){return{u_matrix:c,u_opacity:p,u_color:f}},xc=function(c,p,f,m,b,E){return a.extend(function(P,L,N,G){var te=N.imageManager.getPattern(P.from.toString()),ie=N.imageManager.getPattern(P.to.toString()),ne=N.imageManager.getPixelSize(),ye=ne.width,me=ne.height,Ce=Math.pow(2,G.tileID.overscaledZ),de=G.tileSize*Math.pow(2,N.transform.tileZoom)/Ce,Se=de*(G.tileID.canonical.x+G.tileID.wrap*Ce),Ie=de*G.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:ie.tl,u_pattern_br_b:ie.br,u_texsize:[ye,me],u_mix:L.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:ie.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/zo(G,1,N.transform.tileZoom),u_pixel_coord_upper:[Se>>16,Ie>>16],u_pixel_coord_lower:[65535&Se,65535&Ie]}}(m,E,f,b),{u_matrix:c,u_opacity:p})},Ru={fillExtrusion:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_lightpos:new a.Uniform3f(c,p.u_lightpos),u_lightintensity:new a.Uniform1f(c,p.u_lightintensity),u_lightcolor:new a.Uniform3f(c,p.u_lightcolor),u_vertical_gradient:new a.Uniform1f(c,p.u_vertical_gradient),u_opacity:new a.Uniform1f(c,p.u_opacity)}},fillExtrusionPattern:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_lightpos:new a.Uniform3f(c,p.u_lightpos),u_lightintensity:new a.Uniform1f(c,p.u_lightintensity),u_lightcolor:new a.Uniform3f(c,p.u_lightcolor),u_vertical_gradient:new a.Uniform1f(c,p.u_vertical_gradient),u_height_factor:new a.Uniform1f(c,p.u_height_factor),u_image:new a.Uniform1i(c,p.u_image),u_texsize:new a.Uniform2f(c,p.u_texsize),u_pixel_coord_upper:new a.Uniform2f(c,p.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(c,p.u_pixel_coord_lower),u_scale:new a.Uniform3f(c,p.u_scale),u_fade:new a.Uniform1f(c,p.u_fade),u_opacity:new a.Uniform1f(c,p.u_opacity)}},fill:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix)}},fillPattern:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_image:new a.Uniform1i(c,p.u_image),u_texsize:new a.Uniform2f(c,p.u_texsize),u_pixel_coord_upper:new a.Uniform2f(c,p.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(c,p.u_pixel_coord_lower),u_scale:new a.Uniform3f(c,p.u_scale),u_fade:new a.Uniform1f(c,p.u_fade)}},fillOutline:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_world:new a.Uniform2f(c,p.u_world)}},fillOutlinePattern:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_world:new a.Uniform2f(c,p.u_world),u_image:new a.Uniform1i(c,p.u_image),u_texsize:new a.Uniform2f(c,p.u_texsize),u_pixel_coord_upper:new a.Uniform2f(c,p.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(c,p.u_pixel_coord_lower),u_scale:new a.Uniform3f(c,p.u_scale),u_fade:new a.Uniform1f(c,p.u_fade)}},circle:function(c,p){return{u_camera_to_center_distance:new a.Uniform1f(c,p.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(c,p.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(c,p.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(c,p.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(c,p.u_matrix)}},collisionBox:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_camera_to_center_distance:new a.Uniform1f(c,p.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(c,p.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(c,p.u_extrude_scale),u_overscale_factor:new a.Uniform1f(c,p.u_overscale_factor)}},collisionCircle:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_inv_matrix:new a.UniformMatrix4f(c,p.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(c,p.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(c,p.u_viewport_size)}},debug:function(c,p){return{u_color:new a.UniformColor(c,p.u_color),u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_overlay:new a.Uniform1i(c,p.u_overlay),u_overlay_scale:new a.Uniform1f(c,p.u_overlay_scale)}},clippingMask:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix)}},heatmap:function(c,p){return{u_extrude_scale:new a.Uniform1f(c,p.u_extrude_scale),u_intensity:new a.Uniform1f(c,p.u_intensity),u_matrix:new a.UniformMatrix4f(c,p.u_matrix)}},heatmapTexture:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_world:new a.Uniform2f(c,p.u_world),u_image:new a.Uniform1i(c,p.u_image),u_color_ramp:new a.Uniform1i(c,p.u_color_ramp),u_opacity:new a.Uniform1f(c,p.u_opacity)}},hillshade:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_image:new a.Uniform1i(c,p.u_image),u_latrange:new a.Uniform2f(c,p.u_latrange),u_light:new a.Uniform2f(c,p.u_light),u_shadow:new a.UniformColor(c,p.u_shadow),u_highlight:new a.UniformColor(c,p.u_highlight),u_accent:new a.UniformColor(c,p.u_accent)}},hillshadePrepare:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_image:new a.Uniform1i(c,p.u_image),u_dimension:new a.Uniform2f(c,p.u_dimension),u_zoom:new a.Uniform1f(c,p.u_zoom),u_unpack:new a.Uniform4f(c,p.u_unpack)}},line:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_ratio:new a.Uniform1f(c,p.u_ratio),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(c,p.u_units_to_pixels)}},lineGradient:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_ratio:new a.Uniform1f(c,p.u_ratio),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(c,p.u_units_to_pixels),u_image:new a.Uniform1i(c,p.u_image),u_image_height:new a.Uniform1f(c,p.u_image_height)}},linePattern:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_texsize:new a.Uniform2f(c,p.u_texsize),u_ratio:new a.Uniform1f(c,p.u_ratio),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_image:new a.Uniform1i(c,p.u_image),u_units_to_pixels:new a.Uniform2f(c,p.u_units_to_pixels),u_scale:new a.Uniform3f(c,p.u_scale),u_fade:new a.Uniform1f(c,p.u_fade)}},lineSDF:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_ratio:new a.Uniform1f(c,p.u_ratio),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(c,p.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(c,p.u_patternscale_a),u_patternscale_b:new a.Uniform2f(c,p.u_patternscale_b),u_sdfgamma:new a.Uniform1f(c,p.u_sdfgamma),u_image:new a.Uniform1i(c,p.u_image),u_tex_y_a:new a.Uniform1f(c,p.u_tex_y_a),u_tex_y_b:new a.Uniform1f(c,p.u_tex_y_b),u_mix:new a.Uniform1f(c,p.u_mix)}},raster:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_tl_parent:new a.Uniform2f(c,p.u_tl_parent),u_scale_parent:new a.Uniform1f(c,p.u_scale_parent),u_buffer_scale:new a.Uniform1f(c,p.u_buffer_scale),u_fade_t:new a.Uniform1f(c,p.u_fade_t),u_opacity:new a.Uniform1f(c,p.u_opacity),u_image0:new a.Uniform1i(c,p.u_image0),u_image1:new a.Uniform1i(c,p.u_image1),u_brightness_low:new a.Uniform1f(c,p.u_brightness_low),u_brightness_high:new a.Uniform1f(c,p.u_brightness_high),u_saturation_factor:new a.Uniform1f(c,p.u_saturation_factor),u_contrast_factor:new a.Uniform1f(c,p.u_contrast_factor),u_spin_weights:new a.Uniform3f(c,p.u_spin_weights)}},symbolIcon:function(c,p){return{u_is_size_zoom_constant:new a.Uniform1i(c,p.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(c,p.u_is_size_feature_constant),u_size_t:new a.Uniform1f(c,p.u_size_t),u_size:new a.Uniform1f(c,p.u_size),u_camera_to_center_distance:new a.Uniform1f(c,p.u_camera_to_center_distance),u_pitch:new a.Uniform1f(c,p.u_pitch),u_rotate_symbol:new a.Uniform1i(c,p.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(c,p.u_aspect_ratio),u_fade_change:new a.Uniform1f(c,p.u_fade_change),u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(c,p.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(c,p.u_coord_matrix),u_is_text:new a.Uniform1i(c,p.u_is_text),u_pitch_with_map:new a.Uniform1i(c,p.u_pitch_with_map),u_texsize:new a.Uniform2f(c,p.u_texsize),u_texture:new a.Uniform1i(c,p.u_texture)}},symbolSDF:function(c,p){return{u_is_size_zoom_constant:new a.Uniform1i(c,p.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(c,p.u_is_size_feature_constant),u_size_t:new a.Uniform1f(c,p.u_size_t),u_size:new a.Uniform1f(c,p.u_size),u_camera_to_center_distance:new a.Uniform1f(c,p.u_camera_to_center_distance),u_pitch:new a.Uniform1f(c,p.u_pitch),u_rotate_symbol:new a.Uniform1i(c,p.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(c,p.u_aspect_ratio),u_fade_change:new a.Uniform1f(c,p.u_fade_change),u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(c,p.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(c,p.u_coord_matrix),u_is_text:new a.Uniform1i(c,p.u_is_text),u_pitch_with_map:new a.Uniform1i(c,p.u_pitch_with_map),u_texsize:new a.Uniform2f(c,p.u_texsize),u_texture:new a.Uniform1i(c,p.u_texture),u_gamma_scale:new a.Uniform1f(c,p.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(c,p.u_is_halo)}},symbolTextAndIcon:function(c,p){return{u_is_size_zoom_constant:new a.Uniform1i(c,p.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(c,p.u_is_size_feature_constant),u_size_t:new a.Uniform1f(c,p.u_size_t),u_size:new a.Uniform1f(c,p.u_size),u_camera_to_center_distance:new a.Uniform1f(c,p.u_camera_to_center_distance),u_pitch:new a.Uniform1f(c,p.u_pitch),u_rotate_symbol:new a.Uniform1i(c,p.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(c,p.u_aspect_ratio),u_fade_change:new a.Uniform1f(c,p.u_fade_change),u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(c,p.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(c,p.u_coord_matrix),u_is_text:new a.Uniform1i(c,p.u_is_text),u_pitch_with_map:new a.Uniform1i(c,p.u_pitch_with_map),u_texsize:new a.Uniform2f(c,p.u_texsize),u_texsize_icon:new a.Uniform2f(c,p.u_texsize_icon),u_texture:new a.Uniform1i(c,p.u_texture),u_texture_icon:new a.Uniform1i(c,p.u_texture_icon),u_gamma_scale:new a.Uniform1f(c,p.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(c,p.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(c,p.u_is_halo)}},background:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_opacity:new a.Uniform1f(c,p.u_opacity),u_color:new a.UniformColor(c,p.u_color)}},backgroundPattern:function(c,p){return{u_matrix:new a.UniformMatrix4f(c,p.u_matrix),u_opacity:new a.Uniform1f(c,p.u_opacity),u_image:new a.Uniform1i(c,p.u_image),u_pattern_tl_a:new a.Uniform2f(c,p.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(c,p.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(c,p.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(c,p.u_pattern_br_b),u_texsize:new a.Uniform2f(c,p.u_texsize),u_mix:new a.Uniform1f(c,p.u_mix),u_pattern_size_a:new a.Uniform2f(c,p.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(c,p.u_pattern_size_b),u_scale_a:new a.Uniform1f(c,p.u_scale_a),u_scale_b:new a.Uniform1f(c,p.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(c,p.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(c,p.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(c,p.u_tile_units_to_pixels)}}};function fl(c,p,f,m,b,E,P){for(var L=c.context,N=L.gl,G=c.useProgram("collisionBox"),te=[],ie=0,ne=0,ye=0;ye<m.length;ye++){var me=m[ye],Ce=p.getTile(me),de=Ce.getBucket(f);if(de){var Se=me.posMatrix;b[0]===0&&b[1]===0||(Se=c.translatePosMatrix(me.posMatrix,Ce,b,E));var Ie=P?de.textCollisionBox:de.iconCollisionBox,Fe=de.collisionCircleArray;if(Fe.length>0){var We=a.create(),He=Se;a.mul(We,de.placementInvProjMatrix,c.transform.glCoordMatrix),a.mul(We,We,de.placementViewportMatrix),te.push({circleArray:Fe,circleOffset:ne,transform:He,invTransform:We}),ne=ie+=Fe.length/4}Ie&&G.draw(L,N.LINES,oe.disabled,ge.disabled,c.colorModeForRenderPass(),Te.disabled,zf(Se,c.transform,Ce),f.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,null,c.transform.zoom,null,null,Ie.collisionVertexBuffer)}}if(P&&te.length){var Ke=c.useProgram("collisionCircle"),tt=new a.StructArrayLayout2f1f2i16;tt.resize(4*ie),tt._trim();for(var pt=0,ct=0,bt=te;ct<bt.length;ct+=1)for(var Bt=bt[ct],Xt=0;Xt<Bt.circleArray.length/4;Xt++){var Wt=4*Xt,Nn=Bt.circleArray[Wt+0],Pt=Bt.circleArray[Wt+1],en=Bt.circleArray[Wt+2],wn=Bt.circleArray[Wt+3];tt.emplace(pt++,Nn,Pt,en,wn,0),tt.emplace(pt++,Nn,Pt,en,wn,1),tt.emplace(pt++,Nn,Pt,en,wn,2),tt.emplace(pt++,Nn,Pt,en,wn,3)}(!Lu||Lu.length<2*ie)&&(Lu=function(Zr){var jr=2*Zr,pi=new a.StructArrayLayout3ui6;pi.resize(jr),pi._trim();for(var ni=0;ni<jr;ni++){var kr=6*ni;pi.uint16[kr+0]=4*ni+0,pi.uint16[kr+1]=4*ni+1,pi.uint16[kr+2]=4*ni+2,pi.uint16[kr+3]=4*ni+2,pi.uint16[kr+4]=4*ni+3,pi.uint16[kr+5]=4*ni+0}return pi}(ie));for(var fn=L.createIndexBuffer(Lu,!0),on=L.createVertexBuffer(tt,a.collisionCircleLayout.members,!0),ln=0,rn=te;ln<rn.length;ln+=1){var Ft=rn[ln],nr=cl(Ft.transform,Ft.invTransform,c.transform);Ke.draw(L,N.TRIANGLES,oe.disabled,ge.disabled,c.colorModeForRenderPass(),Te.disabled,nr,f.id,on,fn,a.SegmentVector.simpleSegment(0,2*Ft.circleOffset,Ft.circleArray.length,Ft.circleArray.length/2),null,c.transform.zoom,null,null,null)}on.destroy(),fn.destroy()}}var bc=a.identity(new Float32Array(16));function Za(c,p,f,m,b,E){var P=a.getAnchorAlignment(c),L=-(P.horizontalAlign-.5)*p,N=-(P.verticalAlign-.5)*f,G=a.evaluateVariableOffset(c,m);return new a.Point((L/b+G[0])*E,(N/b+G[1])*E)}function jf(c,p,f,m,b,E,P,L,N,G,te){var ie=c.text.placedSymbolArray,ne=c.text.dynamicLayoutVertexArray,ye=c.icon.dynamicLayoutVertexArray,me={};ne.clear();for(var Ce=0;Ce<ie.length;Ce++){var de=ie.get(Ce),Se=de.hidden||!de.crossTileID||c.allowVerticalPlacement&&!de.placedOrientation?null:m[de.crossTileID];if(Se){var Ie=new a.Point(de.anchorX,de.anchorY),Fe=Cn(Ie,f?L:P),We=Iu(E.cameraToCenterDistance,Fe.signedDistanceFromCamera),He=b.evaluateSizeForFeature(c.textSizeData,G,de)*We/a.ONE_EM;f&&(He*=c.tilePixelRatio/N);for(var Ke=Za(Se.anchor,Se.width,Se.height,Se.textOffset,Se.textBoxScale,He),tt=f?Cn(Ie.add(Ke),P).point:Fe.point.add(p?Ke.rotate(-E.angle):Ke),pt=c.allowVerticalPlacement&&de.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,ct=0;ct<de.numGlyphs;ct++)a.addDynamicAttributes(ne,tt,pt);te&&de.associatedIconIndex>=0&&(me[de.associatedIconIndex]={shiftedAnchor:tt,angle:pt})}else qa(de.numGlyphs,ne)}if(te){ye.clear();for(var bt=c.icon.placedSymbolArray,Bt=0;Bt<bt.length;Bt++){var Xt=bt.get(Bt);if(Xt.hidden)qa(Xt.numGlyphs,ye);else{var Wt=me[Bt];if(Wt)for(var Nn=0;Nn<Xt.numGlyphs;Nn++)a.addDynamicAttributes(ye,Wt.shiftedAnchor,Wt.angle);else qa(Xt.numGlyphs,ye)}}c.icon.dynamicLayoutVertexBuffer.updateData(ye)}c.text.dynamicLayoutVertexBuffer.updateData(ne)}function ph(c,p,f){return f.iconsInText&&p?"symbolTextAndIcon":c?"symbolSDF":"symbolIcon"}function us(c,p,f,m,b,E,P,L,N,G,te,ie){for(var ne=c.context,ye=ne.gl,me=c.transform,Ce=L==="map",de=N==="map",Se=Ce&&f.layout.get("symbol-placement")!=="point",Ie=Ce&&!de&&!Se,Fe=!f.layout.get("symbol-sort-key").isConstant(),We=!1,He=c.depthModeForSublayer(0,oe.ReadOnly),Ke=f.layout.get("text-variable-anchor"),tt=[],pt=0,ct=m;pt<ct.length;pt+=1){var bt=ct[pt],Bt=p.getTile(bt),Xt=Bt.getBucket(f);if(Xt){var Wt=b?Xt.text:Xt.icon;if(Wt&&Wt.segments.get().length){var Nn=Wt.programConfigurations.get(f.id),Pt=b||Xt.sdfIcons,en=b?Xt.textSizeData:Xt.iconSizeData,wn=de||me.pitch!==0,fn=c.useProgram(ph(Pt,b,Xt),Nn),on=a.evaluateSizeForZoom(en,me.zoom),ln=void 0,rn=[0,0],Ft=void 0,nr=void 0,Zr=null,jr=void 0;if(b)Ft=Bt.glyphAtlasTexture,nr=ye.LINEAR,ln=Bt.glyphAtlasTexture.size,Xt.iconsInText&&(rn=Bt.imageAtlasTexture.size,Zr=Bt.imageAtlasTexture,jr=wn||c.options.rotating||c.options.zooming||en.kind==="composite"||en.kind==="camera"?ye.LINEAR:ye.NEAREST);else{var pi=f.layout.get("icon-size").constantOr(0)!==1||Xt.iconsNeedLinear;Ft=Bt.imageAtlasTexture,nr=Pt||c.options.rotating||c.options.zooming||pi||wn?ye.LINEAR:ye.NEAREST,ln=Bt.imageAtlasTexture.size}var ni=zo(Bt,1,c.transform.zoom),kr=zr(bt.posMatrix,de,Ce,c.transform,ni),Qi=hr(bt.posMatrix,de,Ce,c.transform,ni),Xr=Ke&&Xt.hasTextData(),Yi=f.layout.get("icon-text-fit")!=="none"&&Xr&&Xt.hasIconData();Se&&Hl(Xt,bt.posMatrix,c,b,kr,Qi,de,G);var wo=c.translatePosMatrix(bt.posMatrix,Bt,E,P),ps=Se||b&&Ke||Yi?bc:kr,ga=c.translatePosMatrix(Qi,Bt,E,P,!0),Oc=Pt&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0,gl={program:fn,buffers:Wt,uniformValues:Pt?Xt.iconsInText?$f(en.kind,on,Ie,de,c,wo,ps,ga,ln,rn):Mu(en.kind,on,Ie,de,c,wo,ps,ga,b,ln,!0):fh(en.kind,on,Ie,de,c,wo,ps,ga,b,ln),atlasTexture:Ft,atlasTextureIcon:Zr,atlasInterpolation:nr,atlasInterpolationIcon:jr,isSDF:Pt,hasHalo:Oc};if(Fe&&Xt.canOverlap){We=!0;for(var hs=0,yl=Wt.segments.get();hs<yl.length;hs+=1){var Lc=yl[hs];tt.push({segments:new a.SegmentVector([Lc]),sortKey:Lc.sortKey,state:gl})}}else tt.push({segments:Wt.segments,sortKey:0,state:gl})}}}We&&tt.sort(function(Ma,tu){return Ma.sortKey-tu.sortKey});for(var Nu=0,ea=tt;Nu<ea.length;Nu+=1){var $u=ea[Nu],gi=$u.state;if(ne.activeTexture.set(ye.TEXTURE0),gi.atlasTexture.bind(gi.atlasInterpolation,ye.CLAMP_TO_EDGE),gi.atlasTextureIcon&&(ne.activeTexture.set(ye.TEXTURE1),gi.atlasTextureIcon&&gi.atlasTextureIcon.bind(gi.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),gi.isSDF){var Ja=gi.uniformValues;gi.hasHalo&&(Ja.u_is_halo=1,cs(gi.buffers,$u.segments,f,c,gi.program,He,te,ie,Ja)),Ja.u_is_halo=0}cs(gi.buffers,$u.segments,f,c,gi.program,He,te,ie,gi.uniformValues)}}function cs(c,p,f,m,b,E,P,L,N){var G=m.context;b.draw(G,G.gl.TRIANGLES,E,P,L,Te.disabled,N,f.id,c.layoutVertexBuffer,c.indexBuffer,p,f.paint,m.transform.zoom,c.programConfigurations.get(f.id),c.dynamicLayoutVertexBuffer,c.opacityVertexBuffer)}function wc(c,p,f,m,b,E,P){var L,N,G,te,ie,ne=c.context.gl,ye=f.paint.get("fill-pattern"),me=ye&&ye.constantOr(1),Ce=f.getCrossfadeParameters();P?(N=me&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=ne.LINES):(N=me?"fillPattern":"fill",L=ne.TRIANGLES);for(var de=0,Se=m;de<Se.length;de+=1){var Ie=Se[de],Fe=p.getTile(Ie);if(!me||Fe.patternsLoaded()){var We=Fe.getBucket(f);if(We){var He=We.programConfigurations.get(f.id),Ke=c.useProgram(N,He);me&&(c.context.activeTexture.set(ne.TEXTURE0),Fe.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),He.updatePaintBuffers(Ce));var tt=ye.constantOr(null);if(tt&&Fe.imageAtlas){var pt=Fe.imageAtlas,ct=pt.patternPositions[tt.to.toString()],bt=pt.patternPositions[tt.from.toString()];ct&&bt&&He.setConstantPatternPositions(ct,bt)}var Bt=c.translatePosMatrix(Ie.posMatrix,Fe,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(P){te=We.indexBuffer2,ie=We.segments2;var Xt=[ne.drawingBufferWidth,ne.drawingBufferHeight];G=N==="fillOutlinePattern"&&me?Xl(Bt,c,Ce,Fe,Xt):Ms(Bt,Xt)}else te=We.indexBuffer,ie=We.segments,G=me?Ls(Bt,c,Ce,Fe):ul(Bt);Ke.draw(c.context,L,b,c.stencilModeForClipping(Ie),E,Te.disabled,G,f.id,We.layoutVertexBuffer,te,ie,f.paint,c.transform.zoom,He)}}}}function Sc(c,p,f,m,b,E,P){for(var L=c.context,N=L.gl,G=f.paint.get("fill-extrusion-pattern"),te=G.constantOr(1),ie=f.getCrossfadeParameters(),ne=f.paint.get("fill-extrusion-opacity"),ye=0,me=m;ye<me.length;ye+=1){var Ce=me[ye],de=p.getTile(Ce),Se=de.getBucket(f);if(Se){var Ie=Se.programConfigurations.get(f.id),Fe=c.useProgram(te?"fillExtrusionPattern":"fillExtrusion",Ie);te&&(c.context.activeTexture.set(N.TEXTURE0),de.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Ie.updatePaintBuffers(ie));var We=G.constantOr(null);if(We&&de.imageAtlas){var He=de.imageAtlas,Ke=He.patternPositions[We.to.toString()],tt=He.patternPositions[We.from.toString()];Ke&&tt&&Ie.setConstantPatternPositions(Ke,tt)}var pt=c.translatePosMatrix(Ce.posMatrix,de,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),ct=f.paint.get("fill-extrusion-vertical-gradient"),bt=te?Dg(pt,c,ct,ne,Ce,ie,de):Dd(pt,c,ct,ne);Fe.draw(L,L.gl.TRIANGLES,b,E,P,Te.backCCW,bt,f.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,f.paint,c.transform.zoom,Ie)}}}function zg(c,p,f,m,b,E){var P=c.context,L=P.gl,N=p.fbo;if(N){var G=c.useProgram("hillshade");P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,N.colorAttachment.get());var te=function(ie,ne,ye){var me=ye.paint.get("hillshade-shadow-color"),Ce=ye.paint.get("hillshade-highlight-color"),de=ye.paint.get("hillshade-accent-color"),Se=ye.paint.get("hillshade-illumination-direction")*(Math.PI/180);ye.paint.get("hillshade-illumination-anchor")==="viewport"&&(Se-=ie.transform.angle);var Ie,Fe,We,He=!ie.options.moving;return{u_matrix:ie.transform.calculatePosMatrix(ne.tileID.toUnwrapped(),He),u_image:0,u_latrange:(Ie=ne.tileID,Fe=Math.pow(2,Ie.canonical.z),We=Ie.canonical.y,[new a.MercatorCoordinate(0,We/Fe).toLngLat().lat,new a.MercatorCoordinate(0,(We+1)/Fe).toLngLat().lat]),u_light:[ye.paint.get("hillshade-exaggeration"),Se],u_shadow:me,u_highlight:Ce,u_accent:de}}(c,p,f);G.draw(P,L.TRIANGLES,m,b,E,Te.disabled,te,f.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments)}}function Fs(c,p,f,m,b,E){var P=c.context,L=P.gl,N=p.dem;if(N&&N.data){var G=N.dim,te=N.stride,ie=N.getPixels();if(P.activeTexture.set(L.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||c.getTileTexture(te),p.demTexture){var ne=p.demTexture;ne.update(ie,{premultiply:!1}),ne.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else p.demTexture=new a.Texture(P,ie,L.RGBA,{premultiply:!1}),p.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);P.activeTexture.set(L.TEXTURE0);var ye=p.fbo;if(!ye){var me=new a.Texture(P,{width:G,height:G,data:null},L.RGBA);me.bind(L.LINEAR,L.CLAMP_TO_EDGE),(ye=p.fbo=P.createFramebuffer(G,G,!0)).colorAttachment.set(me.texture)}P.bindFramebuffer.set(ye.framebuffer),P.viewport.set([0,0,G,G]),c.useProgram("hillshadePrepare").draw(P,L.TRIANGLES,m,b,E,Te.disabled,function(Ce,de){var Se=de.stride,Ie=a.create();return a.ortho(Ie,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Ie,Ie,[0,-a.EXTENT,0]),{u_matrix:Ie,u_image:1,u_dimension:[Se,Se],u_zoom:Ce.overscaledZ,u_unpack:de.getUnpackVector()}}(p.tileID,N),f.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function Xa(c,p,f,m,b){var E=m.paint.get("raster-fade-duration");if(E>0){var P=a.browser.now(),L=(P-c.timeAdded)/E,N=p?(P-p.timeAdded)/E:-1,G=f.getSource(),te=b.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),ie=!p||Math.abs(p.tileID.overscaledZ-te)>Math.abs(c.tileID.overscaledZ-te),ne=ie&&c.refreshedUponExpiration?1:a.clamp(ie?L:1-N,0,1);return c.refreshedUponExpiration&&L>=1&&(c.refreshedUponExpiration=!1),p?{opacity:1,mix:1-ne}:{opacity:ne,mix:0}}return{opacity:1,mix:0}}var Cc=new a.Color(1,0,0,1),hh=new a.Color(0,1,0,1),Bd=new a.Color(0,0,1,1),Nd=new a.Color(1,0,1,1),Vf=new a.Color(0,1,1,1);function qf(c,p,f,m){ze(c,0,p+f/2,c.transform.width,f,m)}function pl(c,p,f,m){ze(c,p-f/2,0,f,c.transform.height,m)}function ze(c,p,f,m,b,E){var P=c.context,L=P.gl;L.enable(L.SCISSOR_TEST),L.scissor(p*a.browser.devicePixelRatio,f*a.browser.devicePixelRatio,m*a.browser.devicePixelRatio,b*a.browser.devicePixelRatio),P.clear({color:E}),L.disable(L.SCISSOR_TEST)}function it(c,p,f){var m=c.context,b=m.gl,E=f.posMatrix,P=c.useProgram("debug"),L=oe.disabled,N=ge.disabled,G=c.colorModeForRenderPass();m.activeTexture.set(b.TEXTURE0),c.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),P.draw(m,b.LINE_STRIP,L,N,G,Te.disabled,yc(E,a.Color.red),"$debug",c.debugBuffer,c.tileBorderIndexBuffer,c.debugSegments);var te=p.getTileByID(f.key).latestRawTileData,ie=Math.floor((te&&te.byteLength||0)/1024),ne=p.getTile(f).tileSize,ye=512/Math.min(ne,512)*(f.overscaledZ/c.transform.zoom)*.5,me=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(me+=" => "+f.overscaledZ),function(Ce,de){Ce.initDebugOverlayCanvas();var Se=Ce.debugOverlayCanvas,Ie=Ce.context.gl,Fe=Ce.debugOverlayCanvas.getContext("2d");Fe.clearRect(0,0,Se.width,Se.height),Fe.shadowColor="white",Fe.shadowBlur=2,Fe.lineWidth=1.5,Fe.strokeStyle="white",Fe.textBaseline="top",Fe.font="bold 36px Open Sans, sans-serif",Fe.fillText(de,5,5),Fe.strokeText(de,5,5),Ce.debugOverlayTexture.update(Se),Ce.debugOverlayTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE)}(c,me+" "+ie+"kb"),P.draw(m,b.TRIANGLES,L,N,Ae.alphaBlended,Te.disabled,yc(E,a.Color.transparent,ye),"$debug",c.debugBuffer,c.quadTriangleIndexBuffer,c.debugSegments)}var Qe={symbol:function(c,p,f,m,b){if(c.renderPass==="translucent"){var E=ge.disabled,P=c.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(L,N,G,te,ie,ne,ye){for(var me=N.transform,Ce=ie==="map",de=ne==="map",Se=0,Ie=L;Se<Ie.length;Se+=1){var Fe=Ie[Se],We=te.getTile(Fe),He=We.getBucket(G);if(He&&He.text&&He.text.segments.get().length){var Ke=a.evaluateSizeForZoom(He.textSizeData,me.zoom),tt=zo(We,1,N.transform.zoom),pt=zr(Fe.posMatrix,de,Ce,N.transform,tt),ct=G.layout.get("icon-text-fit")!=="none"&&He.hasIconData();if(Ke){var bt=Math.pow(2,me.zoom-We.tileID.overscaledZ);jf(He,Ce,de,ye,a.symbolSize,me,pt,Fe.posMatrix,bt,Ke,ct)}}}}(m,c,f,p,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&us(c,p,f,m,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),E,P),f.paint.get("text-opacity").constantOr(1)!==0&&us(c,p,f,m,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),E,P),p.map.showCollisionBoxes&&(fl(c,p,f,m,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),fl(c,p,f,m,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))}},circle:function(c,p,f,m){if(c.renderPass==="translucent"){var b=f.paint.get("circle-opacity"),E=f.paint.get("circle-stroke-width"),P=f.paint.get("circle-stroke-opacity"),L=!f.layout.get("circle-sort-key").isConstant();if(b.constantOr(1)!==0||E.constantOr(1)!==0&&P.constantOr(1)!==0){for(var N=c.context,G=N.gl,te=c.depthModeForSublayer(0,oe.ReadOnly),ie=ge.disabled,ne=c.colorModeForRenderPass(),ye=[],me=0;me<m.length;me++){var Ce=m[me],de=p.getTile(Ce),Se=de.getBucket(f);if(Se){var Ie=Se.programConfigurations.get(f.id),Fe={programConfiguration:Ie,program:c.useProgram("circle",Ie),layoutVertexBuffer:Se.layoutVertexBuffer,indexBuffer:Se.indexBuffer,uniformValues:zd(c,Ce,de,f)};if(L)for(var We=0,He=Se.segments.get();We<He.length;We+=1){var Ke=He[We];ye.push({segments:new a.SegmentVector([Ke]),sortKey:Ke.sortKey,state:Fe})}else ye.push({segments:Se.segments,sortKey:0,state:Fe})}}L&&ye.sort(function(Bt,Xt){return Bt.sortKey-Xt.sortKey});for(var tt=0,pt=ye;tt<pt.length;tt+=1){var ct=pt[tt],bt=ct.state;bt.program.draw(N,G.TRIANGLES,te,ie,ne,Te.disabled,bt.uniformValues,f.id,bt.layoutVertexBuffer,bt.indexBuffer,ct.segments,f.paint,c.transform.zoom,bt.programConfiguration)}}}},heatmap:function(c,p,f,m){if(f.paint.get("heatmap-opacity")!==0)if(c.renderPass==="offscreen"){var b=c.context,E=b.gl,P=ge.disabled,L=new Ae([E.ONE,E.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ye,me,Ce){var de=ye.gl;ye.activeTexture.set(de.TEXTURE1),ye.viewport.set([0,0,me.width/4,me.height/4]);var Se=Ce.heatmapFbo;if(Se)de.bindTexture(de.TEXTURE_2D,Se.colorAttachment.get()),ye.bindFramebuffer.set(Se.framebuffer);else{var Ie=de.createTexture();de.bindTexture(de.TEXTURE_2D,Ie),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),Se=Ce.heatmapFbo=ye.createFramebuffer(me.width/4,me.height/4,!1),function(Fe,We,He,Ke){var tt=Fe.gl;tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,We.width/4,We.height/4,0,tt.RGBA,Fe.extRenderToTextureHalfFloat?Fe.extTextureHalfFloat.HALF_FLOAT_OES:tt.UNSIGNED_BYTE,null),Ke.colorAttachment.set(He)}(ye,me,Ie,Se)}})(b,c,f),b.clear({color:a.Color.transparent});for(var N=0;N<m.length;N++){var G=m[N];if(!p.hasRenderableParent(G)){var te=p.getTile(G),ie=te.getBucket(f);if(ie){var ne=ie.programConfigurations.get(f.id);c.useProgram("heatmap",ne).draw(b,E.TRIANGLES,oe.disabled,P,L,Te.disabled,Ql(G.posMatrix,te,c.transform.zoom,f.paint.get("heatmap-intensity")),f.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,f.paint,c.transform.zoom,ne)}}}b.viewport.set([0,0,c.width,c.height])}else c.renderPass==="translucent"&&(c.context.setColorMode(c.colorModeForRenderPass()),function(ye,me){var Ce=ye.context,de=Ce.gl,Se=me.heatmapFbo;if(Se){Ce.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Se.colorAttachment.get()),Ce.activeTexture.set(de.TEXTURE1);var Ie=me.colorRampTexture;Ie||(Ie=me.colorRampTexture=new a.Texture(Ce,me.colorRamp,de.RGBA)),Ie.bind(de.LINEAR,de.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Ce,de.TRIANGLES,oe.disabled,ge.disabled,ye.colorModeForRenderPass(),Te.disabled,function(Fe,We,He,Ke){var tt=a.create();a.ortho(tt,0,Fe.width,Fe.height,0,0,1);var pt=Fe.context.gl;return{u_matrix:tt,u_world:[pt.drawingBufferWidth,pt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:We.paint.get("heatmap-opacity")}}(ye,me),me.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,me.paint,ye.transform.zoom)}}(c,f))},line:function(c,p,f,m){if(c.renderPass==="translucent"){var b=f.paint.get("line-opacity"),E=f.paint.get("line-width");if(b.constantOr(1)!==0&&E.constantOr(1)!==0)for(var P=c.depthModeForSublayer(0,oe.ReadOnly),L=c.colorModeForRenderPass(),N=f.paint.get("line-dasharray"),G=f.paint.get("line-pattern"),te=G.constantOr(1),ie=f.paint.get("line-gradient"),ne=f.getCrossfadeParameters(),ye=te?"linePattern":N?"lineSDF":ie?"lineGradient":"line",me=c.context,Ce=me.gl,de=!0,Se=0,Ie=m;Se<Ie.length;Se+=1){var Fe=Ie[Se],We=p.getTile(Fe);if(!te||We.patternsLoaded()){var He=We.getBucket(f);if(He){var Ke=He.programConfigurations.get(f.id),tt=c.context.program.get(),pt=c.useProgram(ye,Ke),ct=de||pt.program!==tt,bt=G.constantOr(null);if(bt&&We.imageAtlas){var Bt=We.imageAtlas,Xt=Bt.patternPositions[bt.to.toString()],Wt=Bt.patternPositions[bt.from.toString()];Xt&&Wt&&Ke.setConstantPatternPositions(Xt,Wt)}var Nn=te?dr(c,We,f,ne):N?Nf(c,We,f,N,ne):ie?vc(c,We,f,He.lineClipsArray.length):Bf(c,We,f);if(te)me.activeTexture.set(Ce.TEXTURE0),We.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Ke.updatePaintBuffers(ne);else if(N&&(ct||c.lineAtlas.dirty))me.activeTexture.set(Ce.TEXTURE0),c.lineAtlas.bind(me);else if(ie){var Pt=He.gradients[f.id],en=Pt.texture;if(f.gradientVersion!==Pt.version){var wn=256;if(f.stepInterpolant){var fn=p.getSource().maxzoom,on=Fe.canonical.z===fn?Math.ceil(1<<c.transform.maxZoom-Fe.canonical.z):1;wn=a.clamp(a.nextPowerOfTwo(He.maxLineLength/a.EXTENT*1024*on),256,me.maxTextureSize)}Pt.gradient=a.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:wn,image:Pt.gradient||void 0,clips:He.lineClipsArray}),Pt.texture?Pt.texture.update(Pt.gradient):Pt.texture=new a.Texture(me,Pt.gradient,Ce.RGBA),Pt.version=f.gradientVersion,en=Pt.texture}me.activeTexture.set(Ce.TEXTURE0),en.bind(f.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}pt.draw(me,Ce.TRIANGLES,P,c.stencilModeForClipping(Fe),L,Te.disabled,Nn,f.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,f.paint,c.transform.zoom,Ke,He.layoutVertexBuffer2),de=!1}}}}},fill:function(c,p,f,m){var b=f.paint.get("fill-color"),E=f.paint.get("fill-opacity");if(E.constantOr(1)!==0){var P=c.colorModeForRenderPass(),L=f.paint.get("fill-pattern"),N=c.opaquePassEnabledForLayer()&&!L.constantOr(1)&&b.constantOr(a.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(c.renderPass===N){var G=c.depthModeForSublayer(1,c.renderPass==="opaque"?oe.ReadWrite:oe.ReadOnly);wc(c,p,f,m,G,P,!1)}if(c.renderPass==="translucent"&&f.paint.get("fill-antialias")){var te=c.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,oe.ReadOnly);wc(c,p,f,m,te,P,!0)}}},"fill-extrusion":function(c,p,f,m){var b=f.paint.get("fill-extrusion-opacity");if(b!==0&&c.renderPass==="translucent"){var E=new oe(c.context.gl.LEQUAL,oe.ReadWrite,c.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Sc(c,p,f,m,E,ge.disabled,Ae.disabled),Sc(c,p,f,m,E,c.stencilModeFor3D(),c.colorModeForRenderPass());else{var P=c.colorModeForRenderPass();Sc(c,p,f,m,E,ge.disabled,P)}}},hillshade:function(c,p,f,m){if(c.renderPass==="offscreen"||c.renderPass==="translucent"){for(var b=c.context,E=c.depthModeForSublayer(0,oe.ReadOnly),P=c.colorModeForRenderPass(),L=c.renderPass==="translucent"?c.stencilConfigForOverlap(m):[{},m],N=L[0],G=0,te=L[1];G<te.length;G+=1){var ie=te[G],ne=p.getTile(ie);ne.needsHillshadePrepare&&c.renderPass==="offscreen"?Fs(c,ne,f,E,ge.disabled,P):c.renderPass==="translucent"&&zg(c,ne,f,E,N[ie.overscaledZ],P)}b.viewport.set([0,0,c.width,c.height])}},raster:function(c,p,f,m){if(c.renderPass==="translucent"&&f.paint.get("raster-opacity")!==0&&m.length)for(var b=c.context,E=b.gl,P=p.getSource(),L=c.useProgram("raster"),N=c.colorModeForRenderPass(),G=P instanceof ae?[{},m]:c.stencilConfigForOverlap(m),te=G[0],ie=G[1],ne=ie[ie.length-1].overscaledZ,ye=!c.options.moving,me=0,Ce=ie;me<Ce.length;me+=1){var de=Ce[me],Se=c.depthModeForSublayer(de.overscaledZ-ne,f.paint.get("raster-opacity")===1?oe.ReadWrite:oe.ReadOnly,E.LESS),Ie=p.getTile(de),Fe=c.transform.calculatePosMatrix(de.toUnwrapped(),ye);Ie.registerFadeDuration(f.paint.get("raster-fade-duration"));var We=p.findLoadedParent(de,0),He=Xa(Ie,We,p,f,c.transform),Ke=void 0,tt=void 0,pt=f.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;b.activeTexture.set(E.TEXTURE0),Ie.texture.bind(pt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(E.TEXTURE1),We?(We.texture.bind(pt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,We.tileID.overscaledZ-Ie.tileID.overscaledZ),tt=[Ie.tileID.canonical.x*Ke%1,Ie.tileID.canonical.y*Ke%1]):Ie.texture.bind(pt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);var ct=ch(Fe,tt||[0,0],Ke||1,He,f);P instanceof ae?L.draw(b,E.TRIANGLES,Se,ge.disabled,N,Te.disabled,ct,f.id,P.boundsBuffer,c.quadTriangleIndexBuffer,P.boundsSegments):L.draw(b,E.TRIANGLES,Se,te[de.overscaledZ],N,Te.disabled,ct,f.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments)}},background:function(c,p,f){var m=f.paint.get("background-color"),b=f.paint.get("background-opacity");if(b!==0){var E=c.context,P=E.gl,L=c.transform,N=L.tileSize,G=f.paint.get("background-pattern");if(!c.isPatternMissing(G)){var te=!G&&m.a===1&&b===1&&c.opaquePassEnabledForLayer()?"opaque":"translucent";if(c.renderPass===te){var ie=ge.disabled,ne=c.depthModeForSublayer(0,te==="opaque"?oe.ReadWrite:oe.ReadOnly),ye=c.colorModeForRenderPass(),me=c.useProgram(G?"backgroundPattern":"background"),Ce=L.coveringTiles({tileSize:N});G&&(E.activeTexture.set(P.TEXTURE0),c.imageManager.bind(c.context));for(var de=f.getCrossfadeParameters(),Se=0,Ie=Ce;Se<Ie.length;Se+=1){var Fe=Ie[Se],We=c.transform.calculatePosMatrix(Fe.toUnwrapped()),He=G?xc(We,b,c,G,{tileID:Fe,tileSize:N},de):Uf(We,b,m);me.draw(E,P.TRIANGLES,ne,ie,ye,Te.disabled,He,f.id,c.tileExtentBuffer,c.quadTriangleIndexBuffer,c.tileExtentSegments)}}}}},debug:function(c,p,f){for(var m=0;m<f.length;m++)it(c,p,f[m])},custom:function(c,p,f){var m=c.context,b=f.implementation;if(c.renderPass==="offscreen"){var E=b.prerender;E&&(c.setCustomLayerDefaults(),m.setColorMode(c.colorModeForRenderPass()),E.call(b,m.gl,c.transform.customLayerMatrix()),m.setDirty(),c.setBaseState())}else if(c.renderPass==="translucent"){c.setCustomLayerDefaults(),m.setColorMode(c.colorModeForRenderPass()),m.setStencilMode(ge.disabled);var P=b.renderingMode==="3d"?new oe(c.context.gl.LEQUAL,oe.ReadWrite,c.depthRangeFor3D):c.depthModeForSublayer(0,oe.ReadOnly);m.setDepthMode(P),b.render(m.gl,c.transform.customLayerMatrix()),m.setDirty(),c.setBaseState(),m.bindFramebuffer.set(null)}}},yt=function(c,p){this.context=new Ee(c),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=le.maxUnderzooming+le.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wl,this.gpuTimers={}};yt.prototype.resize=function(c,p){if(this.width=c*a.browser.devicePixelRatio,this.height=p*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var f=0,m=this.style._order;f<m.length;f+=1)this.style._layers[m[f]].resize()},yt.prototype.setup=function(){var c=this.context,p=new a.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(a.EXTENT,0),p.emplaceBack(0,a.EXTENT),p.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(p,Wa.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var f=new a.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(a.EXTENT,0),f.emplaceBack(0,a.EXTENT),f.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=c.createVertexBuffer(f,Wa.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var m=new a.StructArrayLayout4i8;m.emplaceBack(0,0,0,0),m.emplaceBack(a.EXTENT,0,a.EXTENT,0),m.emplaceBack(0,a.EXTENT,0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=c.createVertexBuffer(m,K.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var b=new a.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(b,Wa.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var E=new a.StructArrayLayout1ui2;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(E);var P=new a.StructArrayLayout3ui6;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(P),this.emptyTexture=new a.Texture(c,{width:1,height:1,data:new Uint8Array([0,0,0,0])},c.gl.RGBA);var L=this.context.gl;this.stencilClearMode=new ge({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)},yt.prototype.clearStencil=function(){var c=this.context,p=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var f=a.create();a.ortho(f,0,this.width,this.height,0,0,1),a.scale(f,f,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,p.TRIANGLES,oe.disabled,this.stencilClearMode,Ae.disabled,Te.disabled,Rs(f),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yt.prototype._renderTileClippingMasks=function(c,p){if(this.currentStencilSource!==c.source&&c.isTileClipped()&&p&&p.length){this.currentStencilSource=c.source;var f=this.context,m=f.gl;this.nextStencilID+p.length>256&&this.clearStencil(),f.setColorMode(Ae.disabled),f.setDepthMode(oe.disabled);var b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var E=0,P=p;E<P.length;E+=1){var L=P[E],N=this._tileClippingMaskIDs[L.key]=this.nextStencilID++;b.draw(f,m.TRIANGLES,oe.disabled,new ge({func:m.ALWAYS,mask:0},N,255,m.KEEP,m.KEEP,m.REPLACE),Ae.disabled,Te.disabled,Rs(L.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yt.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var c=this.nextStencilID++,p=this.context.gl;return new ge({func:p.NOTEQUAL,mask:255},c,255,p.KEEP,p.KEEP,p.REPLACE)},yt.prototype.stencilModeForClipping=function(c){var p=this.context.gl;return new ge({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,p.KEEP,p.KEEP,p.REPLACE)},yt.prototype.stencilConfigForOverlap=function(c){var p,f=this.context.gl,m=c.sort(function(N,G){return G.overscaledZ-N.overscaledZ}),b=m[m.length-1].overscaledZ,E=m[0].overscaledZ-b+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();for(var P={},L=0;L<E;L++)P[L+b]=new ge({func:f.GEQUAL,mask:255},L+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=E,[P,m]}return[(p={},p[b]=ge.disabled,p),m]},yt.prototype.colorModeForRenderPass=function(){var c=this.context.gl;return this._showOverdrawInspector?new Ae([c.CONSTANT_COLOR,c.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ae.unblended:Ae.alphaBlended},yt.prototype.depthModeForSublayer=function(c,p,f){if(!this.opaquePassEnabledForLayer())return oe.disabled;var m=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new oe(f||this.context.gl.LEQUAL,p,[m,m])},yt.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yt.prototype.render=function(c,p){var f=this;this.style=c,this.options=p,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var m=this.style._order,b=this.style.sourceCaches;for(var E in b){var P=b[E];P.used&&P.prepare(this.context)}var L,N,G={},te={},ie={};for(var ne in b){var ye=b[ne];G[ne]=ye.getVisibleCoordinates(),te[ne]=G[ne].slice().reverse(),ie[ne]=ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var me=0;me<m.length;me++)if(this.style._layers[m[me]].is3D()){this.opaquePassCutoff=me;break}this.renderPass="offscreen";for(var Ce=0,de=m;Ce<de.length;Ce+=1){var Se=this.style._layers[de[Ce]];if(Se.hasOffscreenPass()&&!Se.isHidden(this.transform.zoom)){var Ie=te[Se.source];(Se.type==="custom"||Ie.length)&&this.renderLayer(this,b[Se.source],Se,Ie)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){var Fe=this.style._layers[m[this.currentLayer]],We=b[Fe.source],He=G[Fe.source];this._renderTileClippingMasks(Fe,He),this.renderLayer(this,We,Fe,He)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){var Ke=this.style._layers[m[this.currentLayer]],tt=b[Ke.source],pt=(Ke.type==="symbol"?ie:te)[Ke.source];this._renderTileClippingMasks(Ke,G[Ke.source]),this.renderLayer(this,tt,Ke,pt)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(ct){ct.source&&!ct.isHidden(f.transform.zoom)&&(ct.source!==(N&&N.id)&&(N=f.style.sourceCaches[ct.source]),(!L||L.getSource().maxzoom<N.getSource().maxzoom)&&(L=N))}),L&&Qe.debug(this,L,L.getVisibleCoordinates())),this.options.showPadding&&function(ct){var bt=ct.transform.padding;qf(ct,ct.transform.height-(bt.top||0),3,Cc),qf(ct,bt.bottom||0,3,hh),pl(ct,bt.left||0,3,Bd),pl(ct,ct.transform.width-(bt.right||0),3,Nd);var Bt=ct.transform.centerPoint;(function(Xt,Wt,Nn,Pt){ze(Xt,Wt-1,Nn-10,2,20,Pt),ze(Xt,Wt-10,Nn-1,20,2,Pt)})(ct,Bt.x,ct.transform.height-Bt.y,Vf)}(this),this.context.setDefault()},yt.prototype.renderLayer=function(c,p,f,m){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||m.length)&&(this.id=f.id,this.gpuTimingStart(f),Qe[f.type](c,p,f,m,this.style.placement.variableOffsets),this.gpuTimingEnd())},yt.prototype.gpuTimingStart=function(c){if(this.options.gpuTiming){var p=this.context.extTimerQuery,f=this.gpuTimers[c.id];f||(f=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),f.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,f.query)}},yt.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}},yt.prototype.collectGpuTimers=function(){var c=this.gpuTimers;return this.gpuTimers={},c},yt.prototype.queryGpuTimers=function(c){var p={};for(var f in c){var m=c[f],b=this.context.extTimerQuery,E=b.getQueryObjectEXT(m.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(m.query),p[f]=E}return p},yt.prototype.translatePosMatrix=function(c,p,f,m,b){if(!f[0]&&!f[1])return c;var E=b?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(E){var P=Math.sin(E),L=Math.cos(E);f=[f[0]*L-f[1]*P,f[0]*P+f[1]*L]}var N=[b?f[0]:zo(p,f[0],this.transform.zoom),b?f[1]:zo(p,f[1],this.transform.zoom),0],G=new Float32Array(16);return a.translate(G,c,N),G},yt.prototype.saveTileTexture=function(c){var p=this._tileTextures[c.size[0]];p?p.push(c):this._tileTextures[c.size[0]]=[c]},yt.prototype.getTileTexture=function(c){var p=this._tileTextures[c];return p&&p.length>0?p.pop():null},yt.prototype.isPatternMissing=function(c){if(!c)return!1;if(!c.from||!c.to)return!0;var p=this.imageManager.getPattern(c.from.toString()),f=this.imageManager.getPattern(c.to.toString());return!p||!f},yt.prototype.useProgram=function(c,p){this.cache=this.cache||{};var f=""+c+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[f]||(this.cache[f]=new Fd(this.context,c,Er[c],p,Ru[c],this._showOverdrawInspector)),this.cache[f]},yt.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yt.prototype.setBaseState=function(){var c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)},yt.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yt.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Sn=function(c,p){this.points=c,this.planes=p};Sn.fromInvProjectionMatrix=function(c,p,f){var m=Math.pow(2,f),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(P){return a.transformMat4([],P,c)}).map(function(P){return a.scale$1([],P,1/P[3]/p*m)}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(P){var L=a.sub([],b[P[0]],b[P[1]]),N=a.sub([],b[P[2]],b[P[1]]),G=a.normalize([],a.cross([],L,N)),te=-a.dot(G,b[P[1]]);return G.concat(te)});return new Sn(b,E)};var Zn=function(c,p){this.min=c,this.max=p,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Zn.prototype.quadrant=function(c){for(var p=[c%2==0,c<2],f=a.clone$2(this.min),m=a.clone$2(this.max),b=0;b<p.length;b++)f[b]=p[b]?this.min[b]:this.center[b],m[b]=p[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new Zn(f,m)},Zn.prototype.distanceX=function(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]},Zn.prototype.distanceY=function(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]},Zn.prototype.intersects=function(c){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],f=!0,m=0;m<c.planes.length;m++){for(var b=c.planes[m],E=0,P=0;P<p.length;P++)E+=a.dot$1(b,p[P])>=0;if(E===0)return 0;E!==p.length&&(f=!1)}if(f)return 2;for(var L=0;L<3;L++){for(var N=Number.MAX_VALUE,G=-Number.MAX_VALUE,te=0;te<c.points.length;te++){var ie=c.points[te][L]-this.min[L];N=Math.min(N,ie),G=Math.max(G,ie)}if(G<0||N>this.max[L]-this.min[L])return 0}return 1};var Br=function(c,p,f,m){if(c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=0),m===void 0&&(m=0),isNaN(c)||c<0||isNaN(p)||p<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=p,this.left=f,this.right=m};Br.prototype.interpolate=function(c,p,f){return p.top!=null&&c.top!=null&&(this.top=a.number(c.top,p.top,f)),p.bottom!=null&&c.bottom!=null&&(this.bottom=a.number(c.bottom,p.bottom,f)),p.left!=null&&c.left!=null&&(this.left=a.number(c.left,p.left,f)),p.right!=null&&c.right!=null&&(this.right=a.number(c.right,p.right,f)),this},Br.prototype.getCenter=function(c,p){var f=a.clamp((this.left+c-this.right)/2,0,c),m=a.clamp((this.top+p-this.bottom)/2,0,p);return new a.Point(f,m)},Br.prototype.equals=function(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right},Br.prototype.clone=function(){return new Br(this.top,this.bottom,this.left,this.right)},Br.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var nn=function(c,p,f,m,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||b,this._minZoom=c||0,this._maxZoom=p||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Br,this._posMatrixCache={},this._alignedPosMatrixCache={}},zn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};nn.prototype.clone=function(){var c=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.tileSize=this.tileSize,c.latRange=this.latRange,c.width=this.width,c.height=this.height,c._center=this._center,c.zoom=this.zoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._calcMatrices(),c},zn.minZoom.get=function(){return this._minZoom},zn.minZoom.set=function(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))},zn.maxZoom.get=function(){return this._maxZoom},zn.maxZoom.set=function(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))},zn.minPitch.get=function(){return this._minPitch},zn.minPitch.set=function(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))},zn.maxPitch.get=function(){return this._maxPitch},zn.maxPitch.set=function(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))},zn.renderWorldCopies.get=function(){return this._renderWorldCopies},zn.renderWorldCopies.set=function(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c},zn.worldSize.get=function(){return this.tileSize*this.scale},zn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},zn.size.get=function(){return new a.Point(this.width,this.height)},zn.bearing.get=function(){return-this.angle/Math.PI*180},zn.bearing.set=function(c){var p=-a.wrap(c,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},zn.pitch.get=function(){return this._pitch/Math.PI*180},zn.pitch.set=function(c){var p=a.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},zn.fov.get=function(){return this._fov/Math.PI*180},zn.fov.set=function(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())},zn.zoom.get=function(){return this._zoom},zn.zoom.set=function(c){var p=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},zn.center.get=function(){return this._center},zn.center.set=function(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())},zn.padding.get=function(){return this._edgeInsets.toJSON()},zn.padding.set=function(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())},zn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},nn.prototype.isPaddingEqual=function(c){return this._edgeInsets.equals(c)},nn.prototype.interpolatePadding=function(c,p,f){this._unmodified=!1,this._edgeInsets.interpolate(c,p,f),this._constrain(),this._calcMatrices()},nn.prototype.coveringZoomLevel=function(c){var p=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,p)},nn.prototype.getVisibleUnwrappedCoordinates=function(c){var p=[new a.UnwrappedTileID(0,c)];if(this._renderWorldCopies)for(var f=this.pointCoordinate(new a.Point(0,0)),m=this.pointCoordinate(new a.Point(this.width,0)),b=this.pointCoordinate(new a.Point(this.width,this.height)),E=this.pointCoordinate(new a.Point(0,this.height)),P=Math.floor(Math.min(f.x,m.x,b.x,E.x)),L=Math.floor(Math.max(f.x,m.x,b.x,E.x)),N=P-1;N<=L+1;N++)N!==0&&p.push(new a.UnwrappedTileID(N,c));return p},nn.prototype.coveringTiles=function(c){var p=this.coveringZoomLevel(c),f=p;if(c.minzoom!==void 0&&p<c.minzoom)return[];c.maxzoom!==void 0&&p>c.maxzoom&&(p=c.maxzoom);var m=a.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,p),E=[b*m.x,b*m.y,0],P=Sn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),L=c.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(L=p);var N=function(ct){return{aabb:new Zn([ct*b,0,0],[(ct+1)*b,b,0]),zoom:0,x:0,y:0,wrap:ct,fullyVisible:!1}},G=[],te=[],ie=p,ne=c.reparseOverscaled?f:p;if(this._renderWorldCopies)for(var ye=1;ye<=3;ye++)G.push(N(-ye)),G.push(N(ye));for(G.push(N(0));G.length>0;){var me=G.pop(),Ce=me.x,de=me.y,Se=me.fullyVisible;if(!Se){var Ie=me.aabb.intersects(P);if(Ie===0)continue;Se=Ie===2}var Fe=me.aabb.distanceX(E),We=me.aabb.distanceY(E),He=Math.max(Math.abs(Fe),Math.abs(We));if(me.zoom===ie||He>3+(1<<ie-me.zoom)-2&&me.zoom>=L)te.push({tileID:new a.OverscaledTileID(me.zoom===ie?ne:me.zoom,me.wrap,me.zoom,Ce,de),distanceSq:a.sqrLen([E[0]-.5-Ce,E[1]-.5-de])});else for(var Ke=0;Ke<4;Ke++){var tt=(Ce<<1)+Ke%2,pt=(de<<1)+(Ke>>1);G.push({aabb:me.aabb.quadrant(Ke),zoom:me.zoom+1,x:tt,y:pt,wrap:me.wrap,fullyVisible:Se})}}return te.sort(function(ct,bt){return ct.distanceSq-bt.distanceSq}).map(function(ct){return ct.tileID})},nn.prototype.resize=function(c,p){this.width=c,this.height=p,this.pixelsToGLUnits=[2/c,-2/p],this._constrain(),this._calcMatrices()},zn.unmodified.get=function(){return this._unmodified},nn.prototype.zoomScale=function(c){return Math.pow(2,c)},nn.prototype.scaleZoom=function(c){return Math.log(c)/Math.LN2},nn.prototype.project=function(c){var p=a.clamp(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(c.lng)*this.worldSize,a.mercatorYfromLat(p)*this.worldSize)},nn.prototype.unproject=function(c){return new a.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()},zn.point.get=function(){return this.project(this.center)},nn.prototype.setLocationAtPoint=function(c,p){var f=this.pointCoordinate(p),m=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(c),E=new a.MercatorCoordinate(b.x-(f.x-m.x),b.y-(f.y-m.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())},nn.prototype.locationPoint=function(c){return this.coordinatePoint(this.locationCoordinate(c))},nn.prototype.pointLocation=function(c){return this.coordinateLocation(this.pointCoordinate(c))},nn.prototype.locationCoordinate=function(c){return a.MercatorCoordinate.fromLngLat(c)},nn.prototype.coordinateLocation=function(c){return c.toLngLat()},nn.prototype.pointCoordinate=function(c){var p=[c.x,c.y,0,1],f=[c.x,c.y,1,1];a.transformMat4(p,p,this.pixelMatrixInverse),a.transformMat4(f,f,this.pixelMatrixInverse);var m=p[3],b=f[3],E=p[1]/m,P=f[1]/b,L=p[2]/m,N=f[2]/b,G=L===N?0:(0-L)/(N-L);return new a.MercatorCoordinate(a.number(p[0]/m,f[0]/b,G)/this.worldSize,a.number(E,P,G)/this.worldSize)},nn.prototype.coordinatePoint=function(c){var p=[c.x*this.worldSize,c.y*this.worldSize,0,1];return a.transformMat4(p,p,this.pixelMatrix),new a.Point(p[0]/p[3],p[1]/p[3])},nn.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},nn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},nn.prototype.setMaxBounds=function(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},nn.prototype.calculatePosMatrix=function(c,p){p===void 0&&(p=!1);var f=c.key,m=p?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];var b=c.canonical,E=this.worldSize/this.zoomScale(b.z),P=b.x+Math.pow(2,b.z)*c.wrap,L=a.identity(new Float64Array(16));return a.translate(L,L,[P*E,b.y*E,0]),a.scale(L,L,[E/a.EXTENT,E/a.EXTENT,1]),a.multiply(L,p?this.alignedProjMatrix:this.projMatrix,L),m[f]=new Float32Array(L),m[f]},nn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},nn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var c,p,f,m,b=-90,E=90,P=-180,L=180,N=this.size,G=this._unmodified;if(this.latRange){var te=this.latRange;b=a.mercatorYfromLat(te[1])*this.worldSize,c=(E=a.mercatorYfromLat(te[0])*this.worldSize)-b<N.y?N.y/(E-b):0}if(this.lngRange){var ie=this.lngRange;P=a.mercatorXfromLng(ie[0])*this.worldSize,p=(L=a.mercatorXfromLng(ie[1])*this.worldSize)-P<N.x?N.x/(L-P):0}var ne=this.point,ye=Math.max(p||0,c||0);if(ye)return this.center=this.unproject(new a.Point(p?(L+P)/2:ne.x,c?(E+b)/2:ne.y)),this.zoom+=this.scaleZoom(ye),this._unmodified=G,void(this._constraining=!1);if(this.latRange){var me=ne.y,Ce=N.y/2;me-Ce<b&&(m=b+Ce),me+Ce>E&&(m=E-Ce)}if(this.lngRange){var de=ne.x,Se=N.x/2;de-Se<P&&(f=P+Se),de+Se>L&&(f=L-Se)}f===void 0&&m===void 0||(this.center=this.unproject(new a.Point(f!==void 0?f:ne.x,m!==void 0?m:ne.y))),this._unmodified=G,this._constraining=!1}},nn.prototype._calcMatrices=function(){if(this.height){var c=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,f=this._fov*(.5+c.y/this.height),m=Math.sin(f)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-p-f,.01,Math.PI-.01)),b=this.point,E=b.x,P=b.y,L=1.01*(Math.cos(Math.PI/2-this._pitch)*m+this.cameraToCenterDistance),N=this.height/50,G=new Float64Array(16);a.perspective(G,this._fov,this.width/this.height,N,L),G[8]=2*-c.x/this.width,G[9]=2*c.y/this.height,a.scale(G,G,[1,-1,1]),a.translate(G,G,[0,0,-this.cameraToCenterDistance]),a.rotateX(G,G,this._pitch),a.rotateZ(G,G,this.angle),a.translate(G,G,[-E,-P,0]),this.mercatorMatrix=a.scale([],G,[this.worldSize,this.worldSize,this.worldSize]),a.scale(G,G,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=G,this.invProjMatrix=a.invert([],this.projMatrix);var te=this.width%2/2,ie=this.height%2/2,ne=Math.cos(this.angle),ye=Math.sin(this.angle),me=E-Math.round(E)+ne*te+ye*ie,Ce=P-Math.round(P)+ne*ie+ye*te,de=new Float64Array(G);if(a.translate(de,de,[me>.5?me-1:me,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=de,G=a.create(),a.scale(G,G,[this.width/2,-this.height/2,1]),a.translate(G,G,[1,-1,0]),this.labelPlaneMatrix=G,G=a.create(),a.scale(G,G,[1,-1,1]),a.translate(G,G,[-1,-1,0]),a.scale(G,G,[2/this.width,2/this.height,1]),this.glCoordMatrix=G,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(G=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=G,this._posMatrixCache={},this._alignedPosMatrixCache={}}},nn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var c=this.pointCoordinate(new a.Point(0,0)),p=[c.x*this.worldSize,c.y*this.worldSize,0,1];return a.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},nn.prototype.getCameraPoint=function(){var c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,c))},nn.prototype.getCameraQueryGeometry=function(c){var p=this.getCameraPoint();if(c.length===1)return[c[0],p];for(var f=p.x,m=p.y,b=p.x,E=p.y,P=0,L=c;P<L.length;P+=1){var N=L[P];f=Math.min(f,N.x),m=Math.min(m,N.y),b=Math.max(b,N.x),E=Math.max(E,N.y)}return[new a.Point(f,m),new a.Point(b,m),new a.Point(b,E),new a.Point(f,E),new a.Point(f,m)]},Object.defineProperties(nn.prototype,zn);var Yl=function(c){var p,f,m,b;this._hashName=c&&encodeURIComponent(c),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),f=!1,m=null,b=function(){m=null,f&&(p(),m=setTimeout(b,300),f=!1)},function(){return f=!0,m||b(),m})};Yl.prototype.addTo=function(c){return this._map=c,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Yl.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Yl.prototype.getHashString=function(c){var p=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),E=Math.round(p.lng*b)/b,P=Math.round(p.lat*b)/b,L=this._map.getBearing(),N=this._map.getPitch(),G="";if(G+=c?"/"+E+"/"+P+"/"+f:f+"/"+P+"/"+E,(L||N)&&(G+="/"+Math.round(10*L)/10),N&&(G+="/"+Math.round(N)),this._hashName){var te=this._hashName,ie=!1,ne=a.window.location.hash.slice(1).split("&").map(function(ye){var me=ye.split("=")[0];return me===te?(ie=!0,me+"="+G):ye}).filter(function(ye){return ye});return ie||ne.push(te+"="+G),"#"+ne.join("&")}return"#"+G},Yl.prototype._getCurrentHash=function(){var c,p=this,f=a.window.location.hash.replace("#","");return this._hashName?(f.split("&").map(function(m){return m.split("=")}).forEach(function(m){m[0]===p._hashName&&(c=m)}),(c&&c[1]||"").split("/")):f.split("/")},Yl.prototype._onHashChange=function(){var c=this._getCurrentHash();if(c.length>=3&&!c.some(function(f){return isNaN(f)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},Yl.prototype._updateHashUnthrottled=function(){var c=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,c)}catch{}};var mi={linearity:.3,easing:a.bezier(0,0,.3,1)},Ec=a.extend({deceleration:2500,maxSpeed:1400},mi),Fu=a.extend({deceleration:20,maxSpeed:1400},mi),fs=a.extend({deceleration:1e3,maxSpeed:360},mi),Hf=a.extend({deceleration:1e3,maxSpeed:90},mi),hl=function(c){this._map=c,this.clear()};function lr(c,p){(!c.duration||c.duration<p.duration)&&(c.duration=p.duration,c.easing=p.easing)}function kc(c,p,f){var m=f.maxSpeed,b=f.linearity,E=f.deceleration,P=a.clamp(c*b/(p/1e3),-m,m),L=Math.abs(P)/(E*b);return{easing:f.easing,duration:1e3*L,amount:P*(L/2)}}hl.prototype.clear=function(){this._inertiaBuffer=[]},hl.prototype.record=function(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:c})},hl.prototype._drainInertiaBuffer=function(){for(var c=this._inertiaBuffer,p=a.browser.now();c.length>0&&p-c[0].time>160;)c.shift()},hl.prototype._onMoveEnd=function(c){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},f=0,m=this._inertiaBuffer;f<m.length;f+=1){var b=m[f].settings;p.zoom+=b.zoomDelta||0,p.bearing+=b.bearingDelta||0,p.pitch+=b.pitchDelta||0,b.panDelta&&p.pan._add(b.panDelta),b.around&&(p.around=b.around),b.pinchAround&&(p.pinchAround=b.pinchAround)}var E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(p.pan.mag()){var L=kc(p.pan.mag(),E,a.extend({},Ec,c||{}));P.offset=p.pan.mult(L.amount/p.pan.mag()),P.center=this._map.transform.center,lr(P,L)}if(p.zoom){var N=kc(p.zoom,E,Fu);P.zoom=this._map.transform.zoom+N.amount,lr(P,N)}if(p.bearing){var G=kc(p.bearing,E,fs);P.bearing=this._map.transform.bearing+a.clamp(G.amount,-179,179),lr(P,G)}if(p.pitch){var te=kc(p.pitch,E,Hf);P.pitch=this._map.transform.pitch+te.amount,lr(P,te)}if(P.zoom||P.bearing){var ie=p.pinchAround===void 0?p.around:p.pinchAround;P.around=ie?this._map.unproject(ie):this._map.getCenter()}return this.clear(),a.extend(P,{noMoveStart:!0})}};var Wi=function(c){function p(m,b,E,P){P===void 0&&(P={});var L=_.mousePos(b.getCanvasContainer(),E),N=b.unproject(L);c.call(this,m,a.extend({point:L,lngLat:N,originalEvent:E},P)),this._defaultPrevented=!1,this.target=b}c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p;var f={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,f),p}(a.Event),xo=function(c){function p(m,b,E){var P=m==="touchend"?E.changedTouches:E.touches,L=_.touchPos(b.getCanvasContainer(),P),N=L.map(function(ie){return b.unproject(ie)}),G=L.reduce(function(ie,ne,ye,me){return ie.add(ne.div(me.length))},new a.Point(0,0)),te=b.unproject(G);c.call(this,m,{points:L,point:G,lngLats:N,lngLat:te,originalEvent:E}),this._defaultPrevented=!1}c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p;var f={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,f),p}(a.Event),$d=function(c){function p(m,b,E){c.call(this,m,{originalEvent:E}),this._defaultPrevented=!1}c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p;var f={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,f),p}(a.Event),Di=function(c,p){this._map=c,this._clickTolerance=p.clickTolerance};Di.prototype.reset=function(){delete this._mousedownPos},Di.prototype.wheel=function(c){return this._firePreventable(new $d(c.type,this._map,c))},Di.prototype.mousedown=function(c,p){return this._mousedownPos=p,this._firePreventable(new Wi(c.type,this._map,c))},Di.prototype.mouseup=function(c){this._map.fire(new Wi(c.type,this._map,c))},Di.prototype.click=function(c,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Wi(c.type,this._map,c))},Di.prototype.dblclick=function(c){return this._firePreventable(new Wi(c.type,this._map,c))},Di.prototype.mouseover=function(c){this._map.fire(new Wi(c.type,this._map,c))},Di.prototype.mouseout=function(c){this._map.fire(new Wi(c.type,this._map,c))},Di.prototype.touchstart=function(c){return this._firePreventable(new xo(c.type,this._map,c))},Di.prototype.touchmove=function(c){this._map.fire(new xo(c.type,this._map,c))},Di.prototype.touchend=function(c){this._map.fire(new xo(c.type,this._map,c))},Di.prototype.touchcancel=function(c){this._map.fire(new xo(c.type,this._map,c))},Di.prototype._firePreventable=function(c){if(this._map.fire(c),c.defaultPrevented)return{}},Di.prototype.isEnabled=function(){return!0},Di.prototype.isActive=function(){return!1},Di.prototype.enable=function(){},Di.prototype.disable=function(){};var Zo=function(c){this._map=c};Zo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Zo.prototype.mousemove=function(c){this._map.fire(new Wi(c.type,this._map,c))},Zo.prototype.mousedown=function(){this._delayContextMenu=!0},Zo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Zo.prototype.contextmenu=function(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new Wi(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()},Zo.prototype.isEnabled=function(){return!0},Zo.prototype.isActive=function(){return!1},Zo.prototype.enable=function(){},Zo.prototype.disable=function(){};var At=function(c,p){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=p.clickTolerance||1};function Ea(c,p){for(var f={},m=0;m<c.length;m++)f[c[m].identifier]=p[m];return f}At.prototype.isEnabled=function(){return!!this._enabled},At.prototype.isActive=function(){return!!this._active},At.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},At.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},At.prototype.mousedown=function(c,p){this.isEnabled()&&c.shiftKey&&c.button===0&&(_.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},At.prototype.mousemoveWindow=function(c,p){if(this._active){var f=p;if(!(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)){var m=this._startPos;this._lastPos=f,this._box||(this._box=_.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));var b=Math.min(m.x,f.x),E=Math.max(m.x,f.x),P=Math.min(m.y,f.y),L=Math.max(m.y,f.y);_.setTransform(this._box,"translate("+b+"px,"+P+"px)"),this._box.style.width=E-b+"px",this._box.style.height=L-P+"px"}}},At.prototype.mouseupWindow=function(c,p){var f=this;if(this._active&&c.button===0){var m=this._startPos,b=p;if(this.reset(),_.suppressClick(),m.x!==b.x||m.y!==b.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:function(E){return E.fitScreenCoordinates(m,b,f._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",c)}},At.prototype.keydown=function(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))},At.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},At.prototype._fireEvent=function(c,p){return this._map.fire(new a.Event(c,{originalEvent:p}))};var Ds=function(c){this.reset(),this.numTouches=c.numTouches};Ds.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ds.prototype.touchstart=function(c,p,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){for(var b=new a.Point(0,0),E=0,P=m;E<P.length;E+=1)b._add(P[E]);return b.div(m.length)}(p),this.touches=Ea(f,p)))},Ds.prototype.touchmove=function(c,p,f){if(!this.aborted&&this.centroid){var m=Ea(f,p);for(var b in this.touches){var E=m[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}},Ds.prototype.touchend=function(c,p,f){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){var m=!this.aborted&&this.centroid;if(this.reset(),m)return m}};var zs=function(c){this.singleTap=new Ds(c),this.numTaps=c.numTaps,this.reset()};zs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},zs.prototype.touchstart=function(c,p,f){this.singleTap.touchstart(c,p,f)},zs.prototype.touchmove=function(c,p,f){this.singleTap.touchmove(c,p,f)},zs.prototype.touchend=function(c,p,f){var m=this.singleTap.touchend(c,p,f);if(m){var b=c.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(m)<30;if(b&&E||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}};var oo=function(){this._zoomIn=new zs({numTouches:1,numTaps:2}),this._zoomOut=new zs({numTouches:2,numTaps:1}),this.reset()};oo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},oo.prototype.touchstart=function(c,p,f){this._zoomIn.touchstart(c,p,f),this._zoomOut.touchstart(c,p,f)},oo.prototype.touchmove=function(c,p,f){this._zoomIn.touchmove(c,p,f),this._zoomOut.touchmove(c,p,f)},oo.prototype.touchend=function(c,p,f){var m=this,b=this._zoomIn.touchend(c,p,f),E=this._zoomOut.touchend(c,p,f);return b?(this._active=!0,c.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(P){return P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(b)},{originalEvent:c})}}):E?(this._active=!0,c.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(P){return P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(E)},{originalEvent:c})}}):void 0},oo.prototype.touchcancel=function(){this.reset()},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active};var Du={0:1,2:2},bo=function(c){this.reset(),this._clickTolerance=c.clickTolerance||1};bo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},bo.prototype._correctButton=function(c,p){return!1},bo.prototype._move=function(c,p){return{}},bo.prototype.mousedown=function(c,p){if(!this._lastPoint){var f=_.mouseButton(c);this._correctButton(c,f)&&(this._lastPoint=p,this._eventButton=f)}},bo.prototype.mousemoveWindow=function(c,p){var f=this._lastPoint;if(f){if(c.preventDefault(),function(m,b){var E=Du[b];return m.buttons===void 0||(m.buttons&E)!==E}(c,this._eventButton))this.reset();else if(this._moved||!(p.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(f,p)}},bo.prototype.mouseupWindow=function(c){this._lastPoint&&_.mouseButton(c)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},bo.prototype.enable=function(){this._enabled=!0},bo.prototype.disable=function(){this._enabled=!1,this.reset()},bo.prototype.isEnabled=function(){return this._enabled},bo.prototype.isActive=function(){return this._active};var It=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.mousedown=function(f,m){c.prototype.mousedown.call(this,f,m),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(f,m){return m===0&&!f.ctrlKey},p.prototype._move=function(f,m){return{around:m,panDelta:m.sub(f)}},p}(bo),Ac=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype._correctButton=function(f,m){return m===0&&f.ctrlKey||m===2},p.prototype._move=function(f,m){var b=.8*(m.x-f.x);if(b)return this._active=!0,{bearingDelta:b}},p.prototype.contextmenu=function(f){f.preventDefault()},p}(bo),dl=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype._correctButton=function(f,m){return m===0&&f.ctrlKey||m===2},p.prototype._move=function(f,m){var b=-.5*(m.y-f.y);if(b)return this._active=!0,{pitchDelta:b}},p.prototype.contextmenu=function(f){f.preventDefault()},p}(bo),Ki=function(c){this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset()};Ki.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Ki.prototype.touchstart=function(c,p,f){return this._calculateTransform(c,p,f)},Ki.prototype.touchmove=function(c,p,f){if(this._active&&!(f.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,p,f)},Ki.prototype.touchend=function(c,p,f){this._calculateTransform(c,p,f),this._active&&f.length<this._minTouches&&this.reset()},Ki.prototype.touchcancel=function(){this.reset()},Ki.prototype._calculateTransform=function(c,p,f){f.length>0&&(this._active=!0);var m=Ea(f,p),b=new a.Point(0,0),E=new a.Point(0,0),P=0;for(var L in m){var N=m[L],G=this._touches[L];G&&(b._add(N),E._add(N.sub(G)),P++,m[L]=N)}if(this._touches=m,!(P<this._minTouches)&&E.mag()){var te=E.div(P);if(this._sum._add(te),!(this._sum.mag()<this._clickTolerance))return{around:b.div(P),panDelta:te}}},Ki.prototype.enable=function(){this._enabled=!0},Ki.prototype.disable=function(){this._enabled=!1,this.reset()},Ki.prototype.isEnabled=function(){return this._enabled},Ki.prototype.isActive=function(){return this._active};var Zi=function(){this.reset()};function Gf(c,p,f){for(var m=0;m<c.length;m++)if(c[m].identifier===f)return p[m]}function Ud(c,p){return Math.log(c/p)/Math.LN2}Zi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Zi.prototype._start=function(c){},Zi.prototype._move=function(c,p,f){return{}},Zi.prototype.touchstart=function(c,p,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([p[0],p[1]]))},Zi.prototype.touchmove=function(c,p,f){if(this._firstTwoTouches){c.preventDefault();var m=this._firstTwoTouches,b=m[1],E=Gf(f,p,m[0]),P=Gf(f,p,b);if(E&&P){var L=this._aroundCenter?null:E.add(P).div(2);return this._move([E,P],L,c)}}},Zi.prototype.touchend=function(c,p,f){if(this._firstTwoTouches){var m=this._firstTwoTouches,b=m[1],E=Gf(f,p,m[0]),P=Gf(f,p,b);E&&P||(this._active&&_.suppressClick(),this.reset())}},Zi.prototype.touchcancel=function(){this.reset()},Zi.prototype.enable=function(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var dh=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.reset=function(){c.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(f){this._startDistance=this._distance=f[0].dist(f[1])},p.prototype._move=function(f,m){var b=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(Ud(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ud(this._distance,b),pinchAround:m}},p}(Zi);function Xi(c,p){return 180*c.angleWith(p)/Math.PI}var Qa=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.reset=function(){c.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])},p.prototype._move=function(f,m){var b=this._vector;if(this._vector=f[0].sub(f[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xi(this._vector,b),pinchAround:m}},p.prototype._isBelowThreshold=function(f){this._minDiameter=Math.min(this._minDiameter,f.mag());var m=25/(Math.PI*this._minDiameter)*360,b=Xi(f,this._startVector);return Math.abs(b)<m},p}(Zi);function zu(c){return Math.abs(c.y)>Math.abs(c.x)}var mh=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.reset=function(){c.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(f){this._lastPoints=f,zu(f[0].sub(f[1]))&&(this._valid=!1)},p.prototype._move=function(f,m,b){var E=f[0].sub(this._lastPoints[0]),P=f[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(E,P,b.timeStamp),this._valid)return this._lastPoints=f,this._active=!0,{pitchDelta:(E.y+P.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(f,m,b){if(this._valid!==void 0)return this._valid;var E=f.mag()>=2,P=m.mag()>=2;if(E||P){if(!E||!P)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;var L=f.y>0==m.y>0;return zu(f)&&zu(m)&&L}},p}(Zi),Wf={panStep:100,bearingStep:15,pitchStep:10},Ya=function(){var c=Wf;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1};function jd(c){return c*(2-c)}Ya.prototype.reset=function(){this._active=!1},Ya.prototype.keydown=function(c){var p=this;if(!(c.altKey||c.ctrlKey||c.metaKey)){var f=0,m=0,b=0,E=0,P=0;switch(c.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:c.shiftKey?m=-1:(c.preventDefault(),E=-1);break;case 39:c.shiftKey?m=1:(c.preventDefault(),E=1);break;case 38:c.shiftKey?b=1:(c.preventDefault(),P=-1);break;case 40:c.shiftKey?b=-1:(c.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,b=0),{cameraAnimation:function(L){var N=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:jd,zoom:f?Math.round(N)+f*(c.shiftKey?2:1):N,bearing:L.getBearing()+m*p._bearingStep,pitch:L.getPitch()+b*p._pitchStep,offset:[-E*p._panStep,-P*p._panStep],center:L.getCenter()},{originalEvent:c})}}}},Ya.prototype.enable=function(){this._enabled=!0},Ya.prototype.disable=function(){this._enabled=!1,this.reset()},Ya.prototype.isEnabled=function(){return this._enabled},Ya.prototype.isActive=function(){return this._active},Ya.prototype.disableRotation=function(){this._rotationDisabled=!0},Ya.prototype.enableRotation=function(){this._rotationDisabled=!1};var In=function(c,p){this._map=c,this._el=c.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};In.prototype.setZoomRate=function(c){this._defaultZoomRate=c},In.prototype.setWheelZoomRate=function(c){this._wheelZoomRate=c},In.prototype.isEnabled=function(){return!!this._enabled},In.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},In.prototype.isZooming=function(){return!!this._zooming},In.prototype.enable=function(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=c&&c.around==="center")},In.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},In.prototype.wheel=function(c){if(this.isEnabled()){var p=c.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY,f=a.browser.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(m*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),c.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=c,this._delta-=p,this._active||this._start(c)),c.preventDefault()}},In.prototype._onTimeout=function(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},In.prototype._start=function(c){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=_.mousePos(this._el,c);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},In.prototype.renderFrame=function(){var c=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var f=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,m=2/(1+Math.exp(-Math.abs(this._delta*f)));this._delta<0&&m!==0&&(m=1/m);var b=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(b*m))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var E,P=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,L=this._startZoom,N=this._easing,G=!1;if(this._type==="wheel"&&L&&N){var te=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),ie=N(te);E=a.number(L,P,ie),te<1?this._frameId||(this._frameId=!0):G=!0}else E=P,G=!0;return this._active=!0,G&&(this._active=!1,this._finishTimeout=setTimeout(function(){c._zooming=!1,c._handler._triggerRenderFrame(),delete c._targetZoom,delete c._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!G,zoomDelta:E-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},In.prototype._smoothOutEasing=function(c){var p=a.ease;if(this._prevEase){var f=this._prevEase,m=(a.browser.now()-f.start)/f.duration,b=f.easing(m+.01)-f.easing(m),E=.27/Math.sqrt(b*b+1e-4)*.01,P=Math.sqrt(.0729-E*E);p=a.bezier(E,P,.25,1)}return this._prevEase={start:a.browser.now(),duration:c,easing:p},p},In.prototype.reset=function(){this._active=!1};var xn=function(c,p){this._clickZoom=c,this._tapZoom=p};xn.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},xn.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},xn.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},xn.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ka=function(){this.reset()};ka.prototype.reset=function(){this._active=!1},ka.prototype.dblclick=function(c,p){return c.preventDefault(),{cameraAnimation:function(f){f.easeTo({duration:300,zoom:f.getZoom()+(c.shiftKey?-1:1),around:f.unproject(p)},{originalEvent:c})}}},ka.prototype.enable=function(){this._enabled=!0},ka.prototype.disable=function(){this._enabled=!1,this.reset()},ka.prototype.isEnabled=function(){return this._enabled},ka.prototype.isActive=function(){return this._active};var Xo=function(){this._tap=new zs({numTouches:1,numTaps:1}),this.reset()};Xo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Xo.prototype.touchstart=function(c,p,f){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=p[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(c,p,f))},Xo.prototype.touchmove=function(c,p,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;var m=p[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,c.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(c,p,f)},Xo.prototype.touchend=function(c,p,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(c,p,f)&&(this._tapTime=c.timeStamp)},Xo.prototype.touchcancel=function(){this.reset()},Xo.prototype.enable=function(){this._enabled=!0},Xo.prototype.disable=function(){this._enabled=!1,this.reset()},Xo.prototype.isEnabled=function(){return this._enabled},Xo.prototype.isActive=function(){return this._active};var Qo=function(c,p,f){this._el=c,this._mousePan=p,this._touchPan=f};Qo.prototype.enable=function(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},Qo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},Qo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Qo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Jl=function(c,p,f){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=p,this._mousePitch=f};Jl.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Jl.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Jl.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Jl.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Aa=function(c,p,f,m){this._el=c,this._touchZoom=p,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0};Aa.prototype.enable=function(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},Aa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},Aa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Aa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Aa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Aa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Pa=function(c){return c.zoom||c.drag||c.pitch||c.rotate},Uo=function(c){function p(){c.apply(this,arguments)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p}(a.Event);function Ta(c){return c.panDelta&&c.panDelta.mag()||c.zoomDelta||c.bearingDelta||c.pitchDelta}var St=function(c,p){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hl(c),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),a.bindAll(["handleEvent","handleWindowEvent"],this);var f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[a.window,"blur",void 0]];for(var m=0,b=this._listeners;m<b.length;m+=1){var E=b[m],P=E[0];_.addEventListener(P,E[1],P===a.window.document?this.handleWindowEvent:this.handleEvent,E[2])}};St.prototype.destroy=function(){for(var c=0,p=this._listeners;c<p.length;c+=1){var f=p[c],m=f[0];_.removeEventListener(m,f[1],m===a.window.document?this.handleWindowEvent:this.handleEvent,f[2])}},St.prototype._addDefaultHandlers=function(c){var p=this._map,f=p.getCanvasContainer();this._add("mapEvent",new Di(p,c));var m=p.boxZoom=new At(p,c);this._add("boxZoom",m);var b=new oo,E=new ka;p.doubleClickZoom=new xn(E,b),this._add("tapZoom",b),this._add("clickZoom",E);var P=new Xo;this._add("tapDragZoom",P);var L=p.touchPitch=new mh;this._add("touchPitch",L);var N=new Ac(c),G=new dl(c);p.dragRotate=new Jl(c,N,G),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]);var te=new It(c),ie=new Ki(c);p.dragPan=new Qo(f,te,ie),this._add("mousePan",te),this._add("touchPan",ie,["touchZoom","touchRotate"]);var ne=new Qa,ye=new dh;p.touchZoomRotate=new Aa(f,ye,ne,P),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]);var me=p.scrollZoom=new In(p,this);this._add("scrollZoom",me,["mousePan"]);var Ce=p.keyboard=new Ya;this._add("keyboard",Ce),this._add("blockableMapEvent",new Zo(p));for(var de=0,Se=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];de<Se.length;de+=1){var Ie=Se[de];c.interactive&&c[Ie]&&p[Ie].enable(c[Ie])}},St.prototype._add=function(c,p,f){this._handlers.push({handlerName:c,handler:p,allowed:f}),this._handlersById[c]=p},St.prototype.stop=function(c){if(!this._updatingCamera){for(var p=0,f=this._handlers;p<f.length;p+=1)f[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}},St.prototype.isActive=function(){for(var c=0,p=this._handlers;c<p.length;c+=1)if(p[c].handler.isActive())return!0;return!1},St.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},St.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},St.prototype.isMoving=function(){return!!Pa(this._eventsInProgress)||this.isZooming()},St.prototype._blockedByActive=function(c,p,f){for(var m in c)if(m!==f&&(!p||p.indexOf(m)<0))return!0;return!1},St.prototype.handleWindowEvent=function(c){this.handleEvent(c,c.type+"Window")},St.prototype._getMapTouches=function(c){for(var p=[],f=0,m=c;f<m.length;f+=1){var b=m[f];this._el.contains(b.target)&&p.push(b)}return p},St.prototype.handleEvent=function(c,p){if(c.type!=="blur"){this._updatingCamera=!0;for(var f=c.type==="renderFrame"?void 0:c,m={needsRenderFrame:!1},b={},E={},P=c.touches?this._getMapTouches(c.touches):void 0,L=P?_.touchPos(this._el,P):_.mousePos(this._el,c),N=0,G=this._handlers;N<G.length;N+=1){var te=G[N],ie=te.handlerName,ne=te.handler,ye=te.allowed;if(ne.isEnabled()){var me=void 0;this._blockedByActive(E,ye,ie)?ne.reset():ne[p||c.type]&&(me=ne[p||c.type](c,L,P),this.mergeHandlerResult(m,b,me,ie,f),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||ne.isActive())&&(E[ie]=ne)}}var Ce={};for(var de in this._previousActiveHandlers)E[de]||(Ce[de]=f);this._previousActiveHandlers=E,(Object.keys(Ce).length||Ta(m))&&(this._changes.push([m,b,Ce]),this._triggerRenderFrame()),(Object.keys(E).length||Ta(m))&&this._map._stop(!0),this._updatingCamera=!1;var Se=m.cameraAnimation;Se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Se(this._map))}else this.stop(!0)},St.prototype.mergeHandlerResult=function(c,p,f,m,b){if(f){a.extend(c,f);var E={handlerName:m,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(p.zoom=E),f.panDelta!==void 0&&(p.drag=E),f.pitchDelta!==void 0&&(p.pitch=E),f.bearingDelta!==void 0&&(p.rotate=E)}},St.prototype._applyChanges=function(){for(var c={},p={},f={},m=0,b=this._changes;m<b.length;m+=1){var E=b[m],P=E[0],L=E[1],N=E[2];P.panDelta&&(c.panDelta=(c.panDelta||new a.Point(0,0))._add(P.panDelta)),P.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+P.pitchDelta),P.around!==void 0&&(c.around=P.around),P.pinchAround!==void 0&&(c.pinchAround=P.pinchAround),P.noInertia&&(c.noInertia=P.noInertia),a.extend(p,L),a.extend(f,N)}this._updateMapTransform(c,p,f),this._changes=[]},St.prototype._updateMapTransform=function(c,p,f){var m=this._map,b=m.transform;if(!Ta(c))return this._fireEvents(p,f,!0);var E=c.panDelta,P=c.zoomDelta,L=c.bearingDelta,N=c.pitchDelta,G=c.around,te=c.pinchAround;te!==void 0&&(G=te),m._stop(!0),G=G||m.transform.centerPoint;var ie=b.pointLocation(E?G.sub(E):G);L&&(b.bearing+=L),N&&(b.pitch+=N),P&&(b.zoom+=P),b.setLocationAtPoint(ie,G),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(p,f,!0)},St.prototype._fireEvents=function(c,p,f){var m=this,b=Pa(this._eventsInProgress),E=Pa(c),P={};for(var L in c)this._eventsInProgress[L]||(P[L+"start"]=c[L].originalEvent),this._eventsInProgress[L]=c[L];for(var N in!b&&E&&this._fireEvent("movestart",E.originalEvent),P)this._fireEvent(N,P[N]);for(var G in E&&this._fireEvent("move",E.originalEvent),c)this._fireEvent(G,c[G].originalEvent);var te,ie={};for(var ne in this._eventsInProgress){var ye=this._eventsInProgress[ne],me=ye.handlerName,Ce=ye.originalEvent;this._handlersById[me].isActive()||(delete this._eventsInProgress[ne],ie[ne+"end"]=te=p[me]||Ce)}for(var de in ie)this._fireEvent(de,ie[de]);var Se=Pa(this._eventsInProgress);if(f&&(b||E)&&!Se){this._updatingCamera=!0;var Ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Fe=function(We){return We!==0&&-m._bearingSnap<We&&We<m._bearingSnap};Ie?(Fe(Ie.bearing||this._map.getBearing())&&(Ie.bearing=0),this._map.easeTo(Ie,{originalEvent:te})):(this._map.fire(new a.Event("moveend",{originalEvent:te})),Fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},St.prototype._fireEvent=function(c,p){this._map.fire(new a.Event(c,p?{originalEvent:p}:{}))},St.prototype._requestFrame=function(){var c=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete c._frameId,c.handleEvent(new Uo("renderFrame",{timeStamp:p})),c._applyChanges()})},St.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Qt=function(c){function p(f,m){c.call(this),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=m.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(f,m){return this.jumpTo({center:f},m)},p.prototype.panBy=function(f,m,b){return f=a.Point.convert(f).mult(-1),this.panTo(this.transform.center,a.extend({offset:f},m),b)},p.prototype.panTo=function(f,m,b){return this.easeTo(a.extend({center:f},m),b)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(f,m){return this.jumpTo({zoom:f},m),this},p.prototype.zoomTo=function(f,m,b){return this.easeTo(a.extend({zoom:f},m),b)},p.prototype.zoomIn=function(f,m){return this.zoomTo(this.getZoom()+1,f,m),this},p.prototype.zoomOut=function(f,m){return this.zoomTo(this.getZoom()-1,f,m),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(f,m){return this.jumpTo({bearing:f},m),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(f,m){return this.jumpTo({padding:f},m),this},p.prototype.rotateTo=function(f,m,b){return this.easeTo(a.extend({bearing:f},m),b)},p.prototype.resetNorth=function(f,m){return this.rotateTo(0,a.extend({duration:1e3},f),m),this},p.prototype.resetNorthPitch=function(f,m){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},f),m),this},p.prototype.snapToNorth=function(f,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,m):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(f,m){return this.jumpTo({pitch:f},m),this},p.prototype.cameraForBounds=function(f,m){f=a.LngLatBounds.convert(f);var b=m&&m.bearing||0;return this._cameraForBoxAndBearing(f.getNorthWest(),f.getSouthEast(),b,m)},p.prototype._cameraForBoxAndBearing=function(f,m,b,E){var P={top:0,bottom:0,right:0,left:0};if(typeof(E=a.extend({padding:P,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){var L=E.padding;E.padding={top:L,bottom:L,right:L,left:L}}E.padding=a.extend(P,E.padding);var N=this.transform,G=N.padding,te=N.project(a.LngLat.convert(f)),ie=N.project(a.LngLat.convert(m)),ne=te.rotate(-b*Math.PI/180),ye=ie.rotate(-b*Math.PI/180),me=new a.Point(Math.max(ne.x,ye.x),Math.max(ne.y,ye.y)),Ce=new a.Point(Math.min(ne.x,ye.x),Math.min(ne.y,ye.y)),de=me.sub(Ce),Se=(N.width-(G.left+G.right+E.padding.left+E.padding.right))/de.x,Ie=(N.height-(G.top+G.bottom+E.padding.top+E.padding.bottom))/de.y;if(!(Ie<0||Se<0)){var Fe=Math.min(N.scaleZoom(N.scale*Math.min(Se,Ie)),E.maxZoom),We=typeof E.offset.x=="number"?new a.Point(E.offset.x,E.offset.y):a.Point.convert(E.offset),He=new a.Point((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(b*Math.PI/180),Ke=We.add(He).mult(N.scale/N.zoomScale(Fe));return{center:N.unproject(te.add(ie).div(2).sub(Ke)),zoom:Fe,bearing:b}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(f,m,b){return this._fitInternal(this.cameraForBounds(f,m),m,b)},p.prototype.fitScreenCoordinates=function(f,m,b,E,P){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(f)),this.transform.pointLocation(a.Point.convert(m)),b,E),E,P)},p.prototype._fitInternal=function(f,m,b){return f?(delete(m=a.extend(f,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this},p.prototype.jumpTo=function(f,m){this.stop();var b=this.transform,E=!1,P=!1,L=!1;return"zoom"in f&&b.zoom!==+f.zoom&&(E=!0,b.zoom=+f.zoom),f.center!==void 0&&(b.center=a.LngLat.convert(f.center)),"bearing"in f&&b.bearing!==+f.bearing&&(P=!0,b.bearing=+f.bearing),"pitch"in f&&b.pitch!==+f.pitch&&(L=!0,b.pitch=+f.pitch),f.padding==null||b.isPaddingEqual(f.padding)||(b.padding=f.padding),this.fire(new a.Event("movestart",m)).fire(new a.Event("move",m)),E&&this.fire(new a.Event("zoomstart",m)).fire(new a.Event("zoom",m)).fire(new a.Event("zoomend",m)),P&&this.fire(new a.Event("rotatestart",m)).fire(new a.Event("rotate",m)).fire(new a.Event("rotateend",m)),L&&this.fire(new a.Event("pitchstart",m)).fire(new a.Event("pitch",m)).fire(new a.Event("pitchend",m)),this.fire(new a.Event("moveend",m))},p.prototype.easeTo=function(f,m){var b=this;this._stop(!1,f.easeId),((f=a.extend({offset:[0,0],duration:500,easing:a.ease},f)).animate===!1||!f.essential&&a.browser.prefersReducedMotion)&&(f.duration=0);var E=this.transform,P=this.getZoom(),L=this.getBearing(),N=this.getPitch(),G=this.getPadding(),te="zoom"in f?+f.zoom:P,ie="bearing"in f?this._normalizeBearing(f.bearing,L):L,ne="pitch"in f?+f.pitch:N,ye="padding"in f?f.padding:E.padding,me=a.Point.convert(f.offset),Ce=E.centerPoint.add(me),de=E.pointLocation(Ce),Se=a.LngLat.convert(f.center||de);this._normalizeCenter(Se);var Ie,Fe,We=E.project(de),He=E.project(Se).sub(We),Ke=E.zoomScale(te-P);f.around&&(Ie=a.LngLat.convert(f.around),Fe=E.locationPoint(Ie));var tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||te!==P,this._rotating=this._rotating||L!==ie,this._pitching=this._pitching||ne!==N,this._padding=!E.isPaddingEqual(ye),this._easeId=f.easeId,this._prepareEase(m,f.noMoveStart,tt),this._ease(function(pt){if(b._zooming&&(E.zoom=a.number(P,te,pt)),b._rotating&&(E.bearing=a.number(L,ie,pt)),b._pitching&&(E.pitch=a.number(N,ne,pt)),b._padding&&(E.interpolatePadding(G,ye,pt),Ce=E.centerPoint.add(me)),Ie)E.setLocationAtPoint(Ie,Fe);else{var ct=E.zoomScale(E.zoom-P),bt=te>P?Math.min(2,Ke):Math.max(.5,Ke),Bt=Math.pow(bt,1-pt),Xt=E.unproject(We.add(He.mult(pt*Bt)).mult(ct));E.setLocationAtPoint(E.renderWorldCopies?Xt.wrap():Xt,Ce)}b._fireMoveEvents(m)},function(pt){b._afterEase(m,pt)},f),this},p.prototype._prepareEase=function(f,m,b){b===void 0&&(b={}),this._moving=!0,m||b.moving||this.fire(new a.Event("movestart",f)),this._zooming&&!b.zooming&&this.fire(new a.Event("zoomstart",f)),this._rotating&&!b.rotating&&this.fire(new a.Event("rotatestart",f)),this._pitching&&!b.pitching&&this.fire(new a.Event("pitchstart",f))},p.prototype._fireMoveEvents=function(f){this.fire(new a.Event("move",f)),this._zooming&&this.fire(new a.Event("zoom",f)),this._rotating&&this.fire(new a.Event("rotate",f)),this._pitching&&this.fire(new a.Event("pitch",f))},p.prototype._afterEase=function(f,m){if(!this._easeId||!m||this._easeId!==m){delete this._easeId;var b=this._zooming,E=this._rotating,P=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new a.Event("zoomend",f)),E&&this.fire(new a.Event("rotateend",f)),P&&this.fire(new a.Event("pitchend",f)),this.fire(new a.Event("moveend",f))}},p.prototype.flyTo=function(f,m){var b=this;if(!f.essential&&a.browser.prefersReducedMotion){var E=a.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(E,m)}this.stop(),f=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},f);var P=this.transform,L=this.getZoom(),N=this.getBearing(),G=this.getPitch(),te=this.getPadding(),ie="zoom"in f?a.clamp(+f.zoom,P.minZoom,P.maxZoom):L,ne="bearing"in f?this._normalizeBearing(f.bearing,N):N,ye="pitch"in f?+f.pitch:G,me="padding"in f?f.padding:P.padding,Ce=P.zoomScale(ie-L),de=a.Point.convert(f.offset),Se=P.centerPoint.add(de),Ie=P.pointLocation(Se),Fe=a.LngLat.convert(f.center||Ie);this._normalizeCenter(Fe);var We=P.project(Ie),He=P.project(Fe).sub(We),Ke=f.curve,tt=Math.max(P.width,P.height),pt=tt/Ce,ct=He.mag();if("minZoom"in f){var bt=a.clamp(Math.min(f.minZoom,L,ie),P.minZoom,P.maxZoom),Bt=tt/P.zoomScale(bt-L);Ke=Math.sqrt(Bt/ct*2)}var Xt=Ke*Ke;function Wt(rn){var Ft=(pt*pt-tt*tt+(rn?-1:1)*Xt*Xt*ct*ct)/(2*(rn?pt:tt)*Xt*ct);return Math.log(Math.sqrt(Ft*Ft+1)-Ft)}function Nn(rn){return(Math.exp(rn)-Math.exp(-rn))/2}function Pt(rn){return(Math.exp(rn)+Math.exp(-rn))/2}var en=Wt(0),wn=function(rn){return Pt(en)/Pt(en+Ke*rn)},fn=function(rn){return tt*((Pt(en)*(Nn(Ft=en+Ke*rn)/Pt(Ft))-Nn(en))/Xt)/ct;var Ft},on=(Wt(1)-en)/Ke;if(Math.abs(ct)<1e-6||!isFinite(on)){if(Math.abs(tt-pt)<1e-6)return this.easeTo(f,m);var ln=pt<tt?-1:1;on=Math.abs(Math.log(pt/tt))/Ke,fn=function(){return 0},wn=function(rn){return Math.exp(ln*Ke*rn)}}return f.duration="duration"in f?+f.duration:1e3*on/("screenSpeed"in f?+f.screenSpeed/Ke:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0),this._zooming=!0,this._rotating=N!==ne,this._pitching=ye!==G,this._padding=!P.isPaddingEqual(me),this._prepareEase(m,!1),this._ease(function(rn){var Ft=rn*on,nr=1/wn(Ft);P.zoom=rn===1?ie:L+P.scaleZoom(nr),b._rotating&&(P.bearing=a.number(N,ne,rn)),b._pitching&&(P.pitch=a.number(G,ye,rn)),b._padding&&(P.interpolatePadding(te,me,rn),Se=P.centerPoint.add(de));var Zr=rn===1?Fe:P.unproject(We.add(He.mult(fn(Ft))).mult(nr));P.setLocationAtPoint(P.renderWorldCopies?Zr.wrap():Zr,Se),b._fireMoveEvents(m)},function(){return b._afterEase(m)},f),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(f,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!f){var E=this.handlers;E&&E.stop(!1)}return this},p.prototype._ease=function(f,m,b){b.animate===!1||b.duration===0?(f(1),m()):(this._easeStart=a.browser.now(),this._easeOptions=b,this._onEaseFrame=f,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var f=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(f,m){f=a.wrap(f,-180,180);var b=Math.abs(f-m);return Math.abs(f-360-m)<b&&(f-=360),Math.abs(f+360-m)<b&&(f+=360),f},p.prototype._normalizeCenter=function(f){var m=this.transform;if(m.renderWorldCopies&&!m.lngRange){var b=f.lng-m.center.lng;f.lng+=b>180?-360:b<-180?360:0}},p}(a.Evented),ao=function(c){c===void 0&&(c={}),this.options=c,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ao.prototype.getDefaultPosition=function(){return"bottom-right"},ao.prototype.onAdd=function(c){var p=this.options&&this.options.compact;return this._map=c,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ao.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ao.prototype._setElementTitle=function(c,p){var f=this._map._getUIString("AttributionControl."+p);c.title=f,c.setAttribute("aria-label",f)},ao.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ao.prototype._updateEditLink=function(){var c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(c){var f=p.reduce(function(m,b,E){return b.value&&(m+=b.key+"="+b.value+(E<p.length-1?"&":"")),m},"?");c.href=a.config.FEEDBACK_URL+"/"+f+(this._map._hash?this._map._hash.getHashString(!0):""),c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}},ao.prototype._updateData=function(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ao.prototype._updateAttributions=function(){if(this._map.style){var c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(function(L){return typeof L!="string"?"":L})):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var f=this._map.style.sourceCaches;for(var m in f){var b=f[m];if(b.used){var E=b.getSource();E.attribution&&c.indexOf(E.attribution)<0&&c.push(E.attribution)}}c.sort(function(L,N){return L.length-N.length});var P=(c=c.filter(function(L,N){for(var G=N+1;G<c.length;G++)if(c[G].indexOf(L)>=0)return!1;return!0})).join(" | ");P!==this._attribHTML&&(this._attribHTML=P,c.length?(this._innerContainer.innerHTML=P,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},ao.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var so=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};so.prototype.onAdd=function(c){this._map=c,this._container=_.create("div","maplibregl-ctrl mapboxgl-ctrl");var p=_.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},so.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},so.prototype.getDefaultPosition=function(){return"bottom-left"},so.prototype._updateLogo=function(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},so.prototype._logoRequired=function(){if(this._map.style){var c=this._map.style.sourceCaches;for(var p in c)if(c[p].getSource().mapbox_logo)return!0;return!1}},so.prototype._updateCompact=function(){var c=this._container.children;if(c.length){var p=c[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("maplibregl-compact","mapboxgl-compact"):p.classList.remove("maplibregl-compact","mapboxgl-compact")}};var Bs=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Bs.prototype.add=function(c){var p=++this._id;return this._queue.push({callback:c,id:p,cancelled:!1}),p},Bs.prototype.remove=function(c){for(var p=this._currentlyRunning,f=0,m=p?this._queue.concat(p):this._queue;f<m.length;f+=1){var b=m[f];if(b.id===c)return void(b.cancelled=!0)}},Bs.prototype.run=function(c){c===void 0&&(c=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var f=0,m=p;f<m.length;f+=1){var b=m[f];if(!b.cancelled&&(b.callback(c),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Bs.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Yo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ia=a.window.HTMLImageElement,Bg=a.window.HTMLElement,Ns=a.window.ImageBitmap,ur={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ti=function(c){function p(m){var b=this;if((m=a.extend({},ur,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var E=new nn(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies);if(c.call(this,E,m),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new Bs,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Yo,m.locale),this._clickTolerance=m.clickTolerance,this._requestManager=new a.RequestManager(m.transformRequest,m.accessToken),typeof m.container=="string"){if(this._container=a.window.document.getElementById(m.container),!this._container)throw new Error("Container '"+m.container+"' not found.")}else{if(!(m.container instanceof Bg))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return b._update(!1)}),this.on("moveend",function(){return b._update(!1)}),this.on("zoom",function(){return b._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new St(this,m),this._hash=m.hash&&new Yl(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,a.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new ao({customAttribution:m.customAttribution})),this.addControl(new so,m.logoPosition),this.on("style.load",function(){b.transform.unmodified&&b.jumpTo(b.style.stylesheet)}),this.on("data",function(P){b._update(P.dataType==="style"),b.fire(new a.Event(P.dataType+"data",P))}),this.on("dataloading",function(P){b.fire(new a.Event(P.dataType+"dataloading",P))})}c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p;var f={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(m,b){if(b===void 0&&(b=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var E=m.onAdd(this);this._controls.push(m);var P=this._controlPositions[b];return b.indexOf("bottom")!==-1?P.insertBefore(E,P.firstChild):P.appendChild(E),this},p.prototype.removeControl=function(m){if(!m||!m.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var b=this._controls.indexOf(m);return b>-1&&this._controls.splice(b,1),m.onRemove(this),this},p.prototype.hasControl=function(m){return this._controls.indexOf(m)>-1},p.prototype.resize=function(m){var b=this._containerDimensions(),E=b[0],P=b[1];this._resizeCanvas(E,P),this.transform.resize(E,P),this.painter.resize(E,P);var L=!this._moving;return L&&(this.stop(),this.fire(new a.Event("movestart",m)).fire(new a.Event("move",m))),this.fire(new a.Event("resize",m)),L&&this.fire(new a.Event("moveend",m)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(m){return this.transform.setMaxBounds(a.LngLatBounds.convert(m)),this._update()},p.prototype.setMinZoom=function(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(m){if((m=m??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(m){return this.transform.renderWorldCopies=m,this._update()},p.prototype.project=function(m){return this.transform.locationPoint(a.LngLat.convert(m))},p.prototype.unproject=function(m){return this.transform.pointLocation(a.Point.convert(m))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(m,b,E){var P,L=this;if(m==="mouseenter"||m==="mouseover"){var N=!1;return{layer:b,listener:E,delegates:{mousemove:function(te){var ie=L.getLayer(b)?L.queryRenderedFeatures(te.point,{layers:[b]}):[];ie.length?N||(N=!0,E.call(L,new Wi(m,L,te.originalEvent,{features:ie}))):N=!1},mouseout:function(){N=!1}}}}if(m==="mouseleave"||m==="mouseout"){var G=!1;return{layer:b,listener:E,delegates:{mousemove:function(te){(L.getLayer(b)?L.queryRenderedFeatures(te.point,{layers:[b]}):[]).length?G=!0:G&&(G=!1,E.call(L,new Wi(m,L,te.originalEvent)))},mouseout:function(te){G&&(G=!1,E.call(L,new Wi(m,L,te.originalEvent)))}}}}return{layer:b,listener:E,delegates:(P={},P[m]=function(te){var ie=L.getLayer(b)?L.queryRenderedFeatures(te.point,{layers:[b]}):[];ie.length&&(te.features=ie,E.call(L,te),delete te.features)},P)}},p.prototype.on=function(m,b,E){if(E===void 0)return c.prototype.on.call(this,m,b);var P=this._createDelegatedListener(m,b,E);for(var L in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(P),P.delegates)this.on(L,P.delegates[L]);return this},p.prototype.once=function(m,b,E){if(E===void 0)return c.prototype.once.call(this,m,b);var P=this._createDelegatedListener(m,b,E);for(var L in P.delegates)this.once(L,P.delegates[L]);return this},p.prototype.off=function(m,b,E){var P=this;return E===void 0?c.prototype.off.call(this,m,b):(this._delegatedListeners&&this._delegatedListeners[m]&&function(L){for(var N=L[m],G=0;G<N.length;G++){var te=N[G];if(te.layer===b&&te.listener===E){for(var ie in te.delegates)P.off(ie,te.delegates[ie]);return N.splice(G,1),P}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(m,b){if(!this.style)return[];var E;if(b!==void 0||m===void 0||m instanceof a.Point||Array.isArray(m)||(b=m,m=void 0),b=b||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof m[0]=="number")E=[a.Point.convert(m)];else{var P=a.Point.convert(m[0]),L=a.Point.convert(m[1]);E=[P,new a.Point(L.x,P.y),L,new a.Point(P.x,L.y),P]}return this.style.queryRenderedFeatures(E,b,this.transform)},p.prototype.querySourceFeatures=function(m,b){return this.style.querySourceFeatures(m,b)},p.prototype.setStyle=function(m,b){return(b=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},b)).diff!==!1&&b.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,b),this):(this._localIdeographFontFamily=b.localIdeographFontFamily,this._updateStyle(m,b))},p.prototype.setTransformRequest=function(m){return this._requestManager.setTransformRequest(m),this},p.prototype._getUIString=function(m){var b=this._locale[m];if(b==null)throw new Error("Missing UI string '"+m+"'");return b},p.prototype._updateStyle=function(m,b){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new er(this,b||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new er(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(m,b){var E=this;if(typeof m=="string"){var P=this._requestManager.normalizeStyleURL(m),L=this._requestManager.transformRequest(P,a.ResourceType.Style);a.getJSON(L,function(N,G){N?E.fire(new a.ErrorEvent(N)):G&&E._updateDiff(G,b)})}else typeof m=="object"&&this._updateDiff(m,b)},p.prototype._updateDiff=function(m,b){try{this.style.setState(m)&&this._update(!0)}catch(E){a.warnOnce("Unable to perform style diff: "+(E.message||E.error||E)+".  Rebuilding the style from scratch."),this._updateStyle(m,b)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(m,b){return this._lazyInitEmptyStyle(),this.style.addSource(m,b),this._update(!0)},p.prototype.isSourceLoaded=function(m){var b=this.style&&this.style.sourceCaches[m];if(b!==void 0)return b.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+m+"'")))},p.prototype.areTilesLoaded=function(){var m=this.style&&this.style.sourceCaches;for(var b in m){var E=m[b]._tiles;for(var P in E){var L=E[P];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(m,b,E){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,b,E)},p.prototype.removeSource=function(m){return this.style.removeSource(m),this._update(!0)},p.prototype.getSource=function(m){return this.style.getSource(m)},p.prototype.addImage=function(m,b,E){E===void 0&&(E={});var P=E.pixelRatio;P===void 0&&(P=1);var L=E.sdf;L===void 0&&(L=!1);var N=E.stretchX,G=E.stretchY,te=E.content;if(this._lazyInitEmptyStyle(),b instanceof Ia||Ns&&b instanceof Ns){var ie=a.browser.getImageData(b);this.style.addImage(m,{data:new a.RGBAImage({width:ie.width,height:ie.height},ie.data),pixelRatio:P,stretchX:N,stretchY:G,content:te,sdf:L,version:0})}else{if(b.width===void 0||b.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ne=b;this.style.addImage(m,{data:new a.RGBAImage({width:b.width,height:b.height},new Uint8Array(b.data)),pixelRatio:P,stretchX:N,stretchY:G,content:te,sdf:L,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,m)}},p.prototype.updateImage=function(m,b){var E=this.style.getImage(m);if(!E)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var P=b instanceof Ia||Ns&&b instanceof Ns?a.browser.getImageData(b):b,L=P.width,N=P.height,G=P.data;return L===void 0||N===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):L!==E.data.width||N!==E.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(E.data.replace(G,!(b instanceof Ia||Ns&&b instanceof Ns)),void this.style.updateImage(m,E))},p.prototype.hasImage=function(m){return m?!!this.style.getImage(m):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(m){this.style.removeImage(m)},p.prototype.loadImage=function(m,b){a.getImage(this._requestManager.transformRequest(m,a.ResourceType.Image),b)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(m,b){return this._lazyInitEmptyStyle(),this.style.addLayer(m,b),this._update(!0)},p.prototype.moveLayer=function(m,b){return this.style.moveLayer(m,b),this._update(!0)},p.prototype.removeLayer=function(m){return this.style.removeLayer(m),this._update(!0)},p.prototype.getLayer=function(m){return this.style.getLayer(m)},p.prototype.setLayerZoomRange=function(m,b,E){return this.style.setLayerZoomRange(m,b,E),this._update(!0)},p.prototype.setFilter=function(m,b,E){return E===void 0&&(E={}),this.style.setFilter(m,b,E),this._update(!0)},p.prototype.getFilter=function(m){return this.style.getFilter(m)},p.prototype.setPaintProperty=function(m,b,E,P){return P===void 0&&(P={}),this.style.setPaintProperty(m,b,E,P),this._update(!0)},p.prototype.getPaintProperty=function(m,b){return this.style.getPaintProperty(m,b)},p.prototype.setLayoutProperty=function(m,b,E,P){return P===void 0&&(P={}),this.style.setLayoutProperty(m,b,E,P),this._update(!0)},p.prototype.getLayoutProperty=function(m,b){return this.style.getLayoutProperty(m,b)},p.prototype.setLight=function(m,b){return b===void 0&&(b={}),this._lazyInitEmptyStyle(),this.style.setLight(m,b),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(m,b){return this.style.setFeatureState(m,b),this._update()},p.prototype.removeFeatureState=function(m,b){return this.style.removeFeatureState(m,b),this._update()},p.prototype.getFeatureState=function(m){return this.style.getFeatureState(m)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var m=0,b=0;return this._container&&(m=this._container.clientWidth||400,b=this._container.clientHeight||300),[m,b]},p.prototype._setupContainer=function(){var m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");var b=this._canvasContainer=_.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&b.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas mapboxgl-canvas",b),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var E=this._containerDimensions();this._resizeCanvas(E[0],E[1]);var P=this._controlContainer=_.create("div","maplibregl-control-container mapboxgl-control-container",m),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(N){L[N]=_.create("div","maplibregl-ctrl-"+N+" mapboxgl-ctrl-"+N,P)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(m,b){var E=a.browser.devicePixelRatio||1;this._canvas.width=E*m,this._canvas.height=E*b,this._canvas.style.width=m+"px",this._canvas.style.height=b+"px"},p.prototype._setupPainter=function(){var m=a.extend({},g.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),b=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);b?(this.painter=new yt(b,this.transform),a.webpSupported.testSupport(b)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:m}))},p.prototype._contextRestored=function(m){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:m}))},p.prototype._onMapScroll=function(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(m){return this._update(),this._renderTaskQueue.add(m)},p.prototype._cancelRenderFrame=function(m){this._renderTaskQueue.remove(m)},p.prototype._render=function(m){var b,E=this,P=0,L=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(b=L.createQueryEXT(),L.beginQueryEXT(L.TIME_ELAPSED_EXT,b),P=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),!this._removed){var N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var G=this.transform.zoom,te=a.browser.now();this.style.zoomHistory.update(G,te);var ie=new a.EvaluationParameters(G,{now:te,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ne=ie.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(N=!0,this._crossFadingFactor=ne),this.style.update(ie)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ye=a.browser.now()-P;L.endQueryEXT(L.TIME_ELAPSED_EXT,b),setTimeout(function(){var de=L.getQueryObjectEXT(b,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(b),E.fire(new a.Event("gpu-timing-frame",{cpuTime:ye,gpuTime:de}))},50)}if(this.listens("gpu-timing-layer")){var me=this.painter.collectGpuTimers();setTimeout(function(){var de=E.painter.queryGpuTimers(me);E.fire(new a.Event("gpu-timing-layer",{layerTimes:de}))},50)}var Ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||Ce||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var m=0,b=this._controls;m<b.length;m+=1)b[m].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),Kf(this._canvasContainer),Kf(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},p.prototype.triggerRepaint=function(){var m=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(b){m._frame=null,m._render(b)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(m){this._trackResize&&this.resize({originalEvent:m})._update()},f.showTileBoundaries.get=function(){return!!this._showTileBoundaries},f.showTileBoundaries.set=function(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())},f.showPadding.get=function(){return!!this._showPadding},f.showPadding.set=function(m){this._showPadding!==m&&(this._showPadding=m,this._update())},f.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},f.showCollisionBoxes.set=function(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())},f.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},f.showOverdrawInspector.set=function(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())},f.repaint.get=function(){return!!this._repaint},f.repaint.set=function(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())},f.vertices.get=function(){return!!this._vertices},f.vertices.set=function(m){this._vertices=m,this._update()},p.prototype._setCacheLimits=function(m,b){a.setCacheLimits(m,b)},f.version.get=function(){return a.version},Object.defineProperties(p.prototype,f),p}(Qt);function Kf(c){c.parentNode&&c.parentNode.removeChild(c)}var re={showCompass:!0,showZoom:!0,visualizePitch:!1},Jo=function(c){var p=this;this.options=a.extend({},re,c),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(f){return f.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(f){return p._map.zoomIn({},{originalEvent:f})}),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(f){return p._map.zoomOut({},{originalEvent:f})}),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(f){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:f}):p._map.resetNorth({},{originalEvent:f})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Jo.prototype._updateZoomButtons=function(){var c=this._map.getZoom(),p=c===this._map.getMaxZoom(),f=c===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},Jo.prototype._rotateCompassArrow=function(){var c=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=c},Jo.prototype.onAdd=function(c){return this._map=c,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(this._map,this._compass,this.options.visualizePitch)),this._container},Jo.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Jo.prototype._createButton=function(c,p){var f=_.create("button",c,this._container);return f.type="button",f.addEventListener("click",p),f},Jo.prototype._setButtonTitle=function(c,p){var f=this._map._getUIString("NavigationControl."+p);c.title=f,c.setAttribute("aria-label",f)};var lo=function(c,p,f){f===void 0&&(f=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new Ac({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,f&&(this.mousePitch=new dl({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(p,"mousedown",this.mousedown),_.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(p,"touchmove",this.touchmove),_.addEventListener(p,"touchend",this.touchend),_.addEventListener(p,"touchcancel",this.reset)};function jo(c,p,f){if(c=new a.LngLat(c.lng,c.lat),p){var m=new a.LngLat(c.lng-360,c.lat),b=new a.LngLat(c.lng+360,c.lat),E=f.locationPoint(c).distSqr(p);f.locationPoint(m).distSqr(p)<E?c=m:f.locationPoint(b).distSqr(p)<E&&(c=b)}for(;Math.abs(c.lng-f.center.lng)>180;){var P=f.locationPoint(c);if(P.x>=0&&P.y>=0&&P.x<=f.width&&P.y<=f.height)break;c.lng>f.center.lng?c.lng-=360:c.lng+=360}return c}lo.prototype.down=function(c,p){this.mouseRotate.mousedown(c,p),this.mousePitch&&this.mousePitch.mousedown(c,p),_.disableDrag()},lo.prototype.move=function(c,p){var f=this.map,m=this.mouseRotate.mousemoveWindow(c,p);if(m&&m.bearingDelta&&f.setBearing(f.getBearing()+m.bearingDelta),this.mousePitch){var b=this.mousePitch.mousemoveWindow(c,p);b&&b.pitchDelta&&f.setPitch(f.getPitch()+b.pitchDelta)}},lo.prototype.off=function(){var c=this.element;_.removeEventListener(c,"mousedown",this.mousedown),_.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(c,"touchmove",this.touchmove),_.removeEventListener(c,"touchend",this.touchend),_.removeEventListener(c,"touchcancel",this.reset),this.offTemp()},lo.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(a.window,"mousemove",this.mousemove),_.removeEventListener(a.window,"mouseup",this.mouseup)},lo.prototype.mousedown=function(c){this.down(a.extend({},c,{ctrlKey:!0,preventDefault:function(){return c.preventDefault()}}),_.mousePos(this.element,c)),_.addEventListener(a.window,"mousemove",this.mousemove),_.addEventListener(a.window,"mouseup",this.mouseup)},lo.prototype.mousemove=function(c){this.move(c,_.mousePos(this.element,c))},lo.prototype.mouseup=function(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()},lo.prototype.touchstart=function(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return c.preventDefault()}},this._startPos))},lo.prototype.touchmove=function(c){c.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,c.targetTouches)[0],this.move({preventDefault:function(){return c.preventDefault()}},this._lastPos))},lo.prototype.touchend=function(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},lo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Dn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function $s(c,p,f){var m=c.classList;for(var b in Dn)m.remove("maplibregl-"+f+"-anchor-"+b,"mapboxgl-"+f+"-anchor-"+b);m.add("maplibregl-"+f+"-anchor-"+p,"mapboxgl-"+f+"-anchor-"+p)}var Bu,Pc=function(c){function p(f,m){if(c.call(this),(f instanceof a.window.HTMLElement||m)&&(f=a.extend({element:f},m)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&f.pitchAlignment!=="auto"?f.pitchAlignment:this._rotationAlignment,f&&f.element)this._element=f.element,this._offset=a.Point.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var b=_.createNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS(null,"display","block"),b.setAttributeNS(null,"height","41px"),b.setAttributeNS(null,"width","27px"),b.setAttributeNS(null,"viewBox","0 0 27 41");var E=_.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");var P=_.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");var L=_.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");for(var N=0,G=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];N<G.length;N+=1){var te=G[N],ie=_.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",te.rx),ie.setAttributeNS(null,"ry",te.ry),L.appendChild(ie)}var ne=_.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill",this._color);var ye=_.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ne.appendChild(ye);var me=_.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");var Ce=_.createNS("http://www.w3.org/2000/svg","path");Ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(Ce);var de=_.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(6.0, 7.0)"),de.setAttributeNS(null,"fill","#FFFFFF");var Se=_.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ie=_.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#000000"),Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962");var Fe=_.createNS("http://www.w3.org/2000/svg","circle");Fe.setAttributeNS(null,"fill","#FFFFFF"),Fe.setAttributeNS(null,"cx","5.5"),Fe.setAttributeNS(null,"cy","5.5"),Fe.setAttributeNS(null,"r","5.4999962"),Se.appendChild(Ie),Se.appendChild(Fe),P.appendChild(L),P.appendChild(ne),P.appendChild(me),P.appendChild(de),P.appendChild(Se),b.appendChild(P),b.setAttributeNS(null,"height",41*this._scale+"px"),b.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(b),this._offset=a.Point.convert(f&&f.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(We){We.preventDefault()}),this._element.addEventListener("mousedown",function(We){We.preventDefault()}),$s(this._element,this._anchor,"marker"),this._popup=null}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.addTo=function(f){return this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._update),f.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(f){return this._lngLat=a.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){var m=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=f,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(f){var m=f.code,b=f.charCode||f.keyCode;m!=="Space"&&m!=="Enter"&&b!==32&&b!==13||this.togglePopup()},p.prototype._onMapClick=function(f){var m=f.originalEvent.target,b=this._element;this._popup&&(m===b||b.contains(m))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var f=this._popup;return f?(f.isOpen()?f.remove():f.addTo(this._map),this):this},p.prototype._update=function(f){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=jo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(m="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b="rotateX("+this._map.getPitch()+"deg)"),f&&f.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,Dn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+b+" "+m)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(f){return this._offset=a.Point.convert(f),this._update(),this},p.prototype._onMove=function(f){if(!this._isDragging){var m=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(f){this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(f){return this._draggable=!!f,this._map&&(f?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(f){return this._rotation=f||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(f){return this._rotationAlignment=f||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(f){return this._pitchAlignment=f&&f!=="auto"?f:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(a.Evented),Us={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Tc=0,ml=!1,gh=function(c){function p(f){c.call(this),this.options=a.extend({},Us,f),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.onAdd=function(f){var m;return this._map=f,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),m=this._setupUI,Bu!==void 0?m(Bu):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(b){m(Bu=b.state!=="denied")}):m(Bu=!!a.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Tc=0,ml=!1},p.prototype._isOutOfMapMaxBounds=function(f){var m=this._map.getMaxBounds(),b=f.coords;return m&&(b.longitude<m.getWest()||b.longitude>m.getEast()||b.latitude<m.getSouth()||b.latitude>m.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",f)),this._finish()}},p.prototype._updateCamera=function(f){var m=new a.LngLat(f.coords.longitude,f.coords.latitude),b=f.coords.accuracy,E=this._map.getBearing(),P=a.extend({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(m.toBounds(b),P,{geolocateSource:!0})},p.prototype._updateMarker=function(f){if(f){var m=new a.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var f=this._map._container.clientHeight/2,m=this._map.unproject([0,f]),b=this._map.unproject([1,f]),E=m.distanceTo(b),P=Math.ceil(2*this._accuracy/E);this._circleElement.style.width=P+"px",this._circleElement.style.height=P+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&ml)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",f)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(f){var m=this;if(this._container.addEventListener("contextmenu",function(P){return P.preventDefault()}),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",f===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}else{var E=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pc(this._dotElement),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(P){P.geolocateSource||m._watchState!=="ACTIVE_LOCK"||P.originalEvent&&P.originalEvent.type==="resize"||(m._watchState="BACKGROUND",m._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),m._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),m.fire(new a.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Tc--,ml=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Tc>1?(f={maximumAge:6e5,timeout:0},ml=!0):(f=this.options.positionOptions,ml=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(a.Evented),yh={maxWidth:100,unit:"metric"},da=function(c){this.options=a.extend({},yh,c),a.bindAll(["_onMove","setUnit"],this)};function Oa(c,p,f){var m=f&&f.maxWidth||100,b=c._container.clientHeight/2,E=c.unproject([0,b]),P=c.unproject([m,b]),L=E.distanceTo(P);if(f&&f.unit==="imperial"){var N=3.2808*L;N>5280?eu(p,m,N/5280,c._getUIString("ScaleControl.Miles")):eu(p,m,N,c._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?eu(p,m,L/1852,c._getUIString("ScaleControl.NauticalMiles")):L>=1e3?eu(p,m,L/1e3,c._getUIString("ScaleControl.Kilometers")):eu(p,m,L,c._getUIString("ScaleControl.Meters"))}function eu(c,p,f,m){var b,E,P,L=(b=f,(E=Math.pow(10,(""+Math.floor(b)).length-1))*(P=(P=b/E)>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(N){var G=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*G)/G}(P)));c.style.width=p*(L/f)+"px",c.innerHTML=L+"&nbsp;"+m}da.prototype.getDefaultPosition=function(){return"bottom-left"},da.prototype._onMove=function(){Oa(this._map,this._container,this.options)},da.prototype.onAdd=function(c){return this._map=c,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",c.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},da.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},da.prototype.setUnit=function(c){this.options.unit=c,Oa(this._map,this._container,this.options)};var ma=function(c){this._fullscreen=!1,c&&c.container&&(c.container instanceof a.window.HTMLElement?this._container=c.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};ma.prototype.onAdd=function(c){return this._map=c,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ma.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ma.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},ma.prototype._setupUI=function(){var c=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",c).setAttribute("aria-hidden",!0),c.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ma.prototype._updateTitle=function(){var c=this._getTitle();this._fullscreenButton.setAttribute("aria-label",c),this._fullscreenButton.title=c},ma.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ma.prototype._isFullscreen=function(){return this._fullscreen},ma.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ma.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var vh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_h=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ic=function(c){function p(f){c.call(this),this.options=a.extend(Object.create(vh),f),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return c&&(p.__proto__=c),(p.prototype=Object.create(c&&c.prototype)).constructor=p,p.prototype.addTo=function(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(f){return this._lngLat=a.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(f){return this.setDOMContent(a.window.document.createTextNode(f))},p.prototype.setHTML=function(f){var m,b=a.window.document.createDocumentFragment(),E=a.window.document.createElement("body");for(E.innerHTML=f;m=E.firstChild;)b.appendChild(m);return this.setDOMContent(b)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(f){return this.options.maxWidth=f,this._update(),this},p.prototype.setDOMContent=function(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(f){this._container&&this._container.classList.add(f)},p.prototype.removeClassName=function(f){this._container&&this._container.classList.remove(f)},p.prototype.setOffset=function(f){return this.options.offset=f,this._update(),this},p.prototype.toggleClassName=function(f){if(this._container)return this._container.classList.toggle(f)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(f){this._update(f.point)},p.prototype._onMouseMove=function(f){this._update(f.point)},p.prototype._onDrag=function(f){this._update(f.point)},p.prototype._update=function(f){var m=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=_.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ie){return m._container.classList.add(ie)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=jo(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||f)){var b=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat),E=this.options.anchor,P=function ie(ne){if(ne){if(typeof ne=="number"){var ye=Math.round(Math.sqrt(.5*Math.pow(ne,2)));return{center:new a.Point(0,0),top:new a.Point(0,ne),"top-left":new a.Point(ye,ye),"top-right":new a.Point(-ye,ye),bottom:new a.Point(0,-ne),"bottom-left":new a.Point(ye,-ye),"bottom-right":new a.Point(-ye,-ye),left:new a.Point(ne,0),right:new a.Point(-ne,0)}}if(ne instanceof a.Point||Array.isArray(ne)){var me=a.Point.convert(ne);return{center:me,top:me,"top-left":me,"top-right":me,bottom:me,"bottom-left":me,"bottom-right":me,left:me,right:me}}return{center:a.Point.convert(ne.center||[0,0]),top:a.Point.convert(ne.top||[0,0]),"top-left":a.Point.convert(ne["top-left"]||[0,0]),"top-right":a.Point.convert(ne["top-right"]||[0,0]),bottom:a.Point.convert(ne.bottom||[0,0]),"bottom-left":a.Point.convert(ne["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(ne["bottom-right"]||[0,0]),left:a.Point.convert(ne.left||[0,0]),right:a.Point.convert(ne.right||[0,0])}}return ie(new a.Point(0,0))}(this.options.offset);if(!E){var L,N=this._container.offsetWidth,G=this._container.offsetHeight;L=b.y+P.bottom.y<G?["top"]:b.y>this._map.transform.height-G?["bottom"]:[],b.x<N/2?L.push("left"):b.x>this._map.transform.width-N/2&&L.push("right"),E=L.length===0?"bottom":L.join("-")}var te=b.add(P[E]).round();_.setTransform(this._container,Dn[E]+" translate("+te.x+"px,"+te.y+"px)"),$s(this._container,E,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var f=this._container.querySelector(_h);f&&f.focus()}},p.prototype._onClose=function(){this.remove()},p}(a.Evented),La={version:a.version,supported:g,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:ti,NavigationControl:Jo,GeolocateControl:gh,AttributionControl:ao,ScaleControl:da,FullscreenControl:ma,Popup:Ic,Marker:Pc,Style:er,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){jt().acquire(je)},clearPrewarmedResources:function(){var c=Mt;c&&(c.isPreloaded()&&c.numActive()===1?(c.release(je),Mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(c){a.config.ACCESS_TOKEN=c},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(c){a.config.API_URL=c},get workerCount(){return st.workerCount},set workerCount(c){st.workerCount=c},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(c){a.config.MAX_PARALLEL_IMAGE_REQUESTS=c},clearStorage:function(c){a.clearTileCache(c)},workerUrl:"",addProtocol:function(c,p){a.config.REGISTERED_PROTOCOLS[c]=p},removeProtocol:function(c){delete a.config.REGISTERED_PROTOCOLS[c]}};return La}),s})})(fae);class pae{constructor(){un(this,"errorSetter",t=>{console.warn("Hook for renderer errors not installed. You must add it in logical layer by setErrorState method")});un(this,"onError",t=>{t instanceof Error?this.errorSetter(t):typeof t=="string"?this.errorSetter(new Error(t)):this.errorSetter(new Error("unknown"))})}setErrorState(t){this.errorSetter=t}setupExtension(t){}willInit(t){}willMount(t){}willUnMount(t){}willHide(t){}willUnhide(t){}willLegendUpdate(t){}willSourceUpdate(t){}willDestroy(t){}}Ti({currentMapAtom:PR},({onChange:e,schedule:t})=>{e("currentMapAtom",(n,i)=>{i&&t(s=>{s([pv.clear(),ug.clear()])})})},"autoClearAtom");const hae=["background","raster","hillshade","heatmap","fill","fill-extrusion","line","circle","symbol","custom"];class dae{constructor(){un(this,"_baseMapFirstLayerIdx",null);un(this,"_map",null);un(this,"_layersSettings",null);un(this,"_layersParentsIds",null);un(this,"_unsubscribe",[]);un(this,"_typesOrder",[...hae]);un(this,"_awaitingTasks",new Set)}init(t,n,i){this._map=t,this._unsubscribe.push(i.subscribe(s=>this._layersSettings=s)),this._layersParentsIds=n,this._baseMapFirstLayerIdx=(t.getStyle().layers??[]).length-1,this._awaitingTasks.forEach(s=>{this._awaitingTasks.delete(s),s(t)})}destroy(){this._unsubscribe.forEach(t=>t())}getIdToMountOnTypesTop(t,n,i){this._asyncWrap(t,n,i,this._getIdToMountOnTypesTopSync.bind(this))}getIdToMountOnTypesBottom(t,n,i){this._asyncWrap(t,n,i,this._getIdToMountOnTypesBottomSync.bind(this))}_getIdToMountOnTypesTopSync(t,n,i){var C,A,I,O;const s=this._getMountedOrderedLayers(t);if(!(s!=null&&s.size))return;const l=s.get(n),a=(C=this._layersParentsIds)==null?void 0:C.get(i),g=(I=(A=this._layersSettings)==null?void 0:A.get(a||""))==null?void 0:I.data;if(!g){console.warn("settings were not found for layer ",n,i);return}const _=g.category,w=l==null?void 0:l.find(D=>{if(_==="base")return D.category!=="base";if(_==="overlay")return D.category===void 0});if(_&&w)return w.layer.id;if(!w||!_){const D=this._typesOrder.slice(this._typesOrder.indexOf(n)+1).find(H=>{var R;return(R=s.get(H))==null?void 0:R.length});return D?(O=s.get(D))==null?void 0:O[0].layer.id:void 0}}_getIdToMountOnTypesBottomSync(t,n,i){var C,A,I,O;const s=this._getMountedOrderedLayers(t);if(!(s!=null&&s.size))return;const l=s.get(n),a=(C=this._layersParentsIds)==null?void 0:C.get(i),g=(I=(A=this._layersSettings)==null?void 0:A.get(a||""))==null?void 0:I.data;if(!g){console.warn("settings were not found for layer ",n,i);return}const _=g.category,w=(()=>{if(_==="base")return l==null?void 0:l[0];if(_==="overlay")return l==null?void 0:l.find(D=>D.category==="overlay"||D.category===void 0);if(_===void 0)return l==null?void 0:l.find(D=>D.category===void 0)})();if(w)return w.layer.id;if(!(l!=null&&l.length)||!w){const D=this._typesOrder.slice(this._typesOrder.indexOf(n)+1).find(H=>{var R;return(R=s.get(H))==null?void 0:R.length});return D?(O=s.get(D))==null?void 0:O[0].layer.id:void 0}}_getMountedOrderedLayers(t){if(this._baseMapFirstLayerIdx===null)return;const n=t.getStyle().layers??[];if(n.length===0)return;const i=n.slice(this._baseMapFirstLayerIdx+1);if(!i.length)return;const s=new Map;return i.forEach(l=>{var _,w,C,A;const a=(_=this._layersParentsIds)==null?void 0:_.get(l.id);if(!a)return console.warn("id was not found for",l.id,l);const g=s.get(l.type)||[];g.push({layer:l,category:(A=(C=(w=this._layersSettings)==null?void 0:w.get(a))==null?void 0:C.data)==null?void 0:A.category}),s.set(l.type,g)}),s}_asyncWrap(t,n,i,s){const l=this._map;l===null||this._baseMapFirstLayerIdx===null?this._awaitingTasks.add(a=>{i(s(a,t,n))}):i(s(l,t,n))}}const mae=new dae,OS=new Map;function LS(e,t=mae){function n(l,a){OS.set(l.id,a),t.getIdToMountOnTypesTop(l.type,l.id,g=>e.addLayer(l,g))}function i(l,a){OS.set(l.id,a),t.getIdToMountOnTypesBottom(l.type,l.id,g=>e.addLayer(l,g))}function s(l,a){OS.set(l.id,a),e.addLayer(l,void 0)}return{addAboveLayerWithSameType:n,addUnderLayerWithSameType:i,addAboveAllExistingLayers:s}}const gae=(e,t)=>new Promise((n,i)=>{try{e.on(t,n)}catch(s){i(s)}});function MS(e){if(!e._loaded)return gae(e,"load")}const yae={click:[],mousemove:[],mouseleave:[]};function Uy(e,t,n=50,i){return WT.addMapListener.dispatch(e,t,n),()=>{WT.removeMapListener.dispatch(e,t)}}const WT=Ti({addMapListener:(e,t,n)=>({eventType:e,listener:t,priority:n}),removeMapListener:(e,t)=>({eventType:e,listener:t})},({onAction:e},t=yae)=>(e("addMapListener",({eventType:n,listener:i,priority:s})=>{const l=[...t[n]];if(!l.length)l.push({listener:i,priority:s});else for(let a=0;a<l.length;a++){const g=l[a];if(s<g.priority){l.splice(a,0,{listener:i,priority:s});break}else if(g.priority===s){l.splice(a+1,0,{listener:i,priority:s});break}else if(l[a+1]){if(s>g.priority&&s<l[a+1].priority){l.splice(a+1,0,{listener:i,priority:s});break}}else{l.push({listener:i,priority:s});break}}t={...t,[n]:l}}),e("removeMapListener",({eventType:n,listener:i})=>t[n]=t[n].filter(s=>s.listener!==i)),t),"[Shared state] mapListenersAtom"),vae="_tootipRoot_i3o78_1",_ae="_hexagon_i3o78_5",xae="_labels_i3o78_28",bae="_column_i3o78_34",wae="_bivariateHexagonPopupContentRoot_i3o78_45",Jh={tootipRoot:vae,hexagon:_ae,labels:xae,column:bae,bivariateHexagonPopupContentRoot:wae},KT=Jh.bivariateHexagonPopupContentRoot,Sae=e=>AE(e)?Hx:Zre(e)?Gx:dR,Cae=e=>PE(e)?Hx:Xre(e)?Gx:dR,Eae=({hexagonColor:e,axis:t,cellIndex:n,cellLabel:i,values:s})=>jn("div",{className:Jh.tootipRoot,children:[Ze("div",{className:Jh.hexagon,children:Ze("div",{style:{background:e},children:i})}),jn("div",{className:Jh.labels,children:[jn("div",{className:Jh.column,children:[Ze("span",{children:t.x.label||ET(t.x.quotients)}),Ze("span",{children:t.y.label||ET(t.y.quotients)})]}),s&&jn("div",{className:Jh.column,children:[Ze("span",{children:s.x}),Ze("span",{children:s.y})]}),jn("div",{className:Jh.column,children:[Ze("span",{children:Sae(n)}),Ze("span",{children:Cae(n)})]})]})]});Ti({set:e=>e,reset:()=>null},({onAction:e},t=null)=>(e("set",n=>t={id:n}),e("reset",()=>t=null),t),"[Shared state] currentEpisodeAtom");const kae=Ti({setCurrentEventId:e=>e,focusedGeometryAtom:LR},({onAction:e,onChange:t},n=null)=>(t("focusedGeometryAtom",i=>{const s=i==null?void 0:i.source;s&&s.type!=="event"&&s.type!=="episode"&&(n={id:null})}),e("setCurrentEventId",i=>n={id:i}),n),"[Shared state] currentEventAtom"),Aae=eR(!1,"scheduledAutoSelect");eR(!1,"scheduledAutoFocus");const Pae=wR(null,async(e,t)=>kR.get("/events/user_feeds",void 0,!0,{signal:t.signal}),"eventFeedsResource"),ZT=[Iae(no.defaultFeed)],Tae=Ti({eventFeedsResourceAtom:Pae},({get:e},t=ZT)=>{const{data:n,error:i,loading:s}=e("eventFeedsResourceAtom");return!s&&!i?n?(console.assert(n.map(l=>l.feed).includes(no.defaultFeed),"default feed not included in response"),n):[...ZT]:t},"[Shared state] eventFeeds");function Iae(e){return(!e||e!=="kontur-public")&&console.warn("WARNING! Default feed provided via config is incorrect or absent"),{feed:"kontur-public",name:Or.t("configs.Kontur_public_feed"),description:Or.t("configs.Kontur_public_feed_description"),default:!0}}Ti({setCurrentFeed:e=>e,setFeedForExistingEvent:e=>e,resetCurrentFeed:()=>null,eventFeedsAtom:Tae},({onAction:e,onChange:t,schedule:n,getUnlistedState:i},s={id:no.defaultFeed})=>(e("setCurrentFeed",l=>{(s==null?void 0:s.id)!==l&&(s={id:l})}),e("resetCurrentFeed",()=>{s&&(s=null)}),t("eventFeedsAtom",l=>{if(l&&l.length){const a=Oae(l,s==null?void 0:s.id);a!==void 0&&a!==(s==null?void 0:s.id)&&(s={id:a},i(kae)!==null&&n(_=>_(Aae.setTrue())))}}),s),"[Shared state] currentEventFeedAtom");function Oae(e,t){if(!t)return no.defaultFeed;const n=e==null?void 0:e.find(i=>i.feed===t);return n?n.feed:no.defaultFeed}Ti({setCurrentMapPosition:e=>e},({onAction:e,schedule:t},n=null)=>(e("setCurrentMapPosition",({lat:i,lng:s,zoom:l})=>{n===null&&(n={lat:i,lng:s,zoom:l}),(n.lat!==i||n.lng!==s||n.zoom!==l)&&(n={lat:i,lng:s,zoom:l})}),n),"[Shared state] currentMapPositionAtom");Ti({addControl:e=>e,removeControl:e=>e,toggleActiveState:e=>e,enable:e=>e,disable:e=>e,reset:()=>null,currentUserAtom:zE},({onAction:e,onChange:t,schedule:n,create:i},s={})=>(t("currentUserAtom",(l,a)=>{a!==void 0&&n(g=>{g(i("reset"))})}),e("addControl",l=>{s={...s,[l.id]:l}}),e("removeControl",l=>{delete s[l],s={...s}}),e("enable",l=>{var C;const a=s[l];(C=a.onChange)==null||C.call(a,!0);const g={...s[l],active:!0},_={...s,[l]:g},w=[];Object.entries(_).forEach(([A,I])=>{if(I.id!==l&&I.exclusiveGroup===a.exclusiveGroup&&I.active){const O=i("disable",I.id);w.push(O)}}),w.length&&n(A=>{A(w)}),s=_}),e("disable",l=>{var _;const a=s[l];(_=a==null?void 0:a.onChange)==null||_.call(a,!1);const g={...s[l],active:!1};s={...s,[l]:g}}),e("toggleActiveState",l=>{if(!s[l])return console.error(`[toolbarControlsAtom] Cannot toggle state for ${l} because it doesn't exist`);const g=i(s[l].active?"disable":"enable",l);n(_=>_(g))}),e("reset",()=>{Object.entries(s).forEach(([l,a])=>{var g;a.active&&((g=a.onChange)==null||g.call(a,!1))}),s={}}),s),"[Shared state] toolbarControlsAtom");const Lae=gZ,Mae=Ti({set:(e={...no.effectiveFeatures})=>e},({onAction:e},t={})=>{if(e("set",n=>{n?t=n:t={...no.effectiveFeatures}}),{}.VITE_FEATURES_CONFIG)try{const n=JSON.parse({}.VITE_FEATURES_CONFIG);n&&(t={...t,...n})}catch(n){console.error("Local features override error",n)}return t},"[Shared state] featureFlagsAtom"),Rae="rgba(90, 200, 127, 0.5)",Fae="rgba(228, 26, 28, 0.5)",Dae=["bad","good"],zae=["good","bad"];class Bae{constructor(){un(this,"add",(t,n)=>["+",t,n]);un(this,"sub",(t,n)=>["-",t,n]);un(this,"mult",(t,n)=>["*",t,n]);un(this,"div",(t,n)=>["/",t,n]);un(this,"log",t=>["ln",t]);un(this,"sqrt",t=>["sqrt",t])}}class Nae{constructor(){un(this,"add",(t,n)=>t+n);un(this,"sub",(t,n)=>t-n);un(this,"mult",(t,n)=>t*n);un(this,"div",(t,n)=>t/n);un(this,"log",t=>Math.log(t));un(this,"sqrt",t=>Math.sqrt(t))}}const XT=(e,t)=>e.length===t.length&&e.every((n,i)=>n===t[i]);class zR{constructor(t){un(this,"math");this.math=t}rate({num:t,den:n}){return this.math.div(t,n)}normalize({x:t,min:n,max:i}){return this.math.div(this.math.sub(t,n),this.math.sub(i,n))}transform({x:t,min:n,max:i,transformation:s}){switch(s){case"no":return{tX:t,tMin:n,tMax:i};case"square_root":return{tX:this.math.sqrt(t),tMin:this.math.sqrt(n),tMax:this.math.sqrt(i)};case"natural_logarithm":return{tX:this.math.log(this.math.add(t,1)),tMin:this.math.log(this.math.add(n,1)),tMax:this.math.log(this.math.add(i,1))}}}invert(t){return this.math.sub(1,t)}scale(t,n){return this.math.mult(t,n)}}const $ae=new zR(new Bae),Uae=new zR(new Nae),BR=(e,t)=>({axis:n,range:i,coefficient:s,sentiment:l,transformationFunction:a,normalization:g})=>{const[_,w]=n,[C,A]=i,I=XT(l,zae);I||console.assert(XT(l,Dae),"Not inverted equals default");const O=t({num:_,den:w}),D=e.rate(O),{tX:B,tMin:H,tMax:R}=e.transform({x:D,min:C,max:A,transformation:a}),U=g==="max-min"?e.normalize({x:B,min:H,max:R}):B,q=I?e.invert(U):U;return e.scale(q,s)},jae="stats",QT=BR($ae,e=>({num:["get",e.num],den:["get",e.den]}));function Vae(e){return mR(...e.map(({axis:t})=>TE(["/",id(t[0]),id(t[1])],0)))}function qae(e){return e.length===1?QT(e.at(0)):["/",["+",...e.map(QT)],RE(e,"coefficient")]}function Hae({colorsConfig:e,mcdaResult:t,absoluteMin:n,absoluteMax:i}){const{good:s=Rae,bad:l=Fae}=e.parameters;return{"fill-color":["let","mcdaResult",["to-number",t,-9999],["case",["all",[">=",["var","mcdaResult"],n],["<=",["var","mcdaResult"],i]],["interpolate-hcl",["linear"],["var","mcdaResult"],0,l,1,s],"transparent"]],"fill-opacity":1,"fill-antialias":!1}}function Gae({colorsConfig:e,mcdaResult:t,absoluteMax:n,absoluteMin:i}){return Object.entries(e.parameters).reduce((s,[l,a])=>(s[l]=Array.isArray(a)?["let","mcdaResult",["to-number",t,-9999],"absoluteMax",["to-number",n,-9999],"absoluteMin",["to-number",i,-9999],...a]:a,s),{})}function Wae(e){switch(e.colorsConfig.type){case"sentiments":return Hae(e);case"mapLibreExpression":return Gae(e)}}function Kae(e){const[t=0,n=1]=e.layers.reduce((l,a)=>{const g=a.normalization==="no"?a.range:[0,1];return l.length===0?g:(l[0]=Math.min(l[0],g[0]),l[1]=Math.min(l[1],g[1]),l)},[]),i=qae(e.layers);return{id:e.id,type:"fill",layout:{},filter:Vae(e.layers),paint:Wae({colorsConfig:e.colors,mcdaResult:i,absoluteMin:t,absoluteMax:n}),source:{type:"vector",tiles:[`${Kx(no.bivariateTilesRelativeUrl)}{z}/{x}/{y}.mvt?indicatorsClass=${no.bivariateTilesIndicatorsClass}`],maxzoom:8,minzoom:0},"source-layer":jae}}const Zae={mcda:e=>new Array(Kae(e))},Xae="_result_1vl4a_1",Qae="_tableBody_1vl4a_6",YT={result:Xae,tableBody:Qae},Yae=({layers:e,normalized:t,resultMCDA:n})=>jn("table",{children:[Ze("thead",{children:jn("tr",{children:[Ze("th",{children:"Layer"}),Ze("th",{children:"Range"}),Ze("th",{children:"Coefficient"}),Ze("th",{children:"Value"}),Ze("th",{children:"Normalized Value"})]})}),jn("tbody",{className:YT.tableBody,children:[e.map(({axis:i,range:s,coefficient:l})=>{const[a,g]=s,[_,w]=i;return jn("tr",{children:[jn("td",{children:[_," / ",w]}),jn("td",{children:[a," - ",g]}),Ze("td",{children:l}),Ze("td",{children:t[`${_}-${w}`].val.toFixed(2)}),Ze("td",{children:t[`${_}-${w}`].norm.toFixed(2)})]},`${_}-${w}`)}),Ze("tr",{children:Ze("td",{colSpan:5,children:jn("b",{className:YT.result,children:["Result: ",n.toFixed(2)]})})})]})]});function Jae(e,t){const n=BR(Uae,({num:i,den:s})=>{var l,a;return{num:(l=e.properties)==null?void 0:l[i],den:(a=e.properties)==null?void 0:a[s]}});return t.reduce((i,s)=>{var _,w;const[l,a]=s.axis,g=((_=e.properties)==null?void 0:_[l])/((w=e.properties)==null?void 0:w[a]);return i[`${l}-${a}`]={val:g,norm:n(s)},i},{})}function ese(e,t){const n=RE(Object.values(t),"norm"),i=RE(e,"coefficient");return n/i}function tse(e,t){const n=Jae(e,t),i=ese(t,n),s=document.createElement("div");return D3(s).render(Yae({layers:t,normalized:n,resultMCDA:i})),s}function JT(e,t){e.includes("{-y}")&&(t.scheme="tms")}const H1="stats",nse=0,rse=22,e6={hover:"hover",active:"active"},ise={type:"line",layout:{},paint:{"line-color":["case",["==",["feature-state",e6.active],!0],"rgba(5, 22, 38, 1)",["==",["feature-state",e6.hover],!0],"rgba(5, 22, 38, 0.4)","rgba(0, 0, 0, 0)"],"line-width":1}};function ose(e,t){if(e.type==="bivariate")return iae(e,t);throw new Error(`Unexpected legend type '${e.type}'`)}function ase(e){var n;const t=(n=e.layer.paint)==null?void 0:n["fill-color"];return t?t.a===0:!0}function BE(e){return!ase(e)}function sse(e){return fie(e.id)}function t6(e,t){return t.target.queryRenderedFeatures(t.point).filter(n=>n.source.includes(e)).filter(BE).filter(sse)}function lse(e){const t=new Set,n=new Set,i=(s,l)=>{e.map.setFeatureState({source:e.sourceId,id:s,sourceLayer:e.sourceLayer},l)};return{onClick:s=>{t.forEach(a=>{i(a,{active:!1})}),t.clear();const l=t6(e.sourceId,s);return l.length&&l.forEach(a=>{i(a.id,{active:!0}),t.add(a.id)}),!0},onMouseMove:s=>{n.forEach(a=>{i(a,{hover:!1})}),n.clear();const l=t6(e.sourceId,s);return l.length&&l.forEach(a=>{i(a.id,{hover:!0}),n.add(a.id)}),!0},onMouseLeave:s=>(n.forEach(l=>{i(l,{hover:!1})}),n.clear(),!0),reset:()=>{t.forEach(s=>{i(s,{active:!1})}),t.clear(),n.forEach(s=>{i(s,{hover:!1})}),n.clear()}}}const use=(e,t=!0)=>`rgba(${e.r*255*2},${e.g*255*2},${e.b*255*2}${t?","+e.a:""})`;function n6(e,t,n){const i=e[t],s=e[n];if(i==null||s==null)return"0.00";if(s!==0)return(i/s).toFixed(2)}class cse extends pae{constructor({id:n,layersOrderManager:i}){super();un(this,"id");un(this,"_layerId");un(this,"_sourceId");un(this,"_layersOrderManager");un(this,"_popup");un(this,"_listenersCleaningTasks",new Set);un(this,"cleanUpListeners",()=>{this._listenersCleaningTasks.forEach(n=>n()),this._listenersCleaningTasks.clear()});un(this,"_borderLayerId");un(this,"resetFeatureStates");un(this,"removeBivariatePopupClickHandler");un(this,"onMapZoomHandlers",new Set);un(this,"onMapZoom",n=>{this.cleanPopup()});this.id=n,this._layersOrderManager=i,this._sourceId=Moe+this.id}async addHoverAndActiveFeatureState(n,i){await MS(n);const s=this._sourceId,l=s+"_border";if(n.getLayer(l))return;const a={...ise,id:l,source:s,"source-layer":H1};LS(n,this._layersOrderManager).addAboveLayerWithSameType(a,this.id),this._borderLayerId=l;const{onClick:g,onMouseMove:_,onMouseLeave:w,reset:C}=lse({map:n,sourceId:s,sourceLayer:H1});this._listenersCleaningTasks.add(Uy("click",g,60)),this._listenersCleaningTasks.add(Uy("mousemove",_,60)),this._listenersCleaningTasks.add(Uy("mouseleave",w,60)),this.resetFeatureStates=C,this.onMapZoomHandlers.add(this.resetFeatureStates)}async mountBivariateLayer(n,i,s){const l={type:"vector",tiles:i.source.urls.map(a=>Kx(a)),minzoom:i.minZoom||nse,maxzoom:i.maxZoom||rse};if(JT(i.source.urls[0],l),await MS(n),n.getSource(this._sourceId)===void 0&&n.addSource(this._sourceId,l),s){const a=ose(s,H1),g=`${jT+this.id}`;if(n.getLayer(g))return;const _={...a,id:g,source:this._sourceId};LS(n,this._layersOrderManager).addAboveLayerWithSameType(_,this.id),this._layerId=_.id}else throw new Error(`[GenericLayer ${this.id}] Vector layers must have legend`)}addBivariatePopup(n,i){const s=a=>{var W;const g=a.target.queryRenderedFeatures(a.point).filter(ce=>ce.source.includes(this._sourceId));if(!g.length||!i||!g[0].geometry)return!0;const[_]=g;if(!BE(_)||!_.properties)return!0;const w=Mae.getState()[Lae.BIVARIATE_MANAGER],[C,A]=i.axis.x.quotient,[I,O]=i.axis.y.quotient,D=n6(_.properties,C,A),B=n6(_.properties,I,O);if(!D||!B)return!0;const H=(W=_.layer.paint)==null?void 0:W["fill-color"];if(!H)return!0;const R=use(H),U=lie(i.steps,"label"),q=lae(i.axis.x.steps,i.axis.y.steps,Number(D),Number(B)),Y=U.findIndex(ce=>ce.label===q),se=document.createElement("div");return D3(se).render(Ze(Eae,{cellLabel:U[Y].label,cellIndex:Y,axis:i.axis,values:w?{x:D,y:B}:void 0,hexagonColor:R})),this.cleanPopup(),this._popup=new Zx.Popup({closeOnClick:!0,className:KT,maxWidth:"none",focusAfterOpen:!1,offset:15}).setLngLat(a.lngLat).setDOMContent(se).addTo(n),this._popup.once("close",()=>{var ce;(ce=this.resetFeatureStates)==null||ce.call(this)}),!0};this.removeBivariatePopupClickHandler&&(this.removeBivariatePopupClickHandler(),this._listenersCleaningTasks.delete(this.removeBivariatePopupClickHandler));const l=Uy("click",s,60);this._listenersCleaningTasks.add(l),this.removeBivariatePopupClickHandler=l,this.onMapZoomHandlers.add(this.cleanPopup)}async mountMCDALayer(n,i,s){const l={type:"vector",tiles:i.source.urls.map(w=>Kx(w)),minzoom:i.minZoom||0,maxzoom:i.maxZoom||22};JT(i.source.urls[0],l),await MS(n),n.getSource(this._sourceId)===void 0&&n.addSource(this._sourceId,l);const a=`${jT+this.id}`;if(n.getLayer(a))return;const _={...Zae.mcda(s.config)[0],id:a,source:this._sourceId};LS(n,this._layersOrderManager).addAboveLayerWithSameType(_,this.id),this._layerId=a}addMCDAPopup(n,i){const s=a=>{const g=a.target.queryRenderedFeatures(a.point).filter(C=>C.source.includes(this._sourceId));if(!g.length||!g[0].geometry)return!0;const[_]=g;if(!BE(_))return!0;const w=tse(_,i.config.layers);return this.cleanPopup(),this._popup=new Zx.Popup({closeOnClick:!0,className:KT,maxWidth:"none",focusAfterOpen:!1,offset:15}).setLngLat(a.lngLat).setDOMContent(w).addTo(n),this._popup.once("close",()=>{var C;(C=this.resetFeatureStates)==null||C.call(this)}),!0};this.cleanUpListeners();const l=Uy("click",s,60);this._listenersCleaningTasks.add(l),this.onMapZoomHandlers.add(this.cleanPopup)}_updateMap(n,i,s,l,a){i!=null&&((a==null?void 0:a.type)==="mcda"?(this.mountMCDALayer(n,i,a),this.addMCDAPopup(n,a)):(this.mountBivariateLayer(n,i,s),this.addBivariatePopup(n,s)),this.addHoverAndActiveFeatureState(n,a),l||this.willHide({map:n}))}cleanPopup(){this._popup&&(this._popup.remove(),this._popup=null)}willSourceUpdate({map:n,state:i}){i.source&&this._updateMap(n,i.source,i.legend,i.isVisible,i.style)}willMount({map:n,state:i}){n.on("zoom",this.onMapZoom),i.source&&this._updateMap(n,i.source,i.legend,i.isVisible,i.style)}willUnMount({map:n}){var i;this._layerId&&n.getLayer(this._layerId)?(n.removeLayer(this._layerId),this._layerId=void 0):console.warn(`Can't remove layer with ID: ${this._layerId}. Layer does't exist in map`),this._borderLayerId&&n.getLayer(this._borderLayerId)?(n.removeLayer(this._borderLayerId),this._borderLayerId=void 0):console.warn(`Can't remove layer with ID: ${this._borderLayerId}. Layer does't exist in map`),this.cleanPopup(),n.getSource(this._sourceId)?n.removeSource(this._sourceId):console.warn(`Can't remove source with ID: ${this._sourceId}. Source does't exist in map`),this.cleanUpListeners(),n.off("zoom",this.onMapZoom),this.onMapZoomHandlers.clear(),(i=this.resetFeatureStates)==null||i.call(this)}willHide({map:n}){this._layerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0?(n.setLayoutProperty(this._layerId,"visibility","none"),this.cleanPopup()):console.warn(`Can't hide layer with ID: ${this._layerId}. Layer doesn't exist on the map`))}willUnhide({map:n}){this._layerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0?n.setLayoutProperty(this._layerId,"visibility","visible"):console.warn(`Cannot unhide layer with ID: ${this._layerId}. Layer doesn't exist on the map`))}willDestroy({map:n}){this._layerId===void 0||this._borderLayerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0||n.getLayer(this._borderLayerId)!==void 0)&&this.willUnMount({map:n})}}const RS=(e,t,n)=>{const i=e?e.findIndex(l=>l.selectedQuotient[0]===(n==null?void 0:n.xNumerator)&&l.selectedQuotient[1]===(n==null?void 0:n.xDenominator)):-1,s=t?t.findIndex(l=>l.selectedQuotient[0]===(n==null?void 0:n.yNumerator)&&l.selectedQuotient[1]===(n==null?void 0:n.yDenominator)):-1;return{x:i,y:s}},r6=(e,t,n)=>{const i=[...e];let s;const l=i.findIndex(({quotients:a})=>(s=a.find(g=>g[0]===t&&g[1]===n),s));return s&&(i[l]={...i[l],selectedQuotient:s}),i},fse={xNumerator:null,xDenominator:null,yNumerator:null,yDenominator:null,selectedCell:null,selectCellCallback:null},FS=(e,t,n,i)=>({xNumerator:e,xDenominator:t,yNumerator:n,yDenominator:i}),pse=Ti({enabledLayersAtom:cd,layersLegendsAtom:oA,calculateSelectedCell:()=>null,resetSelection:()=>null,setSelectCellCallback:e=>e,runPreselection:()=>null,setMatrixSelection:FS,presetMatrixSelection:e=>e,enableBivariateLayer:e=>e,disableBivariateLayer:()=>null},({onAction:e,schedule:t,getUnlistedState:n,create:i,onChange:s},l=fse)=>{e("calculateSelectedCell",()=>{const{xGroups:g,yGroups:_}=n(_1),w=RS(g,_,FS(l.xNumerator,l.xDenominator,l.yNumerator,l.yDenominator)),C=l.selectedCell;(!C||w.x!==C.x||w.y!==C.y)&&(l={...l,selectedCell:w})}),e("setSelectCellCallback",g=>{l={...l,selectCellCallback:g}});const a=()=>{const g=n(cd),_=n(zm);return[...g].map(C=>{var A;return(A=_.get(C))==null?void 0:A.getState()}).find(C=>{var A;return C&&C.isEnabled&&((A=C.legend)==null?void 0:A.type)==="bivariate"})};return e("resetSelection",()=>{l={...l,xNumerator:null,xDenominator:null,yNumerator:null,yDenominator:null,selectedCell:null},t(g=>{var _;(_=l==null?void 0:l.selectCellCallback)==null||_.call(l,-1,-1)})}),e("runPreselection",()=>{const g=a();if(!g||!(g!=null&&g.legend)){t(w=>{w(i("resetSelection"))});return}const _=g.legend.axis;if(_){const w=FS(_.x.quotient[0]||null,_.x.quotient[1]||null,_.y.quotient[0]||null,_.y.quotient[1]||null),{xGroups:C,yGroups:A}=n(_1),I=RS(C,A,w);if(I.x>=0&&I.y>=0){t(H=>{var R;H(i("presetMatrixSelection",w)),(R=l==null?void 0:l.selectCellCallback)==null||R.call(l,I.x,I.y)});return}let O=C,D=A;I.x===-1&&(O=r6(C,_.x.quotient[0],_.x.quotient[1])),I.y===-1&&(D=r6(A,_.y.quotient[0],_.y.quotient[1]));const B=RS(O,D,w);t(H=>{var R;B.x>=0&&B.y>=0?(H(_1.setNumerators(O,D)),H(i("presetMatrixSelection",w)),(R=l==null?void 0:l.selectCellCallback)==null||R.call(l,B.x,B.y)):H(i("resetSelection"))})}}),e("presetMatrixSelection",g=>{l={...l,...g},t(_=>{_(i("calculateSelectedCell"))})}),e("setMatrixSelection",g=>{l={...l,...g},t(R=>{R(i("calculateSelectedCell"))});const{xNumerator:_,xDenominator:w,yNumerator:C,yDenominator:A}=g;if(_===null||C===null)return;const{xGroups:I,yGroups:O}=n(_1),D=n(DR).data;if(D===null)return;const B=D.polygonStatistic.bivariateStatistic;if(!I||!O||!I.length||!O.length||!w||!A)return;const H=tae(_,w,C,A,B,H1);if(H){const[R,U]=H,q=oae("Bivariate Layer",R,_,w,C,A,B);if(q){const Y=U,se=Y.source,W=Y.id,ce=sae(_,w,C,A,B),xe=se?{id:W,maxZoom:se.maxzoom,minZoom:se.minzoom,source:{type:se.type,urls:se.tiles,tileSize:512,apiKey:""}}:void 0,[Me,$e]=GT([{id:W,legend:q,meta:ce,source:xe}]);n(__).has(W)||Me.push(...GT([{id:W,settings:{id:W,name:"Bivariate Layer",category:"overlay",group:"bivariate",ownedByUser:!0}}]).flat()),n(zm).has(W)||Me.push(i("disableBivariateLayer"),zm.register({id:W,renderer:new cse({id:W}),cleanUpActions:$e}),i("enableBivariateLayer",W)),Me.length&&t((Ye,ht={})=>{Ye(Me),ht.bivariateLayerAtomId=W})}}}),e("enableBivariateLayer",g=>{const _=n(zm);for(const[w,C]of Array.from(_))if(w===g){t(A=>{A(C.enable())});break}}),e("disableBivariateLayer",()=>{const g=n(zm);t((_,w={})=>{if(w.bivariateLayerAtomId){const C=g.get(w.bivariateLayerAtomId);C&&_(C.destroy())}})}),l},"bivariateMatrixSelection"),hse=mt.createContext(null),Xx=37,dse=.7,NR=Xx/Math.sqrt(2),$R=Xx/Math.sqrt(2);function mse(e,t,n=0){return mt.useMemo(()=>({display:"inline-grid","--cell-size":n===0?"initial":`${n}px`,gridTemplateRows:`repeat(${t}, ${n===0?"auto":n+"px"})`,gridTemplateColumns:`repeat(${e}, ${n===0?"auto":n+"px"})`}),[e,t,n])}function gse(e,t){const n=[];for(let i=0;i<e;i++){n[i]=[];for(let s=0;s<t;s++)n[i][s]={gridColumn:`${i} / ${i+1}`,gridRow:`${s} / ${s+1}`}}return n}function yse(e,t){return mt.useMemo(()=>{if(!e||!e.length||!t||!t.length)return 0;let i=b1(e[0].label);for(let l=1;l<e.length;l++){const a=b1(e[l].label),g=l*$R;a>i+g&&(i=a-g)}let s=b1(t[0].label);for(let l=1;l<t.length;l++){const a=b1(t[l].label),g=l*NR;a>s+g&&(s=a-g)}return i>s?i:s},[e,t])}const vse=document.createElement("canvas"),UR=vse.getContext("2d")||{};UR.font="normal 13px Roboto";const _se=30,xse=90;function b1(e){return UR.measureText(e).width+_se+xse}function i6(e,t,n){return t?{height:`${e+n*$R}px`}:{width:`${e+n*NR}px`}}const bse="_hoveredCell_kt59d_1",wse="_valueCell_kt59d_5",Sse="_rotatedCell_kt59d_19",Cse="_valueFill_kt59d_28",Ese="_disabled_kt59d_39",kse="_selectedCol_kt59d_43",Ase="_first_kt59d_48",Pse="_last_kt59d_52",Tse="_selectedRow_kt59d_56",af={hoveredCell:bse,valueCell:wse,rotatedCell:Sse,valueFill:Cse,disabled:Ese,selectedCol:kse,first:Ase,last:Pse,selectedRow:Tse},jR=mt.forwardRef(({value:e,x:t,y:n,className:i,onMouseOver:s,onMouseOut:l,onClick:a,disabled:g=!1,style:_,firstRow:w,firstCol:C,lastRow:A,lastCol:I},O)=>{const D=mt.useRef(null);let B=!1,H=!1,R=!1;const U=to(af.valueCell,i,g&&af.disabled);function q(){return`${U} ${to({[af.hoveredCell]:B,[af.selectedCol]:R,[af.selectedRow]:H,[af.first]:w&&R||C&&H,[af.last]:A&&R||I&&H})}`}return mt.useImperativeHandle(O,()=>({setHovered:()=>{D.current&&(B=!0,D.current.className=q())},resetHovered:()=>{D.current&&(B=!1,D.current.className=q())},setSelectedCol:()=>{D.current&&(R=!0,D.current.className=q())},resetSelectedCol:()=>{D.current&&(R=!1,D.current.className=q())},setSelectedRow:()=>{D.current&&(H=!0,D.current.className=q())},resetSelectedRow:()=>{D.current&&(H=!1,D.current.className=q())}})),Ze("div",{ref:D,className:U,style:_,onMouseOver:()=>{s(t,n)},onClick:Y=>{a(t,n,Y)},onMouseOut:l,children:!g&&e!==void 0?jn(Bb,{children:[Math.abs(e)>=.1&&Ze("div",{className:af.valueFill,style:{transform:`scale(${Math.abs(e)})`}}),Ze("span",{className:af.rotatedCell,children:e==null?void 0:e.toFixed(3)})]}):null})});jR.displayName="BivariateMatrixCell";const Ise="_legendSlot_i0ppr_6",Ose="_matrixContainer_i0ppr_14",Lse="_rotatedMatrix_i0ppr_21",o6={legendSlot:Ise,matrixContainer:Ose,rotatedMatrix:Lse},Mse="_horConnector_zzmmn_1",Rse="_vertConnector_zzmmn_7",Fse="_connectorBody_zzmmn_13",Dse="_hovered_zzmmn_28",zse="_selected_zzmmn_33",Lm={horConnector:Mse,vertConnector:Rse,connectorBody:Fse,hovered:Dse,selected:zse},NE=mt.forwardRef(({type:e,style:t},n)=>{const i=mt.useRef(null);let s=!1,l=!1;const a=Lm.connectorBody;function g(){return`${a} ${to({[Lm.hovered]:s,[Lm.selected]:l})}`}return mt.useImperativeHandle(n,()=>({setHovered:()=>{i.current&&(s=!0,i.current.className=g())},resetHovered:()=>{i.current&&(s=!1,i.current.className=g())},setSelectedCol:()=>{e==="vertical"&&i.current&&(l=!0,i.current.className=g())},resetSelectedCol:()=>{e==="vertical"&&i.current&&(l=!1,i.current.className=g())},setSelectedRow:()=>{e==="horizontal"&&i.current&&(l=!0,i.current.className=g())},resetSelectedRow:()=>{e==="horizontal"&&i.current&&(l=!1,i.current.className=g())}})),Ze("div",{className:e==="horizontal"?Lm.horConnector:Lm.vertConnector,style:t,children:Ze("div",{className:Lm.connectorBody,ref:i})})});NE.displayName="BivariateMatrixCellConnector";const Bse="_denominatorIcon_2n0u5_1",Nse={denominatorIcon:Bse},$se=()=>jn("svg",{width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jn("g",{clipPath:"url(#clip0_4777_147920)",children:[Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.59226 5.6715C4.57385 5.68982 4.55581 5.70848 4.53814 5.72748C4.27818 6.00698 4.09843 6.3591 4.03058 6.74363C4.30836 6.45062 4.50699 6.08183 4.59226 5.6715ZM10.3266 5.66248C10.4117 6.0808 10.6146 6.45633 10.8991 6.75295C10.8325 6.3648 10.6519 6.00926 10.3899 5.7275C10.3693 5.70537 10.3482 5.68368 10.3266 5.66248ZM10.927 7.12889C10.2881 7.58142 9.93487 8.39557 10.1356 9.23105L10.3024 9.92533L10.8712 7.55816C10.9059 7.41385 10.924 7.27018 10.927 7.12889ZM10.8167 12.0655L11.135 13.3906C11.2431 13.8401 11.6451 14.157 12.1074 14.157H12.8928C13.3551 14.157 13.7571 13.8401 13.8651 13.3906L14.8646 9.23105C15.0886 8.29843 14.6225 7.39238 13.8391 6.98624C14.3731 6.58123 14.718 5.93987 14.718 5.21796C14.718 3.99301 13.725 3 12.5001 3C12.1224 3 11.7669 3.09436 11.4556 3.26079C11.4174 3.85333 11.25 4.41104 10.9816 4.90556C11.0898 5.00751 11.1903 5.11726 11.2822 5.23375C11.2821 5.22849 11.2821 5.22323 11.2821 5.21796C11.2821 4.5453 11.8274 4 12.5001 4C13.1727 4 13.718 4.5453 13.718 5.21796C13.718 5.89062 13.1727 6.43592 12.5001 6.43592C12.2381 6.43592 11.9954 6.35321 11.7968 6.21249C11.9482 6.7042 11.975 7.24459 11.8435 7.79175C11.9191 7.77351 11.9983 7.7638 12.0803 7.7638H12.9199C13.5667 7.7638 14.0433 8.36854 13.8922 8.99743L12.8928 13.157L12.1074 13.157L11.3309 9.92533L10.8167 12.0655ZM4.10776 12.0505L3.78577 13.3906C3.67777 13.8401 3.27574 14.157 2.81344 14.157H2.02803C1.56574 14.157 1.16371 13.8401 1.0557 13.3906L0.0562696 9.23105C-0.167809 8.29845 0.298349 7.39241 1.08167 6.98626C0.547652 6.58125 0.202745 5.93988 0.202745 5.21796C0.202745 3.99301 1.19576 3 2.42071 3C2.80138 3 3.15965 3.0959 3.47268 3.26486C3.5114 3.85587 3.67872 4.41215 3.94647 4.90553C3.83535 5.01024 3.73236 5.12317 3.63841 5.24319C3.63858 5.2348 3.63867 5.22639 3.63867 5.21796C3.63867 4.5453 3.09337 4 2.42071 4C1.74804 4 1.20274 4.5453 1.20274 5.21796C1.20274 5.89062 1.74804 6.43592 2.42071 6.43592C2.68679 6.43592 2.93294 6.3506 3.1333 6.20582C2.98006 6.69932 2.95243 7.24213 3.0845 7.79178L3.08494 7.79363C3.00708 7.77418 2.92528 7.7638 2.84055 7.7638H2.00092C1.35413 7.7638 0.877492 8.36854 1.0286 8.99742L2.02803 13.157L2.81344 13.157L3.59353 9.91034L4.10776 12.0505ZM4.62199 9.91034L4.78521 9.23105C4.98518 8.39877 4.63543 7.58765 4.00112 7.13409C4.00445 7.2737 4.02258 7.41562 4.05683 7.55816L4.62199 9.91034Z",fill:"black"}),Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.46348 3C9.46348 4.10457 8.56805 5 7.46348 5C6.35891 5 5.46348 4.10457 5.46348 3C5.46348 1.89543 6.35891 1 7.46348 1C8.56805 1 9.46348 1.89543 9.46348 3ZM9.52339 5.18101C10.1023 4.63409 10.4635 3.85923 10.4635 3C10.4635 1.34315 9.12033 0 7.46348 0C5.80662 0 4.46348 1.34315 4.46348 3C4.46348 3.85922 4.8247 4.63408 5.40356 5.181C4.4317 5.4836 3.80296 6.50391 4.05627 7.55816L5.68205 14.3245C5.79005 14.774 6.19208 15.0909 6.65437 15.0909H8.27254C8.73483 15.0909 9.13686 14.774 9.24487 14.3245L10.8706 7.55816C11.1239 6.50392 10.4952 5.48363 9.52339 5.18101ZM6.00092 6.09091H8.92599C9.57278 6.09091 10.0494 6.69564 9.89832 7.32453L8.27254 14.0909H6.65437L5.0286 7.32453C4.87749 6.69564 5.35414 6.09091 6.00092 6.09091Z",fill:"black"})]}),Ze("defs",{children:Ze("clipPath",{id:"clip0_4777_147920",children:Ze("rect",{width:"24",height:"24",fill:"white"})})})]}),Use=()=>Ze("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Ze("path",{d:"M14.6012 12.1833C15.0887 12.6708 15.0887 13.4833 14.6012 13.9708L13.7346 14.8375C13.6262 14.9458 13.5179 15 13.3554 15C13.2471 15 13.0846 14.9458 12.9762 14.8375C12.7596 14.6208 12.7596 14.2958 12.9762 14.1333L13.4637 13.6458H3.33874C2.20124 13.6458 1.33457 12.725 1.33457 11.5875V1.4625L0.847072 1.95C0.630406 2.16667 0.305406 2.16667 0.142906 1.95C-0.0195943 1.73333 -0.073761 1.40833 0.142906 1.24583L1.00957 0.379167C1.49707 -0.108333 2.30957 -0.108333 2.79707 0.379167L3.66374 1.24583C3.88041 1.4625 3.88041 1.7875 3.66374 1.95C3.55541 2.05833 3.39291 2.05833 3.28457 2.05833C3.17624 2.05833 3.01374 2.00417 2.90541 1.89583L2.36374 1.35417V11.5875C2.36374 12.1292 2.79707 12.6167 3.39291 12.6167H13.5721L13.0304 12.075C12.8137 11.8583 12.8137 11.5333 13.0304 11.3708C13.2471 11.1542 13.5721 11.1542 13.7346 11.3708L14.6012 12.1833ZM13.4637 0H6.85541C6.58457 0 6.36791 0.216667 6.36791 0.4875C6.36791 0.758333 6.58457 0.975 6.85541 0.975H13.4096C13.6804 0.975 13.8971 1.19167 13.8971 1.4625V8.125C13.8971 8.39583 14.1137 8.6125 14.3846 8.6125C14.6554 8.6125 14.8721 8.39583 14.8721 8.125V1.51667C14.9804 0.704167 14.2762 0 13.4637 0ZM8.45541 9.72083C8.72624 9.72083 8.94291 9.50417 8.94291 9.23333V6.95833C8.94291 6.2 8.29291 5.55 7.53457 5.55C7.20957 5.55 6.88457 5.65833 6.66791 5.875C6.45124 5.65833 6.12624 5.55 5.80124 5.55C5.58457 5.55 5.42207 5.60417 5.25957 5.65833C5.15124 5.55 5.04291 5.49583 4.88041 5.49583C4.60957 5.49583 4.39291 5.7125 4.39291 5.98333V9.17917C4.39291 9.45 4.60957 9.66667 4.88041 9.66667C5.15124 9.66667 5.36791 9.45 5.36791 9.17917V6.95833C5.36791 6.74167 5.53041 6.57917 5.74707 6.57917C5.96374 6.57917 6.12624 6.74167 6.12624 6.95833V9.23333C6.12624 9.50417 6.34291 9.72083 6.61374 9.72083C6.88457 9.72083 7.10124 9.50417 7.10124 9.23333V6.95833C7.10124 6.74167 7.26374 6.57917 7.48041 6.57917C7.69707 6.57917 7.85957 6.74167 7.85957 6.95833V9.23333C7.91374 9.50417 8.18457 9.72083 8.45541 9.72083ZM10.7304 3.7625C10.0804 3.7625 9.53874 4.30417 9.53874 4.95417C9.53874 5.225 9.75541 5.44167 10.0262 5.44167C10.2971 5.44167 10.5137 5.225 10.5137 4.95417C10.5137 4.84583 10.5679 4.79167 10.6762 4.79167C10.7304 4.79167 10.8387 4.84583 10.8387 4.95417C10.8387 5.00833 10.7304 5.225 10.2429 5.76667C9.9179 6.09167 9.64707 6.3625 9.64707 6.3625C9.48457 6.525 9.4304 6.74167 9.53874 6.90417C9.59291 7.12083 9.80957 7.22917 10.0262 7.22917H11.3804C11.6512 7.22917 11.8679 7.0125 11.8679 6.74167C11.8679 6.47083 11.6512 6.25417 11.3804 6.25417H11.2721C11.7054 5.7125 11.9221 5.33333 11.9221 5.00833C11.9221 4.25 11.3804 3.7625 10.7304 3.7625Z",fill:"black"})}),jse=()=>Ze("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5938 15C14.112 15 14.5312 14.5807 14.5312 14.0625V7.5C14.5312 6.9818 14.112 6.5625 13.5938 6.5625H12.6562V0.9375C12.6562 0.419297 12.237 0 11.7188 0H5.15625C4.63805 0 4.21875 0.419297 4.21875 0.9375V2.8125H1.40625C0.888047 2.8125 0.46875 3.2318 0.46875 3.75V14.0625C0.46875 14.5807 0.888047 15 1.40625 15H13.5938ZM1.40625 3.75H4.21875V5.5H3.5C3.22386 5.5 3 5.72386 3 6C3 6.27614 3.22386 6.5 3.5 6.5H4.21875V8H3.5C3.22386 8 3 8.22386 3 8.5C3 8.77614 3.22386 9 3.5 9H4.21875V10.5H3.5C3.22386 10.5 3 10.7239 3 11C3 11.2761 3.22386 11.5 3.5 11.5H4.21875V14.0625H1.40625V3.75ZM5.15625 0.9375H11.7188V14.0625H8.90625V11.25H7.96875V14.0625H5.15625V0.9375ZM12.6562 7.5H13.5938V14.0625H12.6562V7.5ZM6 9.5C6 9.22386 6.22386 9 6.5 9H10.5C10.7761 9 11 9.22386 11 9.5C11 9.77614 10.7761 10 10.5 10H6.5C6.22386 10 6 9.77614 6 9.5ZM6.5 3C6.22386 3 6 3.22386 6 3.5C6 3.77614 6.22386 4 6.5 4H10.5C10.7761 4 11 3.77614 11 3.5C11 3.22386 10.7761 3 10.5 3H6.5ZM6 7.5C6 7.22386 6.22386 7 6.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H6.5C6.22386 8 6 7.77614 6 7.5ZM6.5 5C6.22386 5 6 5.22386 6 5.5C6 5.77614 6.22386 6 6.5 6H10.5C10.7761 6 11 5.77614 11 5.5C11 5.22386 10.7761 5 10.5 5H6.5Z",fill:"black"})}),Vse=()=>Ze("svg",{width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4949 0.505013C14.7683 0.77838 14.7683 1.2216 14.4949 1.49496L1.49493 14.495C1.22156 14.7683 0.778343 14.7683 0.504977 14.495C0.23161 14.2216 0.23161 13.7784 0.504977 13.505L13.505 0.505013C13.7783 0.231646 14.2216 0.231646 14.4949 0.505013ZM14.495 6.50503C14.7683 6.77839 14.7683 7.22161 14.495 7.49497L7.49497 14.495C7.22161 14.7683 6.77839 14.7683 6.50503 14.495C6.23166 14.2216 6.23166 13.7784 6.50503 13.505L13.505 6.50503C13.7784 6.23166 14.2216 6.23166 14.495 6.50503ZM8.49498 1.49497C8.76834 1.22161 8.76834 0.778392 8.49498 0.505025C8.22161 0.231658 7.77839 0.231658 7.50503 0.505025L0.505025 7.50503C0.231658 7.77839 0.231658 8.22161 0.505025 8.49498C0.778392 8.76834 1.22161 8.76834 1.49497 8.49498L8.49498 1.49497ZM3.49497 0.505025C3.76834 0.778392 3.76834 1.22161 3.49497 1.49497L1.49497 3.49497C1.22161 3.76834 0.778392 3.76834 0.505025 3.49497C0.231658 3.22161 0.231658 2.77839 0.505025 2.50503L2.50503 0.505025C2.77839 0.231658 3.22161 0.231658 3.49497 0.505025ZM14.495 12.495C14.7684 12.2216 14.7684 11.7784 14.495 11.505C14.2217 11.2317 13.7784 11.2317 13.5051 11.505L11.5051 13.505C11.2317 13.7784 11.2317 14.2216 11.5051 14.495C11.7784 14.7683 12.2217 14.7683 12.495 14.495L14.495 12.495Z",fill:"black"})}),qse=()=>Ze("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.60002 4C8.60002 3.75732 8.45384 3.53854 8.22963 3.44567C8.00543 3.3528 7.74736 3.40413 7.57576 3.57573L5.57576 5.57573C5.34145 5.81005 5.34145 6.18995 5.57576 6.42426C5.81007 6.65857 6.18997 6.65857 6.42429 6.42426L7.40002 5.44852V10.4H6.50002C6.16865 10.4 5.90002 10.6686 5.90002 11C5.90002 11.3314 6.16865 11.6 6.50002 11.6H9.50002C9.8314 11.6 10.1 11.3314 10.1 11C10.1 10.6686 9.8314 10.4 9.50002 10.4H8.60002V4Z",fill:"black"})}),Hse=()=>Ze("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.31257 14.9513C2.38285 14.9835 2.45927 15.0001 2.53658 15C2.66433 14.9997 2.78777 14.9537 2.88462 14.8704C2.98148 14.7871 3.04538 14.672 3.0648 14.5457L5.20765 0.617136C5.22508 0.478692 5.1878 0.338912 5.10375 0.227531C5.0197 0.116151 4.89551 0.0419601 4.75759 0.0207426C4.61968 -0.00047491 4.47893 0.0329551 4.36529 0.113921C4.25164 0.194887 4.17407 0.316999 4.14908 0.454279L2.00622 14.3828C1.99447 14.4593 1.9994 14.5373 2.02067 14.6116C2.04193 14.686 2.07903 14.7548 2.12942 14.8134C2.17981 14.8721 2.24229 14.9191 2.31257 14.9513ZM12.9007 14.8704C12.9975 14.9537 13.121 14.9997 13.2487 15C13.326 15.0001 13.4025 14.9835 13.4727 14.9513C13.543 14.9191 13.6055 14.8721 13.6559 14.8134C13.7063 14.7548 13.7434 14.686 13.7646 14.6116C13.7859 14.5373 13.7908 14.4593 13.7791 14.3828L11.6362 0.454279C11.6112 0.316999 11.5337 0.194887 11.42 0.113921C11.3064 0.0329551 11.1656 -0.00047491 11.0277 0.0207426C10.8898 0.0419601 10.7656 0.116151 10.6816 0.227531C10.5975 0.338912 10.5602 0.478692 10.5777 0.617136L12.7205 14.5457C12.7399 14.672 12.8038 14.7871 12.9007 14.8704ZM8.5 10.5C8.5 10.2239 8.27614 10 8 10C7.72386 10 7.5 10.2239 7.5 10.5V14.5C7.5 14.7761 7.72386 15 8 15C8.27614 15 8.5 14.7761 8.5 14.5V10.5ZM8 4C8.27614 4 8.5 4.22386 8.5 4.5V7.5C8.5 7.77614 8.27614 8 8 8C7.72386 8 7.5 7.77614 7.5 7.5V4.5C7.5 4.22386 7.72386 4 8 4ZM8.5 1C8.5 0.723858 8.27614 0.5 8 0.5C7.72386 0.5 7.5 0.723858 7.5 1V2C7.5 2.27614 7.72386 2.5 8 2.5C8.27614 2.5 8.5 2.27614 8.5 2V1Z",fill:"black"})}),Gse={population:Ze($se,{}),area_km2:Ze(Use,{}),total_building_count:Ze(jse,{}),populated_area_km2:Ze(Vse,{}),one:Ze(qse,{})},Wse={population:Or.t("bivariate.matrix.icon.population"),area_km2:Or.t("bivariate.matrix.icon.area_km2"),total_building_count:Or.t("bivariate.matrix.icon.total_building_count"),populated_area_km2:Or.t("bivariate.matrix.icon.populated_area_km2"),one:Or.t("bivariate.matrix.icon.one")},VR=({iconId:e})=>{const t=Gse[e]||Ze(Hse,{}),n=Wse[e]||Or.t("bivariate.matrix.icon.roads");return Ze(Ew,{tooltipText:n,children:({showTooltip:i,hideTooltip:s})=>Ze("span",{className:Nse.denominatorIcon,onPointerOver:i,onPointerLeave:s,children:t})})},Kse=e=>{let t=e;const n=new Set,i=s=>{t=s,n.forEach(l=>l())};return()=>{const[s,l]=mt.useState(t);return mt.useEffect(()=>{const a=()=>{l(t)};return n.add(a),a(),()=>{n.delete(a)}},[]),[s,i]}},Zse=Kse({headingId:""}),Xse="_denominators_1m5c6_1",Qse="_row_1m5c6_5",Yse="_column_1m5c6_9",Jse="_denominatorSelector_1m5c6_13",ele="_disabled_1m5c6_25",tle="_denominatorsContainer_1m5c6_43",nle="_quotientItem_1m5c6_79",rle="_selected_1m5c6_85",Xm={denominators:Xse,row:Qse,column:Yse,denominatorSelector:Jse,disabled:ele,denominatorsContainer:tle,quotientItem:nle,selected:rle},ile=({numeratorId:e,denominatorId:t,numeratorLabel:n,quality:i,onSelectQuotient:s,isSelected:l=!1})=>{const a=g=>{g.stopPropagation(),s(e,t)};return jn("div",{className:to(Xm.quotientItem,l&&Xm.selected),onClick:a,children:[Ze(VR,{iconId:t}),sessionStorage.getItem("BIVARIATE_QA_MOD")&&Ze("div",{className:"qualityLabel",children:i??"&nbsp;"}),Ze("div",{className:"quotientLabel",children:n})]})},ole=100/70,ale=5,qR=mt.memo(({id:e,quotients:t,selectedQuotient:n,onSelectQuotient:i,type:s,children:l})=>{const[a,g]=Zse(),_=O=>{if(O.stopPropagation(),a.headingId===e)g({headingId:"",width:0});else{const D=O.currentTarget.getBoundingClientRect(),B=O.currentTarget.parentElement.parentElement.getBoundingClientRect(),H=Math.ceil((D.left-B.left)*ole+ale);g({headingId:e,width:H})}},w=mt.useCallback((O,D)=>{g({headingId:""}),i(O,D)},[g,i]),[C,A]=mt.useMemo(()=>{const O=t.findIndex(({id:D})=>D[0]===n.id[0]&&D[1]===n.id[1]);return O>=0?[t[O],t.filter((D,B)=>B!==O)]:[null,t]},[t,n.id]),I=({id:O,label:D,quality:B},H)=>Ze(ile,{onSelectQuotient:w,quality:B,numeratorId:O[0],denominatorId:O[1],numeratorLabel:D,isSelected:H},JSON.stringify(O));return jn("div",{className:to({[Xm.denominators]:!0,[Xm.row]:s==="horizontal",[Xm.column]:s==="vertical"}),children:[Ze("div",{onClick:_,children:l}),a.headingId===e&&jn("div",{className:Xm.denominatorsContainer,style:s==="horizontal"?{left:-a.width,right:0}:{top:-a.width,bottom:0},children:[C&&I(C,!0),A.map(O=>I(O,!1))]})]})});qR.displayName="QuotientSelector";const sle="_axisRecord_1dbhd_8",lle="_container_1dbhd_13",ule="_column_1dbhd_34",cle="_row_1dbhd_43",fle="_selected_1dbhd_110",ple="_corner_1dbhd_142",hle="_hovered_1dbhd_146",dle="_verticalText_1dbhd_173",mle="_quotientsCountLabel_1dbhd_185",sf={axisRecord:sle,container:lle,column:ule,row:cle,selected:fle,corner:ple,hovered:hle,verticalText:dle,quotientsCountLabel:mle},gle=(e,t)=>({gridColumn:e?`${t+3} / ${t+4}`:"1",gridRow:e?"1":`${t+3} / ${t+4}`}),$E=mt.forwardRef(({index:e,type:t,className:n,selectedIndex:i=-1,headerCell:s,id:l,onCellHover:a,onCellClick:g,onSelectQuotient:_,baseDimension:w,calculateHeadingsStyle:C},A)=>{const I=()=>{a(e)},O=()=>{a(null)},D=xe=>{const Me=xe.target;Me.tagName==="svg"||Me.tagName==="path"||Me.className&&Me.className.indexOf&&Me.className.indexOf("denominator")!==-1||g(e,xe)},B=mt.useCallback((xe,Me)=>{_(e,xe,Me)},[_,e]),H=s.quotients.length>1?jn("div",{className:sf.quotientsCountLabel,children:["+",s.quotients.length-1," layers",Ze(rV,{})]}):null,R=mt.useRef(null);let U=!1,q=!1;const Y=t==="horizontal",se=t==="vertical",W=to({[n||""]:n,[sf.axisRecord]:!0,[sf.column]:se,[sf.row]:Y,[sf.verticalText]:se,horizontal:Y,vertical:se});function ce(){return`${W} ${to({[sf.hovered]:U,[sf.selected]:q})}`}return mt.useImperativeHandle(A,()=>({setHovered:()=>{R.current&&(U=!0,R.current.className=ce())},resetHovered:()=>{R.current&&(U=!1,R.current.className=ce())},setSelectedCol:()=>{se&&R.current&&(q=!0,R.current.className=ce())},resetSelectedCol:()=>{se&&R.current&&(q=!1,R.current.className=ce())},setSelectedRow:()=>{Y&&R.current&&(q=!0,R.current.className=ce())},resetSelectedRow:()=>{Y&&R.current&&(q=!1,R.current.className=ce())}})),Ze("div",{ref:R,onMouseEnter:I,onMouseOut:O,onClick:D,style:gle(t==="vertical",e),className:W,children:jn("div",{style:C(w,se,e),className:sf.container,children:[Ze("div",{className:sf.corner}),Ze(VR,{iconId:s.selectedQuotient.id[1]}),sessionStorage.getItem("BIVARIATE_QA_MOD")&&Ze("div",{className:"qualityLabel",children:s.quality?s.quality:"&nbsp;"}),s.label,H&&Ze(qR,{id:`quotient_${l}`,onSelectQuotient:B,selectedQuotient:s.selectedQuotient,quotients:s.quotients,type:t,children:H})]})})});$E.displayName="BivariateMatrixHeadingEntry";const yle="_axisCaptionRoot_1yhrg_1",vle="_axisCaptionAnchor_1yhrg_6",_le="_axisCaptionBody_1yhrg_10",xle="_tooltipHover_1yhrg_24",ble="_axisCaptionText_1yhrg_33",wle="_popupContent_1yhrg_47",Qm={axisCaptionRoot:yle,axisCaptionAnchor:vle,axisCaptionBody:_le,tooltipHover:xle,axisCaptionText:ble,popupContent:wle},Sle=jn("div",{className:Qm.axisCaptionText,children:[Ze("p",{children:Or.t("bivariate.matrix.caption.tooltip.p1")}),jn("ul",{children:[Ze("li",{children:Or.t("bivariate.matrix.caption.tooltip.li1")}),Ze("li",{children:Or.t("bivariate.matrix.caption.tooltip.li2")})]}),Ze("br",{}),Ze("b",{children:Or.t("bivariate.matrix.caption.tooltip.b")}),Ze("p",{children:Or.t("bivariate.matrix.caption.tooltip.p2")}),Ze("p",{children:Or.t("bivariate.matrix.caption.tooltip.p3")})]}),Cle={popupContent:Qm.popupContent},Ele=({baseDimension:e=0})=>{const t=mt.useRef(null);return mt.useLayoutEffect(()=>{var n;(n=t.current)==null||n.scrollIntoView({block:"center"})},[]),Ze("div",{className:Qm.axisCaptionRoot,ref:t,children:Ze("div",{className:Qm.axisCaptionAnchor,style:{left:-e},children:Ze(Ew,{hoverBehavior:!1,tooltipId:"axis_caption",tooltipText:Sle,popupClasses:Cle,children:({showTooltip:n})=>jn("div",{className:Qm.axisCaptionBody,children:[Ze(a6,{position:"left"}),Ze("br",{}),jn("div",{className:Qm.tooltipHover,onClick:n,children:[Ze("span",{children:Or.t("bivariate.matrix.caption.base_axis")}),Ze(oV,{}),Ze("span",{children:Or.t("bivariate.matrix.caption.annex_axis")})]}),Ze("br",{}),Ze(a6,{position:"right"})]})})})})},a6=({position:e="left"})=>jn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"22",viewBox:"0 0 6 22",fill:"none",transform:e==="left"?"rotate(90)":"rotate(-90)",children:[Ze("path",{d:"M3 1V20.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),Ze("path",{d:"M1 18L3 21.5L5 18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),w1=3,S1=3,kle=15,HR=({matrix:e,xHeadings:t,yHeadings:n,onSelectCell:i,selectedCell:s,cellSize:l=0,onSelectQuotient:a})=>{const g=mt.useRef(null),_=mt.useContext(hse),w=[],C=[];let A=-1,I=-1;const O=mt.useRef((s==null?void 0:s.x)??-1),D=mt.useRef((s==null?void 0:s.y)??-1),B=hE(pse.setSelectCellCallback),H=(Ne,ve,_e)=>{ve>=0&&(w[ve]||(w[ve]=[]),w[ve].push(Ne)),_e>=0&&(C[_e]||(C[_e]=[]),C[_e].push(Ne))},R=(Ne,ve)=>{if(A!==Ne&&(A=Ne,A!==-1)){const _e=C[A];_e&&_e.forEach(K=>{K==null||K.setHovered()})}if(I!==ve&&(I=ve,I!==-1)){const _e=w[I];_e&&_e.forEach(K=>{K==null||K.setHovered()})}},U=()=>{if(A!==-1){const Ne=C[A];Ne&&Ne.forEach(ve=>{ve==null||ve.resetHovered()}),A=-1}if(I!==-1){const Ne=w[I];Ne&&Ne.forEach(ve=>{ve==null||ve.resetHovered()}),I=-1}},q=Ne=>{U(),Ne&&R(Ne,I)},Y=Ne=>{U(),Ne&&R(A,Ne)},se=()=>{if(O.current!==-1){const Ne=C[O.current];Ne&&Ne.forEach(ve=>{ve==null||ve.resetSelectedCol()}),O.current=-1}if(D.current!==-1){const Ne=w[D.current];Ne&&Ne.forEach(ve=>{ve==null||ve.resetSelectedRow()}),D.current=-1}},W=(Ne,ve,_e)=>{se(),xe(Ne,ve),i(Ne,ve,_e)},ce=(Ne,ve)=>{se(),xe(Ne,ve)},xe=(Ne,ve)=>{if(Ne!==-1&&O.current!==Ne){O.current=Ne;const _e=C[O.current];_e&&_e.forEach(K=>{K==null||K.setSelectedCol()})}if(ve!==-1&&D.current!==ve){D.current=ve;const _e=w[D.current];_e&&_e.forEach(K=>{K==null||K.setSelectedRow()})}},Me=(Ne,ve)=>{W(Ne,D.current,ve)},$e=(Ne,ve)=>{W(O.current,Ne,ve)},Le=mt.useCallback((Ne,ve,_e,K)=>{a(!1,Ne,ve,_e,K)},[a]),Ge=mt.useCallback((Ne,ve,_e,K)=>{a(!0,Ne,ve,_e,K)},[a]),Ye=yse(t,n),ht=Math.sqrt(Math.pow(t.length*Xx,2)+Math.pow(n.length*Xx,2))*dse+kle;mt.useEffect(()=>{_==null||_.onMatrixPositionRecalculated(Ye,ht),g.current&&(g.current.style.visibility="visible")},[Ye]);const Lt=mse(t.length+1,n.length+1,l),Dt=mt.useMemo(()=>({width:ht,height:ht}),[ht]),qt=mt.useMemo(()=>gse(t.length+w1,n.length+S1),[t,n]);return mt.useEffect(()=>{B(ce.bind(void 0)),s&&(s.x!==-1||s.y!==-1)&&ce(s.x,s.y)},[e]),Ze("div",{ref:g,className:o6.matrixContainer,style:Dt,children:jn("div",{style:Lt,className:o6.rotatedMatrix,children:[e.map((Ne,ve)=>Ze(NE,{type:"horizontal",style:qt[-1+w1][ve+S1],ref:_e=>H(_e,ve,-1)},`${ve}_row_connector`)),e[0].map((Ne,ve)=>Ze(NE,{type:"vertical",style:qt[ve+w1][-1+S1],ref:_e=>H(_e,-1,ve)},`${ve}_col_connector`)),e.map((Ne,ve)=>Ne.map((_e,K)=>Ze(jR,{x:K,y:ve,onClick:W,onMouseOver:R,onMouseOut:U,style:qt[K+w1][ve+S1],ref:ae=>H(ae,ve,K),value:_e===null?void 0:_e,disabled:_e===null,firstRow:ve===0,firstCol:K===0,lastRow:ve===e.length-1,lastCol:K===Ne.length-1},`matrix_cell_${K}_${ve}`))),[...n].reverse().map((Ne,ve)=>Ze($E,{id:`hor_${n.length-1-ve}`,index:n.length-1-ve,type:"horizontal",selectedIndex:s==null?void 0:s.y,headerCell:Ne,onCellHover:Y,onCellClick:$e,onSelectQuotient:Ge,baseDimension:Ye,calculateHeadingsStyle:i6,ref:_e=>H(_e,n.length-1-ve,-1)},`hor_${n.length-1-ve}`)),Ze(Ele,{baseDimension:Ye}),t.map((Ne,ve)=>Ze($E,{id:`vert_${ve}`,index:ve,type:"vertical",selectedIndex:s==null?void 0:s.x,headerCell:Ne,onCellHover:q,onCellClick:Me,onSelectQuotient:Le,baseDimension:Ye,calculateHeadingsStyle:i6,ref:_e=>H(_e,-1,ve)},`vert_${ve}`))]})})};HR.displayName="BivariateMatrixControl";const Ale=mt.memo(HR,(e,t)=>e.matrix===t.matrix),Al={xGroups:[{parent:'["count","area_km2"]',quotients:[["count","area_km2"]],selectedQuotient:["count","area_km2"]},{parent:'["local_hours","area_km2"]',quotients:[["count","populated_area_km2"],["population_prev","populated_area_km2"],["gdp","populated_area_km2"],["population_prev","area_km2"],["gdp","area_km2"],["mandays_maxtemp_over_32c_1c","populated_area_km2"],["building_count","populated_area_km2"],["mandays_maxtemp_over_32c_1c","area_km2"],["osm_users","area_km2"],["total_hours","populated_area_km2"],["covid19_confirmed","populated_area_km2"],["covid19_confirmed","area_km2"],["osm_users","populated_area_km2"],["local_hours","area_km2"],["local_hours","populated_area_km2"]],selectedQuotient:["local_hours","area_km2"]},{parent:'["building_count","area_km2"]',quotients:[["building_count","area_km2"]],selectedQuotient:["building_count","area_km2"]},{parent:'["total_hours","area_km2"]',quotients:[["total_hours","area_km2"]],selectedQuotient:["total_hours","area_km2"]},{parent:'["highway_length","area_km2"]',quotients:[["total_road_length","area_km2"],["highway_length","area_km2"]],selectedQuotient:["highway_length","area_km2"]},{parent:'["view_count","area_km2"]',quotients:[["view_count","populated_area_km2"],["view_count_bf2402","populated_area_km2"],["view_count","area_km2"],["view_count_bf2402","area_km2"]],selectedQuotient:["view_count","area_km2"]},{parent:'["highway_length","populated_area_km2"]',quotients:[["highway_length","populated_area_km2"]],selectedQuotient:["highway_length","populated_area_km2"]},{parent:'["total_road_length","populated_area_km2"]',quotients:[["total_road_length","populated_area_km2"]],selectedQuotient:["total_road_length","populated_area_km2"]},{parent:'["man_distance_to_hospital","area_km2"]',quotients:[["man_distance_to_hospital","area_km2"]],selectedQuotient:["man_distance_to_hospital","area_km2"]},{parent:'["unknown_forest","total_building_count"]',quotients:[["total_road_length","total_building_count"],["unknown_forest","total_building_count"]],selectedQuotient:["unknown_forest","total_building_count"]},{parent:'["forest","total_building_count"]',quotients:[["highway_length","total_building_count"],["forest","total_building_count"]],selectedQuotient:["forest","total_building_count"]},{parent:'["man_distance_to_hospital","populated_area_km2"]',quotients:[["man_distance_to_hospital","populated_area_km2"]],selectedQuotient:["man_distance_to_hospital","populated_area_km2"]},{parent:'["man_distance_to_fire_brigade","area_km2"]',quotients:[["man_distance_to_fire_brigade","area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","area_km2"]},{parent:'["osm_users","population"]',quotients:[["osm_users","population"]],selectedQuotient:["osm_users","population"]},{parent:'["unknown_forest","population"]',quotients:[["total_road_length","population"],["unknown_forest","population"]],selectedQuotient:["unknown_forest","population"]},{parent:'["count","total_building_count"]',quotients:[["count","total_building_count"]],selectedQuotient:["count","total_building_count"]},{parent:'["highway_length","population"]',quotients:[["forest","population"],["highway_length","population"]],selectedQuotient:["highway_length","population"]},{parent:'["man_distance_to_fire_brigade","populated_area_km2"]',quotients:[["man_distance_to_fire_brigade","populated_area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","populated_area_km2"]}],yGroups:[{parent:'["local_hours","area_km2"]',quotients:[["population","populated_area_km2"],["total_building_count","populated_area_km2"],["count","populated_area_km2"],["population_prev","populated_area_km2"],["total_building_count","area_km2"],["gdp","populated_area_km2"],["mandays_maxtemp_over_32c_1c","populated_area_km2"],["population_prev","area_km2"],["gdp","area_km2"],["building_count","populated_area_km2"],["mandays_maxtemp_over_32c_1c","area_km2"],["total_hours","populated_area_km2"],["osm_users","area_km2"],["covid19_confirmed","populated_area_km2"],["osm_users","populated_area_km2"],["covid19_confirmed","area_km2"],["local_hours","populated_area_km2"],["local_hours","area_km2"]],selectedQuotient:["local_hours","area_km2"]},{parent:'["population","area_km2"]',quotients:[["population","area_km2"]],selectedQuotient:["population","area_km2"]},{parent:'["count","area_km2"]',quotients:[["count","area_km2"]],selectedQuotient:["count","area_km2"]},{parent:'["building_count","area_km2"]',quotients:[["building_count","area_km2"]],selectedQuotient:["building_count","area_km2"]},{parent:'["total_hours","area_km2"]',quotients:[["total_hours","area_km2"]],selectedQuotient:["total_hours","area_km2"]},{parent:'["highway_length","area_km2"]',quotients:[["total_road_length","area_km2"],["highway_length","area_km2"]],selectedQuotient:["highway_length","area_km2"]},{parent:'["view_count","area_km2"]',quotients:[["view_count","populated_area_km2"],["view_count_bf2402","populated_area_km2"],["view_count","area_km2"],["view_count_bf2402","area_km2"]],selectedQuotient:["view_count","area_km2"]},{parent:'["highway_length","populated_area_km2"]',quotients:[["highway_length","populated_area_km2"]],selectedQuotient:["highway_length","populated_area_km2"]},{parent:'["total_road_length","populated_area_km2"]',quotients:[["total_road_length","populated_area_km2"]],selectedQuotient:["total_road_length","populated_area_km2"]},{parent:'["man_distance_to_hospital","area_km2"]',quotients:[["man_distance_to_hospital","area_km2"]],selectedQuotient:["man_distance_to_hospital","area_km2"]},{parent:'["unknown_forest","total_building_count"]',quotients:[["total_road_length","total_building_count"],["unknown_forest","total_building_count"]],selectedQuotient:["unknown_forest","total_building_count"]},{parent:'["forest","total_building_count"]',quotients:[["highway_length","total_building_count"],["forest","total_building_count"]],selectedQuotient:["forest","total_building_count"]},{parent:'["populated_area_km2","area_km2"]',quotients:[["populated_area_km2","area_km2"]],selectedQuotient:["populated_area_km2","area_km2"]},{parent:'["count","population"]',quotients:[["populated_area_km2","population"],["count","population"]],selectedQuotient:["count","population"]},{parent:'["populated_area_km2","total_building_count"]',quotients:[["populated_area_km2","total_building_count"]],selectedQuotient:["populated_area_km2","total_building_count"]},{parent:'["man_distance_to_hospital","populated_area_km2"]',quotients:[["man_distance_to_hospital","populated_area_km2"]],selectedQuotient:["man_distance_to_hospital","populated_area_km2"]},{parent:'["man_distance_to_fire_brigade","area_km2"]',quotients:[["man_distance_to_fire_brigade","area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","area_km2"]},{parent:'["osm_users","population"]',quotients:[["osm_users","population"]],selectedQuotient:["osm_users","population"]},{parent:'["unknown_forest","population"]',quotients:[["total_road_length","population"],["unknown_forest","population"]],selectedQuotient:["unknown_forest","population"]},{parent:'["forest","population"]',quotients:[["highway_length","population"],["forest","population"]],selectedQuotient:["forest","population"]},{parent:'["avg_elevation","one"]',quotients:[["avg_elevation","one"]],selectedQuotient:["avg_elevation","one"]},{parent:'["man_distance_to_fire_brigade","populated_area_km2"]',quotients:[["man_distance_to_fire_brigade","populated_area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","populated_area_km2"]}],matrix:[[.6330778143702572,null,.5428354424212366,.8125028273732107,.41794744630059005,.49075709882519214,.26266841211785613,.17540431775688137,.2817357956135096,-.08277918866628682,-.07354014808858399,.19952042019781102,.2900699030570146,-.09959194444606909,-.05653224901990311,-.08121946780800145,-.06293349539553206,.210717984018573],[.7671266114613431,.4624540160877126,.7461271344307278,.6236796022803118,.4651837775930101,.6983788201180583,.3282268564011803,.23940172696613696,.6102526069773476,-.06854993994184201,-.06300652330464818,.5425853155901724,.5357120339754239,-.12569275885753226,-.05722122475056985,-.044124976285712575,-.07252302728830883,.46170009422253117],[null,.6330778143702572,.9448400352897224,.8088667700993942,.5478619819586914,.7272525499712613,.39403434829318645,.27693369264722456,.4212553882513244,-.09219840214177631,-.08214624778695,.3334796387999488,.3381396079397914,-.11599438338517783,-.0603311321070773,null,-.0709735871498622,.24799941442360907],[.9448400352897224,.5428354424212366,null,.676324490987385,.495437368648744,.6083458288157841,.3469868158515808,.2430950316469889,.4310608323815133,-.09512147612349764,-.08309756332167413,.3452068134908724,.33210650851954204,-.1245886065474142,-.059708735955503585,-.14339940649431673,-.07375589630648925,.24325119232100342],[.8088667700993942,.8125028273732107,.676324490987385,null,.5189347708683577,.6884534708417488,.33187782018548295,.2219184858913333,.35395740401150805,-.09412791983951108,-.0863908043684727,.26082399416277346,.349163057602413,-.0749918701328735,-.06355840786694379,-.06179508212619175,-.06748437844937322,.25841056419208985],[.5478619819586914,.41794744630059005,.495437368648744,.5189347708683577,null,.38324804690465736,null,.414339823397522,.3069414868687711,-.10644082342648567,-.10931575987231072,.2754560009958487,.2569523390521722,-.11051731563471724,-.08226769814606767,.000604231582566239,null,.20899371630213479],[.7272525499712613,.49075709882519214,.6083458288157841,.6884534708417488,.38324804690465736,null,.30947144087595235,.22699474527609945,.2830320630422097,-.04226615774405834,-.037742340113614686,.23762065170375052,.23266705566189747,-.05154149468310855,-.02870286844834339,-.031190214624625075,-.03390072345440923,.18581115270615528],[.39403434829318645,.26266841211785613,.3469868158515808,.33187782018548295,null,.30947144087595235,null,.9304780288243525,.13914319427120514,.3291875622555688,.3720654440390036,.1934927693146689,.10623582254983449,.0007285286560751833,.19378449287322094,.32680720759696696,null,.16809925893975913],[.27693369264722456,.17540431775688137,.2430950316469889,.2219184858913333,.414339823397522,.22699474527609945,.9304780288243525,null,.09020847847993732,.42400942691094484,.5064709774524677,.1712970613845418,.06714970974071707,.01180306783229655,.2255650150706005,.3599655140069753,.30252787549965515,.15970052255248204],[.4212553882513244,.2817357956135096,.4310608323815133,.35395740401150805,.3069414868687711,.2830320630422097,.13914319427120514,.09020847847993732,null,-.06649666693010343,-.06343156740380441,null,.6841527486069171,-.13779469419376966,-.0635847915251171,-.026485710953304663,-.08026301675299034,.6178257434320957],[-.09219840214177631,-.08277918866628682,-.09512147612349764,-.09412791983951108,-.10644082342648567,-.04226615774405834,.3291875622555688,.42400942691094484,-.06649666693010343,null,.7678796845524921,.012760506344240884,-.054701981754940544,.1344540319549378,null,.5631324180563558,.3071029030398512,.04014411156301263],[-.08214624778695,-.07354014808858399,-.08309756332167413,-.0863908043684727,-.10931575987231072,-.037742340113614686,.3720654440390036,.5064709774524677,-.06343156740380441,.7678796845524921,null,.014062866759102748,-.05210682697853124,.11091668928613378,.2990964999949313,.5385399665532266,.22651079092994508,.04521239572328026],[.33092297487284617,.306348164358225,.3238400065207823,.3693496848744186,.38871869483912574,.1581862969025989,-.3471496502086163,-.43374811025089965,.33796301073828167,-.3268410473725932,-.3386739643520862,.055679399245274847,.3020796910928048,-.04623557252911246,-.19287576889960628,-.23886314058329716,-.1732637367181755,.02241746611798094],[null,-.05985205635299918,-.07346388019658537,-.04156216899598115,-.06836488141749311,-.03935680545094748,.12058512533492027,.13212728757237097,-.11270465651638581,.15970627541493335,.13401194122424062,-.12384718246215928,-.10414752849189488,.7574388860132296,.48388350772788513,null,.6315662616124519,-.11571785360027256],[-.2290337466539601,-.1757661352019487,-.24760184223062584,-.18278999260309406,-.1710761141838468,-.09542438099888385,-.059267030345385996,-.013539781630611262,-.09643066932644401,.43854582251146346,.3609544353566733,-.07178405902927397,-.06341025046618942,.22096261180630974,.10541941385096928,.5599627595822098,.1278673522191922,-.032944279661146915],[.3334796387999488,.19952042019781102,.3452068134908724,.26082399416277346,.2754560009958487,.23762065170375052,.1934927693146689,.1712970613845418,null,.012760506344240884,.014062866759102748,null,.6310066640401927,-.1500265206387344,-.06689746899862688,.01986212506899432,-.08550943488376969,.676555546708353],[.3381396079397914,.2900699030570146,.33210650851954204,.349163057602413,.2569523390521722,.23266705566189747,.10623582254983449,.06714970974071707,.6841527486069171,-.054701981754940544,-.05210682697853124,.6310066640401927,null,-.12258332045801432,-.0567307219837807,-.022320716664225384,-.07178249009741255,null],[-.11599438338517783,-.09959194444606909,-.1245886065474142,-.0749918701328735,-.11051731563471724,-.05154149468310855,.0007285286560751833,.01180306783229655,-.13779469419376966,.1344540319549378,.11091668928613378,-.1500265206387344,-.12258332045801432,null,.4348018015155649,.1802672705079899,.5785565720280881,-.1349910962529299],[-.0603311321070773,-.05653224901990311,-.059708735955503585,-.06355840786694379,-.08226769814606767,-.02870286844834339,.19378449287322094,.2255650150706005,-.0635847915251171,null,.2990964999949313,-.06689746899862688,-.0567307219837807,.4348018015155649,null,.16176932292012,.7133807791437314,-.05999313994718329],[-.06778027180778882,-.06094700100554602,-.06749293269532497,-.07015551687145612,-.09380332086205506,-.03214432503025587,.20746554020517102,.2523547017592986,-.07210328538123267,.4203440217106889,null,-.0750002557187531,-.06409549706414985,.49720071299727603,.8986894662282207,.19577005850577103,.7147205376873481,-.06663105366067186],[-.1314723477716716,-.10888331650996384,-.12016811312503141,-.14500851581063834,-.14651760866997154,-.0894267074095959,-.10021629943072725,-.02053796018986287,-.08959271152178999,.07728964320941438,.11382059101409457,-.055901670004619375,-.07981810377749747,.12046075802517535,.07334344740483416,-.020568856117619418,.12080907584004444,-.040957057721220644],[.24799941442360907,.210717984018573,.24325119232100342,.25841056419208985,.20899371630213479,.18581115270615528,.16809925893975913,.15970052255248204,.6178257434320957,.04014411156301263,.04521239572328026,.676555546708353,null,-.1349910962529299,-.05999313994718329,.035960163104143954,-.07699941382657573,null]],indicators:[{name:"mhr_index",label:"Multi-hazard risk PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"mhe_index",label:"Multi-hazard exposure PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"coping_capacity_index",label:"Coping Capacity PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["important","bad"],["good"]]},{name:"resilience_index",label:"Resilience PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["important","bad"],["good"]]},{name:"vulnerability_index",label:"Vulnerability PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"count",label:"OSM Objects",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"count_6_months",label:"OSM Objects (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"view_count",label:"OSM Map Views",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good","important"]]},{name:"avgmax_ts",label:"OSM Last Edit Date (avg)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good"]]},{name:"max_ts",label:"OSM Last Edit Date (max)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good"]]},{name:"min_ts",label:"OSM First Edit Date (min)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["neutral"]]},{name:"osm_users",label:"OSM Mappers Edited Here",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"building_count",label:"OSM Buildings",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"building_count_6_months",label:"OSM Buildings (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"highway_length",label:"OSM Road Length",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"highway_length_6_months",label:"OSM Road Length (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"local_hours",label:"OSM Mapping Hours by Local Mappers",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"total_hours",label:"OSM Mapping Hours by All Mappers",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"pop_disability_total",label:"Population with a disability",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"forest",label:"Forest Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_not_well_eng_speak",label:"Population with a difficulty speaking English",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["good"],["important","bad"]]},{name:"evergreen_needle_leaved_forest",label:"Evergreen Needle-leaved Forest Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_under_5_total",label:"Population under age of 5",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"shrubs",label:"Shrubland Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_over_65_total",label:"Population over age of 65",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"herbage",label:"Herbaceous Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"poverty_families_total",label:"Families living below poverty line",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant, good"],["important"]]},{name:"unknown_forest",label:"Unknown Forest Type Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"volcanos_count",label:"Number of volcanos",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"covid19_vaccines",label:"COVID19 Vaccine Acceptance",copyrights:[" Data from Delphi COVIDcast, covidcast.cmu.edu"],direction:[["bad"],["neutral"]]},{name:"covid19_confirmed",label:"COVID19 Confirmed Cases",copyrights:[" Data from JHU CSSE COVID-19 Dataset"],direction:[["good"],["bad"]]},{name:"avg_slope",label:"Average slope",copyrights:[" Data from General Bathymatric Chart of the Oceans, www.gebco.net"],direction:[["good","unimportant"],["bad","important"]]},{name:"avg_elevation",label:"Average elevation",copyrights:[" Data from General Bathymatric Chart of the Oceans, www.gebco.net"],direction:[["good","unimportant"],["bad","important"]]},{name:"gdp",label:"Gross Domestic Product",copyrights:[" Kontur https://kontur.io/"," 2019 The World Bank Group, CC-BY 4.0","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, Myroslava Lesiv, Nandin-Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","@ OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"population_prev",label:"Population (previous version)",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"wildfires",label:"Wildfire Days Per Year",copyrights:[" NRT VIIRS 375 m Active Fire product VJ114IMGTDL_NRT. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/VIIRS/VJ114IMGT_NRT.002","NRT VIIRS 375 m Active Fire product VNP14IMGT. Available on-line [https://earthdata.nasa.gov/firms]. doi:10.5067/FIRMS/VIIRS/VNP14IMGT_NRT.002","MODIS Collection 6 NRT Hotspot / Active Fire Detections MCD14DL. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/MODIS/MCD14DL.NRT.006","MODIS Collection 6 NRT Hotspot / Active Fire Detections MCD14ML. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/MODIS/MCD14ML"],direction:[["good","unimportant"],["bad","important"]]},{name:"avg_ndvi",label:"Average NDVI, JUN 2019",copyrights:[" Data from Sentinel-2 L2A 120m Mosaic, CC-BY 4.0, https://forum.sentinel-hub.com/c/aws-sentinel"],direction:[["bad"],["good"]]},{name:"industrial_area",label:"OSM industrial area",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"pop_without_car",label:"Population without a car",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["neutral"],["important"]]},{name:"area_km2",label:"Area",copyrights:["Concept of areas  Brahmagupta, Ren Descartes"],direction:[["neutral"],["neutral"]]},{name:"days_maxtemp_over_32c_1c",label:"Days above 32C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxtemp_over_32c_2c",label:"Days above 32C, potential scenario (2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_mintemp_above_25c_1c",label:"Nights above 25C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_mintemp_above_25c_2c",label:"Nights above 25C, potential scenario(2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxwetbulb_over_32c_1c",label:"Days above 32C wet-bulb, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxwetbulb_over_32c_2c",label:"Days above 32C wet-bulb, potential scenario(2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"mandays_maxtemp_over_32c_1c",label:"Man-days above 32C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"man_distance_to_fire_brigade",label:"Man-distance to fire brigade",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["bad"]]},{name:"man_distance_to_hospital",label:"Man-distance to hospitals",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["bad"]]},{name:"total_road_length",label:"Total Roads length",copyrights:["2019 Facebook, Inc. and its affiliates https://github.com/facebookmicrosites/Open-Mapping-At-Facebook/blob/main/LICENSE.md"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"foursquare_places_count",label:"Foursquare Japan places count",copyrights:["Foursquare Labs Inc","Sample data"],direction:[["unimportant"],["important"]]},{name:"foursquare_visits_count",label:"Foursquare Japan visits count",copyrights:["Foursquare Labs Inc","Sample data"],direction:[["unimportant"],["important"]]},{name:"one",label:"1",copyrights:["Numbers  Muammad ibn Ms al-Khwrizm"],direction:[["neutral"],["neutral"]]},{name:"populated_area_km2",label:"Populated area",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"population",label:"Population",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"total_building_count",label:"Total Buildings Estimate",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"view_count_bf2402",label:"OSM Map Views 30 days before 24.02.2022",copyrights:[" Kontur"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good","important"]]}]},Ple="_axisMatrix_caw7e_1",Tle={axisMatrix:Ple},Ile=(e,t)=>{var n,i;return{label:((n=t.find(s=>s.name===e.selectedQuotient[0]))==null?void 0:n.label)||"",selectedQuotient:{id:e.selectedQuotient,label:(i=t.find(s=>s.name===e.selectedQuotient[1]))==null?void 0:i.label},quality:"1",quotients:e.quotients.map(s=>{var l;return{id:s,label:(l=t.find(a=>a.name===s[0]))==null?void 0:l.label,quality:"1"}})}};function Ole(){const e=mt.useMemo(()=>{if(!Al.indicators||!Al.xGroups||!Al.xGroups.length||!Al.yGroups||!Al.yGroups.length)return null;const l=a=>Ile(a,Al==null?void 0:Al.indicators);return{x:Al.xGroups.map(l),y:Al.yGroups.map(l)}},[Al]),[t,n]=mt.useState(null),i=mt.useCallback((l,a,g)=>{console.log("onSelectCellHandler",l,a,g),n({x:l,y:a})},[]),s=mt.useCallback((l,a,g,_)=>{console.log("onSelectQuotient",l,a,g,_)},[]);return Ze("div",{className:Tle.axisMatrix,children:jn(oM,{children:[Ze(Ale,{matrix:Al.matrix,xHeadings:e==null?void 0:e.x,yHeadings:e==null?void 0:e.y,onSelectCell:i,selectedCell:t,onSelectQuotient:s}),Ze(aR,{})]})})}const GR=document.createElement("template");GR.innerHTML=`
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
:host svg {
  z-index: 99;
  position: fixed;
  border: 0px;
  top: 0px;
}
</style>
<svg width="54" height="54" viewBox="0 0 250 250" aria-hidden="true">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;class Lle extends HTMLElement{constructor(){super(),this.right="0",this.shadow=this.attachShadow({mode:"open"}),this.shadow.appendChild(this.ownerDocument.importNode(GR.content,!0)),this.update()}static get observedAttributes(){return["style","z-index","target","height","width","href","color","fill","position","top","left","right","bottom","transform"]}setAttr(t,n){const i=this.shadow.querySelector("svg");/(href)/.test(t.toLocaleLowerCase())?i.lastElementChild.setAttribute("xlink:href",n):/(color|fill)/.test(t.toLocaleLowerCase())?i.firstElementChild.style[t]=n:/(z-index|position|top|left|right|bottom|transform)/.test(t.toLocaleLowerCase())?i.style[t]=n:i.setAttribute(t,n)}update(){[...this.getAttributeNames(),"right"].forEach(t=>{const n=this.getAttribute(t)||this[t]||"";this.setAttr(t,n)})}attributeChangedCallback(t,n,i){n!==i&&this.setAttr(t,i)}}customElements.define("github-corners",Lle);var Mle=["size","fixed","bottom","zIndex","className","style","bgColor","color","position"];function Rle(e){var{size:t=80,fixed:n=!1,bottom:i,zIndex:s,style:l,bgColor:a="#151513",color:g="#fff",position:_="right"}=e,w=Ad(e,Mle),C=_==="left"?{left:0,right:"initial",transform:"scale(-1, 1)"}:{right:0,left:"initial",transform:"scale(1, 1)"};return i?(C.bottom=0,C.top="initial",C.transform=_==="left"?"scale(-1, -1)":"scale(1, -1)"):(C.bottom="initial",C.top=0),Ze("github-corners",Ca({target:"__blank",width:t,height:t,href:e.href,position:n?"fixed":"absolute","z-index":s,style:l,fill:a,color:g},C,w))}const Fle=({children:e})=>jn(Bb,{children:[e,Ze(Rle,{size:40,href:"https://github.com/konturio/disaster-ninja-fe"})]}),Dle=e=>e.raw[0],zle=Dle`
  .cosmos-ui-kit-decorator {
    padding: 1em;
    display: flex;
    gap: 2em;
    flex-flow: row nowrap;
    align-items: center;
    justify-content: center;
    min-height: 100%;
    box-sizing: border-box;
    background-color: #fff;
    --transp-clr: #f5f5f5;
    background-image: linear-gradient(
        45deg,
        var(--transp-clr) 25%,
        transparent 25%,
        transparent 75%,
        var(--transp-clr) 75%
      ),
      linear-gradient(
        45deg,
        var(--transp-clr) 25%,
        transparent 25%,
        transparent 75%,
        var(--transp-clr) 75%
      );
    background-size: 24px 24px;
    background-position: 0 0, 12px 12px;
  }
`;function Ble({children:e}){return jn(Bb,{children:[Ze("style",{dangerouslySetInnerHTML:{__html:zle}}),Ze("div",{className:"cosmos-ui-kit-decorator",children:e})]})}const Nle={port:5e3},$le={"src/components/BivariateLegend/BivariateLegend.fixture.tsx":{module:{default:Cie}},"src/features/bivariate_color_manager/components/MiniLegend/MiniLegend.fixture.tsx":{module:{default:Lie}},"src/features/bivariate_manager/fixtures/BivariateGreetings.fixture.tsx":{module:{default:Uie}},"src/features/bivariate_manager/fixtures/BivariateMatrixControl.fixture.tsx":{module:{default:Ole}}},Ule={"cosmos.decorator.tsx":Fle,"src/cosmos.decorator.tsx":Ble};DS.mountDomRenderer({rendererConfig:Nle,decorators:Ule,fixtures:$le});console.log("Disaster Ninja",qj);export{Ze as a,jn as j,mt as r};
