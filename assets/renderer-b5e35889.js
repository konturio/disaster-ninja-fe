var QR=Object.defineProperty;var eD=(e,t,n)=>t in e?QR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var an=(e,t,n)=>(eD(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ic(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tD(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var wP={exports:{}},Jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_=Symbol.for("react.element"),nD=Symbol.for("react.portal"),rD=Symbol.for("react.fragment"),iD=Symbol.for("react.strict_mode"),oD=Symbol.for("react.profiler"),aD=Symbol.for("react.provider"),sD=Symbol.for("react.context"),lD=Symbol.for("react.forward_ref"),uD=Symbol.for("react.suspense"),cD=Symbol.for("react.memo"),hD=Symbol.for("react.lazy"),A3=Symbol.iterator;function fD(e){return e===null||typeof e!="object"?null:(e=A3&&e[A3]||e["@@iterator"],typeof e=="function"?e:null)}var SP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CP=Object.assign,EP={};function rm(e,t,n){this.props=e,this.context=t,this.refs=EP,this.updater=n||SP}rm.prototype.isReactComponent={};rm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kP(){}kP.prototype=rm.prototype;function HC(e,t,n){this.props=e,this.context=t,this.refs=EP,this.updater=n||SP}var WC=HC.prototype=new kP;WC.constructor=HC;CP(WC,rm.prototype);WC.isPureReactComponent=!0;var T3=Array.isArray,AP=Object.prototype.hasOwnProperty,ZC={current:null},TP={key:!0,ref:!0,__self:!0,__source:!0};function PP(e,t,n){var r,a={},c=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(c=""+t.key),t)AP.call(t,r)&&!TP.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var x=Array(l),b=0;b<l;b++)x[b]=arguments[b+2];a.children=x}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:t_,type:e,key:c,ref:d,props:a,_owner:ZC.current}}function dD(e,t){return{$$typeof:t_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KC(e){return typeof e=="object"&&e!==null&&e.$$typeof===t_}function pD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var P3=/\/+/g;function Iw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pD(""+e.key):t.toString(36)}function zv(e,t,n,r,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case t_:case nD:d=!0}}if(d)return d=e,a=a(d),e=r===""?"."+Iw(d,0):r,T3(a)?(n="",e!=null&&(n=e.replace(P3,"$&/")+"/"),zv(a,t,n,"",function(b){return b})):a!=null&&(KC(a)&&(a=dD(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P3,"$&/")+"/")+e)),t.push(a)),1;if(d=0,r=r===""?".":r+":",T3(e))for(var l=0;l<e.length;l++){c=e[l];var x=r+Iw(c,l);d+=zv(c,t,n,x,a)}else if(x=fD(e),typeof x=="function")for(e=x.call(e),l=0;!(c=e.next()).done;)c=c.value,x=r+Iw(c,l++),d+=zv(c,t,n,x,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function q0(e,t,n){if(e==null)return e;var r=[],a=0;return zv(e,r,"","",function(c){return t.call(n,c,a++)}),r}function mD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ca={current:null},Bv={transition:null},gD={ReactCurrentDispatcher:ca,ReactCurrentBatchConfig:Bv,ReactCurrentOwner:ZC};Jn.Children={map:q0,forEach:function(e,t,n){q0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return q0(e,function(){t++}),t},toArray:function(e){return q0(e,function(t){return t})||[]},only:function(e){if(!KC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Jn.Component=rm;Jn.Fragment=rD;Jn.Profiler=oD;Jn.PureComponent=HC;Jn.StrictMode=iD;Jn.Suspense=uD;Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gD;Jn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=CP({},e.props),a=e.key,c=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,d=ZC.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(x in t)AP.call(t,x)&&!TP.hasOwnProperty(x)&&(r[x]=t[x]===void 0&&l!==void 0?l[x]:t[x])}var x=arguments.length-2;if(x===1)r.children=n;else if(1<x){l=Array(x);for(var b=0;b<x;b++)l[b]=arguments[b+2];r.children=l}return{$$typeof:t_,type:e.type,key:a,ref:c,props:r,_owner:d}};Jn.createContext=function(e){return e={$$typeof:sD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aD,_context:e},e.Consumer=e};Jn.createElement=PP;Jn.createFactory=function(e){var t=PP.bind(null,e);return t.type=e,t};Jn.createRef=function(){return{current:null}};Jn.forwardRef=function(e){return{$$typeof:lD,render:e}};Jn.isValidElement=KC;Jn.lazy=function(e){return{$$typeof:hD,_payload:{_status:-1,_result:e},_init:mD}};Jn.memo=function(e,t){return{$$typeof:cD,type:e,compare:t===void 0?null:t}};Jn.startTransition=function(e){var t=Bv.transition;Bv.transition={};try{e()}finally{Bv.transition=t}};Jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jn.useCallback=function(e,t){return ca.current.useCallback(e,t)};Jn.useContext=function(e){return ca.current.useContext(e)};Jn.useDebugValue=function(){};Jn.useDeferredValue=function(e){return ca.current.useDeferredValue(e)};Jn.useEffect=function(e,t){return ca.current.useEffect(e,t)};Jn.useId=function(){return ca.current.useId()};Jn.useImperativeHandle=function(e,t,n){return ca.current.useImperativeHandle(e,t,n)};Jn.useInsertionEffect=function(e,t){return ca.current.useInsertionEffect(e,t)};Jn.useLayoutEffect=function(e,t){return ca.current.useLayoutEffect(e,t)};Jn.useMemo=function(e,t){return ca.current.useMemo(e,t)};Jn.useReducer=function(e,t,n){return ca.current.useReducer(e,t,n)};Jn.useRef=function(e){return ca.current.useRef(e)};Jn.useState=function(e){return ca.current.useState(e)};Jn.useSyncExternalStore=function(e,t,n){return ca.current.useSyncExternalStore(e,t,n)};Jn.useTransition=function(){return ca.current.useTransition()};Jn.version="18.2.0";wP.exports=Jn;var pt=wP.exports;const sn=ic(pt);var yD={exports:{}};(function(e){var t=function(n){var r=Object.prototype,a=r.hasOwnProperty,c=Object.defineProperty||function(_e,we,X){_e[we]=X.value},d,l=typeof Symbol=="function"?Symbol:{},x=l.iterator||"@@iterator",b=l.asyncIterator||"@@asyncIterator",E=l.toStringTag||"@@toStringTag";function A(_e,we,X){return Object.defineProperty(_e,we,{value:X,enumerable:!0,configurable:!0,writable:!0}),_e[we]}try{A({},"")}catch{A=function(we,X,oe){return we[X]=oe}}function L(_e,we,X,oe){var lt=we&&we.prototype instanceof G?we:G,mt=Object.create(lt.prototype),Gt=new zt(oe||[]);return c(mt,"_invoke",{value:Ge(_e,X,Gt)}),mt}n.wrap=L;function F(_e,we,X){try{return{type:"normal",arg:_e.call(we,X)}}catch(oe){return{type:"throw",arg:oe}}}var $="suspendedStart",N="suspendedYield",Z="executing",R="completed",q={};function G(){}function ee(){}function ae(){}var K={};A(K,x,function(){return this});var le=Object.getPrototypeOf,xe=le&&le(le(Vt([])));xe&&xe!==r&&a.call(xe,x)&&(K=xe);var Le=ae.prototype=G.prototype=Object.create(K);ee.prototype=ae,c(Le,"constructor",{value:ae,configurable:!0}),c(ae,"constructor",{value:ee,configurable:!0}),ee.displayName=A(ae,E,"GeneratorFunction");function Oe(_e){["next","throw","return"].forEach(function(we){A(_e,we,function(X){return this._invoke(we,X)})})}n.isGeneratorFunction=function(_e){var we=typeof _e=="function"&&_e.constructor;return we?we===ee||(we.displayName||we.name)==="GeneratorFunction":!1},n.mark=function(_e){return Object.setPrototypeOf?Object.setPrototypeOf(_e,ae):(_e.__proto__=ae,A(_e,E,"GeneratorFunction")),_e.prototype=Object.create(Le),_e},n.awrap=function(_e){return{__await:_e}};function Fe(_e,we){function X(mt,Gt,Dt,Qt){var un=F(_e[mt],_e,Gt);if(un.type==="throw")Qt(un.arg);else{var Xn=un.arg,Qn=Xn.value;return Qn&&typeof Qn=="object"&&a.call(Qn,"__await")?we.resolve(Qn.__await).then(function(Bn){X("next",Bn,Dt,Qt)},function(Bn){X("throw",Bn,Dt,Qt)}):we.resolve(Qn).then(function(Bn){Xn.value=Bn,Dt(Xn)},function(Bn){return X("throw",Bn,Dt,Qt)})}}var oe;function lt(mt,Gt){function Dt(){return new we(function(Qt,un){X(mt,Gt,Qt,un)})}return oe=oe?oe.then(Dt,Dt):Dt()}c(this,"_invoke",{value:lt})}Oe(Fe.prototype),A(Fe.prototype,b,function(){return this}),n.AsyncIterator=Fe,n.async=function(_e,we,X,oe,lt){lt===void 0&&(lt=Promise);var mt=new Fe(L(_e,we,X,oe),lt);return n.isGeneratorFunction(we)?mt:mt.next().then(function(Gt){return Gt.done?Gt.value:mt.next()})};function Ge(_e,we,X){var oe=$;return function(mt,Gt){if(oe===Z)throw new Error("Generator is already running");if(oe===R){if(mt==="throw")throw Gt;return Ve()}for(X.method=mt,X.arg=Gt;;){var Dt=X.delegate;if(Dt){var Qt=tt(Dt,X);if(Qt){if(Qt===q)continue;return Qt}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(oe===$)throw oe=R,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);oe=Z;var un=F(_e,we,X);if(un.type==="normal"){if(oe=X.done?R:N,un.arg===q)continue;return{value:un.arg,done:X.done}}else un.type==="throw"&&(oe=R,X.method="throw",X.arg=un.arg)}}}function tt(_e,we){var X=we.method,oe=_e.iterator[X];if(oe===d)return we.delegate=null,X==="throw"&&_e.iterator.return&&(we.method="return",we.arg=d,tt(_e,we),we.method==="throw")||X!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+X+"' method")),q;var lt=F(oe,_e.iterator,we.arg);if(lt.type==="throw")return we.method="throw",we.arg=lt.arg,we.delegate=null,q;var mt=lt.arg;if(!mt)return we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,q;if(mt.done)we[_e.resultName]=mt.value,we.next=_e.nextLoc,we.method!=="return"&&(we.method="next",we.arg=d);else return mt;return we.delegate=null,q}Oe(Le),A(Le,E,"Generator"),A(Le,x,function(){return this}),A(Le,"toString",function(){return"[object Generator]"});function yt(_e){var we={tryLoc:_e[0]};1 in _e&&(we.catchLoc=_e[1]),2 in _e&&(we.finallyLoc=_e[2],we.afterLoc=_e[3]),this.tryEntries.push(we)}function At(_e){var we=_e.completion||{};we.type="normal",delete we.arg,_e.completion=we}function zt(_e){this.tryEntries=[{tryLoc:"root"}],_e.forEach(yt,this),this.reset(!0)}n.keys=function(_e){var we=Object(_e),X=[];for(var oe in we)X.push(oe);return X.reverse(),function lt(){for(;X.length;){var mt=X.pop();if(mt in we)return lt.value=mt,lt.done=!1,lt}return lt.done=!0,lt}};function Vt(_e){if(_e){var we=_e[x];if(we)return we.call(_e);if(typeof _e.next=="function")return _e;if(!isNaN(_e.length)){var X=-1,oe=function lt(){for(;++X<_e.length;)if(a.call(_e,X))return lt.value=_e[X],lt.done=!1,lt;return lt.value=d,lt.done=!0,lt};return oe.next=oe}}return{next:Ve}}n.values=Vt;function Ve(){return{value:d,done:!0}}return zt.prototype={constructor:zt,reset:function(_e){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(At),!_e)for(var we in this)we.charAt(0)==="t"&&a.call(this,we)&&!isNaN(+we.slice(1))&&(this[we]=d)},stop:function(){this.done=!0;var _e=this.tryEntries[0],we=_e.completion;if(we.type==="throw")throw we.arg;return this.rval},dispatchException:function(_e){if(this.done)throw _e;var we=this;function X(Qt,un){return mt.type="throw",mt.arg=_e,we.next=Qt,un&&(we.method="next",we.arg=d),!!un}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var lt=this.tryEntries[oe],mt=lt.completion;if(lt.tryLoc==="root")return X("end");if(lt.tryLoc<=this.prev){var Gt=a.call(lt,"catchLoc"),Dt=a.call(lt,"finallyLoc");if(Gt&&Dt){if(this.prev<lt.catchLoc)return X(lt.catchLoc,!0);if(this.prev<lt.finallyLoc)return X(lt.finallyLoc)}else if(Gt){if(this.prev<lt.catchLoc)return X(lt.catchLoc,!0)}else if(Dt){if(this.prev<lt.finallyLoc)return X(lt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(_e,we){for(var X=this.tryEntries.length-1;X>=0;--X){var oe=this.tryEntries[X];if(oe.tryLoc<=this.prev&&a.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var lt=oe;break}}lt&&(_e==="break"||_e==="continue")&&lt.tryLoc<=we&&we<=lt.finallyLoc&&(lt=null);var mt=lt?lt.completion:{};return mt.type=_e,mt.arg=we,lt?(this.method="next",this.next=lt.finallyLoc,q):this.complete(mt)},complete:function(_e,we){if(_e.type==="throw")throw _e.arg;return _e.type==="break"||_e.type==="continue"?this.next=_e.arg:_e.type==="return"?(this.rval=this.arg=_e.arg,this.method="return",this.next="end"):_e.type==="normal"&&we&&(this.next=we),q},finish:function(_e){for(var we=this.tryEntries.length-1;we>=0;--we){var X=this.tryEntries[we];if(X.finallyLoc===_e)return this.complete(X.completion,X.afterLoc),At(X),q}},catch:function(_e){for(var we=this.tryEntries.length-1;we>=0;--we){var X=this.tryEntries[we];if(X.tryLoc===_e){var oe=X.completion;if(oe.type==="throw"){var lt=oe.arg;At(X)}return lt}}throw new Error("illegal catch attempt")},delegateYield:function(_e,we,X){return this.delegate={iterator:Vt(_e),resultName:we,nextLoc:X},this.method==="next"&&(this.arg=d),q}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(yD);var IP={},V2={},MP={exports:{}},Qa={},LP={exports:{}},OP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ve,_e){var we=Ve.length;Ve.push(_e);e:for(;0<we;){var X=we-1>>>1,oe=Ve[X];if(0<a(oe,_e))Ve[X]=_e,Ve[we]=oe,we=X;else break e}}function n(Ve){return Ve.length===0?null:Ve[0]}function r(Ve){if(Ve.length===0)return null;var _e=Ve[0],we=Ve.pop();if(we!==_e){Ve[0]=we;e:for(var X=0,oe=Ve.length,lt=oe>>>1;X<lt;){var mt=2*(X+1)-1,Gt=Ve[mt],Dt=mt+1,Qt=Ve[Dt];if(0>a(Gt,we))Dt<oe&&0>a(Qt,Gt)?(Ve[X]=Qt,Ve[Dt]=we,X=Dt):(Ve[X]=Gt,Ve[mt]=we,X=mt);else if(Dt<oe&&0>a(Qt,we))Ve[X]=Qt,Ve[Dt]=we,X=Dt;else break e}}return _e}function a(Ve,_e){var we=Ve.sortIndex-_e.sortIndex;return we!==0?we:Ve.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,l=d.now();e.unstable_now=function(){return d.now()-l}}var x=[],b=[],E=1,A=null,L=3,F=!1,$=!1,N=!1,Z=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Ve){for(var _e=n(b);_e!==null;){if(_e.callback===null)r(b);else if(_e.startTime<=Ve)r(b),_e.sortIndex=_e.expirationTime,t(x,_e);else break;_e=n(b)}}function ee(Ve){if(N=!1,G(Ve),!$)if(n(x)!==null)$=!0,zt(ae);else{var _e=n(b);_e!==null&&Vt(ee,_e.startTime-Ve)}}function ae(Ve,_e){$=!1,N&&(N=!1,R(xe),xe=-1),F=!0;var we=L;try{for(G(_e),A=n(x);A!==null&&(!(A.expirationTime>_e)||Ve&&!Fe());){var X=A.callback;if(typeof X=="function"){A.callback=null,L=A.priorityLevel;var oe=X(A.expirationTime<=_e);_e=e.unstable_now(),typeof oe=="function"?A.callback=oe:A===n(x)&&r(x),G(_e)}else r(x);A=n(x)}if(A!==null)var lt=!0;else{var mt=n(b);mt!==null&&Vt(ee,mt.startTime-_e),lt=!1}return lt}finally{A=null,L=we,F=!1}}var K=!1,le=null,xe=-1,Le=5,Oe=-1;function Fe(){return!(e.unstable_now()-Oe<Le)}function Ge(){if(le!==null){var Ve=e.unstable_now();Oe=Ve;var _e=!0;try{_e=le(!0,Ve)}finally{_e?tt():(K=!1,le=null)}}else K=!1}var tt;if(typeof q=="function")tt=function(){q(Ge)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,At=yt.port2;yt.port1.onmessage=Ge,tt=function(){At.postMessage(null)}}else tt=function(){Z(Ge,0)};function zt(Ve){le=Ve,K||(K=!0,tt())}function Vt(Ve,_e){xe=Z(function(){Ve(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ve){Ve.callback=null},e.unstable_continueExecution=function(){$||F||($=!0,zt(ae))},e.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<Ve?Math.floor(1e3/Ve):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return n(x)},e.unstable_next=function(Ve){switch(L){case 1:case 2:case 3:var _e=3;break;default:_e=L}var we=L;L=_e;try{return Ve()}finally{L=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ve,_e){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var we=L;L=Ve;try{return _e()}finally{L=we}},e.unstable_scheduleCallback=function(Ve,_e,we){var X=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?X+we:X):we=X,Ve){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=we+oe,Ve={id:E++,callback:_e,priorityLevel:Ve,startTime:we,expirationTime:oe,sortIndex:-1},we>X?(Ve.sortIndex=we,t(b,Ve),n(x)===null&&Ve===n(b)&&(N?(R(xe),xe=-1):N=!0,Vt(ee,we-X))):(Ve.sortIndex=oe,t(x,Ve),$||F||($=!0,zt(ae))),Ve},e.unstable_shouldYield=Fe,e.unstable_wrapCallback=function(Ve){var _e=L;return function(){var we=L;L=_e;try{return Ve.apply(this,arguments)}finally{L=we}}}})(OP);LP.exports=OP;var _D=LP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP=pt,Ja=_D;function St(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RP=new Set,wy={};function Jf(e,t){Gp(e,t),Gp(e+"Capture",t)}function Gp(e,t){for(wy[e]=t,e=0;e<t.length;e++)RP.add(t[e])}var Qu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q2=Object.prototype.hasOwnProperty,vD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I3={},M3={};function xD(e){return q2.call(M3,e)?!0:q2.call(I3,e)?!1:vD.test(e)?M3[e]=!0:(I3[e]=!0,!1)}function bD(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wD(e,t,n,r){if(t===null||typeof t>"u"||bD(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ha(e,t,n,r,a,c,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=d}var Po={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Po[e]=new ha(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Po[t]=new ha(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Po[e]=new ha(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Po[e]=new ha(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Po[e]=new ha(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Po[e]=new ha(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Po[e]=new ha(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Po[e]=new ha(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Po[e]=new ha(e,5,!1,e.toLowerCase(),null,!1,!1)});var XC=/[\-:]([a-z])/g;function YC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XC,YC);Po[t]=new ha(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XC,YC);Po[t]=new ha(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XC,YC);Po[t]=new ha(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Po[e]=new ha(e,1,!1,e.toLowerCase(),null,!1,!1)});Po.xlinkHref=new ha("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Po[e]=new ha(e,1,!1,e.toLowerCase(),null,!0,!0)});function JC(e,t,n,r){var a=Po.hasOwnProperty(t)?Po[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wD(t,n,a,r)&&(n=null),r||a===null?xD(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var oc=FP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G0=Symbol.for("react.element"),vp=Symbol.for("react.portal"),xp=Symbol.for("react.fragment"),QC=Symbol.for("react.strict_mode"),G2=Symbol.for("react.profiler"),DP=Symbol.for("react.provider"),zP=Symbol.for("react.context"),eE=Symbol.for("react.forward_ref"),H2=Symbol.for("react.suspense"),W2=Symbol.for("react.suspense_list"),tE=Symbol.for("react.memo"),sh=Symbol.for("react.lazy"),BP=Symbol.for("react.offscreen"),L3=Symbol.iterator;function Pg(e){return e===null||typeof e!="object"?null:(e=L3&&e[L3]||e["@@iterator"],typeof e=="function"?e:null)}var mi=Object.assign,Mw;function Jg(e){if(Mw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mw=t&&t[1]||""}return`
`+Mw+e}var Lw=!1;function Ow(e,t){if(!e||Lw)return"";Lw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var r=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){r=b}e.call(t.prototype)}else{try{throw Error()}catch(b){r=b}e()}}catch(b){if(b&&r&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),c=r.stack.split(`
`),d=a.length-1,l=c.length-1;1<=d&&0<=l&&a[d]!==c[l];)l--;for(;1<=d&&0<=l;d--,l--)if(a[d]!==c[l]){if(d!==1||l!==1)do if(d--,l--,0>l||a[d]!==c[l]){var x=`
`+a[d].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=d&&0<=l);break}}}finally{Lw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jg(e):""}function SD(e){switch(e.tag){case 5:return Jg(e.type);case 16:return Jg("Lazy");case 13:return Jg("Suspense");case 19:return Jg("SuspenseList");case 0:case 2:case 15:return e=Ow(e.type,!1),e;case 11:return e=Ow(e.type.render,!1),e;case 1:return e=Ow(e.type,!0),e;default:return""}}function Z2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xp:return"Fragment";case vp:return"Portal";case G2:return"Profiler";case QC:return"StrictMode";case H2:return"Suspense";case W2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zP:return(e.displayName||"Context")+".Consumer";case DP:return(e._context.displayName||"Context")+".Provider";case eE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tE:return t=e.displayName||null,t!==null?t:Z2(e.type)||"Memo";case sh:t=e._payload,e=e._init;try{return Z2(e(t))}catch{}}return null}function CD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z2(t);case 8:return t===QC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ph(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $P(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ED(e){var t=$P(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){r=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function H0(e){e._valueTracker||(e._valueTracker=ED(e))}function NP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$P(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function o1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function K2(e,t){var n=t.checked;return mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function O3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ph(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function UP(e,t){t=t.checked,t!=null&&JC(e,"checked",t,!1)}function X2(e,t){UP(e,t);var n=Ph(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y2(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y2(e,t.type,Ph(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function F3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Y2(e,t,n){(t!=="number"||o1(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qg=Array.isArray;function Fp(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ph(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function J2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(St(91));return mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function R3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(St(92));if(Qg(n)){if(1<n.length)throw Error(St(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ph(n)}}function jP(e,t){var n=Ph(t.value),r=Ph(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function D3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function VP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var W0,qP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(W0=W0||document.createElement("div"),W0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=W0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sy(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var oy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kD=["Webkit","ms","Moz","O"];Object.keys(oy).forEach(function(e){kD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oy[t]=oy[e]})});function GP(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||oy.hasOwnProperty(e)&&oy[e]?(""+t).trim():t+"px"}function HP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=GP(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var AD=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eS(e,t){if(t){if(AD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(St(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(St(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(St(61))}if(t.style!=null&&typeof t.style!="object")throw Error(St(62))}}function tS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nS=null;function nE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rS=null,Rp=null,Dp=null;function z3(e){if(e=i_(e)){if(typeof rS!="function")throw Error(St(280));var t=e.stateNode;t&&(t=ox(t),rS(e.stateNode,e.type,t))}}function WP(e){Rp?Dp?Dp.push(e):Dp=[e]:Rp=e}function ZP(){if(Rp){var e=Rp,t=Dp;if(Dp=Rp=null,z3(e),t)for(e=0;e<t.length;e++)z3(t[e])}}function KP(e,t){return e(t)}function XP(){}var Fw=!1;function YP(e,t,n){if(Fw)return e(t,n);Fw=!0;try{return KP(e,t,n)}finally{Fw=!1,(Rp!==null||Dp!==null)&&(XP(),ZP())}}function Cy(e,t){var n=e.stateNode;if(n===null)return null;var r=ox(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(St(231,t,typeof n));return n}var iS=!1;if(Qu)try{var Ig={};Object.defineProperty(Ig,"passive",{get:function(){iS=!0}}),window.addEventListener("test",Ig,Ig),window.removeEventListener("test",Ig,Ig)}catch{iS=!1}function TD(e,t,n,r,a,c,d,l,x){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(E){this.onError(E)}}var ay=!1,a1=null,s1=!1,oS=null,PD={onError:function(e){ay=!0,a1=e}};function ID(e,t,n,r,a,c,d,l,x){ay=!1,a1=null,TD.apply(PD,arguments)}function MD(e,t,n,r,a,c,d,l,x){if(ID.apply(this,arguments),ay){if(ay){var b=a1;ay=!1,a1=null}else throw Error(St(198));s1||(s1=!0,oS=b)}}function Qf(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function JP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B3(e){if(Qf(e)!==e)throw Error(St(188))}function LD(e){var t=e.alternate;if(!t){if(t=Qf(e),t===null)throw Error(St(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return B3(a),e;if(c===r)return B3(a),t;c=c.sibling}throw Error(St(188))}if(n.return!==r.return)n=a,r=c;else{for(var d=!1,l=a.child;l;){if(l===n){d=!0,n=a,r=c;break}if(l===r){d=!0,r=a,n=c;break}l=l.sibling}if(!d){for(l=c.child;l;){if(l===n){d=!0,n=c,r=a;break}if(l===r){d=!0,r=c,n=a;break}l=l.sibling}if(!d)throw Error(St(189))}}if(n.alternate!==r)throw Error(St(190))}if(n.tag!==3)throw Error(St(188));return n.stateNode.current===n?e:t}function QP(e){return e=LD(e),e!==null?eI(e):null}function eI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eI(e);if(t!==null)return t;e=e.sibling}return null}var tI=Ja.unstable_scheduleCallback,$3=Ja.unstable_cancelCallback,OD=Ja.unstable_shouldYield,FD=Ja.unstable_requestPaint,Ii=Ja.unstable_now,RD=Ja.unstable_getCurrentPriorityLevel,rE=Ja.unstable_ImmediatePriority,nI=Ja.unstable_UserBlockingPriority,l1=Ja.unstable_NormalPriority,DD=Ja.unstable_LowPriority,rI=Ja.unstable_IdlePriority,tx=null,nu=null;function zD(e){if(nu&&typeof nu.onCommitFiberRoot=="function")try{nu.onCommitFiberRoot(tx,e,void 0,(e.current.flags&128)===128)}catch{}}var ml=Math.clz32?Math.clz32:ND,BD=Math.log,$D=Math.LN2;function ND(e){return e>>>=0,e===0?32:31-(BD(e)/$D|0)|0}var Z0=64,K0=4194304;function ey(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function u1(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,c=e.pingedLanes,d=n&268435455;if(d!==0){var l=d&~a;l!==0?r=ey(l):(c&=d,c!==0&&(r=ey(c)))}else d=n&~a,d!==0?r=ey(d):c!==0&&(r=ey(c));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ml(t),a=1<<n,r|=e[n],t&=~a;return r}function UD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jD(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-ml(c),l=1<<d,x=a[d];x===-1?(!(l&n)||l&r)&&(a[d]=UD(l,t)):x<=t&&(e.expiredLanes|=l),c&=~l}}function aS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iI(){var e=Z0;return Z0<<=1,!(Z0&4194240)&&(Z0=64),e}function Rw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function n_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ml(t),e[t]=n}function VD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ml(n),c=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~c}}function iE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ml(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var kr=0;function oI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aI,oE,sI,lI,uI,sS=!1,X0=[],_h=null,vh=null,xh=null,Ey=new Map,ky=new Map,ch=[],qD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N3(e,t){switch(e){case"focusin":case"focusout":_h=null;break;case"dragenter":case"dragleave":vh=null;break;case"mouseover":case"mouseout":xh=null;break;case"pointerover":case"pointerout":Ey.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ky.delete(t.pointerId)}}function Mg(e,t,n,r,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:c,targetContainers:[a]},t!==null&&(t=i_(t),t!==null&&oE(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function GD(e,t,n,r,a){switch(t){case"focusin":return _h=Mg(_h,e,t,n,r,a),!0;case"dragenter":return vh=Mg(vh,e,t,n,r,a),!0;case"mouseover":return xh=Mg(xh,e,t,n,r,a),!0;case"pointerover":var c=a.pointerId;return Ey.set(c,Mg(Ey.get(c)||null,e,t,n,r,a)),!0;case"gotpointercapture":return c=a.pointerId,ky.set(c,Mg(ky.get(c)||null,e,t,n,r,a)),!0}return!1}function cI(e){var t=zf(e.target);if(t!==null){var n=Qf(t);if(n!==null){if(t=n.tag,t===13){if(t=JP(n),t!==null){e.blockedOn=t,uI(e.priority,function(){sI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $v(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nS=r,n.target.dispatchEvent(r),nS=null}else return t=i_(n),t!==null&&oE(t),e.blockedOn=n,!1;t.shift()}return!0}function U3(e,t,n){$v(e)&&n.delete(t)}function HD(){sS=!1,_h!==null&&$v(_h)&&(_h=null),vh!==null&&$v(vh)&&(vh=null),xh!==null&&$v(xh)&&(xh=null),Ey.forEach(U3),ky.forEach(U3)}function Lg(e,t){e.blockedOn===t&&(e.blockedOn=null,sS||(sS=!0,Ja.unstable_scheduleCallback(Ja.unstable_NormalPriority,HD)))}function Ay(e){function t(a){return Lg(a,e)}if(0<X0.length){Lg(X0[0],e);for(var n=1;n<X0.length;n++){var r=X0[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_h!==null&&Lg(_h,e),vh!==null&&Lg(vh,e),xh!==null&&Lg(xh,e),Ey.forEach(t),ky.forEach(t),n=0;n<ch.length;n++)r=ch[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ch.length&&(n=ch[0],n.blockedOn===null);)cI(n),n.blockedOn===null&&ch.shift()}var zp=oc.ReactCurrentBatchConfig,c1=!0;function WD(e,t,n,r){var a=kr,c=zp.transition;zp.transition=null;try{kr=1,aE(e,t,n,r)}finally{kr=a,zp.transition=c}}function ZD(e,t,n,r){var a=kr,c=zp.transition;zp.transition=null;try{kr=4,aE(e,t,n,r)}finally{kr=a,zp.transition=c}}function aE(e,t,n,r){if(c1){var a=lS(e,t,n,r);if(a===null)Gw(e,t,r,h1,n),N3(e,r);else if(GD(a,e,t,n,r))r.stopPropagation();else if(N3(e,r),t&4&&-1<qD.indexOf(e)){for(;a!==null;){var c=i_(a);if(c!==null&&aI(c),c=lS(e,t,n,r),c===null&&Gw(e,t,r,h1,n),c===a)break;a=c}a!==null&&r.stopPropagation()}else Gw(e,t,r,null,n)}}var h1=null;function lS(e,t,n,r){if(h1=null,e=nE(r),e=zf(e),e!==null)if(t=Qf(e),t===null)e=null;else if(n=t.tag,n===13){if(e=JP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return h1=e,null}function hI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RD()){case rE:return 1;case nI:return 4;case l1:case DD:return 16;case rI:return 536870912;default:return 16}default:return 16}}var dh=null,sE=null,Nv=null;function fI(){if(Nv)return Nv;var e,t=sE,n=t.length,r,a="value"in dh?dh.value:dh.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===a[c-r];r++);return Nv=a.slice(e,1<r?1-r:void 0)}function Uv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Y0(){return!0}function j3(){return!1}function es(e){function t(n,r,a,c,d){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(c):c[l]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Y0:j3,this.isPropagationStopped=j3,this}return mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Y0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Y0)},persist:function(){},isPersistent:Y0}),t}var im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lE=es(im),r_=mi({},im,{view:0,detail:0}),KD=es(r_),Dw,zw,Og,nx=mi({},r_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Og&&(Og&&e.type==="mousemove"?(Dw=e.screenX-Og.screenX,zw=e.screenY-Og.screenY):zw=Dw=0,Og=e),Dw)},movementY:function(e){return"movementY"in e?e.movementY:zw}}),V3=es(nx),XD=mi({},nx,{dataTransfer:0}),YD=es(XD),JD=mi({},r_,{relatedTarget:0}),Bw=es(JD),QD=mi({},im,{animationName:0,elapsedTime:0,pseudoElement:0}),e8=es(QD),t8=mi({},im,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n8=es(t8),r8=mi({},im,{data:0}),q3=es(r8),i8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=a8[e])?!!t[e]:!1}function uE(){return s8}var l8=mi({},r_,{key:function(e){if(e.key){var t=i8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uE,charCode:function(e){return e.type==="keypress"?Uv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u8=es(l8),c8=mi({},nx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G3=es(c8),h8=mi({},r_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uE}),f8=es(h8),d8=mi({},im,{propertyName:0,elapsedTime:0,pseudoElement:0}),p8=es(d8),m8=mi({},nx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g8=es(m8),y8=[9,13,27,32],cE=Qu&&"CompositionEvent"in window,sy=null;Qu&&"documentMode"in document&&(sy=document.documentMode);var _8=Qu&&"TextEvent"in window&&!sy,dI=Qu&&(!cE||sy&&8<sy&&11>=sy),H3=String.fromCharCode(32),W3=!1;function pI(e,t){switch(e){case"keyup":return y8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bp=!1;function v8(e,t){switch(e){case"compositionend":return mI(t);case"keypress":return t.which!==32?null:(W3=!0,H3);case"textInput":return e=t.data,e===H3&&W3?null:e;default:return null}}function x8(e,t){if(bp)return e==="compositionend"||!cE&&pI(e,t)?(e=fI(),Nv=sE=dh=null,bp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dI&&t.locale!=="ko"?null:t.data;default:return null}}var b8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b8[e.type]:t==="textarea"}function gI(e,t,n,r){WP(r),t=f1(t,"onChange"),0<t.length&&(n=new lE("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ly=null,Ty=null;function w8(e){AI(e,0)}function rx(e){var t=Cp(e);if(NP(t))return e}function S8(e,t){if(e==="change")return t}var yI=!1;if(Qu){var $w;if(Qu){var Nw="oninput"in document;if(!Nw){var K3=document.createElement("div");K3.setAttribute("oninput","return;"),Nw=typeof K3.oninput=="function"}$w=Nw}else $w=!1;yI=$w&&(!document.documentMode||9<document.documentMode)}function X3(){ly&&(ly.detachEvent("onpropertychange",_I),Ty=ly=null)}function _I(e){if(e.propertyName==="value"&&rx(Ty)){var t=[];gI(t,Ty,e,nE(e)),YP(w8,t)}}function C8(e,t,n){e==="focusin"?(X3(),ly=t,Ty=n,ly.attachEvent("onpropertychange",_I)):e==="focusout"&&X3()}function E8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rx(Ty)}function k8(e,t){if(e==="click")return rx(t)}function A8(e,t){if(e==="input"||e==="change")return rx(t)}function T8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vl=typeof Object.is=="function"?Object.is:T8;function Py(e,t){if(vl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!q2.call(t,a)||!vl(e[a],t[a]))return!1}return!0}function Y3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J3(e,t){var n=Y3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y3(n)}}function vI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xI(){for(var e=window,t=o1();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=o1(e.document)}return t}function hE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P8(e){var t=xI(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vI(n.ownerDocument.documentElement,n)){if(r!==null&&hE(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(r.start,a);r=r.end===void 0?c:Math.min(r.end,a),!e.extend&&c>r&&(a=r,r=c,c=a),a=J3(n,c);var d=J3(n,r);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var I8=Qu&&"documentMode"in document&&11>=document.documentMode,wp=null,uS=null,uy=null,cS=!1;function Q3(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cS||wp==null||wp!==o1(r)||(r=wp,"selectionStart"in r&&hE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uy&&Py(uy,r)||(uy=r,r=f1(uS,"onSelect"),0<r.length&&(t=new lE("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wp)))}function J0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sp={animationend:J0("Animation","AnimationEnd"),animationiteration:J0("Animation","AnimationIteration"),animationstart:J0("Animation","AnimationStart"),transitionend:J0("Transition","TransitionEnd")},Uw={},bI={};Qu&&(bI=document.createElement("div").style,"AnimationEvent"in window||(delete Sp.animationend.animation,delete Sp.animationiteration.animation,delete Sp.animationstart.animation),"TransitionEvent"in window||delete Sp.transitionend.transition);function ix(e){if(Uw[e])return Uw[e];if(!Sp[e])return e;var t=Sp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bI)return Uw[e]=t[n];return e}var wI=ix("animationend"),SI=ix("animationiteration"),CI=ix("animationstart"),EI=ix("transitionend"),kI=new Map,eA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fh(e,t){kI.set(e,t),Jf(t,[e])}for(var jw=0;jw<eA.length;jw++){var Vw=eA[jw],M8=Vw.toLowerCase(),L8=Vw[0].toUpperCase()+Vw.slice(1);Fh(M8,"on"+L8)}Fh(wI,"onAnimationEnd");Fh(SI,"onAnimationIteration");Fh(CI,"onAnimationStart");Fh("dblclick","onDoubleClick");Fh("focusin","onFocus");Fh("focusout","onBlur");Fh(EI,"onTransitionEnd");Gp("onMouseEnter",["mouseout","mouseover"]);Gp("onMouseLeave",["mouseout","mouseover"]);Gp("onPointerEnter",["pointerout","pointerover"]);Gp("onPointerLeave",["pointerout","pointerover"]);Jf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ty="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ty));function tA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,MD(r,t,void 0,e),e.currentTarget=null}function AI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var c=void 0;if(t)for(var d=r.length-1;0<=d;d--){var l=r[d],x=l.instance,b=l.currentTarget;if(l=l.listener,x!==c&&a.isPropagationStopped())break e;tA(a,l,b),c=x}else for(d=0;d<r.length;d++){if(l=r[d],x=l.instance,b=l.currentTarget,l=l.listener,x!==c&&a.isPropagationStopped())break e;tA(a,l,b),c=x}}}if(s1)throw e=oS,s1=!1,oS=null,e}function Zr(e,t){var n=t[mS];n===void 0&&(n=t[mS]=new Set);var r=e+"__bubble";n.has(r)||(TI(t,e,2,!1),n.add(r))}function qw(e,t,n){var r=0;t&&(r|=4),TI(n,e,r,t)}var Q0="_reactListening"+Math.random().toString(36).slice(2);function Iy(e){if(!e[Q0]){e[Q0]=!0,RP.forEach(function(n){n!=="selectionchange"&&(O8.has(n)||qw(n,!1,e),qw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Q0]||(t[Q0]=!0,qw("selectionchange",!1,t))}}function TI(e,t,n,r){switch(hI(t)){case 1:var a=WD;break;case 4:a=ZD;break;default:a=aE}n=a.bind(null,t,n,e),a=void 0,!iS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Gw(e,t,n,r,a){var c=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(d===4)for(d=r.return;d!==null;){var x=d.tag;if((x===3||x===4)&&(x=d.stateNode.containerInfo,x===a||x.nodeType===8&&x.parentNode===a))return;d=d.return}for(;l!==null;){if(d=zf(l),d===null)return;if(x=d.tag,x===5||x===6){r=c=d;continue e}l=l.parentNode}}r=r.return}YP(function(){var b=c,E=nE(n),A=[];e:{var L=kI.get(e);if(L!==void 0){var F=lE,$=e;switch(e){case"keypress":if(Uv(n)===0)break e;case"keydown":case"keyup":F=u8;break;case"focusin":$="focus",F=Bw;break;case"focusout":$="blur",F=Bw;break;case"beforeblur":case"afterblur":F=Bw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=V3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=YD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=f8;break;case wI:case SI:case CI:F=e8;break;case EI:F=p8;break;case"scroll":F=KD;break;case"wheel":F=g8;break;case"copy":case"cut":case"paste":F=n8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=G3}var N=(t&4)!==0,Z=!N&&e==="scroll",R=N?L!==null?L+"Capture":null:L;N=[];for(var q=b,G;q!==null;){G=q;var ee=G.stateNode;if(G.tag===5&&ee!==null&&(G=ee,R!==null&&(ee=Cy(q,R),ee!=null&&N.push(My(q,ee,G)))),Z)break;q=q.return}0<N.length&&(L=new F(L,$,null,n,E),A.push({event:L,listeners:N}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",L&&n!==nS&&($=n.relatedTarget||n.fromElement)&&(zf($)||$[ec]))break e;if((F||L)&&(L=E.window===E?E:(L=E.ownerDocument)?L.defaultView||L.parentWindow:window,F?($=n.relatedTarget||n.toElement,F=b,$=$?zf($):null,$!==null&&(Z=Qf($),$!==Z||$.tag!==5&&$.tag!==6)&&($=null)):(F=null,$=b),F!==$)){if(N=V3,ee="onMouseLeave",R="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(N=G3,ee="onPointerLeave",R="onPointerEnter",q="pointer"),Z=F==null?L:Cp(F),G=$==null?L:Cp($),L=new N(ee,q+"leave",F,n,E),L.target=Z,L.relatedTarget=G,ee=null,zf(E)===b&&(N=new N(R,q+"enter",$,n,E),N.target=G,N.relatedTarget=Z,ee=N),Z=ee,F&&$)t:{for(N=F,R=$,q=0,G=N;G;G=np(G))q++;for(G=0,ee=R;ee;ee=np(ee))G++;for(;0<q-G;)N=np(N),q--;for(;0<G-q;)R=np(R),G--;for(;q--;){if(N===R||R!==null&&N===R.alternate)break t;N=np(N),R=np(R)}N=null}else N=null;F!==null&&nA(A,L,F,N,!1),$!==null&&Z!==null&&nA(A,Z,$,N,!0)}}e:{if(L=b?Cp(b):window,F=L.nodeName&&L.nodeName.toLowerCase(),F==="select"||F==="input"&&L.type==="file")var ae=S8;else if(Z3(L))if(yI)ae=A8;else{ae=E8;var K=C8}else(F=L.nodeName)&&F.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(ae=k8);if(ae&&(ae=ae(e,b))){gI(A,ae,n,E);break e}K&&K(e,L,b),e==="focusout"&&(K=L._wrapperState)&&K.controlled&&L.type==="number"&&Y2(L,"number",L.value)}switch(K=b?Cp(b):window,e){case"focusin":(Z3(K)||K.contentEditable==="true")&&(wp=K,uS=b,uy=null);break;case"focusout":uy=uS=wp=null;break;case"mousedown":cS=!0;break;case"contextmenu":case"mouseup":case"dragend":cS=!1,Q3(A,n,E);break;case"selectionchange":if(I8)break;case"keydown":case"keyup":Q3(A,n,E)}var le;if(cE)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else bp?pI(e,n)&&(xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(dI&&n.locale!=="ko"&&(bp||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&bp&&(le=fI()):(dh=E,sE="value"in dh?dh.value:dh.textContent,bp=!0)),K=f1(b,xe),0<K.length&&(xe=new q3(xe,e,null,n,E),A.push({event:xe,listeners:K}),le?xe.data=le:(le=mI(n),le!==null&&(xe.data=le)))),(le=_8?v8(e,n):x8(e,n))&&(b=f1(b,"onBeforeInput"),0<b.length&&(E=new q3("onBeforeInput","beforeinput",null,n,E),A.push({event:E,listeners:b}),E.data=le))}AI(A,t)})}function My(e,t,n){return{instance:e,listener:t,currentTarget:n}}function f1(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Cy(e,n),c!=null&&r.unshift(My(e,c,a)),c=Cy(e,t),c!=null&&r.push(My(e,c,a))),e=e.return}return r}function np(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nA(e,t,n,r,a){for(var c=t._reactName,d=[];n!==null&&n!==r;){var l=n,x=l.alternate,b=l.stateNode;if(x!==null&&x===r)break;l.tag===5&&b!==null&&(l=b,a?(x=Cy(n,c),x!=null&&d.unshift(My(n,x,l))):a||(x=Cy(n,c),x!=null&&d.push(My(n,x,l)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var F8=/\r\n?/g,R8=/\u0000|\uFFFD/g;function rA(e){return(typeof e=="string"?e:""+e).replace(F8,`
`).replace(R8,"")}function ev(e,t,n){if(t=rA(t),rA(e)!==t&&n)throw Error(St(425))}function d1(){}var hS=null,fS=null;function dS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pS=typeof setTimeout=="function"?setTimeout:void 0,D8=typeof clearTimeout=="function"?clearTimeout:void 0,iA=typeof Promise=="function"?Promise:void 0,z8=typeof queueMicrotask=="function"?queueMicrotask:typeof iA<"u"?function(e){return iA.resolve(null).then(e).catch(B8)}:pS;function B8(e){setTimeout(function(){throw e})}function Hw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ay(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ay(t)}function bh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var om=Math.random().toString(36).slice(2),Ql="__reactFiber$"+om,Ly="__reactProps$"+om,ec="__reactContainer$"+om,mS="__reactEvents$"+om,$8="__reactListeners$"+om,N8="__reactHandles$"+om;function zf(e){var t=e[Ql];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ec]||n[Ql]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=oA(e);e!==null;){if(n=e[Ql])return n;e=oA(e)}return t}e=n,n=e.parentNode}return null}function i_(e){return e=e[Ql]||e[ec],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(St(33))}function ox(e){return e[Ly]||null}var gS=[],Ep=-1;function Rh(e){return{current:e}}function Xr(e){0>Ep||(e.current=gS[Ep],gS[Ep]=null,Ep--)}function Ur(e,t){Ep++,gS[Ep]=e.current,e.current=t}var Ih={},Ko=Rh(Ih),Pa=Rh(!1),Hf=Ih;function Hp(e,t){var n=e.type.contextTypes;if(!n)return Ih;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ia(e){return e=e.childContextTypes,e!=null}function p1(){Xr(Pa),Xr(Ko)}function aA(e,t,n){if(Ko.current!==Ih)throw Error(St(168));Ur(Ko,t),Ur(Pa,n)}function PI(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(St(108,CD(e)||"Unknown",a));return mi({},n,r)}function m1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ih,Hf=Ko.current,Ur(Ko,e),Ur(Pa,Pa.current),!0}function sA(e,t,n){var r=e.stateNode;if(!r)throw Error(St(169));n?(e=PI(e,t,Hf),r.__reactInternalMemoizedMergedChildContext=e,Xr(Pa),Xr(Ko),Ur(Ko,e)):Xr(Pa),Ur(Pa,n)}var Wu=null,ax=!1,Ww=!1;function II(e){Wu===null?Wu=[e]:Wu.push(e)}function U8(e){ax=!0,II(e)}function Dh(){if(!Ww&&Wu!==null){Ww=!0;var e=0,t=kr;try{var n=Wu;for(kr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wu=null,ax=!1}catch(a){throw Wu!==null&&(Wu=Wu.slice(e+1)),tI(rE,Dh),a}finally{kr=t,Ww=!1}}return null}var kp=[],Ap=0,g1=null,y1=0,xs=[],bs=0,Wf=null,Ku=1,Xu="";function If(e,t){kp[Ap++]=y1,kp[Ap++]=g1,g1=e,y1=t}function MI(e,t,n){xs[bs++]=Ku,xs[bs++]=Xu,xs[bs++]=Wf,Wf=e;var r=Ku;e=Xu;var a=32-ml(r)-1;r&=~(1<<a),n+=1;var c=32-ml(t)+a;if(30<c){var d=a-a%5;c=(r&(1<<d)-1).toString(32),r>>=d,a-=d,Ku=1<<32-ml(t)+a|n<<a|r,Xu=c+e}else Ku=1<<c|n<<a|r,Xu=e}function fE(e){e.return!==null&&(If(e,1),MI(e,1,0))}function dE(e){for(;e===g1;)g1=kp[--Ap],kp[Ap]=null,y1=kp[--Ap],kp[Ap]=null;for(;e===Wf;)Wf=xs[--bs],xs[bs]=null,Xu=xs[--bs],xs[bs]=null,Ku=xs[--bs],xs[bs]=null}var Ya=null,Wa=null,Yr=!1,dl=null;function LI(e,t){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function lA(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ya=e,Wa=bh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ya=e,Wa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wf!==null?{id:Ku,overflow:Xu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ya=e,Wa=null,!0):!1;default:return!1}}function yS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _S(e){if(Yr){var t=Wa;if(t){var n=t;if(!lA(e,t)){if(yS(e))throw Error(St(418));t=bh(n.nextSibling);var r=Ya;t&&lA(e,t)?LI(r,n):(e.flags=e.flags&-4097|2,Yr=!1,Ya=e)}}else{if(yS(e))throw Error(St(418));e.flags=e.flags&-4097|2,Yr=!1,Ya=e}}}function uA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ya=e}function tv(e){if(e!==Ya)return!1;if(!Yr)return uA(e),Yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dS(e.type,e.memoizedProps)),t&&(t=Wa)){if(yS(e))throw OI(),Error(St(418));for(;t;)LI(e,t),t=bh(t.nextSibling)}if(uA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(St(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wa=bh(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wa=null}}else Wa=Ya?bh(e.stateNode.nextSibling):null;return!0}function OI(){for(var e=Wa;e;)e=bh(e.nextSibling)}function Wp(){Wa=Ya=null,Yr=!1}function pE(e){dl===null?dl=[e]:dl.push(e)}var j8=oc.ReactCurrentBatchConfig;function hl(e,t){if(e&&e.defaultProps){t=mi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var _1=Rh(null),v1=null,Tp=null,mE=null;function gE(){mE=Tp=v1=null}function yE(e){var t=_1.current;Xr(_1),e._currentValue=t}function vS(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bp(e,t){v1=e,mE=Tp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ta=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(mE!==e)if(e={context:e,memoizedValue:t,next:null},Tp===null){if(v1===null)throw Error(St(308));Tp=e,v1.dependencies={lanes:0,firstContext:e}}else Tp=Tp.next=e;return t}var Bf=null;function _E(e){Bf===null?Bf=[e]:Bf.push(e)}function FI(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,_E(t)):(n.next=a.next,a.next=n),t.interleaved=n,tc(e,r)}function tc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lh=!1;function vE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ju(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wh(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,tc(e,n)}return a=r.interleaved,a===null?(t.next=t,_E(r)):(t.next=a.next,a.next=t),r.interleaved=t,tc(e,n)}function jv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iE(e,n)}}function cA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function x1(e,t,n,r){var a=e.updateQueue;lh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var x=l,b=x.next;x.next=null,d===null?c=b:d.next=b,d=x;var E=e.alternate;E!==null&&(E=E.updateQueue,l=E.lastBaseUpdate,l!==d&&(l===null?E.firstBaseUpdate=b:l.next=b,E.lastBaseUpdate=x))}if(c!==null){var A=a.baseState;d=0,E=b=x=null,l=c;do{var L=l.lane,F=l.eventTime;if((r&L)===L){E!==null&&(E=E.next={eventTime:F,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var $=e,N=l;switch(L=t,F=n,N.tag){case 1:if($=N.payload,typeof $=="function"){A=$.call(F,A,L);break e}A=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=N.payload,L=typeof $=="function"?$.call(F,A,L):$,L==null)break e;A=mi({},A,L);break e;case 2:lh=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,L=a.effects,L===null?a.effects=[l]:L.push(l))}else F={eventTime:F,lane:L,tag:l.tag,payload:l.payload,callback:l.callback,next:null},E===null?(b=E=F,x=A):E=E.next=F,d|=L;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;L=l,l=L.next,L.next=null,a.lastBaseUpdate=L,a.shared.pending=null}}while(1);if(E===null&&(x=A),a.baseState=x,a.firstBaseUpdate=b,a.lastBaseUpdate=E,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);Kf|=d,e.lanes=d,e.memoizedState=A}}function hA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(St(191,a));a.call(r)}}}var DI=new FP.Component().refs;function xS(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sx={isMounted:function(e){return(e=e._reactInternals)?Qf(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ua(),a=Ch(e),c=Ju(r,a);c.payload=t,n!=null&&(c.callback=n),t=wh(e,c,a),t!==null&&(gl(t,e,a,r),jv(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ua(),a=Ch(e),c=Ju(r,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=wh(e,c,a),t!==null&&(gl(t,e,a,r),jv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ua(),r=Ch(e),a=Ju(n,r);a.tag=2,t!=null&&(a.callback=t),t=wh(e,a,r),t!==null&&(gl(t,e,r,n),jv(t,e,r))}};function fA(e,t,n,r,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,d):t.prototype&&t.prototype.isPureReactComponent?!Py(n,r)||!Py(a,c):!0}function zI(e,t,n){var r=!1,a=Ih,c=t.contextType;return typeof c=="object"&&c!==null?c=As(c):(a=Ia(t)?Hf:Ko.current,r=t.contextTypes,c=(r=r!=null)?Hp(e,a):Ih),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function dA(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sx.enqueueReplaceState(t,t.state,null)}function bS(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=DI,vE(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=As(c):(c=Ia(t)?Hf:Ko.current,a.context=Hp(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(xS(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&sx.enqueueReplaceState(a,a.state,null),x1(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Fg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(St(309));var r=n.stateNode}if(!r)throw Error(St(147,e));var a=r,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var l=a.refs;l===DI&&(l=a.refs={}),d===null?delete l[c]:l[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(St(284));if(!n._owner)throw Error(St(290,e))}return e}function nv(e,t){throw e=Object.prototype.toString.call(t),Error(St(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pA(e){var t=e._init;return t(e._payload)}function BI(e){function t(R,q){if(e){var G=R.deletions;G===null?(R.deletions=[q],R.flags|=16):G.push(q)}}function n(R,q){if(!e)return null;for(;q!==null;)t(R,q),q=q.sibling;return null}function r(R,q){for(R=new Map;q!==null;)q.key!==null?R.set(q.key,q):R.set(q.index,q),q=q.sibling;return R}function a(R,q){return R=Eh(R,q),R.index=0,R.sibling=null,R}function c(R,q,G){return R.index=G,e?(G=R.alternate,G!==null?(G=G.index,G<q?(R.flags|=2,q):G):(R.flags|=2,q)):(R.flags|=1048576,q)}function d(R){return e&&R.alternate===null&&(R.flags|=2),R}function l(R,q,G,ee){return q===null||q.tag!==6?(q=e2(G,R.mode,ee),q.return=R,q):(q=a(q,G),q.return=R,q)}function x(R,q,G,ee){var ae=G.type;return ae===xp?E(R,q,G.props.children,ee,G.key):q!==null&&(q.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===sh&&pA(ae)===q.type)?(ee=a(q,G.props),ee.ref=Fg(R,q,G),ee.return=R,ee):(ee=Zv(G.type,G.key,G.props,null,R.mode,ee),ee.ref=Fg(R,q,G),ee.return=R,ee)}function b(R,q,G,ee){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=t2(G,R.mode,ee),q.return=R,q):(q=a(q,G.children||[]),q.return=R,q)}function E(R,q,G,ee,ae){return q===null||q.tag!==7?(q=jf(G,R.mode,ee,ae),q.return=R,q):(q=a(q,G),q.return=R,q)}function A(R,q,G){if(typeof q=="string"&&q!==""||typeof q=="number")return q=e2(""+q,R.mode,G),q.return=R,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case G0:return G=Zv(q.type,q.key,q.props,null,R.mode,G),G.ref=Fg(R,null,q),G.return=R,G;case vp:return q=t2(q,R.mode,G),q.return=R,q;case sh:var ee=q._init;return A(R,ee(q._payload),G)}if(Qg(q)||Pg(q))return q=jf(q,R.mode,G,null),q.return=R,q;nv(R,q)}return null}function L(R,q,G,ee){var ae=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ae!==null?null:l(R,q,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case G0:return G.key===ae?x(R,q,G,ee):null;case vp:return G.key===ae?b(R,q,G,ee):null;case sh:return ae=G._init,L(R,q,ae(G._payload),ee)}if(Qg(G)||Pg(G))return ae!==null?null:E(R,q,G,ee,null);nv(R,G)}return null}function F(R,q,G,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return R=R.get(G)||null,l(q,R,""+ee,ae);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case G0:return R=R.get(ee.key===null?G:ee.key)||null,x(q,R,ee,ae);case vp:return R=R.get(ee.key===null?G:ee.key)||null,b(q,R,ee,ae);case sh:var K=ee._init;return F(R,q,G,K(ee._payload),ae)}if(Qg(ee)||Pg(ee))return R=R.get(G)||null,E(q,R,ee,ae,null);nv(q,ee)}return null}function $(R,q,G,ee){for(var ae=null,K=null,le=q,xe=q=0,Le=null;le!==null&&xe<G.length;xe++){le.index>xe?(Le=le,le=null):Le=le.sibling;var Oe=L(R,le,G[xe],ee);if(Oe===null){le===null&&(le=Le);break}e&&le&&Oe.alternate===null&&t(R,le),q=c(Oe,q,xe),K===null?ae=Oe:K.sibling=Oe,K=Oe,le=Le}if(xe===G.length)return n(R,le),Yr&&If(R,xe),ae;if(le===null){for(;xe<G.length;xe++)le=A(R,G[xe],ee),le!==null&&(q=c(le,q,xe),K===null?ae=le:K.sibling=le,K=le);return Yr&&If(R,xe),ae}for(le=r(R,le);xe<G.length;xe++)Le=F(le,R,xe,G[xe],ee),Le!==null&&(e&&Le.alternate!==null&&le.delete(Le.key===null?xe:Le.key),q=c(Le,q,xe),K===null?ae=Le:K.sibling=Le,K=Le);return e&&le.forEach(function(Fe){return t(R,Fe)}),Yr&&If(R,xe),ae}function N(R,q,G,ee){var ae=Pg(G);if(typeof ae!="function")throw Error(St(150));if(G=ae.call(G),G==null)throw Error(St(151));for(var K=ae=null,le=q,xe=q=0,Le=null,Oe=G.next();le!==null&&!Oe.done;xe++,Oe=G.next()){le.index>xe?(Le=le,le=null):Le=le.sibling;var Fe=L(R,le,Oe.value,ee);if(Fe===null){le===null&&(le=Le);break}e&&le&&Fe.alternate===null&&t(R,le),q=c(Fe,q,xe),K===null?ae=Fe:K.sibling=Fe,K=Fe,le=Le}if(Oe.done)return n(R,le),Yr&&If(R,xe),ae;if(le===null){for(;!Oe.done;xe++,Oe=G.next())Oe=A(R,Oe.value,ee),Oe!==null&&(q=c(Oe,q,xe),K===null?ae=Oe:K.sibling=Oe,K=Oe);return Yr&&If(R,xe),ae}for(le=r(R,le);!Oe.done;xe++,Oe=G.next())Oe=F(le,R,xe,Oe.value,ee),Oe!==null&&(e&&Oe.alternate!==null&&le.delete(Oe.key===null?xe:Oe.key),q=c(Oe,q,xe),K===null?ae=Oe:K.sibling=Oe,K=Oe);return e&&le.forEach(function(Ge){return t(R,Ge)}),Yr&&If(R,xe),ae}function Z(R,q,G,ee){if(typeof G=="object"&&G!==null&&G.type===xp&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case G0:e:{for(var ae=G.key,K=q;K!==null;){if(K.key===ae){if(ae=G.type,ae===xp){if(K.tag===7){n(R,K.sibling),q=a(K,G.props.children),q.return=R,R=q;break e}}else if(K.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===sh&&pA(ae)===K.type){n(R,K.sibling),q=a(K,G.props),q.ref=Fg(R,K,G),q.return=R,R=q;break e}n(R,K);break}else t(R,K);K=K.sibling}G.type===xp?(q=jf(G.props.children,R.mode,ee,G.key),q.return=R,R=q):(ee=Zv(G.type,G.key,G.props,null,R.mode,ee),ee.ref=Fg(R,q,G),ee.return=R,R=ee)}return d(R);case vp:e:{for(K=G.key;q!==null;){if(q.key===K)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){n(R,q.sibling),q=a(q,G.children||[]),q.return=R,R=q;break e}else{n(R,q);break}else t(R,q);q=q.sibling}q=t2(G,R.mode,ee),q.return=R,R=q}return d(R);case sh:return K=G._init,Z(R,q,K(G._payload),ee)}if(Qg(G))return $(R,q,G,ee);if(Pg(G))return N(R,q,G,ee);nv(R,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,q!==null&&q.tag===6?(n(R,q.sibling),q=a(q,G),q.return=R,R=q):(n(R,q),q=e2(G,R.mode,ee),q.return=R,R=q),d(R)):n(R,q)}return Z}var Zp=BI(!0),$I=BI(!1),o_={},ru=Rh(o_),Oy=Rh(o_),Fy=Rh(o_);function $f(e){if(e===o_)throw Error(St(174));return e}function xE(e,t){switch(Ur(Fy,t),Ur(Oy,e),Ur(ru,o_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Q2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Q2(t,e)}Xr(ru),Ur(ru,t)}function Kp(){Xr(ru),Xr(Oy),Xr(Fy)}function NI(e){$f(Fy.current);var t=$f(ru.current),n=Q2(t,e.type);t!==n&&(Ur(Oy,e),Ur(ru,n))}function bE(e){Oy.current===e&&(Xr(ru),Xr(Oy))}var fi=Rh(0);function b1(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zw=[];function wE(){for(var e=0;e<Zw.length;e++)Zw[e]._workInProgressVersionPrimary=null;Zw.length=0}var Vv=oc.ReactCurrentDispatcher,Kw=oc.ReactCurrentBatchConfig,Zf=0,pi=null,eo=null,fo=null,w1=!1,cy=!1,Ry=0,V8=0;function Go(){throw Error(St(321))}function SE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vl(e[n],t[n]))return!1;return!0}function CE(e,t,n,r,a,c){if(Zf=c,pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vv.current=e===null||e.memoizedState===null?W8:Z8,e=n(r,a),cy){c=0;do{if(cy=!1,Ry=0,25<=c)throw Error(St(301));c+=1,fo=eo=null,t.updateQueue=null,Vv.current=K8,e=n(r,a)}while(cy)}if(Vv.current=S1,t=eo!==null&&eo.next!==null,Zf=0,fo=eo=pi=null,w1=!1,t)throw Error(St(300));return e}function EE(){var e=Ry!==0;return Ry=0,e}function Yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?pi.memoizedState=fo=e:fo=fo.next=e,fo}function Ts(){if(eo===null){var e=pi.alternate;e=e!==null?e.memoizedState:null}else e=eo.next;var t=fo===null?pi.memoizedState:fo.next;if(t!==null)fo=t,eo=e;else{if(e===null)throw Error(St(310));eo=e,e={memoizedState:eo.memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},fo===null?pi.memoizedState=fo=e:fo=fo.next=e}return fo}function Dy(e,t){return typeof t=="function"?t(e):t}function Xw(e){var t=Ts(),n=t.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,c=n.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}r.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,r=r.baseState;var l=d=null,x=null,b=c;do{var E=b.lane;if((Zf&E)===E)x!==null&&(x=x.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),r=b.hasEagerState?b.eagerState:e(r,b.action);else{var A={lane:E,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};x===null?(l=x=A,d=r):x=x.next=A,pi.lanes|=E,Kf|=E}b=b.next}while(b!==null&&b!==c);x===null?d=r:x.next=l,vl(r,t.memoizedState)||(Ta=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=x,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do c=a.lane,pi.lanes|=c,Kf|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yw(e){var t=Ts(),n=t.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);vl(c,t.memoizedState)||(Ta=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,r]}function UI(){}function jI(e,t){var n=pi,r=Ts(),a=t(),c=!vl(r.memoizedState,a);if(c&&(r.memoizedState=a,Ta=!0),r=r.queue,kE(GI.bind(null,n,r,e),[e]),r.getSnapshot!==t||c||fo!==null&&fo.memoizedState.tag&1){if(n.flags|=2048,zy(9,qI.bind(null,n,r,a,t),void 0,null),po===null)throw Error(St(349));Zf&30||VI(n,t,a)}return a}function VI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qI(e,t,n,r){t.value=n,t.getSnapshot=r,HI(t)&&WI(e)}function GI(e,t,n){return n(function(){HI(t)&&WI(e)})}function HI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vl(e,n)}catch{return!0}}function WI(e){var t=tc(e,1);t!==null&&gl(t,e,1,-1)}function mA(e){var t=Yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:e},t.queue=e,e=e.dispatch=H8.bind(null,pi,e),[t.memoizedState,e]}function zy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=pi.updateQueue,t===null?(t={lastEffect:null,stores:null},pi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ZI(){return Ts().memoizedState}function qv(e,t,n,r){var a=Yl();pi.flags|=e,a.memoizedState=zy(1|t,n,void 0,r===void 0?null:r)}function lx(e,t,n,r){var a=Ts();r=r===void 0?null:r;var c=void 0;if(eo!==null){var d=eo.memoizedState;if(c=d.destroy,r!==null&&SE(r,d.deps)){a.memoizedState=zy(t,n,c,r);return}}pi.flags|=e,a.memoizedState=zy(1|t,n,c,r)}function gA(e,t){return qv(8390656,8,e,t)}function kE(e,t){return lx(2048,8,e,t)}function KI(e,t){return lx(4,2,e,t)}function XI(e,t){return lx(4,4,e,t)}function YI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JI(e,t,n){return n=n!=null?n.concat([e]):null,lx(4,4,YI.bind(null,t,e),n)}function AE(){}function QI(e,t){var n=Ts();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SE(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function e6(e,t){var n=Ts();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SE(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function t6(e,t,n){return Zf&21?(vl(n,t)||(n=iI(),pi.lanes|=n,Kf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ta=!0),e.memoizedState=n)}function q8(e,t){var n=kr;kr=n!==0&&4>n?n:4,e(!0);var r=Kw.transition;Kw.transition={};try{e(!1),t()}finally{kr=n,Kw.transition=r}}function n6(){return Ts().memoizedState}function G8(e,t,n){var r=Ch(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r6(e))i6(t,n);else if(n=FI(e,t,n,r),n!==null){var a=ua();gl(n,e,r,a),o6(n,t,r)}}function H8(e,t,n){var r=Ch(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r6(e))i6(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,l=c(d,n);if(a.hasEagerState=!0,a.eagerState=l,vl(l,d)){var x=t.interleaved;x===null?(a.next=a,_E(t)):(a.next=x.next,x.next=a),t.interleaved=a;return}}catch{}finally{}n=FI(e,t,a,r),n!==null&&(a=ua(),gl(n,e,r,a),o6(n,t,r))}}function r6(e){var t=e.alternate;return e===pi||t!==null&&t===pi}function i6(e,t){cy=w1=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function o6(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iE(e,n)}}var S1={readContext:As,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},W8={readContext:As,useCallback:function(e,t){return Yl().memoizedState=[e,t===void 0?null:t],e},useContext:As,useEffect:gA,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qv(4194308,4,YI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qv(4194308,4,e,t)},useInsertionEffect:function(e,t){return qv(4,2,e,t)},useMemo:function(e,t){var n=Yl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=G8.bind(null,pi,e),[r.memoizedState,e]},useRef:function(e){var t=Yl();return e={current:e},t.memoizedState=e},useState:mA,useDebugValue:AE,useDeferredValue:function(e){return Yl().memoizedState=e},useTransition:function(){var e=mA(!1),t=e[0];return e=q8.bind(null,e[1]),Yl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pi,a=Yl();if(Yr){if(n===void 0)throw Error(St(407));n=n()}else{if(n=t(),po===null)throw Error(St(349));Zf&30||VI(r,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,gA(GI.bind(null,r,c,e),[e]),r.flags|=2048,zy(9,qI.bind(null,r,c,n,t),void 0,null),n},useId:function(){var e=Yl(),t=po.identifierPrefix;if(Yr){var n=Xu,r=Ku;n=(r&~(1<<32-ml(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ry++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=V8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Z8={readContext:As,useCallback:QI,useContext:As,useEffect:kE,useImperativeHandle:JI,useInsertionEffect:KI,useLayoutEffect:XI,useMemo:e6,useReducer:Xw,useRef:ZI,useState:function(){return Xw(Dy)},useDebugValue:AE,useDeferredValue:function(e){var t=Ts();return t6(t,eo.memoizedState,e)},useTransition:function(){var e=Xw(Dy)[0],t=Ts().memoizedState;return[e,t]},useMutableSource:UI,useSyncExternalStore:jI,useId:n6,unstable_isNewReconciler:!1},K8={readContext:As,useCallback:QI,useContext:As,useEffect:kE,useImperativeHandle:JI,useInsertionEffect:KI,useLayoutEffect:XI,useMemo:e6,useReducer:Yw,useRef:ZI,useState:function(){return Yw(Dy)},useDebugValue:AE,useDeferredValue:function(e){var t=Ts();return eo===null?t.memoizedState=e:t6(t,eo.memoizedState,e)},useTransition:function(){var e=Yw(Dy)[0],t=Ts().memoizedState;return[e,t]},useMutableSource:UI,useSyncExternalStore:jI,useId:n6,unstable_isNewReconciler:!1};function Xp(e,t){try{var n="",r=t;do n+=SD(r),r=r.return;while(r);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function Jw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wS(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var X8=typeof WeakMap=="function"?WeakMap:Map;function a6(e,t,n){n=Ju(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){E1||(E1=!0,LS=r),wS(e,t)},n}function s6(e,t,n){n=Ju(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){wS(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){wS(e,t),typeof r!="function"&&(Sh===null?Sh=new Set([this]):Sh.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function yA(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new X8;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=cz.bind(null,e,t,n),t.then(e,e))}function _A(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vA(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ju(-1,1),t.tag=2,wh(n,t,1))),n.lanes|=1),e)}var Y8=oc.ReactCurrentOwner,Ta=!1;function la(e,t,n,r){t.child=e===null?$I(t,null,n,r):Zp(t,e.child,n,r)}function xA(e,t,n,r,a){n=n.render;var c=t.ref;return Bp(t,a),r=CE(e,t,n,r,c,a),n=EE(),e!==null&&!Ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,nc(e,t,a)):(Yr&&n&&fE(t),t.flags|=1,la(e,t,r,a),t.child)}function bA(e,t,n,r,a){if(e===null){var c=n.type;return typeof c=="function"&&!RE(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,l6(e,t,c,r,a)):(e=Zv(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:Py,n(d,r)&&e.ref===t.ref)return nc(e,t,a)}return t.flags|=1,e=Eh(c,r),e.ref=t.ref,e.return=t,t.child=e}function l6(e,t,n,r,a){if(e!==null){var c=e.memoizedProps;if(Py(c,r)&&e.ref===t.ref)if(Ta=!1,t.pendingProps=r=c,(e.lanes&a)!==0)e.flags&131072&&(Ta=!0);else return t.lanes=e.lanes,nc(e,t,a)}return SS(e,t,n,r,a)}function u6(e,t,n){var r=t.pendingProps,a=r.children,c=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(Ip,Ha),Ha|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ur(Ip,Ha),Ha|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=c!==null?c.baseLanes:n,Ur(Ip,Ha),Ha|=r}else c!==null?(r=c.baseLanes|n,t.memoizedState=null):r=n,Ur(Ip,Ha),Ha|=r;return la(e,t,a,n),t.child}function c6(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function SS(e,t,n,r,a){var c=Ia(n)?Hf:Ko.current;return c=Hp(t,c),Bp(t,a),n=CE(e,t,n,r,c,a),r=EE(),e!==null&&!Ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,nc(e,t,a)):(Yr&&r&&fE(t),t.flags|=1,la(e,t,n,a),t.child)}function wA(e,t,n,r,a){if(Ia(n)){var c=!0;m1(t)}else c=!1;if(Bp(t,a),t.stateNode===null)Gv(e,t),zI(t,n,r),bS(t,n,r,a),r=!0;else if(e===null){var d=t.stateNode,l=t.memoizedProps;d.props=l;var x=d.context,b=n.contextType;typeof b=="object"&&b!==null?b=As(b):(b=Ia(n)?Hf:Ko.current,b=Hp(t,b));var E=n.getDerivedStateFromProps,A=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function";A||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==r||x!==b)&&dA(t,d,r,b),lh=!1;var L=t.memoizedState;d.state=L,x1(t,r,d,a),x=t.memoizedState,l!==r||L!==x||Pa.current||lh?(typeof E=="function"&&(xS(t,n,E,r),x=t.memoizedState),(l=lh||fA(t,n,l,r,L,x,b))?(A||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=x),d.props=r,d.state=x,d.context=b,r=l):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,RI(e,t),l=t.memoizedProps,b=t.type===t.elementType?l:hl(t.type,l),d.props=b,A=t.pendingProps,L=d.context,x=n.contextType,typeof x=="object"&&x!==null?x=As(x):(x=Ia(n)?Hf:Ko.current,x=Hp(t,x));var F=n.getDerivedStateFromProps;(E=typeof F=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==A||L!==x)&&dA(t,d,r,x),lh=!1,L=t.memoizedState,d.state=L,x1(t,r,d,a);var $=t.memoizedState;l!==A||L!==$||Pa.current||lh?(typeof F=="function"&&(xS(t,n,F,r),$=t.memoizedState),(b=lh||fA(t,n,b,r,L,$,x)||!1)?(E||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,$,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,$,x)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=$),d.props=r,d.state=$,d.context=x,r=b):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),r=!1)}return CS(e,t,n,r,c,a)}function CS(e,t,n,r,a,c){c6(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return a&&sA(t,n,!1),nc(e,t,c);r=t.stateNode,Y8.current=t;var l=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=Zp(t,e.child,null,c),t.child=Zp(t,null,l,c)):la(e,t,l,c),t.memoizedState=r.state,a&&sA(t,n,!0),t.child}function h6(e){var t=e.stateNode;t.pendingContext?aA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&aA(e,t.context,!1),xE(e,t.containerInfo)}function SA(e,t,n,r,a){return Wp(),pE(a),t.flags|=256,la(e,t,n,r),t.child}var ES={dehydrated:null,treeContext:null,retryLane:0};function kS(e){return{baseLanes:e,cachePool:null,transitions:null}}function f6(e,t,n){var r=t.pendingProps,a=fi.current,c=!1,d=(t.flags&128)!==0,l;if((l=d)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ur(fi,a&1),e===null)return _S(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=r.children,e=r.fallback,c?(r=t.mode,c=t.child,d={mode:"hidden",children:d},!(r&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=hx(d,r,0,null),e=jf(e,r,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=kS(n),t.memoizedState=ES,e):TE(t,d));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return J8(e,t,d,r,l,a,n);if(c){c=r.fallback,d=t.mode,a=e.child,l=a.sibling;var x={mode:"hidden",children:r.children};return!(d&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=x,t.deletions=null):(r=Eh(a,x),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?c=Eh(l,c):(c=jf(c,d,n,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,d=e.child.memoizedState,d=d===null?kS(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~n,t.memoizedState=ES,r}return c=e.child,e=c.sibling,r=Eh(c,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function TE(e,t){return t=hx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rv(e,t,n,r){return r!==null&&pE(r),Zp(t,e.child,null,n),e=TE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function J8(e,t,n,r,a,c,d){if(n)return t.flags&256?(t.flags&=-257,r=Jw(Error(St(422))),rv(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=r.fallback,a=t.mode,r=hx({mode:"visible",children:r.children},a,0,null),c=jf(c,a,d,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,t.mode&1&&Zp(t,e.child,null,d),t.child.memoizedState=kS(d),t.memoizedState=ES,c);if(!(t.mode&1))return rv(e,t,d,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,c=Error(St(419)),r=Jw(c,r,void 0),rv(e,t,d,r)}if(l=(d&e.childLanes)!==0,Ta||l){if(r=po,r!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,tc(e,a),gl(r,e,a,-1))}return FE(),r=Jw(Error(St(421))),rv(e,t,d,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=hz.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Wa=bh(a.nextSibling),Ya=t,Yr=!0,dl=null,e!==null&&(xs[bs++]=Ku,xs[bs++]=Xu,xs[bs++]=Wf,Ku=e.id,Xu=e.overflow,Wf=t),t=TE(t,r.children),t.flags|=4096,t)}function CA(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vS(e.return,t,n)}function Qw(e,t,n,r,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=n,c.tailMode=a)}function d6(e,t,n){var r=t.pendingProps,a=r.revealOrder,c=r.tail;if(la(e,t,r.children,n),r=fi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&CA(e,n,t);else if(e.tag===19)CA(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ur(fi,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&b1(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Qw(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&b1(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Qw(t,!0,n,null,c);break;case"together":Qw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(St(153));if(t.child!==null){for(e=t.child,n=Eh(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Eh(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Q8(e,t,n){switch(t.tag){case 3:h6(t),Wp();break;case 5:NI(t);break;case 1:Ia(t.type)&&m1(t);break;case 4:xE(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ur(_1,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ur(fi,fi.current&1),t.flags|=128,null):n&t.child.childLanes?f6(e,t,n):(Ur(fi,fi.current&1),e=nc(e,t,n),e!==null?e.sibling:null);Ur(fi,fi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return d6(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ur(fi,fi.current),r)break;return null;case 22:case 23:return t.lanes=0,u6(e,t,n)}return nc(e,t,n)}var p6,AS,m6,g6;p6=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};AS=function(){};m6=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,$f(ru.current);var c=null;switch(n){case"input":a=K2(e,a),r=K2(e,r),c=[];break;case"select":a=mi({},a,{value:void 0}),r=mi({},r,{value:void 0}),c=[];break;case"textarea":a=J2(e,a),r=J2(e,r),c=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=d1)}eS(n,r);var d;n=null;for(b in a)if(!r.hasOwnProperty(b)&&a.hasOwnProperty(b)&&a[b]!=null)if(b==="style"){var l=a[b];for(d in l)l.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(wy.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in r){var x=r[b];if(l=a!=null?a[b]:void 0,r.hasOwnProperty(b)&&x!==l&&(x!=null||l!=null))if(b==="style")if(l){for(d in l)!l.hasOwnProperty(d)||x&&x.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in x)x.hasOwnProperty(d)&&l[d]!==x[d]&&(n||(n={}),n[d]=x[d])}else n||(c||(c=[]),c.push(b,n)),n=x;else b==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,l=l?l.__html:void 0,x!=null&&l!==x&&(c=c||[]).push(b,x)):b==="children"?typeof x!="string"&&typeof x!="number"||(c=c||[]).push(b,""+x):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(wy.hasOwnProperty(b)?(x!=null&&b==="onScroll"&&Zr("scroll",e),c||l===x||(c=[])):(c=c||[]).push(b,x))}n&&(c=c||[]).push("style",n);var b=c;(t.updateQueue=b)&&(t.flags|=4)}};g6=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rg(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ez(e,t,n){var r=t.pendingProps;switch(dE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:return Ia(t.type)&&p1(),Ho(t),null;case 3:return r=t.stateNode,Kp(),Xr(Pa),Xr(Ko),wE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(tv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dl!==null&&(RS(dl),dl=null))),AS(e,t),Ho(t),null;case 5:bE(t);var a=$f(Fy.current);if(n=t.type,e!==null&&t.stateNode!=null)m6(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(St(166));return Ho(t),null}if(e=$f(ru.current),tv(t)){r=t.stateNode,n=t.type;var c=t.memoizedProps;switch(r[Ql]=t,r[Ly]=c,e=(t.mode&1)!==0,n){case"dialog":Zr("cancel",r),Zr("close",r);break;case"iframe":case"object":case"embed":Zr("load",r);break;case"video":case"audio":for(a=0;a<ty.length;a++)Zr(ty[a],r);break;case"source":Zr("error",r);break;case"img":case"image":case"link":Zr("error",r),Zr("load",r);break;case"details":Zr("toggle",r);break;case"input":O3(r,c),Zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!c.multiple},Zr("invalid",r);break;case"textarea":R3(r,c),Zr("invalid",r)}eS(n,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var l=c[d];d==="children"?typeof l=="string"?r.textContent!==l&&(c.suppressHydrationWarning!==!0&&ev(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(c.suppressHydrationWarning!==!0&&ev(r.textContent,l,e),a=["children",""+l]):wy.hasOwnProperty(d)&&l!=null&&d==="onScroll"&&Zr("scroll",r)}switch(n){case"input":H0(r),F3(r,c,!0);break;case"textarea":H0(r),D3(r);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(r.onclick=d1)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=VP(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[Ql]=t,e[Ly]=r,p6(e,t,!1,!1),t.stateNode=e;e:{switch(d=tS(n,r),n){case"dialog":Zr("cancel",e),Zr("close",e),a=r;break;case"iframe":case"object":case"embed":Zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<ty.length;a++)Zr(ty[a],e);a=r;break;case"source":Zr("error",e),a=r;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),a=r;break;case"details":Zr("toggle",e),a=r;break;case"input":O3(e,r),a=K2(e,r),Zr("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=mi({},r,{value:void 0}),Zr("invalid",e);break;case"textarea":R3(e,r),a=J2(e,r),Zr("invalid",e);break;default:a=r}eS(n,a),l=a;for(c in l)if(l.hasOwnProperty(c)){var x=l[c];c==="style"?HP(e,x):c==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&qP(e,x)):c==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Sy(e,x):typeof x=="number"&&Sy(e,""+x):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wy.hasOwnProperty(c)?x!=null&&c==="onScroll"&&Zr("scroll",e):x!=null&&JC(e,c,x,d))}switch(n){case"input":H0(e),F3(e,r,!1);break;case"textarea":H0(e),D3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ph(r.value));break;case"select":e.multiple=!!r.multiple,c=r.value,c!=null?Fp(e,!!r.multiple,c,!1):r.defaultValue!=null&&Fp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=d1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&t.stateNode!=null)g6(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(St(166));if(n=$f(Fy.current),$f(ru.current),tv(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ql]=t,(c=r.nodeValue!==n)&&(e=Ya,e!==null))switch(e.tag){case 3:ev(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ev(r.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ql]=t,t.stateNode=r}return Ho(t),null;case 13:if(Xr(fi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yr&&Wa!==null&&t.mode&1&&!(t.flags&128))OI(),Wp(),t.flags|=98560,c=!1;else if(c=tv(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(St(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(St(317));c[Ql]=t}else Wp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ho(t),c=!1}else dl!==null&&(RS(dl),dl=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||fi.current&1?to===0&&(to=3):FE())),t.updateQueue!==null&&(t.flags|=4),Ho(t),null);case 4:return Kp(),AS(e,t),e===null&&Iy(t.stateNode.containerInfo),Ho(t),null;case 10:return yE(t.type._context),Ho(t),null;case 17:return Ia(t.type)&&p1(),Ho(t),null;case 19:if(Xr(fi),c=t.memoizedState,c===null)return Ho(t),null;if(r=(t.flags&128)!==0,d=c.rendering,d===null)if(r)Rg(c,!1);else{if(to!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=b1(e),d!==null){for(t.flags|=128,Rg(c,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)c=n,e=r,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ur(fi,fi.current&1|2),t.child}e=e.sibling}c.tail!==null&&Ii()>Yp&&(t.flags|=128,r=!0,Rg(c,!1),t.lanes=4194304)}else{if(!r)if(e=b1(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rg(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!Yr)return Ho(t),null}else 2*Ii()-c.renderingStartTime>Yp&&n!==1073741824&&(t.flags|=128,r=!0,Rg(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(n=c.last,n!==null?n.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ii(),t.sibling=null,n=fi.current,Ur(fi,r?n&1|2:n&1),t):(Ho(t),null);case 22:case 23:return OE(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ha&1073741824&&(Ho(t),t.subtreeFlags&6&&(t.flags|=8192)):Ho(t),null;case 24:return null;case 25:return null}throw Error(St(156,t.tag))}function tz(e,t){switch(dE(t),t.tag){case 1:return Ia(t.type)&&p1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kp(),Xr(Pa),Xr(Ko),wE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bE(t),null;case 13:if(Xr(fi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(St(340));Wp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xr(fi),null;case 4:return Kp(),null;case 10:return yE(t.type._context),null;case 22:case 23:return OE(),null;case 24:return null;default:return null}}var iv=!1,Wo=!1,nz=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Pp(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Si(e,t,r)}else n.current=null}function TS(e,t,n){try{n()}catch(r){Si(e,t,r)}}var EA=!1;function rz(e,t){if(hS=c1,e=xI(),hE(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var d=0,l=-1,x=-1,b=0,E=0,A=e,L=null;t:for(;;){for(var F;A!==n||a!==0&&A.nodeType!==3||(l=d+a),A!==c||r!==0&&A.nodeType!==3||(x=d+r),A.nodeType===3&&(d+=A.nodeValue.length),(F=A.firstChild)!==null;)L=A,A=F;for(;;){if(A===e)break t;if(L===n&&++b===a&&(l=d),L===c&&++E===r&&(x=d),(F=A.nextSibling)!==null)break;A=L,L=A.parentNode}A=F}n=l===-1||x===-1?null:{start:l,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(fS={focusedElem:e,selectionRange:n},c1=!1,Kt=t;Kt!==null;)if(t=Kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Kt=e;else for(;Kt!==null;){t=Kt;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var N=$.memoizedProps,Z=$.memoizedState,R=t.stateNode,q=R.getSnapshotBeforeUpdate(t.elementType===t.type?N:hl(t.type,N),Z);R.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(ee){Si(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,Kt=e;break}Kt=t.return}return $=EA,EA=!1,$}function hy(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&TS(t,n,c)}a=a.next}while(a!==r)}}function ux(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function PS(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function y6(e){var t=e.alternate;t!==null&&(e.alternate=null,y6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ql],delete t[Ly],delete t[mS],delete t[$8],delete t[N8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _6(e){return e.tag===5||e.tag===3||e.tag===4}function kA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function IS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=d1));else if(r!==4&&(e=e.child,e!==null))for(IS(e,t,n),e=e.sibling;e!==null;)IS(e,t,n),e=e.sibling}function MS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(MS(e,t,n),e=e.sibling;e!==null;)MS(e,t,n),e=e.sibling}var ko=null,fl=!1;function ih(e,t,n){for(n=n.child;n!==null;)v6(e,t,n),n=n.sibling}function v6(e,t,n){if(nu&&typeof nu.onCommitFiberUnmount=="function")try{nu.onCommitFiberUnmount(tx,n)}catch{}switch(n.tag){case 5:Wo||Pp(n,t);case 6:var r=ko,a=fl;ko=null,ih(e,t,n),ko=r,fl=a,ko!==null&&(fl?(e=ko,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ko.removeChild(n.stateNode));break;case 18:ko!==null&&(fl?(e=ko,n=n.stateNode,e.nodeType===8?Hw(e.parentNode,n):e.nodeType===1&&Hw(e,n),Ay(e)):Hw(ko,n.stateNode));break;case 4:r=ko,a=fl,ko=n.stateNode.containerInfo,fl=!0,ih(e,t,n),ko=r,fl=a;break;case 0:case 11:case 14:case 15:if(!Wo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&TS(n,t,d),a=a.next}while(a!==r)}ih(e,t,n);break;case 1:if(!Wo&&(Pp(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Si(n,t,l)}ih(e,t,n);break;case 21:ih(e,t,n);break;case 22:n.mode&1?(Wo=(r=Wo)||n.memoizedState!==null,ih(e,t,n),Wo=r):ih(e,t,n);break;default:ih(e,t,n)}}function AA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nz),t.forEach(function(r){var a=fz.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function ll(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var c=e,d=t,l=d;e:for(;l!==null;){switch(l.tag){case 5:ko=l.stateNode,fl=!1;break e;case 3:ko=l.stateNode.containerInfo,fl=!0;break e;case 4:ko=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(ko===null)throw Error(St(160));v6(c,d,a),ko=null,fl=!1;var x=a.alternate;x!==null&&(x.return=null),a.return=null}catch(b){Si(a,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x6(t,e),t=t.sibling}function x6(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ll(t,e),Kl(e),r&4){try{hy(3,e,e.return),ux(3,e)}catch(N){Si(e,e.return,N)}try{hy(5,e,e.return)}catch(N){Si(e,e.return,N)}}break;case 1:ll(t,e),Kl(e),r&512&&n!==null&&Pp(n,n.return);break;case 5:if(ll(t,e),Kl(e),r&512&&n!==null&&Pp(n,n.return),e.flags&32){var a=e.stateNode;try{Sy(a,"")}catch(N){Si(e,e.return,N)}}if(r&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=n!==null?n.memoizedProps:c,l=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{l==="input"&&c.type==="radio"&&c.name!=null&&UP(a,c),tS(l,d);var b=tS(l,c);for(d=0;d<x.length;d+=2){var E=x[d],A=x[d+1];E==="style"?HP(a,A):E==="dangerouslySetInnerHTML"?qP(a,A):E==="children"?Sy(a,A):JC(a,E,A,b)}switch(l){case"input":X2(a,c);break;case"textarea":jP(a,c);break;case"select":var L=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var F=c.value;F!=null?Fp(a,!!c.multiple,F,!1):L!==!!c.multiple&&(c.defaultValue!=null?Fp(a,!!c.multiple,c.defaultValue,!0):Fp(a,!!c.multiple,c.multiple?[]:"",!1))}a[Ly]=c}catch(N){Si(e,e.return,N)}}break;case 6:if(ll(t,e),Kl(e),r&4){if(e.stateNode===null)throw Error(St(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(N){Si(e,e.return,N)}}break;case 3:if(ll(t,e),Kl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ay(t.containerInfo)}catch(N){Si(e,e.return,N)}break;case 4:ll(t,e),Kl(e);break;case 13:ll(t,e),Kl(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(ME=Ii())),r&4&&AA(e);break;case 22:if(E=n!==null&&n.memoizedState!==null,e.mode&1?(Wo=(b=Wo)||E,ll(t,e),Wo=b):ll(t,e),Kl(e),r&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!E&&e.mode&1)for(Kt=e,E=e.child;E!==null;){for(A=Kt=E;Kt!==null;){switch(L=Kt,F=L.child,L.tag){case 0:case 11:case 14:case 15:hy(4,L,L.return);break;case 1:Pp(L,L.return);var $=L.stateNode;if(typeof $.componentWillUnmount=="function"){r=L,n=L.return;try{t=r,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(N){Si(r,n,N)}}break;case 5:Pp(L,L.return);break;case 22:if(L.memoizedState!==null){PA(A);continue}}F!==null?(F.return=L,Kt=F):PA(A)}E=E.sibling}e:for(E=null,A=e;;){if(A.tag===5){if(E===null){E=A;try{a=A.stateNode,b?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(l=A.stateNode,x=A.memoizedProps.style,d=x!=null&&x.hasOwnProperty("display")?x.display:null,l.style.display=GP("display",d))}catch(N){Si(e,e.return,N)}}}else if(A.tag===6){if(E===null)try{A.stateNode.nodeValue=b?"":A.memoizedProps}catch(N){Si(e,e.return,N)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;E===A&&(E=null),A=A.return}E===A&&(E=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ll(t,e),Kl(e),r&4&&AA(e);break;case 21:break;default:ll(t,e),Kl(e)}}function Kl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_6(n)){var r=n;break e}n=n.return}throw Error(St(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Sy(a,""),r.flags&=-33);var c=kA(e);MS(e,c,a);break;case 3:case 4:var d=r.stateNode.containerInfo,l=kA(e);IS(e,l,d);break;default:throw Error(St(161))}}catch(x){Si(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iz(e,t,n){Kt=e,b6(e)}function b6(e,t,n){for(var r=(e.mode&1)!==0;Kt!==null;){var a=Kt,c=a.child;if(a.tag===22&&r){var d=a.memoizedState!==null||iv;if(!d){var l=a.alternate,x=l!==null&&l.memoizedState!==null||Wo;l=iv;var b=Wo;if(iv=d,(Wo=x)&&!b)for(Kt=a;Kt!==null;)d=Kt,x=d.child,d.tag===22&&d.memoizedState!==null?IA(a):x!==null?(x.return=d,Kt=x):IA(a);for(;c!==null;)Kt=c,b6(c),c=c.sibling;Kt=a,iv=l,Wo=b}TA(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Kt=c):TA(e)}}function TA(e){for(;Kt!==null;){var t=Kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wo||ux(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Wo)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:hl(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&hA(t,c,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hA(t,d,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var E=b.memoizedState;if(E!==null){var A=E.dehydrated;A!==null&&Ay(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}Wo||t.flags&512&&PS(t)}catch(L){Si(t,t.return,L)}}if(t===e){Kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function PA(e){for(;Kt!==null;){var t=Kt;if(t===e){Kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function IA(e){for(;Kt!==null;){var t=Kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ux(4,t)}catch(x){Si(t,n,x)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(x){Si(t,a,x)}}var c=t.return;try{PS(t)}catch(x){Si(t,c,x)}break;case 5:var d=t.return;try{PS(t)}catch(x){Si(t,d,x)}}}catch(x){Si(t,t.return,x)}if(t===e){Kt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Kt=l;break}Kt=t.return}}var oz=Math.ceil,C1=oc.ReactCurrentDispatcher,PE=oc.ReactCurrentOwner,Es=oc.ReactCurrentBatchConfig,ur=0,po=null,qi=null,To=0,Ha=0,Ip=Rh(0),to=0,By=null,Kf=0,cx=0,IE=0,fy=null,Aa=null,ME=0,Yp=1/0,qu=null,E1=!1,LS=null,Sh=null,ov=!1,ph=null,k1=0,dy=0,OS=null,Hv=-1,Wv=0;function ua(){return ur&6?Ii():Hv!==-1?Hv:Hv=Ii()}function Ch(e){return e.mode&1?ur&2&&To!==0?To&-To:j8.transition!==null?(Wv===0&&(Wv=iI()),Wv):(e=kr,e!==0||(e=window.event,e=e===void 0?16:hI(e.type)),e):1}function gl(e,t,n,r){if(50<dy)throw dy=0,OS=null,Error(St(185));n_(e,n,r),(!(ur&2)||e!==po)&&(e===po&&(!(ur&2)&&(cx|=n),to===4&&hh(e,To)),Ma(e,r),n===1&&ur===0&&!(t.mode&1)&&(Yp=Ii()+500,ax&&Dh()))}function Ma(e,t){var n=e.callbackNode;jD(e,t);var r=u1(e,e===po?To:0);if(r===0)n!==null&&$3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$3(n),t===1)e.tag===0?U8(MA.bind(null,e)):II(MA.bind(null,e)),z8(function(){!(ur&6)&&Dh()}),n=null;else{switch(oI(r)){case 1:n=rE;break;case 4:n=nI;break;case 16:n=l1;break;case 536870912:n=rI;break;default:n=l1}n=P6(n,w6.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function w6(e,t){if(Hv=-1,Wv=0,ur&6)throw Error(St(327));var n=e.callbackNode;if($p()&&e.callbackNode!==n)return null;var r=u1(e,e===po?To:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=A1(e,r);else{t=r;var a=ur;ur|=2;var c=C6();(po!==e||To!==t)&&(qu=null,Yp=Ii()+500,Uf(e,t));do try{lz();break}catch(l){S6(e,l)}while(1);gE(),C1.current=c,ur=a,qi!==null?t=0:(po=null,To=0,t=to)}if(t!==0){if(t===2&&(a=aS(e),a!==0&&(r=a,t=FS(e,a))),t===1)throw n=By,Uf(e,0),hh(e,r),Ma(e,Ii()),n;if(t===6)hh(e,r);else{if(a=e.current.alternate,!(r&30)&&!az(a)&&(t=A1(e,r),t===2&&(c=aS(e),c!==0&&(r=c,t=FS(e,c))),t===1))throw n=By,Uf(e,0),hh(e,r),Ma(e,Ii()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(St(345));case 2:Mf(e,Aa,qu);break;case 3:if(hh(e,r),(r&130023424)===r&&(t=ME+500-Ii(),10<t)){if(u1(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ua(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pS(Mf.bind(null,e,Aa,qu),t);break}Mf(e,Aa,qu);break;case 4:if(hh(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var d=31-ml(r);c=1<<d,d=t[d],d>a&&(a=d),r&=~c}if(r=a,r=Ii()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oz(r/1960))-r,10<r){e.timeoutHandle=pS(Mf.bind(null,e,Aa,qu),r);break}Mf(e,Aa,qu);break;case 5:Mf(e,Aa,qu);break;default:throw Error(St(329))}}}return Ma(e,Ii()),e.callbackNode===n?w6.bind(null,e):null}function FS(e,t){var n=fy;return e.current.memoizedState.isDehydrated&&(Uf(e,t).flags|=256),e=A1(e,t),e!==2&&(t=Aa,Aa=n,t!==null&&RS(t)),e}function RS(e){Aa===null?Aa=e:Aa.push.apply(Aa,e)}function az(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],c=a.getSnapshot;a=a.value;try{if(!vl(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hh(e,t){for(t&=~IE,t&=~cx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ml(t),r=1<<n;e[n]=-1,t&=~r}}function MA(e){if(ur&6)throw Error(St(327));$p();var t=u1(e,0);if(!(t&1))return Ma(e,Ii()),null;var n=A1(e,t);if(e.tag!==0&&n===2){var r=aS(e);r!==0&&(t=r,n=FS(e,r))}if(n===1)throw n=By,Uf(e,0),hh(e,t),Ma(e,Ii()),n;if(n===6)throw Error(St(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mf(e,Aa,qu),Ma(e,Ii()),null}function LE(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(Yp=Ii()+500,ax&&Dh())}}function Xf(e){ph!==null&&ph.tag===0&&!(ur&6)&&$p();var t=ur;ur|=1;var n=Es.transition,r=kr;try{if(Es.transition=null,kr=1,e)return e()}finally{kr=r,Es.transition=n,ur=t,!(ur&6)&&Dh()}}function OE(){Ha=Ip.current,Xr(Ip)}function Uf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,D8(n)),qi!==null)for(n=qi.return;n!==null;){var r=n;switch(dE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&p1();break;case 3:Kp(),Xr(Pa),Xr(Ko),wE();break;case 5:bE(r);break;case 4:Kp();break;case 13:Xr(fi);break;case 19:Xr(fi);break;case 10:yE(r.type._context);break;case 22:case 23:OE()}n=n.return}if(po=e,qi=e=Eh(e.current,null),To=Ha=t,to=0,By=null,IE=cx=Kf=0,Aa=fy=null,Bf!==null){for(t=0;t<Bf.length;t++)if(n=Bf[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,c=n.pending;if(c!==null){var d=c.next;c.next=a,r.next=d}n.pending=r}Bf=null}return e}function S6(e,t){do{var n=qi;try{if(gE(),Vv.current=S1,w1){for(var r=pi.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}w1=!1}if(Zf=0,fo=eo=pi=null,cy=!1,Ry=0,PE.current=null,n===null||n.return===null){to=1,By=t,qi=null;break}e:{var c=e,d=n.return,l=n,x=t;if(t=To,l.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var b=x,E=l,A=E.tag;if(!(E.mode&1)&&(A===0||A===11||A===15)){var L=E.alternate;L?(E.updateQueue=L.updateQueue,E.memoizedState=L.memoizedState,E.lanes=L.lanes):(E.updateQueue=null,E.memoizedState=null)}var F=_A(d);if(F!==null){F.flags&=-257,vA(F,d,l,c,t),F.mode&1&&yA(c,b,t),t=F,x=b;var $=t.updateQueue;if($===null){var N=new Set;N.add(x),t.updateQueue=N}else $.add(x);break e}else{if(!(t&1)){yA(c,b,t),FE();break e}x=Error(St(426))}}else if(Yr&&l.mode&1){var Z=_A(d);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),vA(Z,d,l,c,t),pE(Xp(x,l));break e}}c=x=Xp(x,l),to!==4&&(to=2),fy===null?fy=[c]:fy.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var R=a6(c,x,t);cA(c,R);break e;case 1:l=x;var q=c.type,G=c.stateNode;if(!(c.flags&128)&&(typeof q.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Sh===null||!Sh.has(G)))){c.flags|=65536,t&=-t,c.lanes|=t;var ee=s6(c,l,t);cA(c,ee);break e}}c=c.return}while(c!==null)}k6(n)}catch(ae){t=ae,qi===n&&n!==null&&(qi=n=n.return);continue}break}while(1)}function C6(){var e=C1.current;return C1.current=S1,e===null?S1:e}function FE(){(to===0||to===3||to===2)&&(to=4),po===null||!(Kf&268435455)&&!(cx&268435455)||hh(po,To)}function A1(e,t){var n=ur;ur|=2;var r=C6();(po!==e||To!==t)&&(qu=null,Uf(e,t));do try{sz();break}catch(a){S6(e,a)}while(1);if(gE(),ur=n,C1.current=r,qi!==null)throw Error(St(261));return po=null,To=0,to}function sz(){for(;qi!==null;)E6(qi)}function lz(){for(;qi!==null&&!OD();)E6(qi)}function E6(e){var t=T6(e.alternate,e,Ha);e.memoizedProps=e.pendingProps,t===null?k6(e):qi=t,PE.current=null}function k6(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tz(n,t),n!==null){n.flags&=32767,qi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{to=6,qi=null;return}}else if(n=ez(n,t,Ha),n!==null){qi=n;return}if(t=t.sibling,t!==null){qi=t;return}qi=t=e}while(t!==null);to===0&&(to=5)}function Mf(e,t,n){var r=kr,a=Es.transition;try{Es.transition=null,kr=1,uz(e,t,n,r)}finally{Es.transition=a,kr=r}return null}function uz(e,t,n,r){do $p();while(ph!==null);if(ur&6)throw Error(St(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(St(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(VD(e,c),e===po&&(qi=po=null,To=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ov||(ov=!0,P6(l1,function(){return $p(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Es.transition,Es.transition=null;var d=kr;kr=1;var l=ur;ur|=4,PE.current=null,rz(e,n),x6(n,e),P8(fS),c1=!!hS,fS=hS=null,e.current=n,iz(n),FD(),ur=l,kr=d,Es.transition=c}else e.current=n;if(ov&&(ov=!1,ph=e,k1=a),c=e.pendingLanes,c===0&&(Sh=null),zD(n.stateNode),Ma(e,Ii()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(E1)throw E1=!1,e=LS,LS=null,e;return k1&1&&e.tag!==0&&$p(),c=e.pendingLanes,c&1?e===OS?dy++:(dy=0,OS=e):dy=0,Dh(),null}function $p(){if(ph!==null){var e=oI(k1),t=Es.transition,n=kr;try{if(Es.transition=null,kr=16>e?16:e,ph===null)var r=!1;else{if(e=ph,ph=null,k1=0,ur&6)throw Error(St(331));var a=ur;for(ur|=4,Kt=e.current;Kt!==null;){var c=Kt,d=c.child;if(Kt.flags&16){var l=c.deletions;if(l!==null){for(var x=0;x<l.length;x++){var b=l[x];for(Kt=b;Kt!==null;){var E=Kt;switch(E.tag){case 0:case 11:case 15:hy(8,E,c)}var A=E.child;if(A!==null)A.return=E,Kt=A;else for(;Kt!==null;){E=Kt;var L=E.sibling,F=E.return;if(y6(E),E===b){Kt=null;break}if(L!==null){L.return=F,Kt=L;break}Kt=F}}}var $=c.alternate;if($!==null){var N=$.child;if(N!==null){$.child=null;do{var Z=N.sibling;N.sibling=null,N=Z}while(N!==null)}}Kt=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,Kt=d;else e:for(;Kt!==null;){if(c=Kt,c.flags&2048)switch(c.tag){case 0:case 11:case 15:hy(9,c,c.return)}var R=c.sibling;if(R!==null){R.return=c.return,Kt=R;break e}Kt=c.return}}var q=e.current;for(Kt=q;Kt!==null;){d=Kt;var G=d.child;if(d.subtreeFlags&2064&&G!==null)G.return=d,Kt=G;else e:for(d=q;Kt!==null;){if(l=Kt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ux(9,l)}}catch(ae){Si(l,l.return,ae)}if(l===d){Kt=null;break e}var ee=l.sibling;if(ee!==null){ee.return=l.return,Kt=ee;break e}Kt=l.return}}if(ur=a,Dh(),nu&&typeof nu.onPostCommitFiberRoot=="function")try{nu.onPostCommitFiberRoot(tx,e)}catch{}r=!0}return r}finally{kr=n,Es.transition=t}}return!1}function LA(e,t,n){t=Xp(n,t),t=a6(e,t,1),e=wh(e,t,1),t=ua(),e!==null&&(n_(e,1,t),Ma(e,t))}function Si(e,t,n){if(e.tag===3)LA(e,e,n);else for(;t!==null;){if(t.tag===3){LA(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sh===null||!Sh.has(r))){e=Xp(n,e),e=s6(t,e,1),t=wh(t,e,1),e=ua(),t!==null&&(n_(t,1,e),Ma(t,e));break}}t=t.return}}function cz(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ua(),e.pingedLanes|=e.suspendedLanes&n,po===e&&(To&n)===n&&(to===4||to===3&&(To&130023424)===To&&500>Ii()-ME?Uf(e,0):IE|=n),Ma(e,t)}function A6(e,t){t===0&&(e.mode&1?(t=K0,K0<<=1,!(K0&130023424)&&(K0=4194304)):t=1);var n=ua();e=tc(e,t),e!==null&&(n_(e,t,n),Ma(e,n))}function hz(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),A6(e,n)}function fz(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(St(314))}r!==null&&r.delete(t),A6(e,n)}var T6;T6=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pa.current)Ta=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ta=!1,Q8(e,t,n);Ta=!!(e.flags&131072)}else Ta=!1,Yr&&t.flags&1048576&&MI(t,y1,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gv(e,t),e=t.pendingProps;var a=Hp(t,Ko.current);Bp(t,n),a=CE(null,t,r,e,a,n);var c=EE();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(r)?(c=!0,m1(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,vE(t),a.updater=sx,t.stateNode=a,a._reactInternals=t,bS(t,r,e,n),t=CS(null,t,r,!0,c,n)):(t.tag=0,Yr&&c&&fE(t),la(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=pz(r),e=hl(r,e),a){case 0:t=SS(null,t,r,e,n);break e;case 1:t=wA(null,t,r,e,n);break e;case 11:t=xA(null,t,r,e,n);break e;case 14:t=bA(null,t,r,hl(r.type,e),n);break e}throw Error(St(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),SS(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),wA(e,t,r,a,n);case 3:e:{if(h6(t),e===null)throw Error(St(387));r=t.pendingProps,c=t.memoizedState,a=c.element,RI(e,t),x1(t,r,null,n);var d=t.memoizedState;if(r=d.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Xp(Error(St(423)),t),t=SA(e,t,r,n,a);break e}else if(r!==a){a=Xp(Error(St(424)),t),t=SA(e,t,r,n,a);break e}else for(Wa=bh(t.stateNode.containerInfo.firstChild),Ya=t,Yr=!0,dl=null,n=$I(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wp(),r===a){t=nc(e,t,n);break e}la(e,t,r,n)}t=t.child}return t;case 5:return NI(t),e===null&&_S(t),r=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,dS(r,a)?d=null:c!==null&&dS(r,c)&&(t.flags|=32),c6(e,t),la(e,t,d,n),t.child;case 6:return e===null&&_S(t),null;case 13:return f6(e,t,n);case 4:return xE(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zp(t,null,r,n):la(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),xA(e,t,r,a,n);case 7:return la(e,t,t.pendingProps,n),t.child;case 8:return la(e,t,t.pendingProps.children,n),t.child;case 12:return la(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,c=t.memoizedProps,d=a.value,Ur(_1,r._currentValue),r._currentValue=d,c!==null)if(vl(c.value,d)){if(c.children===a.children&&!Pa.current){t=nc(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var l=c.dependencies;if(l!==null){d=c.child;for(var x=l.firstContext;x!==null;){if(x.context===r){if(c.tag===1){x=Ju(-1,n&-n),x.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var E=b.pending;E===null?x.next=x:(x.next=E.next,E.next=x),b.pending=x}}c.lanes|=n,x=c.alternate,x!==null&&(x.lanes|=n),vS(c.return,n,t),l.lanes|=n;break}x=x.next}}else if(c.tag===10)d=c.type===t.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(St(341));d.lanes|=n,l=d.alternate,l!==null&&(l.lanes|=n),vS(d,n,t),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===t){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}la(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Bp(t,n),a=As(a),r=r(a),t.flags|=1,la(e,t,r,n),t.child;case 14:return r=t.type,a=hl(r,t.pendingProps),a=hl(r.type,a),bA(e,t,r,a,n);case 15:return l6(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:hl(r,a),Gv(e,t),t.tag=1,Ia(r)?(e=!0,m1(t)):e=!1,Bp(t,n),zI(t,r,a),bS(t,r,a,n),CS(null,t,r,!0,e,n);case 19:return d6(e,t,n);case 22:return u6(e,t,n)}throw Error(St(156,t.tag))};function P6(e,t){return tI(e,t)}function dz(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(e,t,n,r){return new dz(e,t,n,r)}function RE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pz(e){if(typeof e=="function")return RE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eE)return 11;if(e===tE)return 14}return 2}function Eh(e,t){var n=e.alternate;return n===null?(n=Cs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zv(e,t,n,r,a,c){var d=2;if(r=e,typeof e=="function")RE(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case xp:return jf(n.children,a,c,t);case QC:d=8,a|=8;break;case G2:return e=Cs(12,n,t,a|2),e.elementType=G2,e.lanes=c,e;case H2:return e=Cs(13,n,t,a),e.elementType=H2,e.lanes=c,e;case W2:return e=Cs(19,n,t,a),e.elementType=W2,e.lanes=c,e;case BP:return hx(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DP:d=10;break e;case zP:d=9;break e;case eE:d=11;break e;case tE:d=14;break e;case sh:d=16,r=null;break e}throw Error(St(130,e==null?e:typeof e,""))}return t=Cs(d,n,t,a),t.elementType=e,t.type=r,t.lanes=c,t}function jf(e,t,n,r){return e=Cs(7,e,r,t),e.lanes=n,e}function hx(e,t,n,r){return e=Cs(22,e,r,t),e.elementType=BP,e.lanes=n,e.stateNode={isHidden:!1},e}function e2(e,t,n){return e=Cs(6,e,null,t),e.lanes=n,e}function t2(e,t,n){return t=Cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mz(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rw(0),this.expirationTimes=Rw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rw(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function DE(e,t,n,r,a,c,d,l,x){return e=new mz(e,t,n,l,x),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Cs(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vE(c),e}function gz(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vp,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function I6(e){if(!e)return Ih;e=e._reactInternals;e:{if(Qf(e)!==e||e.tag!==1)throw Error(St(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(St(171))}if(e.tag===1){var n=e.type;if(Ia(n))return PI(e,n,t)}return t}function M6(e,t,n,r,a,c,d,l,x){return e=DE(n,r,!0,e,a,c,d,l,x),e.context=I6(null),n=e.current,r=ua(),a=Ch(n),c=Ju(r,a),c.callback=t??null,wh(n,c,a),e.current.lanes=a,n_(e,a,r),Ma(e,r),e}function fx(e,t,n,r){var a=t.current,c=ua(),d=Ch(a);return n=I6(n),t.context===null?t.context=n:t.pendingContext=n,t=Ju(c,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=wh(a,t,d),e!==null&&(gl(e,a,d,c),jv(e,a,d)),d}function T1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function OA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zE(e,t){OA(e,t),(e=e.alternate)&&OA(e,t)}function yz(){return null}var L6=typeof reportError=="function"?reportError:function(e){console.error(e)};function BE(e){this._internalRoot=e}dx.prototype.render=BE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(St(409));fx(e,t,null,null)};dx.prototype.unmount=BE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xf(function(){fx(null,e,null,null)}),t[ec]=null}};function dx(e){this._internalRoot=e}dx.prototype.unstable_scheduleHydration=function(e){if(e){var t=lI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ch.length&&t!==0&&t<ch[n].priority;n++);ch.splice(n,0,e),n===0&&cI(e)}};function $E(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function px(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function FA(){}function _z(e,t,n,r,a){if(a){if(typeof r=="function"){var c=r;r=function(){var b=T1(d);c.call(b)}}var d=M6(t,r,e,0,null,!1,!1,"",FA);return e._reactRootContainer=d,e[ec]=d.current,Iy(e.nodeType===8?e.parentNode:e),Xf(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var b=T1(x);l.call(b)}}var x=DE(e,0,!1,null,null,!1,!1,"",FA);return e._reactRootContainer=x,e[ec]=x.current,Iy(e.nodeType===8?e.parentNode:e),Xf(function(){fx(t,x,n,r)}),x}function mx(e,t,n,r,a){var c=n._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var l=a;a=function(){var x=T1(d);l.call(x)}}fx(t,d,e,a)}else d=_z(n,t,e,a,r);return T1(d)}aI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ey(t.pendingLanes);n!==0&&(iE(t,n|1),Ma(t,Ii()),!(ur&6)&&(Yp=Ii()+500,Dh()))}break;case 13:Xf(function(){var r=tc(e,1);if(r!==null){var a=ua();gl(r,e,1,a)}}),zE(e,1)}};oE=function(e){if(e.tag===13){var t=tc(e,134217728);if(t!==null){var n=ua();gl(t,e,134217728,n)}zE(e,134217728)}};sI=function(e){if(e.tag===13){var t=Ch(e),n=tc(e,t);if(n!==null){var r=ua();gl(n,e,t,r)}zE(e,t)}};lI=function(){return kr};uI=function(e,t){var n=kr;try{return kr=e,t()}finally{kr=n}};rS=function(e,t,n){switch(t){case"input":if(X2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ox(r);if(!a)throw Error(St(90));NP(r),X2(r,a)}}}break;case"textarea":jP(e,n);break;case"select":t=n.value,t!=null&&Fp(e,!!n.multiple,t,!1)}};KP=LE;XP=Xf;var vz={usingClientEntryPoint:!1,Events:[i_,Cp,ox,WP,ZP,LE]},Dg={findFiberByHostInstance:zf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xz={bundleType:Dg.bundleType,version:Dg.version,rendererPackageName:Dg.rendererPackageName,rendererConfig:Dg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=QP(e),e===null?null:e.stateNode},findFiberByHostInstance:Dg.findFiberByHostInstance||yz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var av=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!av.isDisabled&&av.supportsFiber)try{tx=av.inject(xz),nu=av}catch{}}Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vz;Qa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$E(t))throw Error(St(200));return gz(e,t,null,n)};Qa.createRoot=function(e,t){if(!$E(e))throw Error(St(299));var n=!1,r="",a=L6;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=DE(e,1,!1,null,null,n,!1,r,a),e[ec]=t.current,Iy(e.nodeType===8?e.parentNode:e),new BE(t)};Qa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(St(188)):(e=Object.keys(e).join(","),Error(St(268,e)));return e=QP(t),e=e===null?null:e.stateNode,e};Qa.flushSync=function(e){return Xf(e)};Qa.hydrate=function(e,t,n){if(!px(t))throw Error(St(200));return mx(null,e,t,!0,n)};Qa.hydrateRoot=function(e,t,n){if(!$E(e))throw Error(St(405));var r=n!=null&&n.hydratedSources||null,a=!1,c="",d=L6;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=M6(t,null,e,1,n??null,a,!1,c,d),e[ec]=t.current,Iy(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new dx(t)};Qa.render=function(e,t,n){if(!px(t))throw Error(St(200));return mx(null,e,t,!1,n)};Qa.unmountComponentAtNode=function(e){if(!px(e))throw Error(St(40));return e._reactRootContainer?(Xf(function(){mx(null,null,e,!1,function(){e._reactRootContainer=null,e[ec]=null})}),!0):!1};Qa.unstable_batchedUpdates=LE;Qa.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!px(n))throw Error(St(200));if(e==null||e._reactInternals===void 0)throw Error(St(38));return mx(e,t,n,!1,r)};Qa.version="18.2.0-next-9e3b772b8-20220608";function O6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O6)}catch(e){console.error(e)}}O6(),MP.exports=Qa;var NE=MP.exports;const sv=ic(NE);var UE,RA=NE;UE=V2.createRoot=RA.createRoot,V2.hydrateRoot=RA.hydrateRoot;var jE={};Object.defineProperty(jE,"__esModule",{value:!0});jE.getDomContainer=bz;function bz(e){if(!e)return DA();var t=document.querySelector(e);return t||(console.warn('Query selector "'.concat(e,`" doesn't match any existing DOM element. `)+"Are you using a custom HTML template? "+'Add an element matching "'.concat(e,'" to your template or change the containerQuerySelector setting.')),DA())}function DA(){return document.getElementById("root")||wz()}function wz(){var e=document.createElement("div");return e.setAttribute("id","root"),document.body.appendChild(e),e}var VE={},F6={},gx={},qE={},GE={},P1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */P1.exports;(function(e,t){(function(){var n,r="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",l="Invalid `variable` option passed into `_.template`",x="__lodash_hash_undefined__",b=500,E="__lodash_placeholder__",A=1,L=2,F=4,$=1,N=2,Z=1,R=2,q=4,G=8,ee=16,ae=32,K=64,le=128,xe=256,Le=512,Oe=30,Fe="...",Ge=800,tt=16,yt=1,At=2,zt=3,Vt=1/0,Ve=9007199254740991,_e=17976931348623157e292,we=0/0,X=4294967295,oe=X-1,lt=X>>>1,mt=[["ary",le],["bind",Z],["bindKey",R],["curry",G],["curryRight",ee],["flip",Le],["partial",ae],["partialRight",K],["rearg",xe]],Gt="[object Arguments]",Dt="[object Array]",Qt="[object AsyncFunction]",un="[object Boolean]",Xn="[object Date]",Qn="[object DOMException]",Bn="[object Error]",Qr="[object Function]",Je="[object GeneratorFunction]",yr="[object Map]",Gi="[object Number]",Gn="[object Null]",_n="[object Object]",_o="[object Promise]",Mo="[object Proxy]",Lo="[object RegExp]",ei="[object Set]",Yn="[object String]",Oo="[object Symbol]",vo="[object Undefined]",vt="[object WeakMap]",ti="[object WeakSet]",We="[object ArrayBuffer]",se="[object DataView]",Re="[object Float32Array]",Pe="[object Float64Array]",rt="[object Int8Array]",bt="[object Int16Array]",vn="[object Int32Array]",Wt="[object Uint8Array]",xt="[object Uint8ClampedArray]",$n="[object Uint16Array]",jn="[object Uint32Array]",bn=/\b__p \+= '';/g,_r=/\b(__p \+=) '' \+/g,Mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,On=/&(?:amp|lt|gt|quot|#39);/g,La=/[&<>"']/g,ni=RegExp(On.source),wr=RegExp(La.source),ye=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,De=/[\\^$.*+?()[\]{}|]/g,Te=RegExp(De.source),Ae=/^\s+/,Ne=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,Jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fn=/[()=,{}\[\]\/\s]/,jt=/\\(\\)?/g,Zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rn=/\w*$/,Hn=/^[-+]0x[0-9a-f]+$/i,Wn=/^0b[01]+$/i,Fn=/^\[object .+?Constructor\]$/,Nn=/^0o[0-7]+$/i,wn=/^(?:0|[1-9]\d*)$/,cr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lr=/($^)/,pr=/['\n\r\u2028\u2029\\]/g,Pr="\\ud800-\\udfff",Fo="\\u0300-\\u036f",sd="\\ufe20-\\ufe2f",rs="\\u20d0-\\u20ff",jr=Fo+sd+rs,Sl="\\u2700-\\u27bf",is="a-z\\xdf-\\xf6\\xf8-\\xff",ri="\\xac\\xb1\\xd7\\xf7",zs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yo="\\u2000-\\u206f",ld=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oa="A-Z\\xc0-\\xd6\\xd8-\\xde",Bs="\\ufe0e\\ufe0f",cu=ri+zs+Yo+ld,os="[']",as="["+Pr+"]",Ln="["+cu+"]",Cl="["+jr+"]",$s="\\d+",gm="["+Sl+"]",$h="["+is+"]",hu="[^"+Pr+cu+$s+Sl+is+Oa+"]",Nh="\\ud83c[\\udffb-\\udfff]",Uh="(?:"+Cl+"|"+Nh+")",jh="[^"+Pr+"]",lc="(?:\\ud83c[\\udde6-\\uddff]){2}",Vh="[\\ud800-\\udbff][\\udc00-\\udfff]",ss="["+Oa+"]",qh="\\u200d",uc="(?:"+$h+"|"+hu+")",Gh="(?:"+ss+"|"+hu+")",Hh="(?:"+os+"(?:d|ll|m|re|s|t|ve))?",ls="(?:"+os+"(?:D|LL|M|RE|S|T|VE))?",Ns=Uh+"?",xo="["+Bs+"]?",cc="(?:"+qh+"(?:"+[jh,lc,Vh].join("|")+")"+xo+Ns+")*",hc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",El="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kl=xo+Ns+cc,fc="(?:"+[gm,lc,Vh].join("|")+")"+kl,fu="(?:"+[jh+Cl+"?",Cl,lc,Vh,as].join("|")+")",Al=RegExp(os,"g"),du=RegExp(Cl,"g"),Hi=RegExp(Nh+"(?="+Nh+")|"+fu+kl,"g"),bo=RegExp([ss+"?"+$h+"+"+Hh+"(?="+[Ln,ss,"$"].join("|")+")",Gh+"+"+ls+"(?="+[Ln,ss+uc,"$"].join("|")+")",ss+"?"+uc+"+"+Hh,ss+"+"+ls,El,hc,$s,fc].join("|"),"g"),Wh=RegExp("["+qh+Pr+jr+Bs+"]"),dc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zh=-1,mr={};mr[Re]=mr[Pe]=mr[rt]=mr[bt]=mr[vn]=mr[Wt]=mr[xt]=mr[$n]=mr[jn]=!0,mr[Gt]=mr[Dt]=mr[We]=mr[un]=mr[se]=mr[Xn]=mr[Bn]=mr[Qr]=mr[yr]=mr[Gi]=mr[_n]=mr[Lo]=mr[ei]=mr[Yn]=mr[vt]=!1;var er={};er[Gt]=er[Dt]=er[We]=er[se]=er[un]=er[Xn]=er[Re]=er[Pe]=er[rt]=er[bt]=er[vn]=er[yr]=er[Gi]=er[_n]=er[Lo]=er[ei]=er[Yn]=er[Oo]=er[Wt]=er[xt]=er[$n]=er[jn]=!0,er[Bn]=er[Qr]=er[vt]=!1;var Tl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Vn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ud={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cd=parseFloat,Pl=parseInt,hd=typeof Ss=="object"&&Ss&&Ss.Object===Object&&Ss,ym=typeof self=="object"&&self&&self.Object===Object&&self,Ei=hd||ym||Function("return this")(),Kh=t&&!t.nodeType&&t,Us=Kh&&!0&&e&&!e.nodeType&&e,fd=Us&&Us.exports===Kh,pu=fd&&hd.process,Wi=function(){try{var ze=Us&&Us.require&&Us.require("util").types;return ze||pu&&pu.binding&&pu.binding("util")}catch{}}(),gc=Wi&&Wi.isArrayBuffer,yc=Wi&&Wi.isDate,js=Wi&&Wi.isMap,Xh=Wi&&Wi.isRegExp,Yh=Wi&&Wi.isSet,_c=Wi&&Wi.isTypedArray;function ii(ze,Qe,Ye){switch(Ye.length){case 0:return ze.call(Qe);case 1:return ze.call(Qe,Ye[0]);case 2:return ze.call(Qe,Ye[0],Ye[1]);case 3:return ze.call(Qe,Ye[0],Ye[1],Ye[2])}return ze.apply(Qe,Ye)}function dd(ze,Qe,Ye,Tt){for(var ln=-1,tr=ze==null?0:ze.length;++ln<tr;){var oi=ze[ln];Qe(Tt,oi,Ye(oi),ze)}return Tt}function ki(ze,Qe){for(var Ye=-1,Tt=ze==null?0:ze.length;++Ye<Tt&&Qe(ze[Ye],Ye,ze)!==!1;);return ze}function Il(ze,Qe){for(var Ye=ze==null?0:ze.length;Ye--&&Qe(ze[Ye],Ye,ze)!==!1;);return ze}function Jh(ze,Qe){for(var Ye=-1,Tt=ze==null?0:ze.length;++Ye<Tt;)if(!Qe(ze[Ye],Ye,ze))return!1;return!0}function pa(ze,Qe){for(var Ye=-1,Tt=ze==null?0:ze.length,ln=0,tr=[];++Ye<Tt;){var oi=ze[Ye];Qe(oi,Ye,ze)&&(tr[ln++]=oi)}return tr}function qn(ze,Qe){var Ye=ze==null?0:ze.length;return!!Ye&&hr(ze,Qe,0)>-1}function Ml(ze,Qe,Ye){for(var Tt=-1,ln=ze==null?0:ze.length;++Tt<ln;)if(Ye(Qe,ze[Tt]))return!0;return!1}function Ir(ze,Qe){for(var Ye=-1,Tt=ze==null?0:ze.length,ln=Array(Tt);++Ye<Tt;)ln[Ye]=Qe(ze[Ye],Ye,ze);return ln}function Fa(ze,Qe){for(var Ye=-1,Tt=Qe.length,ln=ze.length;++Ye<Tt;)ze[ln+Ye]=Qe[Ye];return ze}function Vs(ze,Qe,Ye,Tt){var ln=-1,tr=ze==null?0:ze.length;for(Tt&&tr&&(Ye=ze[++ln]);++ln<tr;)Ye=Qe(Ye,ze[ln],ln,ze);return Ye}function _m(ze,Qe,Ye,Tt){var ln=ze==null?0:ze.length;for(Tt&&ln&&(Ye=ze[--ln]);ln--;)Ye=Qe(Ye,ze[ln],ln,ze);return Ye}function Qh(ze,Qe){for(var Ye=-1,Tt=ze==null?0:ze.length;++Ye<Tt;)if(Qe(ze[Ye],Ye,ze))return!0;return!1}var vc=or("length");function vm(ze){return ze.split("")}function ef(ze){return ze.match(Jt)||[]}function mu(ze,Qe,Ye){var Tt;return Ye(ze,function(ln,tr,oi){if(Qe(ln,tr,oi))return Tt=tr,!1}),Tt}function qs(ze,Qe,Ye,Tt){for(var ln=ze.length,tr=Ye+(Tt?1:-1);Tt?tr--:++tr<ln;)if(Qe(ze[tr],tr,ze))return tr;return-1}function hr(ze,Qe,Ye){return Qe===Qe?yd(ze,Qe,Ye):qs(ze,Pn,Ye)}function tf(ze,Qe,Ye,Tt){for(var ln=Ye-1,tr=ze.length;++ln<tr;)if(Tt(ze[ln],Qe))return ln;return-1}function Pn(ze){return ze!==ze}function Gs(ze,Qe){var Ye=ze==null?0:ze.length;return Ye?nf(ze,Qe)/Ye:we}function or(ze){return function(Qe){return Qe==null?n:Qe[ze]}}function ar(ze){return function(Qe){return ze==null?n:ze[Qe]}}function gu(ze,Qe,Ye,Tt,ln){return ln(ze,function(tr,oi,gr){Ye=Tt?(Tt=!1,tr):Qe(Ye,tr,oi,gr)}),Ye}function xc(ze,Qe){var Ye=ze.length;for(ze.sort(Qe);Ye--;)ze[Ye]=ze[Ye].value;return ze}function nf(ze,Qe){for(var Ye,Tt=-1,ln=ze.length;++Tt<ln;){var tr=Qe(ze[Tt]);tr!==n&&(Ye=Ye===n?tr:Ye+tr)}return Ye}function bc(ze,Qe){for(var Ye=-1,Tt=Array(ze);++Ye<ze;)Tt[Ye]=Qe(Ye);return Tt}function wc(ze,Qe){return Ir(Qe,function(Ye){return[Ye,ze[Ye]]})}function Sc(ze){return ze&&ze.slice(0,bu(ze)+1).replace(Ae,"")}function Zi(ze){return function(Qe){return ze(Qe)}}function yu(ze,Qe){return Ir(Qe,function(Ye){return ze[Ye]})}function Ra(ze,Qe){return ze.has(Qe)}function _u(ze,Qe){for(var Ye=-1,Tt=ze.length;++Ye<Tt&&hr(Qe,ze[Ye],0)>-1;);return Ye}function Cc(ze,Qe){for(var Ye=ze.length;Ye--&&hr(Qe,ze[Ye],0)>-1;);return Ye}function pd(ze,Qe){for(var Ye=ze.length,Tt=0;Ye--;)ze[Ye]===Qe&&++Tt;return Tt}var Vr=ar(Tl),Hs=ar(Vn);function Ro(ze){return"\\"+ud[ze]}function md(ze,Qe){return ze==null?n:ze[Qe]}function us(ze){return Wh.test(ze)}function gd(ze){return dc.test(ze)}function Ll(ze){for(var Qe,Ye=[];!(Qe=ze.next()).done;)Ye.push(Qe.value);return Ye}function Ws(ze){var Qe=-1,Ye=Array(ze.size);return ze.forEach(function(Tt,ln){Ye[++Qe]=[ln,Tt]}),Ye}function vu(ze,Qe){return function(Ye){return ze(Qe(Ye))}}function Do(ze,Qe){for(var Ye=-1,Tt=ze.length,ln=0,tr=[];++Ye<Tt;){var oi=ze[Ye];(oi===Qe||oi===E)&&(ze[Ye]=E,tr[ln++]=Ye)}return tr}function xu(ze){var Qe=-1,Ye=Array(ze.size);return ze.forEach(function(Tt){Ye[++Qe]=Tt}),Ye}function rf(ze){var Qe=-1,Ye=Array(ze.size);return ze.forEach(function(Tt){Ye[++Qe]=[Tt,Tt]}),Ye}function yd(ze,Qe,Ye){for(var Tt=Ye-1,ln=ze.length;++Tt<ln;)if(ze[Tt]===Qe)return Tt;return-1}function Ec(ze,Qe,Ye){for(var Tt=Ye+1;Tt--;)if(ze[Tt]===Qe)return Tt;return Tt}function Ki(ze){return us(ze)?wu(ze):vc(ze)}function io(ze){return us(ze)?vd(ze):vm(ze)}function bu(ze){for(var Qe=ze.length;Qe--&&Ne.test(ze.charAt(Qe)););return Qe}var _d=ar(mc);function wu(ze){for(var Qe=Hi.lastIndex=0;Hi.test(ze);)++Qe;return Qe}function vd(ze){return ze.match(Hi)||[]}function xd(ze){return ze.match(bo)||[]}var Su=function ze(Qe){Qe=Qe==null?Ei:Zs.defaults(Ei.Object(),Qe,Zs.pick(Ei,pc));var Ye=Qe.Array,Tt=Qe.Date,ln=Qe.Error,tr=Qe.Function,oi=Qe.Math,gr=Qe.Object,cs=Qe.RegExp,Cu=Qe.String,qr=Qe.TypeError,Bt=Ye.prototype,kc=tr.prototype,ma=gr.prototype,zo=Qe["__core-js_shared__"],Eu=kc.toString,ht=ma.hasOwnProperty,Ac=0,Tc=function(){var f=/[^.]+$/.exec(zo&&zo.keys&&zo.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),ku=ma.toString,Pc=Eu.call(gr),bd=Ei._,Ic=cs("^"+Eu.call(ht).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ks=fd?Qe.Buffer:n,Da=Qe.Symbol,Ol=Qe.Uint8Array,Au=Ks?Ks.allocUnsafe:n,Fl=vu(gr.getPrototypeOf,gr),Rl=gr.create,Xi=ma.propertyIsEnumerable,Jo=Bt.splice,of=Da?Da.isConcatSpreadable:n,Xs=Da?Da.iterator:n,ga=Da?Da.toStringTag:n,Dl=function(){try{var f=Du(gr,"defineProperty");return f({},"",{}),f}catch{}}(),wd=Qe.clearTimeout!==Ei.clearTimeout&&Qe.clearTimeout,Bo=Tt&&Tt.now!==Ei.Date.now&&Tt.now,Sr=Qe.setTimeout!==Ei.setTimeout&&Qe.setTimeout,Ys=oi.ceil,zl=oi.floor,Mc=gr.getOwnPropertySymbols,Tu=Ks?Ks.isBuffer:n,af=Qe.isFinite,sf=Bt.join,ya=vu(gr.keys,gr),zr=oi.max,Lt=oi.min,en=Tt.now,Lc=Qe.parseInt,Oc=oi.random,lf=Bt.reverse,Mi=Du(Qe,"DataView"),Bl=Du(Qe,"Map"),$o=Du(Qe,"Promise"),Qo=Du(Qe,"Set"),hs=Du(Qe,"WeakMap"),vr=Du(gr,"create"),Or=hs&&new hs,fs={},Pu=zu(Mi),Fc=zu(Bl),_a=zu($o),Rc=zu(Qo),Iu=zu(hs),za=Da?Da.prototype:n,Ba=za?za.valueOf:n,Dc=za?za.toString:n;function ie(f){if(pn(f)&&!pe(f)&&!(f instanceof Sn)){if(f instanceof Yi)return f;if(ht.call(f,"__wrapped__"))return yf(f)}return new Yi(f)}var No=function(){function f(){}return function(y){if(!Ht(y))return{};if(Rl)return Rl(y);f.prototype=y;var k=new f;return f.prototype=n,k}}();function $l(){}function Yi(f,y){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=n}ie.templateSettings={escape:ye,evaluate:W,interpolate:Q,variable:"",imports:{_:ie}},ie.prototype=$l.prototype,ie.prototype.constructor=ie,Yi.prototype=No($l.prototype),Yi.prototype.constructor=Yi;function Sn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=X,this.__views__=[]}function uf(){var f=new Sn(this.__wrapped__);return f.__actions__=so(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=so(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=so(this.__views__),f}function zc(){if(this.__filtered__){var f=new Sn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Bc(){var f=this.__wrapped__.value(),y=this.__dir__,k=pe(f),z=y<0,Y=k?f.length:0,ue=Y_(0,Y,this.__views__),Ee=ue.start,Ie=ue.end,qe=Ie-Ee,ft=z?Ie:Ee-1,dt=this.__iteratees__,gt=dt.length,Ut=0,tn=Lt(qe,this.__takeCount__);if(!k||!z&&Y==qe&&tn==qe)return D_(f,this.__actions__);var gn=[];e:for(;qe--&&Ut<tn;){ft+=y;for(var Dn=-1,yn=f[ft];++Dn<gt;){var Kn=dt[Dn],nr=Kn.iteratee,ja=Kn.type,aa=nr(yn);if(ja==At)yn=aa;else if(!aa){if(ja==yt)continue e;break e}}gn[Ut++]=yn}return gn}Sn.prototype=No($l.prototype),Sn.prototype.constructor=Sn;function $a(f){var y=-1,k=f==null?0:f.length;for(this.clear();++y<k;){var z=f[y];this.set(z[0],z[1])}}function $c(){this.__data__=vr?vr(null):{},this.size=0}function Zn(f){var y=this.has(f)&&delete this.__data__[f];return this.size-=y?1:0,y}function v(f){var y=this.__data__;if(vr){var k=y[f];return k===x?n:k}return ht.call(y,f)?y[f]:n}function o(f){var y=this.__data__;return vr?y[f]!==n:ht.call(y,f)}function h(f,y){var k=this.__data__;return this.size+=this.has(f)?0:1,k[f]=vr&&y===n?x:y,this}$a.prototype.clear=$c,$a.prototype.delete=Zn,$a.prototype.get=v,$a.prototype.has=o,$a.prototype.set=h;function m(f){var y=-1,k=f==null?0:f.length;for(this.clear();++y<k;){var z=f[y];this.set(z[0],z[1])}}function _(){this.__data__=[],this.size=0}function w(f){var y=this.__data__,k=Xt(y,f);if(k<0)return!1;var z=y.length-1;return k==z?y.pop():Jo.call(y,k,1),--this.size,!0}function P(f){var y=this.__data__,k=Xt(y,f);return k<0?n:y[k][1]}function I(f){return Xt(this.__data__,f)>-1}function O(f,y){var k=this.__data__,z=Xt(k,f);return z<0?(++this.size,k.push([f,y])):k[z][1]=y,this}m.prototype.clear=_,m.prototype.delete=w,m.prototype.get=P,m.prototype.has=I,m.prototype.set=O;function D(f){var y=-1,k=f==null?0:f.length;for(this.clear();++y<k;){var z=f[y];this.set(z[0],z[1])}}function U(){this.size=0,this.__data__={hash:new $a,map:new(Bl||m),string:new $a}}function V(f){var y=mf(this,f).delete(f);return this.size-=y?1:0,y}function ne(f){return mf(this,f).get(f)}function fe(f){return mf(this,f).has(f)}function he(f,y){var k=mf(this,f),z=k.size;return k.set(f,y),this.size+=k.size==z?0:1,this}D.prototype.clear=U,D.prototype.delete=V,D.prototype.get=ne,D.prototype.has=fe,D.prototype.set=he;function de(f){var y=-1,k=f==null?0:f.length;for(this.__data__=new D;++y<k;)this.add(f[y])}function me(f){return this.__data__.set(f,x),this}function Me(f){return this.__data__.has(f)}de.prototype.add=de.prototype.push=me,de.prototype.has=Me;function je(f){var y=this.__data__=new m(f);this.size=y.size}function be(){this.__data__=new m,this.size=0}function Ue(f){var y=this.__data__,k=y.delete(f);return this.size=y.size,k}function Ze(f){return this.__data__.get(f)}function Ke(f){return this.__data__.has(f)}function nt(f,y){var k=this.__data__;if(k instanceof m){var z=k.__data__;if(!Bl||z.length<a-1)return z.push([f,y]),this.size=++k.size,this;k=this.__data__=new D(z)}return k.set(f,y),this.size=k.size,this}je.prototype.clear=be,je.prototype.delete=Ue,je.prototype.get=Ze,je.prototype.has=Ke,je.prototype.set=nt;function ut(f,y){var k=pe(f),z=!k&&ve(f),Y=!k&&!z&&et(f),ue=!k&&!z&&!Y&&xi(f),Ee=k||z||Y||ue,Ie=Ee?bc(f.length,Cu):[],qe=Ie.length;for(var ft in f)(y||ht.call(f,ft))&&!(Ee&&(ft=="length"||Y&&(ft=="offset"||ft=="parent")||ue&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||gs(ft,qe)))&&Ie.push(ft);return Ie}function it(f){var y=f.length;return y?f[Td(0,y-1)]:n}function Et(f,y){return jd(so(f),ir(y,0,f.length))}function Nt(f){return jd(so(f))}function xn(f,y,k){(k!==n&&!te(f[y],k)||k===n&&!(y in f))&&dn(f,y,k)}function _t(f,y,k){var z=f[y];(!(ht.call(f,y)&&te(z,k))||k===n&&!(y in f))&&dn(f,y,k)}function Xt(f,y){for(var k=f.length;k--;)if(te(f[k][0],y))return k;return-1}function Ot(f,y,k,z){return yi(f,function(Y,ue,Ee){y(z,Y,k(Y),Ee)}),z}function Un(f,y){return f&&wa(y,Er(y),f)}function Rn(f,y){return f&&wa(y,Ni(y),f)}function dn(f,y,k){y=="__proto__"&&Dl?Dl(f,y,{configurable:!0,enumerable:!0,value:k,writable:!0}):f[y]=k}function nn(f,y){for(var k=-1,z=y.length,Y=Ye(z),ue=f==null;++k<z;)Y[k]=ue?n:Tg(f,y[k]);return Y}function ir(f,y,k){return f===f&&(k!==n&&(f=f<=k?f:k),y!==n&&(f=f>=y?f:y)),f}function fr(f,y,k,z,Y,ue){var Ee,Ie=y&A,qe=y&L,ft=y&F;if(k&&(Ee=Y?k(f,z,Y,ue):k(f)),Ee!==n)return Ee;if(!Ht(f))return f;var dt=pe(f);if(dt){if(Ee=J_(f),!Ie)return so(f,Ee)}else{var gt=lo(f),Ut=gt==Qr||gt==Je;if(et(f))return B_(f,Ie);if(gt==_n||gt==Gt||Ut&&!Y){if(Ee=qe||Ut?{}:Wm(f),!Ie)return qe?Db(f,Rn(Ee,f)):U_(f,Un(Ee,f))}else{if(!er[gt])return Y?f:{};Ee=jb(f,gt,Ie)}}ue||(ue=new je);var tn=ue.get(f);if(tn)return tn;ue.set(f,Ee),Di(f)?f.forEach(function(yn){Ee.add(fr(yn,y,k,yn,f,ue))}):br(f)&&f.forEach(function(yn,Kn){Ee.set(Kn,fr(yn,y,k,Kn,f,ue))});var gn=ft?qe?jm:Um:qe?Ni:Er,Dn=dt?n:gn(f);return ki(Dn||f,function(yn,Kn){Dn&&(Kn=yn,yn=f[Kn]),_t(Ee,Kn,fr(yn,y,k,Kn,f,ue))}),Ee}function Gr(f){var y=Er(f);return function(k){return ai(k,f,y)}}function ai(f,y,k){var z=k.length;if(f==null)return!z;for(f=gr(f);z--;){var Y=k[z],ue=y[Y],Ee=f[Y];if(Ee===n&&!(Y in f)||!ue(Ee))return!1}return!0}function oo(f,y,k){if(typeof f!="function")throw new qr(d);return gf(function(){f.apply(n,k)},y)}function Ji(f,y,k,z){var Y=-1,ue=qn,Ee=!0,Ie=f.length,qe=[],ft=y.length;if(!Ie)return qe;k&&(y=Ir(y,Zi(k))),z?(ue=Ml,Ee=!1):y.length>=a&&(ue=Ra,Ee=!1,y=new de(y));e:for(;++Y<Ie;){var dt=f[Y],gt=k==null?dt:k(dt);if(dt=z||dt!==0?dt:0,Ee&&gt===gt){for(var Ut=ft;Ut--;)if(y[Ut]===gt)continue e;qe.push(dt)}else ue(y,gt,z)||qe.push(dt)}return qe}var yi=j_(kn),Li=j_(Wr,!0);function va(f,y){var k=!0;return yi(f,function(z,Y,ue){return k=!!y(z,Y,ue),k}),k}function ds(f,y,k){for(var z=-1,Y=f.length;++z<Y;){var ue=f[z],Ee=y(ue);if(Ee!=null&&(Ie===n?Ee===Ee&&!Cr(Ee):k(Ee,Ie)))var Ie=Ee,qe=ue}return qe}function Oi(f,y,k,z){var Y=f.length;for(k=hn(k),k<0&&(k=-k>Y?0:Y+k),z=z===n||z>Y?Y:hn(z),z<0&&(z+=Y),z=k>z?0:Sa(z);k<z;)f[k++]=y;return f}function si(f,y){var k=[];return yi(f,function(z,Y,ue){y(z,Y,ue)&&k.push(z)}),k}function cn(f,y,k,z,Y){var ue=-1,Ee=f.length;for(k||(k=Vb),Y||(Y=[]);++ue<Ee;){var Ie=f[ue];y>0&&k(Ie)?y>1?cn(Ie,y-1,k,z,Y):Fa(Y,Ie):z||(Y[Y.length]=Ie)}return Y}var Hr=Fd(),li=Fd(!0);function kn(f,y){return f&&Hr(f,y,Er)}function Wr(f,y){return f&&li(f,y,Er)}function Fi(f,y){return pa(y,function(k){return ct(f[k])})}function xa(f,y){y=Ul(y,f);for(var k=0,z=y.length;f!=null&&k<z;)f=f[ys(y[k++])];return k&&k==z?f:n}function ba(f,y,k){var z=y(f);return pe(f)?z:Fa(z,k(f))}function Qi(f){return f==null?f===n?vo:Gn:ga&&ga in gr(f)?Ub(f):Xm(f)}function Nc(f,y){return f>y}function xr(f,y){return f!=null&&ht.call(f,y)}function cf(f,y){return f!=null&&y in gr(f)}function Mu(f,y,k){return f>=Lt(y,k)&&f<zr(y,k)}function ea(f,y,k){for(var z=k?Ml:qn,Y=f[0].length,ue=f.length,Ee=ue,Ie=Ye(ue),qe=1/0,ft=[];Ee--;){var dt=f[Ee];Ee&&y&&(dt=Ir(dt,Zi(y))),qe=Lt(dt.length,qe),Ie[Ee]=!k&&(y||Y>=120&&dt.length>=120)?new de(Ee&&dt):n}dt=f[0];var gt=-1,Ut=Ie[0];e:for(;++gt<Y&&ft.length<qe;){var tn=dt[gt],gn=y?y(tn):tn;if(tn=k||tn!==0?tn:0,!(Ut?Ra(Ut,gn):z(ft,gn,k))){for(Ee=ue;--Ee;){var Dn=Ie[Ee];if(!(Dn?Ra(Dn,gn):z(f[Ee],gn,k)))continue e}Ut&&Ut.push(gn),ft.push(tn)}}return ft}function Lu(f,y,k,z){return kn(f,function(Y,ue,Ee){y(z,k(Y),ue,Ee)}),z}function Nl(f,y,k){y=Ul(y,f),f=Jm(f,y);var z=f==null?f:f[ys(jo(y))];return z==null?n:ii(z,f,k)}function Sd(f){return pn(f)&&Qi(f)==Gt}function k_(f){return pn(f)&&Qi(f)==We}function Lb(f){return pn(f)&&Qi(f)==Xn}function Uc(f,y,k,z,Y){return f===y?!0:f==null||y==null||!pn(f)&&!pn(y)?f!==f&&y!==y:Ob(f,y,k,z,Uc,Y)}function Ob(f,y,k,z,Y,ue){var Ee=pe(f),Ie=pe(y),qe=Ee?Dt:lo(f),ft=Ie?Dt:lo(y);qe=qe==Gt?_n:qe,ft=ft==Gt?_n:ft;var dt=qe==_n,gt=ft==_n,Ut=qe==ft;if(Ut&&et(f)){if(!et(y))return!1;Ee=!0,dt=!1}if(Ut&&!dt)return ue||(ue=new je),Ee||xi(f)?K_(f,y,k,z,Y,ue):Nm(f,y,qe,k,z,Y,ue);if(!(k&$)){var tn=dt&&ht.call(f,"__wrapped__"),gn=gt&&ht.call(y,"__wrapped__");if(tn||gn){var Dn=tn?f.value():f,yn=gn?y.value():y;return ue||(ue=new je),Y(Dn,yn,k,z,ue)}}return Ut?(ue||(ue=new je),pf(f,y,k,z,Y,ue)):!1}function xm(f){return pn(f)&&lo(f)==yr}function bm(f,y,k,z){var Y=k.length,ue=Y,Ee=!z;if(f==null)return!ue;for(f=gr(f);Y--;){var Ie=k[Y];if(Ee&&Ie[2]?Ie[1]!==f[Ie[0]]:!(Ie[0]in f))return!1}for(;++Y<ue;){Ie=k[Y];var qe=Ie[0],ft=f[qe],dt=Ie[1];if(Ee&&Ie[2]){if(ft===n&&!(qe in f))return!1}else{var gt=new je;if(z)var Ut=z(ft,dt,qe,f,y,gt);if(!(Ut===n?Uc(dt,ft,$|N,z,gt):Ut))return!1}}return!0}function Cd(f){if(!Ht(f)||Gb(f))return!1;var y=ct(f)?Ic:Fn;return y.test(zu(f))}function A_(f){return pn(f)&&Qi(f)==Lo}function T_(f){return pn(f)&&lo(f)==ei}function jc(f){return pn(f)&&qt(f.length)&&!!mr[Qi(f)]}function P_(f){return typeof f=="function"?f:f==null?Ca:typeof f=="object"?pe(f)?I_(f[0],f[1]):Sm(f):E3(f)}function Ou(f){if(!nl(f))return ya(f);var y=[];for(var k in gr(f))ht.call(f,k)&&k!="constructor"&&y.push(k);return y}function Ed(f){if(!Ht(f))return sr(f);var y=nl(f),k=[];for(var z in f)z=="constructor"&&(y||!ht.call(f,z))||k.push(z);return k}function Vc(f,y){return f<y}function wm(f,y){var k=-1,z=ke(f)?Ye(f.length):[];return yi(f,function(Y,ue,Ee){z[++k]=y(Y,ue,Ee)}),z}function Sm(f){var y=Vm(f);return y.length==1&&y[0][2]?Km(y[0][0],y[0][1]):function(k){return k===f||bm(k,f,y)}}function I_(f,y){return Zm(f)&&ui(y)?Km(ys(f),y):function(k){var z=Tg(k,f);return z===n&&z===y?oa(k,f):Uc(y,z,$|N)}}function Ai(f,y,k,z,Y){f!==y&&Hr(y,function(ue,Ee){if(Y||(Y=new je),Ht(ue))qc(f,y,Ee,k,Ai,z,Y);else{var Ie=z?z(ql(f,Ee),ue,Ee+"",f,y,Y):n;Ie===n&&(Ie=ue),xn(f,Ee,Ie)}},Ni)}function qc(f,y,k,z,Y,ue,Ee){var Ie=ql(f,k),qe=ql(y,k),ft=Ee.get(qe);if(ft){xn(f,k,ft);return}var dt=ue?ue(Ie,qe,k+"",f,y,Ee):n,gt=dt===n;if(gt){var Ut=pe(qe),tn=!Ut&&et(qe),gn=!Ut&&!tn&&xi(qe);dt=qe,Ut||tn||gn?pe(Ie)?dt=Ie:Be(Ie)?dt=so(Ie):tn?(gt=!1,dt=B_(qe,!0)):gn?(gt=!1,dt=ff(qe,!0)):dt=[]:vi(qe)||ve(qe)?(dt=Ie,ve(Ie)?dt=ra(Ie):(!Ht(Ie)||ct(Ie))&&(dt=Wm(qe))):gt=!1}gt&&(Ee.set(qe,dt),Y(dt,qe,z,ue,Ee),Ee.delete(qe)),xn(f,k,dt)}function kd(f,y){var k=f.length;if(k)return y+=y<0?k:0,gs(y,k)?f[y]:n}function Cm(f,y,k){y.length?y=Ir(y,function(ue){return pe(ue)?function(Ee){return xa(Ee,ue.length===1?ue[0]:ue)}:ue}):y=[Ca];var z=-1;y=Ir(y,Zi(on()));var Y=wm(f,function(ue,Ee,Ie){var qe=Ir(y,function(ft){return ft(ue)});return{criteria:qe,index:++z,value:ue}});return xc(Y,function(ue,Ee){return N_(ue,Ee,k)})}function hf(f,y){return M_(f,y,function(k,z){return oa(f,z)})}function M_(f,y,k){for(var z=-1,Y=y.length,ue={};++z<Y;){var Ee=y[z],Ie=xa(f,Ee);k(Ie,Ee)&&Js(ue,Ul(Ee,f),Ie)}return ue}function Ad(f){return function(y){return xa(y,f)}}function Em(f,y,k,z){var Y=z?tf:hr,ue=-1,Ee=y.length,Ie=f;for(f===y&&(y=so(y)),k&&(Ie=Ir(f,Zi(k)));++ue<Ee;)for(var qe=0,ft=y[ue],dt=k?k(ft):ft;(qe=Y(Ie,dt,qe,z))>-1;)Ie!==f&&Jo.call(Ie,qe,1),Jo.call(f,qe,1);return f}function km(f,y){for(var k=f?y.length:0,z=k-1;k--;){var Y=y[k];if(k==z||Y!==ue){var ue=Y;gs(Y)?Jo.call(f,Y,1):el(f,Y)}}return f}function Td(f,y){return f+zl(Oc()*(y-f+1))}function L_(f,y,k,z){for(var Y=-1,ue=zr(Ys((y-f)/(k||1)),0),Ee=Ye(ue);ue--;)Ee[z?ue:++Y]=f,f+=k;return Ee}function Am(f,y){var k="";if(!f||y<1||y>Ve)return k;do y%2&&(k+=f),y=zl(y/2),y&&(f+=f);while(y);return k}function In(f,y){return eg(Ym(f,y,Ca),f+"")}function O_(f){return it(tp(f))}function Tm(f,y){var k=tp(f);return jd(k,ir(y,0,k.length))}function Js(f,y,k,z){if(!Ht(f))return f;y=Ul(y,f);for(var Y=-1,ue=y.length,Ee=ue-1,Ie=f;Ie!=null&&++Y<ue;){var qe=ys(y[Y]),ft=k;if(qe==="__proto__"||qe==="constructor"||qe==="prototype")return f;if(Y!=Ee){var dt=Ie[qe];ft=z?z(dt,qe,Ie):n,ft===n&&(ft=Ht(dt)?dt:gs(y[Y+1])?[]:{})}_t(Ie,qe,ft),Ie=Ie[qe]}return f}var Uo=Or?function(f,y){return Or.set(f,y),f}:Ca,F_=Dl?function(f,y){return Dl(f,"toString",{configurable:!0,enumerable:!1,value:Cw(y),writable:!0})}:Ca;function Fb(f){return jd(tp(f))}function ta(f,y,k){var z=-1,Y=f.length;y<0&&(y=-y>Y?0:Y+y),k=k>Y?Y:k,k<0&&(k+=Y),Y=y>k?0:k-y>>>0,y>>>=0;for(var ue=Ye(Y);++z<Y;)ue[z]=f[z+y];return ue}function Rb(f,y){var k;return yi(f,function(z,Y,ue){return k=y(z,Y,ue),!k}),!!k}function Pd(f,y,k){var z=0,Y=f==null?z:f.length;if(typeof y=="number"&&y===y&&Y<=lt){for(;z<Y;){var ue=z+Y>>>1,Ee=f[ue];Ee!==null&&!Cr(Ee)&&(k?Ee<=y:Ee<y)?z=ue+1:Y=ue}return Y}return Pm(f,y,Ca,k)}function Pm(f,y,k,z){var Y=0,ue=f==null?0:f.length;if(ue===0)return 0;y=k(y);for(var Ee=y!==y,Ie=y===null,qe=Cr(y),ft=y===n;Y<ue;){var dt=zl((Y+ue)/2),gt=k(f[dt]),Ut=gt!==n,tn=gt===null,gn=gt===gt,Dn=Cr(gt);if(Ee)var yn=z||gn;else ft?yn=gn&&(z||Ut):Ie?yn=gn&&Ut&&(z||!tn):qe?yn=gn&&Ut&&!tn&&(z||!Dn):tn||Dn?yn=!1:yn=z?gt<=y:gt<y;yn?Y=dt+1:ue=dt}return Lt(ue,oe)}function R_(f,y){for(var k=-1,z=f.length,Y=0,ue=[];++k<z;){var Ee=f[k],Ie=y?y(Ee):Ee;if(!k||!te(Ie,qe)){var qe=Ie;ue[Y++]=Ee===0?0:Ee}}return ue}function Id(f){return typeof f=="number"?f:Cr(f)?we:+f}function ao(f){if(typeof f=="string")return f;if(pe(f))return Ir(f,ao)+"";if(Cr(f))return Dc?Dc.call(f):"";var y=f+"";return y=="0"&&1/f==-Vt?"-0":y}function Qs(f,y,k){var z=-1,Y=qn,ue=f.length,Ee=!0,Ie=[],qe=Ie;if(k)Ee=!1,Y=Ml;else if(ue>=a){var ft=y?null:$b(f);if(ft)return xu(ft);Ee=!1,Y=Ra,qe=new de}else qe=y?[]:Ie;e:for(;++z<ue;){var dt=f[z],gt=y?y(dt):dt;if(dt=k||dt!==0?dt:0,Ee&&gt===gt){for(var Ut=qe.length;Ut--;)if(qe[Ut]===gt)continue e;y&&qe.push(gt),Ie.push(dt)}else Y(qe,gt,k)||(qe!==Ie&&qe.push(gt),Ie.push(dt))}return Ie}function el(f,y){return y=Ul(y,f),f=Jm(f,y),f==null||delete f[ys(jo(y))]}function Gc(f,y,k,z){return Js(f,y,k(xa(f,y)),z)}function Md(f,y,k,z){for(var Y=f.length,ue=z?Y:-1;(z?ue--:++ue<Y)&&y(f[ue],ue,f););return k?ta(f,z?0:ue,z?ue+1:Y):ta(f,z?ue+1:0,z?Y:ue)}function D_(f,y){var k=f;return k instanceof Sn&&(k=k.value()),Vs(y,function(z,Y){return Y.func.apply(Y.thisArg,Fa([z],Y.args))},k)}function Im(f,y,k){var z=f.length;if(z<2)return z?Qs(f[0]):[];for(var Y=-1,ue=Ye(z);++Y<z;)for(var Ee=f[Y],Ie=-1;++Ie<z;)Ie!=Y&&(ue[Y]=Ji(ue[Y]||Ee,f[Ie],y,k));return Qs(cn(ue,1),y,k)}function z_(f,y,k){for(var z=-1,Y=f.length,ue=y.length,Ee={};++z<Y;){var Ie=z<ue?y[z]:n;k(Ee,f[z],Ie)}return Ee}function Mm(f){return Be(f)?f:[]}function Lm(f){return typeof f=="function"?f:Ca}function Ul(f,y){return pe(f)?f:Zm(f,y)?[f]:r0(Cn(f))}var Om=In;function jl(f,y,k){var z=f.length;return k=k===n?z:k,!y&&k>=z?f:ta(f,y,k)}var Fu=wd||function(f){return Ei.clearTimeout(f)};function B_(f,y){if(y)return f.slice();var k=f.length,z=Au?Au(k):new f.constructor(k);return f.copy(z),z}function Fr(f){var y=new f.constructor(f.byteLength);return new Ol(y).set(new Ol(f)),y}function Ld(f,y){var k=y?Fr(f.buffer):f.buffer;return new f.constructor(k,f.byteOffset,f.byteLength)}function $_(f){var y=new f.constructor(f.source,rn.exec(f));return y.lastIndex=f.lastIndex,y}function Od(f){return Ba?gr(Ba.call(f)):{}}function ff(f,y){var k=y?Fr(f.buffer):f.buffer;return new f.constructor(k,f.byteOffset,f.length)}function Hc(f,y){if(f!==y){var k=f!==n,z=f===null,Y=f===f,ue=Cr(f),Ee=y!==n,Ie=y===null,qe=y===y,ft=Cr(y);if(!Ie&&!ft&&!ue&&f>y||ue&&Ee&&qe&&!Ie&&!ft||z&&Ee&&qe||!k&&qe||!Y)return 1;if(!z&&!ue&&!ft&&f<y||ft&&k&&Y&&!z&&!ue||Ie&&k&&Y||!Ee&&Y||!qe)return-1}return 0}function N_(f,y,k){for(var z=-1,Y=f.criteria,ue=y.criteria,Ee=Y.length,Ie=k.length;++z<Ee;){var qe=Hc(Y[z],ue[z]);if(qe){if(z>=Ie)return qe;var ft=k[z];return qe*(ft=="desc"?-1:1)}}return f.index-y.index}function Fm(f,y,k,z){for(var Y=-1,ue=f.length,Ee=k.length,Ie=-1,qe=y.length,ft=zr(ue-Ee,0),dt=Ye(qe+ft),gt=!z;++Ie<qe;)dt[Ie]=y[Ie];for(;++Y<Ee;)(gt||Y<ue)&&(dt[k[Y]]=f[Y]);for(;ft--;)dt[Ie++]=f[Y++];return dt}function Wc(f,y,k,z){for(var Y=-1,ue=f.length,Ee=-1,Ie=k.length,qe=-1,ft=y.length,dt=zr(ue-Ie,0),gt=Ye(dt+ft),Ut=!z;++Y<dt;)gt[Y]=f[Y];for(var tn=Y;++qe<ft;)gt[tn+qe]=y[qe];for(;++Ee<Ie;)(Ut||Y<ue)&&(gt[tn+k[Ee]]=f[Y++]);return gt}function so(f,y){var k=-1,z=f.length;for(y||(y=Ye(z));++k<z;)y[k]=f[k];return y}function wa(f,y,k,z){var Y=!k;k||(k={});for(var ue=-1,Ee=y.length;++ue<Ee;){var Ie=y[ue],qe=z?z(k[Ie],f[Ie],Ie,k,f):n;qe===n&&(qe=f[Ie]),Y?dn(k,Ie,qe):_t(k,Ie,qe)}return k}function U_(f,y){return wa(f,qm(f),y)}function Db(f,y){return wa(f,X_(f),y)}function df(f,y){return function(k,z){var Y=pe(k)?dd:Ot,ue=y?y():{};return Y(k,f,on(z,2),ue)}}function ps(f){return In(function(y,k){var z=-1,Y=k.length,ue=Y>1?k[Y-1]:n,Ee=Y>2?k[2]:n;for(ue=f.length>3&&typeof ue=="function"?(Y--,ue):n,Ee&&wo(k[0],k[1],Ee)&&(ue=Y<3?n:ue,Y=1),y=gr(y);++z<Y;){var Ie=k[z];Ie&&f(y,Ie,z,ue)}return y})}function j_(f,y){return function(k,z){if(k==null)return k;if(!ke(k))return f(k,z);for(var Y=k.length,ue=y?Y:-1,Ee=gr(k);(y?ue--:++ue<Y)&&z(Ee[ue],ue,Ee)!==!1;);return k}}function Fd(f){return function(y,k,z){for(var Y=-1,ue=gr(y),Ee=z(y),Ie=Ee.length;Ie--;){var qe=Ee[f?Ie:++Y];if(k(ue[qe],qe,ue)===!1)break}return y}}function zb(f,y,k){var z=y&Z,Y=Ru(f);function ue(){var Ee=this&&this!==Ei&&this instanceof ue?Y:f;return Ee.apply(z?k:this,arguments)}return ue}function Rd(f){return function(y){y=Cn(y);var k=us(y)?io(y):n,z=k?k[0]:y.charAt(0),Y=k?jl(k,1).join(""):y.slice(1);return z[f]()+Y}}function Vl(f){return function(y){return Vs(S3(w3(y).replace(Al,"")),f,"")}}function Ru(f){return function(){var y=arguments;switch(y.length){case 0:return new f;case 1:return new f(y[0]);case 2:return new f(y[0],y[1]);case 3:return new f(y[0],y[1],y[2]);case 4:return new f(y[0],y[1],y[2],y[3]);case 5:return new f(y[0],y[1],y[2],y[3],y[4]);case 6:return new f(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new f(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var k=No(f.prototype),z=f.apply(k,y);return Ht(z)?z:k}}function V_(f,y,k){var z=Ru(f);function Y(){for(var ue=arguments.length,Ee=Ye(ue),Ie=ue,qe=Zc(Y);Ie--;)Ee[Ie]=arguments[Ie];var ft=ue<3&&Ee[0]!==qe&&Ee[ue-1]!==qe?[]:Do(Ee,qe);if(ue-=ft.length,ue<k)return H_(f,y,Dd,Y.placeholder,n,Ee,ft,n,n,k-ue);var dt=this&&this!==Ei&&this instanceof Y?z:f;return ii(dt,this,Ee)}return Y}function Rm(f){return function(y,k,z){var Y=gr(y);if(!ke(y)){var ue=on(k,3);y=Er(y),k=function(Ie){return ue(Y[Ie],Ie,Y)}}var Ee=f(y,k,z);return Ee>-1?Y[ue?y[Ee]:Ee]:n}}function q_(f){return Ua(function(y){var k=y.length,z=k,Y=Yi.prototype.thru;for(f&&y.reverse();z--;){var ue=y[z];if(typeof ue!="function")throw new qr(d);if(Y&&!Ee&&$d(ue)=="wrapper")var Ee=new Yi([],!0)}for(z=Ee?z:k;++z<k;){ue=y[z];var Ie=$d(ue),qe=Ie=="wrapper"?Bd(ue):n;qe&&Ud(qe[0])&&qe[1]==(le|G|ae|xe)&&!qe[4].length&&qe[9]==1?Ee=Ee[$d(qe[0])].apply(Ee,qe[3]):Ee=ue.length==1&&Ud(ue)?Ee[Ie]():Ee.thru(ue)}return function(){var ft=arguments,dt=ft[0];if(Ee&&ft.length==1&&pe(dt))return Ee.plant(dt).value();for(var gt=0,Ut=k?y[gt].apply(this,ft):dt;++gt<k;)Ut=y[gt].call(this,Ut);return Ut}})}function Dd(f,y,k,z,Y,ue,Ee,Ie,qe,ft){var dt=y&le,gt=y&Z,Ut=y&R,tn=y&(G|ee),gn=y&Le,Dn=Ut?n:Ru(f);function yn(){for(var Kn=arguments.length,nr=Ye(Kn),ja=Kn;ja--;)nr[ja]=arguments[ja];if(tn)var aa=Zc(yn),Va=pd(nr,aa);if(z&&(nr=Fm(nr,z,Y,tn)),ue&&(nr=Wc(nr,ue,Ee,tn)),Kn-=Va,tn&&Kn<ft){var Pi=Do(nr,aa);return H_(f,y,Dd,yn.placeholder,k,nr,Pi,Ie,qe,ft-Kn)}var sl=gt?k:this,Nu=Ut?sl[f]:f;return Kn=nr.length,Ie?nr=rl(nr,Ie):gn&&Kn>1&&nr.reverse(),dt&&qe<Kn&&(nr.length=qe),this&&this!==Ei&&this instanceof yn&&(Nu=Dn||Ru(Nu)),Nu.apply(sl,nr)}return yn}function G_(f,y){return function(k,z){return Lu(k,f,y(z),{})}}function zd(f,y){return function(k,z){var Y;if(k===n&&z===n)return y;if(k!==n&&(Y=k),z!==n){if(Y===n)return z;typeof k=="string"||typeof z=="string"?(k=ao(k),z=ao(z)):(k=Id(k),z=Id(z)),Y=f(k,z)}return Y}}function Dm(f){return Ua(function(y){return y=Ir(y,Zi(on())),In(function(k){var z=this;return f(y,function(Y){return ii(Y,z,k)})})})}function Na(f,y){y=y===n?" ":ao(y);var k=y.length;if(k<2)return k?Am(y,f):y;var z=Am(y,Ys(f/Ki(y)));return us(y)?jl(io(z),0,f).join(""):z.slice(0,f)}function Bb(f,y,k,z){var Y=y&Z,ue=Ru(f);function Ee(){for(var Ie=-1,qe=arguments.length,ft=-1,dt=z.length,gt=Ye(dt+qe),Ut=this&&this!==Ei&&this instanceof Ee?ue:f;++ft<dt;)gt[ft]=z[ft];for(;qe--;)gt[ft++]=arguments[++Ie];return ii(Ut,Y?k:this,gt)}return Ee}function zm(f){return function(y,k,z){return z&&typeof z!="number"&&wo(y,k,z)&&(k=z=n),y=bi(y),k===n?(k=y,y=0):k=bi(k),z=z===n?y<k?1:-1:bi(z),L_(y,k,z,f)}}function tl(f){return function(y,k){return typeof y=="string"&&typeof k=="string"||(y=wi(y),k=wi(k)),f(y,k)}}function H_(f,y,k,z,Y,ue,Ee,Ie,qe,ft){var dt=y&G,gt=dt?Ee:n,Ut=dt?n:Ee,tn=dt?ue:n,gn=dt?n:ue;y|=dt?ae:K,y&=~(dt?K:ae),y&q||(y&=~(Z|R));var Dn=[f,y,Y,tn,gt,gn,Ut,Ie,qe,ft],yn=k.apply(n,Dn);return Ud(f)&&Qm(yn,Dn),yn.placeholder=z,t0(yn,f,y)}function Bm(f){var y=oi[f];return function(k,z){if(k=wi(k),z=z==null?0:Lt(hn(z),292),z&&af(k)){var Y=(Cn(k)+"e").split("e"),ue=y(Y[0]+"e"+(+Y[1]+z));return Y=(Cn(ue)+"e").split("e"),+(Y[0]+"e"+(+Y[1]-z))}return y(k)}}var $b=Qo&&1/xu(new Qo([,-0]))[1]==Vt?function(f){return new Qo(f)}:Aw;function $m(f){return function(y){var k=lo(y);return k==yr?Ws(y):k==ei?rf(y):wc(y,f(y))}}function ms(f,y,k,z,Y,ue,Ee,Ie){var qe=y&R;if(!qe&&typeof f!="function")throw new qr(d);var ft=z?z.length:0;if(ft||(y&=~(ae|K),z=Y=n),Ee=Ee===n?Ee:zr(hn(Ee),0),Ie=Ie===n?Ie:hn(Ie),ft-=Y?Y.length:0,y&K){var dt=z,gt=Y;z=Y=n}var Ut=qe?n:Bd(f),tn=[f,y,k,z,Y,dt,gt,ue,Ee,Ie];if(Ut&&e0(tn,Ut),f=tn[0],y=tn[1],k=tn[2],z=tn[3],Y=tn[4],Ie=tn[9]=tn[9]===n?qe?0:f.length:zr(tn[9]-ft,0),!Ie&&y&(G|ee)&&(y&=~(G|ee)),!y||y==Z)var gn=zb(f,y,k);else y==G||y==ee?gn=V_(f,y,Ie):(y==ae||y==(Z|ae))&&!Y.length?gn=Bb(f,y,k,z):gn=Dd.apply(n,tn);var Dn=Ut?Uo:Qm;return t0(Dn(gn,tn),f,y)}function W_(f,y,k,z){return f===n||te(f,ma[k])&&!ht.call(z,k)?y:f}function Z_(f,y,k,z,Y,ue){return Ht(f)&&Ht(y)&&(ue.set(y,f),Ai(f,y,n,Z_,ue),ue.delete(y)),f}function Nb(f){return vi(f)?n:f}function K_(f,y,k,z,Y,ue){var Ee=k&$,Ie=f.length,qe=y.length;if(Ie!=qe&&!(Ee&&qe>Ie))return!1;var ft=ue.get(f),dt=ue.get(y);if(ft&&dt)return ft==y&&dt==f;var gt=-1,Ut=!0,tn=k&N?new de:n;for(ue.set(f,y),ue.set(y,f);++gt<Ie;){var gn=f[gt],Dn=y[gt];if(z)var yn=Ee?z(Dn,gn,gt,y,f,ue):z(gn,Dn,gt,f,y,ue);if(yn!==n){if(yn)continue;Ut=!1;break}if(tn){if(!Qh(y,function(Kn,nr){if(!Ra(tn,nr)&&(gn===Kn||Y(gn,Kn,k,z,ue)))return tn.push(nr)})){Ut=!1;break}}else if(!(gn===Dn||Y(gn,Dn,k,z,ue))){Ut=!1;break}}return ue.delete(f),ue.delete(y),Ut}function Nm(f,y,k,z,Y,ue,Ee){switch(k){case se:if(f.byteLength!=y.byteLength||f.byteOffset!=y.byteOffset)return!1;f=f.buffer,y=y.buffer;case We:return!(f.byteLength!=y.byteLength||!ue(new Ol(f),new Ol(y)));case un:case Xn:case Gi:return te(+f,+y);case Bn:return f.name==y.name&&f.message==y.message;case Lo:case Yn:return f==y+"";case yr:var Ie=Ws;case ei:var qe=z&$;if(Ie||(Ie=xu),f.size!=y.size&&!qe)return!1;var ft=Ee.get(f);if(ft)return ft==y;z|=N,Ee.set(f,y);var dt=K_(Ie(f),Ie(y),z,Y,ue,Ee);return Ee.delete(f),dt;case Oo:if(Ba)return Ba.call(f)==Ba.call(y)}return!1}function pf(f,y,k,z,Y,ue){var Ee=k&$,Ie=Um(f),qe=Ie.length,ft=Um(y),dt=ft.length;if(qe!=dt&&!Ee)return!1;for(var gt=qe;gt--;){var Ut=Ie[gt];if(!(Ee?Ut in y:ht.call(y,Ut)))return!1}var tn=ue.get(f),gn=ue.get(y);if(tn&&gn)return tn==y&&gn==f;var Dn=!0;ue.set(f,y),ue.set(y,f);for(var yn=Ee;++gt<qe;){Ut=Ie[gt];var Kn=f[Ut],nr=y[Ut];if(z)var ja=Ee?z(nr,Kn,Ut,y,f,ue):z(Kn,nr,Ut,f,y,ue);if(!(ja===n?Kn===nr||Y(Kn,nr,k,z,ue):ja)){Dn=!1;break}yn||(yn=Ut=="constructor")}if(Dn&&!yn){var aa=f.constructor,Va=y.constructor;aa!=Va&&"constructor"in f&&"constructor"in y&&!(typeof aa=="function"&&aa instanceof aa&&typeof Va=="function"&&Va instanceof Va)&&(Dn=!1)}return ue.delete(f),ue.delete(y),Dn}function Ua(f){return eg(Ym(f,n,Xc),f+"")}function Um(f){return ba(f,Er,qm)}function jm(f){return ba(f,Ni,X_)}var Bd=Or?function(f){return Or.get(f)}:Aw;function $d(f){for(var y=f.name+"",k=fs[y],z=ht.call(fs,y)?k.length:0;z--;){var Y=k[z],ue=Y.func;if(ue==null||ue==f)return Y.name}return y}function Zc(f){var y=ht.call(ie,"placeholder")?ie:f;return y.placeholder}function on(){var f=ie.iteratee||Ew;return f=f===Ew?P_:f,arguments.length?f(arguments[0],arguments[1]):f}function mf(f,y){var k=f.__data__;return qb(y)?k[typeof y=="string"?"string":"hash"]:k.map}function Vm(f){for(var y=Er(f),k=y.length;k--;){var z=y[k],Y=f[z];y[k]=[z,Y,ui(Y)]}return y}function Du(f,y){var k=md(f,y);return Cd(k)?k:n}function Ub(f){var y=ht.call(f,ga),k=f[ga];try{f[ga]=n;var z=!0}catch{}var Y=ku.call(f);return z&&(y?f[ga]=k:delete f[ga]),Y}var qm=Mc?function(f){return f==null?[]:(f=gr(f),pa(Mc(f),function(y){return Xi.call(f,y)}))}:Tw,X_=Mc?function(f){for(var y=[];f;)Fa(y,qm(f)),f=Fl(f);return y}:Tw,lo=Qi;(Mi&&lo(new Mi(new ArrayBuffer(1)))!=se||Bl&&lo(new Bl)!=yr||$o&&lo($o.resolve())!=_o||Qo&&lo(new Qo)!=ei||hs&&lo(new hs)!=vt)&&(lo=function(f){var y=Qi(f),k=y==_n?f.constructor:n,z=k?zu(k):"";if(z)switch(z){case Pu:return se;case Fc:return yr;case _a:return _o;case Rc:return ei;case Iu:return vt}return y});function Y_(f,y,k){for(var z=-1,Y=k.length;++z<Y;){var ue=k[z],Ee=ue.size;switch(ue.type){case"drop":f+=Ee;break;case"dropRight":y-=Ee;break;case"take":y=Lt(y,f+Ee);break;case"takeRight":f=zr(f,y-Ee);break}}return{start:f,end:y}}function Gm(f){var y=f.match(at);return y?y[1].split(st):[]}function Hm(f,y,k){y=Ul(y,f);for(var z=-1,Y=y.length,ue=!1;++z<Y;){var Ee=ys(y[z]);if(!(ue=f!=null&&k(f,Ee)))break;f=f[Ee]}return ue||++z!=Y?ue:(Y=f==null?0:f.length,!!Y&&qt(Y)&&gs(Ee,Y)&&(pe(f)||ve(f)))}function J_(f){var y=f.length,k=new f.constructor(y);return y&&typeof f[0]=="string"&&ht.call(f,"index")&&(k.index=f.index,k.input=f.input),k}function Wm(f){return typeof f.constructor=="function"&&!nl(f)?No(Fl(f)):{}}function jb(f,y,k){var z=f.constructor;switch(y){case We:return Fr(f);case un:case Xn:return new z(+f);case se:return Ld(f,k);case Re:case Pe:case rt:case bt:case vn:case Wt:case xt:case $n:case jn:return ff(f,k);case yr:return new z;case Gi:case Yn:return new z(f);case Lo:return $_(f);case ei:return new z;case Oo:return Od(f)}}function Nd(f,y){var k=y.length;if(!k)return f;var z=k-1;return y[z]=(k>1?"& ":"")+y[z],y=y.join(k>2?", ":" "),f.replace(ot,`{
/* [wrapped with `+y+`] */
`)}function Vb(f){return pe(f)||ve(f)||!!(of&&f&&f[of])}function gs(f,y){var k=typeof f;return y=y??Ve,!!y&&(k=="number"||k!="symbol"&&wn.test(f))&&f>-1&&f%1==0&&f<y}function wo(f,y,k){if(!Ht(k))return!1;var z=typeof y;return(z=="number"?ke(k)&&gs(y,k.length):z=="string"&&y in k)?te(k[y],f):!1}function Zm(f,y){if(pe(f))return!1;var k=typeof f;return k=="number"||k=="symbol"||k=="boolean"||f==null||Cr(f)?!0:Se.test(f)||!ce.test(f)||y!=null&&f in gr(y)}function qb(f){var y=typeof f;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?f!=="__proto__":f===null}function Ud(f){var y=$d(f),k=ie[y];if(typeof k!="function"||!(y in Sn.prototype))return!1;if(f===k)return!0;var z=Bd(k);return!!z&&f===z[0]}function Gb(f){return!!Tc&&Tc in f}var Hb=zo?ct:Pw;function nl(f){var y=f&&f.constructor,k=typeof y=="function"&&y.prototype||ma;return f===k}function ui(f){return f===f&&!Ht(f)}function Km(f,y){return function(k){return k==null?!1:k[f]===y&&(y!==n||f in gr(k))}}function Q_(f){var y=Zl(f,function(z){return k.size===b&&k.clear(),z}),k=y.cache;return y}function e0(f,y){var k=f[1],z=y[1],Y=k|z,ue=Y<(Z|R|le),Ee=z==le&&k==G||z==le&&k==xe&&f[7].length<=y[8]||z==(le|xe)&&y[7].length<=y[8]&&k==G;if(!(ue||Ee))return f;z&Z&&(f[2]=y[2],Y|=k&Z?0:q);var Ie=y[3];if(Ie){var qe=f[3];f[3]=qe?Fm(qe,Ie,y[4]):Ie,f[4]=qe?Do(f[3],E):y[4]}return Ie=y[5],Ie&&(qe=f[5],f[5]=qe?Wc(qe,Ie,y[6]):Ie,f[6]=qe?Do(f[5],E):y[6]),Ie=y[7],Ie&&(f[7]=Ie),z&le&&(f[8]=f[8]==null?y[8]:Lt(f[8],y[8])),f[9]==null&&(f[9]=y[9]),f[0]=y[0],f[1]=Y,f}function sr(f){var y=[];if(f!=null)for(var k in gr(f))y.push(k);return y}function Xm(f){return ku.call(f)}function Ym(f,y,k){return y=zr(y===n?f.length-1:y,0),function(){for(var z=arguments,Y=-1,ue=zr(z.length-y,0),Ee=Ye(ue);++Y<ue;)Ee[Y]=z[y+Y];Y=-1;for(var Ie=Ye(y+1);++Y<y;)Ie[Y]=z[Y];return Ie[y]=k(Ee),ii(f,this,Ie)}}function Jm(f,y){return y.length<2?f:xa(f,ta(y,0,-1))}function rl(f,y){for(var k=f.length,z=Lt(y.length,k),Y=so(f);z--;){var ue=y[z];f[z]=gs(ue,k)?Y[ue]:n}return f}function ql(f,y){if(!(y==="constructor"&&typeof f[y]=="function")&&y!="__proto__")return f[y]}var Qm=n0(Uo),gf=Sr||function(f,y){return Ei.setTimeout(f,y)},eg=n0(F_);function t0(f,y,k){var z=y+"";return eg(f,Nd(z,Wb(Gm(z),k)))}function n0(f){var y=0,k=0;return function(){var z=en(),Y=tt-(z-k);if(k=z,Y>0){if(++y>=Ge)return arguments[0]}else y=0;return f.apply(n,arguments)}}function jd(f,y){var k=-1,z=f.length,Y=z-1;for(y=y===n?z:y;++k<y;){var ue=Td(k,Y),Ee=f[ue];f[ue]=f[k],f[k]=Ee}return f.length=y,f}var r0=Q_(function(f){var y=[];return f.charCodeAt(0)===46&&y.push(""),f.replace(Ce,function(k,z,Y,ue){y.push(Y?ue.replace(jt,"$1"):z||k)}),y});function ys(f){if(typeof f=="string"||Cr(f))return f;var y=f+"";return y=="0"&&1/f==-Vt?"-0":y}function zu(f){if(f!=null){try{return Eu.call(f)}catch{}try{return f+""}catch{}}return""}function Wb(f,y){return ki(mt,function(k){var z="_."+k[0];y&k[1]&&!qn(f,z)&&f.push(z)}),f.sort()}function yf(f){if(f instanceof Sn)return f.clone();var y=new Yi(f.__wrapped__,f.__chain__);return y.__actions__=so(f.__actions__),y.__index__=f.__index__,y.__values__=f.__values__,y}function Kc(f,y,k){(k?wo(f,y,k):y===n)?y=1:y=zr(hn(y),0);var z=f==null?0:f.length;if(!z||y<1)return[];for(var Y=0,ue=0,Ee=Ye(Ys(z/y));Y<z;)Ee[ue++]=ta(f,Y,Y+=y);return Ee}function i0(f){for(var y=-1,k=f==null?0:f.length,z=0,Y=[];++y<k;){var ue=f[y];ue&&(Y[z++]=ue)}return Y}function tg(){var f=arguments.length;if(!f)return[];for(var y=Ye(f-1),k=arguments[0],z=f;z--;)y[z-1]=arguments[z];return Fa(pe(k)?so(k):[k],cn(y,1))}var ng=In(function(f,y){return Be(f)?Ji(f,cn(y,1,Be,!0)):[]}),Zb=In(function(f,y){var k=jo(y);return Be(k)&&(k=n),Be(f)?Ji(f,cn(y,1,Be,!0),on(k,2)):[]}),Kb=In(function(f,y){var k=jo(y);return Be(k)&&(k=n),Be(f)?Ji(f,cn(y,1,Be,!0),n,k):[]});function Xb(f,y,k){var z=f==null?0:f.length;return z?(y=k||y===n?1:hn(y),ta(f,y<0?0:y,z)):[]}function o0(f,y,k){var z=f==null?0:f.length;return z?(y=k||y===n?1:hn(y),y=z-y,ta(f,0,y<0?0:y)):[]}function a0(f,y){return f&&f.length?Md(f,on(y,3),!0,!0):[]}function So(f,y){return f&&f.length?Md(f,on(y,3),!0):[]}function rg(f,y,k,z){var Y=f==null?0:f.length;return Y?(k&&typeof k!="number"&&wo(f,y,k)&&(k=0,z=Y),Oi(f,y,k,z)):[]}function ig(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var Y=k==null?0:hn(k);return Y<0&&(Y=zr(z+Y,0)),qs(f,on(y,3),Y)}function il(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var Y=z-1;return k!==n&&(Y=hn(k),Y=k<0?zr(z+Y,0):Lt(Y,z-1)),qs(f,on(y,3),Y,!0)}function Xc(f){var y=f==null?0:f.length;return y?cn(f,1):[]}function _f(f){var y=f==null?0:f.length;return y?cn(f,Vt):[]}function Yc(f,y){var k=f==null?0:f.length;return k?(y=y===n?1:hn(y),cn(f,y)):[]}function Vd(f){for(var y=-1,k=f==null?0:f.length,z={};++y<k;){var Y=f[y];z[Y[0]]=Y[1]}return z}function vf(f){return f&&f.length?f[0]:n}function Yb(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var Y=k==null?0:hn(k);return Y<0&&(Y=zr(z+Y,0)),hr(f,y,Y)}function s0(f){var y=f==null?0:f.length;return y?ta(f,0,-1):[]}var l0=In(function(f){var y=Ir(f,Mm);return y.length&&y[0]===f[0]?ea(y):[]}),Jb=In(function(f){var y=jo(f),k=Ir(f,Mm);return y===jo(k)?y=n:k.pop(),k.length&&k[0]===f[0]?ea(k,on(y,2)):[]}),u0=In(function(f){var y=jo(f),k=Ir(f,Mm);return y=typeof y=="function"?y:n,y&&k.pop(),k.length&&k[0]===f[0]?ea(k,n,y):[]});function c0(f,y){return f==null?"":sf.call(f,y)}function jo(f){var y=f==null?0:f.length;return y?f[y-1]:n}function og(f,y,k){var z=f==null?0:f.length;if(!z)return-1;var Y=z;return k!==n&&(Y=hn(k),Y=Y<0?zr(z+Y,0):Lt(Y,z-1)),y===y?Ec(f,y,Y):qs(f,Pn,Y,!0)}function Qb(f,y){return f&&f.length?kd(f,hn(y)):n}var ew=In(ag);function ag(f,y){return f&&f.length&&y&&y.length?Em(f,y):f}function xf(f,y,k){return f&&f.length&&y&&y.length?Em(f,y,on(k,2)):f}function _s(f,y,k){return f&&f.length&&y&&y.length?Em(f,y,n,k):f}var Gl=Ua(function(f,y){var k=f==null?0:f.length,z=nn(f,y);return km(f,Ir(y,function(Y){return gs(Y,k)?+Y:Y}).sort(Hc)),z});function h0(f,y){var k=[];if(!(f&&f.length))return k;var z=-1,Y=[],ue=f.length;for(y=on(y,3);++z<ue;){var Ee=f[z];y(Ee,z,f)&&(k.push(Ee),Y.push(z))}return km(f,Y),k}function bf(f){return f==null?f:lf.call(f)}function tw(f,y,k){var z=f==null?0:f.length;return z?(k&&typeof k!="number"&&wo(f,y,k)?(y=0,k=z):(y=y==null?0:hn(y),k=k===n?z:hn(k)),ta(f,y,k)):[]}function nw(f,y){return Pd(f,y)}function qd(f,y,k){return Pm(f,y,on(k,2))}function sg(f,y){var k=f==null?0:f.length;if(k){var z=Pd(f,y);if(z<k&&te(f[z],y))return z}return-1}function rw(f,y){return Pd(f,y,!0)}function lg(f,y,k){return Pm(f,y,on(k,2),!0)}function ug(f,y){var k=f==null?0:f.length;if(k){var z=Pd(f,y,!0)-1;if(te(f[z],y))return z}return-1}function Jc(f){return f&&f.length?R_(f):[]}function f0(f,y){return f&&f.length?R_(f,on(y,2)):[]}function d0(f){var y=f==null?0:f.length;return y?ta(f,1,y):[]}function cg(f,y,k){return f&&f.length?(y=k||y===n?1:hn(y),ta(f,0,y<0?0:y)):[]}function p0(f,y,k){var z=f==null?0:f.length;return z?(y=k||y===n?1:hn(y),y=z-y,ta(f,y<0?0:y,z)):[]}function Gd(f,y){return f&&f.length?Md(f,on(y,3),!1,!0):[]}function m0(f,y){return f&&f.length?Md(f,on(y,3)):[]}var iw=In(function(f){return Qs(cn(f,1,Be,!0))}),ow=In(function(f){var y=jo(f);return Be(y)&&(y=n),Qs(cn(f,1,Be,!0),on(y,2))}),g0=In(function(f){var y=jo(f);return y=typeof y=="function"?y:n,Qs(cn(f,1,Be,!0),n,y)});function aw(f){return f&&f.length?Qs(f):[]}function sw(f,y){return f&&f.length?Qs(f,on(y,2)):[]}function lw(f,y){return y=typeof y=="function"?y:n,f&&f.length?Qs(f,n,y):[]}function hg(f){if(!(f&&f.length))return[];var y=0;return f=pa(f,function(k){if(Be(k))return y=zr(k.length,y),!0}),bc(y,function(k){return Ir(f,or(k))})}function Hd(f,y){if(!(f&&f.length))return[];var k=hg(f);return y==null?k:Ir(k,function(z){return ii(y,n,z)})}var Hl=In(function(f,y){return Be(f)?Ji(f,y):[]}),y0=In(function(f){return Im(pa(f,Be))}),_0=In(function(f){var y=jo(f);return Be(y)&&(y=n),Im(pa(f,Be),on(y,2))}),v0=In(function(f){var y=jo(f);return y=typeof y=="function"?y:n,Im(pa(f,Be),n,y)}),x0=In(hg);function b0(f,y){return z_(f||[],y||[],_t)}function fg(f,y){return z_(f||[],y||[],Js)}var Wd=In(function(f){var y=f.length,k=y>1?f[y-1]:n;return k=typeof k=="function"?(f.pop(),k):n,Hd(f,k)});function dg(f){var y=ie(f);return y.__chain__=!0,y}function pg(f,y){return y(f),f}function wf(f,y){return y(f)}var na=Ua(function(f){var y=f.length,k=y?f[0]:0,z=this.__wrapped__,Y=function(ue){return nn(ue,f)};return y>1||this.__actions__.length||!(z instanceof Sn)||!gs(k)?this.thru(Y):(z=z.slice(k,+k+(y?1:0)),z.__actions__.push({func:wf,args:[Y],thisArg:n}),new Yi(z,this.__chain__).thru(function(ue){return y&&!ue.length&&ue.push(n),ue}))});function Sf(){return dg(this)}function w0(){return new Yi(this.value(),this.__chain__)}function S0(){this.__values__===n&&(this.__values__=$i(this.value()));var f=this.__index__>=this.__values__.length,y=f?n:this.__values__[this.__index__++];return{done:f,value:y}}function C0(){return this}function E0(f){for(var y,k=this;k instanceof $l;){var z=yf(k);z.__index__=0,z.__values__=n,y?Y.__wrapped__=z:y=z;var Y=z;k=k.__wrapped__}return Y.__wrapped__=f,y}function k0(){var f=this.__wrapped__;if(f instanceof Sn){var y=f;return this.__actions__.length&&(y=new Sn(this)),y=y.reverse(),y.__actions__.push({func:wf,args:[bf],thisArg:n}),new Yi(y,this.__chain__)}return this.thru(bf)}function A0(){return D_(this.__wrapped__,this.__actions__)}var uw=df(function(f,y,k){ht.call(f,k)?++f[k]:dn(f,k,1)});function T0(f,y,k){var z=pe(f)?Jh:va;return k&&wo(f,y,k)&&(y=n),z(f,on(y,3))}function Wl(f,y){var k=pe(f)?pa:si;return k(f,on(y,3))}var P0=Rm(ig),I0=Rm(il);function M0(f,y){return cn(Bu(f,y),1)}function L0(f,y){return cn(Bu(f,y),Vt)}function cw(f,y,k){return k=k===n?1:hn(k),cn(Bu(f,y),k)}function O0(f,y){var k=pe(f)?ki:yi;return k(f,on(y,3))}function mg(f,y){var k=pe(f)?Il:Li;return k(f,on(y,3))}var Qc=df(function(f,y,k){ht.call(f,k)?f[k].push(y):dn(f,k,[y])});function F0(f,y,k,z){f=ke(f)?f:tp(f),k=k&&!z?hn(k):0;var Y=f.length;return k<0&&(k=zr(Y+k,0)),Ti(f)?k<=Y&&f.indexOf(y,k)>-1:!!Y&&hr(f,y,k)>-1}var Zd=In(function(f,y,k){var z=-1,Y=typeof y=="function",ue=ke(f)?Ye(f.length):[];return yi(f,function(Ee){ue[++z]=Y?ii(y,Ee,k):Nl(Ee,y,k)}),ue}),R0=df(function(f,y,k){dn(f,k,y)});function Bu(f,y){var k=pe(f)?Ir:wm;return k(f,on(y,3))}function Kd(f,y,k,z){return f==null?[]:(pe(y)||(y=y==null?[]:[y]),k=z?n:k,pe(k)||(k=k==null?[]:[k]),Cm(f,y,k))}var Xd=df(function(f,y,k){f[k?0:1].push(y)},function(){return[[],[]]});function hw(f,y,k){var z=pe(f)?Vs:gu,Y=arguments.length<3;return z(f,on(y,4),k,Y,yi)}function fw(f,y,k){var z=pe(f)?_m:gu,Y=arguments.length<3;return z(f,on(y,4),k,Y,Li)}function dw(f,y){var k=pe(f)?pa:si;return k(f,nh(on(y,3)))}function pw(f){var y=pe(f)?it:O_;return y(f)}function eh(f,y,k){(k?wo(f,y,k):y===n)?y=1:y=hn(y);var z=pe(f)?Et:Tm;return z(f,y)}function gg(f){var y=pe(f)?Nt:Fb;return y(f)}function D0(f){if(f==null)return 0;if(ke(f))return Ti(f)?Ki(f):f.length;var y=lo(f);return y==yr||y==ei?f.size:Ou(f).length}function yg(f,y,k){var z=pe(f)?Qh:Rb;return k&&wo(f,y,k)&&(y=n),z(f,on(y,3))}var mw=In(function(f,y){if(f==null)return[];var k=y.length;return k>1&&wo(f,y[0],y[1])?y=[]:k>2&&wo(y[0],y[1],y[2])&&(y=[y[0]]),Cm(f,cn(y,1),[])}),Cf=Bo||function(){return Ei.Date.now()};function z0(f,y){if(typeof y!="function")throw new qr(d);return f=hn(f),function(){if(--f<1)return y.apply(this,arguments)}}function B0(f,y,k){return y=k?n:y,y=f&&y==null?f.length:y,ms(f,le,n,n,n,n,y)}function _g(f,y){var k;if(typeof y!="function")throw new qr(d);return f=hn(f),function(){return--f>0&&(k=y.apply(this,arguments)),f<=1&&(y=n),k}}var Ef=In(function(f,y,k){var z=Z;if(k.length){var Y=Do(k,Zc(Ef));z|=ae}return ms(f,z,y,k,Y)}),Yd=In(function(f,y,k){var z=Z|R;if(k.length){var Y=Do(k,Zc(Yd));z|=ae}return ms(y,z,f,k,Y)});function vg(f,y,k){y=k?n:y;var z=ms(f,G,n,n,n,n,n,y);return z.placeholder=vg.placeholder,z}function th(f,y,k){y=k?n:y;var z=ms(f,ee,n,n,n,n,n,y);return z.placeholder=th.placeholder,z}function Jd(f,y,k){var z,Y,ue,Ee,Ie,qe,ft=0,dt=!1,gt=!1,Ut=!0;if(typeof f!="function")throw new qr(d);y=wi(y)||0,Ht(k)&&(dt=!!k.leading,gt="maxWait"in k,ue=gt?zr(wi(k.maxWait)||0,y):ue,Ut="trailing"in k?!!k.trailing:Ut);function tn(Pi){var sl=z,Nu=Y;return z=Y=n,ft=Pi,Ee=f.apply(Nu,sl),Ee}function gn(Pi){return ft=Pi,Ie=gf(Kn,y),dt?tn(Pi):Ee}function Dn(Pi){var sl=Pi-qe,Nu=Pi-ft,k3=y-sl;return gt?Lt(k3,ue-Nu):k3}function yn(Pi){var sl=Pi-qe,Nu=Pi-ft;return qe===n||sl>=y||sl<0||gt&&Nu>=ue}function Kn(){var Pi=Cf();if(yn(Pi))return nr(Pi);Ie=gf(Kn,Dn(Pi))}function nr(Pi){return Ie=n,Ut&&z?tn(Pi):(z=Y=n,Ee)}function ja(){Ie!==n&&Fu(Ie),ft=0,z=qe=Y=Ie=n}function aa(){return Ie===n?Ee:nr(Cf())}function Va(){var Pi=Cf(),sl=yn(Pi);if(z=arguments,Y=this,qe=Pi,sl){if(Ie===n)return gn(qe);if(gt)return Fu(Ie),Ie=gf(Kn,y),tn(qe)}return Ie===n&&(Ie=gf(Kn,y)),Ee}return Va.cancel=ja,Va.flush=aa,Va}var $0=In(function(f,y){return oo(f,1,y)}),xg=In(function(f,y,k){return oo(f,wi(y)||0,k)});function Qd(f){return ms(f,Le)}function Zl(f,y){if(typeof f!="function"||y!=null&&typeof y!="function")throw new qr(d);var k=function(){var z=arguments,Y=y?y.apply(this,z):z[0],ue=k.cache;if(ue.has(Y))return ue.get(Y);var Ee=f.apply(this,z);return k.cache=ue.set(Y,Ee)||ue,Ee};return k.cache=new(Zl.Cache||D),k}Zl.Cache=D;function nh(f){if(typeof f!="function")throw new qr(d);return function(){var y=arguments;switch(y.length){case 0:return!f.call(this);case 1:return!f.call(this,y[0]);case 2:return!f.call(this,y[0],y[1]);case 3:return!f.call(this,y[0],y[1],y[2])}return!f.apply(this,y)}}function bg(f){return _g(2,f)}var wg=Om(function(f,y){y=y.length==1&&pe(y[0])?Ir(y[0],Zi(on())):Ir(cn(y,1),Zi(on()));var k=y.length;return In(function(z){for(var Y=-1,ue=Lt(z.length,k);++Y<ue;)z[Y]=y[Y].call(this,z[Y]);return ii(f,this,z)})}),Sg=In(function(f,y){var k=Do(y,Zc(Sg));return ms(f,ae,n,y,k)}),s=In(function(f,y){var k=Do(y,Zc(s));return ms(f,K,n,y,k)}),i=Ua(function(f,y){return ms(f,xe,n,n,n,y)});function u(f,y){if(typeof f!="function")throw new qr(d);return y=y===n?y:hn(y),In(f,y)}function p(f,y){if(typeof f!="function")throw new qr(d);return y=y==null?0:zr(hn(y),0),In(function(k){var z=k[y],Y=jl(k,0,y);return z&&Fa(Y,z),ii(f,this,Y)})}function g(f,y,k){var z=!0,Y=!0;if(typeof f!="function")throw new qr(d);return Ht(k)&&(z="leading"in k?!!k.leading:z,Y="trailing"in k?!!k.trailing:Y),Jd(f,y,{leading:z,maxWait:y,trailing:Y})}function S(f){return B0(f,1)}function C(f,y){return Sg(Lm(y),f)}function T(){if(!arguments.length)return[];var f=arguments[0];return pe(f)?f:[f]}function M(f){return fr(f,F)}function B(f,y){return y=typeof y=="function"?y:n,fr(f,F,y)}function j(f){return fr(f,A|F)}function H(f,y){return y=typeof y=="function"?y:n,fr(f,A|F,y)}function J(f,y){return y==null||ai(f,y,Er(y))}function te(f,y){return f===y||f!==f&&y!==y}var re=tl(Nc),ge=tl(function(f,y){return f>=y}),ve=Sd(function(){return arguments}())?Sd:function(f){return pn(f)&&ht.call(f,"callee")&&!Xi.call(f,"callee")},pe=Ye.isArray,$e=gc?Zi(gc):k_;function ke(f){return f!=null&&qt(f.length)&&!ct(f)}function Be(f){return pn(f)&&ke(f)}function He(f){return f===!0||f===!1||pn(f)&&Qi(f)==un}var et=Tu||Pw,Rt=yc?Zi(yc):Lb;function $t(f){return pn(f)&&f.nodeType===1&&!vi(f)}function Ft(f){if(f==null)return!0;if(ke(f)&&(pe(f)||typeof f=="string"||typeof f.splice=="function"||et(f)||xi(f)||ve(f)))return!f.length;var y=lo(f);if(y==yr||y==ei)return!f.size;if(nl(f))return!Ou(f).length;for(var k in f)if(ht.call(f,k))return!1;return!0}function Pt(f,y){return Uc(f,y)}function wt(f,y,k){k=typeof k=="function"?k:n;var z=k?k(f,y):n;return z===n?Uc(f,y,n,k):!!z}function Mt(f){if(!pn(f))return!1;var y=Qi(f);return y==Bn||y==Qn||typeof f.message=="string"&&typeof f.name=="string"&&!vi(f)}function It(f){return typeof f=="number"&&af(f)}function ct(f){if(!Ht(f))return!1;var y=Qi(f);return y==Qr||y==Je||y==Qt||y==Mo}function Yt(f){return typeof f=="number"&&f==hn(f)}function qt(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Ve}function Ht(f){var y=typeof f;return f!=null&&(y=="object"||y=="function")}function pn(f){return f!=null&&typeof f=="object"}var br=js?Zi(js):xm;function ci(f,y){return f===y||bm(f,y,Vm(y))}function Vo(f,y,k){return k=typeof k=="function"?k:n,bm(f,y,Vm(y),k)}function uo(f){return co(f)&&f!=+f}function Br(f){if(Hb(f))throw new ln(c);return Cd(f)}function _i(f){return f===null}function Ri(f){return f==null}function co(f){return typeof f=="number"||pn(f)&&Qi(f)==Gi}function vi(f){if(!pn(f)||Qi(f)!=_n)return!1;var y=Fl(f);if(y===null)return!0;var k=ht.call(y,"constructor")&&y.constructor;return typeof k=="function"&&k instanceof k&&Eu.call(k)==Pc}var $r=Xh?Zi(Xh):A_;function hi(f){return Yt(f)&&f>=-Ve&&f<=Ve}var Di=Yh?Zi(Yh):T_;function Ti(f){return typeof f=="string"||!pe(f)&&pn(f)&&Qi(f)==Yn}function Cr(f){return typeof f=="symbol"||pn(f)&&Qi(f)==Oo}var xi=_c?Zi(_c):jc;function Nr(f){return f===n}function zi(f){return pn(f)&&lo(f)==vt}function Tn(f){return pn(f)&&Qi(f)==ti}var qo=tl(Vc),Bi=tl(function(f,y){return f<=y});function $i(f){if(!f)return[];if(ke(f))return Ti(f)?io(f):so(f);if(Xs&&f[Xs])return Ll(f[Xs]());var y=lo(f),k=y==yr?Ws:y==ei?xu:tp;return k(f)}function bi(f){if(!f)return f===0?f:0;if(f=wi(f),f===Vt||f===-Vt){var y=f<0?-1:1;return y*_e}return f===f?f:0}function hn(f){var y=bi(f),k=y%1;return y===y?k?y-k:y:0}function Sa(f){return f?ir(hn(f),0,X):0}function wi(f){if(typeof f=="number")return f;if(Cr(f))return we;if(Ht(f)){var y=typeof f.valueOf=="function"?f.valueOf():f;f=Ht(y)?y+"":y}if(typeof f!="string")return f===0?f:+f;f=Sc(f);var k=Wn.test(f);return k||Nn.test(f)?Pl(f.slice(2),k?2:8):Hn.test(f)?we:+f}function ra(f){return wa(f,Ni(f))}function ia(f){return f?ir(hn(f),-Ve,Ve):f===0?f:0}function Cn(f){return f==null?"":ao(f)}var ol=ps(function(f,y){if(nl(y)||ke(y)){wa(y,Er(y),f);return}for(var k in y)ht.call(y,k)&&_t(f,k,y[k])}),rh=ps(function(f,y){wa(y,Ni(y),f)}),kf=ps(function(f,y,k,z){wa(y,Ni(y),f,z)}),Cg=ps(function(f,y,k,z){wa(y,Er(y),f,z)}),Eg=Ua(nn);function al(f,y){var k=No(f);return y==null?k:Un(k,y)}var N0=In(function(f,y){f=gr(f);var k=-1,z=y.length,Y=z>2?y[2]:n;for(Y&&wo(y[0],y[1],Y)&&(z=1);++k<z;)for(var ue=y[k],Ee=Ni(ue),Ie=-1,qe=Ee.length;++Ie<qe;){var ft=Ee[Ie],dt=f[ft];(dt===n||te(dt,ma[ft])&&!ht.call(f,ft))&&(f[ft]=ue[ft])}return f}),kg=In(function(f){return f.push(n,Z_),ii(y3,n,f)});function Ag(f,y){return mu(f,on(y,3),kn)}function U0(f,y){return mu(f,on(y,3),Wr)}function gw(f,y){return f==null?f:Hr(f,on(y,3),Ni)}function yw(f,y){return f==null?f:li(f,on(y,3),Ni)}function _w(f,y){return f&&kn(f,on(y,3))}function vw(f,y){return f&&Wr(f,on(y,3))}function xw(f){return f==null?[]:Fi(f,Er(f))}function bw(f){return f==null?[]:Fi(f,Ni(f))}function Tg(f,y,k){var z=f==null?n:xa(f,y);return z===n?k:z}function ww(f,y){return f!=null&&Hm(f,y,xr)}function oa(f,y){return f!=null&&Hm(f,y,cf)}var ep=G_(function(f,y,k){y!=null&&typeof y.toString!="function"&&(y=ku.call(y)),f[y]=k},Cw(Ca)),j0=G_(function(f,y,k){y!=null&&typeof y.toString!="function"&&(y=ku.call(y)),ht.call(f,y)?f[y].push(k):f[y]=[k]},on),Co=In(Nl);function Er(f){return ke(f)?ut(f):Ou(f)}function Ni(f){return ke(f)?ut(f,!0):Ed(f)}function Af(f,y){var k={};return y=on(y,3),kn(f,function(z,Y,ue){dn(k,y(z,Y,ue),z)}),k}function V0(f,y){var k={};return y=on(y,3),kn(f,function(z,Y,ue){dn(k,Y,y(z,Y,ue))}),k}var $u=ps(function(f,y,k){Ai(f,y,k)}),y3=ps(function(f,y,k,z){Ai(f,y,k,z)}),TF=Ua(function(f,y){var k={};if(f==null)return k;var z=!1;y=Ir(y,function(ue){return ue=Ul(ue,f),z||(z=ue.length>1),ue}),wa(f,jm(f),k),z&&(k=fr(k,A|L|F,Nb));for(var Y=y.length;Y--;)el(k,y[Y]);return k});function PF(f,y){return _3(f,nh(on(y)))}var IF=Ua(function(f,y){return f==null?{}:hf(f,y)});function _3(f,y){if(f==null)return{};var k=Ir(jm(f),function(z){return[z]});return y=on(y),M_(f,k,function(z,Y){return y(z,Y[0])})}function MF(f,y,k){y=Ul(y,f);var z=-1,Y=y.length;for(Y||(Y=1,f=n);++z<Y;){var ue=f==null?n:f[ys(y[z])];ue===n&&(z=Y,ue=k),f=ct(ue)?ue.call(f):ue}return f}function LF(f,y,k){return f==null?f:Js(f,y,k)}function OF(f,y,k,z){return z=typeof z=="function"?z:n,f==null?f:Js(f,y,k,z)}var v3=$m(Er),x3=$m(Ni);function FF(f,y,k){var z=pe(f),Y=z||et(f)||xi(f);if(y=on(y,4),k==null){var ue=f&&f.constructor;Y?k=z?new ue:[]:Ht(f)?k=ct(ue)?No(Fl(f)):{}:k={}}return(Y?ki:kn)(f,function(Ee,Ie,qe){return y(k,Ee,Ie,qe)}),k}function RF(f,y){return f==null?!0:el(f,y)}function DF(f,y,k){return f==null?f:Gc(f,y,Lm(k))}function zF(f,y,k,z){return z=typeof z=="function"?z:n,f==null?f:Gc(f,y,Lm(k),z)}function tp(f){return f==null?[]:yu(f,Er(f))}function BF(f){return f==null?[]:yu(f,Ni(f))}function $F(f,y,k){return k===n&&(k=y,y=n),k!==n&&(k=wi(k),k=k===k?k:0),y!==n&&(y=wi(y),y=y===y?y:0),ir(wi(f),y,k)}function NF(f,y,k){return y=bi(y),k===n?(k=y,y=0):k=bi(k),f=wi(f),Mu(f,y,k)}function UF(f,y,k){if(k&&typeof k!="boolean"&&wo(f,y,k)&&(y=k=n),k===n&&(typeof y=="boolean"?(k=y,y=n):typeof f=="boolean"&&(k=f,f=n)),f===n&&y===n?(f=0,y=1):(f=bi(f),y===n?(y=f,f=0):y=bi(y)),f>y){var z=f;f=y,y=z}if(k||f%1||y%1){var Y=Oc();return Lt(f+Y*(y-f+cd("1e-"+((Y+"").length-1))),y)}return Td(f,y)}var jF=Vl(function(f,y,k){return y=y.toLowerCase(),f+(k?b3(y):y)});function b3(f){return Sw(Cn(f).toLowerCase())}function w3(f){return f=Cn(f),f&&f.replace(cr,Vr).replace(du,"")}function VF(f,y,k){f=Cn(f),y=ao(y);var z=f.length;k=k===n?z:ir(hn(k),0,z);var Y=k;return k-=y.length,k>=0&&f.slice(k,Y)==y}function qF(f){return f=Cn(f),f&&wr.test(f)?f.replace(La,Hs):f}function GF(f){return f=Cn(f),f&&Te.test(f)?f.replace(De,"\\$&"):f}var HF=Vl(function(f,y,k){return f+(k?"-":"")+y.toLowerCase()}),WF=Vl(function(f,y,k){return f+(k?" ":"")+y.toLowerCase()}),ZF=Rd("toLowerCase");function KF(f,y,k){f=Cn(f),y=hn(y);var z=y?Ki(f):0;if(!y||z>=y)return f;var Y=(y-z)/2;return Na(zl(Y),k)+f+Na(Ys(Y),k)}function XF(f,y,k){f=Cn(f),y=hn(y);var z=y?Ki(f):0;return y&&z<y?f+Na(y-z,k):f}function YF(f,y,k){f=Cn(f),y=hn(y);var z=y?Ki(f):0;return y&&z<y?Na(y-z,k)+f:f}function JF(f,y,k){return k||y==null?y=0:y&&(y=+y),Lc(Cn(f).replace(Ae,""),y||0)}function QF(f,y,k){return(k?wo(f,y,k):y===n)?y=1:y=hn(y),Am(Cn(f),y)}function eR(){var f=arguments,y=Cn(f[0]);return f.length<3?y:y.replace(f[1],f[2])}var tR=Vl(function(f,y,k){return f+(k?"_":"")+y.toLowerCase()});function nR(f,y,k){return k&&typeof k!="number"&&wo(f,y,k)&&(y=k=n),k=k===n?X:k>>>0,k?(f=Cn(f),f&&(typeof y=="string"||y!=null&&!$r(y))&&(y=ao(y),!y&&us(f))?jl(io(f),0,k):f.split(y,k)):[]}var rR=Vl(function(f,y,k){return f+(k?" ":"")+Sw(y)});function iR(f,y,k){return f=Cn(f),k=k==null?0:ir(hn(k),0,f.length),y=ao(y),f.slice(k,k+y.length)==y}function oR(f,y,k){var z=ie.templateSettings;k&&wo(f,y,k)&&(y=n),f=Cn(f),y=kf({},y,z,W_);var Y=kf({},y.imports,z.imports,W_),ue=Er(Y),Ee=yu(Y,ue),Ie,qe,ft=0,dt=y.interpolate||Lr,gt="__p += '",Ut=cs((y.escape||Lr).source+"|"+dt.source+"|"+(dt===Q?Zt:Lr).source+"|"+(y.evaluate||Lr).source+"|$","g"),tn="//# sourceURL="+(ht.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zh+"]")+`
`;f.replace(Ut,function(yn,Kn,nr,ja,aa,Va){return nr||(nr=ja),gt+=f.slice(ft,Va).replace(pr,Ro),Kn&&(Ie=!0,gt+=`' +
__e(`+Kn+`) +
'`),aa&&(qe=!0,gt+=`';
`+aa+`;
__p += '`),nr&&(gt+=`' +
((__t = (`+nr+`)) == null ? '' : __t) +
'`),ft=Va+yn.length,yn}),gt+=`';
`;var gn=ht.call(y,"variable")&&y.variable;if(!gn)gt=`with (obj) {
`+gt+`
}
`;else if(fn.test(gn))throw new ln(l);gt=(qe?gt.replace(bn,""):gt).replace(_r,"$1").replace(Mn,"$1;"),gt="function("+(gn||"obj")+`) {
`+(gn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ie?", __e = _.escape":"")+(qe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gt+`return __p
}`;var Dn=C3(function(){return tr(ue,tn+"return "+gt).apply(n,Ee)});if(Dn.source=gt,Mt(Dn))throw Dn;return Dn}function aR(f){return Cn(f).toLowerCase()}function sR(f){return Cn(f).toUpperCase()}function lR(f,y,k){if(f=Cn(f),f&&(k||y===n))return Sc(f);if(!f||!(y=ao(y)))return f;var z=io(f),Y=io(y),ue=_u(z,Y),Ee=Cc(z,Y)+1;return jl(z,ue,Ee).join("")}function uR(f,y,k){if(f=Cn(f),f&&(k||y===n))return f.slice(0,bu(f)+1);if(!f||!(y=ao(y)))return f;var z=io(f),Y=Cc(z,io(y))+1;return jl(z,0,Y).join("")}function cR(f,y,k){if(f=Cn(f),f&&(k||y===n))return f.replace(Ae,"");if(!f||!(y=ao(y)))return f;var z=io(f),Y=_u(z,io(y));return jl(z,Y).join("")}function hR(f,y){var k=Oe,z=Fe;if(Ht(y)){var Y="separator"in y?y.separator:Y;k="length"in y?hn(y.length):k,z="omission"in y?ao(y.omission):z}f=Cn(f);var ue=f.length;if(us(f)){var Ee=io(f);ue=Ee.length}if(k>=ue)return f;var Ie=k-Ki(z);if(Ie<1)return z;var qe=Ee?jl(Ee,0,Ie).join(""):f.slice(0,Ie);if(Y===n)return qe+z;if(Ee&&(Ie+=qe.length-Ie),$r(Y)){if(f.slice(Ie).search(Y)){var ft,dt=qe;for(Y.global||(Y=cs(Y.source,Cn(rn.exec(Y))+"g")),Y.lastIndex=0;ft=Y.exec(dt);)var gt=ft.index;qe=qe.slice(0,gt===n?Ie:gt)}}else if(f.indexOf(ao(Y),Ie)!=Ie){var Ut=qe.lastIndexOf(Y);Ut>-1&&(qe=qe.slice(0,Ut))}return qe+z}function fR(f){return f=Cn(f),f&&ni.test(f)?f.replace(On,_d):f}var dR=Vl(function(f,y,k){return f+(k?" ":"")+y.toUpperCase()}),Sw=Rd("toUpperCase");function S3(f,y,k){return f=Cn(f),y=k?n:y,y===n?gd(f)?xd(f):ef(f):f.match(y)||[]}var C3=In(function(f,y){try{return ii(f,n,y)}catch(k){return Mt(k)?k:new ln(k)}}),pR=Ua(function(f,y){return ki(y,function(k){k=ys(k),dn(f,k,Ef(f[k],f))}),f});function mR(f){var y=f==null?0:f.length,k=on();return f=y?Ir(f,function(z){if(typeof z[1]!="function")throw new qr(d);return[k(z[0]),z[1]]}):[],In(function(z){for(var Y=-1;++Y<y;){var ue=f[Y];if(ii(ue[0],this,z))return ii(ue[1],this,z)}})}function gR(f){return Gr(fr(f,A))}function Cw(f){return function(){return f}}function yR(f,y){return f==null||f!==f?y:f}var _R=q_(),vR=q_(!0);function Ca(f){return f}function Ew(f){return P_(typeof f=="function"?f:fr(f,A))}function xR(f){return Sm(fr(f,A))}function bR(f,y){return I_(f,fr(y,A))}var wR=In(function(f,y){return function(k){return Nl(k,f,y)}}),SR=In(function(f,y){return function(k){return Nl(f,k,y)}});function kw(f,y,k){var z=Er(y),Y=Fi(y,z);k==null&&!(Ht(y)&&(Y.length||!z.length))&&(k=y,y=f,f=this,Y=Fi(y,Er(y)));var ue=!(Ht(k)&&"chain"in k)||!!k.chain,Ee=ct(f);return ki(Y,function(Ie){var qe=y[Ie];f[Ie]=qe,Ee&&(f.prototype[Ie]=function(){var ft=this.__chain__;if(ue||ft){var dt=f(this.__wrapped__),gt=dt.__actions__=so(this.__actions__);return gt.push({func:qe,args:arguments,thisArg:f}),dt.__chain__=ft,dt}return qe.apply(f,Fa([this.value()],arguments))})}),f}function CR(){return Ei._===this&&(Ei._=bd),this}function Aw(){}function ER(f){return f=hn(f),In(function(y){return kd(y,f)})}var kR=Dm(Ir),AR=Dm(Jh),TR=Dm(Qh);function E3(f){return Zm(f)?or(ys(f)):Ad(f)}function PR(f){return function(y){return f==null?n:xa(f,y)}}var IR=zm(),MR=zm(!0);function Tw(){return[]}function Pw(){return!1}function LR(){return{}}function OR(){return""}function FR(){return!0}function RR(f,y){if(f=hn(f),f<1||f>Ve)return[];var k=X,z=Lt(f,X);y=on(y),f-=X;for(var Y=bc(z,y);++k<f;)y(k);return Y}function DR(f){return pe(f)?Ir(f,ys):Cr(f)?[f]:so(r0(Cn(f)))}function zR(f){var y=++Ac;return Cn(f)+y}var BR=zd(function(f,y){return f+y},0),$R=Bm("ceil"),NR=zd(function(f,y){return f/y},1),UR=Bm("floor");function jR(f){return f&&f.length?ds(f,Ca,Nc):n}function VR(f,y){return f&&f.length?ds(f,on(y,2),Nc):n}function qR(f){return Gs(f,Ca)}function GR(f,y){return Gs(f,on(y,2))}function HR(f){return f&&f.length?ds(f,Ca,Vc):n}function WR(f,y){return f&&f.length?ds(f,on(y,2),Vc):n}var ZR=zd(function(f,y){return f*y},1),KR=Bm("round"),XR=zd(function(f,y){return f-y},0);function YR(f){return f&&f.length?nf(f,Ca):0}function JR(f,y){return f&&f.length?nf(f,on(y,2)):0}return ie.after=z0,ie.ary=B0,ie.assign=ol,ie.assignIn=rh,ie.assignInWith=kf,ie.assignWith=Cg,ie.at=Eg,ie.before=_g,ie.bind=Ef,ie.bindAll=pR,ie.bindKey=Yd,ie.castArray=T,ie.chain=dg,ie.chunk=Kc,ie.compact=i0,ie.concat=tg,ie.cond=mR,ie.conforms=gR,ie.constant=Cw,ie.countBy=uw,ie.create=al,ie.curry=vg,ie.curryRight=th,ie.debounce=Jd,ie.defaults=N0,ie.defaultsDeep=kg,ie.defer=$0,ie.delay=xg,ie.difference=ng,ie.differenceBy=Zb,ie.differenceWith=Kb,ie.drop=Xb,ie.dropRight=o0,ie.dropRightWhile=a0,ie.dropWhile=So,ie.fill=rg,ie.filter=Wl,ie.flatMap=M0,ie.flatMapDeep=L0,ie.flatMapDepth=cw,ie.flatten=Xc,ie.flattenDeep=_f,ie.flattenDepth=Yc,ie.flip=Qd,ie.flow=_R,ie.flowRight=vR,ie.fromPairs=Vd,ie.functions=xw,ie.functionsIn=bw,ie.groupBy=Qc,ie.initial=s0,ie.intersection=l0,ie.intersectionBy=Jb,ie.intersectionWith=u0,ie.invert=ep,ie.invertBy=j0,ie.invokeMap=Zd,ie.iteratee=Ew,ie.keyBy=R0,ie.keys=Er,ie.keysIn=Ni,ie.map=Bu,ie.mapKeys=Af,ie.mapValues=V0,ie.matches=xR,ie.matchesProperty=bR,ie.memoize=Zl,ie.merge=$u,ie.mergeWith=y3,ie.method=wR,ie.methodOf=SR,ie.mixin=kw,ie.negate=nh,ie.nthArg=ER,ie.omit=TF,ie.omitBy=PF,ie.once=bg,ie.orderBy=Kd,ie.over=kR,ie.overArgs=wg,ie.overEvery=AR,ie.overSome=TR,ie.partial=Sg,ie.partialRight=s,ie.partition=Xd,ie.pick=IF,ie.pickBy=_3,ie.property=E3,ie.propertyOf=PR,ie.pull=ew,ie.pullAll=ag,ie.pullAllBy=xf,ie.pullAllWith=_s,ie.pullAt=Gl,ie.range=IR,ie.rangeRight=MR,ie.rearg=i,ie.reject=dw,ie.remove=h0,ie.rest=u,ie.reverse=bf,ie.sampleSize=eh,ie.set=LF,ie.setWith=OF,ie.shuffle=gg,ie.slice=tw,ie.sortBy=mw,ie.sortedUniq=Jc,ie.sortedUniqBy=f0,ie.split=nR,ie.spread=p,ie.tail=d0,ie.take=cg,ie.takeRight=p0,ie.takeRightWhile=Gd,ie.takeWhile=m0,ie.tap=pg,ie.throttle=g,ie.thru=wf,ie.toArray=$i,ie.toPairs=v3,ie.toPairsIn=x3,ie.toPath=DR,ie.toPlainObject=ra,ie.transform=FF,ie.unary=S,ie.union=iw,ie.unionBy=ow,ie.unionWith=g0,ie.uniq=aw,ie.uniqBy=sw,ie.uniqWith=lw,ie.unset=RF,ie.unzip=hg,ie.unzipWith=Hd,ie.update=DF,ie.updateWith=zF,ie.values=tp,ie.valuesIn=BF,ie.without=Hl,ie.words=S3,ie.wrap=C,ie.xor=y0,ie.xorBy=_0,ie.xorWith=v0,ie.zip=x0,ie.zipObject=b0,ie.zipObjectDeep=fg,ie.zipWith=Wd,ie.entries=v3,ie.entriesIn=x3,ie.extend=rh,ie.extendWith=kf,kw(ie,ie),ie.add=BR,ie.attempt=C3,ie.camelCase=jF,ie.capitalize=b3,ie.ceil=$R,ie.clamp=$F,ie.clone=M,ie.cloneDeep=j,ie.cloneDeepWith=H,ie.cloneWith=B,ie.conformsTo=J,ie.deburr=w3,ie.defaultTo=yR,ie.divide=NR,ie.endsWith=VF,ie.eq=te,ie.escape=qF,ie.escapeRegExp=GF,ie.every=T0,ie.find=P0,ie.findIndex=ig,ie.findKey=Ag,ie.findLast=I0,ie.findLastIndex=il,ie.findLastKey=U0,ie.floor=UR,ie.forEach=O0,ie.forEachRight=mg,ie.forIn=gw,ie.forInRight=yw,ie.forOwn=_w,ie.forOwnRight=vw,ie.get=Tg,ie.gt=re,ie.gte=ge,ie.has=ww,ie.hasIn=oa,ie.head=vf,ie.identity=Ca,ie.includes=F0,ie.indexOf=Yb,ie.inRange=NF,ie.invoke=Co,ie.isArguments=ve,ie.isArray=pe,ie.isArrayBuffer=$e,ie.isArrayLike=ke,ie.isArrayLikeObject=Be,ie.isBoolean=He,ie.isBuffer=et,ie.isDate=Rt,ie.isElement=$t,ie.isEmpty=Ft,ie.isEqual=Pt,ie.isEqualWith=wt,ie.isError=Mt,ie.isFinite=It,ie.isFunction=ct,ie.isInteger=Yt,ie.isLength=qt,ie.isMap=br,ie.isMatch=ci,ie.isMatchWith=Vo,ie.isNaN=uo,ie.isNative=Br,ie.isNil=Ri,ie.isNull=_i,ie.isNumber=co,ie.isObject=Ht,ie.isObjectLike=pn,ie.isPlainObject=vi,ie.isRegExp=$r,ie.isSafeInteger=hi,ie.isSet=Di,ie.isString=Ti,ie.isSymbol=Cr,ie.isTypedArray=xi,ie.isUndefined=Nr,ie.isWeakMap=zi,ie.isWeakSet=Tn,ie.join=c0,ie.kebabCase=HF,ie.last=jo,ie.lastIndexOf=og,ie.lowerCase=WF,ie.lowerFirst=ZF,ie.lt=qo,ie.lte=Bi,ie.max=jR,ie.maxBy=VR,ie.mean=qR,ie.meanBy=GR,ie.min=HR,ie.minBy=WR,ie.stubArray=Tw,ie.stubFalse=Pw,ie.stubObject=LR,ie.stubString=OR,ie.stubTrue=FR,ie.multiply=ZR,ie.nth=Qb,ie.noConflict=CR,ie.noop=Aw,ie.now=Cf,ie.pad=KF,ie.padEnd=XF,ie.padStart=YF,ie.parseInt=JF,ie.random=UF,ie.reduce=hw,ie.reduceRight=fw,ie.repeat=QF,ie.replace=eR,ie.result=MF,ie.round=KR,ie.runInContext=ze,ie.sample=pw,ie.size=D0,ie.snakeCase=tR,ie.some=yg,ie.sortedIndex=nw,ie.sortedIndexBy=qd,ie.sortedIndexOf=sg,ie.sortedLastIndex=rw,ie.sortedLastIndexBy=lg,ie.sortedLastIndexOf=ug,ie.startCase=rR,ie.startsWith=iR,ie.subtract=XR,ie.sum=YR,ie.sumBy=JR,ie.template=oR,ie.times=RR,ie.toFinite=bi,ie.toInteger=hn,ie.toLength=Sa,ie.toLower=aR,ie.toNumber=wi,ie.toSafeInteger=ia,ie.toString=Cn,ie.toUpper=sR,ie.trim=lR,ie.trimEnd=uR,ie.trimStart=cR,ie.truncate=hR,ie.unescape=fR,ie.uniqueId=zR,ie.upperCase=dR,ie.upperFirst=Sw,ie.each=O0,ie.eachRight=mg,ie.first=vf,kw(ie,function(){var f={};return kn(ie,function(y,k){ht.call(ie.prototype,k)||(f[k]=y)}),f}(),{chain:!1}),ie.VERSION=r,ki(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){ie[f].placeholder=ie}),ki(["drop","take"],function(f,y){Sn.prototype[f]=function(k){k=k===n?1:zr(hn(k),0);var z=this.__filtered__&&!y?new Sn(this):this.clone();return z.__filtered__?z.__takeCount__=Lt(k,z.__takeCount__):z.__views__.push({size:Lt(k,X),type:f+(z.__dir__<0?"Right":"")}),z},Sn.prototype[f+"Right"]=function(k){return this.reverse()[f](k).reverse()}}),ki(["filter","map","takeWhile"],function(f,y){var k=y+1,z=k==yt||k==zt;Sn.prototype[f]=function(Y){var ue=this.clone();return ue.__iteratees__.push({iteratee:on(Y,3),type:k}),ue.__filtered__=ue.__filtered__||z,ue}}),ki(["head","last"],function(f,y){var k="take"+(y?"Right":"");Sn.prototype[f]=function(){return this[k](1).value()[0]}}),ki(["initial","tail"],function(f,y){var k="drop"+(y?"":"Right");Sn.prototype[f]=function(){return this.__filtered__?new Sn(this):this[k](1)}}),Sn.prototype.compact=function(){return this.filter(Ca)},Sn.prototype.find=function(f){return this.filter(f).head()},Sn.prototype.findLast=function(f){return this.reverse().find(f)},Sn.prototype.invokeMap=In(function(f,y){return typeof f=="function"?new Sn(this):this.map(function(k){return Nl(k,f,y)})}),Sn.prototype.reject=function(f){return this.filter(nh(on(f)))},Sn.prototype.slice=function(f,y){f=hn(f);var k=this;return k.__filtered__&&(f>0||y<0)?new Sn(k):(f<0?k=k.takeRight(-f):f&&(k=k.drop(f)),y!==n&&(y=hn(y),k=y<0?k.dropRight(-y):k.take(y-f)),k)},Sn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Sn.prototype.toArray=function(){return this.take(X)},kn(Sn.prototype,function(f,y){var k=/^(?:filter|find|map|reject)|While$/.test(y),z=/^(?:head|last)$/.test(y),Y=ie[z?"take"+(y=="last"?"Right":""):y],ue=z||/^find/.test(y);Y&&(ie.prototype[y]=function(){var Ee=this.__wrapped__,Ie=z?[1]:arguments,qe=Ee instanceof Sn,ft=Ie[0],dt=qe||pe(Ee),gt=function(Kn){var nr=Y.apply(ie,Fa([Kn],Ie));return z&&Ut?nr[0]:nr};dt&&k&&typeof ft=="function"&&ft.length!=1&&(qe=dt=!1);var Ut=this.__chain__,tn=!!this.__actions__.length,gn=ue&&!Ut,Dn=qe&&!tn;if(!ue&&dt){Ee=Dn?Ee:new Sn(this);var yn=f.apply(Ee,Ie);return yn.__actions__.push({func:wf,args:[gt],thisArg:n}),new Yi(yn,Ut)}return gn&&Dn?f.apply(this,Ie):(yn=this.thru(gt),gn?z?yn.value()[0]:yn.value():yn)})}),ki(["pop","push","shift","sort","splice","unshift"],function(f){var y=Bt[f],k=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",z=/^(?:pop|shift)$/.test(f);ie.prototype[f]=function(){var Y=arguments;if(z&&!this.__chain__){var ue=this.value();return y.apply(pe(ue)?ue:[],Y)}return this[k](function(Ee){return y.apply(pe(Ee)?Ee:[],Y)})}}),kn(Sn.prototype,function(f,y){var k=ie[y];if(k){var z=k.name+"";ht.call(fs,z)||(fs[z]=[]),fs[z].push({name:y,func:k})}}),fs[Dd(n,R).name]=[{name:"wrapper",func:n}],Sn.prototype.clone=uf,Sn.prototype.reverse=zc,Sn.prototype.value=Bc,ie.prototype.at=na,ie.prototype.chain=Sf,ie.prototype.commit=w0,ie.prototype.next=S0,ie.prototype.plant=E0,ie.prototype.reverse=k0,ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=A0,ie.prototype.first=ie.prototype.head,Xs&&(ie.prototype[Xs]=C0),ie},Zs=Su();Us?((Us.exports=Zs)._=Zs,Kh._=Zs):Ei._=Zs}).call(Ss)})(P1,P1.exports);var fa=P1.exports,xl={},Ms={},R6={exports:{}},Dr={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=60103,_x=60106,a_=60107,s_=60108,l_=60114,u_=60109,c_=60110,h_=60112,f_=60113,HE=60120,d_=60115,p_=60116,D6=60121,z6=60122,B6=60117,$6=60129,N6=60131;if(typeof Symbol=="function"&&Symbol.for){var Eo=Symbol.for;yx=Eo("react.element"),_x=Eo("react.portal"),a_=Eo("react.fragment"),s_=Eo("react.strict_mode"),l_=Eo("react.profiler"),u_=Eo("react.provider"),c_=Eo("react.context"),h_=Eo("react.forward_ref"),f_=Eo("react.suspense"),HE=Eo("react.suspense_list"),d_=Eo("react.memo"),p_=Eo("react.lazy"),D6=Eo("react.block"),z6=Eo("react.server.block"),B6=Eo("react.fundamental"),$6=Eo("react.debug_trace_mode"),N6=Eo("react.legacy_hidden")}function bl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yx:switch(e=e.type,e){case a_:case l_:case s_:case f_:case HE:return e;default:switch(e=e&&e.$$typeof,e){case c_:case h_:case p_:case d_:case u_:return e;default:return t}}case _x:return t}}}var Sz=u_,Cz=yx,Ez=h_,kz=a_,Az=p_,Tz=d_,Pz=_x,Iz=l_,Mz=s_,Lz=f_;Dr.ContextConsumer=c_;Dr.ContextProvider=Sz;Dr.Element=Cz;Dr.ForwardRef=Ez;Dr.Fragment=kz;Dr.Lazy=Az;Dr.Memo=Tz;Dr.Portal=Pz;Dr.Profiler=Iz;Dr.StrictMode=Mz;Dr.Suspense=Lz;Dr.isAsyncMode=function(){return!1};Dr.isConcurrentMode=function(){return!1};Dr.isContextConsumer=function(e){return bl(e)===c_};Dr.isContextProvider=function(e){return bl(e)===u_};Dr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yx};Dr.isForwardRef=function(e){return bl(e)===h_};Dr.isFragment=function(e){return bl(e)===a_};Dr.isLazy=function(e){return bl(e)===p_};Dr.isMemo=function(e){return bl(e)===d_};Dr.isPortal=function(e){return bl(e)===_x};Dr.isProfiler=function(e){return bl(e)===l_};Dr.isStrictMode=function(e){return bl(e)===s_};Dr.isSuspense=function(e){return bl(e)===f_};Dr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===a_||e===l_||e===$6||e===s_||e===f_||e===HE||e===N6||typeof e=="object"&&e!==null&&(e.$$typeof===p_||e.$$typeof===d_||e.$$typeof===u_||e.$$typeof===c_||e.$$typeof===h_||e.$$typeof===B6||e.$$typeof===D6||e[0]===z6)};Dr.typeOf=bl;R6.exports=Dr;var am=R6.exports;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.isArray=zz;Ms.isBoolean=V6;Ms.isNull=q6;Ms.isNumber=j6;Ms.isObject=Dz;Ms.isPrimitiveData=Rz;Ms.isString=U6;Ms.isUndefined=G6;var Oz=fa,Fz=am;function U6(e){return typeof e=="string"}function j6(e){return typeof e=="number"}function V6(e){return typeof e=="boolean"}function q6(e){return e===null}function G6(e){return e===void 0}function Rz(e){return U6(e)||j6(e)||V6(e)||q6(e)||G6(e)}function Dz(e){return(0,Oz.isPlainObject)(e)&&!(0,Fz.isElement)(e)}function zz(e){return Array.isArray(e)}var vx={},H6={},WE={};Object.defineProperty(WE,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function zA(e){return Object.prototype.toString.call(e)==="[object Object]"}function Bz(e){var t,n;return zA(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(zA(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}WE.isPlainObject=Bz;var ZE={},I1=Ss&&Ss.__assign||function(){return I1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},I1.apply(this,arguments)},$z=Ss&&Ss.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var c=arguments[t],d=0,l=c.length;d<l;d++,a++)r[a]=c[d];return r};Object.defineProperty(ZE,"__esModule",{value:!0});var zg=[];function Nz(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function Uz(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function jz(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function Kv(e,t,n){n===void 0&&(n="");var r={indent:"	",singleQuotes:!0},a=I1(I1({},r),t),c;a.inlineCharacterLimit===void 0?c={newLine:`
`,newLineOrSpace:`
`,pad:n,indent:n+a.indent}:c={newLine:"@@__PRETTY_PRINT_NEW_LINE__@@",newLineOrSpace:"@@__PRETTY_PRINT_NEW_LINE_OR_SPACE__@@",pad:"@@__PRETTY_PRINT_PAD__@@",indent:"@@__PRETTY_PRINT_INDENT__@@"};var d=function(b){if(a.inlineCharacterLimit===void 0)return b;var E=b.replace(new RegExp(c.newLine,"g"),"").replace(new RegExp(c.newLineOrSpace,"g")," ").replace(new RegExp(c.pad+"|"+c.indent,"g"),"");return E.length<=a.inlineCharacterLimit?E:b.replace(new RegExp(c.newLine+"|"+c.newLineOrSpace,"g"),`
`).replace(new RegExp(c.pad,"g"),n).replace(new RegExp(c.indent,"g"),n+a.indent)};if(zg.indexOf(e)!==-1)return'"[Circular]"';if(e==null||typeof e=="number"||typeof e=="boolean"||typeof e=="function"||typeof e=="symbol"||Uz(e))return String(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e)){if(e.length===0)return"[]";zg.push(e);var l="["+c.newLine+e.map(function(b,E){var A=e.length-1===E?c.newLine:","+c.newLineOrSpace,L=Kv(b,a,n+a.indent);return a.transform&&(L=a.transform(e,E,L)),c.indent+L+A}).join("")+c.pad+"]";return zg.pop(),d(l)}if(Nz(e)){var x=$z(Object.keys(e),jz(e));if(a.filter&&(x=x.filter(function(E){return a.filter&&a.filter(e,E)})),x.length===0)return"{}";zg.push(e);var l="{"+c.newLine+x.map(function(E,A){var L=x.length-1===A?c.newLine:","+c.newLineOrSpace,F=typeof E=="symbol",$=!F&&/^[a-z$_][a-z$_0-9]*$/i.test(E.toString()),N=F||$?E:Kv(E,a),Z=Kv(e[E],a,n+a.indent);return a.transform&&(Z=a.transform(e,E,Z)),c.indent+String(N)+": "+Z+L}).join("")+c.pad+"}";return zg.pop(),d(l)}return e=String(e).replace(/[\r\n]/g,function(b){return b===`
`?"\\n":"\\r"}),a.singleQuotes?(e=e.replace(/\\?'/g,"\\'"),"'"+e+"'"):(e=e.replace(/"/g,'\\"'),'"'+e+'"')}ZE.prettyPrint=Kv;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=WE,n=pt,r=ZE,a=am;function c(We){return We&&typeof We=="object"&&"default"in We?We:{default:We}}function d(We){if(We&&We.__esModule)return We;var se=Object.create(null);return We&&Object.keys(We).forEach(function(Re){if(Re!=="default"){var Pe=Object.getOwnPropertyDescriptor(We,Re);Object.defineProperty(se,Re,Pe.get?Pe:{enumerable:!0,get:function(){return We[Re]}})}}),se.default=We,Object.freeze(se)}var l=d(n),x=c(n),b=function(We,se){return We===0?"":new Array(We*se).fill(" ").join("")};function E(We){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(se){return typeof se}:E=function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},E(We)}function A(We){return L(We)||F(We)||$(We)||Z()}function L(We){if(Array.isArray(We))return N(We)}function F(We){if(typeof Symbol<"u"&&We[Symbol.iterator]!=null||We["@@iterator"]!=null)return Array.from(We)}function $(We,se){if(We){if(typeof We=="string")return N(We,se);var Re=Object.prototype.toString.call(We).slice(8,-1);if(Re==="Object"&&We.constructor&&(Re=We.constructor.name),Re==="Map"||Re==="Set")return Array.from(We);if(Re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re))return N(We,se)}}function N(We,se){(se==null||se>We.length)&&(se=We.length);for(var Re=0,Pe=new Array(se);Re<se;Re++)Pe[Re]=We[Re];return Pe}function Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(We,se){return We===null||E(We)!=="object"||We instanceof Date||We instanceof RegExp||l.isValidElement(We)?We:(se.add(We),Array.isArray(We)?We.map(function(Re){return R(Re,se)}):Object.keys(We).sort().reduce(function(Re,Pe){return Pe==="_owner"||(Pe==="current"||se.has(We[Pe])?Re[Pe]="[Circular]":Re[Pe]=R(We[Pe],se)),Re},{}))}function q(We){return R(We,new WeakSet)}var G=function(se){return{type:"string",value:se}},ee=function(se){return{type:"number",value:se}},ae=function(se,Re,Pe,rt){return{type:"ReactElement",displayName:se,props:Re,defaultProps:Pe,childrens:rt}},K=function(se,Re){return{type:"ReactFragment",key:se,childrens:Re}},le=!!n.Fragment,xe=function(se){return!se.name||se.name==="_default"?"No Display Name":se.name},Le=function We(se){switch(!0){case!!se.displayName:return se.displayName;case se.$$typeof===a.Memo:return We(se.type);case se.$$typeof===a.ForwardRef:return We(se.render);default:return xe(se)}},Oe=function(se){switch(!0){case typeof se.type=="string":return se.type;case typeof se.type=="function":return se.type.displayName?se.type.displayName:xe(se.type);case a.isForwardRef(se):case a.isMemo(se):return Le(se.type);case a.isContextConsumer(se):return"".concat(se.type._context.displayName||"Context",".Consumer");case a.isContextProvider(se):return"".concat(se.type._context.displayName||"Context",".Provider");case a.isLazy(se):return"Lazy";case a.isProfiler(se):return"Profiler";case a.isStrictMode(se):return"StrictMode";case a.isSuspense(se):return"Suspense";default:return"UnknownElementType"}},Fe=function(se,Re){return Re!=="children"},Ge=function(se){return se!==!0&&se!==!1&&se!==null&&se!==""},tt=function(se,Re){var Pe={};return Object.keys(se).filter(function(rt){return Re(se[rt],rt)}).forEach(function(rt){return Pe[rt]=se[rt]}),Pe},yt=function We(se,Re){var Pe=Re.displayName,rt=Pe===void 0?Oe:Pe;if(typeof se=="string")return G(se);if(typeof se=="number")return ee(se);if(!x.default.isValidElement(se))throw new Error("react-element-to-jsx-string: Expected a React.Element, got `".concat(E(se),"`"));var bt=rt(se),vn=tt(se.props,Fe);se.ref!==null&&(vn.ref=se.ref);var Wt=se.key;typeof Wt=="string"&&Wt.search(/^\./)&&(vn.key=Wt);var xt=tt(se.type.defaultProps||{},Fe),$n=x.default.Children.toArray(se.props.children).filter(Ge).map(function(jn){return We(jn,Re)});return le&&se.type===n.Fragment?K(Wt,$n):ae(bt,vn,xt,$n)};function At(){}var zt=function(se){return se.toString().split(`
`).map(function(Re){return Re.trim()}).join("")},Vt=function(se){return se.toString()},Ve=zt,_e=function(We,se){var Re=se.functionValue,Pe=Re===void 0?Ve:Re,rt=se.showFunctions;return Pe(!rt&&Pe===Ve?At:We)},we=function(We,se,Re,Pe){var rt=q(We),bt=r.prettyPrint(rt,{transform:function(Wt,xt,$n){var jn=Wt[xt];return jn&&n.isValidElement(jn)?vo(yt(jn,Pe),!0,Re,Pe):typeof jn=="function"?_e(jn,Pe):$n}});return se?bt.replace(/\s+/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\[ /g,"[").replace(/ ]/g,"]"):bt.replace(/\t/g,b(1,Pe.tabStop)).replace(/\n([^$])/g,`
`.concat(b(Re+1,Pe.tabStop),"$1"))},X=function(se){return se.replace(/"/g,"&quot;")},oe=function(se,Re,Pe,rt){if(typeof se=="number")return"{".concat(String(se),"}");if(typeof se=="string")return'"'.concat(X(se),'"');if(E(se)==="symbol"){var bt=se.valueOf().toString().replace(/Symbol\((.*)\)/,"$1");return bt?"{Symbol('".concat(bt,"')}"):"{Symbol()}"}return typeof se=="function"?"{".concat(_e(se,rt),"}"):n.isValidElement(se)?"{".concat(vo(yt(se,rt),!0,Pe,rt),"}"):se instanceof Date?isNaN(se.valueOf())?"{new Date(NaN)}":'{new Date("'.concat(se.toISOString(),'")}'):t.isPlainObject(se)||Array.isArray(se)?"{".concat(we(se,Re,Pe,rt),"}"):"{".concat(String(se),"}")},lt=function(We,se,Re,Pe,rt,bt,vn,Wt){if(!se&&!Pe)throw new Error('The prop "'.concat(We,'" has no value and no default: could not be formatted'));var xt=se?Re:rt,$n=Wt.useBooleanShorthandSyntax,jn=Wt.tabStop,bn=oe(xt,bt,vn,Wt),_r=" ",Mn=`
`.concat(b(vn+1,jn)),On=bn.includes(`
`);return $n&&bn==="{false}"&&!Pe?(_r="",Mn=""):$n&&bn==="{true}"?(_r+="".concat(We),Mn+="".concat(We)):(_r+="".concat(We,"=").concat(bn),Mn+="".concat(We,"=").concat(bn)),{attributeFormattedInline:_r,attributeFormattedMultiline:Mn,isMultilineAttribute:On}},mt=function(We,se){var Re=We.slice(0,We.length>0?We.length-1:0),Pe=We[We.length-1];return Pe&&(se.type==="string"||se.type==="number")&&(Pe.type==="string"||Pe.type==="number")?Re.push(G(String(Pe.value)+String(se.value))):(Pe&&Re.push(Pe),Re.push(se)),Re},Gt=function(se){return["key","ref"].includes(se)},Dt=function(We){return function(se){var Re=se.includes("key"),Pe=se.includes("ref"),rt=se.filter(function(vn){return!Gt(vn)}),bt=A(We?rt.sort():rt);return Pe&&bt.unshift("ref"),Re&&bt.unshift("key"),bt}};function Qt(We,se){return Array.isArray(se)?function(Re){return se.indexOf(Re)===-1}:function(Re){return se(We[Re],Re)}}var un=function(se,Re,Pe,rt,bt){var vn=bt.tabStop;return se.type==="string"?Re.split(`
`).map(function(Wt,xt){return xt===0?Wt:"".concat(b(rt,vn)).concat(Wt)}).join(`
`):Re},Xn=function(se,Re,Pe){return function(rt){return un(rt,vo(rt,se,Re,Pe),se,Re,Pe)}},Qn=function(se,Re){return function(Pe){var rt=Object.keys(se).includes(Pe);return!rt||rt&&se[Pe]!==Re[Pe]}},Bn=function(se,Re,Pe,rt,bt){return bt?b(Pe,rt).length+Re.length>bt:se.length>1},Qr=function(se,Re,Pe,rt,bt,vn,Wt){return(Bn(se,Re,bt,vn,Wt)||Pe)&&!rt},Je=function(We,se,Re,Pe){var rt=We.type,bt=We.displayName,vn=bt===void 0?"":bt,Wt=We.childrens,xt=We.props,$n=xt===void 0?{}:xt,jn=We.defaultProps,bn=jn===void 0?{}:jn;if(rt!=="ReactElement")throw new Error('The "formatReactElementNode" function could only format node of type "ReactElement". Given:  '.concat(rt));var _r=Pe.filterProps,Mn=Pe.maxInlineAttributesLineLength,On=Pe.showDefaultProps,La=Pe.sortProps,ni=Pe.tabStop,wr="<".concat(vn),ye=wr,W=wr,Q=!1,ce=[],Se=Qt($n,_r);Object.keys($n).filter(Se).filter(Qn(bn,$n)).forEach(function(Te){return ce.push(Te)}),Object.keys(bn).filter(Se).filter(function(){return On}).filter(function(Te){return!ce.includes(Te)}).forEach(function(Te){return ce.push(Te)});var Ce=Dt(La)(ce);if(Ce.forEach(function(Te){var Ae=lt(Te,Object.keys($n).includes(Te),$n[Te],Object.keys(bn).includes(Te),bn[Te],se,Re,Pe),Ne=Ae.attributeFormattedInline,ot=Ae.attributeFormattedMultiline,at=Ae.isMultilineAttribute;at&&(Q=!0),ye+=Ne,W+=ot}),W+=`
`.concat(b(Re,ni)),Qr(Ce,ye,Q,se,Re,ni,Mn)?wr=W:wr=ye,Wt&&Wt.length>0){var De=Re+1;wr+=">",se||(wr+=`
`,wr+=b(De,ni)),wr+=Wt.reduce(mt,[]).map(Xn(se,De,Pe)).join(se?"":`
`.concat(b(De,ni))),se||(wr+=`
`,wr+=b(De-1,ni)),wr+="</".concat(vn,">")}else Bn(Ce,ye,Re,ni,Mn)||(wr+=" "),wr+="/>";return wr},yr="",Gi="React.Fragment",Gn=function(se,Re,Pe){var rt={};return Re&&(rt={key:Re}),{type:"ReactElement",displayName:se,props:rt,defaultProps:{},childrens:Pe}},_n=function(se){var Re=se.key;return!!Re},_o=function(se){var Re=se.childrens;return Re.length===0},Mo=function(We,se,Re,Pe){var rt=We.type,bt=We.key,vn=We.childrens;if(rt!=="ReactFragment")throw new Error('The "formatReactFragmentNode" function could only format node of type "ReactFragment". Given: '.concat(rt));var Wt=Pe.useFragmentShortSyntax,xt;return Wt?_o(We)||_n(We)?xt=Gi:xt=yr:xt=Gi,Je(Gn(xt,bt,vn),se,Re,Pe)},Lo=["<",">","{","}"],ei=function(se){return Lo.some(function(Re){return se.includes(Re)})},Yn=function(se){return ei(se)?"{`".concat(se,"`}"):se},Oo=function(se){var Re=se;return Re.endsWith(" ")&&(Re=Re.replace(/^(.*?)(\s+)$/,"$1{'$2'}")),Re.startsWith(" ")&&(Re=Re.replace(/^(\s+)(.*)$/,"{'$1'}$2")),Re},vo=function(We,se,Re,Pe){if(We.type==="number")return String(We.value);if(We.type==="string")return We.value?"".concat(Oo(Yn(String(We.value)))):"";if(We.type==="ReactElement")return Je(We,se,Re,Pe);if(We.type==="ReactFragment")return Mo(We,se,Re,Pe);throw new TypeError('Unknow format type "'.concat(We.type,'"'))},vt=function(We,se){return vo(We,!1,0,se)},ti=function(se){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=Re.filterProps,rt=Pe===void 0?[]:Pe,bt=Re.showDefaultProps,vn=bt===void 0?!0:bt,Wt=Re.showFunctions,xt=Wt===void 0?!1:Wt,$n=Re.functionValue,jn=Re.tabStop,bn=jn===void 0?2:jn,_r=Re.useBooleanShorthandSyntax,Mn=_r===void 0?!0:_r,On=Re.useFragmentShortSyntax,La=On===void 0?!0:On,ni=Re.sortProps,wr=ni===void 0?!0:ni,ye=Re.maxInlineAttributesLineLength,W=Re.displayName;if(!se)throw new Error("react-element-to-jsx-string: Expected a ReactElement");var Q={filterProps:rt,showDefaultProps:vn,showFunctions:xt,functionValue:$n,tabStop:bn,useBooleanShorthandSyntax:Mn,useFragmentShortSyntax:La,sortProps:wr,maxInlineAttributesLineLength:ye,displayName:W};return vt(yt(se,Q),Q)};e.default=ti,e.inlineFunction=zt,e.preserveFunctionLineBreak=Vt})(H6);Object.defineProperty(vx,"__esModule",{value:!0});vx.createValue=KE;vx.createValues=W6;var Vz=Gz(H6),qz=am,n2=Ms;function Gz(e){return e&&e.__esModule?e:{default:e}}function W6(e){var t={};return Object.keys(e).forEach(function(n){t[n]=KE(e[n])}),t}function KE(e){return(0,n2.isPrimitiveData)(e)?{type:"primitive",data:e}:(0,n2.isArray)(e)?{type:"array",values:e.map(function(t){return KE(t)})}:(0,n2.isObject)(e)?{type:"object",values:W6(e)}:{type:"unserializable",stringifiedData:Hz(e)}}function Hz(e){return(0,qz.isElement)(e)?(0,Vz.default)(e):String(e)}var xx={};Object.defineProperty(xx,"__esModule",{value:!0});xx.extendWithValue=XE;xx.extendWithValues=Z6;var BA=Ms;function Z6(e,t){var n={};return Object.keys(t).forEach(function(r){n[r]=XE(e[r],t[r])}),n}function XE(e,t){if(t.type==="unserializable")return e;if(t.type==="object"){var n=(0,BA.isObject)(e)?e:{};return Z6(n,t.values)}if(t.type==="array"){var r=(0,BA.isArray)(e)?e:[];return t.values.map(function(a,c){return XE(r[c],a)})}return t.data}var lu={},bx={},m_={};Object.defineProperty(m_,"__esModule",{value:!0});m_.removeItemMatch=e9;m_.replaceOrAddItem=Qz;m_.updateItem=Jz;var K6=fa;function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function NA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(n),!0).forEach(function(r){Wz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kh(e){return Yz(e)||Xz(e)||Kz(e)||Zz()}function Zz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kz(e,t){if(e){if(typeof e=="string")return DS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DS(e,t)}}function Xz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yz(e){if(Array.isArray(e))return DS(e)}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jz(e,t,n){var r=e.indexOf(t);return[].concat(kh(e.slice(0,r)),[NA(NA({},t),n)],kh(e.slice(r+1)))}function Qz(e,t,n){var r=(0,K6.findIndex)(e,t);return r!==-1?[].concat(kh(e.slice(0,r)),[n],kh(e.slice(r+1))):[].concat(kh(e),[n])}function e9(e,t){var n=(0,K6.findIndex)(e,t);return n===-1?kh(e):[].concat(kh(e.slice(0,n)),kh(e.slice(n+1)))}var wx={};Object.defineProperty(wx,"__esModule",{value:!0});wx.addTreeNodeChild=o9;wx.sortTreeChildren=Y6;function UA(e){return i9(e)||r9(e)||n9(e)||t9()}function t9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n9(e,t){if(e){if(typeof e=="string")return zS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zS(e,t)}}function r9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function i9(e){if(Array.isArray(e))return zS(e)}function zS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(n),!0).forEach(function(r){X6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o9(e,t,n){e.children||(e.children={}),e.children[t]=n}function Y6(e){var t=e.children;if(!t)return e;var n=Object.keys(t),r=n.filter(function(c){return t[c].children}),a=n.filter(function(c){return!t[c].children});return lv(lv({},e),{},{children:[].concat(UA(r.sort()),UA(a.sort())).reduce(function(c,d){return lv(lv({},c),{},X6({},d,Y6(t[d])))},{})})}var YE={};Object.defineProperty(YE,"__esModule",{value:!0});YE.uuid=J6;function J6(e){return e?(Number(e)^Math.random()*16>>Number(e)/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,J6)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"TreeNode",{enumerable:!0,get:function(){return n.TreeNode}}),Object.defineProperty(e,"addTreeNodeChild",{enumerable:!0,get:function(){return n.addTreeNodeChild}}),Object.defineProperty(e,"removeItemMatch",{enumerable:!0,get:function(){return t.removeItemMatch}}),Object.defineProperty(e,"replaceOrAddItem",{enumerable:!0,get:function(){return t.replaceOrAddItem}}),Object.defineProperty(e,"sortTreeChildren",{enumerable:!0,get:function(){return n.sortTreeChildren}}),Object.defineProperty(e,"updateItem",{enumerable:!0,get:function(){return t.updateItem}}),Object.defineProperty(e,"uuid",{enumerable:!0,get:function(){return r.uuid}});var t=m_,n=wx,r=YE})(bx);Object.defineProperty(lu,"__esModule",{value:!0});lu.DEFAULT_RENDER_KEY=void 0;lu.createFixtureStateProps=s9;lu.findFixtureStateProps=eM;lu.getFixtureStateProps=a9;lu.removeFixtureStateProps=c9;lu.resetFixtureStateProps=l9;lu.updateFixtureStateProps=u9;var BS=fa,Sx=bx,Q6=0;lu.DEFAULT_RENDER_KEY=Q6;function a9(e,t){var n=e.props;return n?n.filter(function(r){return r.elementId.decoratorId===t}):[]}function eM(e,t){var n=e.props;return n&&(0,BS.find)(n,function(r){return(0,BS.isEqual)(r.elementId,t)})}function s9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=e.componentName,c=t.props,d=c===void 0?[]:c;return(0,Sx.replaceOrAddItem)(d,tM(n),{elementId:n,values:r,renderKey:Q6,componentName:a})}function l9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=nM(t,n);return(0,Sx.updateItem)(t.props,a,{values:r,renderKey:a.renderKey+1})}function u9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=nM(t,n);return(0,Sx.updateItem)(t.props,a,{values:r})}function c9(e,t){return(0,Sx.removeItemMatch)(e.props||[],tM(t))}function tM(e){return function(t){return(0,BS.isEqual)(t.elementId,e)}}function nM(e,t){var n=eM(e,t);if(!n){var r=JSON.stringify(t);throw new Error('Fixture state props missing for element "'.concat(r,'"'))}return n}var ed={};Object.defineProperty(ed,"__esModule",{value:!0});ed.createFixtureStateClassState=f9;ed.findFixtureStateClassState=rM;ed.getFixtureStateClassState=h9;ed.removeFixtureStateClassState=p9;ed.updateFixtureStateClassState=d9;var $S=fa,JE=bx;function h9(e,t){var n=e.classState;return n?n.filter(function(r){return r.elementId.decoratorId===t}):[]}function rM(e,t){var n=e.classState;return n&&(0,$S.find)(n,function(r){return(0,$S.isEqual)(r.elementId,t)})}function f9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=e.componentName,c=t.classState,d=c===void 0?[]:c;return(0,JE.replaceOrAddItem)(d,iM(n),{elementId:n,values:r,componentName:a})}function d9(e){var t=e.fixtureState,n=e.elementId,r=e.values,a=m9(t,n);return(0,JE.updateItem)(t.classState,a,{values:r})}function p9(e,t){return(0,JE.removeItemMatch)(e.classState||[],iM(t))}function iM(e){return function(t){return(0,$S.isEqual)(t.elementId,e)}}function m9(e,t){var n=rM(e,t);if(!n){var r=JSON.stringify(t);throw new Error('Fixture state class state missing for element "'.concat(r,'"'))}return n}var QE={};Object.defineProperty(QE,"__esModule",{value:!0});QE.findFixtureStateControl=g9;function g9(e,t){var n=e.controls;return n&&n[t]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ArrayData",{enumerable:!0,get:function(){return t.ArrayData}}),Object.defineProperty(e,"DEFAULT_RENDER_KEY",{enumerable:!0,get:function(){return a.DEFAULT_RENDER_KEY}}),Object.defineProperty(e,"FixtureDecoratorId",{enumerable:!0,get:function(){return t.FixtureDecoratorId}}),Object.defineProperty(e,"FixtureElementId",{enumerable:!0,get:function(){return t.FixtureElementId}}),Object.defineProperty(e,"FixtureState",{enumerable:!0,get:function(){return t.FixtureState}}),Object.defineProperty(e,"FixtureStateArrayValue",{enumerable:!0,get:function(){return t.FixtureStateArrayValue}}),Object.defineProperty(e,"FixtureStateClassState",{enumerable:!0,get:function(){return t.FixtureStateClassState}}),Object.defineProperty(e,"FixtureStateControl",{enumerable:!0,get:function(){return t.FixtureStateControl}}),Object.defineProperty(e,"FixtureStateControls",{enumerable:!0,get:function(){return t.FixtureStateControls}}),Object.defineProperty(e,"FixtureStateData",{enumerable:!0,get:function(){return t.FixtureStateData}}),Object.defineProperty(e,"FixtureStateObjectValue",{enumerable:!0,get:function(){return t.FixtureStateObjectValue}}),Object.defineProperty(e,"FixtureStatePrimitiveValue",{enumerable:!0,get:function(){return t.FixtureStatePrimitiveValue}}),Object.defineProperty(e,"FixtureStateProps",{enumerable:!0,get:function(){return t.FixtureStateProps}}),Object.defineProperty(e,"FixtureStateSelectControl",{enumerable:!0,get:function(){return t.FixtureStateSelectControl}}),Object.defineProperty(e,"FixtureStateStandardControl",{enumerable:!0,get:function(){return t.FixtureStateStandardControl}}),Object.defineProperty(e,"FixtureStateUnserializableValue",{enumerable:!0,get:function(){return t.FixtureStateUnserializableValue}}),Object.defineProperty(e,"FixtureStateValue",{enumerable:!0,get:function(){return t.FixtureStateValue}}),Object.defineProperty(e,"FixtureStateValues",{enumerable:!0,get:function(){return t.FixtureStateValues}}),Object.defineProperty(e,"ObjectData",{enumerable:!0,get:function(){return t.ObjectData}}),Object.defineProperty(e,"PrimitiveData",{enumerable:!0,get:function(){return t.PrimitiveData}}),Object.defineProperty(e,"SetFixtureState",{enumerable:!0,get:function(){return t.SetFixtureState}}),Object.defineProperty(e,"createFixtureStateClassState",{enumerable:!0,get:function(){return c.createFixtureStateClassState}}),Object.defineProperty(e,"createFixtureStateProps",{enumerable:!0,get:function(){return a.createFixtureStateProps}}),Object.defineProperty(e,"createValue",{enumerable:!0,get:function(){return n.createValue}}),Object.defineProperty(e,"createValues",{enumerable:!0,get:function(){return n.createValues}}),Object.defineProperty(e,"extendWithValue",{enumerable:!0,get:function(){return r.extendWithValue}}),Object.defineProperty(e,"extendWithValues",{enumerable:!0,get:function(){return r.extendWithValues}}),Object.defineProperty(e,"findFixtureStateClassState",{enumerable:!0,get:function(){return c.findFixtureStateClassState}}),Object.defineProperty(e,"findFixtureStateControl",{enumerable:!0,get:function(){return d.findFixtureStateControl}}),Object.defineProperty(e,"findFixtureStateProps",{enumerable:!0,get:function(){return a.findFixtureStateProps}}),Object.defineProperty(e,"getFixtureStateClassState",{enumerable:!0,get:function(){return c.getFixtureStateClassState}}),Object.defineProperty(e,"getFixtureStateProps",{enumerable:!0,get:function(){return a.getFixtureStateProps}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}}),Object.defineProperty(e,"isBoolean",{enumerable:!0,get:function(){return t.isBoolean}}),Object.defineProperty(e,"isNull",{enumerable:!0,get:function(){return t.isNull}}),Object.defineProperty(e,"isNumber",{enumerable:!0,get:function(){return t.isNumber}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return t.isObject}}),Object.defineProperty(e,"isPrimitiveData",{enumerable:!0,get:function(){return t.isPrimitiveData}}),Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return t.isString}}),Object.defineProperty(e,"removeFixtureStateClassState",{enumerable:!0,get:function(){return c.removeFixtureStateClassState}}),Object.defineProperty(e,"removeFixtureStateProps",{enumerable:!0,get:function(){return a.removeFixtureStateProps}}),Object.defineProperty(e,"resetFixtureStateProps",{enumerable:!0,get:function(){return a.resetFixtureStateProps}}),Object.defineProperty(e,"updateFixtureStateClassState",{enumerable:!0,get:function(){return c.updateFixtureStateClassState}}),Object.defineProperty(e,"updateFixtureStateProps",{enumerable:!0,get:function(){return a.updateFixtureStateProps}});var t=Ms,n=vx,r=xx,a=lu,c=ed,d=QE})(xl);var wl={},ek={},Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.getComponentName=y9;var r2=new WeakMap;function y9(e){if(typeof e=="string")return e;if(!r2.has(e)){var t=e.displayName||e.name||"";r2.set(e,t)}return r2.get(e)}var Ex={};Object.defineProperty(Ex,"__esModule",{value:!0});Ex.isReactElement=v9;var _9=am;function v9(e){return(0,_9.isElement)(e)}Object.defineProperty(ek,"__esModule",{value:!0});ek.areNodesEqual=tk;var py=fa,VA=Cx,qA=Ex;function tk(e,t,n){return(0,qA.isReactElement)(e)&&(0,qA.isReactElement)(t)?x9(e,t,n):Array.isArray(e)&&Array.isArray(t)?w9(e,t,n):GA(e)&&GA(t)?S9(e,t):(0,py.isEqual)(e,t)}function x9(e,t,n){return b9(e.type,t.type,n)?e.key===t.key&&e.ref===t.ref&&tk(e.props,t.props,n):!1}function b9(e,t,n){return n?e===t:(0,VA.getComponentName)(e)===(0,VA.getComponentName)(t)}function w9(e,t,n){return e.length!==t.length?!1:e.every(function(r,a){return tk(r,t[a],n)})}function GA(e){return(0,py.isPlainObject)(e)}function S9(e,t){return(0,py.isEqual)(Object.keys(e),Object.keys(t))?Object.keys(e).every(function(n){return(0,py.isEqualWith)(e[n],t[n],function(r,a){return typeof r=="function"&&typeof a=="function"?r===a||r.toString()===a.toString():(0,py.isEqual)(r,a)})}):!1}var kx={},Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});Ax.isMultiFixture=E9;var C9=am;function NS(e){"@babel/helpers - typeof";return NS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NS(e)}function E9(e){return e!==null&&NS(e)==="object"&&!(0,C9.isElement)(e)}Object.defineProperty(kx,"__esModule",{value:!0});kx.getFixtureListFromExports=T9;kx.getFixtureListFromWrappers=A9;var k9=Ax;function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function M1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(n),!0).forEach(function(r){nk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A9(e){return Object.keys(e).reduce(function(t,n){return M1(M1({},t),{},nk({},n,P9(e[n])))},{})}function T9(e){return Object.keys(e).reduce(function(t,n){return M1(M1({},t),{},nk({},n,oM(e[n])))},{})}function P9(e){return oM(e.module.default)}function oM(e){return(0,k9.isMultiFixture)(e)?{type:"multi",fixtureNames:Object.keys(e)}:{type:"single"}}var rk={};Object.defineProperty(rk,"__esModule",{value:!0});rk.getSortedDecoratorsForFixturePath=R9;function I9(e){return F9(e)||O9(e)||L9(e)||M9()}function M9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L9(e,t){if(e){if(typeof e=="string")return US(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return US(e,t)}}function O9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function F9(e){if(Array.isArray(e))return US(e)}function US(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ZA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(n),!0).forEach(function(r){aM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e,t){return $9(D9(t,e))}function D9(e,t){return Object.keys(e).filter(function(n){return z9(B9(n),t)}).reduce(function(n,r){return ZA(ZA({},n),{},aM({},r,e[r]))},{})}function z9(e,t){return e===""||t.indexOf("".concat(e,"/"))===0}function B9(e){return e.replace(/^((.+)\/)?.+$/,"$2")}function $9(e){return N9(Object.keys(e)).map(function(t){return e[t]})}function N9(e){return I9(e).sort(function(t,n){return KA(t)-KA(n)||t.localeCompare(n)})}function KA(e){return e.split("/").length}var sM={};Object.defineProperty(sM,"__esModule",{value:!0});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReactDecorator",{enumerable:!0,get:function(){return l.ReactDecorator}}),Object.defineProperty(e,"ReactDecoratorProps",{enumerable:!0,get:function(){return l.ReactDecoratorProps}}),Object.defineProperty(e,"ReactDecorators",{enumerable:!0,get:function(){return l.ReactDecorators}}),Object.defineProperty(e,"ReactFixture",{enumerable:!0,get:function(){return l.ReactFixture}}),Object.defineProperty(e,"ReactFixtureExport",{enumerable:!0,get:function(){return l.ReactFixtureExport}}),Object.defineProperty(e,"ReactFixtureExports",{enumerable:!0,get:function(){return l.ReactFixtureExports}}),Object.defineProperty(e,"ReactFixtureMap",{enumerable:!0,get:function(){return l.ReactFixtureMap}}),Object.defineProperty(e,"ReactFixtureModule",{enumerable:!0,get:function(){return l.ReactFixtureModule}}),Object.defineProperty(e,"ReactFixtureWrapper",{enumerable:!0,get:function(){return l.ReactFixtureWrapper}}),Object.defineProperty(e,"ReactFixtureWrappers",{enumerable:!0,get:function(){return l.ReactFixtureWrappers}}),Object.defineProperty(e,"areNodesEqual",{enumerable:!0,get:function(){return t.areNodesEqual}}),Object.defineProperty(e,"getComponentName",{enumerable:!0,get:function(){return n.getComponentName}}),Object.defineProperty(e,"getFixtureListFromExports",{enumerable:!0,get:function(){return r.getFixtureListFromExports}}),Object.defineProperty(e,"getFixtureListFromWrappers",{enumerable:!0,get:function(){return r.getFixtureListFromWrappers}}),Object.defineProperty(e,"getSortedDecoratorsForFixturePath",{enumerable:!0,get:function(){return a.getSortedDecoratorsForFixturePath}}),Object.defineProperty(e,"isMultiFixture",{enumerable:!0,get:function(){return c.isMultiFixture}}),Object.defineProperty(e,"isReactElement",{enumerable:!0,get:function(){return d.isReactElement}});var t=ek,n=Cx,r=kx,a=rk,c=Ax,d=Ex,l=sM})(wl);var da={};Object.defineProperty(da,"__esModule",{value:!0});da.FixtureContext=void 0;var U9=pt,j9=(0,U9.createContext)({fixtureState:{},setFixtureState:function(){}});da.FixtureContext=j9;var td={},g_={},ik={},nd={};Object.defineProperty(nd,"__esModule",{value:!0});nd.getChildrenPath=V9;nd.isRootPath=lM;function V9(e){return lM(e)?"props.children":"".concat(e,".props.children")}function lM(e){return e===""}Object.defineProperty(ik,"__esModule",{value:!0});ik.findElementPaths=VS;var q9=fa,G9=pt,H9=wl,W9=nd;function Z9(e){return J9(e)||Y9(e)||X9(e)||K9()}function K9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9(e,t){if(e){if(typeof e=="string")return jS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jS(e,t)}}function Y9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function J9(e){if(Array.isArray(e))return jS(e)}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Array.isArray(e))return(0,q9.flatten)(e.map(function(a,c){return VS(a,"".concat(t,"[").concat(c,"]"))}));if(!(0,H9.isReactElement)(e))return[];var n=e.props.children,r=typeof n!="function"?VS(n,(0,W9.getChildrenPath)(t)):[];return e.type===G9.Fragment?r:[t].concat(Z9(r))}var y_={};Object.defineProperty(y_,"__esModule",{value:!0});y_.getElementAtPath=uM;y_.getExpectedElementAtPath=tB;var Q9=fa,XA=wl,eB=nd;function uM(e,t){if(!(0,XA.isReactElement)(e)&&!Array.isArray(e))return null;var n=e,r=(0,eB.isRootPath)(t)?n:(0,Q9.get)(n,t);return(0,XA.isReactElement)(r)?r:null}function tB(e,t){var n=uM(e,t);if(!n)throw new Error("Element not found at path: ".concat(t));return n}var ok={};Object.defineProperty(ok,"__esModule",{value:!0});ok.setElementAtPath=cB;var nB=fa,rB=wl,iB=y_,oB=nd,aB=["children"];function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(r){sB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lB(e,t){if(e==null)return{};var n=uB(e,t),r,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uB(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function cB(e,t,n){var r=(0,iB.getExpectedElementAtPath)(e,t),a=n(r);return(0,oB.isRootPath)(t)?a:(0,nB.set)(qS(e),t,a)}function qS(e){if(Array.isArray(e))return e.map(function(a){return qS(a)});if((0,rB.isReactElement)(e)){var t=e.props,n=t.children,r=lB(t,aB);return uv(uv({},e),{},{props:uv(uv({},r),{},{children:qS(n)})})}return e}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"findElementPaths",{enumerable:!0,get:function(){return t.findElementPaths}}),Object.defineProperty(e,"getChildrenPath",{enumerable:!0,get:function(){return a.getChildrenPath}}),Object.defineProperty(e,"getElementAtPath",{enumerable:!0,get:function(){return n.getElementAtPath}}),Object.defineProperty(e,"getExpectedElementAtPath",{enumerable:!0,get:function(){return n.getExpectedElementAtPath}}),Object.defineProperty(e,"setElementAtPath",{enumerable:!0,get:function(){return r.setElementAtPath}});var t=ik,n=y_,r=ok,a=nd})(g_);Object.defineProperty(td,"__esModule",{value:!0});td.findRelevantElementPaths=hB;var JA=g_;function GS(e){"@babel/helpers - typeof";return GS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GS(e)}function hB(e){var t=(0,JA.findElementPaths)(e);return t.filter(function(n){var r=(0,JA.getExpectedElementAtPath)(e,n),a=r.type;if(GS(a)==="symbol")return!1;if(typeof a=="string")return fB(a);var c=a;return c.cosmosCapture!==!1&&dB(c)})}function fB(e){return e!=="div"&&e!=="span"}function dB(e){return e.name!=="StyledComponent"}var ak={},sk={};Object.defineProperty(sk,"__esModule",{value:!0});sk.isRefSupported=yB;var pB=gB(pt),mB=am;function gB(e){return e&&e.__esModule?e:{default:e}}function yB(e){if(typeof e=="string")return!1;var t=e,n=t.$$typeof,r=t.prototype;return n===mB.ForwardRef||r&&(r instanceof pB.default.Component||r.getInitialState!==void 0)&&!0}Object.defineProperty(ak,"__esModule",{value:!0});ak.decorateFixtureRefs=SB;var _B=wB(pt),vB=g_,xB=td,bB=sk;function wB(e){return e&&e.__esModule?e:{default:e}}function SB(e,t,n){var r=(0,xB.findRelevantElementPaths)(e);return r.reduce(function(a,c){return(0,vB.setElementAtPath)(a,c,function(d){return(0,bB.isRefSupported)(d.type)?_B.default.cloneElement(d,{ref:CB(d.ref,t,c,n)}):d})},e)}function CB(e,t,n,r){var a=r[n];if(a&&a.origRef===e)return a.handler;var c=EB(e,t,n);return r[n]={origRef:e,handler:c},c}function EB(e,t,n){return function(r){e&&kB(e,r),t(n,r)}}function kB(e,t){if(typeof e=="string"){console.warn("[decorateFixtureRefs] String refs are not supported");return}if(typeof e=="function"){e(t);return}var n=e;n.current=t}var lk={};Object.defineProperty(lk,"__esModule",{value:!0});lk.replaceState=TB;var AB=fa;function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function eT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(r){cM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TB(e,t){var n=PB(e.state,t);(0,AB.isEqual)(n,e.state)||e.setState(n)}function PB(e,t){return Object.keys(e).reduce(function(n,r){return Object.keys(n).indexOf(r)===-1?eT(eT({},n),{},cM({},r,void 0)):n},t)}Object.defineProperty(GE,"__esModule",{value:!0});GE.useFixtureState=RB;var tT=fa,Gu=OB(pt),ul=xl,nT=wl,IB=da,MB=td,LB=ak,i2=lk;function OB(e){return e&&e.__esModule?e:{default:e}}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(r){FB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RB(e,t,n){var r=(0,MB.findRelevantElementPaths)(e),a=Gu.default.useContext(IB.FixtureContext),c=a.fixtureState,d=a.setFixtureState,l=DB(c),x=Gu.default.useRef(c),b=Gu.default.useRef({}),E=Gu.default.useRef({});return Gu.default.useEffect(function(){return function(){b.current={},E.current={}}},[]),Gu.default.useEffect(function(){var L=(0,ul.getFixtureStateClassState)(c,t);L.forEach(function(F){var $=F.elementId,N=$.elPath;r.indexOf($.elPath)===-1&&(d(function(Z){return rp(rp({},Z),{},{classState:(0,ul.removeFixtureStateClassState)(c,$)})}),n.current[N]&&(delete n.current[N],delete b.current[N],delete E.current[N]))}),r.forEach(function(F){var $={decoratorId:t,elPath:F},N=(0,ul.findFixtureStateClassState)(c,$);if(N){var q=n.current[F];if(!q)return;var G=(0,ul.findFixtureStateClassState)(x.current,$);if(G&&!(0,tT.isEqual)(G,N))return(0,i2.replaceState)(q,(0,ul.extendWithValues)(q.state,N.values))}else if(b.current[F]){var Z=b.current[F].state,R=n.current[F];(0,tT.isEqual)(R.state,Z)||(0,i2.replaceState)(R,Z),d(function(ee){return rp(rp({},ee),{},{classState:(0,ul.createFixtureStateClassState)({fixtureState:ee,elementId:$,values:(0,ul.createValues)(Z),componentName:(0,nT.getComponentName)(R.constructor)})})})}})},[t,r,n,c,c.classState,d]),Gu.default.useEffect(function(){x.current=c}),(0,LB.decorateFixtureRefs)(e,A,E.current);function A(L,F){if(!F){delete n.current[L];return}var $=F.state;if($){n.current[L]=F,zB(b.current,L,F);var N={decoratorId:t,elPath:L},Z=(0,ul.findFixtureStateClassState)(l.current,N);Z?(0,i2.replaceState)(F,(0,ul.extendWithValues)($,Z.values)):d(function(R){return rp(rp({},R),{},{classState:(0,ul.createFixtureStateClassState)({fixtureState:R,elementId:N,values:(0,ul.createValues)($),componentName:(0,nT.getComponentName)(F.constructor)})})})}}}function DB(e){var t=Gu.default.useRef(e);return Gu.default.useEffect(function(){t.current=e}),t}function zB(e,t,n){var r=e[t],a=n.constructor,c=r&&r.type===a;!c&&n.state&&(e[t]={type:a,state:n.state})}var uk={};Object.defineProperty(uk,"__esModule",{value:!0});uk.useReadClassState=GB;var BB=fa,o2=UB(pt),Xv=xl,$B=da,NB=td;function UB(e){return e&&e.__esModule?e:{default:e}}function iT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iT(Object(n),!0).forEach(function(r){jB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aT(e,t,n,r,a,c,d){try{var l=e[c](d),x=l.value}catch(b){n(b);return}l.done?t(x):Promise.resolve(x).then(r,a)}function VB(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var c=e.apply(t,n);function d(x){aT(c,r,a,d,l,"next",x)}function l(x){aT(c,r,a,d,l,"throw",x)}d(void 0)})}}var qB=200;function GB(e,t,n){var r=(0,NB.findRelevantElementPaths)(e),a=o2.default.useContext($B.FixtureContext),c=a.fixtureState,d=a.setFixtureState,l=o2.default.useRef(null);o2.default.useEffect(function(){return x(),function(){l.current&&clearTimeout(l.current)}});function x(){l.current=window.setTimeout(b,qB)}function b(){var E=!1;Object.keys(n.current).map(function(){var A=VB(regeneratorRuntime.mark(function L(F){var $,N,Z;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(r.indexOf(F)!==-1){q.next=2;break}throw new Error('[FixtureCapture] Child ref exists for missing element path "'.concat(F,'"'));case 2:$=n.current[F].state,N={decoratorId:t,elPath:F},Z=(0,Xv.findFixtureStateClassState)(c,N),Z&&$&&!HB(Z,$)&&(E=!0,d(function(G){return oT(oT({},G),{},{classState:(0,Xv.updateFixtureStateClassState)({fixtureState:G,elementId:N,values:(0,Xv.createValues)($)})})}));case 6:case"end":return q.stop()}},L)}));return function(L){return A.apply(this,arguments)}}()),E||x()}}function HB(e,t){return(0,BB.isEqual)(t,(0,Xv.extendWithValues)(t,e.values))}Object.defineProperty(qE,"__esModule",{value:!0});qE.useClassStateCapture=XB;var sT=KB(pt),WB=GE,ZB=uk;function KB(e){return e&&e.__esModule?e:{default:e}}function XB(e,t){var n=sT.default.useRef({});return sT.default.useEffect(function(){return function(){n.current={}}},[]),(0,ZB.useReadClassState)(e,t,n),(0,WB.useFixtureState)(e,t,n)}var ck={},hk={};Object.defineProperty(hk,"__esModule",{value:!0});hk.useFixtureProps=n7;var lT=fa,YB=e7(pt),a2=xl,JB=wl,QB=td,hM=g_;function e7(e){return e&&e.__esModule?e:{default:e}}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(r){t7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n7(e,t,n){var r=YB.default.useMemo(function(){return{}},[n]),a=(0,QB.findRelevantElementPaths)(e);return a.reduce(function(c,d){var l={decoratorId:n,elPath:d},x=(0,a2.findFixtureStateProps)(t,l);return(0,hM.setElementAtPath)(c,d,function(b){if(!x||F(x.componentName))return ip(ip({},b),{},{key:cT(d,a2.DEFAULT_RENDER_KEY)});var E=b.props,A=(0,a2.extendWithValues)(E,x.values),L=(0,lT.mapValues)(A,function($,N){var Z=r7(d,N);return r.hasOwnProperty(Z)||(r[Z]=E[N]),(0,lT.isEqual)(r[Z],$)?r[Z]:(r[Z]=$,$)});return ip(ip({},b),{},{props:i7(a,d)?ip(ip({},L),{},{children:E.children}):L,key:cT(d,x.renderKey)});function F($){return $!==(0,JB.getComponentName)(b.type)}})},e)}function r7(e,t){return e?"".concat(e,"-").concat(t):t}function cT(e,t){return"".concat(e,"-").concat(t)}function i7(e,t){return e.some(function(n){return n.indexOf((0,hM.getChildrenPath)(t))===0})}Object.defineProperty(ck,"__esModule",{value:!0});ck.usePropsCapture=c7;var cv=l7(pt),Tf=xl,hT=wl,o7=da,a7=td,fT=g_,s7=hk;function l7(e){return e&&e.__esModule?e:{default:e}}function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(r){u7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c7(e,t){var n=cv.default.useContext(o7.FixtureContext),r=n.fixtureState,a=n.setFixtureState,c=cv.default.useRef(e),d=(0,a7.findRelevantElementPaths)(e);return cv.default.useEffect(function(){if(!r.props&&d.length===0){a(function(x){return oh(oh({},x),{},{props:x.props||[]})});return}var l=(0,Tf.getFixtureStateProps)(r,t);l.forEach(function(x){var b=x.elementId;d.indexOf(b.elPath)===-1&&a(function(E){return oh(oh({},E),{},{props:(0,Tf.removeFixtureStateProps)(r,b)})})}),d.forEach(function(x){var b=(0,fT.getExpectedElementAtPath)(e,x),E={decoratorId:t,elPath:x};if((0,Tf.findFixtureStateProps)(r,E)){var L=(0,fT.getElementAtPath)(c.current,x);(0,hT.areNodesEqual)(L,b,!1)||a(function(F){return oh(oh({},F),{},{props:(0,Tf.updateFixtureStateProps)({fixtureState:r,elementId:E,values:(0,Tf.createValues)(b.props)})})})}else{var A=(0,hT.getComponentName)(b.type);a(function(F){return oh(oh({},F),{},{props:(0,Tf.createFixtureStateProps)({fixtureState:F,elementId:E,values:(0,Tf.createValues)(b.props),componentName:A})})})}})},[e,t,d,r,r.props,a]),cv.default.useEffect(function(){c.current=e}),(0,s7.useFixtureProps)(e,r,t)}Object.defineProperty(gx,"__esModule",{value:!0});gx.FixtureCapture=p7;var pT=d7(pt),h7=qE,f7=ck;function d7(e){return e&&e.__esModule?e:{default:e}}function p7(e){var t=e.children,n=e.decoratorId,r=(0,f7.usePropsCapture)(t,n);return r=(0,h7.useClassStateCapture)(r,n),pT.default.createElement(pT.default.Fragment,null,r)}var Tx={},fk={};Object.defineProperty(fk,"__esModule",{value:!0});fk.getFixture=m7;var mT=wl;function m7(e,t){if(t===void 0)return(0,mT.isMultiFixture)(e)?void 0:e;if((0,mT.isMultiFixture)(e)){var n=e;return n[t]}}var dk={},Px={},pk={};Object.defineProperty(pk,"__esModule",{value:!0});pk.FixtureElement=fM;var g7=y7(pt);function y7(e){return e&&e.__esModule?e:{default:e}}function fM(e){var t=e.Component;return g7.default.createElement(t,null)}fM.cosmosCapture=!1;Object.defineProperty(Px,"__esModule",{value:!0});Px.getDecoratedFixtureElement=k7;var HS=x7(pt),_7=gx,v7=pk;function x7(e){return e&&e.__esModule?e:{default:e}}function b7(e){return E7(e)||C7(e)||S7(e)||w7()}function w7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S7(e,t){if(e){if(typeof e=="string")return WS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(e,t)}}function C7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E7(e){if(Array.isArray(e))return WS(e)}function WS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k7(e,t,n){var r=HS.default.createElement(_7.FixtureCapture,{decoratorId:"root"},A7(e));return b7(t).reverse().reduce(function(a,c){return HS.default.createElement(c,n,a)},r)}function A7(e){return T7(e)?HS.default.createElement(v7.FixtureElement,{Component:e}):e}function T7(e){return typeof e=="function"}Object.defineProperty(dk,"__esModule",{value:!0});dk.FixtureProvider=z7;var Bg=L7(pt),P7=wl,I7=da,M7=Px;function L7(e){return e&&e.__esModule?e:{default:e}}function gT(e){return D7(e)||R7(e)||F7(e)||O7()}function O7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F7(e,t){if(e){if(typeof e=="string")return ZS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZS(e,t)}}function R7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D7(e){if(Array.isArray(e))return ZS(e)}function ZS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z7(e){var t=e.fixtureId,n=e.fixture,r=e.systemDecorators,a=e.userDecorators,c=e.fixtureState,d=e.setFixtureState,l=e.onErrorReset,x=Bg.default.useMemo(function(){return{fixtureState:c,setFixtureState:d}},[c,d]),b=Bg.default.useMemo(function(){return{fixtureState:c,setFixtureState:d,onErrorReset:l}},[c,l,d]),E=Bg.default.useMemo(function(){return B7(t,r,a)},[t,r,a]),A=Bg.default.useMemo(function(){return(0,M7.getDecoratedFixtureElement)(n,E,b)},[b,E,n]);return Bg.default.createElement(I7.FixtureContext.Provider,{value:x},A)}function B7(e,t,n){return[].concat(gT(t),gT((0,P7.getSortedDecoratorsForFixturePath)(e.path,n)))}function L1(e){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L1(e)}Object.defineProperty(Tx,"__esModule",{value:!0});Tx.FixtureLoader=void 0;var $g=fa,yT=j7(pt),$7=wl,N7=fk,U7=dk;function dM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(dM=function(a){return a?n:t})(e)}function j7(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||L1(e)!=="object"&&typeof e!="function")return{default:e};var n=dM(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=a?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(r,c,d):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(r){mp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q7(e,t,n){return t&&vT(e.prototype,t),n&&vT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}function KS(e,t){return KS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},KS(e,t)}function H7(e){var t=Z7();return function(){var r=O1(e),a;if(t){var c=O1(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return W7(this,a)}}function W7(e,t){if(t&&(L1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pp(e)}function pp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},O1(e)}function mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K7(e){return e?{fixtureId:e,fixtureState:{},syncedFixtureState:{}}:null}var X7=function(e){G7(n,e);var t=H7(n);function n(){var r;V7(this,n);for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=t.call.apply(t,[this].concat(c)),mp(pp(r),"state",{selectedFixture:K7(r.props.selectedFixtureId||r.props.initialFixtureId),renderKey:0}),mp(pp(r),"unsubscribe",null),mp(pp(r),"handleRequest",function(l){if(l.type==="pingRenderers")return r.postReadyState();if(!(!l.payload||l.payload.rendererId!==r.props.rendererId))switch(Y7(l)&&r.fireChangeCallback(),l.type){case"selectFixture":return r.handleSelectFixtureRequest(l);case"unselectFixture":return r.handleUnselectFixtureRequest();case"setFixtureState":return r.handleSetFixtureStateRequest(l)}}),mp(pp(r),"postFixtureStateChange",function(l,x){var b=r.props.rendererId;r.postMessage({type:"fixtureStateChange",payload:{rendererId:b,fixtureId:l,fixtureState:x}})}),mp(pp(r),"setFixtureState",function(l){if(!r.state.selectedFixture){console.warn("[FixtureLoader] Trying to set fixture state with no fixture selected");return}r.setState(function(x){var b=x.selectedFixture;return b?{selectedFixture:hv(hv({},b),{},{fixtureState:l(b.fixtureState)})}:null})}),r}return q7(n,[{key:"componentDidMount",value:function(){if(!this.props.selectedFixtureId){var a=this.props.rendererConnect;this.unsubscribe=a.onMessage(this.handleRequest),this.postReadyState()}}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"componentDidUpdate",value:function(a){var c=this.props.fixtures;(0,$g.isEqual)(c,a.fixtures)||this.postFixtureListUpdate();var d=this.state.selectedFixture;if(d){var l=d.fixtureId,x=d.fixtureState,b=d.syncedFixtureState;l&&!(0,$g.isEqual)(x,b)&&(this.postFixtureStateChange(l,x),this.updateSyncedFixtureState(x))}}},{key:"shouldComponentUpdate",value:function(a,c){return!(0,$g.isEqual)(this.props,a)||!(0,$g.isEqual)(this.state,c)}},{key:"render",value:function(){var a=this.state.selectedFixture;if(!a)return this.renderMessage("No fixture selected.");var c=this.props.fixtures,d=a.fixtureId,l=a.fixtureState;if(!c.hasOwnProperty(d.path))return this.renderMessage("Fixture path not found: ".concat(d.path));var x=c[d.path].module.default,b=(0,N7.getFixture)(x,d.name);if(typeof b>"u")return this.renderMessage("Invalid fixture ID: ".concat(JSON.stringify(d)));var E=this.props,A=E.systemDecorators,L=E.userDecorators,F=E.onErrorReset,$=this.state.renderKey;return yT.default.createElement(U7.FixtureProvider,{key:$,fixtureId:d,fixture:b,systemDecorators:A,userDecorators:L,fixtureState:l,setFixtureState:this.setFixtureState,onErrorReset:F||J7})}},{key:"handleSelectFixtureRequest",value:function(a){var c=a.payload,d=c.fixtureId,l=c.fixtureState;this.setState({selectedFixture:{fixtureId:d,fixtureState:l,syncedFixtureState:l},renderKey:this.state.renderKey+1})}},{key:"handleUnselectFixtureRequest",value:function(){this.setState({selectedFixture:null,renderKey:0})}},{key:"handleSetFixtureStateRequest",value:function(a){var c=a.payload,d=c.fixtureId,l=c.fixtureState,x=this.state.selectedFixture;x&&(0,$g.isEqual)(d,x.fixtureId)&&this.setState({selectedFixture:{fixtureId:d,fixtureState:l,syncedFixtureState:l}})}},{key:"postReadyState",value:function(){var a=this.props,c=a.rendererId,d=a.initialFixtureId,l=this.getFixtureList();this.postMessage({type:"rendererReady",payload:d?{rendererId:c,fixtures:l,initialFixtureId:d}:{rendererId:c,fixtures:l}})}},{key:"postFixtureListUpdate",value:function(){var a=this.props.rendererId;this.postMessage({type:"fixtureListUpdate",payload:{rendererId:a,fixtures:this.getFixtureList()}})}},{key:"getFixtureList",value:function(){return(0,$7.getFixtureListFromWrappers)(this.props.fixtures)}},{key:"fireChangeCallback",value:function(){var a=this.props.onErrorReset;typeof a=="function"&&a()}},{key:"updateSyncedFixtureState",value:function(a){this.setState(function(c){var d=c.selectedFixture;return d?{selectedFixture:hv(hv({},d),{},{syncedFixtureState:a})}:null})}},{key:"postMessage",value:function(a){this.props.rendererConnect.postMessage(a)}},{key:"renderMessage",value:function(a){return typeof this.props.renderMessage<"u"?this.props.renderMessage({msg:a}):a}}]),n}(yT.Component);Tx.FixtureLoader=X7;function Y7(e){return e.type==="selectFixture"||e.type==="unselectFixture"}function J7(){}var mk={},gk={};Object.defineProperty(gk,"__esModule",{value:!0});gk.registerShortcuts=Q7;function Q7(e){window.addEventListener("keydown",n);function t(r,a){r.preventDefault(),e(a)}function n(r){if(!e$()){var a=String.fromCharCode(r.keyCode),c=r.metaKey||r.ctrlKey;a==="P"&&c?t(r,"searchFixtures"):a==="L"&&c&&r.shiftKey?t(r,"toggleFixtureList"):a==="K"&&c&&r.shiftKey?t(r,"toggleControlPanel"):a==="F"&&c&&r.shiftKey?t(r,"goFullScreen"):a==="E"&&c&&r.shiftKey&&t(r,"editFixture")}}return function(){window.removeEventListener("keydown",n)}}function e$(){var e=document.activeElement;return e&&t$(e.tagName)}function t$(e){var t=["input","textarea","select"];return t.includes(e.toLowerCase())}Object.defineProperty(mk,"__esModule",{value:!0});mk.createPostMessageConnect=r$;var n$=gk;function r$(){function e(t){parent.postMessage(t,"*")}return{postMessage:e,onMessage:function(n){function r(c){n(c.data)}window.addEventListener("message",r,!1);var a=(0,n$.registerShortcuts)(function(c){e({type:"playgroundCommand",payload:{command:c}})});return function(){window.removeEventListener("message",r),a()}}}}var yk={},_k={},Ix={};Object.defineProperty(Ix,"__esModule",{value:!0});Ix.getDefaultSelectValue=i$;function i$(e){var t=e.options,n=e.defaultValue;return typeof n=="string"?n:t[0]}function XS(e){"@babel/helpers - typeof";return XS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XS(e)}Object.defineProperty(_k,"__esModule",{value:!0});_k.useCreateFixtureState=u$;var xT=l$(pt),o$=xl,a$=da,s$=Ix;function pM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(pM=function(a){return a?n:t})(e)}function l$(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||XS(e)!=="object"&&typeof e!="function")return{default:e};var n=pM(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=a?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(r,c,d):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(n),!0).forEach(function(r){mM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u$(e,t){var n=xT.default.useContext(a$.FixtureContext),r=n.setFixtureState,a=(0,s$.getDefaultSelectValue)(t);(0,xT.useEffect)(function(){r(function(c){var d=(0,o$.findFixtureStateControl)(c,e);return d&&d.type==="select"&&d.defaultValue===a?c:fv(fv({},c),{},{controls:fv(fv({},c.controls),{},mM({},e,{type:"select",options:t.options,defaultValue:a,currentValue:a}))})})},[t.options,a,e,r])}var vk={};Object.defineProperty(vk,"__esModule",{value:!0});vk.useCurrentValue=p$;var c$=pt,h$=xl,f$=da,d$=Ix;function p$(e,t){var n=(0,c$.useContext)(f$.FixtureContext),r=n.fixtureState,a=(0,h$.findFixtureStateControl)(r,e);return a&&a.type==="select"?a.currentValue:(0,d$.getDefaultSelectValue)(t)}var xk={};Object.defineProperty(xk,"__esModule",{value:!0});xk.useSetValue=y$;var wT=pt,m$=xl,g$=da;function ST(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ST(Object(n),!0).forEach(function(r){gM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ST(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y$(e){var t=(0,wT.useContext)(g$.FixtureContext),n=t.setFixtureState;return(0,wT.useCallback)(function(r){n(function(a){var c=(0,m$.findFixtureStateControl)(a,e);return!c||c.type!=="select"?(console.warn("Invalid fixture state for select: ".concat(e)),a):op(op({},a),{},{controls:op(op({},a.controls),{},gM({},e,op(op({},c),{},{currentValue:r})))})})},[e,n])}Object.defineProperty(yk,"__esModule",{value:!0});yk.useSelect=b$;var _$=_k,v$=vk,x$=xk;function b$(e,t){if(!t||!t.options||!t.options.length)throw new Error("No options provided to useSelect");(0,_$.useCreateFixtureState)(e,t);var n=(0,v$.useCurrentValue)(e,t),r=(0,x$.useSetValue)(e);return[n,r]}var bk={},wk={};Object.defineProperty(wk,"__esModule",{value:!0});wk.useCreateFixtureState=E$;var w$=fa,CT=C$(pt),Yv=xl,S$=da;function C$(e){return e&&e.__esModule?e:{default:e}}function ET(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ET(Object(n),!0).forEach(function(r){yM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E$(e,t){var n=CT.default.useContext(S$.FixtureContext),r=n.setFixtureState;CT.default.useEffect(function(){r(function(a){var c=(0,Yv.findFixtureStateControl)(a,e);return c&&c.type==="standard"&&k$(c.defaultValue,t)?a:dv(dv({},a),{},{controls:dv(dv({},a.controls),{},yM({},e,{type:"standard",defaultValue:(0,Yv.createValue)(t),currentValue:(0,Yv.createValue)(t)}))})})},[r,e,t])}function k$(e,t){return(0,w$.isEqual)(t,(0,Yv.extendWithValue)(t,e))}var Sk={};Object.defineProperty(Sk,"__esModule",{value:!0});Sk.useCurrentValue=I$;var A$=P$(pt),kT=xl,T$=da;function P$(e){return e&&e.__esModule?e:{default:e}}function I$(e,t){var n=A$.default.useContext(T$.FixtureContext),r=n.fixtureState,a=(0,kT.findFixtureStateControl)(r,e);return a&&a.type==="standard"?(0,kT.extendWithValue)(t,a.currentValue):t}var Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});Ck.useSetValue=O$;var AT=L$(pt),F1=xl,M$=da;function L$(e){return e&&e.__esModule?e:{default:e}}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(r){_M(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O$(e,t){var n=AT.default.useContext(M$.FixtureContext),r=n.setFixtureState;return AT.default.useCallback(function(a){r(function(c){var d=typeof a=="function"?a(F$(c,e,t)):a;return pv(pv({},c),{},{controls:pv(pv({},c.controls),{},_M({},e,{type:"standard",defaultValue:(0,F1.createValue)(t),currentValue:(0,F1.createValue)(d)}))})})},[r,t,e])}function F$(e,t,n){var r=(0,F1.findFixtureStateControl)(e,t);return r&&r.type==="standard"?(0,F1.extendWithValue)(n,r.currentValue):n}Object.defineProperty(bk,"__esModule",{value:!0});bk.useValue=B$;var R$=wk,D$=Sk,z$=Ck;function B$(e,t){var n=t.defaultValue;(0,R$.useCreateFixtureState)(e,n);var r=(0,D$.useCurrentValue)(e,n),a=(0,z$.useSetValue)(e,n);return[r,a]}var Mx={};Object.defineProperty(Mx,"__esModule",{value:!0});Mx.Viewport=void 0;var mv=N$(pt),$$=da;function N$(e){return e&&e.__esModule?e:{default:e}}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){U$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vM=function(t){var n=t.children,r=t.width,a=t.height,c=mv.default.useContext($$.FixtureContext),d=c.setFixtureState;return mv.default.useEffect(function(){d(function(l){return IT(IT({},l),{},{viewport:{width:r,height:a}})})},[d,r,a]),mv.default.createElement(mv.default.Fragment,null,n)};Mx.Viewport=vM;vM.cosmosCapture=!1;var Ek={},YS={exports:{}},j$=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],xM=function(t){var n=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));for(var c=j$.exec(t||""),d={},l=14;l--;)d[V$[l]]=c[l]||"";return r!=-1&&a!=-1&&(d.source=n,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d},JS={exports:{}},QS={exports:{}},$y=1e3,Ny=$y*60,Uy=Ny*60,jy=Uy*24,q$=jy*365.25,G$=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return H$(e);if(n==="number"&&isNaN(e)===!1)return t.long?Z$(e):W$(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function H$(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*q$;case"days":case"day":case"d":return n*jy;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Uy;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ny;case"seconds":case"second":case"secs":case"sec":case"s":return n*$y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function W$(e){return e>=jy?Math.round(e/jy)+"d":e>=Uy?Math.round(e/Uy)+"h":e>=Ny?Math.round(e/Ny)+"m":e>=$y?Math.round(e/$y)+"s":e+"ms"}function Z$(e){return gv(e,jy,"day")||gv(e,Uy,"hour")||gv(e,Ny,"minute")||gv(e,$y,"second")||e+" ms"}function gv(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=x,t.disable=d,t.enable=c,t.enabled=l,t.humanize=G$,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(b){var E=0,A;for(A in b)E=(E<<5)-E+b.charCodeAt(A),E|=0;return t.colors[Math.abs(E)%t.colors.length]}function r(b){var E;function A(){if(A.enabled){var L=A,F=+new Date,$=F-(E||F);L.diff=$,L.prev=E,L.curr=F,E=F;for(var N=new Array(arguments.length),Z=0;Z<N.length;Z++)N[Z]=arguments[Z];N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");var R=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(G,ee){if(G==="%%")return G;R++;var ae=t.formatters[ee];if(typeof ae=="function"){var K=N[R];G=ae.call(L,K),N.splice(R,1),R--}return G}),t.formatArgs.call(L,N);var q=A.log||t.log||console.log.bind(console);q.apply(L,N)}}return A.namespace=b,A.enabled=t.enabled(b),A.useColors=t.useColors(),A.color=n(b),A.destroy=a,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function a(){var b=t.instances.indexOf(this);return b!==-1?(t.instances.splice(b,1),!0):!1}function c(b){t.save(b),t.names=[],t.skips=[];var E,A=(typeof b=="string"?b:"").split(/[\s,]+/),L=A.length;for(E=0;E<L;E++)A[E]&&(b=A[E].replace(/\*/g,".*?"),b[0]==="-"?t.skips.push(new RegExp("^"+b.substr(1)+"$")):t.names.push(new RegExp("^"+b+"$")));for(E=0;E<t.instances.length;E++){var F=t.instances[E];F.enabled=t.enabled(F.namespace)}}function d(){t.enable("")}function l(b){if(b[b.length-1]==="*")return!0;var E,A;for(E=0,A=t.skips.length;E<A;E++)if(t.skips[E].test(b))return!1;for(E=0,A=t.names.length;E<A;E++)if(t.names[E].test(b))return!0;return!1}function x(b){return b instanceof Error?b.stack||b.message:b}})(QS,QS.exports);var K$=QS.exports;(function(e,t){t=e.exports=K$,t.log=a,t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(x){try{return JSON.stringify(x)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}};function r(x){var b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" ")+"+"+t.humanize(this.diff),!!b){var E="color: "+this.color;x.splice(1,0,E,"color: inherit");var A=0,L=0;x[0].replace(/%[a-zA-Z%]/g,function(F){F!=="%%"&&(A++,F==="%c"&&(L=A))}),x.splice(L,0,E)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(x){try{x==null?t.storage.removeItem("debug"):t.storage.debug=x}catch{}}function d(){var x;try{x=t.storage.debug}catch{}return!x&&typeof process<"u"&&"env"in process&&(x={}.DEBUG),x}t.enable(d());function l(){try{return window.localStorage}catch{}}})(JS,JS.exports);var Lx=JS.exports,X$=xM,MT=Lx("socket.io-client:url"),Y$=J$;function J$(e,t){var n=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(MT("protocol-less url %s",e),typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),MT("parse %s",e),n=X$(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=n.host.indexOf(":")!==-1,a=r?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}var Ox={},eC={exports:{}},tC={exports:{}},Vy=1e3,qy=Vy*60,Gy=qy*60,Hy=Gy*24,Q$=Hy*365.25,eN=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return tN(e);if(n==="number"&&isNaN(e)===!1)return t.long?rN(e):nN(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function tN(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Q$;case"days":case"day":case"d":return n*Hy;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Gy;case"minutes":case"minute":case"mins":case"min":case"m":return n*qy;case"seconds":case"second":case"secs":case"sec":case"s":return n*Vy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function nN(e){return e>=Hy?Math.round(e/Hy)+"d":e>=Gy?Math.round(e/Gy)+"h":e>=qy?Math.round(e/qy)+"m":e>=Vy?Math.round(e/Vy)+"s":e+"ms"}function rN(e){return yv(e,Hy,"day")||yv(e,Gy,"hour")||yv(e,qy,"minute")||yv(e,Vy,"second")||e+" ms"}function yv(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=x,t.disable=d,t.enable=c,t.enabled=l,t.humanize=eN,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(b){var E=0,A;for(A in b)E=(E<<5)-E+b.charCodeAt(A),E|=0;return t.colors[Math.abs(E)%t.colors.length]}function r(b){var E;function A(){if(A.enabled){var L=A,F=+new Date,$=F-(E||F);L.diff=$,L.prev=E,L.curr=F,E=F;for(var N=new Array(arguments.length),Z=0;Z<N.length;Z++)N[Z]=arguments[Z];N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");var R=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(G,ee){if(G==="%%")return G;R++;var ae=t.formatters[ee];if(typeof ae=="function"){var K=N[R];G=ae.call(L,K),N.splice(R,1),R--}return G}),t.formatArgs.call(L,N);var q=A.log||t.log||console.log.bind(console);q.apply(L,N)}}return A.namespace=b,A.enabled=t.enabled(b),A.useColors=t.useColors(),A.color=n(b),A.destroy=a,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function a(){var b=t.instances.indexOf(this);return b!==-1?(t.instances.splice(b,1),!0):!1}function c(b){t.save(b),t.names=[],t.skips=[];var E,A=(typeof b=="string"?b:"").split(/[\s,]+/),L=A.length;for(E=0;E<L;E++)A[E]&&(b=A[E].replace(/\*/g,".*?"),b[0]==="-"?t.skips.push(new RegExp("^"+b.substr(1)+"$")):t.names.push(new RegExp("^"+b+"$")));for(E=0;E<t.instances.length;E++){var F=t.instances[E];F.enabled=t.enabled(F.namespace)}}function d(){t.enable("")}function l(b){if(b[b.length-1]==="*")return!0;var E,A;for(E=0,A=t.skips.length;E<A;E++)if(t.skips[E].test(b))return!1;for(E=0,A=t.names.length;E<A;E++)if(t.names[E].test(b))return!0;return!1}function x(b){return b instanceof Error?b.stack||b.message:b}})(tC,tC.exports);var iN=tC.exports;(function(e,t){t=e.exports=iN,t.log=a,t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(x){try{return JSON.stringify(x)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}};function r(x){var b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" ")+"+"+t.humanize(this.diff),!!b){var E="color: "+this.color;x.splice(1,0,E,"color: inherit");var A=0,L=0;x[0].replace(/%[a-zA-Z%]/g,function(F){F!=="%%"&&(A++,F==="%c"&&(L=A))}),x.splice(L,0,E)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(x){try{x==null?t.storage.removeItem("debug"):t.storage.debug=x}catch{}}function d(){var x;try{x=t.storage.debug}catch{}return!x&&typeof process<"u"&&"env"in process&&(x={}.DEBUG),x}t.enable(d());function l(){try{return window.localStorage}catch{}}})(eC,eC.exports);var oN=eC.exports,bM={exports:{}};(function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var a in t.prototype)r[a]=t.prototype[a];return r}t.prototype.on=t.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},t.prototype.once=function(r,a){function c(){this.off(r,c),a.apply(this,arguments)}return c.fn=a,this.on(r,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+r];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var d,l=0;l<c.length;l++)if(d=c[l],d===a||d.fn===a){c.splice(l,1);break}return c.length===0&&delete this._callbacks["$"+r],this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),c=this._callbacks["$"+r],d=1;d<arguments.length;d++)a[d-1]=arguments[d];if(c){c=c.slice(0);for(var d=0,l=c.length;d<l;++d)c[d].apply(this,a)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(bM);var aN=bM.exports,Fx={},sN={}.toString,kk=Array.isArray||function(e){return sN.call(e)=="[object Array]"},wM=hN,lN=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",uN=typeof ArrayBuffer=="function",cN=function(e){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function hN(e){return lN&&Buffer.isBuffer(e)||uN&&(e instanceof ArrayBuffer||cN(e))}var Ak=kk,SM=wM,CM=Object.prototype.toString,fN=typeof Blob=="function"||typeof Blob<"u"&&CM.call(Blob)==="[object BlobConstructor]",dN=typeof File=="function"||typeof File<"u"&&CM.call(File)==="[object FileConstructor]";Fx.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=nC(n,t),r.attachments=t.length,{packet:r,buffers:t}};function nC(e,t){if(!e)return e;if(SM(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Ak(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=nC(e[a],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){var r={};for(var c in e)r[c]=nC(e[c],t);return r}return e}Fx.reconstructPacket=function(e,t){return e.data=rC(e.data,t),e.attachments=void 0,e};function rC(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Ak(e))for(var n=0;n<e.length;n++)e[n]=rC(e[n],t);else if(typeof e=="object")for(var r in e)e[r]=rC(e[r],t);return e}Fx.removeBlobs=function(e,t){function n(c,d,l){if(!c)return c;if(fN&&c instanceof Blob||dN&&c instanceof File){r++;var x=new FileReader;x.onload=function(){l?l[d]=this.result:a=this.result,--r||t(a)},x.readAsArrayBuffer(c)}else if(Ak(c))for(var b=0;b<c.length;b++)n(c[b],b,c);else if(typeof c=="object"&&!SM(c))for(var E in c)n(c[E],E,c)}var r=0,a=e;n(a),r||t(a)};(function(e){var t=oN("socket.io-parser"),n=aN,r=Fx,a=kk,c=wM;e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=d,e.Decoder=A;function d(){}var l=e.ERROR+'"encode error"';d.prototype.encode=function(Z,R){if(t("encoding packet %j",Z),e.BINARY_EVENT===Z.type||e.BINARY_ACK===Z.type)E(Z,R);else{var q=x(Z);R([q])}};function x(Z){var R=""+Z.type;if((e.BINARY_EVENT===Z.type||e.BINARY_ACK===Z.type)&&(R+=Z.attachments+"-"),Z.nsp&&Z.nsp!=="/"&&(R+=Z.nsp+","),Z.id!=null&&(R+=Z.id),Z.data!=null){var q=b(Z.data);if(q!==!1)R+=q;else return l}return t("encoded %j as %s",Z,R),R}function b(Z){try{return JSON.stringify(Z)}catch{return!1}}function E(Z,R){function q(G){var ee=r.deconstructPacket(G),ae=x(ee.packet),K=ee.buffers;K.unshift(ae),R(K)}r.removeBlobs(Z,q)}function A(){this.reconstructor=null}n(A.prototype),A.prototype.add=function(Z){var R;if(typeof Z=="string")R=L(Z),e.BINARY_EVENT===R.type||e.BINARY_ACK===R.type?(this.reconstructor=new $(R),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",R)):this.emit("decoded",R);else if(c(Z)||Z.base64)if(this.reconstructor)R=this.reconstructor.takeBinaryData(Z),R&&(this.reconstructor=null,this.emit("decoded",R));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+Z)};function L(Z){var R=0,q={type:Number(Z.charAt(0))};if(e.types[q.type]==null)return N("unknown packet type "+q.type);if(e.BINARY_EVENT===q.type||e.BINARY_ACK===q.type){for(var G=R+1;Z.charAt(++R)!=="-"&&R!=Z.length;);var ee=Z.substring(G,R);if(ee!=Number(ee)||Z.charAt(R)!=="-")throw new Error("Illegal attachments");q.attachments=Number(ee)}if(Z.charAt(R+1)==="/"){for(var G=R+1;++R;){var ae=Z.charAt(R);if(ae===","||R===Z.length)break}q.nsp=Z.substring(G,R)}else q.nsp="/";var K=Z.charAt(R+1);if(K!==""&&Number(K)==K){for(var G=R+1;++R;){var ae=Z.charAt(R);if(ae==null||Number(ae)!=ae){--R;break}if(R===Z.length)break}q.id=Number(Z.substring(G,R+1))}if(Z.charAt(++R)){var le=F(Z.substr(R)),xe=le!==!1&&(q.type===e.ERROR||a(le));if(xe)q.data=le;else return N("invalid payload")}return t("decoded %s as %j",Z,q),q}function F(Z){try{return JSON.parse(Z)}catch{return!1}}A.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function $(Z){this.reconPack=Z,this.buffers=[]}$.prototype.takeBinaryData=function(Z){if(this.buffers.push(Z),this.buffers.length===this.reconPack.attachments){var R=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),R}return null},$.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function N(Z){return{type:e.ERROR,data:"parser error: "+Z}}})(Ox);var Tk={exports:{}},Rx={},iC={exports:{}};try{iC.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{iC.exports=!1}var pN=iC.exports,mN=pN,Pk=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!t||mN))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!n&&r)return new XDomainRequest}catch{}if(!t)try{return new self[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Ik={exports:{}},rd={},gN=Object.keys||function(t){var n=[],r=Object.prototype.hasOwnProperty;for(var a in t)r.call(t,a)&&n.push(a);return n},yN=kk,EM=Object.prototype.toString,_N=typeof Blob=="function"||typeof Blob<"u"&&EM.call(Blob)==="[object BlobConstructor]",vN=typeof File=="function"||typeof File<"u"&&EM.call(File)==="[object FileConstructor]",kM=Jv;function Jv(e){if(!e||typeof e!="object")return!1;if(yN(e)){for(var t=0,n=e.length;t<n;t++)if(Jv(e[t]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||_N&&e instanceof Blob||vN&&e instanceof File)return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Jv(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Jv(e[r]))return!0;return!1}var xN=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||r===0)return new ArrayBuffer(0);for(var a=new Uint8Array(e),c=new Uint8Array(n-t),d=t,l=0;d<n;d++,l++)c[l]=a[d];return c.buffer},bN=wN;function wN(e,t,n){var r=!1;return n=n||SN,a.count=e,e===0?t():a;function a(c,d){if(a.count<=0)throw new Error("after called too many times");--a.count,c?(r=!0,t(c),t=n):a.count===0&&!r&&t(null,d)}}function SN(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var fh=String.fromCharCode;function AM(e){for(var t=[],n=0,r=e.length,a,c;n<r;)a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<r?(c=e.charCodeAt(n++),(c&64512)==56320?t.push(((a&1023)<<10)+(c&1023)+65536):(t.push(a),n--)):t.push(a);return t}function CN(e){for(var t=e.length,n=-1,r,a="";++n<t;)r=e[n],r>65535&&(r-=65536,a+=fh(r>>>10&1023|55296),r=56320|r&1023),a+=fh(r);return a}function TM(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s2(e,t){return fh(e>>t&63|128)}function EN(e,t){if(!(e&4294967168))return fh(e);var n="";return e&4294965248?e&4294901760?e&4292870144||(n=fh(e>>18&7|240),n+=s2(e,12),n+=s2(e,6)):(TM(e,t)||(e=65533),n=fh(e>>12&15|224),n+=s2(e,6)):n=fh(e>>6&31|192),n+=fh(e&63|128),n}function kN(e,t){t=t||{};for(var n=t.strict!==!1,r=AM(e),a=r.length,c=-1,d,l="";++c<a;)d=r[c],l+=EN(d,n);return l}function ap(){if(mh>=D1)throw Error("Invalid byte index");var e=R1[mh]&255;if(mh++,(e&192)==128)return e&63;throw Error("Invalid continuation byte")}function AN(e){var t,n,r,a,c;if(mh>D1)throw Error("Invalid byte index");if(mh==D1)return!1;if(t=R1[mh]&255,mh++,!(t&128))return t;if((t&224)==192){if(n=ap(),c=(t&31)<<6|n,c>=128)return c;throw Error("Invalid continuation byte")}if((t&240)==224){if(n=ap(),r=ap(),c=(t&15)<<12|n<<6|r,c>=2048)return TM(c,e)?c:65533;throw Error("Invalid continuation byte")}if((t&248)==240&&(n=ap(),r=ap(),a=ap(),c=(t&7)<<18|n<<12|r<<6|a,c>=65536&&c<=1114111))return c;throw Error("Invalid UTF-8 detected")}var R1,D1,mh;function TN(e,t){t=t||{};var n=t.strict!==!1;R1=AM(e),D1=R1.length,mh=0;for(var r=[],a;(a=AN(n))!==!1;)r.push(a);return CN(r)}var PN={version:"2.1.2",encode:kN,decode:TN},_v={},LT;function IN(){return LT||(LT=1,function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;_v.encode=function(r){var a=new Uint8Array(r),c,d=a.length,l="";for(c=0;c<d;c+=3)l+=e[a[c]>>2],l+=e[(a[c]&3)<<4|a[c+1]>>4],l+=e[(a[c+1]&15)<<2|a[c+2]>>6],l+=e[a[c+2]&63];return d%3===2?l=l.substring(0,l.length-1)+"=":d%3===1&&(l=l.substring(0,l.length-2)+"=="),l},_v.decode=function(r){var a=r.length*.75,c=r.length,d,l=0,x,b,E,A;r[r.length-1]==="="&&(a--,r[r.length-2]==="="&&a--);var L=new ArrayBuffer(a),F=new Uint8Array(L);for(d=0;d<c;d+=4)x=t[r.charCodeAt(d)],b=t[r.charCodeAt(d+1)],E=t[r.charCodeAt(d+2)],A=t[r.charCodeAt(d+3)],F[l++]=x<<2|b>>4,F[l++]=(b&15)<<4|E>>2,F[l++]=(E&3)<<6|A&63;return L}}()),_v}var l2,OT;function MN(){if(OT)return l2;OT=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var l=new Blob(["hi"]);return l.size===2}catch{return!1}}(),n=t&&function(){try{var l=new Blob([new Uint8Array([1,2])]);return l.size===2}catch{return!1}}(),r=e&&e.prototype.append&&e.prototype.getBlob;function a(l){return l.map(function(x){if(x.buffer instanceof ArrayBuffer){var b=x.buffer;if(x.byteLength!==b.byteLength){var E=new Uint8Array(x.byteLength);E.set(new Uint8Array(b,x.byteOffset,x.byteLength)),b=E.buffer}return b}return x})}function c(l,x){x=x||{};var b=new e;return a(l).forEach(function(E){b.append(E)}),x.type?b.getBlob(x.type):b.getBlob()}function d(l,x){return new Blob(a(l),x||{})}return typeof Blob<"u"&&(c.prototype=Blob.prototype,d.prototype=Blob.prototype),l2=function(){return t?n?Blob:d:r?c:void 0}(),l2}(function(e){var t=gN,n=kM,r=xN,a=bN,c=PN,d;typeof ArrayBuffer<"u"&&(d=IN());var l=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),x=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),b=l||x;e.protocol=3;var E=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},A=t(E),L={type:"error",data:"parser error"},F=MN();e.encodePacket=function(ee,ae,K,le){typeof ae=="function"&&(le=ae,ae=!1),typeof K=="function"&&(le=K,K=null);var xe=ee.data===void 0?void 0:ee.data.buffer||ee.data;if(typeof ArrayBuffer<"u"&&xe instanceof ArrayBuffer)return N(ee,ae,le);if(typeof F<"u"&&xe instanceof F)return R(ee,ae,le);if(xe&&xe.base64)return $(ee,le);var Le=E[ee.type];return ee.data!==void 0&&(Le+=K?c.encode(String(ee.data),{strict:!1}):String(ee.data)),le(""+Le)};function $(ee,ae){var K="b"+e.packets[ee.type]+ee.data.data;return ae(K)}function N(ee,ae,K){if(!ae)return e.encodeBase64Packet(ee,K);var le=ee.data,xe=new Uint8Array(le),Le=new Uint8Array(1+le.byteLength);Le[0]=E[ee.type];for(var Oe=0;Oe<xe.length;Oe++)Le[Oe+1]=xe[Oe];return K(Le.buffer)}function Z(ee,ae,K){if(!ae)return e.encodeBase64Packet(ee,K);var le=new FileReader;return le.onload=function(){e.encodePacket({type:ee.type,data:le.result},ae,!0,K)},le.readAsArrayBuffer(ee.data)}function R(ee,ae,K){if(!ae)return e.encodeBase64Packet(ee,K);if(b)return Z(ee,ae,K);var le=new Uint8Array(1);le[0]=E[ee.type];var xe=new F([le.buffer,ee.data]);return K(xe)}e.encodeBase64Packet=function(ee,ae){var K="b"+e.packets[ee.type];if(typeof F<"u"&&ee.data instanceof F){var le=new FileReader;return le.onload=function(){var Ge=le.result.split(",")[1];ae(K+Ge)},le.readAsDataURL(ee.data)}var xe;try{xe=String.fromCharCode.apply(null,new Uint8Array(ee.data))}catch{for(var Le=new Uint8Array(ee.data),Oe=new Array(Le.length),Fe=0;Fe<Le.length;Fe++)Oe[Fe]=Le[Fe];xe=String.fromCharCode.apply(null,Oe)}return K+=btoa(xe),ae(K)},e.decodePacket=function(ee,ae,K){if(ee===void 0)return L;if(typeof ee=="string"){if(ee.charAt(0)==="b")return e.decodeBase64Packet(ee.substr(1),ae);if(K&&(ee=q(ee),ee===!1))return L;var xe=ee.charAt(0);return Number(xe)!=xe||!A[xe]?L:ee.length>1?{type:A[xe],data:ee.substring(1)}:{type:A[xe]}}var le=new Uint8Array(ee),xe=le[0],Le=r(ee,1);return F&&ae==="blob"&&(Le=new F([Le])),{type:A[xe],data:Le}};function q(ee){try{ee=c.decode(ee,{strict:!1})}catch{return!1}return ee}e.decodeBase64Packet=function(ee,ae){var K=A[ee.charAt(0)];if(!d)return{type:K,data:{base64:!0,data:ee.substr(1)}};var le=d.decode(ee.substr(1));return ae==="blob"&&F&&(le=new F([le])),{type:K,data:le}},e.encodePayload=function(ee,ae,K){typeof ae=="function"&&(K=ae,ae=null);var le=n(ee);if(ae&&le)return F&&!b?e.encodePayloadAsBlob(ee,K):e.encodePayloadAsArrayBuffer(ee,K);if(!ee.length)return K("0:");function xe(Oe){return Oe.length+":"+Oe}function Le(Oe,Fe){e.encodePacket(Oe,le?ae:!1,!1,function(Ge){Fe(null,xe(Ge))})}G(ee,Le,function(Oe,Fe){return K(Fe.join(""))})};function G(ee,ae,K){for(var le=new Array(ee.length),xe=a(ee.length,K),Le=function(Fe,Ge,tt){ae(Ge,function(yt,At){le[Fe]=At,tt(yt,le)})},Oe=0;Oe<ee.length;Oe++)Le(Oe,ee[Oe],xe)}e.decodePayload=function(ee,ae,K){if(typeof ee!="string")return e.decodePayloadAsBinary(ee,ae,K);typeof ae=="function"&&(K=ae,ae=null);var le;if(ee==="")return K(L,0,1);for(var xe="",Le,Oe,Fe=0,Ge=ee.length;Fe<Ge;Fe++){var tt=ee.charAt(Fe);if(tt!==":"){xe+=tt;continue}if(xe===""||xe!=(Le=Number(xe))||(Oe=ee.substr(Fe+1,Le),xe!=Oe.length))return K(L,0,1);if(Oe.length){if(le=e.decodePacket(Oe,ae,!1),L.type===le.type&&L.data===le.data)return K(L,0,1);var yt=K(le,Fe+Le,Ge);if(yt===!1)return}Fe+=Le,xe=""}if(xe!=="")return K(L,0,1)},e.encodePayloadAsArrayBuffer=function(ee,ae){if(!ee.length)return ae(new ArrayBuffer(0));function K(le,xe){e.encodePacket(le,!0,!0,function(Le){return xe(null,Le)})}G(ee,K,function(le,xe){var Le=xe.reduce(function(Ge,tt){var yt;return typeof tt=="string"?yt=tt.length:yt=tt.byteLength,Ge+yt.toString().length+yt+2},0),Oe=new Uint8Array(Le),Fe=0;return xe.forEach(function(Ge){var tt=typeof Ge=="string",yt=Ge;if(tt){for(var Vt=new Uint8Array(Ge.length),At=0;At<Ge.length;At++)Vt[At]=Ge.charCodeAt(At);yt=Vt.buffer}tt?Oe[Fe++]=0:Oe[Fe++]=1;for(var zt=yt.byteLength.toString(),At=0;At<zt.length;At++)Oe[Fe++]=parseInt(zt[At]);Oe[Fe++]=255;for(var Vt=new Uint8Array(yt),At=0;At<Vt.length;At++)Oe[Fe++]=Vt[At]}),ae(Oe.buffer)})},e.encodePayloadAsBlob=function(ee,ae){function K(le,xe){e.encodePacket(le,!0,!0,function(Le){var Oe=new Uint8Array(1);if(Oe[0]=1,typeof Le=="string"){for(var Fe=new Uint8Array(Le.length),Ge=0;Ge<Le.length;Ge++)Fe[Ge]=Le.charCodeAt(Ge);Le=Fe.buffer,Oe[0]=0}for(var tt=Le instanceof ArrayBuffer?Le.byteLength:Le.size,yt=tt.toString(),At=new Uint8Array(yt.length+1),Ge=0;Ge<yt.length;Ge++)At[Ge]=parseInt(yt[Ge]);if(At[yt.length]=255,F){var zt=new F([Oe.buffer,At.buffer,Le]);xe(null,zt)}})}G(ee,K,function(le,xe){return ae(new F(xe))})},e.decodePayloadAsBinary=function(ee,ae,K){typeof ae=="function"&&(K=ae,ae=null);for(var le=ee,xe=[];le.byteLength>0;){for(var Le=new Uint8Array(le),Oe=Le[0]===0,Fe="",Ge=1;Le[Ge]!==255;Ge++){if(Fe.length>310)return K(L,0,1);Fe+=Le[Ge]}le=r(le,2+Fe.length),Fe=parseInt(Fe);var tt=r(le,0,Fe);if(Oe)try{tt=String.fromCharCode.apply(null,new Uint8Array(tt))}catch{var yt=new Uint8Array(tt);tt="";for(var Ge=0;Ge<yt.length;Ge++)tt+=String.fromCharCode(yt[Ge])}xe.push(tt),le=r(le,Fe)}var At=xe.length;xe.forEach(function(zt,Vt){K(e.decodePacket(zt,ae,!0),Vt,At)})}})(rd);var PM={exports:{}};(function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var a in t.prototype)r[a]=t.prototype[a];return r}t.prototype.on=t.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},t.prototype.once=function(r,a){function c(){this.off(r,c),a.apply(this,arguments)}return c.fn=a,this.on(r,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+r];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var d,l=0;l<c.length;l++)if(d=c[l],d===a||d.fn===a){c.splice(l,1);break}return this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};var a=[].slice.call(arguments,1),c=this._callbacks["$"+r];if(c){c=c.slice(0);for(var d=0,l=c.length;d<l;++d)c[d].apply(this,a)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(PM);var Mk=PM.exports,u2,FT;function Lk(){if(FT)return u2;FT=1;var e=rd,t=Mk;u2=n;function n(r){this.path=r.path,this.hostname=r.hostname,this.port=r.port,this.secure=r.secure,this.query=r.query,this.timestampParam=r.timestampParam,this.timestampRequests=r.timestampRequests,this.readyState="",this.agent=r.agent||!1,this.socket=r.socket,this.enablesXDR=r.enablesXDR,this.pfx=r.pfx,this.key=r.key,this.passphrase=r.passphrase,this.cert=r.cert,this.ca=r.ca,this.ciphers=r.ciphers,this.rejectUnauthorized=r.rejectUnauthorized,this.forceNode=r.forceNode,this.isReactNative=r.isReactNative,this.extraHeaders=r.extraHeaders,this.localAddress=r.localAddress}return t(n.prototype),n.prototype.onError=function(r,a){var c=new Error(r);return c.type="TransportError",c.description=a,this.emit("error",c),this},n.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},n.prototype.send=function(r){if(this.readyState==="open")this.write(r);else throw new Error("Transport not open")},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(r){var a=e.decodePacket(r,this.socket.binaryType);this.onPacket(a)},n.prototype.onPacket=function(r){this.emit("packet",r)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")},u2}var sm={};sm.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t};sm.decode=function(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var c=n[r].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t};var Dx=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},IM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),z1=64,MM={},RT=0,gh=0,DT;function oC(e){var t="";do t=IM[e%z1]+t,e=Math.floor(e/z1);while(e>0);return t}function LN(e){var t=0;for(gh=0;gh<e.length;gh++)t=t*z1+MM[e.charAt(gh)];return t}function Ok(){var e=oC(+new Date);return e!==DT?(RT=0,DT=e):e+"."+oC(RT++)}for(;gh<z1;gh++)MM[IM[gh]]=gh;Ok.encode=oC;Ok.decode=LN;var LM=Ok,aC={exports:{}},sC={exports:{}},Wy=1e3,Zy=Wy*60,Ky=Zy*60,Xy=Ky*24,ON=Xy*365.25,FN=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return RN(e);if(n==="number"&&isNaN(e)===!1)return t.long?zN(e):DN(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function RN(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*ON;case"days":case"day":case"d":return n*Xy;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ky;case"minutes":case"minute":case"mins":case"min":case"m":return n*Zy;case"seconds":case"second":case"secs":case"sec":case"s":return n*Wy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function DN(e){return e>=Xy?Math.round(e/Xy)+"d":e>=Ky?Math.round(e/Ky)+"h":e>=Zy?Math.round(e/Zy)+"m":e>=Wy?Math.round(e/Wy)+"s":e+"ms"}function zN(e){return vv(e,Xy,"day")||vv(e,Ky,"hour")||vv(e,Zy,"minute")||vv(e,Wy,"second")||e+" ms"}function vv(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=x,t.disable=d,t.enable=c,t.enabled=l,t.humanize=FN,t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(b){var E=0,A;for(A in b)E=(E<<5)-E+b.charCodeAt(A),E|=0;return t.colors[Math.abs(E)%t.colors.length]}function r(b){var E;function A(){if(A.enabled){var L=A,F=+new Date,$=F-(E||F);L.diff=$,L.prev=E,L.curr=F,E=F;for(var N=new Array(arguments.length),Z=0;Z<N.length;Z++)N[Z]=arguments[Z];N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");var R=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(G,ee){if(G==="%%")return G;R++;var ae=t.formatters[ee];if(typeof ae=="function"){var K=N[R];G=ae.call(L,K),N.splice(R,1),R--}return G}),t.formatArgs.call(L,N);var q=A.log||t.log||console.log.bind(console);q.apply(L,N)}}return A.namespace=b,A.enabled=t.enabled(b),A.useColors=t.useColors(),A.color=n(b),A.destroy=a,typeof t.init=="function"&&t.init(A),t.instances.push(A),A}function a(){var b=t.instances.indexOf(this);return b!==-1?(t.instances.splice(b,1),!0):!1}function c(b){t.save(b),t.names=[],t.skips=[];var E,A=(typeof b=="string"?b:"").split(/[\s,]+/),L=A.length;for(E=0;E<L;E++)A[E]&&(b=A[E].replace(/\*/g,".*?"),b[0]==="-"?t.skips.push(new RegExp("^"+b.substr(1)+"$")):t.names.push(new RegExp("^"+b+"$")));for(E=0;E<t.instances.length;E++){var F=t.instances[E];F.enabled=t.enabled(F.namespace)}}function d(){t.enable("")}function l(b){if(b[b.length-1]==="*")return!0;var E,A;for(E=0,A=t.skips.length;E<A;E++)if(t.skips[E].test(b))return!1;for(E=0,A=t.names.length;E<A;E++)if(t.names[E].test(b))return!0;return!1}function x(b){return b instanceof Error?b.stack||b.message:b}})(sC,sC.exports);var BN=sC.exports;(function(e,t){t=e.exports=BN,t.log=a,t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(x){try{return JSON.stringify(x)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}};function r(x){var b=this.useColors;if(x[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+x[0]+(b?"%c ":" ")+"+"+t.humanize(this.diff),!!b){var E="color: "+this.color;x.splice(1,0,E,"color: inherit");var A=0,L=0;x[0].replace(/%[a-zA-Z%]/g,function(F){F!=="%%"&&(A++,F==="%c"&&(L=A))}),x.splice(L,0,E)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(x){try{x==null?t.storage.removeItem("debug"):t.storage.debug=x}catch{}}function d(){var x;try{x=t.storage.debug}catch{}return!x&&typeof process<"u"&&"env"in process&&(x={}.DEBUG),x}t.enable(d());function l(){try{return window.localStorage}catch{}}})(aC,aC.exports);var zx=aC.exports,OM=Lk(),$N=sm,FM=rd,NN=Dx,UN=LM,pl=zx("engine.io-client:polling"),RM=uu,jN=function(){var e=Pk,t=new e({xdomain:!1});return t.responseType!=null}();function uu(e){var t=e&&e.forceBase64;(!jN||t)&&(this.supportsBinary=!1),OM.call(this,e)}NN(uu,OM);uu.prototype.name="polling";uu.prototype.doOpen=function(){this.poll()};uu.prototype.pause=function(e){var t=this;this.readyState="pausing";function n(){pl("paused"),t.readyState="paused",e()}if(this.polling||!this.writable){var r=0;this.polling&&(pl("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){pl("pre-pause polling complete"),--r||n()})),this.writable||(pl("we are currently writing - waiting to pause"),r++,this.once("drain",function(){pl("pre-pause writing complete"),--r||n()}))}else n()};uu.prototype.poll=function(){pl("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};uu.prototype.onData=function(e){var t=this;pl("polling got data %s",e);var n=function(r,a,c){if(t.readyState==="opening"&&t.onOpen(),r.type==="close")return t.onClose(),!1;t.onPacket(r)};FM.decodePayload(e,this.socket.binaryType,n),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():pl('ignoring poll - transport state "%s"',this.readyState))};uu.prototype.doClose=function(){var e=this;function t(){pl("writing close packet"),e.write([{type:"close"}])}this.readyState==="open"?(pl("transport open - closing"),t()):(pl("transport not open - deferring close"),this.once("open",t))};uu.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};FM.encodePayload(e,this.supportsBinary,function(r){t.doWrite(r,n)})};uu.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";this.timestampRequests!==!1&&(e[this.timestampParam]=UN()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=$N.encode(e),this.port&&(t==="https"&&Number(this.port)!==443||t==="http"&&Number(this.port)!==80)&&(n=":"+this.port),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e};var VN=Pk,DM=RM,qN=Mk,GN=Dx,lC=zx("engine.io-client:polling-xhr");Ik.exports=lm;Ik.exports.Request=no;function zT(){}function lm(e){if(DM.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,typeof location<"u"){var t=location.protocol==="https:",n=location.port;n||(n=t?443:80),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}GN(lm,DM);lm.prototype.supportsBinary=!0;lm.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new no(e)};lm.prototype.doWrite=function(e,t){var n=typeof e!="string"&&e!==void 0,r=this.request({method:"POST",data:e,isBinary:n}),a=this;r.on("success",t),r.on("error",function(c){a.onError("xhr post error",c)}),this.sendXhr=r};lm.prototype.doPoll=function(){lC("xhr poll");var e=this.request(),t=this;e.on("data",function(n){t.onData(n)}),e.on("error",function(n){t.onError("xhr poll error",n)}),this.pollXhr=e};function no(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}qN(no.prototype);no.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new VN(e),n=this;try{lC("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch{}if(this.method==="POST")try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(t.readyState===2)try{var a=t.getResponseHeader("Content-Type");n.supportsBinary&&a==="application/octet-stream"&&(t.responseType="arraybuffer")}catch{}t.readyState===4&&(t.status===200||t.status===1223?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},lC("xhr data %s",this.data),t.send(this.data)}catch(a){setTimeout(function(){n.onError(a)},0);return}typeof document<"u"&&(this.index=no.requestsCount++,no.requests[this.index]=this)};no.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};no.prototype.onData=function(e){this.emit("data",e),this.onSuccess()};no.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)};no.prototype.cleanup=function(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=zT:this.xhr.onreadystatechange=zT,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete no.requests[this.index],this.xhr=null}};no.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch{}t==="application/octet-stream"?e=this.xhr.response||this.xhr.responseText:e=this.xhr.responseText}catch(n){this.onError(n)}e!=null&&this.onData(e)};no.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};no.prototype.abort=function(){this.cleanup()};no.requestsCount=0;no.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",BT);else if(typeof addEventListener=="function"){var HN="onpagehide"in self?"pagehide":"unload";addEventListener(HN,BT,!1)}}function BT(){for(var e in no.requests)no.requests.hasOwnProperty(e)&&no.requests[e].abort()}var WN=Ik.exports,Fk=RM,ZN=Dx,KN=um,XN=/\n/g,YN=/\\n/g,xv;function JN(){}function QN(){return typeof self<"u"?self:typeof window<"u"?window:typeof Ss<"u"?Ss:{}}function um(e){if(Fk.call(this,e),this.query=this.query||{},!xv){var t=QN();xv=t.___eio=t.___eio||[]}this.index=xv.length;var n=this;xv.push(function(r){n.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=JN)},!1)}ZN(um,Fk);um.prototype.supportsBinary=!1;um.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Fk.prototype.doClose.call(this)};um.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(a){e.onError("jsonp poll error",a)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)};um.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index,d;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=c,r.method="POST",r.setAttribute("accept-charset","utf-8"),a.name="d",r.appendChild(a),document.body.appendChild(r),this.form=r,this.area=a}this.form.action=this.uri();function l(){x(),t()}function x(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(E){n.onError("jsonp polling iframe removal error",E)}try{var b='<iframe src="javascript:0" name="'+n.iframeId+'">';d=document.createElement(b)}catch{d=document.createElement("iframe"),d.name=n.iframeId,d.src="javascript:0"}d.id=n.iframeId,n.form.appendChild(d),n.iframe=d}x(),e=e.replace(YN,`\\
`),this.area.value=e.replace(XN,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState==="complete"&&l()}:this.iframe.onload=l};const eU={},tU=Object.freeze(Object.defineProperty({__proto__:null,default:eU},Symbol.toStringTag,{value:"Module"})),nU=tD(tU);var Rk=Lk(),rU=rd,iU=sm,oU=Dx,aU=LM,sU=zx("engine.io-client:websocket"),B1,Dk;if(typeof WebSocket<"u")B1=WebSocket;else if(typeof self<"u")B1=self.WebSocket||self.MozWebSocket;else try{Dk=nU}catch{}var Np=B1||Dk,lU=Ps;function Ps(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=B1&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(Np=Dk),Rk.call(this,e)}oU(Ps,Rk);Ps.prototype.name="websocket";Ps.prototype.supportsBinary=!0;Ps.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new Np(e,t):new Np(e):new Np(e,t,n)}catch(r){return this.emit("error",r)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};Ps.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}};Ps.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,r=0,a=n;r<a;r++)(function(d){rU.encodePacket(d,t.supportsBinary,function(l){if(!t.usingBrowserWebSocket){var x={};if(d.options&&(x.compress=d.options.compress),t.perMessageDeflate){var b=typeof l=="string"?Buffer.byteLength(l):l.length;b<t.perMessageDeflate.threshold&&(x.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(l):t.ws.send(l,x)}catch{sU("websocket closed before onclose event")}--n||c()})})(e[r]);function c(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}};Ps.prototype.onClose=function(){Rk.prototype.onClose.call(this)};Ps.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};Ps.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&(t==="wss"&&Number(this.port)!==443||t==="ws"&&Number(this.port)!==80)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=aU()),this.supportsBinary||(e.b64=1),e=iU.encode(e),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e};Ps.prototype.check=function(){return!!Np&&!("__initialize"in Np&&this.name===Ps.prototype.name)};var uU=Pk,cU=WN,hU=KN,fU=lU;Rx.polling=dU;Rx.websocket=fU;function dU(e){var t,n=!1,r=!1,a=e.jsonp!==!1;if(typeof location<"u"){var c=location.protocol==="https:",d=location.port;d||(d=c?443:80),n=e.hostname!==location.hostname||d!==e.port,r=e.secure!==c}if(e.xdomain=n,e.xscheme=r,t=new uU(e),"open"in t&&!e.forceJSONP)return new cU(e);if(!a)throw new Error("JSONP disabled");return new hU(e)}var pU=[].indexOf,zM=function(e,t){if(pU)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},mU=Rx,gU=Mk,ji=zx("engine.io-client:socket"),yU=zM,BM=rd,$T=xM,_U=sm,vU=rr;function rr(e,t){if(!(this instanceof rr))return new rr(e,t);t=t||{},e&&typeof e=="object"&&(t=e,e=null),e?(e=$T(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=$T(t.host).host),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=t.query||{},typeof this.query=="string"&&(this.query=_U.decode(this.query)),this.upgrade=t.upgrade!==!1,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=t.jsonp!==!1,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=t.perMessageDeflate!==!1?t.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized===void 0?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}rr.priorWebsocketSuccess=!1;gU(rr.prototype);rr.protocol=BM.protocol;rr.Socket=rr;rr.Transport=Lk();rr.transports=Rx;rr.parser=rd;rr.prototype.createTransport=function(e){ji('creating transport "%s"',e);var t=xU(this.query);t.EIO=BM.protocol,t.transport=e;var n=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var r=new mU[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative});return r};function xU(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}rr.prototype.open=function(){var e;if(this.rememberUpgrade&&rr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)};rr.prototype.setTransport=function(e){ji("setting transport %s",e.name);var t=this;this.transport&&(ji("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(n){t.onPacket(n)}).on("error",function(n){t.onError(n)}).on("close",function(){t.onClose("transport close")})};rr.prototype.probe=function(e){ji('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;rr.priorWebsocketSuccess=!1;function a(){if(r.onlyBinaryUpgrades){var A=!this.supportsBinary&&r.transport.supportsBinary;n=n||A}n||(ji('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(L){if(!n)if(L.type==="pong"&&L.data==="probe"){if(ji('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;rr.priorWebsocketSuccess=t.name==="websocket",ji('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||r.readyState!=="closed"&&(ji("changing transport and sending upgrade packet"),E(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{ji('probe transport "%s" failed',e);var F=new Error("probe error");F.transport=t.name,r.emit("upgradeError",F)}}))}function c(){n||(n=!0,E(),t.close(),t=null)}function d(A){var L=new Error("probe error: "+A);L.transport=t.name,c(),ji('probe transport "%s" failed because of error: %s',e,A),r.emit("upgradeError",L)}function l(){d("transport closed")}function x(){d("socket closed")}function b(A){t&&A.name!==t.name&&(ji('"%s" works - aborting "%s"',A.name,t.name),c())}function E(){t.removeListener("open",a),t.removeListener("error",d),t.removeListener("close",l),r.removeListener("close",x),r.removeListener("upgrading",b)}t.once("open",a),t.once("error",d),t.once("close",l),this.once("close",x),this.once("upgrading",b),t.open()};rr.prototype.onOpen=function(){if(ji("socket open"),this.readyState="open",rr.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){ji("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}};rr.prototype.onPacket=function(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(ji('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else ji('packet received with socket readyState "%s"',this.readyState)};rr.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};rr.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){t.readyState!=="closed"&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};rr.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){ji("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)};rr.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})};rr.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};rr.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(ji("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};rr.prototype.write=rr.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this};rr.prototype.sendPacket=function(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),!(this.readyState==="closing"||this.readyState==="closed")){n=n||{},n.compress=n.compress!==!1;var a={type:e,data:t,options:n};this.emit("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}};rr.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),ji("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this};rr.prototype.onError=function(e){ji("socket error %j",e),rr.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)};rr.prototype.onClose=function(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){ji('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}};rr.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~yU(this.transports,e[n])&&t.push(e[n]);return t};Tk.exports=vU;Tk.exports.parser=rd;var bU=Tk.exports,$M={exports:{}},NM={exports:{}};(function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var a in t.prototype)r[a]=t.prototype[a];return r}t.prototype.on=t.prototype.addEventListener=function(r,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(a),this},t.prototype.once=function(r,a){function c(){this.off(r,c),a.apply(this,arguments)}return c.fn=a,this.on(r,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+r];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var d,l=0;l<c.length;l++)if(d=c[l],d===a||d.fn===a){c.splice(l,1);break}return this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};var a=[].slice.call(arguments,1),c=this._callbacks["$"+r];if(c){c=c.slice(0);for(var d=0,l=c.length;d<l;++d)c[d].apply(this,a)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(NM);var UM=NM.exports,wU=SU;function SU(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}var jM=CU;function CU(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}var NT=[].slice,VM=function(e,t){if(typeof t=="string"&&(t=e[t]),typeof t!="function")throw new Error("bind() requires a function");var n=NT.call(arguments,2);return function(){return t.apply(e,n.concat(NT.call(arguments)))}};(function(e,t){var n=Ox,r=UM,a=wU,c=jM,d=VM,l=Lx("socket.io-client:socket"),x=sm,b=kM;e.exports=L;var E={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},A=r.prototype.emit;function L(F,$,N){this.io=F,this.nsp=$,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},N&&N.query&&(this.query=N.query),this.io.autoConnect&&this.open()}r(L.prototype),L.prototype.subEvents=function(){if(!this.subs){var F=this.io;this.subs=[c(F,"open",d(this,"onopen")),c(F,"packet",d(this,"onpacket")),c(F,"close",d(this,"onclose"))]}},L.prototype.open=L.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},L.prototype.send=function(){var F=a(arguments);return F.unshift("message"),this.emit.apply(this,F),this},L.prototype.emit=function(F){if(E.hasOwnProperty(F))return A.apply(this,arguments),this;var $=a(arguments),N={type:(this.flags.binary!==void 0?this.flags.binary:b($))?n.BINARY_EVENT:n.EVENT,data:$};return N.options={},N.options.compress=!this.flags||this.flags.compress!==!1,typeof $[$.length-1]=="function"&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=$.pop(),N.id=this.ids++),this.connected?this.packet(N):this.sendBuffer.push(N),this.flags={},this},L.prototype.packet=function(F){F.nsp=this.nsp,this.io.packet(F)},L.prototype.onopen=function(){if(l("transport is open - connecting"),this.nsp!=="/")if(this.query){var F=typeof this.query=="object"?x.encode(this.query):this.query;l("sending connect packet with query %s",F),this.packet({type:n.CONNECT,query:F})}else this.packet({type:n.CONNECT})},L.prototype.onclose=function(F){l("close (%s)",F),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",F)},L.prototype.onpacket=function(F){var $=F.nsp===this.nsp,N=F.type===n.ERROR&&F.nsp==="/";if(!(!$&&!N))switch(F.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(F);break;case n.BINARY_EVENT:this.onevent(F);break;case n.ACK:this.onack(F);break;case n.BINARY_ACK:this.onack(F);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",F.data);break}},L.prototype.onevent=function(F){var $=F.data||[];l("emitting event %j",$),F.id!=null&&(l("attaching ack callback to event"),$.push(this.ack(F.id))),this.connected?A.apply(this,$):this.receiveBuffer.push($)},L.prototype.ack=function(F){var $=this,N=!1;return function(){if(!N){N=!0;var Z=a(arguments);l("sending ack %j",Z),$.packet({type:b(Z)?n.BINARY_ACK:n.ACK,id:F,data:Z})}}},L.prototype.onack=function(F){var $=this.acks[F.id];typeof $=="function"?(l("calling ack %s with %j",F.id,F.data),$.apply(this,F.data),delete this.acks[F.id]):l("bad ack %s",F.id)},L.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},L.prototype.emitBuffered=function(){var F;for(F=0;F<this.receiveBuffer.length;F++)A.apply(this,this.receiveBuffer[F]);for(this.receiveBuffer=[],F=0;F<this.sendBuffer.length;F++)this.packet(this.sendBuffer[F]);this.sendBuffer=[]},L.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},L.prototype.destroy=function(){if(this.subs){for(var F=0;F<this.subs.length;F++)this.subs[F].destroy();this.subs=null}this.io.destroy(this)},L.prototype.close=L.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},L.prototype.compress=function(F){return this.flags.compress=F,this},L.prototype.binary=function(F){return this.flags.binary=F,this}})($M);var qM=$M.exports,EU=cm;function cm(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}cm.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};cm.prototype.reset=function(){this.attempts=0};cm.prototype.setMin=function(e){this.ms=e};cm.prototype.setMax=function(e){this.max=e};cm.prototype.setJitter=function(e){this.jitter=e};var kU=bU,AU=qM,TU=UM,PU=Ox,uh=jM,sp=VM,Zo=Lx("socket.io-client:manager"),GM=zM,IU=EU,HM=Object.prototype.hasOwnProperty,UT=dr;function dr(e,t){if(!(this instanceof dr))return new dr(e,t);e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new IU({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||PU;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}dr.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)HM.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)};dr.prototype.updateSocketIds=function(){for(var e in this.nsps)HM.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))};dr.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};TU(dr.prototype);dr.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection};dr.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts};dr.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay};dr.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor};dr.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax};dr.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout};dr.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};dr.prototype.open=dr.prototype.connect=function(e,t){if(Zo("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Zo("opening %s",this.uri),this.engine=kU(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var a=uh(n,"open",function(){r.onopen(),e&&e()}),c=uh(n,"error",function(x){if(Zo("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",x),e){var b=new Error("Connection error");b.data=x,e(b)}else r.maybeReconnectOnOpen()});if(this._timeout!==!1){var d=this._timeout;Zo("connect attempt will timeout after %d",d);var l=setTimeout(function(){Zo("connect attempt timed out after %d",d),a.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",d)},d);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(c),this};dr.prototype.onopen=function(){Zo("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(uh(e,"data",sp(this,"ondata"))),this.subs.push(uh(e,"ping",sp(this,"onping"))),this.subs.push(uh(e,"pong",sp(this,"onpong"))),this.subs.push(uh(e,"error",sp(this,"onerror"))),this.subs.push(uh(e,"close",sp(this,"onclose"))),this.subs.push(uh(this.decoder,"decoded",sp(this,"ondecoded")))};dr.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};dr.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};dr.prototype.ondata=function(e){this.decoder.add(e)};dr.prototype.ondecoded=function(e){this.emit("packet",e)};dr.prototype.onerror=function(e){Zo("error",e),this.emitAll("error",e)};dr.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new AU(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&a()}function a(){~GM(r.connecting,n)||r.connecting.push(n)}return n};dr.prototype.destroy=function(e){var t=GM(this.connecting,e);~t&&this.connecting.splice(t,1),!this.connecting.length&&this.close()};dr.prototype.packet=function(e){Zo("writing packet %j",e);var t=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))};dr.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};dr.prototype.cleanup=function(){Zo("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};dr.prototype.close=dr.prototype.disconnect=function(){Zo("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};dr.prototype.onclose=function(e){Zo("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()};dr.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Zo("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Zo("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(Zo("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),!e.skipReconnect&&e.open(function(r){r?(Zo("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",r.data)):(Zo("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}};dr.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};(function(e,t){var n=Y$,r=Ox,a=UT,c=Lx("socket.io-client");e.exports=t=l;var d=t.managers={};function l(x,b){typeof x=="object"&&(b=x,x=void 0),b=b||{};var E=n(x),A=E.source,L=E.id,F=E.path,$=d[L]&&F in d[L].nsps,N=b.forceNew||b["force new connection"]||b.multiplex===!1||$,Z;return N?(c("ignoring socket cache for %s",A),Z=a(A,b)):(d[L]||(c("new io instance for %s",A),d[L]=a(A,b)),Z=d[L]),E.query&&!b.query&&(b.query=E.query),Z.socket(E.path,b)}t.protocol=r.protocol,t.connect=l,t.Manager=UT,t.Socket=qM})(YS,YS.exports);var MU=YS.exports,Bx={};Object.defineProperty(Bx,"__esModule",{value:!0});Bx.RENDERER_MESSAGE_EVENT_NAME=void 0;var LU="cosmos-renderer-message";Bx.RENDERER_MESSAGE_EVENT_NAME=LU;Object.defineProperty(Ek,"__esModule",{value:!0});Ek.createWebSocketsConnect=RU;var OU=FU(MU),c2=Bx;function FU(e){return e&&e.__esModule?e:{default:e}}function RU(e){var t=(0,OU.default)(e);return{postMessage:function(r){t.emit(c2.RENDERER_MESSAGE_EVENT_NAME,r)},onMessage:function(r){return t.on(c2.RENDERER_MESSAGE_EVENT_NAME,r),function(){return t.off(c2.RENDERER_MESSAGE_EVENT_NAME,r)}}}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"FixtureCapture",{enumerable:!0,get:function(){return t.FixtureCapture}}),Object.defineProperty(e,"FixtureContext",{enumerable:!0,get:function(){return n.FixtureContext}}),Object.defineProperty(e,"FixtureLoader",{enumerable:!0,get:function(){return r.FixtureLoader}}),Object.defineProperty(e,"Viewport",{enumerable:!0,get:function(){return x.Viewport}}),Object.defineProperty(e,"createPostMessageConnect",{enumerable:!0,get:function(){return c.createPostMessageConnect}}),Object.defineProperty(e,"createWebSocketsConnect",{enumerable:!0,get:function(){return b.createWebSocketsConnect}}),Object.defineProperty(e,"getDecoratedFixtureElement",{enumerable:!0,get:function(){return a.getDecoratedFixtureElement}}),Object.defineProperty(e,"useSelect",{enumerable:!0,get:function(){return d.useSelect}}),Object.defineProperty(e,"useValue",{enumerable:!0,get:function(){return l.useValue}});var t=gx,n=da,r=Tx,a=Px,c=mk,d=yk,l=bk,x=Mx,b=Ek})(F6);var WM=F6,$x={},DU=wl;function uC(e){"@babel/helpers - typeof";return uC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uC(e)}Object.defineProperty($x,"__esModule",{value:!0});$x.ErrorCatch=void 0;var Pf=$U(pt),zU=fa,BU=DU;function $U(e){return e&&e.__esModule?e:{default:e}}function NU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UU(e,t,n){return t&&jT(e.prototype,t),n&&jT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cC(e,t)}function cC(e,t){return cC=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},cC(e,t)}function VU(e){var t=GU();return function(){var r=$1(e),a;if(t){var c=$1(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return qU(this,a)}}function qU(e,t){if(t&&(uC(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZM(e)}function ZM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},$1(e)}function HU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WU=function(e){jU(n,e);var t=VU(n);function n(){var r;NU(this,n);for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=t.call.apply(t,[this].concat(c)),HU(ZM(r),"state",{error:null}),r}return UU(n,[{key:"componentDidCatch",value:function(a,c){this.setState({error:"".concat(a.message,`
`).concat(c.componentStack)})}},{key:"componentDidUpdate",value:function(a){this.state.error&&(ZU(this.props.children,a.children)||KU(this.props.fixtureState,a.fixtureState))&&(this.setState({error:null}),this.props.onErrorReset())}},{key:"render",value:function(){return this.state.error?this.renderError(this.state.error):this.props.children}},{key:"renderError",value:function(a){return __DEV__?null:Pf.default.createElement(Pf.default.Fragment,null,Pf.default.createElement("p",null,Pf.default.createElement("strong",null,"Ouch, something wrong!")),Pf.default.createElement("pre",null,a),Pf.default.createElement("p",null,"Check console for more info."))}}]),n}(Pf.default.Component);$x.ErrorCatch=WU;function ZU(e,t){return!(0,BU.areNodesEqual)(e,t,!0)}function KU(e,t){return!(0,zU.isEqual)(e,t)}var hm={},Nx={};Object.defineProperty(Nx,"__esModule",{value:!0});Nx.isInsideCosmosPreviewIframe=XU;function XU(){try{return window.self!==window.parent}catch{return!0}}Object.defineProperty(hm,"__esModule",{value:!0});hm.rendererConnect=void 0;var VT=WM,YU=Nx,JU=(0,YU.isInsideCosmosPreviewIframe)()?(0,VT.createPostMessageConnect)():(0,VT.createWebSocketsConnect)(QU());hm.rendererConnect=JU;function QU(){return location.origin}var fm={},ej=bx;Object.defineProperty(fm,"__esModule",{value:!0});fm.rendererId=void 0;var tj=ej,nj=rj();fm.rendererId=nj;function rj(){var e=sessionStorage.getItem("cosmosRendererId");return e||(e=(0,tj.uuid)(),sessionStorage.setItem("cosmosRendererId",e)),e}var zk={};Object.defineProperty(zk,"__esModule",{value:!0});zk.renderMessage=sj;var ij=oj(pt);function oj(e){return e&&e.__esModule?e:{default:e}}var aj={position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",fontFamily:'-apple-system, BlinkMacSystemFont, Ubuntu, "Helvetica Neue", Helvetica, sans-serif',fontSize:14};function sj(e){var t=e.msg;return ij.default.createElement("div",{style:aj},t)}var Ux={},zh={},__={},lj=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qT=Object.getOwnPropertySymbols,uj=Object.prototype.hasOwnProperty,cj=Object.prototype.propertyIsEnumerable;function hj(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function fj(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(c){return t[c]});if(r.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(c){a[c]=c}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var dj=fj()?Object.assign:function(e,t){for(var n,r=hj(e),a,c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var d in n)uj.call(n,d)&&(r[d]=n[d]);if(qT){a=qT(n);for(var l=0;l<a.length;l++)cj.call(n,a[l])&&(r[a[l]]=n[a[l]])}}return r},KM="%[a-f0-9]{2}",GT=new RegExp("("+KM+")|([^%]+?)","gi"),HT=new RegExp("("+KM+")+","gi");function hC(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],hC(n),hC(r))}function pj(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(GT)||[],n=1;n<t.length;n++)e=hC(t,n).join(""),t=e.match(GT)||[];return e}}function mj(e){for(var t={"%FE%FF":"","%FF%FE":""},n=HT.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=pj(n[0]);r!==n[0]&&(t[n[0]]=r)}n=HT.exec(e)}t["%C2"]="";for(var a=Object.keys(t),c=0;c<a.length;c++){var d=a[c];e=e.replace(new RegExp(d,"g"),t[d])}return e}var gj=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return mj(e)}},yj=lj,XM=dj,WT=gj;function _j(e){switch(e.arrayFormat){case"index":return function(t,n,r){return n===null?[Ga(t,e),"[",r,"]"].join(""):[Ga(t,e),"[",Ga(r,e),"]=",Ga(n,e)].join("")};case"bracket":return function(t,n){return n===null?Ga(t,e):[Ga(t,e),"[]=",Ga(n,e)].join("")};default:return function(t,n){return n===null?Ga(t,e):[Ga(t,e),"=",Ga(n,e)].join("")}}}function vj(e){var t;switch(e.arrayFormat){case"index":return function(n,r,a){if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){a[n]=r;return}a[n]===void 0&&(a[n]={}),a[n][t[1]]=r};case"bracket":return function(n,r,a){if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),t){if(a[n]===void 0){a[n]=[r];return}}else{a[n]=r;return}a[n]=[].concat(a[n],r)};default:return function(n,r,a){if(a[n]===void 0){a[n]=r;return}a[n]=[].concat(a[n],r)}}}function Ga(e,t){return t.encode?t.strict?yj(e):encodeURIComponent(e):e}function YM(e){return Array.isArray(e)?e.sort():typeof e=="object"?YM(Object.keys(e)).sort(function(t,n){return Number(t)-Number(n)}).map(function(t){return e[t]}):e}function JM(e){var t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function QM(e,t){t=XM({arrayFormat:"none"},t);var n=vj(t),r=Object.create(null);return typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e)?r:(e.split("&").forEach(function(a){var c=a.replace(/\+/g," ").split("="),d=c.shift(),l=c.length>0?c.join("="):void 0;l=l===void 0?null:WT(l),n(WT(d),l,r)}),Object.keys(r).sort().reduce(function(a,c){var d=r[c];return d&&typeof d=="object"&&!Array.isArray(d)?a[c]=YM(d):a[c]=d,a},Object.create(null)))}__.extract=JM;__.parse=QM;__.stringify=function(e,t){var n={encode:!0,strict:!0,arrayFormat:"none"};t=XM(n,t),t.sort===!1&&(t.sort=function(){});var r=_j(t);return e?Object.keys(e).sort(t.sort).map(function(a){var c=e[a];if(c===void 0)return"";if(c===null)return Ga(a,t);if(Array.isArray(c)){var d=[];return c.slice().forEach(function(l){l!==void 0&&d.push(r(a,l,d.length))}),d.join("&")}return Ga(a,t)+"="+Ga(c,t)}).filter(function(a){return a.length>0}).join("&"):""};__.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:QM(JM(e),t)}};Object.defineProperty(zh,"__esModule",{value:!0});zh.parsePlaygroundUrlQuery=wj;zh.parseRendererUrlQuery=Cj;zh.parseUrlQuery=Bk;zh.stringifyPlaygroundUrlQuery=bj;zh.stringifyRendererUrlQuery=Sj;zh.stringifyUrlQuery=Ej;var jx=xj(__);function xj(e){return e&&e.__esModule?e:{default:e}}function bj(e){var t={};return e.fixtureId&&(t.fixtureId=JSON.stringify(e.fixtureId)),jx.default.stringify(t)}function wj(e){var t=Bk(e),n={};return t.fixtureId&&(n.fixtureId=JSON.parse(t.fixtureId)),n}function Sj(e){var t={};return e._fixtureId&&(t._fixtureId=JSON.stringify(e._fixtureId)),jx.default.stringify(t)}function Cj(e){var t=Bk(e),n={};return t._fixtureId&&(n._fixtureId=JSON.parse(t._fixtureId)),n}function Bk(e){return jx.default.parse(e)}function Ej(e){return jx.default.stringify(e)}var kj=zh;Object.defineProperty(Ux,"__esModule",{value:!0});Ux.selectedFixtureId=void 0;var Aj=kj,Tj=Nx,Pj=Ij();Ux.selectedFixtureId=Pj;function Ij(){var e=(0,Aj.parseRendererUrlQuery)(location.search);return e._fixtureId?(Mj(e._fixtureId),e._fixtureId):Lj()}function Mj(e){sessionStorage.setItem("cosmosFixtureId",JSON.stringify(e))}function Lj(){if((0,Tj.isInsideCosmosPreviewIframe)())return null;var e=sessionStorage.getItem("cosmosFixtureId");return e?JSON.parse(e):null}Object.defineProperty(VE,"__esModule",{value:!0});VE.DomFixtureLoader=Uj;var Oj=Nj(pt),Fj=WM,Rj=$x,Dj=hm,zj=fm,Bj=zk,$j=Ux;function Nj(e){return e&&e.__esModule?e:{default:e}}function Uj(e){var t=e.fixtures,n=e.decorators,r=e.onErrorReset;return Oj.default.createElement(Fj.FixtureLoader,{rendererId:zj.rendererId,rendererConnect:Dj.rendererConnect,fixtures:t,selectedFixtureId:$j.selectedFixtureId,systemDecorators:[Rj.ErrorCatch],userDecorators:n,renderMessage:Bj.renderMessage,onErrorReset:r})}var jj=fm,Vj=hm;window.addEventListener("error",function(){Vj.rendererConnect.postMessage({type:"rendererError",payload:{rendererId:jj.rendererId}})});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mountDomRenderer=x,Object.defineProperty(e,"rendererConnect",{enumerable:!0,get:function(){return c.rendererConnect}}),Object.defineProperty(e,"rendererId",{enumerable:!0,get:function(){return d.rendererId}});var t=l(pt),n=V2,r=jE,a=VE,c=hm,d=fm;function l(b){return b&&b.__esModule?b:{default:b}}function x(b){var E=b.rendererConfig,A=b.fixtures,L=b.decorators,F=b.onErrorReset,$=(0,r.getDomContainer)(E.containerQuerySelector),N=(0,n.createRoot)($);N.render(t.default.createElement(a.DomFixtureLoader,{fixtures:A,decorators:L,onErrorReset:F}))}})(IP);var qj=IP;const Gj="2.15.0";var eL={exports:{}},Vx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hj=pt,Wj=Symbol.for("react.element"),Zj=Symbol.for("react.fragment"),Kj=Object.prototype.hasOwnProperty,Xj=Hj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yj={key:!0,ref:!0,__self:!0,__source:!0};function tL(e,t,n){var r,a={},c=null,d=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)Kj.call(t,r)&&!Yj.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Wj,type:e,key:c,ref:d,props:a,_owner:Xj.current}}Vx.Fragment=Zj;Vx.jsx=tL;Vx.jsxs=tL;eL.exports=Vx;var $k=eL.exports;const qx=$k.Fragment,Xe=$k.jsx,mn=$k.jsxs;function nL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=nL(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Ci(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=nL(e))&&(r&&(r+=" "),r+=t);return r}const rL=e=>Xe("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e,children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.54039 5.54039C5.79423 5.28655 6.20578 5.28655 6.45963 5.54039L12 11.0808L17.5404 5.54039C17.7942 5.28655 18.2058 5.28655 18.4596 5.54039C18.7135 5.79423 18.7135 6.20578 18.4596 6.45963L12.9192 12L18.4596 17.5404C18.7135 17.7942 18.7135 18.2058 18.4596 18.4596C18.2058 18.7135 17.7942 18.7135 17.5404 18.4596L12 12.9192L6.45963 18.4596C6.20578 18.7135 5.79423 18.7135 5.54039 18.4596C5.28655 18.2058 5.28655 17.7942 5.54039 17.5404L11.0808 12L5.54039 6.45963C5.28655 6.20578 5.28655 5.79423 5.54039 5.54039Z",fill:"currentColor"})});rL.displayName="Close24";const Jj=pt.memo(rL),Qj=Jj,iL=e=>mn("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:[Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 2.64645C2.84171 2.45118 3.15829 2.45118 3.35355 2.64645L13.3536 12.6464C13.5488 12.8417 13.5488 13.1583 13.3536 13.3536C13.1583 13.5488 12.8417 13.5488 12.6464 13.3536L2.64645 3.35355C2.45118 3.15829 2.45118 2.84171 2.64645 2.64645Z",fill:"currentColor"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 2.64645C13.1583 2.45118 12.8417 2.45118 12.6464 2.64645L2.64645 12.6464C2.45118 12.8417 2.45118 13.1583 2.64645 13.3536C2.84171 13.5488 3.15829 13.5488 3.35355 13.3536L13.3536 3.35355C13.5488 3.15829 13.5488 2.84171 13.3536 2.64645Z",fill:"currentColor"})]});iL.displayName="Close16";const eV=pt.memo(iL),tV=eV,oL=e=>Xe("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 5.64645C2.84171 5.45118 3.15829 5.45118 3.35355 5.64645L8 10.2929L12.6464 5.64645C12.8417 5.45118 13.1583 5.45118 13.3536 5.64645C13.5488 5.84171 13.5488 6.15829 13.3536 6.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L2.64645 6.35355C2.45118 6.15829 2.45118 5.84171 2.64645 5.64645Z",fill:"currentColor"})});oL.displayName="ChevronDown16";const nV=pt.memo(oL),rV=nV,aL=e=>mn("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",...e,children:[Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 2.66669C5.0545 2.66669 2.66669 5.0545 2.66669 8.00002C2.66669 10.9455 5.0545 13.3334 8.00002 13.3334C10.9455 13.3334 13.3334 10.9455 13.3334 8.00002C13.3334 5.0545 10.9455 2.66669 8.00002 2.66669ZM1.66669 8.00002C1.66669 4.50222 4.50222 1.66669 8.00002 1.66669C11.4978 1.66669 14.3334 4.50222 14.3334 8.00002C14.3334 11.4978 11.4978 14.3334 8.00002 14.3334C4.50222 14.3334 1.66669 11.4978 1.66669 8.00002Z",fill:"currentColor"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 6.87481C8.27614 6.87481 8.5 7.09867 8.5 7.37481V11C8.5 11.2761 8.27614 11.5 8 11.5C7.72386 11.5 7.5 11.2761 7.5 11V7.37481C7.5 7.09867 7.72386 6.87481 8 6.87481Z",fill:"currentColor"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 4.5C8.27614 4.5 8.5 4.72386 8.5 5V5.01C8.5 5.28614 8.27614 5.51 8 5.51C7.72386 5.51 7.5 5.28614 7.5 5.01V5C7.5 4.72386 7.72386 4.5 8 4.5Z",fill:"currentColor"})]});aL.displayName="InfoOutline16";const iV=pt.memo(aL),oV=iV;var sL={exports:{}},aV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sV=aV,lV=sV;function lL(){}function uL(){}uL.resetWarningCache=lL;var uV=function(){function e(r,a,c,d,l,x){if(x!==lV){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uL,resetWarningCache:lL};return n.PropTypes=n,n};sL.exports=uV();var cV=sL.exports;const En=ic(cV);let hV=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function v_(e){return e.split("-")[1]}function Nk(e){return e==="y"?"height":"width"}function Vf(e){return e.split("-")[0]}function x_(e){return["top","bottom"].includes(Vf(e))?"x":"y"}function ZT(e,t,n){let{reference:r,floating:a}=e;const c=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,l=x_(t),x=Nk(l),b=r[x]/2-a[x]/2,E=l==="x";let A;switch(Vf(t)){case"top":A={x:c,y:r.y-a.height};break;case"bottom":A={x:c,y:r.y+r.height};break;case"right":A={x:r.x+r.width,y:d};break;case"left":A={x:r.x-a.width,y:d};break;default:A={x:r.x,y:r.y}}switch(v_(t)){case"start":A[l]-=b*(n&&E?-1:1);break;case"end":A[l]+=b*(n&&E?-1:1)}return A}const fV=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:c=[],platform:d}=n,l=c.filter(Boolean),x=await(d.isRTL==null?void 0:d.isRTL(t));let b=await d.getElementRects({reference:e,floating:t,strategy:a}),{x:E,y:A}=ZT(b,r,x),L=r,F={},$=0;for(let N=0;N<l.length;N++){const{name:Z,fn:R}=l[N],{x:q,y:G,data:ee,reset:ae}=await R({x:E,y:A,initialPlacement:r,placement:L,strategy:a,middlewareData:F,rects:b,platform:d,elements:{reference:e,floating:t}});E=q??E,A=G??A,F={...F,[Z]:{...F[Z],...ee}},ae&&$<=50&&($++,typeof ae=="object"&&(ae.placement&&(L=ae.placement),ae.rects&&(b=ae.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:a}):ae.rects),{x:E,y:A}=ZT(b,L,x)),N=-1)}return{x:E,y:A,placement:L,strategy:a,middlewareData:F}};function cL(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function fC(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function hL(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:c,rects:d,elements:l,strategy:x}=e,{boundary:b="clippingAncestors",rootBoundary:E="viewport",elementContext:A="floating",altBoundary:L=!1,padding:F=0}=t,$=cL(F),N=l[L?A==="floating"?"reference":"floating":A],Z=fC(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(N)))==null||n?N:N.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(l.floating)),boundary:b,rootBoundary:E,strategy:x})),R=A==="floating"?{...d.floating,x:r,y:a}:d.reference,q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(l.floating)),G=await(c.isElement==null?void 0:c.isElement(q))&&await(c.getScale==null?void 0:c.getScale(q))||{x:1,y:1},ee=fC(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({rect:R,offsetParent:q,strategy:x}):R);return{top:(Z.top-ee.top+$.top)/G.y,bottom:(ee.bottom-Z.bottom+$.bottom)/G.y,left:(Z.left-ee.left+$.left)/G.x,right:(ee.right-Z.right+$.right)/G.x}}const dV=Math.min,pV=Math.max;function dC(e,t,n){return pV(e,dV(t,n))}const KT=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:a,y:c,placement:d,rects:l,platform:x,elements:b}=t;if(n==null)return{};const E=cL(r),A={x:a,y:c},L=x_(d),F=Nk(L),$=await x.getDimensions(n),N=L==="y",Z=N?"top":"left",R=N?"bottom":"right",q=N?"clientHeight":"clientWidth",G=l.reference[F]+l.reference[L]-A[L]-l.floating[F],ee=A[L]-l.reference[L],ae=await(x.getOffsetParent==null?void 0:x.getOffsetParent(n));let K=ae?ae[q]:0;K&&await(x.isElement==null?void 0:x.isElement(ae))||(K=b.floating[q]||l.floating[F]);const le=G/2-ee/2,xe=E[Z],Le=K-$[F]-E[R],Oe=K/2-$[F]/2+le,Fe=dC(xe,Oe,Le),Ge=v_(d)!=null&&Oe!=Fe&&l.reference[F]/2-(Oe<xe?E[Z]:E[R])-$[F]/2<0;return{[L]:A[L]-(Ge?Oe<xe?xe-Oe:Le-Oe:0),data:{[L]:Fe,centerOffset:Oe-Fe}}}}),mV=["top","right","bottom","left"];mV.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const gV={left:"right",right:"left",bottom:"top",top:"bottom"};function N1(e){return e.replace(/left|right|bottom|top/g,t=>gV[t])}function yV(e,t,n){n===void 0&&(n=!1);const r=v_(e),a=x_(e),c=Nk(a);let d=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=N1(d)),{main:d,cross:N1(d)}}const _V={start:"end",end:"start"};function h2(e){return e.replace(/start|end/g,t=>_V[t])}const vV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:a,rects:c,initialPlacement:d,platform:l,elements:x}=t,{mainAxis:b=!0,crossAxis:E=!0,fallbackPlacements:A,fallbackStrategy:L="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:$=!0,...N}=e,Z=Vf(r),R=Vf(d)===d,q=await(l.isRTL==null?void 0:l.isRTL(x.floating)),G=A||(R||!$?[N1(d)]:function(Fe){const Ge=N1(Fe);return[h2(Fe),Ge,h2(Ge)]}(d));A||F==="none"||G.push(...function(Fe,Ge,tt,yt){const At=v_(Fe);let zt=function(Vt,Ve,_e){const we=["left","right"],X=["right","left"],oe=["top","bottom"],lt=["bottom","top"];switch(Vt){case"top":case"bottom":return _e?Ve?X:we:Ve?we:X;case"left":case"right":return Ve?oe:lt;default:return[]}}(Vf(Fe),tt==="start",yt);return At&&(zt=zt.map(Vt=>Vt+"-"+At),Ge&&(zt=zt.concat(zt.map(h2)))),zt}(d,$,F,q));const ee=[d,...G],ae=await hL(t,N),K=[];let le=((n=a.flip)==null?void 0:n.overflows)||[];if(b&&K.push(ae[Z]),E){const{main:Fe,cross:Ge}=yV(r,c,q);K.push(ae[Fe],ae[Ge])}if(le=[...le,{placement:r,overflows:K}],!K.every(Fe=>Fe<=0)){var xe,Le;const Fe=(((xe=a.flip)==null?void 0:xe.index)||0)+1,Ge=ee[Fe];if(Ge)return{data:{index:Fe,overflows:le},reset:{placement:Ge}};let tt=(Le=le.filter(yt=>yt.overflows[0]<=0).sort((yt,At)=>yt.overflows[1]-At.overflows[1])[0])==null?void 0:Le.placement;if(!tt)switch(L){case"bestFit":{var Oe;const yt=(Oe=le.map(At=>[At.placement,At.overflows.filter(zt=>zt>0).reduce((zt,Vt)=>zt+Vt,0)]).sort((At,zt)=>At[1]-zt[1])[0])==null?void 0:Oe[0];yt&&(tt=yt);break}case"initialPlacement":tt=d}if(r!==tt)return{reset:{placement:tt}}}return{}}}},xV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,a=await async function(c,d){const{placement:l,platform:x,elements:b}=c,E=await(x.isRTL==null?void 0:x.isRTL(b.floating)),A=Vf(l),L=v_(l),F=x_(l)==="x",$=["left","top"].includes(A)?-1:1,N=E&&F?-1:1,Z=typeof d=="function"?d(c):d;let{mainAxis:R,crossAxis:q,alignmentAxis:G}=typeof Z=="number"?{mainAxis:Z,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Z};return L&&typeof G=="number"&&(q=L==="end"?-1*G:G),F?{x:q*N,y:R*$}:{x:R*$,y:q*N}}(t,e);return{x:n+a.x,y:r+a.y,data:a}}}};function bV(e){return e==="x"?"y":"x"}const wV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:l={fn:Z=>{let{x:R,y:q}=Z;return{x:R,y:q}}},...x}=e,b={x:n,y:r},E=await hL(t,x),A=x_(Vf(a)),L=bV(A);let F=b[A],$=b[L];if(c){const Z=A==="y"?"bottom":"right";F=dC(F+E[A==="y"?"top":"left"],F,F-E[Z])}if(d){const Z=L==="y"?"bottom":"right";$=dC($+E[L==="y"?"top":"left"],$,$-E[Z])}const N=l.fn({...t,[A]:F,[L]:$});return{...N,data:{x:N.x-n,y:N.y-r}}}}};function Za(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function iu(e){return Za(e).getComputedStyle(e)}const XT=Math.min,my=Math.max,U1=Math.round;function fL(e){const t=iu(e);let n=parseFloat(t.width),r=parseFloat(t.height);const a=e.offsetWidth,c=e.offsetHeight,d=U1(n)!==a||U1(r)!==c;return d&&(n=a,r=c),{width:n,height:r,fallback:d}}function Mh(e){return pL(e)?(e.nodeName||"").toLowerCase():""}let bv;function dL(){if(bv)return bv;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(bv=e.brands.map(t=>t.brand+"/"+t.version).join(" "),bv):navigator.userAgent}function ou(e){return e instanceof Za(e).HTMLElement}function yl(e){return e instanceof Za(e).Element}function pL(e){return e instanceof Za(e).Node}function YT(e){return typeof ShadowRoot>"u"?!1:e instanceof Za(e).ShadowRoot||e instanceof ShadowRoot}function Gx(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=iu(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function SV(e){return["table","td","th"].includes(Mh(e))}function pC(e){const t=/firefox/i.test(dL()),n=iu(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(a=>n.willChange.includes(a))||["paint","layout","strict","content"].some(a=>{const c=n.contain;return c!=null&&c.includes(a)})}function mC(){return/^((?!chrome|android).)*safari/i.test(dL())}function Uk(e){return["html","body","#document"].includes(Mh(e))}function mL(e){return yl(e)?e:e.contextElement}const gL={x:1,y:1};function Up(e){const t=mL(e);if(!ou(t))return gL;const n=t.getBoundingClientRect(),{width:r,height:a,fallback:c}=fL(t);let d=(c?U1(n.width):n.width)/r,l=(c?U1(n.height):n.height)/a;return d&&Number.isFinite(d)||(d=1),l&&Number.isFinite(l)||(l=1),{x:d,y:l}}function Yf(e,t,n,r){var a,c;t===void 0&&(t=!1),n===void 0&&(n=!1);const d=e.getBoundingClientRect(),l=mL(e);let x=gL;t&&(r?yl(r)&&(x=Up(r)):x=Up(e));const b=l?Za(l):window,E=mC()&&n;let A=(d.left+(E&&((a=b.visualViewport)==null?void 0:a.offsetLeft)||0))/x.x,L=(d.top+(E&&((c=b.visualViewport)==null?void 0:c.offsetTop)||0))/x.y,F=d.width/x.x,$=d.height/x.y;if(l){const N=Za(l),Z=r&&yl(r)?Za(r):r;let R=N.frameElement;for(;R&&r&&Z!==N;){const q=Up(R),G=R.getBoundingClientRect(),ee=getComputedStyle(R);G.x+=(R.clientLeft+parseFloat(ee.paddingLeft))*q.x,G.y+=(R.clientTop+parseFloat(ee.paddingTop))*q.y,A*=q.x,L*=q.y,F*=q.x,$*=q.y,A+=G.x,L+=G.y,R=Za(R).frameElement}}return{width:F,height:$,top:L,right:A+F,bottom:L+$,left:A,x:A,y:L}}function Ah(e){return((pL(e)?e.ownerDocument:e.document)||window.document).documentElement}function Hx(e){return yl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function yL(e){return Yf(Ah(e)).left+Hx(e).scrollLeft}function Yy(e){if(Mh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||YT(e)&&e.host||Ah(e);return YT(t)?t.host:t}function _L(e){const t=Yy(e);return Uk(t)?t.ownerDocument.body:ou(t)&&Gx(t)?t:_L(t)}function gy(e,t){var n;t===void 0&&(t=[]);const r=_L(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),c=Za(r);return a?t.concat(c,c.visualViewport||[],Gx(r)?r:[]):t.concat(r,gy(r))}function JT(e,t,n){let r;if(t==="viewport")r=function(d,l){const x=Za(d),b=Ah(d),E=x.visualViewport;let A=b.clientWidth,L=b.clientHeight,F=0,$=0;if(E){A=E.width,L=E.height;const N=mC();(!N||N&&l==="fixed")&&(F=E.offsetLeft,$=E.offsetTop)}return{width:A,height:L,x:F,y:$}}(e,n);else if(t==="document")r=function(d){const l=Ah(d),x=Hx(d),b=d.ownerDocument.body,E=my(l.scrollWidth,l.clientWidth,b.scrollWidth,b.clientWidth),A=my(l.scrollHeight,l.clientHeight,b.scrollHeight,b.clientHeight);let L=-x.scrollLeft+yL(d);const F=-x.scrollTop;return iu(b).direction==="rtl"&&(L+=my(l.clientWidth,b.clientWidth)-E),{width:E,height:A,x:L,y:F}}(Ah(e));else if(yl(t))r=function(d,l){const x=Yf(d,!0,l==="fixed"),b=x.top+d.clientTop,E=x.left+d.clientLeft,A=ou(d)?Up(d):{x:1,y:1};return{width:d.clientWidth*A.x,height:d.clientHeight*A.y,x:E*A.x,y:b*A.y}}(t,n);else{const d={...t};if(mC()){var a,c;const l=Za(e);d.x-=((a=l.visualViewport)==null?void 0:a.offsetLeft)||0,d.y-=((c=l.visualViewport)==null?void 0:c.offsetTop)||0}r=d}return fC(r)}function QT(e,t){return ou(e)&&iu(e).position!=="fixed"?t?t(e):e.offsetParent:null}function e5(e,t){const n=Za(e);let r=QT(e,t);for(;r&&SV(r)&&iu(r).position==="static";)r=QT(r,t);return r&&(Mh(r)==="html"||Mh(r)==="body"&&iu(r).position==="static"&&!pC(r))?n:r||function(a){let c=Yy(a);for(;ou(c)&&!Uk(c);){if(pC(c))return c;c=Yy(c)}return null}(e)||n}function CV(e,t,n){const r=ou(t),a=Ah(t),c=Yf(e,!0,n==="fixed",t);let d={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(r||!r&&n!=="fixed")if((Mh(t)!=="body"||Gx(a))&&(d=Hx(t)),ou(t)){const x=Yf(t,!0);l.x=x.x+t.clientLeft,l.y=x.y+t.clientTop}else a&&(l.x=yL(a));return{x:c.left+d.scrollLeft-l.x,y:c.top+d.scrollTop-l.y,width:c.width,height:c.height}}const EV={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const c=n==="clippingAncestors"?function(b,E){const A=E.get(b);if(A)return A;let L=gy(b).filter(Z=>yl(Z)&&Mh(Z)!=="body"),F=null;const $=iu(b).position==="fixed";let N=$?Yy(b):b;for(;yl(N)&&!Uk(N);){const Z=iu(N),R=pC(N);Z.position==="fixed"?F=null:($?R||F:R||Z.position!=="static"||!F||!["absolute","fixed"].includes(F.position))?F=Z:L=L.filter(q=>q!==N),N=Yy(N)}return E.set(b,L),L}(t,this._c):[].concat(n),d=[...c,r],l=d[0],x=d.reduce((b,E)=>{const A=JT(t,E,a);return b.top=my(A.top,b.top),b.right=XT(A.right,b.right),b.bottom=XT(A.bottom,b.bottom),b.left=my(A.left,b.left),b},JT(t,l,a));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const a=ou(n),c=Ah(n);if(n===c)return t;let d={scrollLeft:0,scrollTop:0},l={x:1,y:1};const x={x:0,y:0};if((a||!a&&r!=="fixed")&&((Mh(n)!=="body"||Gx(c))&&(d=Hx(n)),ou(n))){const b=Yf(n);l=Up(n),x.x=b.x+n.clientLeft,x.y=b.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-d.scrollLeft*l.x+x.x,y:t.y*l.y-d.scrollTop*l.y+x.y}},isElement:yl,getDimensions:function(e){return ou(e)?fL(e):e.getBoundingClientRect()},getOffsetParent:e5,getDocumentElement:Ah,getScale:Up,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const a=this.getOffsetParent||e5,c=this.getDimensions;return{reference:CV(t,await a(n),r),floating:{x:0,y:0,...await c(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>iu(e).direction==="rtl"};function kV(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:c=!0,elementResize:d=!0,animationFrame:l=!1}=r,x=a&&!l,b=x||c?[...yl(e)?gy(e):e.contextElement?gy(e.contextElement):[],...gy(t)]:[];b.forEach(F=>{x&&F.addEventListener("scroll",n,{passive:!0}),c&&F.addEventListener("resize",n)});let E,A=null;if(d){let F=!0;A=new ResizeObserver(()=>{F||n(),F=!1}),yl(e)&&!l&&A.observe(e),yl(e)||!e.contextElement||l||A.observe(e.contextElement),A.observe(t)}let L=l?Yf(e):null;return l&&function F(){const $=Yf(e);!L||$.x===L.x&&$.y===L.y&&$.width===L.width&&$.height===L.height||n(),L=$,E=requestAnimationFrame(F)}(),n(),()=>{var F;b.forEach($=>{x&&$.removeEventListener("scroll",n),c&&$.removeEventListener("resize",n)}),(F=A)==null||F.disconnect(),A=null,l&&cancelAnimationFrame(E)}}const AV=(e,t,n)=>{const r=new Map,a={platform:EV,...n},c={...a.platform,_c:r};return fV(e,t,{...a,platform:c})},TV=e=>{const{element:t,padding:n}=e;function r(a){return Object.prototype.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){return r(t)?t.current!=null?KT({element:t.current,padding:n}).fn(a):{}:t?KT({element:t,padding:n}).fn(a):{}}}};var Qv=typeof document<"u"?pt.useLayoutEffect:pt.useEffect;function j1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!j1(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const c=a[r];if(!(c==="_owner"&&e.$$typeof)&&!j1(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function t5(e){const t=pt.useRef(e);return Qv(()=>{t.current=e}),t}function PV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,whileElementsMounted:c,open:d}=e,[l,x]=pt.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,E]=pt.useState(r);j1(b,r)||E(r);const A=pt.useRef(null),L=pt.useRef(null),F=pt.useRef(l),$=t5(c),N=t5(a),[Z,R]=pt.useState(null),[q,G]=pt.useState(null),ee=pt.useCallback(Oe=>{A.current!==Oe&&(A.current=Oe,R(Oe))},[]),ae=pt.useCallback(Oe=>{L.current!==Oe&&(L.current=Oe,G(Oe))},[]),K=pt.useCallback(()=>{if(!A.current||!L.current)return;const Oe={placement:t,strategy:n,middleware:b};N.current&&(Oe.platform=N.current),AV(A.current,L.current,Oe).then(Fe=>{const Ge={...Fe,isPositioned:!0};le.current&&!j1(F.current,Ge)&&(F.current=Ge,NE.flushSync(()=>{x(Ge)}))})},[b,t,n,N]);Qv(()=>{d===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,x(Oe=>({...Oe,isPositioned:!1})))},[d]);const le=pt.useRef(!1);Qv(()=>(le.current=!0,()=>{le.current=!1}),[]),Qv(()=>{if(Z&&q){if($.current)return $.current(Z,q,K);K()}},[Z,q,K,$]);const xe=pt.useMemo(()=>({reference:A,floating:L,setReference:ee,setFloating:ae}),[ee,ae]),Le=pt.useMemo(()=>({reference:Z,floating:q}),[Z,q]);return pt.useMemo(()=>({...l,update:K,refs:xe,elements:Le,reference:ee,floating:ae}),[l,K,xe,Le,ee,ae])}const IV="_tooltipContainer_g6vht_4",MV="_hoverTooltip_g6vht_15",LV="_popup_g6vht_18",OV="_contentBody_g6vht_23",FV="_bodyBottom_g6vht_36",RV="_unset_g6vht_41",DV="_arrow_g6vht_45",zV="_arrowInner_g6vht_74",BV="_tooltipContent_g6vht_81",$V="_closeIcon_g6vht_88",Uu={tooltipContainer:IV,hoverTooltip:MV,popup:LV,contentBody:OV,bodyBottom:FV,unset:RV,arrow:DV,"arrow-top":"_arrow-top_g6vht_58","arrow-bottom":"_arrow-bottom_g6vht_62","arrow-left":"_arrow-left_g6vht_66","arrow-right":"_arrow-right_g6vht_70",arrowInner:zV,tooltipContent:BV,closeIcon:$V};function n5(e){switch(e){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end"}}function NV(e,t,n){if(e&&t&&console.error("You should not use both placement and deprecadedPlacement props at the same time. Placement prop will be used."),t)return t;if(n){if(typeof e=="function")return n5(e(n));if(e)return n5(e)}}const r5="top";function UV({children:e,position:t,triggerRef:n,transitionRef:r,placement:a,getPlacement:c,classes:d,hoverBehavior:l=!1,onOuterClick:x,onClose:b,open:E=!0,offset:A=7}){const L=pt.useCallback(Le=>{if(!(x&&l===!0)){if(x){x(Le);return}b==null||b(Le)}},[l,x,b]),F=pt.useRef(null),$=pt.useMemo(()=>NV(c,a,t)||r5,[c,a,t]),{refs:N,x:Z,y:R,strategy:q,middlewareData:{arrow:{x:G,y:ee}={}},placement:ae}=PV({placement:$,open:E,whileElementsMounted:kV,middleware:[xV(A),vV(),wV({padding:5}),TV({element:F})]}),K=pt.useMemo(()=>({"--tooltip-arrox-x-position":G!=null?`${G}px`:"","--tooltip-arrow-y-position":ee!=null?`${ee}px`:"","--tooltip-x-position":`${Z??0}px`,"--tooltip-y-position":`${R??0}px`,"--tooltip-placement":q}),[G,ee,Z,R,q]),le=pt.useMemo(()=>`arrow-${ae.split("-")[0]||r5}`,[ae]);if(pt.useLayoutEffect(()=>{if(n)N.setReference(n.current);else if(t){const{x:Le,y:Oe}=t;N.setReference({getBoundingClientRect(){return{width:0,height:0,x:Le,y:Oe,top:Oe,left:Le,right:Le,bottom:Oe}}})}},[t,N,n]),t&&n&&console.error("Both position and triggerRef are provided. Tooltip will be rendered with triggerRef"),!t&&!n)return console.error("Tooltip will not be rendered because neither position nor triggerRef are provided"),null;if(!E)return null;const xe=l?void 0:b;return Xe("div",{ref:r,className:Ci(Uu.tooltipContainer,{[Uu.hoverTooltip]:l}),onClick:L,style:K,children:mn("div",{ref:N.setFloating,className:Uu.tooltipContent,children:[mn("div",{className:Ci(Uu.contentBody,Ci),children:[mn("div",{children:[e,Xe("div",{className:Uu.bodyBottom})]}),xe&&Xe("div",{className:Uu.closeIcon,onClick:xe,children:Xe(tV,{})})]}),Xe("div",{ref:F,className:Ci(Uu.arrow,Uu[le]),children:Xe("div",{className:Uu.arrowInner})})]})})}const jV="_legendTitle_sgaz8_1",VV="_grid_sgaz8_6",qV="_cell_sgaz8_11",GV="_colorCell_sgaz8_17",HV="_yStepsCell_sgaz8_26",WV="_xStepsCell_sgaz8_45",ZV="_xStepsCellNoLabel_sgaz8_46",KV="_arrowX_sgaz8_70",XV="_arrowY_sgaz8_71",YV="_axisLabelX_sgaz8_88",JV="_axisLabelY_sgaz8_89",QV="_arrowHeadX_sgaz8_107",eq="_arrowHeadY_sgaz8_108",tq="_arrowHeadY_angle0_sgaz8_123",ho={legendTitle:jV,grid:VV,cell:qV,colorCell:GV,yStepsCell:HV,xStepsCell:WV,xStepsCellNoLabel:ZV,arrowX:KV,arrowY:XV,axisLabelX:YV,axisLabelY:JV,arrowHeadX:QV,arrowHeadY:eq,arrowHeadY_angle0:tq};function nq(){const e={};return{increment:t=>(typeof e[t]=="number"?e[t]+=1:e[t]=0,e[t])}}function rq(e,t){const n=[],r=nq();return e.forEach((a,c)=>{a.split(" ").forEach((d,l)=>{const x=r.increment(d),b=t[d]&&t[d][x];b&&n.push({...b,_position:{x:l,y:c}})})}),n}function i5(e){return[...e].reverse()}const iq=(e,t)=>({gridColumn:`${e+1} / ${e+2}`,gridRow:`${t+1} / ${t+2}`}),o5=({className:e,type:t})=>Xe("div",{className:e,children:t==="horizontal"?Xe("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe("path",{d:"M6,6L0,0l0,2.4L3.6,6L0,9.6L0,12L6,6z",fill:"currentColor"})}):Xe("svg",{width:"12",height:"6",viewBox:"0 0 12 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe("path",{d:"M6,0L0,6l2.4,0L6,2.4L9.6,6L12,6L6,0z",fill:"currentColor"})})}),oq=({cells:e,size:t,axis:n,title:r,showAxisLabels:a=!1,showSteps:c=!0,showArrowHeads:d=!0,onCellPointerOver:l,onCellPointerLeave:x,renderXAxisLabel:b,renderYAxisLabel:E})=>{const A=pt.useMemo(()=>[`y ${new Array(t+1).fill(".").join(" ")}`,...new Array(t).fill(`y ${new Array(t).fill("c").join(" ")} .`),`. ${new Array(t+1).fill("x").join(" ")}`],[t]),L=rq(A,{x:c?n.x.steps.map(N=>({label:N.label||N.value.toFixed(1),className:ho.xStepsCell})):n.x.steps.map(N=>({label:"",className:ho.xStepsCellNoLabel})),y:c?i5(n.y.steps).map(N=>({label:N.label||N.value.toFixed(1),className:ho.yStepsCell})):i5(n.y.steps).map(N=>({label:"",className:ho.yStepsCellNoLabel})),c:e.map((N,Z)=>({label:Xe("span",{children:N.label}),className:Ci(ho.cell,ho.colorCell),style:{backgroundColor:N.color},...l&&{onPointerOver:R=>l(R,N,Z)},...x&&{onPointerLeave:R=>x(R,N,Z)}}))}),F=()=>b?b(n.x,ho.axisLabelX):Xe("div",{className:ho.axisLabelX,children:n.x.label}),$=()=>E?E(n.y,ho.axisLabelY):Xe("div",{className:ho.axisLabelY,children:n.y.label});return mn("div",{children:[r&&Xe("div",{className:ho.legendTitle,children:r}),mn("div",{className:ho.grid,style:{gridTemplateColumns:`repeat(${t+2}, auto)`,gridTemplateRows:`repeat(${t+2}, auto)`},children:[a&&n.x.label?F():null,a&&n.y.label?$():null,Xe("div",{className:ho.arrowX,children:d&&Xe(o5,{type:"horizontal",className:ho.arrowHeadX})}),Xe("div",{className:ho.arrowY,children:d&&Xe(o5,{type:"vertical",className:Ci({[ho.arrowHeadY]:!0,[ho.arrowHeadY_angle0]:!a})})}),L.map(N=>Xe("div",{style:Object.assign(iq(N._position.x,N._position.y),N.style),className:Ci(N.className,ho.cell),onPointerOver:N.onPointerOver,onPointerLeave:N.onPointerLeave,children:N.label},`${N._position.x}|${N._position.y}`))]})]})};var vL={exports:{}},Ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk=Symbol.for("react.element"),Vk=Symbol.for("react.portal"),Wx=Symbol.for("react.fragment"),Zx=Symbol.for("react.strict_mode"),Kx=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),aq=Symbol.for("react.server_context"),Jx=Symbol.for("react.forward_ref"),Qx=Symbol.for("react.suspense"),eb=Symbol.for("react.suspense_list"),tb=Symbol.for("react.memo"),nb=Symbol.for("react.lazy"),sq=Symbol.for("react.offscreen"),xL;xL=Symbol.for("react.module.reference");function Ls(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jk:switch(e=e.type,e){case Wx:case Kx:case Zx:case Qx:case eb:return e;default:switch(e=e&&e.$$typeof,e){case aq:case Yx:case Jx:case nb:case tb:case Xx:return e;default:return t}}case Vk:return t}}}Ar.ContextConsumer=Yx;Ar.ContextProvider=Xx;Ar.Element=jk;Ar.ForwardRef=Jx;Ar.Fragment=Wx;Ar.Lazy=nb;Ar.Memo=tb;Ar.Portal=Vk;Ar.Profiler=Kx;Ar.StrictMode=Zx;Ar.Suspense=Qx;Ar.SuspenseList=eb;Ar.isAsyncMode=function(){return!1};Ar.isConcurrentMode=function(){return!1};Ar.isContextConsumer=function(e){return Ls(e)===Yx};Ar.isContextProvider=function(e){return Ls(e)===Xx};Ar.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jk};Ar.isForwardRef=function(e){return Ls(e)===Jx};Ar.isFragment=function(e){return Ls(e)===Wx};Ar.isLazy=function(e){return Ls(e)===nb};Ar.isMemo=function(e){return Ls(e)===tb};Ar.isPortal=function(e){return Ls(e)===Vk};Ar.isProfiler=function(e){return Ls(e)===Kx};Ar.isStrictMode=function(e){return Ls(e)===Zx};Ar.isSuspense=function(e){return Ls(e)===Qx};Ar.isSuspenseList=function(e){return Ls(e)===eb};Ar.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wx||e===Kx||e===Zx||e===Qx||e===eb||e===sq||typeof e=="object"&&e!==null&&(e.$$typeof===nb||e.$$typeof===tb||e.$$typeof===Xx||e.$$typeof===Yx||e.$$typeof===Jx||e.$$typeof===xL||e.getModuleId!==void 0)};Ar.typeOf=Ls;vL.exports=Ar;var lq=vL.exports;const uq=ic(lq);function V1(e,t){return V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},V1(e,t)}function Is(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,V1(e,t)}function Io(){return Io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Io.apply(this,arguments)}function wv(e){return e.charAt(0)==="/"}function f2(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}function cq(e,t){t===void 0&&(t="");var n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&wv(e),c=t&&wv(t),d=a||c;if(e&&wv(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var l;if(r.length){var x=r[r.length-1];l=x==="."||x===".."||x===""}else l=!1;for(var b=0,E=r.length;E>=0;E--){var A=r[E];A==="."?f2(r,E):A===".."?(f2(r,E),b++):b&&(f2(r,E),b--)}if(!d)for(;b--;b)r.unshift("..");d&&r[0]!==""&&(!r[0]||!wv(r[0]))&&r.unshift("");var L=r.join("/");return l&&L.substr(-1)!=="/"&&(L+="/"),L}var hq=!0,d2="Invariant failed";function id(e,t){if(!e){if(hq)throw new Error(d2);var n=typeof t=="function"?t():t,r=n?d2+": "+n:d2;throw new Error(r)}}function yy(e){return e.charAt(0)==="/"?e:"/"+e}function a5(e){return e.charAt(0)==="/"?e.substr(1):e}function fq(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function bL(e,t){return fq(e,t)?e.substr(t.length):e}function wL(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function dq(e){var t=e||"/",n="",r="",a=t.indexOf("#");a!==-1&&(r=t.substr(a),t=t.substr(0,a));var c=t.indexOf("?");return c!==-1&&(n=t.substr(c),t=t.substr(0,c)),{pathname:t,search:n==="?"?"":n,hash:r==="#"?"":r}}function ka(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function Ka(e,t,n,r){var a;typeof e=="string"?(a=dq(e),a.state=t):(a=Io({},e),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",t!==void 0&&a.state===void 0&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(c){throw c instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):c}return n&&(a.key=n),r?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=cq(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function qk(){var e=null;function t(d){return e=d,function(){e===d&&(e=null)}}function n(d,l,x,b){if(e!=null){var E=typeof e=="function"?e(d,l):e;typeof E=="string"?typeof x=="function"?x(E,b):b(!0):b(E!==!1)}else b(!0)}var r=[];function a(d){var l=!0;function x(){l&&d.apply(void 0,arguments)}return r.push(x),function(){l=!1,r=r.filter(function(b){return b!==x})}}function c(){for(var d=arguments.length,l=new Array(d),x=0;x<d;x++)l[x]=arguments[x];r.forEach(function(b){return b.apply(void 0,l)})}return{setPrompt:t,confirmTransitionTo:n,appendListener:a,notifyListeners:c}}var SL=!!(typeof window<"u"&&window.document&&window.document.createElement);function CL(e,t){t(window.confirm(e))}function pq(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function mq(){return window.navigator.userAgent.indexOf("Trident")===-1}function gq(){return window.navigator.userAgent.indexOf("Firefox")===-1}function yq(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var s5="popstate",l5="hashchange";function u5(){try{return window.history.state||{}}catch{return{}}}function EL(e){e===void 0&&(e={}),SL||id(!1);var t=window.history,n=pq(),r=!mq(),a=e,c=a.forceRefresh,d=c===void 0?!1:c,l=a.getUserConfirmation,x=l===void 0?CL:l,b=a.keyLength,E=b===void 0?6:b,A=e.basename?wL(yy(e.basename)):"";function L(_e){var we=_e||{},X=we.key,oe=we.state,lt=window.location,mt=lt.pathname,Gt=lt.search,Dt=lt.hash,Qt=mt+Gt+Dt;return A&&(Qt=bL(Qt,A)),Ka(Qt,oe,X)}function F(){return Math.random().toString(36).substr(2,E)}var $=qk();function N(_e){Io(Ve,_e),Ve.length=t.length,$.notifyListeners(Ve.location,Ve.action)}function Z(_e){yq(_e)||G(L(_e.state))}function R(){G(L(u5()))}var q=!1;function G(_e){if(q)q=!1,N();else{var we="POP";$.confirmTransitionTo(_e,we,x,function(X){X?N({action:we,location:_e}):ee(_e)})}}function ee(_e){var we=Ve.location,X=K.indexOf(we.key);X===-1&&(X=0);var oe=K.indexOf(_e.key);oe===-1&&(oe=0);var lt=X-oe;lt&&(q=!0,Oe(lt))}var ae=L(u5()),K=[ae.key];function le(_e){return A+ka(_e)}function xe(_e,we){var X="PUSH",oe=Ka(_e,we,F(),Ve.location);$.confirmTransitionTo(oe,X,x,function(lt){if(lt){var mt=le(oe),Gt=oe.key,Dt=oe.state;if(n)if(t.pushState({key:Gt,state:Dt},null,mt),d)window.location.href=mt;else{var Qt=K.indexOf(Ve.location.key),un=K.slice(0,Qt+1);un.push(oe.key),K=un,N({action:X,location:oe})}else window.location.href=mt}})}function Le(_e,we){var X="REPLACE",oe=Ka(_e,we,F(),Ve.location);$.confirmTransitionTo(oe,X,x,function(lt){if(lt){var mt=le(oe),Gt=oe.key,Dt=oe.state;if(n)if(t.replaceState({key:Gt,state:Dt},null,mt),d)window.location.replace(mt);else{var Qt=K.indexOf(Ve.location.key);Qt!==-1&&(K[Qt]=oe.key),N({action:X,location:oe})}else window.location.replace(mt)}})}function Oe(_e){t.go(_e)}function Fe(){Oe(-1)}function Ge(){Oe(1)}var tt=0;function yt(_e){tt+=_e,tt===1&&_e===1?(window.addEventListener(s5,Z),r&&window.addEventListener(l5,R)):tt===0&&(window.removeEventListener(s5,Z),r&&window.removeEventListener(l5,R))}var At=!1;function zt(_e){_e===void 0&&(_e=!1);var we=$.setPrompt(_e);return At||(yt(1),At=!0),function(){return At&&(At=!1,yt(-1)),we()}}function Vt(_e){var we=$.appendListener(_e);return yt(1),function(){yt(-1),we()}}var Ve={length:t.length,action:"POP",location:ae,createHref:le,push:xe,replace:Le,go:Oe,goBack:Fe,goForward:Ge,block:zt,listen:Vt};return Ve}var c5="hashchange",_q={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+a5(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:a5,decodePath:yy},slash:{encodePath:yy,decodePath:yy}};function kL(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function Ng(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function vq(e){window.location.hash=e}function p2(e){window.location.replace(kL(window.location.href)+"#"+e)}function xq(e){e===void 0&&(e={}),SL||id(!1);var t=window.history;gq();var n=e,r=n.getUserConfirmation,a=r===void 0?CL:r,c=n.hashType,d=c===void 0?"slash":c,l=e.basename?wL(yy(e.basename)):"",x=_q[d],b=x.encodePath,E=x.decodePath;function A(){var we=E(Ng());return l&&(we=bL(we,l)),Ka(we)}var L=qk();function F(we){Io(_e,we),_e.length=t.length,L.notifyListeners(_e.location,_e.action)}var $=!1,N=null;function Z(we,X){return we.pathname===X.pathname&&we.search===X.search&&we.hash===X.hash}function R(){var we=Ng(),X=b(we);if(we!==X)p2(X);else{var oe=A(),lt=_e.location;if(!$&&Z(lt,oe)||N===ka(oe))return;N=null,q(oe)}}function q(we){if($)$=!1,F();else{var X="POP";L.confirmTransitionTo(we,X,a,function(oe){oe?F({action:X,location:we}):G(we)})}}function G(we){var X=_e.location,oe=le.lastIndexOf(ka(X));oe===-1&&(oe=0);var lt=le.lastIndexOf(ka(we));lt===-1&&(lt=0);var mt=oe-lt;mt&&($=!0,Fe(mt))}var ee=Ng(),ae=b(ee);ee!==ae&&p2(ae);var K=A(),le=[ka(K)];function xe(we){var X=document.querySelector("base"),oe="";return X&&X.getAttribute("href")&&(oe=kL(window.location.href)),oe+"#"+b(l+ka(we))}function Le(we,X){var oe="PUSH",lt=Ka(we,void 0,void 0,_e.location);L.confirmTransitionTo(lt,oe,a,function(mt){if(mt){var Gt=ka(lt),Dt=b(l+Gt),Qt=Ng()!==Dt;if(Qt){N=Gt,vq(Dt);var un=le.lastIndexOf(ka(_e.location)),Xn=le.slice(0,un+1);Xn.push(Gt),le=Xn,F({action:oe,location:lt})}else F()}})}function Oe(we,X){var oe="REPLACE",lt=Ka(we,void 0,void 0,_e.location);L.confirmTransitionTo(lt,oe,a,function(mt){if(mt){var Gt=ka(lt),Dt=b(l+Gt),Qt=Ng()!==Dt;Qt&&(N=Gt,p2(Dt));var un=le.indexOf(ka(_e.location));un!==-1&&(le[un]=Gt),F({action:oe,location:lt})}})}function Fe(we){t.go(we)}function Ge(){Fe(-1)}function tt(){Fe(1)}var yt=0;function At(we){yt+=we,yt===1&&we===1?window.addEventListener(c5,R):yt===0&&window.removeEventListener(c5,R)}var zt=!1;function Vt(we){we===void 0&&(we=!1);var X=L.setPrompt(we);return zt||(At(1),zt=!0),function(){return zt&&(zt=!1,At(-1)),X()}}function Ve(we){var X=L.appendListener(we);return At(1),function(){At(-1),X()}}var _e={length:t.length,action:"POP",location:K,createHref:xe,push:Le,replace:Oe,go:Fe,goBack:Ge,goForward:tt,block:Vt,listen:Ve};return _e}function h5(e,t,n){return Math.min(Math.max(e,t),n)}function bq(e){e===void 0&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,a=r===void 0?["/"]:r,c=t.initialIndex,d=c===void 0?0:c,l=t.keyLength,x=l===void 0?6:l,b=qk();function E(xe){Io(le,xe),le.length=le.entries.length,b.notifyListeners(le.location,le.action)}function A(){return Math.random().toString(36).substr(2,x)}var L=h5(d,0,a.length-1),F=a.map(function(xe){return typeof xe=="string"?Ka(xe,void 0,A()):Ka(xe,void 0,xe.key||A())}),$=ka;function N(xe,Le){var Oe="PUSH",Fe=Ka(xe,Le,A(),le.location);b.confirmTransitionTo(Fe,Oe,n,function(Ge){if(Ge){var tt=le.index,yt=tt+1,At=le.entries.slice(0);At.length>yt?At.splice(yt,At.length-yt,Fe):At.push(Fe),E({action:Oe,location:Fe,index:yt,entries:At})}})}function Z(xe,Le){var Oe="REPLACE",Fe=Ka(xe,Le,A(),le.location);b.confirmTransitionTo(Fe,Oe,n,function(Ge){Ge&&(le.entries[le.index]=Fe,E({action:Oe,location:Fe}))})}function R(xe){var Le=h5(le.index+xe,0,le.entries.length-1),Oe="POP",Fe=le.entries[Le];b.confirmTransitionTo(Fe,Oe,n,function(Ge){Ge?E({action:Oe,location:Fe,index:Le}):E()})}function q(){R(-1)}function G(){R(1)}function ee(xe){var Le=le.index+xe;return Le>=0&&Le<le.entries.length}function ae(xe){return xe===void 0&&(xe=!1),b.setPrompt(xe)}function K(xe){return b.appendListener(xe)}var le={length:F.length,action:"POP",location:F[L],index:L,entries:F,createHref:$,push:N,replace:Z,go:R,goBack:q,goForward:G,canGo:ee,block:ae,listen:K};return le}var dm={exports:{}},wq=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},q1=wq;dm.exports=PL;dm.exports.parse=Gk;dm.exports.compile=Cq;dm.exports.tokensToFunction=AL;dm.exports.tokensToRegExp=TL;var Sq=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Gk(e,t){for(var n=[],r=0,a=0,c="",d=t&&t.delimiter||"/",l;(l=Sq.exec(e))!=null;){var x=l[0],b=l[1],E=l.index;if(c+=e.slice(a,E),a=E+x.length,b){c+=b[1];continue}var A=e[a],L=l[2],F=l[3],$=l[4],N=l[5],Z=l[6],R=l[7];c&&(n.push(c),c="");var q=L!=null&&A!=null&&A!==L,G=Z==="+"||Z==="*",ee=Z==="?"||Z==="*",ae=l[2]||d,K=$||N;n.push({name:F||r++,prefix:L||"",delimiter:ae,optional:ee,repeat:G,partial:q,asterisk:!!R,pattern:K?Aq(K):R?".*":"[^"+e1(ae)+"]+?"})}return a<e.length&&(c+=e.substr(a)),c&&n.push(c),n}function Cq(e,t){return AL(Gk(e,t),t)}function Eq(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function kq(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function AL(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",Wk(t)));return function(a,c){for(var d="",l=a||{},x=c||{},b=x.pretty?Eq:encodeURIComponent,E=0;E<e.length;E++){var A=e[E];if(typeof A=="string"){d+=A;continue}var L=l[A.name],F;if(L==null)if(A.optional){A.partial&&(d+=A.prefix);continue}else throw new TypeError('Expected "'+A.name+'" to be defined');if(q1(L)){if(!A.repeat)throw new TypeError('Expected "'+A.name+'" to not repeat, but received `'+JSON.stringify(L)+"`");if(L.length===0){if(A.optional)continue;throw new TypeError('Expected "'+A.name+'" to not be empty')}for(var $=0;$<L.length;$++){if(F=b(L[$]),!n[E].test(F))throw new TypeError('Expected all "'+A.name+'" to match "'+A.pattern+'", but received `'+JSON.stringify(F)+"`");d+=($===0?A.prefix:A.delimiter)+F}continue}if(F=A.asterisk?kq(L):b(L),!n[E].test(F))throw new TypeError('Expected "'+A.name+'" to match "'+A.pattern+'", but received "'+F+'"');d+=A.prefix+F}return d}}function e1(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Aq(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Hk(e,t){return e.keys=t,e}function Wk(e){return e&&e.sensitive?"":"i"}function Tq(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Hk(e,t)}function Pq(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(PL(e[a],t,n).source);var c=new RegExp("(?:"+r.join("|")+")",Wk(n));return Hk(c,t)}function Iq(e,t,n){return TL(Gk(e,n),t,n)}function TL(e,t,n){q1(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,a=n.end!==!1,c="",d=0;d<e.length;d++){var l=e[d];if(typeof l=="string")c+=e1(l);else{var x=e1(l.prefix),b="(?:"+l.pattern+")";t.push(l),l.repeat&&(b+="(?:"+x+b+")*"),l.optional?l.partial?b=x+"("+b+")?":b="(?:"+x+"("+b+"))?":b=x+"("+b+")",c+=b}}var E=e1(n.delimiter||"/"),A=c.slice(-E.length)===E;return r||(c=(A?c.slice(0,-E.length):c)+"(?:"+E+"(?=$))?"),a?c+="$":c+=r&&A?"":"(?="+E+"|$)",Hk(new RegExp("^"+c,Wk(n)),t)}function PL(e,t,n){return q1(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Tq(e,t):q1(e)?Pq(e,t,n):Iq(e,t,n)}var Mq=dm.exports;const Lq=ic(Mq);var Mr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=typeof Symbol=="function"&&Symbol.for,Zk=go?Symbol.for("react.element"):60103,Kk=go?Symbol.for("react.portal"):60106,rb=go?Symbol.for("react.fragment"):60107,ib=go?Symbol.for("react.strict_mode"):60108,ob=go?Symbol.for("react.profiler"):60114,ab=go?Symbol.for("react.provider"):60109,sb=go?Symbol.for("react.context"):60110,Xk=go?Symbol.for("react.async_mode"):60111,lb=go?Symbol.for("react.concurrent_mode"):60111,ub=go?Symbol.for("react.forward_ref"):60112,cb=go?Symbol.for("react.suspense"):60113,Oq=go?Symbol.for("react.suspense_list"):60120,hb=go?Symbol.for("react.memo"):60115,fb=go?Symbol.for("react.lazy"):60116,Fq=go?Symbol.for("react.block"):60121,Rq=go?Symbol.for("react.fundamental"):60117,Dq=go?Symbol.for("react.responder"):60118,zq=go?Symbol.for("react.scope"):60119;function ts(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Zk:switch(e=e.type,e){case Xk:case lb:case rb:case ob:case ib:case cb:return e;default:switch(e=e&&e.$$typeof,e){case sb:case ub:case fb:case hb:case ab:return e;default:return t}}case Kk:return t}}}function IL(e){return ts(e)===lb}Mr.AsyncMode=Xk;Mr.ConcurrentMode=lb;Mr.ContextConsumer=sb;Mr.ContextProvider=ab;Mr.Element=Zk;Mr.ForwardRef=ub;Mr.Fragment=rb;Mr.Lazy=fb;Mr.Memo=hb;Mr.Portal=Kk;Mr.Profiler=ob;Mr.StrictMode=ib;Mr.Suspense=cb;Mr.isAsyncMode=function(e){return IL(e)||ts(e)===Xk};Mr.isConcurrentMode=IL;Mr.isContextConsumer=function(e){return ts(e)===sb};Mr.isContextProvider=function(e){return ts(e)===ab};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zk};Mr.isForwardRef=function(e){return ts(e)===ub};Mr.isFragment=function(e){return ts(e)===rb};Mr.isLazy=function(e){return ts(e)===fb};Mr.isMemo=function(e){return ts(e)===hb};Mr.isPortal=function(e){return ts(e)===Kk};Mr.isProfiler=function(e){return ts(e)===ob};Mr.isStrictMode=function(e){return ts(e)===ib};Mr.isSuspense=function(e){return ts(e)===cb};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rb||e===lb||e===ob||e===ib||e===cb||e===Oq||typeof e=="object"&&e!==null&&(e.$$typeof===fb||e.$$typeof===hb||e.$$typeof===ab||e.$$typeof===sb||e.$$typeof===ub||e.$$typeof===Rq||e.$$typeof===Dq||e.$$typeof===zq||e.$$typeof===Fq)};Mr.typeOf=ts;function od(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var ML={exports:{}},Tr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=typeof Symbol=="function"&&Symbol.for,Yk=yo?Symbol.for("react.element"):60103,Jk=yo?Symbol.for("react.portal"):60106,db=yo?Symbol.for("react.fragment"):60107,pb=yo?Symbol.for("react.strict_mode"):60108,mb=yo?Symbol.for("react.profiler"):60114,gb=yo?Symbol.for("react.provider"):60109,yb=yo?Symbol.for("react.context"):60110,Qk=yo?Symbol.for("react.async_mode"):60111,_b=yo?Symbol.for("react.concurrent_mode"):60111,vb=yo?Symbol.for("react.forward_ref"):60112,xb=yo?Symbol.for("react.suspense"):60113,Bq=yo?Symbol.for("react.suspense_list"):60120,bb=yo?Symbol.for("react.memo"):60115,wb=yo?Symbol.for("react.lazy"):60116,$q=yo?Symbol.for("react.block"):60121,Nq=yo?Symbol.for("react.fundamental"):60117,Uq=yo?Symbol.for("react.responder"):60118,jq=yo?Symbol.for("react.scope"):60119;function ns(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Yk:switch(e=e.type,e){case Qk:case _b:case db:case mb:case pb:case xb:return e;default:switch(e=e&&e.$$typeof,e){case yb:case vb:case wb:case bb:case gb:return e;default:return t}}case Jk:return t}}}function LL(e){return ns(e)===_b}Tr.AsyncMode=Qk;Tr.ConcurrentMode=_b;Tr.ContextConsumer=yb;Tr.ContextProvider=gb;Tr.Element=Yk;Tr.ForwardRef=vb;Tr.Fragment=db;Tr.Lazy=wb;Tr.Memo=bb;Tr.Portal=Jk;Tr.Profiler=mb;Tr.StrictMode=pb;Tr.Suspense=xb;Tr.isAsyncMode=function(e){return LL(e)||ns(e)===Qk};Tr.isConcurrentMode=LL;Tr.isContextConsumer=function(e){return ns(e)===yb};Tr.isContextProvider=function(e){return ns(e)===gb};Tr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yk};Tr.isForwardRef=function(e){return ns(e)===vb};Tr.isFragment=function(e){return ns(e)===db};Tr.isLazy=function(e){return ns(e)===wb};Tr.isMemo=function(e){return ns(e)===bb};Tr.isPortal=function(e){return ns(e)===Jk};Tr.isProfiler=function(e){return ns(e)===mb};Tr.isStrictMode=function(e){return ns(e)===pb};Tr.isSuspense=function(e){return ns(e)===xb};Tr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===db||e===_b||e===mb||e===pb||e===xb||e===Bq||typeof e=="object"&&e!==null&&(e.$$typeof===wb||e.$$typeof===bb||e.$$typeof===gb||e.$$typeof===yb||e.$$typeof===vb||e.$$typeof===Nq||e.$$typeof===Uq||e.$$typeof===jq||e.$$typeof===$q)};Tr.typeOf=ns;ML.exports=Tr;var Vq=ML.exports,OL=Vq,qq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FL={};FL[OL.ForwardRef]=qq;FL[OL.Memo]=Gq;var m2=1073741823,f5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function Hq(){var e="__global_unique_id__";return f5[e]=(f5[e]||0)+1}function Wq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zq(e){var t=[];return{on:function(r){t.push(r)},off:function(r){t=t.filter(function(a){return a!==r})},get:function(){return e},set:function(r,a){e=r,t.forEach(function(c){return c(e,a)})}}}function Kq(e){return Array.isArray(e)?e[0]:e}function Xq(e,t){var n,r,a="__create-react-context-"+Hq()+"__",c=function(l){Is(x,l);function x(){for(var E,A=arguments.length,L=new Array(A),F=0;F<A;F++)L[F]=arguments[F];return E=l.call.apply(l,[this].concat(L))||this,E.emitter=Zq(E.props.value),E}var b=x.prototype;return b.getChildContext=function(){var A;return A={},A[a]=this.emitter,A},b.componentWillReceiveProps=function(A){if(this.props.value!==A.value){var L=this.props.value,F=A.value,$;Wq(L,F)?$=0:($=typeof t=="function"?t(L,F):m2,$|=0,$!==0&&this.emitter.set(A.value,$))}},b.render=function(){return this.props.children},x}(sn.Component);c.childContextTypes=(n={},n[a]=En.object.isRequired,n);var d=function(l){Is(x,l);function x(){for(var E,A=arguments.length,L=new Array(A),F=0;F<A;F++)L[F]=arguments[F];return E=l.call.apply(l,[this].concat(L))||this,E.observedBits=void 0,E.state={value:E.getValue()},E.onUpdate=function($,N){var Z=E.observedBits|0;Z&N&&E.setState({value:E.getValue()})},E}var b=x.prototype;return b.componentWillReceiveProps=function(A){var L=A.observedBits;this.observedBits=L??m2},b.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var A=this.props.observedBits;this.observedBits=A??m2},b.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},b.getValue=function(){return this.context[a]?this.context[a].get():e},b.render=function(){return Kq(this.props.children)(this.state.value)},x}(sn.Component);return d.contextTypes=(r={},r[a]=En.object,r),{Provider:c,Consumer:d}}var Yq=sn.createContext||Xq,RL=function(t){var n=Yq();return n.displayName=t,n},Jq=RL("Router-History"),Jp=RL("Router"),Sb=function(e){Is(t,e),t.computeRootMatch=function(a){return{path:"/",url:"/",params:{},isExact:a==="/"}};function t(r){var a;return a=e.call(this,r)||this,a.state={location:r.history.location},a._isMounted=!1,a._pendingLocation=null,r.staticContext||(a.unlisten=r.history.listen(function(c){a._pendingLocation=c})),a}var n=t.prototype;return n.componentDidMount=function(){var a=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(c){a._isMounted&&a.setState({location:c})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return sn.createElement(Jp.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},sn.createElement(Jq.Provider,{children:this.props.children||null,value:this.props.history}))},t}(sn.Component);sn.Component;sn.Component;var d5={},Qq=1e4,p5=0;function eG(e,t){var n=""+t.end+t.strict+t.sensitive,r=d5[n]||(d5[n]={});if(r[e])return r[e];var a=[],c=Lq(e,a,t),d={regexp:c,keys:a};return p5<Qq&&(r[e]=d,p5++),d}function e3(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,c=a===void 0?!1:a,d=n.strict,l=d===void 0?!1:d,x=n.sensitive,b=x===void 0?!1:x,E=[].concat(r);return E.reduce(function(A,L){if(!L&&L!=="")return null;if(A)return A;var F=eG(L,{end:c,strict:l,sensitive:b}),$=F.regexp,N=F.keys,Z=$.exec(e);if(!Z)return null;var R=Z[0],q=Z.slice(1),G=e===R;return c&&!G?null:{path:L,url:L==="/"&&R===""?"/":R,isExact:G,params:N.reduce(function(ee,ae,K){return ee[ae.name]=q[K],ee},{})}},null)}function tG(e){return sn.Children.count(e)===0}sn.Component;function t3(e){return e.charAt(0)==="/"?e:"/"+e}function nG(e,t){return e?Io({},t,{pathname:t3(e)+t.pathname}):t}function rG(e,t){if(!e)return t;var n=t3(e);return t.pathname.indexOf(n)!==0?t:Io({},t,{pathname:t.pathname.substr(n.length)})}function m5(e){return typeof e=="string"?e:ka(e)}function g2(e){return function(){id(!1)}}function g5(){}sn.Component;sn.Component;sn.useContext;var DL=function(e){Is(t,e);function t(){for(var r,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=e.call.apply(e,[this].concat(c))||this,r.history=EL(r.props),r}var n=t.prototype;return n.render=function(){return sn.createElement(Sb,{history:this.history,children:this.props.children})},t}(sn.Component);sn.Component;var gC=function(t,n){return typeof t=="function"?t(n):t},yC=function(t,n){return typeof t=="string"?Ka(t,null,null,n):t},n3=function(t){return t},Qp=sn.forwardRef;typeof Qp>"u"&&(Qp=n3);function iG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var oG=Qp(function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,c=od(e,["innerRef","navigate","onClick"]),d=c.target,l=Io({},c,{onClick:function(b){try{a&&a(b)}catch(E){throw b.preventDefault(),E}!b.defaultPrevented&&b.button===0&&(!d||d==="_self")&&!iG(b)&&(b.preventDefault(),r())}});return n3!==Qp?l.ref=t||n:l.ref=n,sn.createElement("a",l)}),aG=Qp(function(e,t){var n=e.component,r=n===void 0?oG:n,a=e.replace,c=e.to,d=e.innerRef,l=od(e,["component","replace","to","innerRef"]);return sn.createElement(Jp.Consumer,null,function(x){x||id(!1);var b=x.history,E=yC(gC(c,x.location),x.location),A=E?b.createHref(E):"",L=Io({},l,{href:A,navigate:function(){var $=gC(c,x.location),N=ka(x.location)===ka(yC($)),Z=a||N?b.replace:b.push;Z($)}});return n3!==Qp?L.ref=t||d:L.innerRef=d,sn.createElement(r,L)})}),zL=function(t){return t},G1=sn.forwardRef;typeof G1>"u"&&(G1=zL);function sG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(r){return r}).join(" ")}G1(function(e,t){var n=e["aria-current"],r=n===void 0?"page":n,a=e.activeClassName,c=a===void 0?"active":a,d=e.activeStyle,l=e.className,x=e.exact,b=e.isActive,E=e.location,A=e.sensitive,L=e.strict,F=e.style,$=e.to,N=e.innerRef,Z=od(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return sn.createElement(Jp.Consumer,null,function(R){R||id(!1);var q=E||R.location,G=yC(gC($,q),q),ee=G.pathname,ae=ee&&ee.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),K=ae?e3(q.pathname,{path:ae,exact:x,sensitive:A,strict:L}):null,le=!!(b?b(K,q):K),xe=typeof l=="function"?l(le):l,Le=typeof F=="function"?F(le):F;le&&(xe=sG(xe,c),Le=Io({},Le,d));var Oe=Io({"aria-current":le&&r||null,className:xe,style:Le,to:G},Z);return zL!==G1?Oe.ref=t||N:Oe.innerRef=N,sn.createElement(aG,Oe)})});var r3=function(){};function BL(e){try{return e.apply(this,[].slice.call(arguments,1))}catch(t){return t=t instanceof Error?t:new Error(t),setTimeout(function(){throw t}),t}}function Jy(e){return typeof e=="string"}function H1(e){return typeof e=="object"&&e!==null}function Qy(e){return typeof e=="function"}function $L(e){return Qy(e)&&"types"in e}function NL(e){return Qy(e)&&"type"in e}function lG(e){return H1(e)&&Jy(e.type)&&"payload"in e}function uG(e,t,n){var r=e.get(t);r===void 0&&e.set(t,r=new Set),r.add(n)}function cG(e,t,n){var r=e.get(t);r!==void 0&&(r.delete(n),r.size===0&&e.delete(t))}function y2(e,t){e.includes(t)||e.push(t)}function Zu(e,t){return Object.assign(new Error("Reatom: "+e),{data:t})}function i3(e){return{atom:e,cause:"init",ctx:{},state:void 0,tracks:void 0}}function hG(e,t){var n=t===void 0?{}:t,r=n.patch,a=r===void 0?new Map:r,c=n.getCache,d=c===void 0?function(F,$){return $??i3(F)}:c,l=n.effects,x=l===void 0?[]:l,b=n.causes,E=b===void 0?[]:b;E=E.concat({actions:e,patch:a});var A=e.map(function(F){return F.type}).join(", "),L={actions:e,getCache:d,process:function(F,$){var N=a.get(F);if(N==null){$=d(F,$);var Z=(N=F(L,$)).cause,R=N.state,q=N.listeners;a.set(F,N),Object.is(R,$.state)?N.cause=$.cause:(q==null?void 0:q.size)>0&&L.schedule(function(G,ee){return q.forEach(function(ae){return BL(ae,R,ee)})},Z)}return N},schedule:function(F,$){$===void 0&&($=A);var N=E.concat([$]);x.push(function(Z){return F(function(R){return Z(R,N)},N)})}};return L}function y5(e,t){return t===void 0&&(t=o3),t.getState(e)}var fG=0;function b_(e,t,n){n===void 0&&(n={});var r=Jy(n)?{id:n}:n,a=r.decorators,c=a===void 0?[]:a,d=r.id,l=d===void 0?"atom"+ ++fG:d,x=r.store,b=x===void 0?o3:x,E=[],A=[],L={},F={};if(!Qy(t)||!Jy(l))throw Zu("Atom arguments");Object.entries(e).forEach(function(Z){var R=Z[0],q=Z[1];if(!Qy(q))throw Zu("Invalid atom dependencies (type "+typeof q+") at "+R,q);if($L(q))q.types.forEach(function(ae){return y2(A,ae)});else{var G;if(NL(q))F[R]=G=q.type;else{var ee=function(){return{payload:q.apply(void 0,[].slice.call(arguments)),type:G,targets:[N]}};ee.type=G=R+"_"+l,ee.dispatch=function(){return b.dispatch(ee.apply(void 0,[].slice.call(arguments)))},L[R]=ee,R[0]!="_"&&(N[R]=ee)}y2(E,G),y2(A,G)}});var $=c.reduce(function(Z,R){return R(Z)},function(Z,R,q,G,ee){var ae=function(K){return G[K].apply(G,[].slice.call(arguments,1))};return function(K,le){var xe,Le=K.actions,Oe=K.process,Fe=K.schedule,Ge=le.atom,tt=le.ctx,yt=le.state,At=le.listeners,zt=[],Vt=r3,Ve=function(X,oe){Vt();var lt=Oe(X,oe);return xe==null&&zt.every(function(mt){return mt.atom.id!=X.id})&&zt.push(lt),lt},_e={create:ae,get:function(X){return Ve(R[X]).state},getUnlistedState:function(X){return Vt(),Oe(X).state},onAction:function(X,oe){var lt,mt;if(Vt(),xe!=null)throw Zu("Can not react to action inside another reaction");var Gt=(lt=ee[X])!=null?lt:(mt=G[X])==null?void 0:mt.type;if(Gt==null)throw Zu("Unknown action",{name:X});Le.forEach(function(Dt){Gt==Dt.type&&(xe=X,X!=Gt&&(xe+=" ("+Gt+")"),xe+=" handler",oe(Dt.payload),xe=void 0)})},onChange:function(X,oe){var lt;if(Vt(),xe!=null)throw Zu("Can not react to atom changes inside another reaction");var mt=R[X],Gt=(lt=le.tracks)==null?void 0:lt.find(function(Qt){return Qt.atom.id==mt.id}),Dt=Ve(mt,Gt);Gt!=null&&Object.is(Gt.state,Dt.state)||(xe=X,X!=Ge.id&&(xe+=" ("+Ge.id+")"),xe+=" handler",oe(Dt.state,Gt==null?void 0:Gt.state),xe=void 0)},onInit:function(X){le.tracks==null&&X()},schedule:function(X){Vt(),Fe(function(oe,lt){return X(oe,tt,lt)},xe)}},we="init";return(le.tracks==null||Le.some(function(X){var oe=X.type;return q.includes(oe)&&(we=oe+" action",!0)})||le.tracks.some(function(X){return!Object.is(X.state,Ve(X.atom,X).state)&&(we=X.atom.id+" atom",!0)}))&&(zt.length=0,yt=Z(_e,yt)),Vt=function(){throw Zu("Outdated track call")},{atom:Ge,cause:we,ctx:tt,state:yt,tracks:zt,listeners:At}}}(t,e,E,L,F));function N(Z,R){return R===void 0&&(R=i3(N)),$(Z,R)}return N.id=l,N.getState=function(){return b.getState(N)},N.subscribe=function(Z){return b.subscribe(N,Z)},N.types=A,N}var dG=Symbol();function UL(e){var t=e===void 0?{}:e,n=t.callSafety,r=n===void 0?BL:n,a=t.createTemplateCache,c=a===void 0?i3:a,d=t.onError,l=t.onPatch,x=t.now,b=x===void 0?Date.now.bind(Date):x,E=new Map,A=new WeakMap,L=[],F=[];function $(R){if(!$L(R))throw Zu("passed thing is not an atom");(function(q,G){var ee,ae=G(q);if(ae.tracks===void 0)return!1;if(((ee=ae.listeners)==null?void 0:ee.size)>0)return!0;for(var K=[ae.tracks];K.length>0;)for(var le=K.pop(),xe=0;xe<le.length;xe++){var Le=le[xe];if(Le!=G(Le.atom))return!1;K.push(Le.tracks)}return!0})(R,Z.getCache)||Z.dispatch({type:"invalidate "+R.id+" [~"+Math.random()+"]",payload:null,targets:[R]})}d&&L.push(d),l&&F.push(l);var N=function(R,q){var G,ee;return(G=(ee=A.get(R))!=null?ee:q)!=null?G:c(R)},Z={dispatch:function R(q,G){var ee=b(),ae=Array.isArray(q)?q:[q];if(ae.length==0||!ae.every(lG))throw Zu("dispatch arguments");var K=new Map,le=[],xe=hG(ae,{patch:K,getCache:N,effects:le,causes:G}),Le=function(){return{actions:ae,patch:K,causes:G??[],start:ee,end:b()}};try{ae.forEach(function(Ge){var tt,yt=Ge.type,At=Ge.targets;At==null||At.forEach(function(zt){return xe.process(zt)}),(tt=E.get(yt))==null||tt.forEach(function(zt){return xe.process(zt)})}),K.forEach(function(Ge,tt){return A.set(tt,Ge)})}catch(Ge){var Oe=Le();throw L.forEach(function(tt){return tt(Ge,Oe)}),Ge}var Fe=Le();F.forEach(function(Ge){return Ge(Fe)}),le.forEach(function(Ge){return r(Ge,R)})},getCache:N,getState:function(R){return $(R),N(R).state},onError:function(R){return L.push(R),function(){return L=L.filter(function(q){return q!==R})}},onPatch:function(R){return F.push(R),function(){return F=F.filter(function(q){return q!==R})}},subscribe:function(R,q){var G;if(!Qy(q))throw Zu("subscribe callback is not a function");$(R);var ee=N(R),ae=(G=ee.listeners)!=null?G:ee.listeners=new Set;ae.size==0&&R.types.forEach(function(xe){return uG(E,xe,R)});var K=dG,le=function(xe,Le){var Oe=A.get(R);Object.is(K,Oe.state)||q(K=xe,Le)};return ae.add(le),r(q,ee.state,[]),function(){ae.delete(le),ae.size==0&&R.types.forEach(function(xe){return cG(E,xe,R)})}}};return Z}var o3=UL(),jL=sn.createContext(o3),pG=function(e){return e()};function VL(e,t){return function(){var n=t.apply(void 0,[].slice.call(arguments));n&&pG(function(){e.dispatch(n)})}}function _C(e,t){t===void 0&&(t=[]);var n=sn.useContext(jL);return sn.useCallback(VL(n,e),t.concat(n))}function _5(e,t,n){var r=e;typeof t=="function"?(n!=null||(n=[]),e=sn.useMemo(function(){return b_({origin:r},function(E){return t((0,E.get)("origin"))})},n.concat(r))):n=t??[];var a=sn.useContext(jL);n=n.concat([e,a]);var c=sn.useState(function(){return y5(e,a)}),d=c[0],l=c[1],x=sn.useRef(d);x.current=d=y5(e,a);var b=sn.useMemo(function(){return Object.entries(r).reduce(function(E,A){var L=A[0],F=A[1];return NL(F)&&(E[L]=VL(a,F)),E},{})},n);return sn.useEffect(function(){return a.subscribe(e,function(E){return Object.is(E,x.current)||l(x.current=E)})},n),sn.useDebugValue(d),[d,b]}const v5=["http","https","mailto","tel"];function mG(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let a=-1;for(;++a<v5.length;){const c=v5[a];if(r===c.length&&t.slice(0,c.length).toLowerCase()===c)return t}return a=t.indexOf("?"),a!==-1&&r>a||(a=t.indexOf("#"),a!==-1&&r>a)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var gG=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const qL=ic(gG);function _y(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?x5(e.position):"start"in e||"end"in e?x5(e):"line"in e||"column"in e?vC(e):""}function vC(e){return b5(e&&e.line)+":"+b5(e&&e.column)}function x5(e){return vC(e&&e.start)+"-"+vC(e&&e.end)}function b5(e){return e&&typeof e=="number"?e:1}class Os extends Error{constructor(t,n,r){const a=[null,null];let c={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const d=r.indexOf(":");d===-1?a[1]=r:(a[0]=r.slice(0,d),a[1]=r.slice(d+1))}n&&("type"in n||"position"in n?n.position&&(c=n.position):"start"in n||"end"in n?c=n:("line"in n||"column"in n)&&(c.start=n)),this.name=_y(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=c.start.line,this.column=c.start.column,this.source=a[0],this.ruleId=a[1],this.position=c,this.actual,this.expected,this.file,this.url,this.note}}Os.prototype.file="";Os.prototype.name="";Os.prototype.reason="";Os.prototype.message="";Os.prototype.stack="";Os.prototype.fatal=null;Os.prototype.column=null;Os.prototype.line=null;Os.prototype.source=null;Os.prototype.ruleId=null;Os.prototype.position=null;const Jl={basename:yG,dirname:_G,extname:vG,join:xG,sep:"/"};function yG(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');w_(e);let n=0,r=-1,a=e.length,c;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else r<0&&(c=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let d=-1,l=t.length-1;for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else d<0&&(c=!0,d=a+1),l>-1&&(e.charCodeAt(a)===t.charCodeAt(l--)?l<0&&(r=a):(l=-1,r=d));return n===r?r=d:r<0&&(r=e.length),e.slice(n,r)}function _G(e){if(w_(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function vG(e){w_(e);let t=e.length,n=-1,r=0,a=-1,c=0,d;for(;t--;){const l=e.charCodeAt(t);if(l===47){if(d){r=t+1;break}continue}n<0&&(d=!0,n=t+1),l===46?a<0?a=t:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||n<0||c===0||c===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function xG(...e){let t=-1,n;for(;++t<e.length;)w_(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":bG(n)}function bG(e){w_(e);const t=e.charCodeAt(0)===47;let n=wG(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wG(e,t){let n="",r=0,a=-1,c=0,d=-1,l,x;for(;++d<=e.length;){if(d<e.length)l=e.charCodeAt(d);else{if(l===47)break;l=47}if(l===47){if(!(a===d-1||c===1))if(a!==d-1&&c===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(x=n.lastIndexOf("/"),x!==n.length-1){x<0?(n="",r=0):(n=n.slice(0,x),r=n.length-1-n.lastIndexOf("/")),a=d,c=0;continue}}else if(n.length>0){n="",r=0,a=d,c=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,d):n=e.slice(a+1,d),r=d-a-1;a=d,c=0}else l===46&&c>-1?c++:c=-1}return n}function w_(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const SG={cwd:CG};function CG(){return"/"}function xC(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function EG(e){if(typeof e=="string")e=new URL(e);else if(!xC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return kG(e)}function kG(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const _2=["history","path","basename","stem","extname","dirname"];class GL{constructor(t){let n;t?typeof t=="string"||qL(t)?n={value:t}:xC(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=SG.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<_2.length;){const c=_2[r];c in n&&n[c]!==void 0&&(this[c]=c==="history"?[...n[c]]:n[c])}let a;for(a in n)_2.includes(a)||(this[a]=n[a])}get path(){return this.history[this.history.length-1]}set path(t){xC(t)&&(t=EG(t)),x2(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Jl.dirname(this.path):void 0}set dirname(t){w5(this.basename,"dirname"),this.path=Jl.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Jl.basename(this.path):void 0}set basename(t){x2(t,"basename"),v2(t,"basename"),this.path=Jl.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Jl.extname(this.path):void 0}set extname(t){if(v2(t,"extname"),w5(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Jl.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Jl.basename(this.path,this.extname):void 0}set stem(t){x2(t,"stem"),v2(t,"stem"),this.path=Jl.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const a=new Os(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=null,a}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}}function v2(e,t){if(e&&e.includes(Jl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Jl.sep+"`")}function x2(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function w5(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function S5(e){if(e)throw e}var t1=Object.prototype.hasOwnProperty,HL=Object.prototype.toString,C5=Object.defineProperty,E5=Object.getOwnPropertyDescriptor,k5=function(t){return typeof Array.isArray=="function"?Array.isArray(t):HL.call(t)==="[object Array]"},A5=function(t){if(!t||HL.call(t)!=="[object Object]")return!1;var n=t1.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&t1.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||t1.call(t,a)},T5=function(t,n){C5&&n.name==="__proto__"?C5(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},P5=function(t,n){if(n==="__proto__")if(t1.call(t,n)){if(E5)return E5(t,n).value}else return;return t[n]},AG=function e(){var t,n,r,a,c,d,l=arguments[0],x=1,b=arguments.length,E=!1;for(typeof l=="boolean"&&(E=l,l=arguments[1]||{},x=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});x<b;++x)if(t=arguments[x],t!=null)for(n in t)r=P5(l,n),a=P5(t,n),l!==a&&(E&&a&&(A5(a)||(c=k5(a)))?(c?(c=!1,d=r&&k5(r)?r:[]):d=r&&A5(r)?r:{},T5(l,{name:n,newValue:e(E,d,a)})):typeof a<"u"&&T5(l,{name:n,newValue:a}));return l};const I5=ic(AG);function bC(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function TG(){const e=[],t={run:n,use:r};return t;function n(...a){let c=-1;const d=a.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);l(null,...a);function l(x,...b){const E=e[++c];let A=-1;if(x){d(x);return}for(;++A<a.length;)(b[A]===null||b[A]===void 0)&&(b[A]=a[A]);a=b,E?PG(E,l)(...b):d(null,...b)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function PG(e,t){let n;return r;function r(...d){const l=e.length>d.length;let x;l&&d.push(a);try{x=e.apply(this,d)}catch(b){const E=b;if(l&&n)throw E;return a(E)}l||(x instanceof Promise?x.then(c,a):x instanceof Error?a(x):c(x))}function a(d,...l){n||(n=!0,t(d,...l))}function c(d){a(null,d)}}const IG=ZL().freeze(),WL={}.hasOwnProperty;function ZL(){const e=TG(),t=[];let n={},r,a=-1;return c.data=d,c.Parser=void 0,c.Compiler=void 0,c.freeze=l,c.attachers=t,c.use=x,c.parse=b,c.stringify=E,c.run=A,c.runSync=L,c.process=F,c.processSync=$,c;function c(){const N=ZL();let Z=-1;for(;++Z<t.length;)N.use(...t[Z]);return N.data(I5(!0,{},n)),N}function d(N,Z){return typeof N=="string"?arguments.length===2?(S2("data",r),n[N]=Z,c):WL.call(n,N)&&n[N]||null:N?(S2("data",r),n=N,c):n}function l(){if(r)return c;for(;++a<t.length;){const[N,...Z]=t[a];if(Z[0]===!1)continue;Z[0]===!0&&(Z[0]=void 0);const R=N.call(c,...Z);typeof R=="function"&&e.use(R)}return r=!0,a=Number.POSITIVE_INFINITY,c}function x(N,...Z){let R;if(S2("use",r),N!=null)if(typeof N=="function")ae(N,...Z);else if(typeof N=="object")Array.isArray(N)?ee(N):G(N);else throw new TypeError("Expected usable value, not `"+N+"`");return R&&(n.settings=Object.assign(n.settings||{},R)),c;function q(K){if(typeof K=="function")ae(K);else if(typeof K=="object")if(Array.isArray(K)){const[le,...xe]=K;ae(le,...xe)}else G(K);else throw new TypeError("Expected usable value, not `"+K+"`")}function G(K){ee(K.plugins),K.settings&&(R=Object.assign(R||{},K.settings))}function ee(K){let le=-1;if(K!=null)if(Array.isArray(K))for(;++le<K.length;){const xe=K[le];q(xe)}else throw new TypeError("Expected a list of plugins, not `"+K+"`")}function ae(K,le){let xe=-1,Le;for(;++xe<t.length;)if(t[xe][0]===K){Le=t[xe];break}Le?(bC(Le[1])&&bC(le)&&(le=I5(!0,Le[1],le)),Le[1]=le):t.push([...arguments])}}function b(N){c.freeze();const Z=Ug(N),R=c.Parser;return b2("parse",R),M5(R,"parse")?new R(String(Z),Z).parse():R(String(Z),Z)}function E(N,Z){c.freeze();const R=Ug(Z),q=c.Compiler;return w2("stringify",q),L5(N),M5(q,"compile")?new q(N,R).compile():q(N,R)}function A(N,Z,R){if(L5(N),c.freeze(),!R&&typeof Z=="function"&&(R=Z,Z=void 0),!R)return new Promise(q);q(null,R);function q(G,ee){e.run(N,Ug(Z),ae);function ae(K,le,xe){le=le||N,K?ee(K):G?G(le):R(null,le,xe)}}}function L(N,Z){let R,q;return c.run(N,Z,G),O5("runSync","run",q),R;function G(ee,ae){S5(ee),R=ae,q=!0}}function F(N,Z){if(c.freeze(),b2("process",c.Parser),w2("process",c.Compiler),!Z)return new Promise(R);R(null,Z);function R(q,G){const ee=Ug(N);c.run(c.parse(ee),ee,(K,le,xe)=>{if(K||!le||!xe)ae(K);else{const Le=c.stringify(le,xe);Le==null||(OG(Le)?xe.value=Le:xe.result=Le),ae(K,xe)}});function ae(K,le){K||!le?G(K):q?q(le):Z(null,le)}}}function $(N){let Z;c.freeze(),b2("processSync",c.Parser),w2("processSync",c.Compiler);const R=Ug(N);return c.process(R,q),O5("processSync","process",Z),R;function q(G){Z=!0,S5(G)}}}function M5(e,t){return typeof e=="function"&&e.prototype&&(MG(e.prototype)||t in e.prototype)}function MG(e){let t;for(t in e)if(WL.call(e,t))return!0;return!1}function b2(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function w2(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function S2(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function L5(e){if(!bC(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function O5(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ug(e){return LG(e)?e:new GL(e)}function LG(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function OG(e){return typeof e=="string"||qL(e)}function FG(e,t){var{includeImageAlt:n=!0}=t||{};return KL(e,n)}function KL(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&F5(e.children,t)||Array.isArray(e)&&F5(e,t))||""}function F5(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=KL(e[r],t);return n.join("")}function au(e,t,n,r){const a=e.length;let c=0,d;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)d=Array.from(r),d.unshift(t,n),[].splice.apply(e,d);else for(n&&[].splice.apply(e,[t,n]);c<r.length;)d=r.slice(c,c+1e4),d.unshift(t,0),[].splice.apply(e,d),c+=1e4,t+=1e4}function ws(e,t){return e.length>0?(au(e,e.length,0,t),e):t}const R5={}.hasOwnProperty;function RG(e){const t={};let n=-1;for(;++n<e.length;)DG(t,e[n]);return t}function DG(e,t){let n;for(n in t){const a=(R5.call(e,n)?e[n]:void 0)||(e[n]={}),c=t[n];let d;for(d in c){R5.call(a,d)||(a[d]=[]);const l=c[d];zG(a[d],Array.isArray(l)?l:l?[l]:[])}}}function zG(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);au(e,0,0,r)}const BG=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,eu=Bh(/[A-Za-z]/),wC=Bh(/\d/),$G=Bh(/[\dA-Fa-f]/),Xa=Bh(/[\dA-Za-z]/),NG=Bh(/[!-/:-@[-`{-~]/),D5=Bh(/[#-'*+\--9=?A-Z^-~]/);function SC(e){return e!==null&&(e<32||e===127)}function ks(e){return e!==null&&(e<0||e===32)}function An(e){return e!==null&&e<-2}function Vi(e){return e===-2||e===-1||e===32}const UG=Bh(/\s/),jG=Bh(BG);function Bh(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Rr(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let c=0;return d;function d(x){return Vi(x)?(e.enter(n),l(x)):t(x)}function l(x){return Vi(x)&&c++<a?(e.consume(x),l):(e.exit(n),t(x))}}const VG={tokenize:qG};function qG(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Rr(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),c(l)}function c(l){const x=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=x),n=x,d(l)}function d(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return An(l)?(e.consume(l),e.exit("chunkText"),c):(e.consume(l),d)}}const GG={tokenize:HG},z5={tokenize:WG};function HG(e){const t=this,n=[];let r=0,a,c,d;return l;function l(G){if(r<n.length){const ee=n[r];return t.containerState=ee[1],e.attempt(ee[0].continuation,x,b)(G)}return b(G)}function x(G){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&q();const ee=t.events.length;let ae=ee,K;for(;ae--;)if(t.events[ae][0]==="exit"&&t.events[ae][1].type==="chunkFlow"){K=t.events[ae][1].end;break}R(r);let le=ee;for(;le<t.events.length;)t.events[le][1].end=Object.assign({},K),le++;return au(t.events,ae+1,0,t.events.slice(ee)),t.events.length=le,b(G)}return l(G)}function b(G){if(r===n.length){if(!a)return L(G);if(a.currentConstruct&&a.currentConstruct.concrete)return $(G);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(z5,E,A)(G)}function E(G){return a&&q(),R(r),L(G)}function A(G){return t.parser.lazy[t.now().line]=r!==n.length,d=t.now().offset,$(G)}function L(G){return t.containerState={},e.attempt(z5,F,$)(G)}function F(G){return r++,n.push([t.currentConstruct,t.containerState]),L(G)}function $(G){if(G===null){a&&q(),R(0),e.consume(G);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),N(G)}function N(G){if(G===null){Z(e.exit("chunkFlow"),!0),R(0),e.consume(G);return}return An(G)?(e.consume(G),Z(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(G),N)}function Z(G,ee){const ae=t.sliceStream(G);if(ee&&ae.push(null),G.previous=c,c&&(c.next=G),c=G,a.defineSkip(G.start),a.write(ae),t.parser.lazy[G.start.line]){let K=a.events.length;for(;K--;)if(a.events[K][1].start.offset<d&&(!a.events[K][1].end||a.events[K][1].end.offset>d))return;const le=t.events.length;let xe=le,Le,Oe;for(;xe--;)if(t.events[xe][0]==="exit"&&t.events[xe][1].type==="chunkFlow"){if(Le){Oe=t.events[xe][1].end;break}Le=!0}for(R(r),K=le;K<t.events.length;)t.events[K][1].end=Object.assign({},Oe),K++;au(t.events,xe+1,0,t.events.slice(le)),t.events.length=K}}function R(G){let ee=n.length;for(;ee-- >G;){const ae=n[ee];t.containerState=ae[1],ae[0].exit.call(t,e)}n.length=G}function q(){a.write([null]),c=void 0,a=void 0,t.containerState._closeFlow=void 0}}function WG(e,t,n){return Rr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function B5(e){if(e===null||ks(e)||UG(e))return 1;if(jG(e))return 2}function a3(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const c=e[a].resolveAll;c&&!r.includes(c)&&(t=c(t,n),r.push(c))}return t}const CC={name:"attention",tokenize:KG,resolveAll:ZG};function ZG(e,t){let n=-1,r,a,c,d,l,x,b,E;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;x=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const A=Object.assign({},e[r][1].end),L=Object.assign({},e[n][1].start);$5(A,-x),$5(L,x),d={type:x>1?"strongSequence":"emphasisSequence",start:A,end:Object.assign({},e[r][1].end)},l={type:x>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:L},c={type:x>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a={type:x>1?"strong":"emphasis",start:Object.assign({},d.start),end:Object.assign({},l.end)},e[r][1].end=Object.assign({},d.start),e[n][1].start=Object.assign({},l.end),b=[],e[r][1].end.offset-e[r][1].start.offset&&(b=ws(b,[["enter",e[r][1],t],["exit",e[r][1],t]])),b=ws(b,[["enter",a,t],["enter",d,t],["exit",d,t],["enter",c,t]]),b=ws(b,a3(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),b=ws(b,[["exit",c,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(E=2,b=ws(b,[["enter",e[n][1],t],["exit",e[n][1],t]])):E=0,au(e,r-1,n-r+3,b),n=r+b.length-E-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function KG(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=B5(r);let c;return d;function d(x){return e.enter("attentionSequence"),c=x,l(x)}function l(x){if(x===c)return e.consume(x),l;const b=e.exit("attentionSequence"),E=B5(x),A=!E||E===2&&a||n.includes(x),L=!a||a===2&&E||n.includes(r);return b._open=!!(c===42?A:A&&(a||!L)),b._close=!!(c===42?L:L&&(E||!A)),t(x)}}function $5(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const XG={name:"autolink",tokenize:YG};function YG(e,t,n){let r=1;return a;function a($){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume($),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),c}function c($){return eu($)?(e.consume($),d):D5($)?b($):n($)}function d($){return $===43||$===45||$===46||Xa($)?l($):b($)}function l($){return $===58?(e.consume($),x):($===43||$===45||$===46||Xa($))&&r++<32?(e.consume($),l):b($)}function x($){return $===62?(e.exit("autolinkProtocol"),F($)):$===null||$===32||$===60||SC($)?n($):(e.consume($),x)}function b($){return $===64?(e.consume($),r=0,E):D5($)?(e.consume($),b):n($)}function E($){return Xa($)?A($):n($)}function A($){return $===46?(e.consume($),r=0,E):$===62?(e.exit("autolinkProtocol").type="autolinkEmail",F($)):L($)}function L($){return($===45||Xa($))&&r++<63?(e.consume($),$===45?L:A):n($)}function F($){return e.enter("autolinkMarker"),e.consume($),e.exit("autolinkMarker"),e.exit("autolink"),t}}const Cb={tokenize:JG,partial:!0};function JG(e,t,n){return Rr(e,r,"linePrefix");function r(a){return a===null||An(a)?t(a):n(a)}}const XL={name:"blockQuote",tokenize:QG,continuation:{tokenize:eH},exit:tH};function QG(e,t,n){const r=this;return a;function a(d){if(d===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(d),e.exit("blockQuoteMarker"),c}return n(d)}function c(d){return Vi(d)?(e.enter("blockQuotePrefixWhitespace"),e.consume(d),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(d))}}function eH(e,t,n){return Rr(e,e.attempt(XL,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tH(e){e.exit("blockQuote")}const YL={name:"characterEscape",tokenize:nH};function nH(e,t,n){return r;function r(c){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(c),e.exit("escapeMarker"),a}function a(c){return NG(c)?(e.enter("characterEscapeValue"),e.consume(c),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(c)}}const N5=document.createElement("i");function s3(e){const t="&"+e+";";N5.innerHTML=t;const n=N5.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const JL={name:"characterReference",tokenize:rH};function rH(e,t,n){const r=this;let a=0,c,d;return l;function l(A){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),x}function x(A){return A===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(A),e.exit("characterReferenceMarkerNumeric"),b):(e.enter("characterReferenceValue"),c=31,d=Xa,E(A))}function b(A){return A===88||A===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(A),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),c=6,d=$G,E):(e.enter("characterReferenceValue"),c=7,d=wC,E(A))}function E(A){let L;return A===59&&a?(L=e.exit("characterReferenceValue"),d===Xa&&!s3(r.sliceSerialize(L))?n(A):(e.enter("characterReferenceMarker"),e.consume(A),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):d(A)&&a++<c?(e.consume(A),E):n(A)}}const U5={name:"codeFenced",tokenize:iH,concrete:!0};function iH(e,t,n){const r=this,a={tokenize:ae,partial:!0},c={tokenize:ee,partial:!0},d=this.events[this.events.length-1],l=d&&d[1].type==="linePrefix"?d[2].sliceSerialize(d[1],!0).length:0;let x=0,b;return E;function E(K){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),b=K,A(K)}function A(K){return K===b?(e.consume(K),x++,A):(e.exit("codeFencedFenceSequence"),x<3?n(K):Rr(e,L,"whitespace")(K))}function L(K){return K===null||An(K)?Z(K):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),F(K))}function F(K){return K===null||ks(K)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Rr(e,$,"whitespace")(K)):K===96&&K===b?n(K):(e.consume(K),F)}function $(K){return K===null||An(K)?Z(K):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),N(K))}function N(K){return K===null||An(K)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),Z(K)):K===96&&K===b?n(K):(e.consume(K),N)}function Z(K){return e.exit("codeFencedFence"),r.interrupt?t(K):R(K)}function R(K){return K===null?G(K):An(K)?e.attempt(c,e.attempt(a,G,l?Rr(e,R,"linePrefix",l+1):R),G)(K):(e.enter("codeFlowValue"),q(K))}function q(K){return K===null||An(K)?(e.exit("codeFlowValue"),R(K)):(e.consume(K),q)}function G(K){return e.exit("codeFenced"),t(K)}function ee(K,le,xe){const Le=this;return Oe;function Oe(Ge){return K.enter("lineEnding"),K.consume(Ge),K.exit("lineEnding"),Fe}function Fe(Ge){return Le.parser.lazy[Le.now().line]?xe(Ge):le(Ge)}}function ae(K,le,xe){let Le=0;return Rr(K,Oe,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function Oe(tt){return K.enter("codeFencedFence"),K.enter("codeFencedFenceSequence"),Fe(tt)}function Fe(tt){return tt===b?(K.consume(tt),Le++,Fe):Le<x?xe(tt):(K.exit("codeFencedFenceSequence"),Rr(K,Ge,"whitespace")(tt))}function Ge(tt){return tt===null||An(tt)?(K.exit("codeFencedFence"),le(tt)):xe(tt)}}}const C2={name:"codeIndented",tokenize:aH},oH={tokenize:sH,partial:!0};function aH(e,t,n){const r=this;return a;function a(b){return e.enter("codeIndented"),Rr(e,c,"linePrefix",4+1)(b)}function c(b){const E=r.events[r.events.length-1];return E&&E[1].type==="linePrefix"&&E[2].sliceSerialize(E[1],!0).length>=4?d(b):n(b)}function d(b){return b===null?x(b):An(b)?e.attempt(oH,d,x)(b):(e.enter("codeFlowValue"),l(b))}function l(b){return b===null||An(b)?(e.exit("codeFlowValue"),d(b)):(e.consume(b),l)}function x(b){return e.exit("codeIndented"),t(b)}}function sH(e,t,n){const r=this;return a;function a(d){return r.parser.lazy[r.now().line]?n(d):An(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),a):Rr(e,c,"linePrefix",4+1)(d)}function c(d){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(d):An(d)?a(d):n(d)}}const lH={name:"codeText",tokenize:hH,resolve:uH,previous:cH};function uH(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function cH(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function hH(e,t,n){let r=0,a,c;return d;function d(A){return e.enter("codeText"),e.enter("codeTextSequence"),l(A)}function l(A){return A===96?(e.consume(A),r++,l):(e.exit("codeTextSequence"),x(A))}function x(A){return A===null?n(A):A===96?(c=e.enter("codeTextSequence"),a=0,E(A)):A===32?(e.enter("space"),e.consume(A),e.exit("space"),x):An(A)?(e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),x):(e.enter("codeTextData"),b(A))}function b(A){return A===null||A===32||A===96||An(A)?(e.exit("codeTextData"),x(A)):(e.consume(A),b)}function E(A){return A===96?(e.consume(A),a++,E):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(A)):(c.type="codeTextData",b(A))}}function QL(e){const t={};let n=-1,r,a,c,d,l,x,b;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(x=r[1]._tokenizer.events,c=0,c<x.length&&x[c][1].type==="lineEndingBlank"&&(c+=2),c<x.length&&x[c][1].type==="content"))for(;++c<x.length&&x[c][1].type!=="content";)x[c][1].type==="chunkText"&&(x[c][1]._isInFirstContentOfListItem=!0,c++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,fH(e,n)),n=t[n],b=!0);else if(r[1]._container){for(c=n,a=void 0;c--&&(d=e[c],d[1].type==="lineEnding"||d[1].type==="lineEndingBlank");)d[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),d[1].type="lineEnding",a=c);a&&(r[1].end=Object.assign({},e[a][1].start),l=e.slice(a,n),l.unshift(r),au(e,a,n-a+1,l))}}return!b}function fH(e,t){const n=e[t][1],r=e[t][2];let a=t-1;const c=[],d=n._tokenizer||r.parser[n.contentType](n.start),l=d.events,x=[],b={};let E,A,L=-1,F=n,$=0,N=0;const Z=[N];for(;F;){for(;e[++a][1]!==F;);c.push(a),F._tokenizer||(E=r.sliceStream(F),F.next||E.push(null),A&&d.defineSkip(F.start),F._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write(E),F._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),A=F,F=F.next}for(F=n;++L<l.length;)l[L][0]==="exit"&&l[L-1][0]==="enter"&&l[L][1].type===l[L-1][1].type&&l[L][1].start.line!==l[L][1].end.line&&(N=L+1,Z.push(N),F._tokenizer=void 0,F.previous=void 0,F=F.next);for(d.events=[],F?(F._tokenizer=void 0,F.previous=void 0):Z.pop(),L=Z.length;L--;){const R=l.slice(Z[L],Z[L+1]),q=c.pop();x.unshift([q,q+R.length-1]),au(e,q,2,R)}for(L=-1;++L<x.length;)b[$+x[L][0]]=$+x[L][1],$+=x[L][1]-x[L][0]-1;return b}const dH={tokenize:gH,resolve:mH},pH={tokenize:yH,partial:!0};function mH(e){return QL(e),e}function gH(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?c(l):An(l)?e.check(pH,d,c)(l):(e.consume(l),a)}function c(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function d(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function yH(e,t,n){const r=this;return a;function a(d){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Rr(e,c,"linePrefix")}function c(d){if(d===null||An(d))return n(d);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(d):e.interrupt(r.parser.constructs.flow,n,t)(d)}}function eO(e,t,n,r,a,c,d,l,x){const b=x||Number.POSITIVE_INFINITY;let E=0;return A;function A(R){return R===60?(e.enter(r),e.enter(a),e.enter(c),e.consume(R),e.exit(c),L):R===null||R===41||SC(R)?n(R):(e.enter(r),e.enter(d),e.enter(l),e.enter("chunkString",{contentType:"string"}),N(R))}function L(R){return R===62?(e.enter(c),e.consume(R),e.exit(c),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),F(R))}function F(R){return R===62?(e.exit("chunkString"),e.exit(l),L(R)):R===null||R===60||An(R)?n(R):(e.consume(R),R===92?$:F)}function $(R){return R===60||R===62||R===92?(e.consume(R),F):F(R)}function N(R){return R===40?++E>b?n(R):(e.consume(R),N):R===41?E--?(e.consume(R),N):(e.exit("chunkString"),e.exit(l),e.exit(d),e.exit(r),t(R)):R===null||ks(R)?E?n(R):(e.exit("chunkString"),e.exit(l),e.exit(d),e.exit(r),t(R)):SC(R)?n(R):(e.consume(R),R===92?Z:N)}function Z(R){return R===40||R===41||R===92?(e.consume(R),N):N(R)}}function tO(e,t,n,r,a,c){const d=this;let l=0,x;return b;function b(F){return e.enter(r),e.enter(a),e.consume(F),e.exit(a),e.enter(c),E}function E(F){return F===null||F===91||F===93&&!x||F===94&&!l&&"_hiddenFootnoteSupport"in d.parser.constructs||l>999?n(F):F===93?(e.exit(c),e.enter(a),e.consume(F),e.exit(a),e.exit(r),t):An(F)?(e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),E):(e.enter("chunkString",{contentType:"string"}),A(F))}function A(F){return F===null||F===91||F===93||An(F)||l++>999?(e.exit("chunkString"),E(F)):(e.consume(F),x=x||!Vi(F),F===92?L:A)}function L(F){return F===91||F===92||F===93?(e.consume(F),l++,A):A(F)}}function nO(e,t,n,r,a,c){let d;return l;function l(L){return e.enter(r),e.enter(a),e.consume(L),e.exit(a),d=L===40?41:L,x}function x(L){return L===d?(e.enter(a),e.consume(L),e.exit(a),e.exit(r),t):(e.enter(c),b(L))}function b(L){return L===d?(e.exit(c),x(d)):L===null?n(L):An(L)?(e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),Rr(e,b,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),E(L))}function E(L){return L===d||L===null||An(L)?(e.exit("chunkString"),b(L)):(e.consume(L),L===92?A:E)}function A(L){return L===d||L===92?(e.consume(L),E):E(L)}}function vy(e,t){let n;return r;function r(a){return An(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Vi(a)?Rr(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}function jp(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _H={name:"definition",tokenize:xH},vH={tokenize:bH,partial:!0};function xH(e,t,n){const r=this;let a;return c;function c(x){return e.enter("definition"),tO.call(r,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function d(x){return a=jp(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),vy(e,eO(e,e.attempt(vH,Rr(e,l,"whitespace"),Rr(e,l,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(x)}function l(x){return x===null||An(x)?(e.exit("definition"),r.parser.defined.includes(a)||r.parser.defined.push(a),t(x)):n(x)}}function bH(e,t,n){return r;function r(d){return ks(d)?vy(e,a)(d):n(d)}function a(d){return d===34||d===39||d===40?nO(e,Rr(e,c,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d):n(d)}function c(d){return d===null||An(d)?t(d):n(d)}}const wH={name:"hardBreakEscape",tokenize:SH};function SH(e,t,n){return r;function r(c){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(c),a}function a(c){return An(c)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(c)):n(c)}}const CH={name:"headingAtx",tokenize:kH,resolve:EH};function EH(e,t){let n=e.length-2,r=3,a,c;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},c={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},au(e,r,n-r+1,[["enter",a,t],["enter",c,t],["exit",c,t],["exit",a,t]])),e}function kH(e,t,n){const r=this;let a=0;return c;function c(E){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),d(E)}function d(E){return E===35&&a++<6?(e.consume(E),d):E===null||ks(E)?(e.exit("atxHeadingSequence"),r.interrupt?t(E):l(E)):n(E)}function l(E){return E===35?(e.enter("atxHeadingSequence"),x(E)):E===null||An(E)?(e.exit("atxHeading"),t(E)):Vi(E)?Rr(e,l,"whitespace")(E):(e.enter("atxHeadingText"),b(E))}function x(E){return E===35?(e.consume(E),x):(e.exit("atxHeadingSequence"),l(E))}function b(E){return E===null||E===35||ks(E)?(e.exit("atxHeadingText"),l(E)):(e.consume(E),b)}}const AH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],j5=["pre","script","style","textarea"],TH={name:"htmlFlow",tokenize:MH,resolveTo:IH,concrete:!0},PH={tokenize:LH,partial:!0};function IH(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function MH(e,t,n){const r=this;let a,c,d,l,x;return b;function b(oe){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(oe),E}function E(oe){return oe===33?(e.consume(oe),A):oe===47?(e.consume(oe),$):oe===63?(e.consume(oe),a=3,r.interrupt?t:_e):eu(oe)?(e.consume(oe),d=String.fromCharCode(oe),c=!0,N):n(oe)}function A(oe){return oe===45?(e.consume(oe),a=2,L):oe===91?(e.consume(oe),a=5,d="CDATA[",l=0,F):eu(oe)?(e.consume(oe),a=4,r.interrupt?t:_e):n(oe)}function L(oe){return oe===45?(e.consume(oe),r.interrupt?t:_e):n(oe)}function F(oe){return oe===d.charCodeAt(l++)?(e.consume(oe),l===d.length?r.interrupt?t:Fe:F):n(oe)}function $(oe){return eu(oe)?(e.consume(oe),d=String.fromCharCode(oe),N):n(oe)}function N(oe){return oe===null||oe===47||oe===62||ks(oe)?oe!==47&&c&&j5.includes(d.toLowerCase())?(a=1,r.interrupt?t(oe):Fe(oe)):AH.includes(d.toLowerCase())?(a=6,oe===47?(e.consume(oe),Z):r.interrupt?t(oe):Fe(oe)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(oe):c?q(oe):R(oe)):oe===45||Xa(oe)?(e.consume(oe),d+=String.fromCharCode(oe),N):n(oe)}function Z(oe){return oe===62?(e.consume(oe),r.interrupt?t:Fe):n(oe)}function R(oe){return Vi(oe)?(e.consume(oe),R):Le(oe)}function q(oe){return oe===47?(e.consume(oe),Le):oe===58||oe===95||eu(oe)?(e.consume(oe),G):Vi(oe)?(e.consume(oe),q):Le(oe)}function G(oe){return oe===45||oe===46||oe===58||oe===95||Xa(oe)?(e.consume(oe),G):ee(oe)}function ee(oe){return oe===61?(e.consume(oe),ae):Vi(oe)?(e.consume(oe),ee):q(oe)}function ae(oe){return oe===null||oe===60||oe===61||oe===62||oe===96?n(oe):oe===34||oe===39?(e.consume(oe),x=oe,K):Vi(oe)?(e.consume(oe),ae):(x=null,le(oe))}function K(oe){return oe===null||An(oe)?n(oe):oe===x?(e.consume(oe),xe):(e.consume(oe),K)}function le(oe){return oe===null||oe===34||oe===39||oe===60||oe===61||oe===62||oe===96||ks(oe)?ee(oe):(e.consume(oe),le)}function xe(oe){return oe===47||oe===62||Vi(oe)?q(oe):n(oe)}function Le(oe){return oe===62?(e.consume(oe),Oe):n(oe)}function Oe(oe){return Vi(oe)?(e.consume(oe),Oe):oe===null||An(oe)?Fe(oe):n(oe)}function Fe(oe){return oe===45&&a===2?(e.consume(oe),At):oe===60&&a===1?(e.consume(oe),zt):oe===62&&a===4?(e.consume(oe),we):oe===63&&a===3?(e.consume(oe),_e):oe===93&&a===5?(e.consume(oe),Ve):An(oe)&&(a===6||a===7)?e.check(PH,we,Ge)(oe):oe===null||An(oe)?Ge(oe):(e.consume(oe),Fe)}function Ge(oe){return e.exit("htmlFlowData"),tt(oe)}function tt(oe){return oe===null?X(oe):An(oe)?e.attempt({tokenize:yt,partial:!0},tt,X)(oe):(e.enter("htmlFlowData"),Fe(oe))}function yt(oe,lt,mt){return Gt;function Gt(Qt){return oe.enter("lineEnding"),oe.consume(Qt),oe.exit("lineEnding"),Dt}function Dt(Qt){return r.parser.lazy[r.now().line]?mt(Qt):lt(Qt)}}function At(oe){return oe===45?(e.consume(oe),_e):Fe(oe)}function zt(oe){return oe===47?(e.consume(oe),d="",Vt):Fe(oe)}function Vt(oe){return oe===62&&j5.includes(d.toLowerCase())?(e.consume(oe),we):eu(oe)&&d.length<8?(e.consume(oe),d+=String.fromCharCode(oe),Vt):Fe(oe)}function Ve(oe){return oe===93?(e.consume(oe),_e):Fe(oe)}function _e(oe){return oe===62?(e.consume(oe),we):oe===45&&a===2?(e.consume(oe),_e):Fe(oe)}function we(oe){return oe===null||An(oe)?(e.exit("htmlFlowData"),X(oe)):(e.consume(oe),we)}function X(oe){return e.exit("htmlFlow"),t(oe)}}function LH(e,t,n){return r;function r(a){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),e.attempt(Cb,t,n)}}const OH={name:"htmlText",tokenize:FH};function FH(e,t,n){const r=this;let a,c,d,l;return x;function x(X){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(X),b}function b(X){return X===33?(e.consume(X),E):X===47?(e.consume(X),le):X===63?(e.consume(X),ae):eu(X)?(e.consume(X),Oe):n(X)}function E(X){return X===45?(e.consume(X),A):X===91?(e.consume(X),c="CDATA[",d=0,Z):eu(X)?(e.consume(X),ee):n(X)}function A(X){return X===45?(e.consume(X),L):n(X)}function L(X){return X===null||X===62?n(X):X===45?(e.consume(X),F):$(X)}function F(X){return X===null||X===62?n(X):$(X)}function $(X){return X===null?n(X):X===45?(e.consume(X),N):An(X)?(l=$,Ve(X)):(e.consume(X),$)}function N(X){return X===45?(e.consume(X),we):$(X)}function Z(X){return X===c.charCodeAt(d++)?(e.consume(X),d===c.length?R:Z):n(X)}function R(X){return X===null?n(X):X===93?(e.consume(X),q):An(X)?(l=R,Ve(X)):(e.consume(X),R)}function q(X){return X===93?(e.consume(X),G):R(X)}function G(X){return X===62?we(X):X===93?(e.consume(X),G):R(X)}function ee(X){return X===null||X===62?we(X):An(X)?(l=ee,Ve(X)):(e.consume(X),ee)}function ae(X){return X===null?n(X):X===63?(e.consume(X),K):An(X)?(l=ae,Ve(X)):(e.consume(X),ae)}function K(X){return X===62?we(X):ae(X)}function le(X){return eu(X)?(e.consume(X),xe):n(X)}function xe(X){return X===45||Xa(X)?(e.consume(X),xe):Le(X)}function Le(X){return An(X)?(l=Le,Ve(X)):Vi(X)?(e.consume(X),Le):we(X)}function Oe(X){return X===45||Xa(X)?(e.consume(X),Oe):X===47||X===62||ks(X)?Fe(X):n(X)}function Fe(X){return X===47?(e.consume(X),we):X===58||X===95||eu(X)?(e.consume(X),Ge):An(X)?(l=Fe,Ve(X)):Vi(X)?(e.consume(X),Fe):we(X)}function Ge(X){return X===45||X===46||X===58||X===95||Xa(X)?(e.consume(X),Ge):tt(X)}function tt(X){return X===61?(e.consume(X),yt):An(X)?(l=tt,Ve(X)):Vi(X)?(e.consume(X),tt):Fe(X)}function yt(X){return X===null||X===60||X===61||X===62||X===96?n(X):X===34||X===39?(e.consume(X),a=X,At):An(X)?(l=yt,Ve(X)):Vi(X)?(e.consume(X),yt):(e.consume(X),a=void 0,Vt)}function At(X){return X===a?(e.consume(X),zt):X===null?n(X):An(X)?(l=At,Ve(X)):(e.consume(X),At)}function zt(X){return X===62||X===47||ks(X)?Fe(X):n(X)}function Vt(X){return X===null||X===34||X===39||X===60||X===61||X===96?n(X):X===62||ks(X)?Fe(X):(e.consume(X),Vt)}function Ve(X){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(X),e.exit("lineEnding"),Rr(e,_e,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _e(X){return e.enter("htmlTextData"),l(X)}function we(X){return X===62?(e.consume(X),e.exit("htmlTextData"),e.exit("htmlText"),t):n(X)}}const l3={name:"labelEnd",tokenize:NH,resolveTo:$H,resolveAll:BH},RH={tokenize:UH},DH={tokenize:jH},zH={tokenize:VH};function BH(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function $H(e,t){let n=e.length,r=0,a,c,d,l;for(;n--;)if(a=e[n][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(d){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(d=n);const x={type:e[c][1].type==="labelLink"?"link":"image",start:Object.assign({},e[c][1].start),end:Object.assign({},e[e.length-1][1].end)},b={type:"label",start:Object.assign({},e[c][1].start),end:Object.assign({},e[d][1].end)},E={type:"labelText",start:Object.assign({},e[c+r+2][1].end),end:Object.assign({},e[d-2][1].start)};return l=[["enter",x,t],["enter",b,t]],l=ws(l,e.slice(c+1,c+r+3)),l=ws(l,[["enter",E,t]]),l=ws(l,a3(t.parser.constructs.insideSpan.null,e.slice(c+r+4,d-3),t)),l=ws(l,[["exit",E,t],e[d-2],e[d-1],["exit",b,t]]),l=ws(l,e.slice(d+1)),l=ws(l,[["exit",x,t]]),au(e,c,e.length,l),e}function NH(e,t,n){const r=this;let a=r.events.length,c,d;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){c=r.events[a][1];break}return l;function l(E){return c?c._inactive?b(E):(d=r.parser.defined.includes(jp(r.sliceSerialize({start:c.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(E),e.exit("labelMarker"),e.exit("labelEnd"),x):n(E)}function x(E){return E===40?e.attempt(RH,t,d?t:b)(E):E===91?e.attempt(DH,t,d?e.attempt(zH,t,b):b)(E):d?t(E):b(E)}function b(E){return c._balanced=!0,n(E)}}function UH(e,t,n){return r;function r(x){return e.enter("resource"),e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),vy(e,a)}function a(x){return x===41?l(x):eO(e,c,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function c(x){return ks(x)?vy(e,d)(x):l(x)}function d(x){return x===34||x===39||x===40?nO(e,vy(e,l),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):l(x)}function l(x){return x===41?(e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),e.exit("resource"),t):n(x)}}function jH(e,t,n){const r=this;return a;function a(d){return tO.call(r,e,c,n,"reference","referenceMarker","referenceString")(d)}function c(d){return r.parser.defined.includes(jp(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(d):n(d)}}function VH(e,t,n){return r;function r(c){return e.enter("reference"),e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),a}function a(c){return c===93?(e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),e.exit("reference"),t):n(c)}}const qH={name:"labelStartImage",tokenize:GH,resolveAll:l3.resolveAll};function GH(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),c}function c(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),d):n(l)}function d(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const HH={name:"labelStartLink",tokenize:WH,resolveAll:l3.resolveAll};function WH(e,t,n){const r=this;return a;function a(d){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelLink"),c}function c(d){return d===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(d):t(d)}}const E2={name:"lineEnding",tokenize:ZH};function ZH(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Rr(e,t,"linePrefix")}}const n1={name:"thematicBreak",tokenize:KH};function KH(e,t,n){let r=0,a;return c;function c(x){return e.enter("thematicBreak"),a=x,d(x)}function d(x){return x===a?(e.enter("thematicBreakSequence"),l(x)):Vi(x)?Rr(e,d,"whitespace")(x):r<3||x!==null&&!An(x)?n(x):(e.exit("thematicBreak"),t(x))}function l(x){return x===a?(e.consume(x),r++,l):(e.exit("thematicBreakSequence"),d(x))}}const Ea={name:"list",tokenize:JH,continuation:{tokenize:QH},exit:tW},XH={tokenize:nW,partial:!0},YH={tokenize:eW,partial:!0};function JH(e,t,n){const r=this,a=r.events[r.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,d=0;return l;function l(F){const $=r.containerState.type||(F===42||F===43||F===45?"listUnordered":"listOrdered");if($==="listUnordered"?!r.containerState.marker||F===r.containerState.marker:wC(F)){if(r.containerState.type||(r.containerState.type=$,e.enter($,{_container:!0})),$==="listUnordered")return e.enter("listItemPrefix"),F===42||F===45?e.check(n1,n,b)(F):b(F);if(!r.interrupt||F===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),x(F)}return n(F)}function x(F){return wC(F)&&++d<10?(e.consume(F),x):(!r.interrupt||d<2)&&(r.containerState.marker?F===r.containerState.marker:F===41||F===46)?(e.exit("listItemValue"),b(F)):n(F)}function b(F){return e.enter("listItemMarker"),e.consume(F),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||F,e.check(Cb,r.interrupt?n:E,e.attempt(XH,L,A))}function E(F){return r.containerState.initialBlankLine=!0,c++,L(F)}function A(F){return Vi(F)?(e.enter("listItemPrefixWhitespace"),e.consume(F),e.exit("listItemPrefixWhitespace"),L):n(F)}function L(F){return r.containerState.size=c+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(F)}}function QH(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Cb,a,c);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Rr(e,t,"listItemIndent",r.containerState.size+1)(l)}function c(l){return r.containerState.furtherBlankLines||!Vi(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,d(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(YH,t,d)(l))}function d(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Rr(e,e.attempt(Ea,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function eW(e,t,n){const r=this;return Rr(e,a,"listItemIndent",r.containerState.size+1);function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===r.containerState.size?t(c):n(c)}}function tW(e){e.exit(this.containerState.type)}function nW(e,t,n){const r=this;return Rr(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function a(c){const d=r.events[r.events.length-1];return!Vi(c)&&d&&d[1].type==="listItemPrefixWhitespace"?t(c):n(c)}}const V5={name:"setextUnderline",tokenize:iW,resolveTo:rW};function rW(e,t){let n=e.length,r,a,c;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!c&&e[n][1].type==="definition"&&(c=n);const d={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",c?(e.splice(a,0,["enter",d,t]),e.splice(c+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[c][1].end)):e[r][1]=d,e.push(["exit",d,t]),e}function iW(e,t,n){const r=this;let a=r.events.length,c,d;for(;a--;)if(r.events[a][1].type!=="lineEnding"&&r.events[a][1].type!=="linePrefix"&&r.events[a][1].type!=="content"){d=r.events[a][1].type==="paragraph";break}return l;function l(E){return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),c=E,x(E)):n(E)}function x(E){return E===c?(e.consume(E),x):(e.exit("setextHeadingLineSequence"),Rr(e,b,"lineSuffix")(E))}function b(E){return E===null||An(E)?(e.exit("setextHeadingLine"),t(E)):n(E)}}const oW={tokenize:aW};function aW(e){const t=this,n=e.attempt(Cb,r,e.attempt(this.parser.constructs.flowInitial,a,Rr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(dH,a)),"linePrefix")));return n;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEndingBlank"),e.consume(c),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const sW={resolveAll:iO()},lW=rO("string"),uW=rO("text");function rO(e){return{tokenize:t,resolveAll:iO(e==="text"?cW:void 0)};function t(n){const r=this,a=this.parser.constructs[e],c=n.attempt(a,d,l);return d;function d(E){return b(E)?c(E):l(E)}function l(E){if(E===null){n.consume(E);return}return n.enter("data"),n.consume(E),x}function x(E){return b(E)?(n.exit("data"),c(E)):(n.consume(E),x)}function b(E){if(E===null)return!0;const A=a[E];let L=-1;if(A)for(;++L<A.length;){const F=A[L];if(!F.previous||F.previous.call(r,r.previous))return!0}return!1}}}function iO(e){return t;function t(n,r){let a=-1,c;for(;++a<=n.length;)c===void 0?n[a]&&n[a][1].type==="data"&&(c=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==c+2&&(n[c][1].end=n[a-1][1].end,n.splice(c+2,a-c-2),a=c+2),c=void 0);return e?e(n,r):n}}function cW(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let c=a.length,d=-1,l=0,x;for(;c--;){const b=a[c];if(typeof b=="string"){for(d=b.length;b.charCodeAt(d-1)===32;)l++,d--;if(d)break;d=-1}else if(b===-2)x=!0,l++;else if(b!==-1){c++;break}}if(l){const b={type:n===e.length||x||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+c,_bufferIndex:c?d:r.start._bufferIndex+d},end:Object.assign({},r.end)};r.end=Object.assign({},b.start),r.start.offset===r.end.offset?Object.assign(r,b):(e.splice(n,0,["enter",b,t],["exit",b,t]),n+=2)}n++}return e}function hW(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let d=[],l=[];const x={consume:q,enter:G,exit:ee,attempt:le(ae),check:le(K),interrupt:le(K,{interrupt:!0})},b={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:F,sliceSerialize:L,now:$,defineSkip:N,write:A};let E=t.tokenize.call(b,x);return t.resolveAll&&c.push(t),b;function A(Fe){return d=ws(d,Fe),Z(),d[d.length-1]!==null?[]:(xe(t,0),b.events=a3(c,b.events,b),b.events)}function L(Fe,Ge){return dW(F(Fe),Ge)}function F(Fe){return fW(d,Fe)}function $(){return Object.assign({},r)}function N(Fe){a[Fe.line]=Fe.column,Oe()}function Z(){let Fe;for(;r._index<d.length;){const Ge=d[r._index];if(typeof Ge=="string")for(Fe=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Fe&&r._bufferIndex<Ge.length;)R(Ge.charCodeAt(r._bufferIndex));else R(Ge)}}function R(Fe){E=E(Fe)}function q(Fe){An(Fe)?(r.line++,r.column=1,r.offset+=Fe===-3?2:1,Oe()):Fe!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===d[r._index].length&&(r._bufferIndex=-1,r._index++)),b.previous=Fe}function G(Fe,Ge){const tt=Ge||{};return tt.type=Fe,tt.start=$(),b.events.push(["enter",tt,b]),l.push(tt),tt}function ee(Fe){const Ge=l.pop();return Ge.end=$(),b.events.push(["exit",Ge,b]),Ge}function ae(Fe,Ge){xe(Fe,Ge.from)}function K(Fe,Ge){Ge.restore()}function le(Fe,Ge){return tt;function tt(yt,At,zt){let Vt,Ve,_e,we;return Array.isArray(yt)?oe(yt):"tokenize"in yt?oe([yt]):X(yt);function X(Dt){return Qt;function Qt(un){const Xn=un!==null&&Dt[un],Qn=un!==null&&Dt.null,Bn=[...Array.isArray(Xn)?Xn:Xn?[Xn]:[],...Array.isArray(Qn)?Qn:Qn?[Qn]:[]];return oe(Bn)(un)}}function oe(Dt){return Vt=Dt,Ve=0,Dt.length===0?zt:lt(Dt[Ve])}function lt(Dt){return Qt;function Qt(un){return we=Le(),_e=Dt,Dt.partial||(b.currentConstruct=Dt),Dt.name&&b.parser.constructs.disable.null.includes(Dt.name)?Gt():Dt.tokenize.call(Ge?Object.assign(Object.create(b),Ge):b,x,mt,Gt)(un)}}function mt(Dt){return Fe(_e,we),At}function Gt(Dt){return we.restore(),++Ve<Vt.length?lt(Vt[Ve]):zt}}}function xe(Fe,Ge){Fe.resolveAll&&!c.includes(Fe)&&c.push(Fe),Fe.resolve&&au(b.events,Ge,b.events.length-Ge,Fe.resolve(b.events.slice(Ge),b)),Fe.resolveTo&&(b.events=Fe.resolveTo(b.events,b))}function Le(){const Fe=$(),Ge=b.previous,tt=b.currentConstruct,yt=b.events.length,At=Array.from(l);return{restore:zt,from:yt};function zt(){r=Fe,b.previous=Ge,b.currentConstruct=tt,b.events.length=yt,l=At,Oe()}}function Oe(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function fW(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,c=t.end._bufferIndex;let d;return n===a?d=[e[n].slice(r,c)]:(d=e.slice(n,a),r>-1&&(d[0]=d[0].slice(r)),c>0&&d.push(e[a].slice(0,c))),d}function dW(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const c=e[n];let d;if(typeof c=="string")d=c;else switch(c){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=t?" ":"	";break}case-1:{if(!t&&a)continue;d=" ";break}default:d=String.fromCharCode(c)}a=c===-2,r.push(d)}return r.join("")}const pW={42:Ea,43:Ea,45:Ea,48:Ea,49:Ea,50:Ea,51:Ea,52:Ea,53:Ea,54:Ea,55:Ea,56:Ea,57:Ea,62:XL},mW={91:_H},gW={[-2]:C2,[-1]:C2,32:C2},yW={35:CH,42:n1,45:[V5,n1],60:TH,61:V5,95:n1,96:U5,126:U5},_W={38:JL,92:YL},vW={[-5]:E2,[-4]:E2,[-3]:E2,33:qH,38:JL,42:CC,60:[XG,OH],91:HH,92:[wH,YL],93:l3,95:CC,96:lH},xW={null:[CC,sW]},bW={null:[42,95]},wW={null:[]},SW=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:bW,contentInitial:mW,disable:wW,document:pW,flow:yW,flowInitial:gW,insideSpan:xW,string:_W,text:vW},Symbol.toStringTag,{value:"Module"}));function CW(e={}){const t=RG([SW].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(VG),document:r(GG),flow:r(oW),string:r(lW),text:r(uW)};return n;function r(a){return c;function c(d){return hW(n,a,d)}}}const q5=/[\0\t\n\r]/g;function EW(){let e=1,t="",n=!0,r;return a;function a(c,d,l){const x=[];let b,E,A,L,F;for(c=t+c.toString(d),A=0,t="",n&&(c.charCodeAt(0)===65279&&A++,n=void 0);A<c.length;){if(q5.lastIndex=A,b=q5.exec(c),L=b&&b.index!==void 0?b.index:c.length,F=c.charCodeAt(L),!b){t=c.slice(A);break}if(F===10&&A===L&&r)x.push(-3),r=void 0;else switch(r&&(x.push(-5),r=void 0),A<L&&(x.push(c.slice(A,L)),e+=L-A),F){case 0:{x.push(65533),e++;break}case 9:{for(E=Math.ceil(e/4)*4,x.push(-2);e++<E;)x.push(-1);break}case 10:{x.push(-4),e=1;break}default:r=!0,e=1}A=L+1}return l&&(r&&x.push(-5),t&&x.push(t),x.push(null)),x}}function kW(e){for(;!QL(e););return e}function oO(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const AW=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function TW(e){return e.replace(AW,PW)}function PW(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),c=a===120||a===88;return oO(n.slice(c?2:1),c?16:10)}return s3(n)||e}const EC={}.hasOwnProperty,IW=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),MW(n)(kW(CW(n).document().write(EW()(e,t,!0))))};function MW(e={}){const t=aO({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:x(ei),autolinkProtocol:Ge,autolinkEmail:Ge,atxHeading:x(_n),blockQuote:x(Qr),characterEscape:Ge,characterReference:Ge,codeFenced:x(Je),codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:x(Je,b),codeText:x(yr,b),codeTextData:Ge,data:Ge,codeFlowValue:Ge,definition:x(Gi),definitionDestinationString:b,definitionLabelString:b,definitionTitleString:b,emphasis:x(Gn),hardBreakEscape:x(_o),hardBreakTrailing:x(_o),htmlFlow:x(Mo,b),htmlFlowData:Ge,htmlText:x(Mo,b),htmlTextData:Ge,image:x(Lo),label:b,link:x(ei),listItem:x(Oo),listItemValue:N,listOrdered:x(Yn,$),listUnordered:x(Yn),paragraph:x(vo),reference:Dt,referenceString:b,resourceDestinationString:b,resourceTitleString:b,setextHeading:x(_n),strong:x(vt),thematicBreak:x(We)},exit:{atxHeading:A(),atxHeadingSequence:xe,autolink:A(),autolinkEmail:Bn,autolinkProtocol:Qn,blockQuote:A(),characterEscapeValue:tt,characterReferenceMarkerHexadecimal:un,characterReferenceMarkerNumeric:un,characterReferenceValue:Xn,codeFenced:A(G),codeFencedFence:q,codeFencedFenceInfo:Z,codeFencedFenceMeta:R,codeFlowValue:tt,codeIndented:A(ee),codeText:A(Ve),codeTextData:tt,data:tt,definition:A(),definitionDestinationString:le,definitionLabelString:ae,definitionTitleString:K,emphasis:A(),hardBreakEscape:A(At),hardBreakTrailing:A(At),htmlFlow:A(zt),htmlFlowData:tt,htmlText:A(Vt),htmlTextData:tt,image:A(we),label:oe,labelText:X,lineEnding:yt,link:A(_e),listItem:A(),listOrdered:A(),listUnordered:A(),paragraph:A(),referenceString:Qt,resourceDestinationString:lt,resourceTitleString:mt,resource:Gt,setextHeading:A(Fe),setextHeadingLineSequence:Oe,setextHeadingText:Le,strong:A(),thematicBreak:A()}},e.mdastExtensions||[]),n={};return r;function r(se){let Re={type:"root",children:[]};const Pe=[Re],rt=[],bt=[],vn={stack:Pe,tokenStack:rt,config:t,enter:E,exit:L,buffer:b,resume:F,setData:c,getData:d};let Wt=-1;for(;++Wt<se.length;)if(se[Wt][1].type==="listOrdered"||se[Wt][1].type==="listUnordered")if(se[Wt][0]==="enter")bt.push(Wt);else{const xt=bt.pop();Wt=a(se,xt,Wt)}for(Wt=-1;++Wt<se.length;){const xt=t[se[Wt][0]];EC.call(xt,se[Wt][1].type)&&xt[se[Wt][1].type].call(Object.assign({sliceSerialize:se[Wt][2].sliceSerialize},vn),se[Wt][1])}if(rt.length>0){const xt=rt[rt.length-1];(xt[1]||G5).call(vn,void 0,xt[0])}for(Re.position={start:l(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:l(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},Wt=-1;++Wt<t.transforms.length;)Re=t.transforms[Wt](Re)||Re;return Re}function a(se,Re,Pe){let rt=Re-1,bt=-1,vn=!1,Wt,xt,$n,jn;for(;++rt<=Pe;){const bn=se[rt];if(bn[1].type==="listUnordered"||bn[1].type==="listOrdered"||bn[1].type==="blockQuote"?(bn[0]==="enter"?bt++:bt--,jn=void 0):bn[1].type==="lineEndingBlank"?bn[0]==="enter"&&(Wt&&!jn&&!bt&&!$n&&($n=rt),jn=void 0):bn[1].type==="linePrefix"||bn[1].type==="listItemValue"||bn[1].type==="listItemMarker"||bn[1].type==="listItemPrefix"||bn[1].type==="listItemPrefixWhitespace"||(jn=void 0),!bt&&bn[0]==="enter"&&bn[1].type==="listItemPrefix"||bt===-1&&bn[0]==="exit"&&(bn[1].type==="listUnordered"||bn[1].type==="listOrdered")){if(Wt){let _r=rt;for(xt=void 0;_r--;){const Mn=se[_r];if(Mn[1].type==="lineEnding"||Mn[1].type==="lineEndingBlank"){if(Mn[0]==="exit")continue;xt&&(se[xt][1].type="lineEndingBlank",vn=!0),Mn[1].type="lineEnding",xt=_r}else if(!(Mn[1].type==="linePrefix"||Mn[1].type==="blockQuotePrefix"||Mn[1].type==="blockQuotePrefixWhitespace"||Mn[1].type==="blockQuoteMarker"||Mn[1].type==="listItemIndent"))break}$n&&(!xt||$n<xt)&&(Wt._spread=!0),Wt.end=Object.assign({},xt?se[xt][1].start:bn[1].end),se.splice(xt||rt,0,["exit",Wt,bn[2]]),rt++,Pe++}bn[1].type==="listItemPrefix"&&(Wt={type:"listItem",_spread:!1,start:Object.assign({},bn[1].start)},se.splice(rt,0,["enter",Wt,bn[2]]),rt++,Pe++,$n=void 0,jn=!0)}}return se[Re][1]._spread=vn,Pe}function c(se,Re){n[se]=Re}function d(se){return n[se]}function l(se){return{line:se.line,column:se.column,offset:se.offset}}function x(se,Re){return Pe;function Pe(rt){E.call(this,se(rt),rt),Re&&Re.call(this,rt)}}function b(){this.stack.push({type:"fragment",children:[]})}function E(se,Re,Pe){return this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([Re,Pe]),se.position={start:l(Re.start)},se}function A(se){return Re;function Re(Pe){se&&se.call(this,Pe),L.call(this,Pe)}}function L(se,Re){const Pe=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==se.type&&(Re?Re.call(this,se,rt[0]):(rt[1]||G5).call(this,se,rt[0]));else throw new Error("Cannot close `"+se.type+"` ("+_y({start:se.start,end:se.end})+"): its not open");return Pe.position.end=l(se.end),Pe}function F(){return FG(this.stack.pop())}function $(){c("expectingFirstListItemValue",!0)}function N(se){if(d("expectingFirstListItemValue")){const Re=this.stack[this.stack.length-2];Re.start=Number.parseInt(this.sliceSerialize(se),10),c("expectingFirstListItemValue")}}function Z(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.lang=se}function R(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.meta=se}function q(){d("flowCodeInside")||(this.buffer(),c("flowCodeInside",!0))}function G(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c("flowCodeInside")}function ee(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.value=se.replace(/(\r?\n|\r)$/g,"")}function ae(se){const Re=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=Re,Pe.identifier=jp(this.sliceSerialize(se)).toLowerCase()}function K(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.title=se}function le(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.url=se}function xe(se){const Re=this.stack[this.stack.length-1];if(!Re.depth){const Pe=this.sliceSerialize(se).length;Re.depth=Pe}}function Le(){c("setextHeadingSlurpLineEnding",!0)}function Oe(se){const Re=this.stack[this.stack.length-1];Re.depth=this.sliceSerialize(se).charCodeAt(0)===61?1:2}function Fe(){c("setextHeadingSlurpLineEnding")}function Ge(se){const Re=this.stack[this.stack.length-1];let Pe=Re.children[Re.children.length-1];(!Pe||Pe.type!=="text")&&(Pe=ti(),Pe.position={start:l(se.start)},Re.children.push(Pe)),this.stack.push(Pe)}function tt(se){const Re=this.stack.pop();Re.value+=this.sliceSerialize(se),Re.position.end=l(se.end)}function yt(se){const Re=this.stack[this.stack.length-1];if(d("atHardBreak")){const Pe=Re.children[Re.children.length-1];Pe.position.end=l(se.end),c("atHardBreak");return}!d("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Re.type)&&(Ge.call(this,se),tt.call(this,se))}function At(){c("atHardBreak",!0)}function zt(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.value=se}function Vt(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.value=se}function Ve(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.value=se}function _e(){const se=this.stack[this.stack.length-1];d("inReference")?(se.type+="Reference",se.referenceType=d("referenceType")||"shortcut",delete se.url,delete se.title):(delete se.identifier,delete se.label),c("referenceType")}function we(){const se=this.stack[this.stack.length-1];d("inReference")?(se.type+="Reference",se.referenceType=d("referenceType")||"shortcut",delete se.url,delete se.title):(delete se.identifier,delete se.label),c("referenceType")}function X(se){const Re=this.stack[this.stack.length-2],Pe=this.sliceSerialize(se);Re.label=TW(Pe),Re.identifier=jp(Pe).toLowerCase()}function oe(){const se=this.stack[this.stack.length-1],Re=this.resume(),Pe=this.stack[this.stack.length-1];c("inReference",!0),Pe.type==="link"?Pe.children=se.children:Pe.alt=Re}function lt(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.url=se}function mt(){const se=this.resume(),Re=this.stack[this.stack.length-1];Re.title=se}function Gt(){c("inReference")}function Dt(){c("referenceType","collapsed")}function Qt(se){const Re=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=Re,Pe.identifier=jp(this.sliceSerialize(se)).toLowerCase(),c("referenceType","full")}function un(se){c("characterReferenceType",se.type)}function Xn(se){const Re=this.sliceSerialize(se),Pe=d("characterReferenceType");let rt;Pe?(rt=oO(Re,Pe==="characterReferenceMarkerNumeric"?10:16),c("characterReferenceType")):rt=s3(Re);const bt=this.stack.pop();bt.value+=rt,bt.position.end=l(se.end)}function Qn(se){tt.call(this,se);const Re=this.stack[this.stack.length-1];Re.url=this.sliceSerialize(se)}function Bn(se){tt.call(this,se);const Re=this.stack[this.stack.length-1];Re.url="mailto:"+this.sliceSerialize(se)}function Qr(){return{type:"blockquote",children:[]}}function Je(){return{type:"code",lang:null,meta:null,value:""}}function yr(){return{type:"inlineCode",value:""}}function Gi(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Gn(){return{type:"emphasis",children:[]}}function _n(){return{type:"heading",depth:void 0,children:[]}}function _o(){return{type:"break"}}function Mo(){return{type:"html",value:""}}function Lo(){return{type:"image",title:null,url:"",alt:null}}function ei(){return{type:"link",title:null,url:"",children:[]}}function Yn(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function Oo(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function vo(){return{type:"paragraph",children:[]}}function vt(){return{type:"strong",children:[]}}function ti(){return{type:"text",value:""}}function We(){return{type:"thematicBreak"}}}function aO(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?aO(e,r):LW(e,r)}return e}function LW(e,t){let n;for(n in t)if(EC.call(t,n)){const r=n==="canContainEols"||n==="transforms",c=(EC.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),d=t[n];d&&(r?e[n]=[...c,...d]:Object.assign(c,d))}}function G5(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+_y({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+_y({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+_y({start:t.start,end:t.end})+") is still open")}function OW(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return IW(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var ro=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const r1={}.hasOwnProperty;function FW(e,t){const n=t.data||{};return"value"in t&&!(r1.call(n,"hName")||r1.call(n,"hProperties")||r1.call(n,"hChildren"))?e.augment(t,ro("text",t.value)):e(t,"div",Xo(e,t))}function sO(e,t,n){const r=t&&t.type;let a;if(!r)throw new Error("Expected node, got `"+t+"`");return r1.call(e.handlers,r)?a=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?a=RW:a=e.unknownHandler,(typeof a=="function"?a:FW)(e,t,n)}function RW(e,t){return"children"in t?{...t,children:Xo(e,t)}:t}function Xo(e,t){const n=[];if("children"in t){const r=t.children;let a=-1;for(;++a<r.length;){const c=sO(e,r[a],t);if(c){if(a&&r[a-1].type==="break"&&(!Array.isArray(c)&&c.type==="text"&&(c.value=c.value.replace(/^\s+/,"")),!Array.isArray(c)&&c.type==="element")){const d=c.children[0];d&&d.type==="text"&&(d.value=d.value.replace(/^\s+/,""))}Array.isArray(c)?n.push(...c):n.push(c)}}}return n}const lO=function(e){if(e==null)return $W;if(typeof e=="string")return BW(e);if(typeof e=="object")return Array.isArray(e)?DW(e):zW(e);if(typeof e=="function")return Eb(e);throw new Error("Expected function, string, or object as test")};function DW(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=lO(e[n]);return Eb(r);function r(...a){let c=-1;for(;++c<t.length;)if(t[c].call(this,...a))return!0;return!1}}function zW(e){return Eb(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function BW(e){return Eb(t);function t(n){return n&&n.type===e}}function Eb(e){return t;function t(...n){return!!e.call(this,...n)}}function $W(){return!0}const NW=!0,UW="skip",H5=!1,jW=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const a=lO(t),c=r?-1:1;d(e,null,[])();function d(l,x,b){const E=typeof l=="object"&&l!==null?l:{};let A;return typeof E.type=="string"&&(A=typeof E.tagName=="string"?E.tagName:typeof E.name=="string"?E.name:void 0,Object.defineProperty(L,"name",{value:"node ("+(E.type+(A?"<"+A+">":""))+")"})),L;function L(){let F=[],$,N,Z;if((!t||a(l,x,b[b.length-1]||null))&&(F=VW(n(l,b)),F[0]===H5))return F;if(l.children&&F[0]!==UW)for(N=(r?l.children.length:-1)+c,Z=b.concat(l);N>-1&&N<l.children.length;){if($=d(l.children[N],N,Z)(),$[0]===H5)return $;N=typeof $[1]=="number"?$[1]:N+c}return F}}};function VW(e){return Array.isArray(e)?e:typeof e=="number"?[NW,e]:[e]}const u3=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),jW(e,t,a,r);function a(c,d){const l=d[d.length-1];return n(c,l?l.children.indexOf(c):null,l)}},uO=hO("start"),cO=hO("end");function hO(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function qW(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const W5={}.hasOwnProperty;function GW(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return u3(e,"definition",r=>{const a=Z5(r.identifier);a&&!W5.call(t,a)&&(t[a]=r)}),n;function n(r){const a=Z5(r);return a&&W5.call(t,a)?t[a]:null}}function Z5(e){return String(e||"").toUpperCase()}const HW={'"':"quot","&":"amp","<":"lt",">":"gt"};function WW(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+HW[n]+";"}}function fO(e,t){const n=WW(ZW(e||""));if(!t)return n;const r=n.indexOf(":"),a=n.indexOf("?"),c=n.indexOf("#"),d=n.indexOf("/");return r<0||d>-1&&r>d||a>-1&&r>a||c>-1&&r>c||t.test(n.slice(0,r))?n:""}function ZW(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const c=e.charCodeAt(n);let d="";if(c===37&&Xa(e.charCodeAt(n+1))&&Xa(e.charCodeAt(n+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(d=String.fromCharCode(c));else if(c>55295&&c<57344){const l=e.charCodeAt(n+1);c<56320&&l>56319&&l<57344?(d=String.fromCharCode(c,l),a=1):d=""}else d=String.fromCharCode(c);d&&(t.push(e.slice(r,n),encodeURIComponent(d)),r=n+a+1,d=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Yu(e,t){const n=[];let r=-1;for(t&&n.push(ro("text",`
`));++r<e.length;)r&&n.push(ro("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(ro("text",`
`)),n}function KW(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const a=Xo(e,r),c=String(r.identifier),d=fO(c.toLowerCase());let l=0;const x=[];for(;++l<=e.footnoteCounts[c];){const A={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+d+(l>1?"-"+l:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};l>1&&A.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(l)}]}),x.length>0&&x.push({type:"text",value:" "}),x.push(A)}const b=a[a.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const A=b.children[b.children.length-1];A&&A.type==="text"?A.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...x)}else a.push(...x);const E={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+d},children:Yu(a,!0)};r.position&&(E.position=r.position),n.push(E)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[ro("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Yu(n,!0)},{type:"text",value:`
`}]}}function XW(e,t){return e(t,"blockquote",Yu(Xo(e,t),!0))}function YW(e,t){return[e(t,"br"),ro("text",`
`)]}function JW(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};r&&(a.className=["language-"+r]);const c=e(t,"code",a,[ro("text",n)]);return t.meta&&(c.data={meta:t.meta}),e(t.position,"pre",[c])}function QW(e,t){return e(t,"del",Xo(e,t))}function eZ(e,t){return e(t,"em",Xo(e,t))}function dO(e,t){const n=String(t.identifier),r=fO(n.toLowerCase()),a=e.footnoteOrder.indexOf(n);let c;a===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,c=e.footnoteOrder.length):(e.footnoteCounts[n]++,c=a+1);const d=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[ro("text",String(c))])])}function tZ(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const a=String(r);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},dO(e,{type:"footnoteReference",identifier:a,position:t.position})}function nZ(e,t){return e(t,"h"+t.depth,Xo(e,t))}function rZ(e,t){return e.dangerous?e.augment(t,ro("raw",t.value)):null}var K5={};function iZ(e){var t,n,r=K5[e];if(r)return r;for(r=K5[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function kb(e,t,n){var r,a,c,d,l,x="";for(typeof t!="string"&&(n=t,t=kb.defaultChars),typeof n>"u"&&(n=!0),l=iZ(t),r=0,a=e.length;r<a;r++){if(c=e.charCodeAt(r),n&&c===37&&r+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){x+=e.slice(r,r+3),r+=2;continue}if(c<128){x+=l[c];continue}if(c>=55296&&c<=57343){if(c>=55296&&c<=56319&&r+1<a&&(d=e.charCodeAt(r+1),d>=56320&&d<=57343)){x+=encodeURIComponent(e[r]+e[r+1]),r++;continue}x+="%EF%BF%BD";continue}x+=encodeURIComponent(e[r])}return x}kb.defaultChars=";/?:@&=+$,-_.!~*'()#";kb.componentChars="-_.!~*'()";var oZ=kb;const Ab=ic(oZ);function pO(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return ro("text","!["+t.alt+r);const a=Xo(e,t),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift(ro("text","["));const d=a[a.length-1];return d&&d.type==="text"?d.value+=r:a.push(ro("text",r)),a}function aZ(e,t){const n=e.definition(t.identifier);if(!n)return pO(e,t);const r={src:Ab(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function sZ(e,t){const n={src:Ab(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function lZ(e,t){return e(t,"code",[ro("text",t.value.replace(/\r?\n|\r/g," "))])}function uZ(e,t){const n=e.definition(t.identifier);if(!n)return pO(e,t);const r={href:Ab(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,Xo(e,t))}function cZ(e,t){const n={href:Ab(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Xo(e,t))}function hZ(e,t,n){const r=Xo(e,t),a=n?fZ(n):mO(t),c={},d=[];if(typeof t.checked=="boolean"){let b;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?b=r[0]:(b=e(null,"p",[]),r.unshift(b)),b.children.length>0&&b.children.unshift(ro("text"," ")),b.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),c.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const b=r[l];(a||l!==0||b.type!=="element"||b.tagName!=="p")&&d.push(ro("text",`
`)),b.type==="element"&&b.tagName==="p"&&!a?d.push(...b.children):d.push(b)}const x=r[r.length-1];return x&&(a||!("tagName"in x)||x.tagName!=="p")&&d.push(ro("text",`
`)),e(t,"li",c,d)}function fZ(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=mO(n[r]);return!!t}function mO(e){const t=e.spread;return t??e.children.length>1}function dZ(e,t){const n={},r=t.ordered?"ol":"ul",a=Xo(e,t);let c=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++c<a.length;){const d=a[c];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Yu(a,!0))}function pZ(e,t){return e(t,"p",Xo(e,t))}function mZ(e,t){return e.augment(t,ro("root",Yu(Xo(e,t))))}function gZ(e,t){return e(t,"strong",Xo(e,t))}function yZ(e,t){const n=t.children;let r=-1;const a=t.align||[],c=[];for(;++r<n.length;){const d=n[r].children,l=r===0?"th":"td",x=[];let b=-1;const E=t.align?a.length:d.length;for(;++b<E;){const A=d[b];x.push(e(A,l,{align:a[b]},A?Xo(e,A):[]))}c[r]=e(n[r],"tr",Yu(x,!0))}return e(t,"table",Yu([e(c[0].position,"thead",Yu([c[0]],!0))].concat(c[1]?e({start:uO(c[1]),end:cO(c[c.length-1])},"tbody",Yu(c.slice(1),!0)):[]),!0))}const X5=9,Y5=32;function _Z(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const c=[];for(;r;)c.push(J5(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return c.push(J5(t.slice(a),a>0,!1)),c.join("")}function J5(e,t,n){let r=0,a=e.length;if(t){let c=e.codePointAt(r);for(;c===X5||c===Y5;)r++,c=e.codePointAt(r)}if(n){let c=e.codePointAt(a-1);for(;c===X5||c===Y5;)a--,c=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function vZ(e,t){return e.augment(t,ro("text",_Z(String(t.value))))}function xZ(e,t){return e(t,"hr")}const bZ={blockquote:XW,break:YW,code:JW,delete:QW,emphasis:eZ,footnoteReference:dO,footnote:tZ,heading:nZ,html:rZ,imageReference:aZ,image:sZ,inlineCode:lZ,linkReference:uZ,link:cZ,listItem:hZ,list:dZ,paragraph:pZ,root:mZ,strong:gZ,table:yZ,text:vZ,thematicBreak:xZ,toml:Sv,yaml:Sv,definition:Sv,footnoteDefinition:Sv};function Sv(){return null}const wZ={}.hasOwnProperty;function SZ(e,t){const n=t||{},r=n.allowDangerousHtml||!1,a={};return d.dangerous=r,d.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,d.footnoteLabel=n.footnoteLabel||"Footnotes",d.footnoteLabelTagName=n.footnoteLabelTagName||"h2",d.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},d.footnoteBackLabel=n.footnoteBackLabel||"Back to content",d.definition=GW(e),d.footnoteById=a,d.footnoteOrder=[],d.footnoteCounts={},d.augment=c,d.handlers={...bZ,...n.handlers},d.unknownHandler=n.unknownHandler,d.passThrough=n.passThrough,u3(e,"footnoteDefinition",l=>{const x=String(l.identifier).toUpperCase();wZ.call(a,x)||(a[x]=l)}),d;function c(l,x){if(l&&"data"in l&&l.data){const b=l.data;b.hName&&(x.type!=="element"&&(x={type:"element",tagName:"",properties:{},children:[]}),x.tagName=b.hName),x.type==="element"&&b.hProperties&&(x.properties={...x.properties,...b.hProperties}),"children"in x&&x.children&&b.hChildren&&(x.children=b.hChildren)}if(l){const b="type"in l?l:{position:l};qW(b)||(x.position={start:uO(b),end:cO(b)})}return x}function d(l,x,b,E){return Array.isArray(b)&&(E=b,b={}),c(l,{type:"element",tagName:x,properties:b||{},children:E||[]})}}function gO(e,t){const n=SZ(e,t),r=sO(n,e,null),a=KW(n);return a&&r.children.push(ro("text",`
`),a),Array.isArray(r)?{type:"root",children:r}:r}const CZ=function(e,t){return e&&"run"in e?kZ(e,t):AZ(e||t)},EZ=CZ;function kZ(e,t){return(n,r,a)=>{e.run(gO(n,t),r,c=>{a(c)})}}function AZ(e){return t=>gO(t,e)}class S_{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}S_.prototype.property={};S_.prototype.normal={};S_.prototype.space=null;function yO(e,t){const n={},r={};let a=-1;for(;++a<e.length;)Object.assign(n,e[a].property),Object.assign(r,e[a].normal);return new S_(n,r,t)}function kC(e){return e.toLowerCase()}class Fs{constructor(t,n){this.property=t,this.attribute=n}}Fs.prototype.space=null;Fs.prototype.boolean=!1;Fs.prototype.booleanish=!1;Fs.prototype.overloadedBoolean=!1;Fs.prototype.number=!1;Fs.prototype.commaSeparated=!1;Fs.prototype.spaceSeparated=!1;Fs.prototype.commaOrSpaceSeparated=!1;Fs.prototype.mustUseProperty=!1;Fs.prototype.defined=!1;let TZ=0;const zn=ad(),Ui=ad(),_O=ad(),kt=ad(),Kr=ad(),Vp=ad(),qa=ad();function ad(){return 2**++TZ}const AC=Object.freeze(Object.defineProperty({__proto__:null,boolean:zn,booleanish:Ui,commaOrSpaceSeparated:qa,commaSeparated:Vp,number:kt,overloadedBoolean:_O,spaceSeparated:Kr},Symbol.toStringTag,{value:"Module"})),k2=Object.keys(AC);class c3 extends Fs{constructor(t,n,r,a){let c=-1;if(super(t,n),Q5(this,"space",a),typeof r=="number")for(;++c<k2.length;){const d=k2[c];Q5(this,k2[c],(r&AC[d])===AC[d])}}}c3.prototype.defined=!0;function Q5(e,t,n){n&&(e[t]=n)}const PZ={}.hasOwnProperty;function pm(e){const t={},n={};let r;for(r in e.properties)if(PZ.call(e.properties,r)){const a=e.properties[r],c=new c3(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(c.mustUseProperty=!0),t[r]=c,n[kC(r)]=r,n[kC(c.attribute)]=r}return new S_(t,n,e.space)}const vO=pm({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xO=pm({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function bO(e,t){return t in e?e[t]:t}function wO(e,t){return bO(e,t.toLowerCase())}const SO=pm({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:wO,properties:{xmlns:null,xmlnsXLink:null}}),CO=pm({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Ui,ariaAutoComplete:null,ariaBusy:Ui,ariaChecked:Ui,ariaColCount:kt,ariaColIndex:kt,ariaColSpan:kt,ariaControls:Kr,ariaCurrent:null,ariaDescribedBy:Kr,ariaDetails:null,ariaDisabled:Ui,ariaDropEffect:Kr,ariaErrorMessage:null,ariaExpanded:Ui,ariaFlowTo:Kr,ariaGrabbed:Ui,ariaHasPopup:null,ariaHidden:Ui,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Kr,ariaLevel:kt,ariaLive:null,ariaModal:Ui,ariaMultiLine:Ui,ariaMultiSelectable:Ui,ariaOrientation:null,ariaOwns:Kr,ariaPlaceholder:null,ariaPosInSet:kt,ariaPressed:Ui,ariaReadOnly:Ui,ariaRelevant:null,ariaRequired:Ui,ariaRoleDescription:Kr,ariaRowCount:kt,ariaRowIndex:kt,ariaRowSpan:kt,ariaSelected:Ui,ariaSetSize:kt,ariaSort:null,ariaValueMax:kt,ariaValueMin:kt,ariaValueNow:kt,ariaValueText:null,role:null}}),IZ=pm({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:wO,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Vp,acceptCharset:Kr,accessKey:Kr,action:null,allow:null,allowFullScreen:zn,allowPaymentRequest:zn,allowUserMedia:zn,alt:null,as:null,async:zn,autoCapitalize:null,autoComplete:Kr,autoFocus:zn,autoPlay:zn,capture:zn,charSet:null,checked:zn,cite:null,className:Kr,cols:kt,colSpan:null,content:null,contentEditable:Ui,controls:zn,controlsList:Kr,coords:kt|Vp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:zn,defer:zn,dir:null,dirName:null,disabled:zn,download:_O,draggable:Ui,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:zn,formTarget:null,headers:Kr,height:kt,hidden:zn,high:kt,href:null,hrefLang:null,htmlFor:Kr,httpEquiv:Kr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:zn,itemId:null,itemProp:Kr,itemRef:Kr,itemScope:zn,itemType:Kr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:zn,low:kt,manifest:null,max:null,maxLength:kt,media:null,method:null,min:null,minLength:kt,multiple:zn,muted:zn,name:null,nonce:null,noModule:zn,noValidate:zn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:zn,optimum:kt,pattern:null,ping:Kr,placeholder:null,playsInline:zn,poster:null,preload:null,readOnly:zn,referrerPolicy:null,rel:Kr,required:zn,reversed:zn,rows:kt,rowSpan:kt,sandbox:Kr,scope:null,scoped:zn,seamless:zn,selected:zn,shape:null,size:kt,sizes:null,slot:null,span:kt,spellCheck:Ui,src:null,srcDoc:null,srcLang:null,srcSet:null,start:kt,step:null,style:null,tabIndex:kt,target:null,title:null,translate:null,type:null,typeMustMatch:zn,useMap:null,value:Ui,width:kt,wrap:null,align:null,aLink:null,archive:Kr,axis:null,background:null,bgColor:null,border:kt,borderColor:null,bottomMargin:kt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:zn,declare:zn,event:null,face:null,frame:null,frameBorder:null,hSpace:kt,leftMargin:kt,link:null,longDesc:null,lowSrc:null,marginHeight:kt,marginWidth:kt,noResize:zn,noHref:zn,noShade:zn,noWrap:zn,object:null,profile:null,prompt:null,rev:null,rightMargin:kt,rules:null,scheme:null,scrolling:Ui,standby:null,summary:null,text:null,topMargin:kt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:kt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:zn,disableRemotePlayback:zn,prefix:null,property:null,results:kt,security:null,unselectable:null}}),MZ=pm({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:bO,properties:{about:qa,accentHeight:kt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:kt,amplitude:kt,arabicForm:null,ascent:kt,attributeName:null,attributeType:null,azimuth:kt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:kt,by:null,calcMode:null,capHeight:kt,className:Kr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:kt,diffuseConstant:kt,direction:null,display:null,dur:null,divisor:kt,dominantBaseline:null,download:zn,dx:null,dy:null,edgeMode:null,editable:null,elevation:kt,enableBackground:null,end:null,event:null,exponent:kt,externalResourcesRequired:null,fill:null,fillOpacity:kt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Vp,g2:Vp,glyphName:Vp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:kt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:kt,horizOriginX:kt,horizOriginY:kt,id:null,ideographic:kt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:kt,k:kt,k1:kt,k2:kt,k3:kt,k4:kt,kernelMatrix:qa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:kt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:kt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:kt,overlineThickness:kt,paintOrder:null,panose1:null,path:null,pathLength:kt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Kr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:kt,pointsAtY:kt,pointsAtZ:kt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qa,rev:qa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qa,requiredFeatures:qa,requiredFonts:qa,requiredFormats:qa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:kt,specularExponent:kt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:kt,strikethroughThickness:kt,string:null,stroke:null,strokeDashArray:qa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:kt,strokeOpacity:kt,strokeWidth:null,style:null,surfaceScale:kt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qa,tabIndex:kt,tableValues:null,target:null,targetX:kt,targetY:kt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qa,to:null,transform:null,u1:null,u2:null,underlinePosition:kt,underlineThickness:kt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:kt,values:null,vAlphabetic:kt,vMathematical:kt,vectorEffect:null,vHanging:kt,vIdeographic:kt,version:null,vertAdvY:kt,vertOriginX:kt,vertOriginY:kt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:kt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),LZ=/^data[-\w.:]+$/i,e4=/-[a-z]/g,OZ=/[A-Z]/g;function FZ(e,t){const n=kC(t);let r=t,a=Fs;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&LZ.test(t)){if(t.charAt(4)==="-"){const c=t.slice(5).replace(e4,DZ);r="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=t.slice(4);if(!e4.test(c)){let d=c.replace(OZ,RZ);d.charAt(0)!=="-"&&(d="-"+d),t="data"+d}}a=c3}return new a(r,t)}function RZ(e){return"-"+e.toLowerCase()}function DZ(e){return e.charAt(1).toUpperCase()}const t4={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},zZ=yO([xO,vO,SO,CO,IZ],"html"),BZ=yO([xO,vO,SO,CO,MZ],"svg");function $Z(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{u3(t,"element",(n,r,a)=>{const c=a;let d;if(e.allowedElements?d=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(d=e.disallowedElements.includes(n.tagName)),!d&&e.allowElement&&typeof r=="number"&&(d=!e.allowElement(n,r,c)),d&&typeof r=="number")return e.unwrapDisallowed&&n.children?c.children.splice(r,1,...n.children):c.children.splice(r,1),r})}}function NZ(e){var t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function UZ(e){return e.join(" ").trim()}function jZ(e,t){var n=t||{};return e[e.length-1]===""&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var h3={exports:{}},n4=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,VZ=/\n/g,qZ=/^\s*/,GZ=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,HZ=/^:\s*/,WZ=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ZZ=/^[;\s]*/,KZ=/^\s+|\s+$/g,XZ=`
`,r4="/",i4="*",Rf="",YZ="comment",JZ="declaration",QZ=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a($){var N=$.match(VZ);N&&(n+=N.length);var Z=$.lastIndexOf(XZ);r=~Z?$.length-Z:r+$.length}function c(){var $={line:n,column:r};return function(N){return N.position=new d($),b(),N}}function d($){this.start=$,this.end={line:n,column:r},this.source=t.source}d.prototype.content=e;function l($){var N=new Error(t.source+":"+n+":"+r+": "+$);if(N.reason=$,N.filename=t.source,N.line=n,N.column=r,N.source=e,!t.silent)throw N}function x($){var N=$.exec(e);if(N){var Z=N[0];return a(Z),e=e.slice(Z.length),N}}function b(){x(qZ)}function E($){var N;for($=$||[];N=A();)N!==!1&&$.push(N);return $}function A(){var $=c();if(!(r4!=e.charAt(0)||i4!=e.charAt(1))){for(var N=2;Rf!=e.charAt(N)&&(i4!=e.charAt(N)||r4!=e.charAt(N+1));)++N;if(N+=2,Rf===e.charAt(N-1))return l("End of comment missing");var Z=e.slice(2,N-2);return r+=2,a(Z),e=e.slice(N),r+=2,$({type:YZ,comment:Z})}}function L(){var $=c(),N=x(GZ);if(N){if(A(),!x(HZ))return l("property missing ':'");var Z=x(WZ),R=$({type:JZ,property:o4(N[0].replace(n4,Rf)),value:Z?o4(Z[0].replace(n4,Rf)):Rf});return x(ZZ),R}}function F(){var $=[];E($);for(var N;N=L();)N!==!1&&($.push(N),E($));return $}return b(),F()};function o4(e){return e?e.replace(KZ,Rf):Rf}var eK=QZ;function EO(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,a=eK(e),c=typeof t=="function",d,l,x=0,b=a.length;x<b;x++)r=a[x],d=r.property,l=r.value,c?t(d,l,r):l&&(n||(n={}),n[d]=l);return n}h3.exports=EO;h3.exports.default=EO;var tK=h3.exports;const nK=ic(tK),TC={}.hasOwnProperty,rK=new Set(["table","thead","tbody","tfoot","tr"]);function kO(e,t){const n=[];let r=-1,a;for(;++r<t.children.length;)a=t.children[r],a.type==="element"?n.push(iK(e,a,r,t)):a.type==="text"?(t.type!=="element"||!rK.has(t.tagName)||!NZ(a))&&n.push(a.value):a.type==="raw"&&!e.options.skipHtml&&n.push(a.value);return n}function iK(e,t,n,r){const a=e.options,c=a.transformLinkUri===void 0?mG:a.transformLinkUri,d=e.schema,l=t.tagName,x={};let b=d,E;if(d.space==="html"&&l==="svg"&&(b=BZ,e.schema=b),t.properties)for(E in t.properties)TC.call(t.properties,E)&&aK(x,E,t.properties[E],e);(l==="ol"||l==="ul")&&e.listDepth++;const A=kO(e,t);(l==="ol"||l==="ul")&&e.listDepth--,e.schema=d;const L=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},F=a.components&&TC.call(a.components,l)?a.components[l]:l,$=typeof F=="string"||F===sn.Fragment;if(!uq.isValidElementType(F))throw new TypeError(`Component for name \`${l}\` not defined or is not renderable`);if(x.key=[l,L.start.line,L.start.column,n].join("-"),l==="a"&&a.linkTarget&&(x.target=typeof a.linkTarget=="function"?a.linkTarget(String(x.href||""),t.children,typeof x.title=="string"?x.title:null):a.linkTarget),l==="a"&&c&&(x.href=c(String(x.href||""),t.children,typeof x.title=="string"?x.title:null)),!$&&l==="code"&&r.type==="element"&&r.tagName!=="pre"&&(x.inline=!0),!$&&(l==="h1"||l==="h2"||l==="h3"||l==="h4"||l==="h5"||l==="h6")&&(x.level=Number.parseInt(l.charAt(1),10)),l==="img"&&a.transformImageUri&&(x.src=a.transformImageUri(String(x.src||""),String(x.alt||""),typeof x.title=="string"?x.title:null)),!$&&l==="li"&&r.type==="element"){const N=oK(t);x.checked=N&&N.properties?!!N.properties.checked:null,x.index=A2(r,t),x.ordered=r.tagName==="ol"}return!$&&(l==="ol"||l==="ul")&&(x.ordered=l==="ol",x.depth=e.listDepth),(l==="td"||l==="th")&&(x.align&&(x.style||(x.style={}),x.style.textAlign=x.align,delete x.align),$||(x.isHeader=l==="th")),!$&&l==="tr"&&r.type==="element"&&(x.isHeader=r.tagName==="thead"),a.sourcePos&&(x["data-sourcepos"]=uK(L)),!$&&a.rawSourcePos&&(x.sourcePosition=t.position),!$&&a.includeElementIndex&&(x.index=A2(r,t),x.siblingCount=A2(r)),$||(x.node=t),A.length>0?sn.createElement(F,x,A):sn.createElement(F,x)}function oK(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function A2(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function aK(e,t,n,r){const a=FZ(r.schema,t);let c=n;c==null||c!==c||(Array.isArray(c)&&(c=a.commaSeparated?jZ(c):UZ(c)),a.property==="style"&&typeof c=="string"&&(c=sK(c)),a.space&&a.property?e[TC.call(t4,a.property)?t4[a.property]:a.property]=c:a.attribute&&(e[a.attribute]=c))}function sK(e){const t={};try{nK(e,n)}catch{}return t;function n(r,a){const c=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[c.replace(/-([a-z])/g,lK)]=a}}function lK(e,t){return t.toUpperCase()}function uK(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const a4={}.hasOwnProperty,cK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Cv={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function AO(e){for(const c in Cv)if(a4.call(Cv,c)&&a4.call(e,c)){const d=Cv[c];console.warn(`[react-markdown] Warning: please ${d.to?`use \`${d.to}\` instead of`:"remove"} \`${c}\` (see <${cK}#${d.id}> for more info)`),delete Cv[c]}const t=IG().use(OW).use(e.remarkPlugins||[]).use(EZ,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use($Z,e),n=new GL;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let a=sn.createElement(sn.Fragment,{},kO({options:e,schema:zZ,listDepth:0},r));return e.className&&(a=sn.createElement("div",{className:e.className},a)),a}AO.propTypes={children:En.string,className:En.string,allowElement:En.func,allowedElements:En.arrayOf(En.string),disallowedElements:En.arrayOf(En.string),unwrapDisallowed:En.bool,remarkPlugins:En.arrayOf(En.oneOfType([En.object,En.func,En.arrayOf(En.oneOfType([En.bool,En.string,En.object,En.func,En.arrayOf(En.any)]))])),rehypePlugins:En.arrayOf(En.oneOfType([En.object,En.func,En.arrayOf(En.oneOfType([En.bool,En.string,En.object,En.func,En.arrayOf(En.any)]))])),sourcePos:En.bool,rawSourcePos:En.bool,skipHtml:En.bool,includeElementIndex:En.bool,transformLinkUri:En.oneOfType([En.func,En.bool]),linkTarget:En.oneOfType([En.func,En.string]),transformImageUri:En.func,components:En.object};function PC(){return PC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PC.apply(this,arguments)}var hK=["decorators"],fK=0;function dK(e,t,n){n===void 0&&(n="primitive"+ ++fK),t!=null||(t={set:function(E,A){return A},change:function(E,A){return A(E)}});var r=Jy(n)?{id:n}:n,a=r.decorators,c=a===void 0?[]:a,d=function(E,A){if(E==null)return{};var L,F,$={},N=Object.keys(E);for(F=0;F<N.length;F++)A.indexOf(L=N[F])>=0||($[L]=E[L]);return $}(r,hK);(c=c.slice()).unshift(function(E){return function(A,L){var F;return L.tracks==null&&(L.tracks=[],(F=L).state!=null||(F.state=e)),A.actions.forEach(function($){var N,Z=b.indexOf($.type);Z!=-1&&(L==L&&(L=Object.assign({},L)),L.state=(N=t)[l[Z]].apply(N,[L.state].concat($.payload)))}),L}});var l=Object.keys(t),x=b_(l.reduce(function(E,A){return E[A]=function(){return[].slice.call(arguments)},E},{}),r3,PC({decorators:c},d)),b=l.map(function(E){return x[E].type});return x}var pK=0;function mK(e,t){return e===void 0&&(e=!1),t===void 0&&(t="boolean"+ ++pK),dK(e,{toggle:function(n){return!n},setTrue:function(){return!0},setFalse:function(){return!1},change:function(n,r){return r(n)},set:function(n,r){return r}},t)}function IC(){return IC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IC.apply(this,arguments)}var gK=["decorators"],yK=0;function TO(e,t,n){n===void 0&&(n="primitive"+ ++yK),t!=null||(t={set:function(E,A){return A},change:function(E,A){return A(E)}});var r=Jy(n)?{id:n}:n,a=r.decorators,c=a===void 0?[]:a,d=function(E,A){if(E==null)return{};var L,F,$={},N=Object.keys(E);for(F=0;F<N.length;F++)A.indexOf(L=N[F])>=0||($[L]=E[L]);return $}(r,gK);(c=c.slice()).unshift(function(E){return function(A,L){var F;return L.tracks==null&&(L.tracks=[],(F=L).state!=null||(F.state=e)),A.actions.forEach(function($){var N,Z=b.indexOf($.type);Z!=-1&&(L==L&&(L=Object.assign({},L)),L.state=(N=t)[l[Z]].apply(N,[L.state].concat($.payload)))}),L}});var l=Object.keys(t),x=b_(l.reduce(function(E,A){return E[A]=function(){return[].slice.call(arguments)},E},{}),r3,IC({decorators:c},d)),b=l.map(function(E){return x[E].type});return x}const _K={APP_LOGIN:"app_login",ANALYTICS_PANEL:"analytics_panel",ADVANCED_ANALYTICS_PANEL:"advanced_analytics_panel",EVENTS_LIST:"events_list",FEED_SELECTOR:"feed_selector",EVENTS_LIST__FEED_SELECTOR:"events_list__feed_selector",EVENTS_LIST__BBOX_FILTER:"events_list__bbox_filter",MAP_LAYERS_PANEL:"map_layers_panel",SIDE_BAR:"side_bar",BIVARIATE_MANAGER:"bivariate_manager",CURRENT_EVENT:"current_event",FOCUSED_GEOMETRY_LAYER:"focused_geometry_layer",LAYERS_IN_AREA:"layers_in_area",MAP_RULER:"map_ruler",TOASTS:"toasts",BOUNDARY_SELECTOR:"boundary_selector",DRAW_TOOLS:"draw_tools",FOCUSED_GEOMETRY_EDITOR:"focused_geometry_editor",GEOMETRY_UPLOADER:"geometry_uploader",LEGEND_PANEL:"legend_panel",REPORTS:"reports",INTERACTIVE_MAP:"interactive_map",CURRENT_EPISODE:"current_episode",GEOCODER:"geocoder",EPISODE_LIST:"episode_list",COMMUNITIES:"communities",FEATURE_SETTINGS:"feature_settings",OSM_EDIT_LINK:"osm_edit_link",TOOLTIP:"tooltip",CREATE_LAYER:"create_layer",HEADER:"header",INTERCOM:"intercom",BIVARIATE_COLOR_MANAGER:"bivariate_color_manager",EPISODES_TIMELINE:"episodes_timeline",LOCATE_ME:"locate_me",USE_3RDPARTY_ANALYTICS:"use_3rdparty_analytics",LIVE_SENSOR:"live_sensor",MCDA:"mcda"},vK="METRICS";function xK(e,t){if(!globalThis.CustomEvent)return;const n=new CustomEvent(vK,{detail:{name:e,payload:t}});globalThis.dispatchEvent(n)}class bK{constructor(){an(this,"storage",new Map)}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}get length(){return this.storage.size}key(t){return this.storage.keys()[t]??null}}class PO{constructor(t){an(this,"storage");this.storageAvailable(t)?this.storage=globalThis[t]:(console.warn("Switching to in memory storage"),this.storage=new bK)}storageAvailable(t){try{const n=globalThis[t],r="__storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(n){console.warn(`${t} in not available.`),console.debug(n)}}setItem(t,n){return this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}get length(){return this.storage.length}clear(){return this.storage.clear()}key(t){return this.storage.key(t)}removeItem(t){return this.storage.removeItem(t)}}new PO("sessionStorage");const Lh=new PO("localStorage"),f3=!!Lh.getItem("KONTUR_DEBUG");Lh.getItem("KONTUR_METRICS_DEBUG");Lh.getItem("KONTUR_WARN");const s4=Lh.getItem("KONTUR_TRACE_TYPE"),wK=!!Lh.getItem("KONTUR_TRACE_PATCH");function SK(e){var n;const t=`\x1B[94m${Math.trunc(performance.now())}\x1B[m `;(n=e.actions.filter(r=>!r.type.startsWith("invalidate ")))==null||n.map(r=>{var a;if(((a=r.targets)==null?void 0:a.length)===1){const c=String(r.targets[0].id);if(r.type.endsWith(c)){const d=r.type.substring(0,r.type.length-c.length-1),l={_error:"\x1B[30;101m",_done:"\x1B[30;102m"}[d]??"\x1B[22;31m";console.warn(`${t}\x1B[1;32m${c} ${l}${d}\x1B[m`,r.payload,{"+":e.causes})}}else console.warn(`${t}\x1B[1;32m${r.type}\x1B[m`,r.payload,r.targets,{"+":e.causes})})}function CK(){return UL({onPatch:e=>{{wK&&SK(e);for(const t of e.actions)t.type.includes("invalidate")||(xK(t.type,t.payload),s4&&t.type.includes(s4)&&console.trace("TRACE:",t.type,e))}}})}const IO=CK(),Tb=e=>({store:IO,...typeof e=="string"?{id:e}:e}),Jr=(e,t,n)=>b_(e,t,Tb(n)),MO=(e,t)=>mK(e,Tb(t));let LO=0;function OO(e=new Set,t=`set${++LO}`){return TO(e,{set:(n,r)=>n.has(r)?n:new Set(n).add(r),delete:(n,r)=>{const a=n=new Set(n);return a.delete(r)?a:n},clear:()=>new Set,change:(n,r)=>r(new Set(n))},Tb(t))}function mm(e=new Map,t=`map${++LO}`){return TO(e,{set:(n,r,a)=>n.get(r)===a?n:new Map(n).set(r,a),delete:(n,r)=>{const a=n=new Map(n);return a.delete(r)?a:n},clear:()=>new Map,change:(n,r)=>r(new Map(n))},Tb(t))}const e_=Jr({setCurrentTooltip:e=>e,resetCurrentTooltip:()=>null,turnOffById:e=>e},({onAction:e},t=null)=>(e("setCurrentTooltip",n=>t=n),e("resetCurrentTooltip",()=>t=null),e("turnOffById",n=>{(t==null?void 0:t.initiatorId)===n&&(t=null)}),t),"[Shared state] currentTooltipAtom");function EK(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function kK(e,t){e.classList?e.classList.add(t):EK(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function l4(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function AK(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=l4(e.className,t):e.setAttribute("class",l4(e.className&&e.className.baseVal||"",t))}const u4={disabled:!1},FO=sn.createContext(null);var RO=function(t){return t.scrollTop},ny="unmounted",Lf="exited",Of="entering",gp="entered",MC="exiting",ac=function(e){Is(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var d=a,l=d&&!d.isMounting?r.enter:r.appear,x;return c.appearStatus=null,r.in?l?(x=Lf,c.appearStatus=Of):x=gp:r.unmountOnExit||r.mountOnEnter?x=ny:x=Lf,c.state={status:x},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var d=a.in;return d&&c.status===ny?{status:Lf}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var c=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==Of&&d!==gp&&(c=Of):(d===Of||d===gp)&&(c=MC)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,c,d,l;return c=d=l=a,a!=null&&typeof a!="number"&&(c=a.exit,d=a.enter,l=a.appear!==void 0?a.appear:d),{exit:c,enter:d,appear:l}},n.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===Of){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:sv.findDOMNode(this);d&&RO(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Lf&&this.setState({status:ny})},n.performEnter=function(a){var c=this,d=this.props.enter,l=this.context?this.context.isMounting:a,x=this.props.nodeRef?[l]:[sv.findDOMNode(this),l],b=x[0],E=x[1],A=this.getTimeouts(),L=l?A.appear:A.enter;if(!a&&!d||u4.disabled){this.safeSetState({status:gp},function(){c.props.onEntered(b)});return}this.props.onEnter(b,E),this.safeSetState({status:Of},function(){c.props.onEntering(b,E),c.onTransitionEnd(L,function(){c.safeSetState({status:gp},function(){c.props.onEntered(b,E)})})})},n.performExit=function(){var a=this,c=this.props.exit,d=this.getTimeouts(),l=this.props.nodeRef?void 0:sv.findDOMNode(this);if(!c||u4.disabled){this.safeSetState({status:Lf},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:MC},function(){a.props.onExiting(l),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:Lf},function(){a.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},n.setNextCallback=function(a){var c=this,d=!0;return this.nextCallback=function(l){d&&(d=!1,c.nextCallback=null,a(l))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(a,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:sv.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!d||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],b=x[0],E=x[1];this.props.addEndListener(b,E)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===ny)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var l=od(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sn.createElement(FO.Provider,{value:null},typeof d=="function"?d(a,l):sn.cloneElement(sn.Children.only(d),l))},t}(sn.Component);ac.contextType=FO;ac.propTypes={};function lp(){}ac.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lp,onEntering:lp,onEntered:lp,onExit:lp,onExiting:lp,onExited:lp};ac.UNMOUNTED=ny;ac.EXITED=Lf;ac.ENTERING=Of;ac.ENTERED=gp;ac.EXITING=MC;const TK=ac;var PK=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return kK(t,r)})},T2=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return AK(t,r)})},d3=function(e){Is(t,e);function t(){for(var r,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=e.call.apply(e,[this].concat(c))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(l,x){var b=r.resolveArguments(l,x),E=b[0],A=b[1];r.removeClasses(E,"exit"),r.addClass(E,A?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(l,x)},r.onEntering=function(l,x){var b=r.resolveArguments(l,x),E=b[0],A=b[1],L=A?"appear":"enter";r.addClass(E,L,"active"),r.props.onEntering&&r.props.onEntering(l,x)},r.onEntered=function(l,x){var b=r.resolveArguments(l,x),E=b[0],A=b[1],L=A?"appear":"enter";r.removeClasses(E,L),r.addClass(E,L,"done"),r.props.onEntered&&r.props.onEntered(l,x)},r.onExit=function(l){var x=r.resolveArguments(l),b=x[0];r.removeClasses(b,"appear"),r.removeClasses(b,"enter"),r.addClass(b,"exit","base"),r.props.onExit&&r.props.onExit(l)},r.onExiting=function(l){var x=r.resolveArguments(l),b=x[0];r.addClass(b,"exit","active"),r.props.onExiting&&r.props.onExiting(l)},r.onExited=function(l){var x=r.resolveArguments(l),b=x[0];r.removeClasses(b,"exit"),r.addClass(b,"exit","done"),r.props.onExited&&r.props.onExited(l)},r.resolveArguments=function(l,x){return r.props.nodeRef?[r.props.nodeRef.current,l]:[l,x]},r.getClassNames=function(l){var x=r.props.classNames,b=typeof x=="string",E=b&&x?x+"-":"",A=b?""+E+l:x[l],L=b?A+"-active":x[l+"Active"],F=b?A+"-done":x[l+"Done"];return{baseClassName:A,activeClassName:L,doneClassName:F}},r}var n=t.prototype;return n.addClass=function(a,c,d){var l=this.getClassNames(c)[d+"ClassName"],x=this.getClassNames("enter"),b=x.doneClassName;c==="appear"&&d==="done"&&b&&(l+=" "+b),d==="active"&&a&&RO(a),l&&(this.appliedClasses[c][d]=l,PK(a,l))},n.removeClasses=function(a,c){var d=this.appliedClasses[c],l=d.base,x=d.active,b=d.done;this.appliedClasses[c]={},l&&T2(a,l),x&&T2(a,x),b&&T2(a,b)},n.render=function(){var a=this.props;a.classNames;var c=od(a,["classNames"]);return sn.createElement(TK,Io({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(sn.Component);d3.defaultProps={classNames:""};d3.propTypes={};const IK=d3;function Th(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}const MK="_fadeEnter_1fjeq_1",LK="_fadeEnterActive_1fjeq_5",OK="_fadeExit_1fjeq_10",FK="_fadeExitActive_1fjeq_14",Ev={fadeEnter:MK,fadeEnterActive:LK,fadeExit:OK,fadeExitActive:FK},RK={enter:Ev.fadeEnter,enterActive:Ev.fadeEnterActive,exit:Ev.fadeExit,exitActive:Ev.fadeExitActive},DK=({children:e,...t})=>{const n=pt.useRef(null);return Xe(IK,{...t,nodeRef:n,children:e(n)})};function zK(e){if(!e)return"";let t=e;const n=/(.?.?https|.?.?http)(:\/\/)([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/gm,r=e.matchAll(n);let a=0;return[...r].forEach(c=>{const[d,l,,x,b]=c,E=c.index??0,A=d.length;if(d.startsWith("](")||d.indexOf("[http")>-1)return;const L=d.indexOf("http"),F=d.substring(L),$=d.substring(0,L),N=x.replace("www.",""),Z=`${$}[${N}${b??""}](${F})`,R=BK(t)(E+a,A,Z);a+=Z.length-A,t=R}),t}function BK(e){return function(t,n,r){return t<0&&(t+=e.length,t<0&&(t=0)),e.slice(0,t)+(r||"")+e.slice(t+n)}}const DO=pt.memo(function(e){return Xe("a",{href:e.href,target:"_blank",rel:"noreferrer",onClick:$K,children:e.children})});function $K(e){e.stopPropagation()}DO.displayName="LinkRenderer";const LC=EL(),NK=Jr({_set:e=>e},({onAction:e,onInit:t,schedule:n,create:r},a=LC.location)=>(t(()=>{n(c=>{LC.listen(d=>{c(r("_set",d))})})}),e("_set",c=>a=c),a),"currentLocationAtom"),UK=Jr({currentLocationAtom:NK},({onChange:e,schedule:t,getUnlistedState:n})=>{e("currentLocationAtom",(r,a)=>{const c=n(e_);r.pathname!==(a==null?void 0:a.pathname)&&(c!=null&&c.position)&&t(d=>{d(e_.resetCurrentTooltip())})})},"closeOnLocationChangeAtom"),jK="_markdown_mj6ia_1",VK={markdown:jK};function zO(){const[e,{resetCurrentTooltip:t}]=_5(e_);_5(UK);const n=pt.useCallback(a=>{var c;t(),(c=e==null?void 0:e.onClose)==null||c.call(e,a,t)},[t,e]),r=pt.useCallback(a=>{var c;(c=e==null?void 0:e.onOuterClick)==null||c.call(e,a,t)},[t,e]);return Xe(DK,{in:!!e,timeout:300,classNames:RK,children:a=>Xe(qx,{children:e&&Xe(UV,{transitionRef:a,position:e.position,hoverBehavior:e.hoverBehavior,getPlacement:e.position.predefinedPosition,classes:e.popupClasses,onClose:n,onOuterClick:r,children:typeof e.popup=="string"?Xe(AO,{components:{a:DO},className:VK.markdown,children:zK(e.popup)}):e.popup})})})}function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function Rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qK(e,t){if(_l(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_l(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BO(e){var t=qK(e,"string");return _l(t)==="symbol"?t:String(t)}function c4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BO(r.key),r)}}function Ds(e,t,n){return t&&c4(e.prototype,t),n&&c4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V1(e,t)}function C_(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Th(e)}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},su(e)}function sc(e,t,n){return t=BO(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GK(e){if(Array.isArray(e))return e}function HK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WK(e,t){if(e){if(typeof e=="string")return h4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h4(e,t)}}function ZK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KK(e){return GK(e)||HK(e)||WK(e)||ZK()}function f4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function d4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var XK={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,n){console&&console[t]&&console[t].apply(console,n)}},YK=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rs(this,e),this.init(t,n)}return Ds(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||XK,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,r,a,c){return c&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(a).concat(this.prefix," ").concat(n[0])),this.logger[r](n))}},{key:"create",value:function(n){return new e(this.logger,d4(d4({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new e(this.logger,n)}}]),e}(),tu=new YK,Oh=function(){function e(){Rs(this,e),this.observers={}}return Ds(e,[{key:"on",value:function(n,r){var a=this;return n.split(" ").forEach(function(c){a.observers[c]=a.observers[c]||[],a.observers[c].push(r)}),this}},{key:"off",value:function(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(a){return a!==r})}}},{key:"emit",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];if(this.observers[n]){var d=[].concat(this.observers[n]);d.forEach(function(x){x.apply(void 0,a)})}if(this.observers["*"]){var l=[].concat(this.observers["*"]);l.forEach(function(x){x.apply(x,[n].concat(a))})}}}]),e}();function jg(){var e,t,n=new Promise(function(r,a){e=r,t=a});return n.resolve=e,n.reject=t,n}function p4(e){return e==null?"":""+e}function JK(e,t,n){e.forEach(function(r){t[r]&&(n[r]=t[r])})}function p3(e,t,n){function r(l){return l&&l.indexOf("###")>-1?l.replace(/###/g,"."):l}function a(){return!e||typeof e=="string"}for(var c=typeof t!="string"?[].concat(t):t.split(".");c.length>1;){if(a())return{};var d=r(c.shift());!e[d]&&n&&(e[d]=new n),Object.prototype.hasOwnProperty.call(e,d)?e=e[d]:e={}}return a()?{}:{obj:e,k:r(c.shift())}}function m4(e,t,n){var r=p3(e,t,Object),a=r.obj,c=r.k;a[c]=n}function QK(e,t,n,r){var a=p3(e,t,Object),c=a.obj,d=a.k;c[d]=c[d]||[],r&&(c[d]=c[d].concat(n)),r||c[d].push(n)}function W1(e,t){var n=p3(e,t),r=n.obj,a=n.k;if(r)return r[a]}function g4(e,t,n){var r=W1(e,n);return r!==void 0?r:W1(t,n)}function $O(e,t,n){for(var r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):$O(e[r],t[r],n):e[r]=t[r]);return e}function up(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var eX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function tX(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return eX[t]}):e}var Ib=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,nX=[" ",",","?","!",";"];function rX(e,t,n){t=t||"",n=n||"";var r=nX.filter(function(l){return t.indexOf(l)<0&&n.indexOf(l)<0});if(r.length===0)return!0;var a=new RegExp("(".concat(r.map(function(l){return l==="?"?"\\?":l}).join("|"),")")),c=!a.test(e);if(!c){var d=e.indexOf(n);d>0&&!a.test(e.substring(0,d))&&(c=!0)}return c}function y4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iX(e){var t=oX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function oX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function NO(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),a=e,c=0;c<r.length;++c){if(!a||typeof a[r[c]]=="string"&&c+1<r.length)return;if(a[r[c]]===void 0){for(var d=2,l=r.slice(c,c+d).join(n),x=a[l];x===void 0&&r.length>c+d;)d++,l=r.slice(c,c+d).join(n),x=a[l];if(x===void 0)return;if(x===null)return null;if(t.endsWith(l)){if(typeof x=="string")return x;if(l&&typeof x[l]=="string")return x[l]}var b=r.slice(c+d).join(n);return b?NO(x,b,n):void 0}a=a[r[c]]}return a}}var aX=function(e){Pb(n,e);var t=iX(n);function n(r){var a,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Rs(this,n),a=t.call(this),Ib&&Oh.call(Th(a)),a.data=r||{},a.options=c,a.options.keySeparator===void 0&&(a.options.keySeparator="."),a.options.ignoreJSONStructure===void 0&&(a.options.ignoreJSONStructure=!0),a}return Ds(n,[{key:"addNamespaces",value:function(a){this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}},{key:"removeNamespaces",value:function(a){var c=this.options.ns.indexOf(a);c>-1&&this.options.ns.splice(c,1)}},{key:"getResource",value:function(a,c,d){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},x=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,b=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure,E=[a,c];d&&typeof d!="string"&&(E=E.concat(d)),d&&typeof d=="string"&&(E=E.concat(x?d.split(x):d)),a.indexOf(".")>-1&&(E=a.split("."));var A=W1(this.data,E);return A||!b||typeof d!="string"?A:NO(this.data&&this.data[a]&&this.data[a][c],d,x)}},{key:"addResource",value:function(a,c,d,l){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},b=this.options.keySeparator;b===void 0&&(b=".");var E=[a,c];d&&(E=E.concat(b?d.split(b):d)),a.indexOf(".")>-1&&(E=a.split("."),l=c,c=E[1]),this.addNamespaces(c),m4(this.data,E,l),x.silent||this.emit("added",a,c,d,l)}},{key:"addResources",value:function(a,c,d){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var x in d)(typeof d[x]=="string"||Object.prototype.toString.apply(d[x])==="[object Array]")&&this.addResource(a,c,x,d[x],{silent:!0});l.silent||this.emit("added",a,c,d)}},{key:"addResourceBundle",value:function(a,c,d,l,x){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},E=[a,c];a.indexOf(".")>-1&&(E=a.split("."),l=d,d=c,c=E[1]),this.addNamespaces(c);var A=W1(this.data,E)||{};l?$O(A,d,x):A=kv(kv({},A),d),m4(this.data,E,A),b.silent||this.emit("added",a,c,d)}},{key:"removeResourceBundle",value:function(a,c){this.hasResourceBundle(a,c)&&delete this.data[a][c],this.removeNamespaces(c),this.emit("removed",a,c)}},{key:"hasResourceBundle",value:function(a,c){return this.getResource(a,c)!==void 0}},{key:"getResourceBundle",value:function(a,c){return c||(c=this.options.defaultNS),this.options.compatibilityAPI==="v1"?kv(kv({},{}),this.getResource(a,c)):this.getResource(a,c)}},{key:"getDataByLanguage",value:function(a){return this.data[a]}},{key:"hasLanguageSomeTranslations",value:function(a){var c=this.getDataByLanguage(a),d=c&&Object.keys(c)||[];return!!d.find(function(l){return c[l]&&Object.keys(c[l]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(Oh),UO={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,n,r,a,c){var d=this;return t.forEach(function(l){d.processors[l]&&(n=d.processors[l].process(n,r,a,c))}),n}};function _4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sX(e){var t=lX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function lX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var v4={},x4=function(e){Pb(n,e);var t=sX(n);function n(r){var a,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Rs(this,n),a=t.call(this),Ib&&Oh.call(Th(a)),JK(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,Th(a)),a.options=c,a.options.keySeparator===void 0&&(a.options.keySeparator="."),a.logger=tu.create("translator"),a}return Ds(n,[{key:"changeLanguage",value:function(a){a&&(this.language=a)}},{key:"exists",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(a==null)return!1;var d=this.resolve(a,c);return d&&d.res!==void 0}},{key:"extractFromKey",value:function(a,c){var d=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");var l=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,x=c.ns||this.options.defaultNS||[],b=d&&a.indexOf(d)>-1,E=!this.options.userDefinedKeySeparator&&!c.keySeparator&&!this.options.userDefinedNsSeparator&&!c.nsSeparator&&!rX(a,d,l);if(b&&!E){var A=a.match(this.interpolator.nestingRegexp);if(A&&A.length>0)return{key:a,namespaces:x};var L=a.split(d);(d!==l||d===l&&this.options.ns.indexOf(L[0])>-1)&&(x=L.shift()),a=L.join(l)}return typeof x=="string"&&(x=[x]),{key:a,namespaces:x}}},{key:"translate",value:function(a,c,d){var l=this;if(_l(c)!=="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),c||(c={}),a==null)return"";Array.isArray(a)||(a=[String(a)]);var x=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,b=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,E=this.extractFromKey(a[a.length-1],c),A=E.key,L=E.namespaces,F=L[L.length-1],$=c.lng||this.language,N=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if($&&$.toLowerCase()==="cimode"){if(N){var Z=c.nsSeparator||this.options.nsSeparator;return x?(R.res="".concat(F).concat(Z).concat(A),R):"".concat(F).concat(Z).concat(A)}return x?(R.res=A,R):A}var R=this.resolve(a,c),q=R&&R.res,G=R&&R.usedKey||A,ee=R&&R.exactUsedKey||A,ae=Object.prototype.toString.apply(q),K=["[object Number]","[object Function]","[object RegExp]"],le=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,xe=!this.i18nFormat||this.i18nFormat.handleAsObject,Le=typeof q!="string"&&typeof q!="boolean"&&typeof q!="number";if(xe&&q&&Le&&K.indexOf(ae)<0&&!(typeof le=="string"&&ae==="[object Array]")){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var Oe=this.options.returnedObjectHandler?this.options.returnedObjectHandler(G,q,sa(sa({},c),{},{ns:L})):"key '".concat(A," (").concat(this.language,")' returned an object instead of string.");return x?(R.res=Oe,R):Oe}if(b){var Fe=ae==="[object Array]",Ge=Fe?[]:{},tt=Fe?ee:G;for(var yt in q)if(Object.prototype.hasOwnProperty.call(q,yt)){var At="".concat(tt).concat(b).concat(yt);Ge[yt]=this.translate(At,sa(sa({},c),{joinArrays:!1,ns:L})),Ge[yt]===At&&(Ge[yt]=q[yt])}q=Ge}}else if(xe&&typeof le=="string"&&ae==="[object Array]")q=q.join(le),q&&(q=this.extendTranslation(q,a,c,d));else{var zt=!1,Vt=!1,Ve=c.count!==void 0&&typeof c.count!="string",_e=n.hasDefaultValue(c),we=Ve?this.pluralResolver.getSuffix($,c.count,c):"",X=c["defaultValue".concat(we)]||c.defaultValue;!this.isValidLookup(q)&&_e&&(zt=!0,q=X),this.isValidLookup(q)||(Vt=!0,q=A);var oe=c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,lt=oe&&Vt?void 0:q,mt=_e&&X!==q&&this.options.updateMissing;if(Vt||zt||mt){if(this.logger.log(mt?"updateKey":"missingKey",$,F,A,mt?X:q),b){var Gt=this.resolve(A,sa(sa({},c),{},{keySeparator:!1}));Gt&&Gt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Dt=[],Qt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Qt&&Qt[0])for(var un=0;un<Qt.length;un++)Dt.push(Qt[un]);else this.options.saveMissingTo==="all"?Dt=this.languageUtils.toResolveHierarchy(c.lng||this.language):Dt.push(c.lng||this.language);var Xn=function(Bn,Qr,Je){var yr=_e&&Je!==q?Je:lt;l.options.missingKeyHandler?l.options.missingKeyHandler(Bn,F,Qr,yr,mt,c):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(Bn,F,Qr,yr,mt,c),l.emit("missingKey",Bn,F,Qr,q)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Ve?Dt.forEach(function(Qn){l.pluralResolver.getSuffixes(Qn,c).forEach(function(Bn){Xn([Qn],A+Bn,c["defaultValue".concat(Bn)]||X)})}):Xn(Dt,A,X))}q=this.extendTranslation(q,a,c,R,d),Vt&&q===A&&this.options.appendNamespaceToMissingKey&&(q="".concat(F,":").concat(A)),(Vt||zt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?q=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(F,":").concat(A):A,zt?q:void 0):q=this.options.parseMissingKeyHandler(q))}return x?(R.res=q,R):q}},{key:"extendTranslation",value:function(a,c,d,l,x){var b=this;if(this.i18nFormat&&this.i18nFormat.parse)a=this.i18nFormat.parse(a,sa(sa({},this.options.interpolation.defaultVariables),d),l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!d.skipInterpolation){d.interpolation&&this.interpolator.init(sa(sa({},d),{interpolation:sa(sa({},this.options.interpolation),d.interpolation)}));var E=typeof a=="string"&&(d&&d.interpolation&&d.interpolation.skipOnVariables!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),A;if(E){var L=a.match(this.interpolator.nestingRegexp);A=L&&L.length}var F=d.replace&&typeof d.replace!="string"?d.replace:d;if(this.options.interpolation.defaultVariables&&(F=sa(sa({},this.options.interpolation.defaultVariables),F)),a=this.interpolator.interpolate(a,F,d.lng||this.language,d),E){var $=a.match(this.interpolator.nestingRegexp),N=$&&$.length;A<N&&(d.nest=!1)}d.nest!==!1&&(a=this.interpolator.nest(a,function(){for(var q=arguments.length,G=new Array(q),ee=0;ee<q;ee++)G[ee]=arguments[ee];return x&&x[0]===G[0]&&!d.context?(b.logger.warn("It seems you are nesting recursively key: ".concat(G[0]," in key: ").concat(c[0])),null):b.translate.apply(b,G.concat([c]))},d)),d.interpolation&&this.interpolator.reset()}var Z=d.postProcess||this.options.postProcess,R=typeof Z=="string"?[Z]:Z;return a!=null&&R&&R.length&&d.applyPostProcessor!==!1&&(a=UO.handle(R,a,c,this.options&&this.options.postProcessPassResolved?sa({i18nResolved:l},d):d,this)),a}},{key:"resolve",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,x,b,E,A;return typeof a=="string"&&(a=[a]),a.forEach(function(L){if(!c.isValidLookup(l)){var F=c.extractFromKey(L,d),$=F.key;x=$;var N=F.namespaces;c.options.fallbackNS&&(N=N.concat(c.options.fallbackNS));var Z=d.count!==void 0&&typeof d.count!="string",R=Z&&!d.ordinal&&d.count===0&&c.pluralResolver.shouldUseIntlApi(),q=d.context!==void 0&&(typeof d.context=="string"||typeof d.context=="number")&&d.context!=="",G=d.lngs?d.lngs:c.languageUtils.toResolveHierarchy(d.lng||c.language,d.fallbackLng);N.forEach(function(ee){c.isValidLookup(l)||(A=ee,!v4["".concat(G[0],"-").concat(ee)]&&c.utils&&c.utils.hasLoadedNamespace&&!c.utils.hasLoadedNamespace(A)&&(v4["".concat(G[0],"-").concat(ee)]=!0,c.logger.warn('key "'.concat(x,'" for languages "').concat(G.join(", "),`" won't get resolved as namespace "`).concat(A,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),G.forEach(function(ae){if(!c.isValidLookup(l)){E=ae;var K=[$];if(c.i18nFormat&&c.i18nFormat.addLookupKeys)c.i18nFormat.addLookupKeys(K,$,ae,ee,d);else{var le;Z&&(le=c.pluralResolver.getSuffix(ae,d.count,d));var xe="".concat(c.options.pluralSeparator,"zero");if(Z&&(K.push($+le),R&&K.push($+xe)),q){var Le="".concat($).concat(c.options.contextSeparator).concat(d.context);K.push(Le),Z&&(K.push(Le+le),R&&K.push(Le+xe))}}for(var Oe;Oe=K.pop();)c.isValidLookup(l)||(b=Oe,l=c.getResource(ae,ee,Oe,d))}}))})}}),{res:l,usedKey:x,exactUsedKey:b,usedLng:E,usedNS:A}}},{key:"isValidLookup",value:function(a){return a!==void 0&&!(!this.options.returnNull&&a===null)&&!(!this.options.returnEmptyString&&a==="")}},{key:"getResource",value:function(a,c,d){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(a,c,d,l):this.resourceStore.getResource(a,c,d,l)}}],[{key:"hasDefaultValue",value:function(a){var c="defaultValue";for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&c===d.substring(0,c.length)&&a[d]!==void 0)return!0;return!1}}]),n}(Oh);function P2(e){return e.charAt(0).toUpperCase()+e.slice(1)}var b4=function(){function e(t){Rs(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=tu.create("languageUtils")}return Ds(e,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var r=n.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],a=n.split("-");return this.options.lowerCaseLng?a=a.map(function(c){return c.toLowerCase()}):a.length===2?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),r.indexOf(a[1].toLowerCase())>-1&&(a[1]=P2(a[1].toLowerCase()))):a.length===3&&(a[0]=a[0].toLowerCase(),a[1].length===2&&(a[1]=a[1].toUpperCase()),a[0]!=="sgn"&&a[2].length===2&&(a[2]=a[2].toUpperCase()),r.indexOf(a[1].toLowerCase())>-1&&(a[1]=P2(a[1].toLowerCase())),r.indexOf(a[2].toLowerCase())>-1&&(a[2]=P2(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var r=this;if(!n)return null;var a;return n.forEach(function(c){if(!a){var d=r.formatLanguageCode(c);(!r.options.supportedLngs||r.isSupportedCode(d))&&(a=d)}}),!a&&this.options.supportedLngs&&n.forEach(function(c){if(!a){var d=r.getLanguagePartFromCode(c);if(r.isSupportedCode(d))return a=d;a=r.options.supportedLngs.find(function(l){if(l.indexOf(d)===0)return l})}}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}},{key:"getFallbackCodes",value:function(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];var a=n[r];return a||(a=n[this.getScriptPartFromCode(r)]),a||(a=n[this.formatLanguageCode(r)]),a||(a=n[this.getLanguagePartFromCode(r)]),a||(a=n.default),a||[]}},{key:"toResolveHierarchy",value:function(n,r){var a=this,c=this.getFallbackCodes(r||this.options.fallbackLng||[],n),d=[],l=function(b){b&&(a.isSupportedCode(b)?d.push(b):a.logger.warn("rejecting language code not found in supportedLngs: ".concat(b)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(n))):typeof n=="string"&&l(this.formatLanguageCode(n)),c.forEach(function(x){d.indexOf(x)<0&&l(a.formatLanguageCode(x))}),d}}]),e}(),uX=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],cX={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}},hX=["v1","v2","v3"],w4={zero:0,one:1,two:2,few:3,many:4,other:5};function fX(){var e={};return uX.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:cX[t.fc]}})}),e}var dX=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rs(this,e),this.languageUtils=t,this.options=n,this.logger=tu.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=fX()}return Ds(e,[{key:"addRule",value:function(n,r){this.rules[n]=r}},{key:"getRule",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(n,r);return this.shouldUseIntlApi()?a&&a.resolvedOptions().pluralCategories.length>1:a&&a.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,a).map(function(c){return"".concat(r).concat(c)})}},{key:"getSuffixes",value:function(n){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.getRule(n,a);return c?this.shouldUseIntlApi()?c.resolvedOptions().pluralCategories.sort(function(d,l){return w4[d]-w4[l]}).map(function(d){return"".concat(r.options.prepend).concat(d)}):c.numbers.map(function(d){return r.getSuffix(n,d,a)}):[]}},{key:"getSuffix",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=this.getRule(n,a);return c?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(c.select(r)):this.getSuffixRetroCompatible(c,r):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,r){var a=this,c=n.noAbs?n.plurals(r):n.plurals(Math.abs(r)),d=n.numbers[c];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(d===2?d="plural":d===1&&(d=""));var l=function(){return a.options.prepend&&d.toString()?a.options.prepend+d.toString():d.toString()};return this.options.compatibilityJSON==="v1"?d===1?"":typeof d=="number"?"_plural_".concat(d.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?l():this.options.prepend&&c.toString()?this.options.prepend+c.toString():c.toString()}},{key:"shouldUseIntlApi",value:function(){return!hX.includes(this.options.compatibilityJSON)}}]),e}();function S4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pX=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rs(this,e),this.logger=tu.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(n){return n},this.init(t)}return Ds(e,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var r=n.interpolation;this.escape=r.escape!==void 0?r.escape:tX,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?up(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?up(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?up(r.nestingPrefix):r.nestingPrefixEscaped||up("$t("),this.nestingSuffix=r.nestingSuffix?up(r.nestingSuffix):r.nestingSuffixEscaped||up(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var a="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(a,"g")}},{key:"interpolate",value:function(n,r,a,c){var d=this,l,x,b,E=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function A(Z){return Z.replace(/\$/g,"$$$$")}var L=function(R){if(R.indexOf(d.formatSeparator)<0){var q=g4(r,E,R);return d.alwaysFormat?d.format(q,void 0,a,cl(cl(cl({},c),r),{},{interpolationkey:R})):q}var G=R.split(d.formatSeparator),ee=G.shift().trim(),ae=G.join(d.formatSeparator).trim();return d.format(g4(r,E,ee),ae,a,cl(cl(cl({},c),r),{},{interpolationkey:ee}))};this.resetRegExp();var F=c&&c.missingInterpolationHandler||this.options.missingInterpolationHandler,$=c&&c.interpolation&&c.interpolation.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,N=[{regex:this.regexpUnescape,safeValue:function(R){return A(R)}},{regex:this.regexp,safeValue:function(R){return d.escapeValue?A(d.escape(R)):A(R)}}];return N.forEach(function(Z){for(b=0;l=Z.regex.exec(n);){var R=l[1].trim();if(x=L(R),x===void 0)if(typeof F=="function"){var q=F(n,l,c);x=typeof q=="string"?q:""}else if(c&&c.hasOwnProperty(R))x="";else if($){x=l[0];continue}else d.logger.warn("missed to pass in variable ".concat(R," for interpolating ").concat(n)),x="";else typeof x!="string"&&!d.useRawValueToEscape&&(x=p4(x));var G=Z.safeValue(x);if(n=n.replace(l[0],G),$?(Z.regex.lastIndex+=x.length,Z.regex.lastIndex-=l[0].length):Z.regex.lastIndex=0,b++,b>=d.maxReplaces)break}}),n}},{key:"nest",value:function(n,r){var a=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d,l,x;function b(F,$){var N=this.nestingOptionsSeparator;if(F.indexOf(N)<0)return F;var Z=F.split(new RegExp("".concat(N,"[ ]*{"))),R="{".concat(Z[1]);F=Z[0],R=this.interpolate(R,x);var q=R.match(/'/g),G=R.match(/"/g);(q&&q.length%2===0&&!G||G.length%2!==0)&&(R=R.replace(/'/g,'"'));try{x=JSON.parse(R),$&&(x=cl(cl({},$),x))}catch(ee){return this.logger.warn("failed parsing options string in nesting for key ".concat(F),ee),"".concat(F).concat(N).concat(R)}return delete x.defaultValue,F}for(;d=this.nestingRegexp.exec(n);){var E=[];x=cl({},c),x=x.replace&&typeof x.replace!="string"?x.replace:x,x.applyPostProcessor=!1,delete x.defaultValue;var A=!1;if(d[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(d[1])){var L=d[1].split(this.formatSeparator).map(function(F){return F.trim()});d[1]=L.shift(),E=L,A=!0}if(l=r(b.call(this,d[1].trim(),x),x),l&&d[0]===n&&typeof l!="string")return l;typeof l!="string"&&(l=p4(l)),l||(this.logger.warn("missed to resolve ".concat(d[1]," for nesting ").concat(n)),l=""),A&&(l=E.reduce(function(F,$){return a.format(F,$,c.lng,cl(cl({},c),{},{interpolationkey:d[1].trim()}))},l.trim())),n=n.replace(d[0],l),this.regexp.lastIndex=0}return n}}]),e}();function C4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ah(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mX(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var a=r[1].substring(0,r[1].length-1);if(t==="currency"&&a.indexOf(":")<0)n.currency||(n.currency=a.trim());else if(t==="relativetime"&&a.indexOf(":")<0)n.range||(n.range=a.trim());else{var c=a.split(";");c.forEach(function(d){if(d){var l=d.split(":"),x=KK(l),b=x[0],E=x.slice(1),A=E.join(":").trim().replace(/^'+|'+$/g,"");n[b.trim()]||(n[b.trim()]=A),A==="false"&&(n[b.trim()]=!1),A==="true"&&(n[b.trim()]=!0),isNaN(A)||(n[b.trim()]=parseInt(A,10))}})}}return{formatName:t,formatOptions:n}}function cp(e){var t={};return function(r,a,c){var d=a+JSON.stringify(c),l=t[d];return l||(l=e(a,c),t[d]=l),l(r)}}var gX=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rs(this,e),this.logger=tu.create("formatter"),this.options=t,this.formats={number:cp(function(n,r){var a=new Intl.NumberFormat(n,r);return function(c){return a.format(c)}}),currency:cp(function(n,r){var a=new Intl.NumberFormat(n,ah(ah({},r),{},{style:"currency"}));return function(c){return a.format(c)}}),datetime:cp(function(n,r){var a=new Intl.DateTimeFormat(n,ah({},r));return function(c){return a.format(c)}}),relativetime:cp(function(n,r){var a=new Intl.RelativeTimeFormat(n,ah({},r));return function(c){return a.format(c,r.range||"day")}}),list:cp(function(n,r){var a=new Intl.ListFormat(n,ah({},r));return function(c){return a.format(c)}})},this.init(t)}return Ds(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},a=r.interpolation;this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||","}},{key:"add",value:function(n,r){this.formats[n.toLowerCase().trim()]=r}},{key:"addCached",value:function(n,r){this.formats[n.toLowerCase().trim()]=cp(r)}},{key:"format",value:function(n,r,a,c){var d=this,l=r.split(this.formatSeparator),x=l.reduce(function(b,E){var A=mX(E),L=A.formatName,F=A.formatOptions;if(d.formats[L]){var $=b;try{var N=c&&c.formatParams&&c.formatParams[c.interpolationkey]||{},Z=N.locale||N.lng||c.locale||c.lng||a;$=d.formats[L](b,Z,ah(ah(ah({},F),c),N))}catch(R){d.logger.warn(R)}return $}else d.logger.warn("there was no format function for ".concat(L));return b},n);return x}}]),e}();function E4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function k4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yX(e){var t=_X();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function _X(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vX(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var xX=function(e){Pb(n,e);var t=yX(n);function n(r,a,c){var d,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Rs(this,n),d=t.call(this),Ib&&Oh.call(Th(d)),d.backend=r,d.store=a,d.services=c,d.languageUtils=c.languageUtils,d.options=l,d.logger=tu.create("backendConnector"),d.waitingReads=[],d.maxParallelReads=l.maxParallelReads||10,d.readingCalls=0,d.maxRetries=l.maxRetries>=0?l.maxRetries:5,d.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,d.state={},d.queue=[],d.backend&&d.backend.init&&d.backend.init(c,l.backend,l),d}return Ds(n,[{key:"queueLoad",value:function(a,c,d,l){var x=this,b={},E={},A={},L={};return a.forEach(function(F){var $=!0;c.forEach(function(N){var Z="".concat(F,"|").concat(N);!d.reload&&x.store.hasResourceBundle(F,N)?x.state[Z]=2:x.state[Z]<0||(x.state[Z]===1?E[Z]===void 0&&(E[Z]=!0):(x.state[Z]=1,$=!1,E[Z]===void 0&&(E[Z]=!0),b[Z]===void 0&&(b[Z]=!0),L[N]===void 0&&(L[N]=!0)))}),$||(A[F]=!0)}),(Object.keys(b).length||Object.keys(E).length)&&this.queue.push({pending:E,pendingCount:Object.keys(E).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(b),pending:Object.keys(E),toLoadLanguages:Object.keys(A),toLoadNamespaces:Object.keys(L)}}},{key:"loaded",value:function(a,c,d){var l=a.split("|"),x=l[0],b=l[1];c&&this.emit("failedLoading",x,b,c),d&&this.store.addResourceBundle(x,b,d),this.state[a]=c?-1:2;var E={};this.queue.forEach(function(A){QK(A.loaded,[x],b),vX(A,a),c&&A.errors.push(c),A.pendingCount===0&&!A.done&&(Object.keys(A.loaded).forEach(function(L){E[L]||(E[L]={});var F=A.loaded[L];F.length&&F.forEach(function($){E[L][$]===void 0&&(E[L][$]=!0)})}),A.done=!0,A.errors.length?A.callback(A.errors):A.callback())}),this.emit("loaded",E),this.queue=this.queue.filter(function(A){return!A.done})}},{key:"read",value:function(a,c,d){var l=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,E=arguments.length>5?arguments[5]:void 0;if(!a.length)return E(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:a,ns:c,fcName:d,tried:x,wait:b,callback:E});return}this.readingCalls++;var A=function(N,Z){if(l.readingCalls--,l.waitingReads.length>0){var R=l.waitingReads.shift();l.read(R.lng,R.ns,R.fcName,R.tried,R.wait,R.callback)}if(N&&Z&&x<l.maxRetries){setTimeout(function(){l.read.call(l,a,c,d,x+1,b*2,E)},b);return}E(N,Z)},L=this.backend[d].bind(this.backend);if(L.length===2){try{var F=L(a,c);F&&typeof F.then=="function"?F.then(function($){return A(null,$)}).catch(A):A(null,F)}catch($){A($)}return}return L(a,c,A)}},{key:"prepareLoading",value:function(a,c){var d=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),x&&x();typeof a=="string"&&(a=this.languageUtils.toResolveHierarchy(a)),typeof c=="string"&&(c=[c]);var b=this.queueLoad(a,c,l,x);if(!b.toLoad.length)return b.pending.length||x(),null;b.toLoad.forEach(function(E){d.loadOne(E)})}},{key:"load",value:function(a,c,d){this.prepareLoading(a,c,{},d)}},{key:"reload",value:function(a,c,d){this.prepareLoading(a,c,{reload:!0},d)}},{key:"loadOne",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.split("|"),x=l[0],b=l[1];this.read(x,b,"read",void 0,void 0,function(E,A){E&&c.logger.warn("".concat(d,"loading namespace ").concat(b," for language ").concat(x," failed"),E),!E&&A&&c.logger.log("".concat(d,"loaded namespace ").concat(b," for language ").concat(x),A),c.loaded(a,E,A)})}},{key:"saveMissing",value:function(a,c,d,l,x){var b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},E=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(c)){this.logger.warn('did not save key "'.concat(d,'" as the namespace "').concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(d==null||d==="")){if(this.backend&&this.backend.create){var A=k4(k4({},b),{},{isUpdate:x}),L=this.backend.create.bind(this.backend);if(L.length<6)try{var F;L.length===5?F=L(a,c,d,l,A):F=L(a,c,d,l),F&&typeof F.then=="function"?F.then(function($){return E(null,$)}).catch(E):E(null,F)}catch($){E($)}else L(a,c,d,l,E,A)}!a||!a[0]||this.store.addResource(a[0],c,d,l)}}}]),n}(Oh);function A4(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var n={};if(_l(t[1])==="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),_l(t[2])==="object"||_l(t[3])==="object"){var r=t[3]||t[2];Object.keys(r).forEach(function(a){n[a]=r[a]})}return n},interpolation:{escapeValue:!0,format:function(t,n,r,a){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function T4(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function P4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bX(e){var t=wX();return function(){var r=su(e),a;if(t){var c=su(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return C_(this,a)}}function wX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Av(){}function SX(e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(function(n){typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}var Z1=function(e){Pb(n,e);var t=bX(n);function n(){var r,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;if(Rs(this,n),r=t.call(this),Ib&&Oh.call(Th(r)),r.options=T4(a),r.services={},r.logger=tu,r.modules={external:[]},SX(Th(r)),c&&!r.isInitialized&&!a.isClone){if(!r.options.initImmediate)return r.init(a,c),C_(r,Th(r));setTimeout(function(){r.init(a,c)},0)}return r}return Ds(n,[{key:"init",value:function(){var a=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;typeof c=="function"&&(d=c,c={}),!c.defaultNS&&c.defaultNS!==!1&&c.ns&&(typeof c.ns=="string"?c.defaultNS=c.ns:c.ns.indexOf("translation")<0&&(c.defaultNS=c.ns[0]));var l=A4();this.options=Xl(Xl(Xl({},l),this.options),T4(c)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Xl(Xl({},l.interpolation),this.options.interpolation)),c.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=c.keySeparator),c.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=c.nsSeparator);function x(R){return R?typeof R=="function"?new R:R:null}if(!this.options.isClone){this.modules.logger?tu.init(x(this.modules.logger),this.options):tu.init(null,this.options);var b;this.modules.formatter?b=this.modules.formatter:typeof Intl<"u"&&(b=gX);var E=new b4(this.options);this.store=new aX(this.options.resources,this.options);var A=this.services;A.logger=tu,A.resourceStore=this.store,A.languageUtils=E,A.pluralResolver=new dX(E,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(A.formatter=x(b),A.formatter.init(A,this.options),this.options.interpolation.format=A.formatter.format.bind(A.formatter)),A.interpolator=new pX(this.options),A.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},A.backendConnector=new xX(x(this.modules.backend),A.resourceStore,A,this.options),A.backendConnector.on("*",function(R){for(var q=arguments.length,G=new Array(q>1?q-1:0),ee=1;ee<q;ee++)G[ee-1]=arguments[ee];a.emit.apply(a,[R].concat(G))}),this.modules.languageDetector&&(A.languageDetector=x(this.modules.languageDetector),A.languageDetector.init&&A.languageDetector.init(A,this.options.detection,this.options)),this.modules.i18nFormat&&(A.i18nFormat=x(this.modules.i18nFormat),A.i18nFormat.init&&A.i18nFormat.init(this)),this.translator=new x4(this.services,this.options),this.translator.on("*",function(R){for(var q=arguments.length,G=new Array(q>1?q-1:0),ee=1;ee<q;ee++)G[ee-1]=arguments[ee];a.emit.apply(a,[R].concat(G))}),this.modules.external.forEach(function(R){R.init&&R.init(a)})}if(this.format=this.options.interpolation.format,d||(d=Av),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var L=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);L.length>0&&L[0]!=="dev"&&(this.options.lng=L[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var F=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];F.forEach(function(R){a[R]=function(){var q;return(q=a.store)[R].apply(q,arguments)}});var $=["addResource","addResources","addResourceBundle","removeResourceBundle"];$.forEach(function(R){a[R]=function(){var q;return(q=a.store)[R].apply(q,arguments),a}});var N=jg(),Z=function(){var q=function(ee,ae){a.isInitialized&&!a.initializedStoreOnce&&a.logger.warn("init: i18next is already initialized. You should call init just once!"),a.isInitialized=!0,a.options.isClone||a.logger.log("initialized",a.options),a.emit("initialized",a.options),N.resolve(ae),d(ee,ae)};if(a.languages&&a.options.compatibilityAPI!=="v1"&&!a.isInitialized)return q(null,a.t.bind(a));a.changeLanguage(a.options.lng,q)};return this.options.resources||!this.options.initImmediate?Z():setTimeout(Z,0),N}},{key:"loadResources",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Av,l=d,x=typeof a=="string"?a:this.language;if(typeof a=="function"&&(l=a),!this.options.resources||this.options.partialBundledLanguages){if(x&&x.toLowerCase()==="cimode")return l();var b=[],E=function(F){if(F){var $=c.services.languageUtils.toResolveHierarchy(F);$.forEach(function(N){b.indexOf(N)<0&&b.push(N)})}};if(x)E(x);else{var A=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);A.forEach(function(L){return E(L)})}this.options.preload&&this.options.preload.forEach(function(L){return E(L)}),this.services.backendConnector.load(b,this.options.ns,function(L){!L&&!c.resolvedLanguage&&c.language&&c.setResolvedLanguage(c.language),l(L)})}else l(null)}},{key:"reloadResources",value:function(a,c,d){var l=jg();return a||(a=this.languages),c||(c=this.options.ns),d||(d=Av),this.services.backendConnector.reload(a,c,function(x){l.resolve(),d(x)}),l}},{key:"use",value:function(a){if(!a)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!a.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return a.type==="backend"&&(this.modules.backend=a),(a.type==="logger"||a.log&&a.warn&&a.error)&&(this.modules.logger=a),a.type==="languageDetector"&&(this.modules.languageDetector=a),a.type==="i18nFormat"&&(this.modules.i18nFormat=a),a.type==="postProcessor"&&UO.addPostProcessor(a),a.type==="formatter"&&(this.modules.formatter=a),a.type==="3rdParty"&&this.modules.external.push(a),this}},{key:"setResolvedLanguage",value:function(a){if(!(!a||!this.languages)&&!(["cimode","dev"].indexOf(a)>-1))for(var c=0;c<this.languages.length;c++){var d=this.languages[c];if(!(["cimode","dev"].indexOf(d)>-1)&&this.store.hasLanguageSomeTranslations(d)){this.resolvedLanguage=d;break}}}},{key:"changeLanguage",value:function(a,c){var d=this;this.isLanguageChangingTo=a;var l=jg();this.emit("languageChanging",a);var x=function(L){d.language=L,d.languages=d.services.languageUtils.toResolveHierarchy(L),d.resolvedLanguage=void 0,d.setResolvedLanguage(L)},b=function(L,F){F?(x(F),d.translator.changeLanguage(F),d.isLanguageChangingTo=void 0,d.emit("languageChanged",F),d.logger.log("languageChanged",F)):d.isLanguageChangingTo=void 0,l.resolve(function(){return d.t.apply(d,arguments)}),c&&c(L,function(){return d.t.apply(d,arguments)})},E=function(L){!a&&!L&&d.services.languageDetector&&(L=[]);var F=typeof L=="string"?L:d.services.languageUtils.getBestMatchFromCodes(L);F&&(d.language||x(F),d.translator.language||d.translator.changeLanguage(F),d.services.languageDetector&&d.services.languageDetector.cacheUserLanguage&&d.services.languageDetector.cacheUserLanguage(F)),d.loadResources(F,function($){b($,F)})};return!a&&this.services.languageDetector&&!this.services.languageDetector.async?E(this.services.languageDetector.detect()):!a&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(E):this.services.languageDetector.detect(E):E(a),l}},{key:"getFixedT",value:function(a,c,d){var l=this,x=function b(E,A){var L;if(_l(A)!=="object"){for(var F=arguments.length,$=new Array(F>2?F-2:0),N=2;N<F;N++)$[N-2]=arguments[N];L=l.options.overloadTranslationOptionHandler([E,A].concat($))}else L=Xl({},A);L.lng=L.lng||b.lng,L.lngs=L.lngs||b.lngs,L.ns=L.ns||b.ns,L.keyPrefix=L.keyPrefix||d||b.keyPrefix;var Z=l.options.keySeparator||".",R;return L.keyPrefix&&Array.isArray(E)?R=E.map(function(q){return"".concat(L.keyPrefix).concat(Z).concat(q)}):R=L.keyPrefix?"".concat(L.keyPrefix).concat(Z).concat(E):E,l.t(R,L)};return typeof a=="string"?x.lng=a:x.lngs=a,x.ns=c,x.keyPrefix=d,x}},{key:"t",value:function(){var a;return this.translator&&(a=this.translator).translate.apply(a,arguments)}},{key:"exists",value:function(){var a;return this.translator&&(a=this.translator).exists.apply(a,arguments)}},{key:"setDefaultNamespace",value:function(a){this.options.defaultNS=a}},{key:"hasLoadedNamespace",value:function(a){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.resolvedLanguage||this.languages[0],x=this.options?this.options.fallbackLng:!1,b=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var E=function(F,$){var N=c.services.backendConnector.state["".concat(F,"|").concat($)];return N===-1||N===2};if(d.precheck){var A=d.precheck(this,E);if(A!==void 0)return A}return!!(this.hasResourceBundle(l,a)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||E(l,a)&&(!x||E(b,a)))}},{key:"loadNamespaces",value:function(a,c){var d=this,l=jg();return this.options.ns?(typeof a=="string"&&(a=[a]),a.forEach(function(x){d.options.ns.indexOf(x)<0&&d.options.ns.push(x)}),this.loadResources(function(x){l.resolve(),c&&c(x)}),l):(c&&c(),Promise.resolve())}},{key:"loadLanguages",value:function(a,c){var d=jg();typeof a=="string"&&(a=[a]);var l=this.options.preload||[],x=a.filter(function(b){return l.indexOf(b)<0});return x.length?(this.options.preload=l.concat(x),this.loadResources(function(b){d.resolve(),c&&c(b)}),d):(c&&c(),Promise.resolve())}},{key:"dir",value:function(a){if(a||(a=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!a)return"rtl";var c=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],d=this.services&&this.services.languageUtils||new b4(A4());return c.indexOf(d.getLanguagePartFromCode(a))>-1||a.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var a=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Av,l=Xl(Xl(Xl({},this.options),c),{isClone:!0}),x=new n(l);(c.debug!==void 0||c.prefix!==void 0)&&(x.logger=x.logger.clone(c));var b=["store","services","language"];return b.forEach(function(E){x[E]=a[E]}),x.services=Xl({},this.services),x.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x.translator=new x4(x.services,x.options),x.translator.on("*",function(E){for(var A=arguments.length,L=new Array(A>1?A-1:0),F=1;F<A;F++)L[F-1]=arguments[F];x.emit.apply(x,[E].concat(L))}),x.init(l,d),x.translator.options=x.options,x.translator.backendConnector.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(Oh);sc(Z1,"createInstance",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Z1(e,t)});var mo=Z1.createInstance();mo.createInstance=Z1.createInstance;mo.createInstance;mo.dir;mo.init;mo.loadResources;mo.reloadResources;mo.use;mo.changeLanguage;mo.getFixedT;mo.t;mo.exists;mo.setDefaultNamespace;mo.hasLoadedNamespace;mo.loadNamespaces;mo.loadLanguages;var CX=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,EX={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},kX=function(t){return EX[t]},AX=function(t){return t.replace(CX,kX)};function I4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function M4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I4(Object(n),!0).forEach(function(r){sc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var L4={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:AX};function TX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};L4=M4(M4({},L4),e)}var PX={type:"3rdParty",init:function(t){TX(t.options.react)}};pt.createContext();(function(){function e(){Rs(this,e),this.usedNamespaces={}}return Ds(e,[{key:"addUsedNamespaces",value:function(n){var r=this;n.forEach(function(a){r.usedNamespaces[a]||(r.usedNamespaces[a]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e})();var jO=[],IX=jO.forEach,MX=jO.slice;function LX(e){return IX.call(MX.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var O4=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OX=function(t,n,r){var a=r||{};a.path=a.path||"/";var c=encodeURIComponent(n),d="".concat(t,"=").concat(c);if(a.maxAge>0){var l=a.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");d+="; Max-Age=".concat(Math.floor(l))}if(a.domain){if(!O4.test(a.domain))throw new TypeError("option domain is invalid");d+="; Domain=".concat(a.domain)}if(a.path){if(!O4.test(a.path))throw new TypeError("option path is invalid");d+="; Path=".concat(a.path)}if(a.expires){if(typeof a.expires.toUTCString!="function")throw new TypeError("option expires is invalid");d+="; Expires=".concat(a.expires.toUTCString())}if(a.httpOnly&&(d+="; HttpOnly"),a.secure&&(d+="; Secure"),a.sameSite){var x=typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite;switch(x){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return d},F4={create:function(t,n,r,a){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(c.expires=new Date,c.expires.setTime(c.expires.getTime()+r*60*1e3)),a&&(c.domain=a),document.cookie=OX(t,encodeURIComponent(n),c)},read:function(t){for(var n="".concat(t,"="),r=document.cookie.split(";"),a=0;a<r.length;a++){for(var c=r[a];c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(n)===0)return c.substring(n.length,c.length)}return null},remove:function(t){this.create(t,"",-1)}},FX={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var r=F4.read(t.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&F4.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},RX={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var a=r.substring(1),c=a.split("&"),d=0;d<c.length;d++){var l=c[d].indexOf("=");if(l>0){var x=c[d].substring(0,l);x===t.lookupQuerystring&&(n=c[d].substring(l+1))}}}return n}},Vg=null,R4=function(){if(Vg!==null)return Vg;try{Vg=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Vg=!1}return Vg},DX={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&R4()){var r=window.localStorage.getItem(t.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&R4()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},qg=null,D4=function(){if(qg!==null)return qg;try{qg=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{qg=!1}return qg},zX={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&D4()){var r=window.sessionStorage.getItem(t.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&D4()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},BX={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},$X={name:"htmlTag",lookup:function(t){var n,r=t.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},NX={name:"path",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof r[t.lookupFromPathIndex]!="string")return;n=r[t.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},UX={name:"subdomain",lookup:function(t){var n=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function jX(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var VO=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rs(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return Ds(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=LX(r,this.options||{},jX()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(FX),this.addDetector(RX),this.addDetector(DX),this.addDetector(zX),this.addDetector(BX),this.addDetector($X),this.addDetector(NX),this.addDetector(UX)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var a=[];return n.forEach(function(c){if(r.detectors[c]){var d=r.detectors[c].lookup(r.options);d&&typeof d=="string"&&(d=[d]),d&&(a=a.concat(d))}}),this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var a=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(c){a.detectors[c]&&a.detectors[c].cacheUserLanguage(n,a.options)}))}}]),e}();VO.type="languageDetector";const VX="km",qX="m",GX="to",HX="Logout",WX="Save",ZX="Cancel",KX="Create",XX="Disasters",YX="Loading...",JX="Loading events",QX="Legend",eY="maps",tY="Vertical direction",nY="Horizontal direction",rY="Legend presentation",iY="Layers",oY="Feed",aY="Deselect",sY="Gathering data",lY="Updated",uY="No data received",cY="Wrong data received",hY="Error",fY="Sort Icon",dY={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"The feed contains real-time data about Cyclones, Droughts, Earthquakes, Floods, Volcanoes, Wildfires."},pY={default:"Sorry, we are having issues, which will be fixed soon",timeout:"Request Timeout",cannot_connect:"Can't connect to server",forbidden:"Forbidden",not_found:"Not found",unknown:"Unknown",server_error:"Server Error"},mY={overlays:"Overlays",basemap:"Basemap"},gY={layers_in_selected_area:"Layers in selected area",your_layers:"Your Layers",kontur_analytics:"Kontur Analytics",qa:"QA",osmbasedmap:"OpenStreetMap Based",other:"Other",elevation:"Elevation",photo:"Photo",map:"Map"},yY={load_world_data:"Load World Data",numerator:"Numerator",normalized_by:"Normalized By",sum:"Sum",min:"Min",max:"Max",mean:"Mean",stddev:"Stddev",median:"Median",filter_numerator:"Filter Numerator",filter_denominator:"Filter Denominator"},_Y={title:"Multi-criteria decision analysis",name:"MCDA"},vY={warning_title:"Can't use map as filter",warning_description:"Map not ready yet, try later",bbox_filter_button:"Use map view as filter",analytics:{affected_people:{tooltip:"Affected People",value:"No humanitarian impact"},settled_area_tooltip:"Settled Area",loss_tooltip:"Estimated loss"},no_event_in_feed:"Event not found in the current event feed",no_selected_disaster:"No disaster selected",chose_disaster:"Choose disaster",no_historical_disasters:"No historical disasters in this area",no_feed_disasters:"No disasters in this feed",no_disasters:"No disasters",severity_unknown:"Unknown",severity_termination:"Termination",severity_minor:"Minor",severity_moderate:"Moderate",severity_severe:"Severe",severity_extreme:"Extreme",open_timeline_button:"Open timeline"},xY={edit_layer:"Edit Layer",edit_features:"Edit Features",delete_layer:"Delete Layer",create_layer:"Create Layer",saving_layer:"Saving layer...",field_name:"Field name",layer_name:"Layer name",marker_icon:"Marker icon",type:"Type",select:"Select",short_text:"Short Text",long_text:"Long Text",link:"Link",image:"Image",fields:"Fields",add_field:"Add field",location:"Location",edit_feature_placeholder:"Select some feature for start edit feature properties"},bY={header_title:"Analytics",error_loading:"Error while fetching analytics data",info_short:"Calculations are made for the selected area."},wY={header_title:"Advanced analytics",error:"Error while fetching advanced analytics data"},SY={not_found:"Sorry, requested event not found.",error:"An error occured!",analytics_for_selected:"Analytics for a selected area",will_be_provided:"will be provided here",no_analytics:"No analytics for the selected area"},CY={area:"Area",line:"Line",point:"Point",finish_drawing:"Finish Drawing",caption:"Click on the map to begin drawing",no_geometry_error:"No drawn geometry to download",overlap_error:"Polygon should not overlap itself",save_features:"Save features"},EY={title:"Focus to administrative boundary"},kY={title:"Focus to uploaded geometry",error:"Error while reading uploaded file"},AY={title:"Focus to freehand geometry"},TY={settings:{name:"Selected Area"}},PY={self_directions_not_supported:"Self intersections are not supported!"},IY={panel:{header:"Bivariate Matrix"},matrix:{caption:{base_axis:"Base axis",annex_axis:"Annex axis",tooltip:{p1:"Charts involving the Base and Annex axes help establish a relationship between two data sets.",li1:"Annex axis - parameters that we analyse",li2:"Base axis - reference point in the analysis",b:"Ex: the best location to open a cafe",p2:"We can explore the number of eatery places (Annex axis) against Population density (Base axis).",p3:"In this scenario, we are first interested in a small number of eatery places, and the number of people in that place gives us additional information."}},header:{title:"Choose two layers to explore correlations",hint:"Layers and correlations are displayed for the current Selected Area"},icon:{population:"Value divided by Population",area_km2:"Value divided by Area",total_building_count:"Value divided by Total Buildings Estimate",populated_area_km2:"Value divided by Populated Area",one:"Without divider",roads:"Value divided by Total Roads Length"},progress:{rendering:"Rendering",applied:"Applied on the map"},loading_error:"Unfortunately, we cannot display the matrix. Try refreshing the page or come back later."},legend:{high:"High",low:"Low",medium:"Medium"},color_manager:{not_defined:"Not defined",sentiments_combinations_filter:"Sentiments combinations",layers_filter:"Layers",no_legends:"There are no legends satisfying the conditions.",no_data:"No Data.",sentiments_tab:"Sentiments",color_legends_tab:"Color Legends",layers_tab:"Layers (indicators)"}},MY={biv_color_manager:"olor manager",edit_osm:"Edit in OpenStreetMap",ruler:"Ruler",collapse:"Collapse",expand:"Expand",icon_alt:"Application logo"},LY={email:"Email",password:"Password",login_button:"Login",sign_up:"Sign up",logging_in:"Logging in...",log_in:"Log in",description:"Please log in to change your settings",error:{email_empty:"Email has not to be empty!",email_invalid:"Email has to be valid!",password:"Password has not to be empty!",connect:"Couldn't connect to authentication service"}},OY={title:"Disaster Ninja Reports",no_data:"No data for this report",sorting:"Sorting data...",loading:"Loading data",search_location:"Search location",open_josm:"Open via JOSM remote control",josm_logo_alt:"JOSM logo",see_all:"See all reports",wrong_id:"Wrong report ID",description:"<0>Kontur </0> generates several reports that help validate OpenStreetMap quality. They contain links to areas on <4>osm.org </4> and links to open them in the JOSM editor with enabled remote control for editing."},FY={map:"Map",about:"About",reports:"Reports",profile:"Profile",privacy:"Privacy"},RY={title:"Welcome to Disaster Ninja!",intro:"Do you want to be notified about ongoing disasters? Are you interested in instant population data and other analytics for any region in the world? Disaster Ninja showcases some of <2>Kontur</2>s capabilities in addressing these needs.<br/><br/>We initially designed it as a decision support tool for humanitarian mappers. Now it has grown in functionality and use cases. Whether you work in disaster management, build a smart city, or perform research on climate change, Disaster Ninja can help you to:",l1:"1. Stay up to date with the latest hazard events globally.",p1:"The Disasters panel continually refreshes to inform you about ongoing events. It consumes data from the <2>Kontur Event Feed</2>, which you can also access via an API.",l2:"2. Focus on your area of interest.",p2:"The Drawing Tools panel allows you to draw or upload your own geometry on the map. You can also focus on a disaster-exposed area or an administrative unit  a country, city, or region.",l3:"3. Get analytics for the focused area.",p3:"The Analytics panel shows the number of people living in that area per <2>Kontur Population</2> and estimated mapping gaps in OpenStreetMap. Konturs customers have access to hundreds of other indicators through Advanced Analytics.",l4:"4. Explore data on the map and make conclusions.",p4:"The Layers panel gives you various options to display two indicators simultaneously on a bivariate map, e.g., population density and distance to the nearest fire station. Use the color legend to assess which areas require attention. <br/>Hint: in general, green indicates low risk / few gaps, red  high risk / many gaps.",p5:"In addition, you can switch to Reports in the left panel to access data on potential errors and inconsistencies in OpenStreetMap and help fix them by mapping the respective area with the JOSM editor.",goToMap:"Go to the map now",p6:"We hope you find this tool valuable. Use the chatbox on Disaster Ninja for any questions about the functionality, and we will be happy to guide you. You can also contact us by email at <1>hello@kontur.io</1> if you have feedback or suggestions on improving the tool.<br/><br/>Disaster Ninja is an open-source project. Find the code in <8>Konturs GitHub account</8>."},DY={interfaceTheme:"Theme",interfaceLanguage:"Language",units:"Units",fullName:"Full Name",email:"Email",metric:"metric",imperialBeta:"imperial (beta)",profileSettingsHeader:"Profile",appSettingsHeader:"Settings",saveButton:"Save changes",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Default disaster feed",defaultOSMeditor:"Default OpenStreetMap editor (beta)",successNotification:"All changes have been applied successfully",languageOption:{en:"English",es:"Spanish",ar:"Arabic",ko:"Korean",id:"Indonesian",de:"German",uk:"Ukrainian"}},zY={not_found_request:"Sorry, requested event not found."},BY={get_location_error:"Error while getting location",feature_title:"Locate me"},$Y="Episode",NY="Loading Episodes",UY={header:"We value your privacy",body:`We use absolutely necessary cookies to provide you personalized services and optional cookies to improve Disaster Ninja and your experience. You can manage cookies settings or withdraw consent to optional cookies at any time.
For more information, please, check our [Privacy Policy](about/privacy)`,decline_all:"Decline optional cookies",accept_all:"Accept optional cookies"},jY={start:"Start sensor recording",finish:"Stop sensor recording",finishMessage:"Recording has been finished",startMessage:"Recording has been started",noSensorsError:"Your device desn't have the required sensors"},VY={km:VX,m:qX,to:GX,logout:HX,save:WX,cancel:ZX,create:KX,disasters:XX,loading:YX,loading_events:JX,legend:QX,maps:eY,vertical_direction:tY,horizontal_direction:nY,legend_presentation:rY,layers:iY,feed:oY,deselect:aY,spinner_text:sY,updated:lY,no_data_received:uY,wrong_data_received:cY,error:hY,sort_icon:fY,configs:dY,errors:pY,categories:mY,groups:gY,advanced_analytics_data_list:yY,mcda:_Y,event_list:vY,create_layer:xY,analytics_panel:bY,advanced_analytics_panel:wY,advanced_analytics_empty:SY,draw_tools:CY,boundary_selector:EY,geometry_uploader:kY,focus_geometry:AY,focus_geometry_layer:TY,drawings:PY,bivariate:IY,sidebar:MY,login:LY,reports:OY,modes:FY,about:RY,profile:DY,current_event:zY,locate_me:BY,episode:$Y,loading_episodes:NY,cookie_banner:UY,live_sensor:jY},qY="km",GY="m",HY="a",WY="mapas",ZY="Cierre de sesin",KY="Guardar",XY="Cancelar",YY="Crear",JY="Desastres",QY="Cargando...",eJ="Cargando eventos",tJ="Leyenda",nJ="Direccin vertical",rJ="Direccin horizontal",iJ="Presentacin de la leyenda",oJ="Capas",aJ={color_manager:{layers_filter:"Capas",not_defined:"No definido",sentiments_combinations_filter:"Combinaciones de sentimientos",no_legends:"No hay leyendas que cumplan las condiciones.",no_data:"No hay datos.",sentiments_tab:"Sentimientos",color_legends_tab:"Leyendas de colores",layers_tab:"Capas (indicadores)"},panel:{header:"Matriz bivariada"},matrix:{caption:{base_axis:"Eje base",annex_axis:"Eje anexo",tooltip:{p1:"Las grficas que incluyen los ejes base y anexo ayudan a establecer una relacin entre dos conjuntos de datos.",li1:"Eje anexo: parmetros que analizamos",li2:"Eje base: punto de referencia en el anlisis",b:"Ej.: la mejor ubicacin para abrir una cafetera",p2:"Podemos explorar el nmero de locales de comida (eje anexo) frente a la densidad de poblacin (eje base).",p3:"En este escenario, en primer lugar nos interesa un nmero reducido de locales de comida, y la cantidad de personas presentes nos da informacin adicional."}},header:{title:"Elija dos capas para explorar las correlaciones",hint:"Las capas y correlaciones se muestran para el rea seleccionada actual"},icon:{population:"Valor dividido por la poblacin",area_km2:"Valor dividido por el rea",total_building_count:"Valor dividido por la estimacin total de edificios",populated_area_km2:"Valor dividido por el rea poblada",one:"Sin divisor",roads:"Valor dividido por la longitud total de las carreteras"},progress:{rendering:"Renderizado",applied:"Aplicado en el mapa"}},legend:{high:"Alto",low:"Bajo",medium:"Medio"}},sJ="Fuente",lJ="Anular la seleccin",uJ="Recopilacin de datos",cJ="Actualizado",hJ="No se han recibido datos",fJ="Se han recibido datos errneos",dJ="Error",pJ="Icono de ordenar",mJ={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"El feed contiene datos en tiempo real sobre Ciclones, Sequas, Terremotos, Inundaciones, Volcanes, Incendios forestales."},gJ={default:"Lo sentimos, estamos teniendo problemas, que pronto se solucionarn",timeout:"Se agot el tiempo de espera de la solicitud",cannot_connect:"No se puede conectar al servidor",forbidden:"Prohibido",not_found:"No encontrado",unknown:"Desconocido",server_error:"Error del servidor"},yJ={severity_unknown:"Desconocido",warning_title:"No se puede utilizar el mapa como filtro",warning_description:"El mapa an no est listo, intntelo ms tarde",bbox_filter_button:"Usar la vista del mapa como filtro",analytics:{affected_people:{tooltip:"Personas afectadas",value:"Sin impacto humanitario"},settled_area_tooltip:"rea habitada",loss_tooltip:"Prdida estimada"},no_event_in_feed:"Evento no encontrado en el feed de eventos actual",no_selected_disaster:"No se ha seleccionado ningn desastre",chose_disaster:"Seleccione el desastre"},_J={overlays:"Superposiciones",basemap:"Mapa base"},vJ={layers_in_selected_area:"Capas en el rea seleccionada",your_layers:"Sus capas",kontur_analytics:"Anlisis de Kontur",qa:"Certificacin de calidad",osmbasedmap:"Basado en OpenStreetMap",other:"Otros",elevation:"Elevacin",photo:"Foto",map:"Mapa"},xJ={map:"Mapa",about:"Acerca de",reports:"Informes",profile:"Perfil"},bJ={load_world_data:"Cargar datos mundiales",numerator:"Numerador",normalized_by:"Normalizado por",sum:"Suma",min:"Mn.",max:"Mx.",mean:"Media",stddev:"Desv. est.",median:"Mediana",filter_denominator:"Filtrar Denominador"},wJ={},SJ={edit_layer:"Editar capa",edit_features:"Editar caractersticas",delete_layer:"Eliminar capa",create_layer:"Crear capa",saving_layer:"Guardando capa...",field_name:"Nombre de campo",layer_name:"Nombre de la capa",marker_icon:"Icono de marcador",type:"Tipo",select:"Seleccionar",short_text:"Texto corto",long_text:"Texto largo",link:"Enlace",image:"Imagen",fields:"Campos",add_field:"Agregar campo",location:"Ubicacin",edit_feature_placeholder:"Seleccione una caracterstica para comenzar a editar las propiedades de la misma"},CJ={header_title:"Anlisis",error_loading:"Error en la obtencin de datos de anlisis"},EJ={header_title:"Anlisis avanzado",error:"Error en la obtencin de datos de anlisis Avanzado"},kJ={not_found:"Lo sentimos, el evento solicitado no se ha encontrado.",error:"Se produjo un error!"},AJ={not_found_request:"Lo sentimos, el evento solicitado no se ha encontrado."},TJ={area:"rea",line:"Lnea",point:"Punto",finish_drawing:"Terminar el dibujo",caption:"Haga clic en el mapa para empezar a dibujar",no_geometry_error:"No hay geometra dibujada para descargar",overlap_error:"El polgono no debe superponerse sobre s mismo",save_features:"Guardar caractersticas"},PJ={title:"Enfocar en el lmite administrativo"},IJ={title:"Enfocar en la geometra cargada",error:"Error al leer el archivo cargado"},MJ={title:"Enfocar en la geometra a mano"},LJ={settings:{name:"rea seleccionada"}},OJ={self_directions_not_supported:"No se admiten las autointersecciones!"},FJ={biv_color_manager:"Administrador de color",edit_osm:"Editar en OpenStreetMap",ruler:"Regla",collapse:"Contraer",expand:"Expandir",icon_alt:"Logotipo de la aplicacin"},RJ={email:"Correo electrnico",password:"Contrasea",login_button:"Inicio de sesin",sign_up:"Registrarse",logging_in:"Iniciando sesin...",log_in:"Iniciar sesin",description:"Acceda a su cuenta para cambiar los ajustes",error:{email_empty:"El correo electrnico no debe estar vaco!",email_invalid:"El correo electrnico debe ser vlido!",password:"La contrasea no debe estar vaca!",connect:"No se pudo conectar con el servicio de autenticacin"}},DJ={email:"Correo electrnico",profileSettingsHeader:"Perfil",interfaceTheme:"Tema",interfaceLanguage:"Idioma",units:"Unidades",fullName:"Nombre completo",metric:"mtricas",imperialBeta:"imperiales (beta)",appSettingsHeader:"Ajustes",saveButton:"Guardar cambios",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Feed de desastres predeterminado",defaultOSMeditor:"Editor predeterminado de OpenStreetMap (beta)",successNotification:"Todos los cambios se han aplicado correctamente",languageOption:{en:"Ingls",es:"Espaol",ar:"rabe",ko:"oreano",id:"Indonesio",de:"Alemn",uk:"Ucranio"}},zJ={title:"Informes de Disaster Ninja",no_data:"No hay datos para este informe",sorting:"Ordenando datos...",loading:"Cargando datos",search_location:"Buscar ubicacin",open_josm:"Abrir a travs del control remoto JOSM",josm_logo_alt:"Logotipo de JOSM",see_all:"Ver todos los informes",wrong_id:"ID de informe incorrecto",description:"<0>Kontur </0> genera una serie de informes tiles para validar la calidad de OpenStreetMap. Contienen enlaces a zonas en <4>osm.org </4> y enlaces para abrirlas en el editor JOSM con control remoto habilitado para la edicin."},BJ={title:"Bienvenido a Disaster Ninja!",intro:"Desea recibir notificaciones sobre desastres en curso? Le interesan los datos de poblacin instantneos y otros datos analticos de alguna regin del mundo? Disaster Ninja muestra algunas de las capacidades de <2>Kontur</2> para ocuparse de estas necesidades.<br/><br/> Inicialmente la diseamos como una herramienta de apoyo a los mapeadores de servicios humanitarios. Ahora ha ampliado sus funcionalidades y aplicaciones prcticas. Tanto si trabaja en la gestin de desastres como si construye una ciudad inteligente o realiza investigaciones sobre el cambio climtico, Disaster Ninja puede ayudarle a:",l1:"1. Estar al da con los ltimos eventos peligrosos a nivel mundial.",p1:"El panel de Desastres se actualiza continuamente para informarle sobre los acontecimientos en curso. Utiliza la informacin proporcionada por <2>Kontur Event Feed</2>, a la que tambin puede acceder a travs de la interfaz de la aplicacin.",l2:"2. Centrarse en su rea de inters.",p2:"El panel de Herramientas de Dibujo le permite dibujar o subir su propia geometra en el mapa. Tambin puede centrarse en un rea o en una unidad administrativa - pas, ciudad o regin  expuesta a desastres.",l3:"3. Recibir anlisis de su rea de inters.",p3:"El panel de Anlisis le muestra el nmero de personas que viven en la zona segn <2>Kontur Population</2> y segn una estimacin de las zonas sin mapear en OpenStreetMap. Los clientes de Kontur tienen acceso a cientos de otros indicadores a travs de Advance Analytics.",l4:"4. Explorar los datos del mapa y sacar sus propias conclusiones.",p4:"El panel Capas le ofrece varias opciones para mostrar dos indicadores en simultneo en un mapa bivariado, p. ej:, la densidad de poblacin y la distancia a la estacin de bomberos ms cercana. Utilice las leyendas de colores para evaluar qu reas requieren atencin. <br/>Consejo: en general, el verde indica riesgo bajo / pocas zonas sin mapear, el rojo  riesgo alto / muchas zonas sin mapear.",p5:"Adems, puede cambiar a Informes en el panel de la izquierda para acceder a los datos sobre posibles errores e inconsistencias en OpenStreetMap y ayudarle a realizar correcciones mapeando la zona correspondiente con el editor JOSM.",goToMap:"Ir al mapa ahora",p6:"Esperamos que esta herramienta le resulte valiosa. Utilice el chat de Disaster Ninja si tiene alguna pregunta sobre sus funcionalidades y estaremos encantados de ayudarle. Tambin puede contactarnos por correo electrnico en <1>hello@kontur.io</1> si tiene algn comentario o sugerencia para mejorar la herramienta.<br/><br/> Disaster Ninja es un proyecto de cdigo abierto. Encuentre el cdigo en la <8>cuenta de GitHub de Kontur</8>."},$J={get_location_error:"Error al obtener la ubicacin",feature_title:"Localizarme"},NJ="Episodio",UJ="Cargando episodios",jJ={},VJ={},qJ={km:qY,m:GY,to:HY,maps:WY,logout:ZY,save:KY,cancel:XY,create:YY,disasters:JY,loading:QY,loading_events:eJ,legend:tJ,vertical_direction:nJ,horizontal_direction:rJ,legend_presentation:iJ,layers:oJ,bivariate:aJ,feed:sJ,deselect:lJ,spinner_text:uJ,updated:cJ,no_data_received:hJ,wrong_data_received:fJ,error:dJ,sort_icon:pJ,configs:mJ,errors:gJ,event_list:yJ,categories:_J,groups:vJ,modes:xJ,advanced_analytics_data_list:bJ,mcda:wJ,create_layer:SJ,analytics_panel:CJ,advanced_analytics_panel:EJ,advanced_analytics_empty:kJ,current_event:AJ,draw_tools:TJ,boundary_selector:PJ,geometry_uploader:IJ,focus_geometry:MJ,focus_geometry_layer:LJ,drawings:OJ,sidebar:FJ,login:RJ,profile:DJ,reports:zJ,about:BJ,locate_me:$J,episode:NJ,loading_episodes:UJ,cookie_banner:jJ,live_sensor:VJ},GJ="",HJ="",WJ="",ZJ="",KJ=" ",XJ="",YJ="",JJ="",QJ="",eQ=" ...",tQ="  ",nQ=" ",rQ=" ",iQ=" ",oQ="  ",aQ="",sQ={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:"    .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:" ()"},panel:{header:"  "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:"            .",li1:"  -    ",li2:"  -    ",b:":    ",p2:"     ( )    ( ).",p3:"                  ."}},header:{title:"   ",hint:"      "},icon:{population:"    ",area_km2:"   ",total_building_count:"     ",populated_area_km2:"    ",one:" ",roads:"     "},progress:{rendering:"",applied:"  "}},legend:{high:"",low:"",medium:""}},lQ="",uQ="",cQ=" ",hQ="",fQ="   ",dQ="   ",pQ="",mQ=" ",gQ={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:"            ."},yQ={default:"     ",timeout:"  ",cannot_connect:"   ",forbidden:"",not_found:"   ",unknown:" ",server_error:"  "},_Q={severity_unknown:" ",warning_title:"     ",warning_description:"     ",bbox_filter_button:"    ",analytics:{affected_people:{tooltip:" ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"        ",no_selected_disaster:"   ",chose_disaster:" "},vQ={overlays:"",basemap:" "},xQ={layers_in_selected_area:"   ",your_layers:"",kontur_analytics:" ",qa:" ",osmbasedmap:"    ",other:"",elevation:"",photo:"",map:""},bQ={map:"",about:"",reports:"",profile:" "},wQ={load_world_data:"  ",numerator:"",normalized_by:" ",sum:"",min:" ",max:" ",mean:"",stddev:"Stddev",median:"",filter_denominator:" "},SQ={},CQ={edit_layer:" ",edit_features:" ",delete_layer:" ",create_layer:" ",saving_layer:" ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:" ",long_text:" ",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"      "},EQ={header_title:"",error_loading:"    "},kQ={header_title:" ",error:"     "},AQ={not_found:"    .",error:" !"},TQ={not_found_request:"    ."},PQ={area:"",line:"",point:"",finish_drawing:" ",caption:"    ",no_geometry_error:"    ",overlap_error:"     ",save_features:" "},IQ={title:"   "},MQ={title:"   ",error:"      "},LQ={title:"   "},OQ={settings:{name:" "}},FQ={self_directions_not_supported:"   !"},RQ={biv_color_manager:" ",edit_osm:"  OpenStreetMap",ruler:"",collapse:"",expand:"",icon_alt:" "},DQ={email:" ",password:" ",login_button:" ",sign_up:" ",logging_in:"  ...",log_in:" ",description:"    ",error:{email_empty:"      !",email_invalid:"     !",password:"      !",connect:"    "}},zQ={email:" ",profileSettingsHeader:" ",interfaceTheme:"",interfaceLanguage:"",units:"",fullName:" ",metric:"",imperialBeta:" ()",appSettingsHeader:"",saveButton:" ",konturTheme:"Kontur",HOTTheme:"","userBio(about)":"",defaultDisasterFeed:"  ",defaultOSMeditor:" OpenStreetMap  ()",successNotification:"    ",languageOption:{en:"",es:"",ar:"",ko:"",id:"",de:"",uk:""}},BQ={title:" Disaster Ninja",no_data:"    ",sorting:"  ...",loading:"  ",search_location:"  ",open_josm:"     JOSM  ",josm_logo_alt:" JOSM",see_all:"  ",wrong_id:"  ",description:" <0> Kontur</0>        OpenStreetMap.        <4> osm.org </4>      JOSM      ."},$Q={title:"  Disaster Ninja!",intro:"                    Disaster Ninja   <2>Kontur</2>    .<br/><br/>          .     .                    Disaster Ninja :",l1:"1.          .",p1:"       .     <2>Kontur Event Feed</2>         .",l2:"2.    .",p2:"             .           -     .",l3:"3.     .",p3:"           <2>Kontur Population</2>     OpenStreetMap.   Kontur         .",l4:"4.       .",p4:"  Layers                     .         . <br/>        /    -   /   .",p5:"                   OpenStreetMap            JOSM.",goToMap:"   ",p6:"      .     Disaster Ninja       .       <1>hello@kontur.io</1>         .<br/><br/> Disaster Ninja   .      <8>Kontur</8>  <8>GitHub</8>."},NQ={get_location_error:"     ",feature_title:" "},UQ="",jQ="  ",VQ={},qQ={},GQ={km:GJ,m:HJ,to:WJ,maps:ZJ,logout:KJ,save:XJ,cancel:YJ,create:JJ,disasters:QJ,loading:eQ,loading_events:tQ,legend:nQ,vertical_direction:rQ,horizontal_direction:iQ,legend_presentation:oQ,layers:aQ,bivariate:sQ,feed:lQ,deselect:uQ,spinner_text:cQ,updated:hQ,no_data_received:fQ,wrong_data_received:dQ,error:pQ,sort_icon:mQ,configs:gQ,errors:yQ,event_list:_Q,categories:vQ,groups:xQ,modes:bQ,advanced_analytics_data_list:wQ,mcda:SQ,create_layer:CQ,analytics_panel:EQ,advanced_analytics_panel:kQ,advanced_analytics_empty:AQ,current_event:TQ,draw_tools:PQ,boundary_selector:IQ,geometry_uploader:MQ,focus_geometry:LQ,focus_geometry_layer:OQ,drawings:FQ,sidebar:RQ,login:DQ,profile:zQ,reports:BQ,about:$Q,locate_me:NQ,episode:UQ,loading_episodes:jQ,cookie_banner:VQ,live_sensor:qQ},HQ="",WQ="",ZQ="",KQ="",XQ="",YQ="",JQ="",QQ="",eee="",tee=" ...",nee="  ",ree="",iee=" ",oee=" ",aee=" ",see="",lee={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:"   .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:"()"},panel:{header:" "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:"              .",li1:"  -   ",li2:"  -  ",b:":    ",p2:" ( )   ( )   .",p3:"       ,         ."}},header:{title:"      .",hint:"      ."},icon:{population:"  ",area_km2:"  ",total_building_count:"    ",populated_area_km2:"    ",one:" ",roads:"    "},progress:{rendering:"",applied:" "}},legend:{high:"",low:"",medium:""}},uee="",cee=" ",hee=" ",fee="",dee="  ",pee="  ",mee="",gee=" ",yee={Kontur_public_feed:"Kontur Public",Kontur_public_feed_description:" , , , ,  ,     ."},_ee={default:".  .   .",timeout:"  ",cannot_connect:"   .",forbidden:"  ",not_found:"  ",unknown:"  ",server_error:" "},vee={severity_unknown:"  ",warning_title:"    .",warning_description:"    .     .",bbox_filter_button:"   ",analytics:{affected_people:{tooltip:"  ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"      ",no_selected_disaster:"  ",chose_disaster:" "},xee={overlays:"",basemap:""},bee={layers_in_selected_area:"   ",your_layers:"",kontur_analytics:"Kontur Analytics",qa:"QA",osmbasedmap:"OpenStreetMap ",other:"",elevation:"",photo:"",map:""},wee={map:"",about:"",reports:"",profile:""},See={load_world_data:"   ",numerator:"",normalized_by:" :",sum:"",min:"",max:"",mean:"",stddev:"  ",median:"",filter_denominator:" "},Cee={},Eee={edit_layer:" ",edit_features:" ",delete_layer:" ",create_layer:" ",saving_layer:"  ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:" ",long_text:" ",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"      ."},kee={header_title:"",error_loading:"     ."},Aee={header_title:" ",error:"      ."},Tee={not_found:".     .",error:" ."},Pee={not_found_request:".     ."},Iee={area:"",line:"",point:"",finish_drawing:" ",caption:"   .",no_geometry_error:"     .",overlap_error:"     .",save_features:" "},Mee={title:"   "},Lee={title:"    ",error:"     ."},Oee={title:"      "},Fee={settings:{name:" "}},Ree={self_directions_not_supported:"   ."},Dee={biv_color_manager:" ",edit_osm:"OpenStreetMap ",ruler:"",collapse:"",expand:"",icon_alt:" "},zee={email:"",password:"",login_button:"",sign_up:"",logging_in:" ...",log_in:"",description:"  .",error:{email_empty:"   .",email_invalid:"   .",password:"   .",connect:"    ."}},Bee={email:"",profileSettingsHeader:"",interfaceTheme:"",interfaceLanguage:"",units:"",fullName:" ",metric:"",imperialBeta:" ()",appSettingsHeader:"",saveButton:"  ",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"  ",defaultOSMeditor:" OpenStreetMap ()",successNotification:"    .",languageOption:{en:"",es:"",ar:"",ko:"",id:" ",de:" ",uk:" "}},$ee={title:"Disaster Ninja ",no_data:"   .",sorting:"  ...",loading:"  ",search_location:" ",open_josm:"JOSM    ",josm_logo_alt:"JOSM ",see_all:"  ",wrong_id:"  ID",description:"<0>Kontur</0>     OpenStreetMap   .  <4>osm.org </4>   ,    JOSM          ."},Nee={title:"Disaster Ninja   !",intro:"      ?            ? Disaster Ninja        <2>Kontur</2>  .<br/><br/>         ,      .  ,   ,               .",l1:"1.        .",p1:"           . <2>Kontur  </2>  , API      .",l2:"2.     .",p2:"           .     (: , , )    .",l3:"3.     .",p3:"  <2>Kontur </2>      OpenStreetMap     .   Kontur          .",l4:"4.       .",p4:"               (:  ,    ).       . <br/>:   /    /  .",p5:",     OpenStreetMap      , JOSM          .",goToMap:"   .",p6:"     .     Disaster Ninja       .        , <1>hello@kontur.io</1>    .<br/><br/>Disaster Ninja   . <8>Kontur GitHub </8>  ."},Uee={get_location_error:"    .",feature_title:"  "},jee="",Vee="  ",qee={},Gee={},Hee={km:HQ,m:WQ,to:ZQ,maps:KQ,logout:XQ,save:YQ,cancel:JQ,create:QQ,disasters:eee,loading:tee,loading_events:nee,legend:ree,vertical_direction:iee,horizontal_direction:oee,legend_presentation:aee,layers:see,bivariate:lee,feed:uee,deselect:cee,spinner_text:hee,updated:fee,no_data_received:dee,wrong_data_received:pee,error:mee,sort_icon:gee,configs:yee,errors:_ee,event_list:vee,categories:xee,groups:bee,modes:wee,advanced_analytics_data_list:See,mcda:Cee,create_layer:Eee,analytics_panel:kee,advanced_analytics_panel:Aee,advanced_analytics_empty:Tee,current_event:Pee,draw_tools:Iee,boundary_selector:Mee,geometry_uploader:Lee,focus_geometry:Oee,focus_geometry_layer:Fee,drawings:Ree,sidebar:Dee,login:zee,profile:Bee,reports:$ee,about:Nee,locate_me:Uee,episode:jee,loading_episodes:Vee,cookie_banner:qee,live_sensor:Gee},Wee="km",Zee="m",Kee="ke",Xee="peta",Yee="Keluar",Jee="Simpan",Qee="Batalkan",ete="Buat",tte="Bencana",nte="Memuat...",rte="Memuat kejadian",ite="Legenda",ote="Arah vertikal",ate="Arah horizontal",ste="Penyajian legenda",lte="Lapisan",ute={color_manager:{layers_filter:"Lapisan",not_defined:"Tidak terdefinisi",sentiments_combinations_filter:"Gabungan sentimen",no_legends:"Tidak ada legenda yang memenuhi kondisi ini.",no_data:"Tidak Ada Data.",sentiments_tab:"Sentimen",color_legends_tab:"Legenda Warna",layers_tab:"Lapisan (indikator)"},panel:{header:"Matriks Bivariat"},matrix:{caption:{base_axis:"Sumbu Dasar",annex_axis:"Sumbu Tambahan",tooltip:{p1:"Diagram yang mencakup sumbu Dasar dan sumbu Tambahan membantu menetapkan hubungan antara dua kumpulan data.",li1:"Sumbu Tambahan - parameter yang kita analisis",li2:"Sumbu Dasar - titik referensi dalam analisis",b:"Contoh: lokasi terbaik untuk membuka kafe",p2:"Kita dapat menyelidiki jumlah tempat makan (sumbu Tambahan) terhadap Kerapatan populasi (sumbu Dasar).",p3:"Dalam skenario ini, pada awalnya kita tertarik dengan beberapa tempat makan, lalu kita mendapatkan informasi tambahan dari jumlah orang di tempat itu."}},header:{title:"Pilih dua lapisan untuk memeriksa korelasi",hint:"Lapisan dan korelasi ditampilkan untuk Area Pilihan terkini"},icon:{population:"Nilai dibagi dengan Populasi",area_km2:"Nilai dibagi dengan Area",total_building_count:"Nilai dibagi dengan Perkiraan Jumlah Bangunan",populated_area_km2:"Nilai dibagi dengan Area Berpenduduk",one:"Tanpa pembagi",roads:"Nilai dibagi dengan Total Panjang Jalan"},progress:{rendering:"Merender",applied:"Diterapkan pada peta"}},legend:{high:"Tinggi",low:"Rendah",medium:"Sedang"}},cte="Feed",hte="Batalkan Pilihan",fte="Mengumpulkan data",dte="Diperbarui",pte="Tidak ada data yang diterima",mte="Data yang diterima salah",gte="Kesalahan",yte="Sortir Ikon",_te={Kontur_public_feed:"Publik Kontur",Kontur_public_feed_description:"Feed berisi data waktu-nyata tentang Angin Topan, Kekeringan, Gempa, Banjir, Gunung Meletus, Kebakaran Hutan."},vte={default:"Maaf, kami mengalami masalah yang akan segera diperbaiki",timeout:"Waktu Permintaan Habis",cannot_connect:"Tidak dapat terhubung ke server",forbidden:"Terlarang",not_found:"Tidak ditemukan",unknown:"Tidak diketahui",server_error:"Kesalahan Server"},xte={severity_unknown:"Tidak diketahui",warning_title:"Tidak dapat menggunakan peta sebagai filter",warning_description:"Peta belum siap, coba nanti",bbox_filter_button:"Gunakan tampilan peta sebagai filter",analytics:{affected_people:{tooltip:"Orang yang Terdampak",value:"Tidak berdampak kemanusiaan"},settled_area_tooltip:"Area yang Ditempati",loss_tooltip:"Estimasi kerugian"},no_event_in_feed:"Kejadian tidak ditemukan di feed kejadian terkini",no_selected_disaster:"Tidak ada bencana yang dipilih",chose_disaster:"Pilih bencana"},bte={overlays:"Tumpang Susun",basemap:"Peta Dasar"},wte={layers_in_selected_area:"Lapisan di area pilihan",your_layers:"Lapisan Anda",kontur_analytics:"Analitik Kontur",qa:"QA",osmbasedmap:"Berbasis OpenStreetMap",other:"Lainnya",elevation:"Elevasi",photo:"Foto",map:"Peta"},Ste={map:"Peta",about:"Tentang",reports:"Laporan",profile:"Profil"},Cte={load_world_data:"Memuat Data Dunia",numerator:"Pembilang",normalized_by:"Dinormalkan Dengan",sum:"Jumlah",min:"Min",max:"Maks",mean:"Rerata",stddev:"Simpangan baku",median:"Median",filter_denominator:"Filter Penyebut"},Ete={},kte={edit_layer:"Edit Lapisan",edit_features:"Edit Fitur",delete_layer:"Hapus Lapisan",create_layer:"Buat Lapisan",saving_layer:"Menyimpan lapisan...",field_name:"Nama bidang",layer_name:"Nama lapisan",marker_icon:"Ikon penanda",type:"Jenis",select:"Pilih",short_text:"Teks Singkat",long_text:"Teks Panjang",link:"Tautan",image:"Gambar",fields:"Bidang",add_field:"Tambahkan bidang",location:"Lokasi",edit_feature_placeholder:"Pilih beberapa fitur untuk mulai mengedit properti fitur"},Ate={header_title:"Analitik",error_loading:"Kesalahan saat mengambil data analitik"},Tte={header_title:"Analitik tingkat lanjut",error:"Kesalahan saat mengambil data analitik tingkat lanjut"},Pte={not_found:"Maaf, kejadian yang diminta tidak ditemukan.",error:"Terjadi kesalahan!"},Ite={not_found_request:"Maaf, kejadian yang diminta tidak ditemukan."},Mte={area:"Area",line:"Garis",point:"Titik",finish_drawing:"Selesai Menggambar",caption:"Klik peta untuk mulai menggambar",no_geometry_error:"Tidak ada gambar geometri untuk diunduh",overlap_error:"Poligon tidak boleh bertumpang-tindih sendiri",save_features:"Simpan fitur"},Lte={title:"Fokus ke batas administratif"},Ote={title:"Fokus ke geometri unggahan",error:"Kesalahan saat membaca file unggahan"},Fte={title:"Fokus ke geometri bebas"},Rte={settings:{name:"Area Pilihan"}},Dte={self_directions_not_supported:"Tidak mendukung perpotongan dengan dirinya sendiri!"},zte={biv_color_manager:"Pengelola warna",edit_osm:"Edit di OpenStreetMap",ruler:"Penggaris",collapse:"Ciutkan",expand:"Bentangkan",icon_alt:"Logo aplikasi"},Bte={email:"Email",password:"Kata Sandi",login_button:"Masuk",sign_up:"Daftar",logging_in:"Masuk...",log_in:"Masuk",description:"Masuk untuk mengubah pengaturan Anda",error:{email_empty:"Email tidak boleh kosong!",email_invalid:"Email harus valid!",password:"Kata sandi tidak boleh kosong!",connect:"Tidak dapat terhubung ke layanan autentikasi"}},$te={email:"Email",profileSettingsHeader:"Profil",interfaceTheme:"Tema",interfaceLanguage:"Bahasa",units:"Satuan",fullName:"Nama Lengkap",metric:"metrik",imperialBeta:"imperial (beta)",appSettingsHeader:"Pengaturan",saveButton:"Simpan perubahan",konturTheme:"Kontur",HOTTheme:"HANGAT","userBio(about)":"Bio",defaultDisasterFeed:"Feed bencana bawaan",defaultOSMeditor:"Editor OpenStreetMap bawaan (beta)",successNotification:"Semua perubahan telah berhasil diterapkan",languageOption:{en:"Inggris",es:"Spanyol",ar:"Arab",ko:"Korea",id:"Indonesia",de:"Jerman",uk:"Orang Ukraina"}},Nte={title:"Laporan Disaster Ninja",no_data:"Tidak ada data untuk laporan ini",sorting:"Menyortir data...",loading:"Memuat data",search_location:"Cari lokasi",open_josm:"Buka melalui kendali jarak jaruh JOSM",josm_logo_alt:"Logo JOSM",see_all:"Lihat semua laporan",wrong_id:"ID laporan salah",description:"<0>Kontur </0> menghasilkan beberapa laporan yang membantu memvalidasi kualitas OpenStreetMap. Laporan tersebut berisi tautan ke area di <4>osm.org </4> dan tautan untuk membukanya di editor JOSM dengan kendali jarak jauh untuk pengeditan yang diaktifkan."},Ute={title:"Selamat datang di Disaster Ninja!",intro:"Apakah Anda ingin menerima kabar tentang bencana yang sedang terjadi? Anda tertarik dengan data populasi dan analitik lainnya yang tersaji seketika untuk wilayah mana pun di dunia? Disaster Ninja menampilkan beberapa kemampuan dari <2>Kontur</2> dalam mengatasi berbagai kebutuhan ini.<br/><br/>Pada awalnya, kami merancang alat ini sebagai alat bantu untuk pemetaan kemanusiaan. Kini, fungsionalitas dan kasus penggunaannya telah bertambah. Apakah Anda bekerja pada pengelolaan bencana, membangun kota cerdas, ataupun meneliti perubahan iklim, Disaster Ninja dapat membantu Anda untuk:",l1:"1. Selalu mendapatkan kabar terbaru tentang kejadian berbahaya terkini di seluruh dunia.",p1:"Panel Bencana disegarkan secara terus-menerus untuk memberi tahu Anda kejadian yang sedang berlangsung. Panel ini memakai data dari <2>Feed Kejadian Kontur</2>, yang juga dapat diakses melalui API.",l2:"2. Fokus pada area perhatian Anda.",p2:"Panel Peralatan Gambar memungkinkan Anda menggambar atau mengunggah geometri Anda sendiri pada peta. Anda juga dapat berfokus pada area yang terpapar bencana atau satuan administratif  negara, kota, atau wilayah.",l3:"3. Dapatkan analitik untuk area yang menjadi fokus.",p3:"Panel Analitik memperlihatkan jumlah orang yang tinggal di area tersebut untuk setiap <2>Populasi Kontur</2> dan perkiraan kesenjangan pemetaan di OpenStreetMap. Pelanggan Kontur memiliki akses ke ratusan indikator lainnya melalui Analitik Lanjut.",l4:"4. Selidiki data pada peta dan buat kesimpulan.",p4:"Panel Lapisan memberi Anda berbagai opsi untuk menampilkan dua indikator secara serentak pada peta bivariat, misalnya kepadatan populasi dan jarak ke stasiun pemadam kebakaran terdekat. Gunakan legenda warna untuk menilai area mana yang perlu diperhatikan. <br/>Petunjuk: secara umum, warna hijau menunjukkan risiko rendah/sedikit kesenjangan, warna merah  risiko tinggi/banyak kesenjangan.",p5:"Selain itu, Anda dapat beralih ke Laporan di panel kiri untuk mengakses data tentang potensi kesalahan dan inkonsistensi di OpenStreetMap serta membantu memperbaikinya dengan memetakan masing-masing area menggunakan editor JOSM.",goToMap:"Buka peta sekarang",p6:"Kami berharap agar alat ini bermanfaat bagi Anda. Gunakan kotak obrolan di Disaster Ninja untuk setiap pertanyaan tentang fungsionalitas, dan kami dengan senang hati akan memandu Anda. Anda juga dapat menghubungi kami melalui email di <1>hello@kontur.io</1> jika Anda memiliki tanggapan atau saran untuk meningkatkan alat ini.<br/><br/>Disaster Ninja adalah proyek sumber terbuka. Temukan kodenya di <8>akun GitHub Kontur</8>."},jte={get_location_error:"Kesalahan saat memperoleh lokasi",feature_title:"Temukan saya"},Vte="Episode",qte="Memuat Episode",Gte={},Hte={},Wte={km:Wee,m:Zee,to:Kee,maps:Xee,logout:Yee,save:Jee,cancel:Qee,create:ete,disasters:tte,loading:nte,loading_events:rte,legend:ite,vertical_direction:ote,horizontal_direction:ate,legend_presentation:ste,layers:lte,bivariate:ute,feed:cte,deselect:hte,spinner_text:fte,updated:dte,no_data_received:pte,wrong_data_received:mte,error:gte,sort_icon:yte,configs:_te,errors:vte,event_list:xte,categories:bte,groups:wte,modes:Ste,advanced_analytics_data_list:Cte,mcda:Ete,create_layer:kte,analytics_panel:Ate,advanced_analytics_panel:Tte,advanced_analytics_empty:Pte,current_event:Ite,draw_tools:Mte,boundary_selector:Lte,geometry_uploader:Ote,focus_geometry:Fte,focus_geometry_layer:Rte,drawings:Dte,sidebar:zte,login:Bte,profile:$te,reports:Nte,about:Ute,locate_me:jte,episode:Vte,loading_episodes:qte,cookie_banner:Gte,live_sensor:Hte},Zte="km",Kte="m",Xte="bis",Yte="Karten",Jte="Abmelden",Qte="Speichern",ene="Abbrechen",tne="Erstellen",nne="Katastrophen",rne="Wird geladen...",ine="Ereignisse werden geladen",one="Legende",ane="Vertikale Richtung",sne="Horizontale Richtung",lne="Darstellung der Legende",une="Ebenen",cne={color_manager:{layers_filter:"Ebenen",not_defined:"Nicht definiert",sentiments_combinations_filter:"Stimmungs-Kombinationen",no_legends:"Es gibt keine Legenden, die den Kriterien entsprechen.",no_data:"Keine Daten.",sentiments_tab:"Stimmungen",color_legends_tab:"Farbe Legenden",layers_tab:"Ebenen (Indikatoren)"},panel:{header:"Bivariate Matrix"},matrix:{caption:{base_axis:"Basisachse",annex_axis:"Hilfsachse",tooltip:{p1:"Diagramme mit der Basis- und der Hilfsachse helfen, eine Beziehung zwischen zwei Datenstzen herzustellen.",li1:"Hilfsachse - Parameter, die wir analysieren",li2:"Basisachse - Referenzpunkt in der Analyse",b:"Beispiel: der beste Standort fr die Erffnung eines Cafs",p2:"Wir knnen die Anzahl der Lokale (Hilfsachse) gegen die Bevlkerungsdichte (Basisachse) untersuchen.",p3:"In diesem Szenario liegt unser Interesse zunchst auf einer kleinen Anzahl von Lokalen, wobei uns die Anzahl der Personen in diesem Ort zustzliche Informationen liefert."}},header:{title:"Whlen Sie zwei Ebenen, um Zusammenhnge zu untersuchen",hint:"Die Ebenen und Zusammenhnge werden fr den aktuellen ausgewhlten Bereich angezeigt"},icon:{population:"Wert geteilt durch Einwohnerzahl",area_km2:"Wert geteilt durch Flche",total_building_count:"Wert geteilt durch geschtzte Gesamtbebauung",populated_area_km2:"Wert geteilt durch bevlkerte Flche",one:"Ohne Teilung",roads:"Wert geteilt durch die Gesamtlnge der Straen"},progress:{rendering:"bertragung",applied:"Wird auf die Karte angewendet"}},legend:{high:"Hoch",low:"Niedrig",medium:"Mittel"}},hne="Feed",fne="Auswahl aufheben",dne="Daten sammeln",pne="Aktualisiert",mne="Keine Daten erhalten",gne="Falsche Daten empfangen",yne="Fehler",_ne="Sortiersymbol",vne={Kontur_public_feed:"Kontur ffentlichkeit",Kontur_public_feed_description:"Der Feed enthlt Echtzeitdaten ber Wirbelstrme, Drren, Erdbeben, berschwemmungen, Vulkanausbrche und Waldbrnde."},xne={default:"Leider gibt es derzeit ein paar Probleme, die wir in Krze beheben werden",timeout:"Zeitberschreitung der Anfrage",cannot_connect:"Die Verbindung zum Server kann nicht hergestellt werden",forbidden:"Verboten",not_found:"Nicht gefunden",unknown:"Unbekannt",server_error:"Serverfehler"},bne={severity_unknown:"Unbekannt",warning_title:"Die Karte kann nicht als Filter verwendet werden",warning_description:"Die Karte ist noch nicht bereit. Bitte versuchen Sie es spter.",bbox_filter_button:"Kartenansicht als Filter verwenden",analytics:{affected_people:{tooltip:"Betroffene Menschen",value:"Keine humanitren Auswirkungen"},settled_area_tooltip:"Besiedeltes Gebiet",loss_tooltip:"Geschtzter Verlust"},no_event_in_feed:"Das Ereignis wurde nicht im aktuellen Ereignis-Feed gefunden",no_selected_disaster:"Keine Katastrophe ausgewhlt",chose_disaster:"Katastrophe auswhlen"},wne={overlays:"berlagerungen",basemap:"Basiskarte"},Sne={layers_in_selected_area:"Ebenen im ausgewhlten Bereich",your_layers:"Ihre Ebenen",kontur_analytics:"Kontur Analytik",qa:"QS",osmbasedmap:"Basierend auf OpenStreetMap",other:"Andere",elevation:"Hhe",photo:"Foto",map:"Karte"},Cne={map:"Karte",about:"ber uns",reports:"Berichte",profile:"Profil"},Ene={load_world_data:"Weltdaten laden",numerator:"Zhler",normalized_by:"Normalisiert auf",sum:"Summe",min:"Min",max:"Max",mean:"Mittelwert",stddev:"SD",median:"Median",filter_denominator:"Filter Nenner"},kne={},Ane={edit_layer:"Ebene bearbeiten",edit_features:"Merkmale bearbeiten",delete_layer:"Ebene lschen",create_layer:"Ebene erstellen",saving_layer:"Ebene wird gespeichert...",field_name:"Feldname",layer_name:"Name der Ebene",marker_icon:"Markierungssymbol",type:"Typ",select:"Auswhlen",short_text:"Kurzer Text",long_text:"Langer Text",link:"Link",image:"Bild",fields:"Felder",add_field:"Feld hinzufgen",location:"Standort",edit_feature_placeholder:"Whlen Sie einige Merkmale aus, um Merkmalseigenschaften zu bearbeiten"},Tne={header_title:"Analytik",error_loading:"Fehler beim Abrufen von Analysedaten"},Pne={header_title:"Erweiterte Analytik",error:"Fehler beim Abrufen von erweiterten Analysedaten"},Ine={not_found:"Leider wurde das gewnschte Ereignis nicht gefunden.",error:"Es ist ein Fehler aufgetreten!"},Mne={not_found_request:"Leider wurde das gewnschte Ereignis nicht gefunden."},Lne={area:"Gebiet",line:"Linie",point:"Punkt",finish_drawing:"Zeichnen beenden",caption:"Klicken Sie auf die Karte, um mit dem Zeichnen zu beginnen",no_geometry_error:"Keine gezeichnete Formen zum Herunterladen",overlap_error:"Das Polygon darf sich nicht berschneiden",save_features:"Merkmale speichern"},One={title:"Fokus auf die Verwaltungsgrenze"},Fne={title:"Fokus auf die hochgeladene geometrische Form",error:"Fehler beim Lesen der hochgeladenen Datei"},Rne={title:"Fokus auf freihndig gezeichnete Formen"},Dne={settings:{name:"Ausgewhltes Gebiet"}},zne={self_directions_not_supported:"berschneidungen werden nicht untersttzt!"},Bne={biv_color_manager:"Farbmanager",edit_osm:"In OpenStreetMap bearbeiten",ruler:"Lineal",collapse:"Zusammenklappen",expand:"Erweitern",icon_alt:"Logo der Anwendung"},$ne={email:"E-Mail",password:"Passwort",login_button:"Anmelden",sign_up:"Registrieren",logging_in:"Anmelden...",log_in:"Einloggen",description:"Bitte melden Sie sich an, um Ihre Einstellungen zu ndern",error:{email_empty:"E-Mail darf nicht leer sein!",email_invalid:"E-Mail muss gltig sein!",password:"Passwort darf nicht leer sein!",connect:"Die Verbindung zum Authentifizierungsdienst konnte nicht hergestellt werden"}},Nne={email:"E-Mail",profileSettingsHeader:"Profil",interfaceTheme:"Thema",interfaceLanguage:"Sprache",units:"Einheiten",fullName:"Vollstndiger Name",metric:"metrisch",imperialBeta:"imperial (beta)",appSettingsHeader:"Einstellungen",saveButton:"nderungen speichern",konturTheme:"Kontur",HOTTheme:"HOT","userBio(about)":"Bio",defaultDisasterFeed:"Standardmige Katastrophenmeldung",defaultOSMeditor:"Standardmiger OpenStreetMap-Editor (Beta)",successNotification:"Alle nderungen wurden erfolgreich bernommen",languageOption:{en:"Englisch",es:"Spanisch",ar:"Arabisch",ko:"Koreanisch",id:"Indonesisch",de:"Deutsch",uk:"Ukrainisch"}},Une={title:"Disaster Ninja Berichte",no_data:"Keine Daten fr diesen Bericht",sorting:"Daten werden sortiert...",loading:"Daten werden geladen",search_location:"Standort suchen",open_josm:"ffnen ber die JOSM-Fernsteuerung",josm_logo_alt:"JOSM-Logo",see_all:"Alle Berichte anzeigen",wrong_id:"Falsche Berichts-ID",description:"<0>Kontur </0> generiert verschiedene Berichte, die bei der berprfung der Qualitt von OpenStreetMap helfen. Sie enthalten Links zu Gebieten auf <4>osm.org </4> und Links, um sie im JOSM-Editor mit aktivierter Fernsteuerung zur Bearbeitung ffnen zu knnen."},jne={title:"Willkommen bei Disaster Ninja!",intro:"Mchten Sie ber aktuelle Katastrophen informiert werden? Sind Sie an sofortigen Bevlkerungsdaten und anderen Analysen fr eine beliebige Region auf der Welt interessiert? Disaster Ninja zeigt Ihnen einige der Funktionen von <2>Kontur</2>, mit denen diese Anforderungen umgesetzt werden knnen.<br/><br/>Ursprnglich haben wir es als Entscheidungshilfe fr Kartografen im humanitren Bereich entwickelt. Mittlerweile ist der Funktionsumfang und der Anwendungsbereich des Programms erweitert worden. Ganz gleich, ob Sie im Katastrophenmanagement ttig sind, eine intelligente Stadt bauen oder ber den Klimawandel forschen, Disaster Ninja kann Ihnen dabei helfen:",l1:"1. ber die aktuellen Gefahrenereignisse weltweit auf dem Laufenden zu bleiben.",p1:"Das Bedienfeld von Disasters wird kontinuierlich aktualisiert, um Sie ber aktuelle Ereignisse zu informieren. Es bezieht die Daten aus dem <2>Kontur Ereignis-Feed</2>, auf den Sie auch ber eine API zugreifen knnen.",l2:"2. Den Fokus auf Ihr Interessengebiet zu legen.",p2:"Mit den Zeichenwerkzeugen knnen Sie Ihre eigene geometrische Form auf die Karte zeichnen oder hochladen. Sie knnen sich auch auf ein von einer Katastrophe betroffenes Gebiet oder eine Verwaltungseinheit - ein Land, eine Stadt oder eine Region - konzentrieren.",l3:"3. Die Analytik fr den ausgewhlten Bereich aufrufen.",p3:"Das Bedienfeld Analytik zeigt die Anzahl der in diesem Gebiet lebenden Menschen pro <2>Kontur Bevlkerung</2> und geschtzte Kartierungslcken in OpenStreetMap. Kontur-Kunden haben ber Erweiterte Analytik Zugang zu Hunderten von weiteren Indikatoren.",l4:"4. Die Daten auf der Karte entdecken und Schlussfolgerungen ziehen.",p4:"Das Ebenen-Panel bietet Ihnen verschiedene Optionen, um zwei Indikatoren gleichzeitig auf einer bivariaten Karte anzuzeigen, z. B. die Bevlkerungsdichte und die Entfernung zur nchsten Feuerwache. Verwenden Sie die Farblegende, um zu beurteilen, welche Bereiche Aufmerksamkeit erfordern. <br/>Tipp: Im Allgemeinen bedeutet grn ein geringes Risiko / wenige Lcken, rot ein hohes Risiko / viele Lcken.",p5:"Auerdem knnen Sie im linken Bereich zu Berichte wechseln, um auf Daten zu potenziellen Fehlern und Unstimmigkeiten in OpenStreetMap zuzugreifen und dabei zu helfen, diese zu beheben, indem Sie das entsprechende Gebiet mit dem JOSM-Editor kartieren.",goToMap:"Jetzt die Karte aufrufen",p6:"Wir hoffen, dass dieses Tool Ihnen von Nutzen ist. Wenn Sie Fragen zur Funktionalitt haben, knnen Sie die Chatbox auf Disaster Ninja nutzen, und wir helfen Ihnen gerne weiter. Sie knnen uns auch eine E-Mail an <1>hello@kontur.io</1> schreiben, wenn Sie Feedback oder Vorschlge zur Verbesserung des Tools haben.<br/><br/>Disaster Ninja ist ein Open-Source-Projekt. Sie finden den Code in <8>Konturs GitHub-Konto</8>."},Vne={get_location_error:"Fehler beim Abrufen des Standorts",feature_title:"Standort finden"},qne="Episode",Gne="Episoden werden geladen",Hne={},Wne={},Zne={km:Zte,m:Kte,to:Xte,maps:Yte,logout:Jte,save:Qte,cancel:ene,create:tne,disasters:nne,loading:rne,loading_events:ine,legend:one,vertical_direction:ane,horizontal_direction:sne,legend_presentation:lne,layers:une,bivariate:cne,feed:hne,deselect:fne,spinner_text:dne,updated:pne,no_data_received:mne,wrong_data_received:gne,error:yne,sort_icon:_ne,configs:vne,errors:xne,event_list:bne,categories:wne,groups:Sne,modes:Cne,advanced_analytics_data_list:Ene,mcda:kne,create_layer:Ane,analytics_panel:Tne,advanced_analytics_panel:Pne,advanced_analytics_empty:Ine,current_event:Mne,draw_tools:Lne,boundary_selector:One,geometry_uploader:Fne,focus_geometry:Rne,focus_geometry_layer:Dne,drawings:zne,sidebar:Bne,login:$ne,profile:Nne,reports:Une,about:jne,locate_me:Vne,episode:qne,loading_episodes:Gne,cookie_banner:Hne,live_sensor:Wne},Kne="",Xne="",Yne="",Jne="",Qne="",ere="",tre="",nre="",rre="",ire="...",ore=" ",are="",sre=" ",lre=" ",ure=" ",cre="",hre={color_manager:{layers_filter:"",not_defined:" ",sentiments_combinations_filter:" ",no_legends:" ,   .",no_data:" .",sentiments_tab:"",color_legends_tab:" ",layers_tab:" ()"},panel:{header:" "},matrix:{caption:{base_axis:" ",annex_axis:" ",tooltip:{p1:",      ,       .",li1:"  - ,   ",li2:"  -   ",b:":     ",p2:"      ( )    ( ).",p3:"         ,          ."}},header:{title:"  ,    ",hint:"      "},icon:{population:",    ",area_km2:",   ",total_building_count:",     ",populated_area_km2:",    ",one:" ",roads:",     "},progress:{rendering:"",applied:"  "},loading_error:" ,     .     ."},legend:{high:"",low:"",medium:""}},fre="",dre=" ",pre=" ",mre="",gre=" ",yre="  ",_re="",vre=" ",xre={Kontur_public_feed_description:"       , , , , ,  ."},bre={default:",    ,    ",timeout:"   ",cannot_connect:"  '  ",forbidden:"",not_found:" ",unknown:"",server_error:" "},wre={severity_unknown:"",warning_title:"     ",warning_description:"   ,  ",bbox_filter_button:"    ",analytics:{affected_people:{tooltip:"  ",value:"  "},settled_area_tooltip:" ",loss_tooltip:" "},no_event_in_feed:"      ",no_selected_disaster:"  ",chose_disaster:" ",no_historical_disasters:"     ",no_feed_disasters:"   ",no_disasters:" ",severity_termination:"",severity_minor:"",severity_moderate:"",severity_severe:"",severity_extreme:"",open_timeline_button:"  "},Sre={overlays:"",basemap:" "},Cre={layers_in_selected_area:"   ",your_layers:" ",kontur_analytics:" Kontur",qa:" ",osmbasedmap:"  OpenStreetMap",other:"",elevation:"'",photo:"",map:""},Ere={map:"",about:" ",reports:"",profile:"",privacy:""},kre={load_world_data:"    ",numerator:"",normalized_by:" ",sum:"",min:".",max:".",mean:"",stddev:" ",median:"",filter_numerator:" ",filter_denominator:" "},Are={},Tre={edit_layer:" ",edit_features:" '",delete_layer:" ",create_layer:" ",saving_layer:" ...",field_name:" ",layer_name:" ",marker_icon:" ",type:"",select:"",short_text:"()",long_text:"()",link:"",image:"",fields:"",add_field:" ",location:"",edit_feature_placeholder:"     "},Pre={header_title:"",error_loading:"     "},Ire={header_title:" ",error:"      "},Mre={not_found:",   .",error:" !",analytics_for_selected:"   ",will_be_provided:"  "},Lre={not_found_request:",   ."},Ore={area:"",line:"",point:"",finish_drawing:" ",caption:"  ,   ",no_geometry_error:"   ",overlap_error:"     ",save_features:" '"},Fre={title:"   "},Rre={title:"   ",error:"    "},Dre={title:"   "},zre={settings:{name:" "}},Bre={self_directions_not_supported:"  !"},$re={biv_color_manager:" ",edit_osm:"  OpenStreetMap",ruler:"",collapse:"",expand:"",icon_alt:" "},Nre={email:" ",password:"",login_button:"",sign_up:"",logging_in:"...",log_in:"",description:",   ",error:{email_empty:"     !",email_invalid:"    !",password:"    !",connect:"  '   "}},Ure={email:" ",profileSettingsHeader:"",interfaceTheme:"",interfaceLanguage:"",units:" ",fullName:" '",metric:" ",imperialBeta:"  ()",appSettingsHeader:"",saveButton:" ","userBio(about)":" ",defaultDisasterFeed:"   ",defaultOSMeditor:" OpenStreetMap   ()",successNotification:"   ",languageOption:{en:"",es:"",ar:"",ko:"",id:"",de:"",uk:""}},jre={title:" Disaster Ninja",no_data:"   ",sorting:" ...",loading:" ",search_location:" ",open_josm:"  JOSM",josm_logo_alt:" JOSM",see_all:"  ",wrong_id:" ID ",description:"<0>Kontur </0>         OpenStreetMap.     <4>osm.org</4>  ,      JOSM  ."},Vre={title:"  Disaster Ninja!",intro:"     ?           -  ? Disaster Ninja  <2>Kontur</2>    .<br/><br/>           .    .   ,         ,         , Disaster Ninja   :",l1:"1.        .",p1:"   ,      .      <2>Kontur</2>,        API.",l2:"2.     .",p2:' " "        .      ,     ,      ,   .',l3:"3.     .",p3:"    ,        <2> Kontur</2>      OpenStreetMap.  Kontur          .",l4:"4.       .",p4:' ""          , ,        .   ,  ,    . <br/>:       /  ,     /  .',p5:" ,        ,             OpenStreetMap    ,     JOSM.",goToMap:"  ",p6:" ,     .     Disaster Ninja,   -   ,      .         <1>hello@kontur.io</1>          .<br/><br/> Disaster Ninja     .      GitHub <8>Kontur</8>."},qre={get_location_error:"    ",feature_title:" "},Gre="",Hre=" ",Wre={header:"   ",body:`     cookies,     ,    cookies,   Disaster Ninja   .   -    cookies        cookies.
  ,   [ ]( /)`,decline_all:"  cookies",accept_all:"  cookies"},Zre={start:"    ",finish:"    ",finishMessage:"  ",startMessage:"  ",noSensorsError:"     "},Kre={km:Kne,m:Xne,to:Yne,maps:Jne,logout:Qne,save:ere,cancel:tre,create:nre,disasters:rre,loading:ire,loading_events:ore,legend:are,vertical_direction:sre,horizontal_direction:lre,legend_presentation:ure,layers:cre,bivariate:hre,feed:fre,deselect:dre,spinner_text:pre,updated:mre,no_data_received:gre,wrong_data_received:yre,error:_re,sort_icon:vre,configs:xre,errors:bre,event_list:wre,categories:Sre,groups:Cre,modes:Ere,advanced_analytics_data_list:kre,mcda:Are,create_layer:Tre,analytics_panel:Pre,advanced_analytics_panel:Ire,advanced_analytics_empty:Mre,current_event:Lre,draw_tools:Ore,boundary_selector:Fre,geometry_uploader:Rre,focus_geometry:Dre,focus_geometry_layer:zre,drawings:Bre,sidebar:$re,login:Nre,profile:Ure,reports:jre,about:Vre,locate_me:qre,episode:Gre,loading_episodes:Hre,cookie_banner:Wre,live_sensor:Zre},Xre="en";mo.use(VO).use(PX).init({fallbackLng:Xre,debug:!1,defaultNS:"common",interpolation:{escapeValue:!1},contextSeparator:":",pluralSeparator:":",resources:{en:{common:VY},es:{common:qJ},ar:{common:GQ},ko:{common:Hee},id:{common:Wte},de:{common:Zne},uk:{common:Kre}}});const lr={t:(e,t)=>{const n=mo.t(e,t);return typeof n=="string"?n:(console.error(`Not supported translation result for key: ${e}`),e)},instance:mo},Ao=3,qO=[0,Ao-1,Ao*Ao-Ao,Ao*Ao-1],K1=`${lr.t("bivariate.legend.low")}`,X1=`${lr.t("bivariate.legend.high")}`,GO=lr.t("bivariate.legend.medium"),Yre=e=>Array.from(Array(Ao),(t,n)=>n).includes(e),OC=e=>{const t=Ao*Ao-Ao;return Array.from(Array(Ao),(n,r)=>t+r).includes(e)},FC=e=>Array.from(Array(Ao),(t,n)=>n*Ao).includes(e),Jre=e=>Array.from(Array(Ao),(t,n)=>n*Ao+(Ao-1)).includes(e);const Mb=pt.memo(({children:e,tooltipText:t,renderTooltip:n,tooltipId:r,hoverBehavior:a=!0,popupClasses:c})=>{const d=_C(e_.setCurrentTooltip),l=_C(e_.resetCurrentTooltip),x=A=>{t&&d({popupClasses:c,popup:t,position:{x:A.clientX,y:A.clientY},onOuterClick(L,F){F()},initiatorId:r,hoverBehavior:a})};return e({showTooltip:(A,...L)=>{n?n(A,d,...L):x(A)},hideTooltip:()=>{l()}})});Mb.displayName="TooltipWrapper";function Nf(e){return["get",e]}function Qre(e){return["var",e]}function z4(e,t){return["<",e,t]}function RC(e,t){return["!=",e,t]}function eie(e,t){return["==",e,t]}function DC(e,t){return[e,t]}function zC(...e){const t=e.pop();return["case",...e.flat(2),t]}function tie(...e){return["concat",...e]}function nie(e,t,n){return["let",e,t,n]}function HO(...e){return["any",...e]}function BC(e){return typeof e=="string"?e==="1"?1:Nf(e):Array.isArray(e)?e.map((t,n)=>n===0?t:BC(t)):e}const rie=64,$C=e=>String.fromCharCode(rie+e);function iie(e,t){const n=BC(e.propName),r=BC(t.propName);return tie(zC(e.borders.map((a,c)=>DC(z4(n,a),$C(c))),$C(e.borders.length)),zC(t.borders.map((a,c)=>DC(z4(r,a),c)),t.borders.length))}function oie(e,t,n){return zC(Object.entries(t).map(([r,a])=>DC(eie(Qre(e),r),a)),n)}function aie(e){return Object.fromEntries(e.map(Object.values))}function sie(e,t){return HO(RC(["/",Nf(e.quotient[0]),Nf(e.quotient[1])],0),RC(["/",Nf(t.quotient[0]),Nf(t.quotient[1])],0))}function lie(e,t,n){return nie("class",iie({propName:["/",...e.quotient],borders:e.steps.reduce((r,{value:a})=>(r.push(a),r),[])},{propName:["/",...t.quotient],borders:t.steps.reduce((r,{value:a})=>(r.push(a),r),[])}),oie("class",n,"transparent"))}function WO({x:e,y:t,colors:n,source:r,sourceLayer:a,id:c="bivariate"}){const d={id:c,type:"fill",layout:{},filter:sie(e,t),paint:{"fill-color":lie(e,t,aie(n)),"fill-opacity":1,"fill-antialias":!1}};return r&&(d.source=r),a&&(d["source-layer"]=a),d}function uie(e,t="id"){const n=e.reduce((r,a)=>{const c=a[t].slice(0,1);return r[c]?r[c].push(a):r[c]=[a],r},{});return Object.values(n)}function cie(e,t="id"){return[...uie(e,t)].reverse().reduce((r,a)=>r.concat(a),[])}const hie=e=>e!==null&&typeof e=="object"&&"message"in e,m3=e=>e.charAt(0).toUpperCase()+e.slice(1),fie=e=>e.map(m3).join(", "),NC=(e,t)=>e.reduce((n,r)=>n+r[t],0),die=e=>e!=null,pie=e=>Array.isArray(e)?fie(e):m3(e),B4=e=>{if(!e)return"";const[t,n]=e;return $4(t.unit.id)?n.name==="one"?`${t.label} (${t.unit.shortName})`:$4(n.unit.id)?n.name==="area_km2"?`${t.label} (${t.unit.shortName}/${n.unit.shortName})`:`${t.label} to ${n.label} (${t.unit.shortName}/${n.unit.shortName})`:`${t.label} to ${n.label} (${t.unit.shortName})`:`${t.label} to ${n.label}`},$4=e=>!!(e&&e!=="other"),mie="_tooltipRoot_zjmcz_1",gie="_tooltipRow_zjmcz_11",yie="_sentimentDirection_zjmcz_17",_ie="_sentimentLabel_zjmcz_21",vie="_sentimentInfo_zjmcz_25",xie="_indicator_zjmcz_29",hp={tooltipRoot:mie,tooltipRow:gie,sentimentDirection:yie,sentimentLabel:_ie,sentimentInfo:vie,indicator:xie},bie=({children:e,hints:t})=>{const n=(r,a,c,d)=>{t&&qO.includes(d)&&a({popup:Xe(wie,{cellIndex:d,hints:t}),position:{x:r.clientX,y:r.clientY},hoverBehavior:!0})};return pt.isValidElement(e)?Xe(Mb,{renderTooltip:n,children:({showTooltip:r,hideTooltip:a})=>pt.cloneElement(e,{onCellPointerOver:r,onCellPointerLeave:a})}):null},wie=({hints:e,cellIndex:t})=>{var r,a,c,d,l,x;if(!e)return null;const n=[{label:(r=e.x)==null?void 0:r.label,direction:(c=(a=e.x)==null?void 0:a.direction)==null?void 0:c[OC(t)?0:1],indicator:OC(t)?K1:X1},{label:(d=e.y)==null?void 0:d.label,direction:(x=(l=e.y)==null?void 0:l.direction)==null?void 0:x[FC(t)?0:1],indicator:FC(t)?K1:X1}];return Xe("div",{className:Ci(hp.tooltipRoot),children:n.map(({label:b,direction:E,indicator:A},L)=>mn("div",{className:Ci(hp.tooltipRow),children:[Xe("span",{className:Ci(hp.indicator),children:A}),mn("span",{className:Ci(hp.sentimentInfo),children:[mn("span",{className:Ci(hp.sentimentLabel),children:[b," "]}),E&&Xe("span",{className:Ci(hp.sentimentDirection),children:pie(E)})]})]},L))})},Sie={hints:{x:{label:"Average NDVI, JUN 2019",direction:[["bad"],["good"]]},y:{label:"Multi-hazard exposure PDC GRVA",direction:[["unimportant"],["bad","important"]]}}},Cie={x:{label:"Multi-hazard exposure PDC GRVA to 1",steps:[{label:"",value:0},{label:"",value:.48},{label:"",value:.62},{label:"",value:1}],quality:.997101882904748,quotient:["mhe_index","one"]},y:{label:"Average NDVI, JUN 2019 to 1",steps:[{label:"",value:-1},{label:"",value:.3625118070036407},{label:"",value:.6441754083082613},{label:"",value:1}],quality:.9410965072118505,quotient:["avg_ndvi","one"]}},Eie=[{label:"C1",color:"rgba(90,200,127,0.5)"},{label:"C2",color:"rgba(179,165,130,0.5)"},{label:"C3",color:"rgba(153,153,153,0.5)"},{label:"B1",color:"rgba(169,218,122,0.5)"},{label:"B2",color:"rgba(195,163,111,0.5)"},{label:"B3",color:"rgba(204,103,116,0.5)"},{label:"A1",color:"rgba(232,232,157,0.5)"},{label:"A2",color:"rgba(216,159,88,0.5)"},{label:"A3",color:"rgba(228,26,28,0.5)"}];function kie(){return mn(DL,{children:[Xe(zO,{}),Xe(bie,{meta:Sie,children:Xe(oq,{showAxisLabels:!0,size:Ao,axis:Cie,cells:Eie})})]})}const Aie="_LegendGrid_1ko5k_1",Tie="_LegendGridCell_1ko5k_10",Pie="_LegendGridCellChanged_1ko5k_17",Iie="_LegendGridCellUndefinedChanged_1ko5k_22",Mie="_CircleIndicator_1ko5k_26",Lie="_UndefinedColorsIndicator_1ko5k_36",fp={LegendGrid:Aie,LegendGridCell:Tie,LegendGridCellChanged:Pie,LegendGridCellUndefinedChanged:Iie,CircleIndicator:Mie,UndefinedColorsIndicator:Lie},Gg=({legendSteps:e,changes:t={}})=>{const n=qO.map(a=>e[a]),r=e.some(a=>a.isFallbackColor);return mn("div",{className:fp.LegendGrid,children:[n.map(a=>{var b;let c=a.color,d=!1,l,x;if(t[a.label]){d=!0;const E=(b=t[a.label])==null?void 0:b.color;c=E,l=E?fp.LegendGridCellChanged:fp.LegendGridCellUndefinedChanged}return c&&(x={backgroundColor:c}),Xe("div",{className:Ci(fp.LegendGridCell,l),style:x,children:d&&Xe("div",{className:fp.CircleIndicator})},a.label)}),r&&Xe("div",{className:fp.UndefinedColorsIndicator,children:Xe(Oie,{})})]})},Oie=()=>mn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[Xe("circle",{cx:"10",cy:"10",r:"10",fill:"white"}),Xe("path",{d:"M10 3C6.13438 3 3 6.13438 3 10C3 13.8656 6.13438 17 10 17C13.8656 17 17 13.8656 17 10C17 6.13438 13.8656 3 10 3ZM10 15.8125C6.79063 15.8125 4.1875 13.2094 4.1875 10C4.1875 6.79063 6.79063 4.1875 10 4.1875C13.2094 4.1875 15.8125 6.79063 15.8125 10C15.8125 13.2094 13.2094 15.8125 10 15.8125Z",fill:"#F5222D"}),Xe("path",{d:"M9.25 12.75C9.25 12.9489 9.32902 13.1397 9.46967 13.2803C9.61032 13.421 9.80109 13.5 10 13.5C10.1989 13.5 10.3897 13.421 10.5303 13.2803C10.671 13.1397 10.75 12.9489 10.75 12.75C10.75 12.5511 10.671 12.3603 10.5303 12.2197C10.3897 12.079 10.1989 12 10 12C9.80109 12 9.61032 12.079 9.46967 12.2197C9.32902 12.3603 9.25 12.5511 9.25 12.75ZM9.625 11H10.375C10.4438 11 10.5 10.9438 10.5 10.875V6.625C10.5 6.55625 10.4438 6.5 10.375 6.5H9.625C9.55625 6.5 9.5 6.55625 9.5 6.625V10.875C9.5 10.9438 9.55625 11 9.625 11Z",fill:"#F5222D"})]}),Hg=[{label:"A1",color:"rgba(232,232,157,0.5)"},{label:"A2",color:"rgba(216,159,88,0.5)"},{label:"A3",color:"rgba(228,26,28,0.5)"},{label:"B1",color:"rgba(169,218,122,0.5)"},{label:"B2",color:"rgba(159,171,87,0.5)"},{label:"B3",color:"rgba(140,127,57,0.5)"},{label:"C1",color:"rgba(90,200,127,0.5)"},{label:"C2",color:"rgba(88,176,117,0.5)"},{label:"C3",color:"rgba(83,152,106,0.5)"}],Fie=mn("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:["All next colors - undefined",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:void 0},A3:{color:void 0},C1:{color:void 0},C3:{color:void 0}}}),"No changes",Xe(Gg,{legendSteps:Hg,changes:{}}),"All changed",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:"rgba(173, 169, 200, 0.5)"},A3:{color:"rgba(12, 155, 237, 0.5)"},C1:{color:"rgba(171, 216, 237, 0.5)"},C3:{color:"rgba(83, 152, 106, 0.5)"}}}),"Half of cells changed",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:"rgba(173, 169, 200, 0.5)"},C3:{color:"rgba(83, 152, 106, 0.5)"}}}),"Half of cells changed, half comes incorrect",Xe(Gg,{legendSteps:Hg,changes:{A1:{color:void 0},A3:{color:"rgba(12, 155, 237, 0.5)"},C1:{color:"rgba(173, 169, 200, 0.5)"},C3:{color:void 0}}})]}),Rie="modulepreload",Die=function(e,t){return new URL(e,t).href},N4={},zie=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(c=>{if(c=Die(c,r),c in N4)return;N4[c]=!0;const d=c.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!r)for(let E=a.length-1;E>=0;E--){const A=a[E];if(A.href===c&&(!d||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${l}`))return;const b=document.createElement("link");if(b.rel=d?"stylesheet":Rie,d||(b.as="script",b.crossOrigin=""),b.href=c,document.head.appendChild(b),d)return new Promise((E,A)=>{b.addEventListener("load",E),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t()).catch(c=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c})},Bie=e=>new Proxy({},{get:(t,n)=>{if(typeof n=="string")return pt.lazy(()=>e(n).then(r=>({default:r[n]})))}}),U4="bivariate-greetings-disabled",$ie="_container_zzzsn_1",Nie="_closeButton_zzzsn_8",j4={container:$ie,closeButton:Nie},{BivariateGreetings:Uie}=Bie(()=>zie(()=>import("./BivariateGreetings-1ae0ed2f.js"),[],import.meta.url)),jie=({className:e})=>{const[t,n]=pt.useState(!1);pt.useEffect(()=>{!Lh.getItem(U4)&&!t&&n(!0)},[]);const r=()=>{n(!1),Lh.setItem(U4,"true")};return t?mn("div",{className:Ci(e,j4.container),children:[Xe(pt.Suspense,{fallback:null,children:Xe(Uie,{})}),Xe("div",{onClick:r,className:j4.closeButton,children:Xe(Qj,{})})]}):null},Vie=()=>Xe(jie,{});var qie=0;function Gie(e){var t=e.get,n=e.set,r=e.throttle,a=r===void 0?0:r;return function(c){var d="__persistIntervalId"+ ++qie;return function(l){return function(x,b){var E=b.atom.id;b.tracks==null&&(b.state=t(c??E));var A=l(x,b);return n!=null&&x.schedule(function(){var L;a==0?n(c??E,A.state):((L=A.ctx[d])!=null?L:null)===null&&(A.ctx[d]=setTimeout(function(){A.ctx[d]=null,n(c??E,x.getCache(A.atom).state)},150))}),A}}}}var Hie={get:function(e){var t,n=(t=globalThis.localStorage)==null?void 0:t.getItem(e);return n?JSON.parse(n):void 0},set:function(e,t){var n;return(n=globalThis.localStorage)==null?void 0:n.setItem(e,JSON.stringify(t))},throttle:150};Gie(Hie);function Wie(e,t){if(Object.is(e,t))return!0;if(H1(e)&&H1(t)){var n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(function(a){return Object.is(e[a],t[a])})}return!1}function ZO(e){return e===void 0&&(e=Wie),function(t){return function(n,r){var a=t(n,r);return r.tracks!=null&&e(r.state,a.state)&&(a.state=r.state),a}}}class em extends Error{constructor(n,r,a=0){super(n);an(this,"problem");an(this,"status",0);this.problem=r,this.status=a,Object.setPrototypeOf(this,em.prototype)}}function KO(e){return e.problem?typeof e.problem=="object":!1}const XO="Abort error",V4=e=>e?typeof e=="string"?e===XO:KO(e)?e.problem.kind==="canceled":e instanceof DOMException?e.name==="AbortError":!1:!1;async function Zie(e,t){return new Promise((n,r)=>{if(e.signal.aborted)return Promise.reject(new DOMException("Aborted","AbortError"));const a=()=>{e.signal.removeEventListener("abort",a),r(new DOMException("Aborted","AbortError"))};e.signal.addEventListener("abort",a),t.then(n).catch(r).finally(()=>e.signal.removeEventListener("abort",a))})}function Kie(e){return"loading"in e||"error"in e}const Xie="",Yie=e=>(...t)=>{e===Xie&&console.log(...t)},I2={inheritState:!1,store:IO,auto:!0},YO=(e=>t=>{if(!e.has(t))return e.add(t),t;console.warn(`Atom with name ${t} already exist. Full page reload recommended`);const n=t+performance.now();return YO(n)})(new Set);function JO(e,t,n,r={}){const a=Yie(n),c={...r,auto:r.auto??I2.auto,inheritState:r.inheritState??I2.inheritState,store:r.store??I2.store},d={request:x=>x,refetch:()=>null,cancel:()=>null,_done:(x,b)=>({params:x,data:b}),_error:(x,b)=>({params:x,error:b}),_loading:x=>({params:x})};return e&&(d.depsAtom=e),Jr(d,({onAction:x,schedule:b,create:E,onChange:A,get:L},F={loading:!1,data:null,error:null,lastParams:null,dirty:!1})=>{const $={...F};return x("request",N=>{$.dirty=!0,b(async(Z,R)=>{if(a("1. Request",N),R.abortController){a("2. Cancel flow"),R.abortController.abort(),delete R.abortController;let G=!1;try{a("2.1. Cancel flow: await activeRequest"),await R.activeRequest}catch(ee){a("2.2. Cancel flow: activeRequest have error"),G=V4(ee)}G&&(a("2.3. Cancel flow: activeRequest was canceled"),a("2.4. Repeat request"),Z(E("request",N)));return}a("3. Set loading state"),Z(E("_loading",N));const q=new AbortController;try{R.abortController=q,R.activeRequest=Zie(q,t(N,q)),a("4. Wait result");const G=await R.activeRequest;G===void 0&&console.warn("resourceAtom: fetcherResult undefined"),delete R.activeRequest,a("5. Check that it was aborted:"),q.signal.throwIfAborted(),a("5.1.A. request was not aborted"),R.abortController===q&&(a("5.1.A.1. Done"),delete R.abortController,Z(E("_done",N,G)),c.onSuccess&&c.onSuccess(Z,N,G))}catch(G){if(V4(G))a("5.1.B. request was aborted"),a("5.1.B.1. Error"),Z(E("_error",N,XO));else if(R.abortController===q){delete R.abortController,a("5.1.C Not abort error"),console.error(`[${n}]:`,G);const ee=hie(G)?G.message:typeof G=="string"?G:"Unknown";Z(E("_error",N,ee))}}})}),x("refetch",()=>{b((N,Z)=>{F.dirty&&!F.loading?N(E("request",$.lastParams)):console.error(`[${n}]:`,"Do not call refetch before request")})}),x("cancel",()=>{b(async(N,Z)=>{Z.abortController&&(Z.abortController.abort(),delete Z.abortController)})}),x("_loading",({params:N})=>{$.loading=!0,$.error=null,$.lastParams=N}),x("_error",({params:N,error:Z})=>{$.error=Z,$.lastParams=N,$.loading=!1}),x("_done",({data:N,params:Z})=>{$.data=N,$.error=null,$.loading=!1,$.lastParams=Z}),d.depsAtom?A("depsAtom",N=>{var Z;H1(N)?(c.inheritState&&($.loading=N.loading||$.loading,$.error=N.error||$.error),Kie(N)?!N.loading&&!N.error&&N.dirty&&b(R=>R(E("request",N.data))):b(R=>R(E("request",N)))):N!==null?b(R=>R(E("request",N))):console.warn(`Resource atom with name ${n} skips running as its dependency state ${(Z=d==null?void 0:d.depsAtom)==null?void 0:Z.id} is null`)}):c.auto&&!$.dirty&&b(N=>N(E("request",null))),$},{id:YO(n),store:c.store,decorators:[ZO()]})}const yh={global:{},custom:{},overrides:{},merged:{}};function Jie(){const e=globalThis.konturAppConfig??{},t={apiGateway:e.API_GATEWAY,reportsApi:e.REPORTS_API,bivariateTilesRelativeUrl:e.BIVARIATE_TILES_RELATIVE_URL,bivariateTilesServer:e.BIVARIATE_TILES_SERVER,bivariateTilesIndicatorsClass:e.BIVARIATE_TILES_INDICATORS_CLASS,refreshIntervalSec:e.REFRESH_INTERVAL_SEC,mapBaseStyle:e.MAP_BASE_STYLE,featuresByDefault:e.FEATURES_BY_DEFAULT,defaultFeed:e.DEFAULT_FEED,keycloakUrl:e.KEYCLOAK_URL,keycloakRealm:e.KEYCLOAK_REALM,keycloakClientId:e.KEYCLOAK_CLIENT_ID,yandexMetricaId:e.YANDEX_METRICA_ID,baseUrl:{BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_BASE_PATH,mapBlankSpaceId:e.MAP_BLANK_SPACE_ID,autoFocus:{maxZoom:e.AUTOFOCUS_ZOOM},intercom:{name:e.INTERCOM_DEFAULT_NAME,app_id:e.INTERCOM_APP_ID,custom_launcher_selector:e.INTERCOM_SELECTOR},osmEditors:e.OSM_EDITORS||[{id:"josm",title:"JOSM",url:"https://www.openstreetmap.org/edit?editor=remote#map="}],effectiveFeatures:{}};return yh.global=t,t}function Qie(e){return e.features&&e.features.length>0?Object.fromEntries((e.features??[]).map(t=>[t.name,t.configuration||!0])):Object.fromEntries((e.featuresByDefault??[]).map(t=>[t,!0]))}function eoe(){Jie();const e={defaultLayers:[],...yh.global,...yh.custom,...yh.overrides};return e.effectiveFeatures=Qie(e),Object.assign(yh.merged,e),e}eoe();const di=new Proxy(yh.merged,{get(e,t){return f3&&console.warn("\x1B[1;35m appConfig\x1B[0m",t,yh.merged[t]),yh.merged[t]}});console.info(`%c Disaster Ninja ${{}.PACKAGE_VERSION} deployment:
  - Build Time: ${{}.BUILD_TIME}
  - Git Branch: ${{}.GIT_BRANCH}
  - Git Commit: #${{}.GIT_COMMIT_HASH}
  - Git Commit Time: ${{}.GIT_COMMIT_TIME}
  `,"color: #bada55");const toe=e=>e.replace(/^\/|\/$/g,""),noe=(...e)=>e.map(toe).filter(t=>t.length!==0).join("/"),QO=(e,t=di.baseUrl)=>typeof e=="string"?"/"+noe(t,e):QO(e.parentRoute?`${e.parentRoute}/${e.slug}`:e.slug,t),roe=e=>{LC.push(QO(e)+globalThis.location.search)},ioe="application/json",eF="Content-Type",M2=Symbol();function q4(e={}){var t;return(t=Object.entries(e).find(([n])=>n.toLowerCase()===eF.toLowerCase()))===null||t===void 0?void 0:t[1]}function G4(e){return/^application\/.*json.*/.test(e)}const qf=function(e,t,n=!1){return Object.entries(t).reduce((r,[a,c])=>{const d=e[a];return Array.isArray(d)&&Array.isArray(c)?r[a]=n?[...d,...c]:c:typeof d=="object"&&typeof c=="object"?r[a]=qf(d,c,n):r[a]=c,r},{...e})},tm={options:{},errorType:"text",polyfills:{},polyfill(e,t=!0,n=!1,...r){const a=this.polyfills[e]||(typeof self<"u"?self[e]:null)||(typeof global<"u"?global[e]:null);if(t&&!a)throw new Error(e+" is not defined");return n&&a?new a(...r):a}};function ooe(e,t=!1){tm.options=t?e:qf(tm.options,e)}function aoe(e,t=!1){tm.polyfills=t?e:qf(tm.polyfills,e)}function soe(e){tm.errorType=e}const loe=e=>t=>e.reduceRight((n,r)=>r(n),t)||t;class tF extends Error{}const uoe=e=>{const t=Object.create(null);e=e._addons.reduce((G,ee)=>ee.beforeRequest&&ee.beforeRequest(G,e._options,t)||G,e);const{_url:n,_options:r,_config:a,_catchers:c,_resolvers:d,_middlewares:l,_addons:x}=e,b=new Map(c),E=qf(a.options,r);let A=n;const L=loe(l)((G,ee)=>(A=G,a.polyfill("fetch")(G,ee)))(n,E),F=new Error,$=L.catch(G=>{throw{__wrap:G}}).then(G=>{if(!G.ok){const ee=new tF;if(ee.cause=F,ee.stack=ee.stack+`
CAUSE: `+F.stack,ee.response=G,ee.url=A,G.type==="opaque")throw ee;return G.text().then(ae=>{var K;if(ee.message=ae,a.errorType==="json"||((K=G.headers.get("Content-Type"))===null||K===void 0?void 0:K.split(";")[0])==="application/json")try{ee.json=JSON.parse(ae)}catch{}throw ee.text=ae,ee.status=G.status,ee})}return G}),N=G=>G.catch(ee=>{const ae=ee.__wrap||ee,K=ae.status&&b.get(ae.status)||b.get(ae.name)||ee.__wrap&&b.has(M2)&&b.get(M2);if(K)return K(ae,e);throw ae}),Z=G=>ee=>N(G?$.then(ae=>ae&&ae[G]()).then(ae=>ee?ee(ae):ae):$.then(ae=>ee?ee(ae):ae)),R={_wretchReq:e,_fetchReq:L,_sharedState:t,res:Z(null),json:Z("json"),blob:Z("blob"),formData:Z("formData"),arrayBuffer:Z("arrayBuffer"),text:Z("text"),error(G,ee){return b.set(G,ee),this},badRequest(G){return this.error(400,G)},unauthorized(G){return this.error(401,G)},forbidden(G){return this.error(403,G)},notFound(G){return this.error(404,G)},timeout(G){return this.error(408,G)},internalError(G){return this.error(500,G)},fetchError(G){return this.error(M2,G)}},q=x.reduce((G,ee)=>({...G,...ee.resolver}),R);return d.reduce((G,ee)=>ee(G,e),q)},coe={_url:"",_options:{},_config:tm,_catchers:new Map,_resolvers:[],_deferred:[],_middlewares:[],_addons:[],addon(e){return{...this,_addons:[...this._addons,e],...e.wretch}},errorType(e){return{...this,_config:{...this._config,errorType:e}}},polyfills(e,t=!1){return{...this,_config:{...this._config,polyfills:t?e:qf(this._config.polyfills,e)}}},url(e,t=!1){if(t)return{...this,_url:e};const n=this._url.split("?");return{...this,_url:n.length>1?n[0]+e+"?"+n[1]:this._url+e}},options(e,t=!1){return{...this,_options:t?e:qf(this._options,e)}},headers(e){return{...this,_options:qf(this._options,{headers:e||{}})}},accept(e){return this.headers({Accept:e})},content(e){return this.headers({[eF]:e})},auth(e){return this.headers({Authorization:e})},catcher(e,t){const n=new Map(this._catchers);return n.set(e,t),{...this,_catchers:n}},resolve(e,t=!1){return{...this,_resolvers:t?[e]:[...this._resolvers,e]}},defer(e,t=!1){return{...this,_deferred:t?[e]:[...this._deferred,e]}},middlewares(e,t=!1){return{...this,_middlewares:t?e:[...this._middlewares,...e]}},fetch(e=this._options.method,t="",n=null){let r=this.url(t).options({method:e});const a=q4(r._options.headers),c=typeof n=="object"&&(!r._options.headers||!a||G4(a));return r=n?c?r.json(n,a):r.body(n):r,uoe(r._deferred.reduce((d,l)=>l(d,d._url,d._options),r))},get(e=""){return this.fetch("GET",e)},delete(e=""){return this.fetch("DELETE",e)},put(e,t=""){return this.fetch("PUT",t,e)},post(e,t=""){return this.fetch("POST",t,e)},patch(e,t=""){return this.fetch("PATCH",t,e)},head(e=""){return this.fetch("HEAD",e)},opts(e=""){return this.fetch("OPTIONS",e)},body(e){return{...this,_options:{...this._options,body:e}}},json(e,t){const n=q4(this._options.headers);return this.content(t||G4(n)&&n||ioe).body(JSON.stringify(e))}};function rc(e="",t={}){return{...coe,_url:e,_options:t}}rc.default=rc;rc.options=ooe;rc.errorType=soe;rc.polyfills=aoe;rc.WretchError=tF;function H4(e){return typeof e<"u"?e:""}const hoe=(e,t,n,r)=>{let a;if(typeof t=="string")a=t;else{const d=r.polyfill("URLSearchParams",!0,!0);for(const l in t){const x=t[l];if(t[l]instanceof Array)for(const b of x)d.append(l,H4(b));else d.append(l,H4(x))}a=d.toString()}const c=e.split("?");return a?n||c.length<2?c[0]+"?"+a:e+"&"+a:n?c[0]:e},foe={wretch:{query(e,t=!1){return{...this,_url:hoe(this._url,e,t,this._config)}}}},doe=foe;function W4(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(typeof t=="object"?JSON.stringify(t):""+t)}function poe(e){return Object.keys(e).map(t=>{const n=e[t];return n instanceof Array?n.map(r=>W4(t,r)).join("&"):W4(t,n)}).join("&")}const moe={wretch:{formUrl(e){return this.body(typeof e=="string"?e:poe(e)).content("application/x-www-form-urlencoded")}}},goe=moe;function UC(e){this.message=e}UC.prototype=new Error,UC.prototype.name="InvalidCharacterError";var Z4=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new UC("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,c=0,d="";r=t.charAt(c++);~r&&(n=a%4?64*n+r:r,a++%4)?d+=String.fromCharCode(255&n>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return d};function yoe(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(Z4(n).replace(/(.)/g,function(r,a){var c=a.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}(t)}catch{return Z4(t)}}function Y1(e){this.message=e}function K4(e,t){if(typeof e!="string")throw new Y1("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(yoe(e.split(".")[n]))}catch(r){throw new Y1("Invalid token specified: "+r.message)}}Y1.prototype=new Error,Y1.prototype.name="InvalidTokenError";function _oe(e){if(e!=null&&e.json){const t=e==null?void 0:e.json;if(t!==null){if(Array.isArray(t))return t.map(n=>n.name&&n.message?`${n.name}: ${n.message}`:n).join("<br/>");if(t!=null&&t.error)return t.error;if(t!=null&&t.errors&&Array.isArray(t.errors))return t.errors.reduce((n,r)=>(r!=null&&r.message&&n.push(r.message),n),[]).join("<br/>")}return String(t)}return(e==null?void 0:e.text)??(e==null?void 0:e.message)??"Unknown Error"}function X4(e){var a,c;let t="",n={kind:"unknown",temporary:!0},r=0;return e instanceof em?e:(f3&&console.error(e),e instanceof rc.WretchError?(r=e.status,r===400?n={kind:"bad-request"}:r===401?(t=((a=e.json)==null?void 0:a.error_description)??(e==null?void 0:e.message)??"Auth error",n={kind:"unauthorized",data:(c=e.json)==null?void 0:c.error}):r===403?n={kind:"forbidden"}:r===404?n={kind:"not-found"}:r===408?n={kind:"timeout",temporary:!0}:r>=500&&(n={kind:"server",data:(e==null?void 0:e.json)??(e==null?void 0:e.text)})):voe(e)?n={kind:"canceled"}:n={kind:"client-unknown"},t||(t=_oe(e)),new em(t||"Unknown error",n,r))}function voe(e){var t;return(e==null?void 0:e.name)==="AbortError"||((t=e==null?void 0:e.problem)==null?void 0:t.kind)==="canceled"}const Wg={GET:"get",POST:"post",PUT:"put",PATCH:"patch",DELETE:"delete"},L2="auth_token",Hu=class Hu{constructor({instanceId:t="default",notificationService:n,loginApiPath:r="",refreshTokenApiPath:a="",keycloakClientId:c="",expiredTokenCallback:d,unauthorizedCallback:l,disableAuth:x=!1,storage:b=Lh,baseURL:E}){an(this,"instanceId");an(this,"notificationService");an(this,"expiredTokenCallback");an(this,"unauthorizedCallback");an(this,"loginApiPath");an(this,"refreshTokenApiPath");an(this,"disableAuth");an(this,"storage");an(this,"token","");an(this,"refreshToken","");an(this,"tokenExpirationDate");an(this,"tokenRefreshFlowPromise");an(this,"keycloakClientId");an(this,"baseURL");an(this,"timeToRefresh",1e3*60*3);this.instanceId=t,this.notificationService=n,this.loginApiPath=r,this.refreshTokenApiPath=a,this.keycloakClientId=c,this.disableAuth=x,this.storage=b,this.expiredTokenCallback=d,this.unauthorizedCallback=l,this.baseURL=E}static getInstance(t="default"){if(Hu.instances[t])return Hu.instances[t];throw new Error("You have to initialize api client first!")}static init(t){const n=t.instanceId||"default";if(Hu.instances[n])throw new Error(`Api client instance with Id: ${n} already initialized`);return Hu.instances[n]=new Hu(t),Hu.instances[n]}storeTokens(t,n){let r="";try{const a=K4(t);if(f3&&console.debug({decodedToken:a,now:new Date().getTime()}),a&&a.exp){const c=new Date(a.exp*1e3);if(c>new Date)return this.setAuth(t,n,c),this.storage.setItem(L2,JSON.stringify({token:t,refreshToken:n})),!0;r="Token is expired right after receiving, clock is out of sync"}}catch{r="Token decode error"}throw new em(r||"Token error",{kind:"bad-data"})}checkLocalAuthToken(){if(this.token&&this.refreshToken)return!0;try{const t=this.storage.getItem(L2);if(t){const{token:n,refreshToken:r}=JSON.parse(t);if(n&&r){const a=K4(n),c=new Date(a.exp*1e3);return this.setAuth(n,r,c),!0}}}catch(t){console.debug("checkLocalAuthToken:",t)}return this.resetAuth(),!1}resetAuth(){this.token="",this.refreshToken="",this.tokenExpirationDate=void 0,this.storage.removeItem(L2)}setAuth(t,n,r){this.token=t,this.refreshToken=n,this.tokenExpirationDate=r}async _tokenRefreshFlow(){if(!this.tokenExpirationDate)return!1;if(this.tokenExpirationDate.getTime()-new Date().getTime()<this.timeToRefresh)try{await this.refreshAuthToken()}catch{return!1}return!0}async isTokenOk(){this.tokenRefreshFlowPromise||(this.tokenRefreshFlowPromise=this._tokenRefreshFlow());const t=await this.tokenRefreshFlowPromise;return this.tokenRefreshFlowPromise=void 0,t}async login(t,n){const r={username:t,password:n,client_id:this.keycloakClientId,grant_type:"password"};return await this.requestTokenOrThrow(this.loginApiPath,r)}async refreshAuthToken(){const t={client_id:this.keycloakClientId,refresh_token:this.refreshToken,grant_type:"refresh_token"};return await this.requestTokenOrThrow(this.refreshTokenApiPath,t)}async requestTokenOrThrow(t,n){var r,a;try{const c=await rc(t).addon(goe).formUrl(n).errorType("json").post().res(O2);if((r=c==null?void 0:c.data)!=null&&r.access_token)return this.storeTokens(c.data.access_token,c.data.refresh_token);throw new em("Token error",{kind:"bad-data"})}catch(c){throw this.resetAuth(),(a=this.expiredTokenCallback)==null||a.call(this),X4(c)}}async logout(){this.resetAuth()}async call(t,n,r,a=!this.disableAuth,c={}){var x;const d=["post","put","patch"];let l=rc(this.baseURL,{mode:"cors"}).addon(doe).url(n);c.signal&&(l=l.options({signal:c.signal})),c.headers&&(l=l.headers(c.headers)),!this.disableAuth&&a&&this.token&&await this.isTokenOk()&&(l=l.auth(`Bearer ${this.token}`).catcher(401,async(E,A)=>(await this.refreshAuthToken(),A.auth(`Bearer ${this.token}`).fetch().unauthorized(L=>{throw L}).res(O2)))),r&&(l=d.includes(t)?l.json(r):l.query(r));try{return(await l[t]().res(O2)).data}catch(b){const E=X4(b);if(E.problem.kind==="canceled")throw E;E.problem.kind==="unauthorized"&&(this.resetAuth(),(x=this.unauthorizedCallback)==null||x.call(this,this));const A=c.errorsConfig;throw A&&A.messages&&(typeof A.messages!="string"?E.status in A.messages&&(E.message=A.messages[E.status]):E.message=A.messages),(A==null?void 0:A.hideErrors)!==!0&&this.notificationService.error({title:"Error",description:E.message}),E}}async get(t,n,r=!this.disableAuth,a){return this.call(Wg.GET,t,n,r,a)}async post(t,n,r=!this.disableAuth,a){return this.call(Wg.POST,t,n,r,a)}async put(t,n,r=!this.disableAuth,a){return this.call(Wg.PUT,t,n,r,a)}async patch(t,n,r=!this.disableAuth,a){return this.call(Wg.PATCH,t,n,r,a)}async delete(t,n=!this.disableAuth,r){return this.call(Wg.DELETE,t,void 0,n,r)}};an(Hu,"instances",{});let nm=Hu;async function O2(e){return e.status===204?(e.data=null,e):(e.ok?(e.headers.get("content-type")??"").includes("application/json")?e.data=await e.json():e.data=await e.text():console.debug("autoParseBody",e),e)}const ry=Jr({showNotification:(e,t,n)=>({type:e,message:t,lifetimeSec:n}),removeNotification:e=>e},({onAction:e,schedule:t,create:n},r=[])=>(e("showNotification",({type:a,message:c,lifetimeSec:d})=>{const l=hV(4),x=()=>ry.removeNotification.dispatch(l);r=[...r,{id:l,type:a,message:c,lifetimeSec:d,onClose:x}],t(b=>{setTimeout(x,d*1e3)})}),e("removeNotification",a=>r=r.filter(({id:c})=>c!==a)),[...r]),"[Shared state] currentNotificationAtom"),Df=class Df{constructor(){an(this,"defaultLifetimeSec",10)}static getInstance(){if(Df.instance)return Df.instance;throw new Error("You have to initialize api client first!")}static init(){Df.instance=new Df}error(t,n){ry.showNotification.dispatch("error",t,n||this.defaultLifetimeSec)}warning(t,n){ry.showNotification.dispatch("warning",t,n||this.defaultLifetimeSec)}info(t,n){ry.showNotification.dispatch("info",t,n||this.defaultLifetimeSec)}success(t,n){ry.showNotification.dispatch("success",t,n||this.defaultLifetimeSec)}};an(Df,"instance");let J1=Df;J1.init();const nF=J1.getInstance();nm.init({notificationService:nF,baseURL:di.apiGateway,loginApiPath:`${di.keycloakUrl}/auth/realms/${di.keycloakRealm}/protocol/openid-connect/token`,refreshTokenApiPath:`${di.keycloakUrl}/auth/realms/${di.keycloakRealm}/protocol/openid-connect/token`,keycloakClientId:di.keycloakClientId,expiredTokenCallback(){alert("Session expired. Please login again"),roe("/profile"),location.reload()},unauthorizedCallback(e){var t;(t=e==null?void 0:e.expiredTokenCallback)==null||t.call(e)}});const rF=nm.getInstance();nm.init({instanceId:"reports",notificationService:nF,baseURL:di.reportsApi,disableAuth:!0});nm.getInstance("reports");/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function xy(e,t,n,r){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function l(E){try{b(r.next(E))}catch(A){d(A)}}function x(E){try{b(r.throw(E))}catch(A){d(A)}}function b(E){E.done?c(E.value):a(E.value).then(l,x)}b((r=r.apply(e,t||[])).next())})}class gi{constructor(){this.mutex=Promise.resolve()}lock(){let t=()=>{};return this.mutex=this.mutex.then(()=>new Promise(t)),new Promise(n=>{t=n})}dispatch(t){return xy(this,void 0,void 0,function*(){const n=yield this.lock();try{return yield Promise.resolve(t())}finally{n()}})}}var F2;function xoe(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}const jC=xoe(),R2=(F2=jC.Buffer)!==null&&F2!==void 0?F2:null,boe=jC.TextEncoder?new jC.TextEncoder:null;function iF(e,t){return(e&15)+(e>>6|e>>3&8)<<4|(t&15)+(t>>6|t>>3&8)}function woe(e,t){const n=t.length>>1;for(let r=0;r<n;r++){const a=r<<1;e[r]=iF(t.charCodeAt(a),t.charCodeAt(a+1))}}function Soe(e,t){if(e.length!==t.length*2)return!1;for(let n=0;n<t.length;n++){const r=n<<1;if(t[n]!==iF(e.charCodeAt(r),e.charCodeAt(r+1)))return!1}return!0}const Y4="a".charCodeAt(0)-10,J4="0".charCodeAt(0);function Q4(e,t,n){let r=0;for(let a=0;a<n;a++){let c=t[a]>>>4;e[r++]=c>9?c+Y4:c+J4,c=t[a]&15,e[r++]=c>9?c+Y4:c+J4}return String.fromCharCode.apply(null,e)}const eP=R2!==null?e=>{if(typeof e=="string"){const t=R2.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(R2.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return boe.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},tP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iy=new Uint8Array(256);for(let e=0;e<tP.length;e++)iy[tP.charCodeAt(e)]=e;function Coe(e){let t=Math.floor(e.length*.75);const n=e.length;return e[n-1]==="="&&(t-=1,e[n-2]==="="&&(t-=1)),t}function Eoe(e){const t=Coe(e),n=e.length,r=new Uint8Array(t);let a=0;for(let c=0;c<n;c+=4){const d=iy[e.charCodeAt(c)],l=iy[e.charCodeAt(c+1)],x=iy[e.charCodeAt(c+2)],b=iy[e.charCodeAt(c+3)];r[a]=d<<2|l>>4,a+=1,r[a]=(l&15)<<4|x>>2,a+=1,r[a]=(x&3)<<6|b&63,a+=1}return r}const Tv=16*1024,Zg=4,koe=new gi,D2=new Map;function Aoe(e,t){return xy(this,void 0,void 0,function*(){let n=null,r=null,a=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");const c=(K,le=0)=>{r.set(K,le)},d=()=>r,l=()=>n.exports,x=K=>{n.exports.Hash_SetMemorySize(K);const le=n.exports.Hash_GetBuffer(),xe=n.exports.memory.buffer;r=new Uint8Array(xe,le,K)},b=()=>new DataView(n.exports.memory.buffer).getUint32(n.exports.STATE_SIZE,!0),E=koe.dispatch(()=>xy(this,void 0,void 0,function*(){if(!D2.has(e.name)){const le=Eoe(e.data),xe=WebAssembly.compile(le);D2.set(e.name,xe)}const K=yield D2.get(e.name);n=yield WebAssembly.instantiate(K,{})})),A=()=>xy(this,void 0,void 0,function*(){n||(yield E);const K=n.exports.Hash_GetBuffer(),le=n.exports.memory.buffer;r=new Uint8Array(le,K,Tv)}),L=(K=null)=>{a=!0,n.exports.Hash_Init(K)},F=K=>{let le=0;for(;le<K.length;){const xe=K.subarray(le,le+Tv);le+=xe.length,r.set(xe),n.exports.Hash_Update(xe.length)}},$=K=>{if(!a)throw new Error("update() called before init()");const le=eP(K);F(le)},N=new Uint8Array(t*2),Z=(K,le=null)=>{if(!a)throw new Error("digest() called before init()");return a=!1,n.exports.Hash_Final(le),K==="binary"?r.slice(0,t):Q4(N,r,t)},R=()=>{if(!a)throw new Error("save() can only be called after init() and before digest()");const K=n.exports.Hash_GetState(),le=b(),xe=n.exports.memory.buffer,Le=new Uint8Array(xe,K,le),Oe=new Uint8Array(Zg+le);return woe(Oe,e.hash),Oe.set(Le,Zg),Oe},q=K=>{if(!(K instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const le=n.exports.Hash_GetState(),xe=b(),Le=Zg+xe,Oe=n.exports.memory.buffer;if(K.length!==Le)throw new Error(`Bad state length (expected ${Le} bytes, got ${K.length})`);if(!Soe(e.hash,K.subarray(0,Zg)))throw new Error("This state was written by an incompatible hash implementation");const Fe=K.subarray(Zg);new Uint8Array(Oe,le,xe).set(Fe),a=!0},G=K=>typeof K=="string"?K.length<Tv/4:K.byteLength<Tv;let ee=G;switch(e.name){case"argon2":case"scrypt":ee=()=>!0;break;case"blake2b":case"blake2s":ee=(K,le)=>le<=512&&G(K);break;case"blake3":ee=(K,le)=>le===0&&G(K);break;case"xxhash64":case"xxhash3":case"xxhash128":ee=()=>!1;break}const ae=(K,le=null,xe=null)=>{if(!ee(K,le))return L(le),$(K),Z("hex",xe);const Le=eP(K);return r.set(Le),n.exports.Hash_Calculate(Le.length,le,xe),Q4(N,r,t)};return yield A(),{getMemory:d,writeMemory:c,getExports:l,setMemorySize:x,init:L,update:$,digest:Z,save:R,load:q,calculate:ae,hashLength:t}})}function Toe(e,t,n){return xy(this,void 0,void 0,function*(){const r=yield e.lock(),a=yield Aoe(t,n);return r(),a})}new gi;new gi;new gi;new gi;var Poe="crc32",Ioe="AGFzbQEAAAABEQRgAAF/YAF/AGAAAGACf38AAwgHAAEBAQIAAwQFAXABAQEFBAEBAgIGDgJ/AUGQyQULfwBBgAgLB3AIBm1lbW9yeQIADkhhc2hfR2V0QnVmZmVyAAAJSGFzaF9Jbml0AAILSGFzaF9VcGRhdGUAAwpIYXNoX0ZpbmFsAAQNSGFzaF9HZXRTdGF0ZQAFDkhhc2hfQ2FsY3VsYXRlAAYKU1RBVEVfU0laRQMBCq0HBwUAQYAJC8MDAQN/QYCJASEBQQAhAgNAIAFBAEEAQQBBAEEAQQBBAEEAIAJBAXFrIABxIAJBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzIgNBAXFrIABxIANBAXZzNgIAIAFBBGohASACQQFqIgJBgAJHDQALQQAhAANAIABBhJEBaiAAQYSJAWooAgAiAkH/AXFBAnRBgIkBaigCACACQQh2cyICNgIAIABBhJkBaiACQf8BcUECdEGAiQFqKAIAIAJBCHZzIgI2AgAgAEGEoQFqIAJB/wFxQQJ0QYCJAWooAgAgAkEIdnMiAjYCACAAQYSpAWogAkH/AXFBAnRBgIkBaigCACACQQh2cyICNgIAIABBhLEBaiACQf8BcUECdEGAiQFqKAIAIAJBCHZzIgI2AgAgAEGEuQFqIAJB/wFxQQJ0QYCJAWooAgAgAkEIdnMiAjYCACAAQYTBAWogAkH/AXFBAnRBgIkBaigCACACQQh2czYCACAAQQRqIgBB/AdHDQALCycAAkBBACgCgMkBIABGDQAgABABQQAgADYCgMkBC0EAQQA2AoTJAQuhAgEDf0EAKAKEyQFBf3MhAUGACSECAkAgAEEISQ0AQYAJIQIDQCACQQRqKAIAIgNBDnZB/AdxQYCRAWooAgAgA0EWdkH8B3FBgIkBaigCAHMgA0EGdkH8B3FBgJkBaigCAHMgA0H/AXFBAnRBgKEBaigCAHMgAigCACABcyIBQRZ2QfwHcUGAqQFqKAIAcyABQQ52QfwHcUGAsQFqKAIAcyABQQZ2QfwHcUGAuQFqKAIAcyABQf8BcUECdEGAwQFqKAIAcyEBIAJBCGohAiAAQXhqIgBBB0sNAAsLAkAgAEUNAANAIAFB/wFxIAItAABzQQJ0QYCJAWooAgAgAUEIdnMhASACQQFqIQIgAEF/aiIADQALC0EAIAFBf3M2AoTJAQszAQF/QQBBACgChMkBIgBBGHQgAEEIdEGAgPwHcXIgAEEIdkGA/gNxIABBGHZycjYCgAkLBgBBhMkBC1oAAkBBACgCgMkBIAFGDQAgARABQQAgATYCgMkBC0EAQQA2AoTJASAAEANBAEEAKAKEyQEiAUEYdCABQQh0QYCA/AdxciABQQh2QYD+A3EgAUEYdnJyNgKACQsLCwEAQYAICwQEAAAA",Moe="749723dc",Loe={name:Poe,data:Ioe,hash:Moe};const Ooe=new gi;let Pv=null;function Foe(e){if(Pv===null)return Toe(Ooe,Loe,4).then(t=>(Pv=t,Pv.calculate(e,3988292384)));try{const t=Pv.calculate(e,3988292384);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;new gi;const Roe={username:"",email:"",fullName:"",language:"en",useMetricUnits:!0,subscribedToKonturUpdates:!1,bio:"",osmEditor:di.osmEditors[0].id,defaultFeed:di.defaultFeed,theme:"kontur"},z2={...Roe},E_=mm(new Map,"layersSettings"),qp=mm(new Map,"mountedLayers"),oF=Jr({setMap:e=>e,resetMap:()=>null},({onAction:e,schedule:t},n=null)=>(e("setMap",r=>{n=r,t(a=>{a(qp.clear())})}),e("resetMap",()=>{n=null}),n),"[Shared state] currentMapAtom");function Doe(e,t){const n=new Blob([JSON.stringify(e)],{type:"json"}),r=document.createElement("a"),a=URL.createObjectURL(n);r.href=a,r.download=t,document.body.appendChild(r),r.click(),clearTimeout(setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(a)},0))}const Gf=OO(new Set,"enabledLayers"),by=OO(new Set,"hiddenLayers"),g3=mm(new Map,"layersLegends"),aF=mm(new Map,"layersMeta"),sF=mm(new Map,"layersSources"),lF=mm(new Map,"layersMenus");function yp(e){if(e&&typeof e=="object"){const t=Object.getOwnPropertyNames(e);for(const n of t){const r=e[n];yp(r)}return Object.freeze(e)}return e}const nP="bivariate-layer-",zoe="bivariate-source-",Boe={overlay:{name:lr.t("categories.overlays"),openByDefault:!0,mutuallyExclusive:!1,order:1},base:{name:lr.t("categories.basemap"),openByDefault:!1,mutuallyExclusive:!0,order:2}},$oe={layersInSelectedArea:{name:lr.t("groups.layers_in_selected_area"),openByDefault:!0,mutuallyExclusive:!1,order:0},user_layers:{name:lr.t("groups.your_layers"),openByDefault:!0,mutuallyExclusive:!1,order:1},bivariate:{name:lr.t("groups.kontur_analytics"),openByDefault:!0,mutuallyExclusive:!0,order:2},qa:{name:lr.t("groups.qa"),openByDefault:!0,mutuallyExclusive:!1,order:3},osmbasedmap:{name:lr.t("groups.osmbasedmap"),openByDefault:!1,mutuallyExclusive:!1,order:4},other:{name:lr.t("groups.other"),openByDefault:!1,mutuallyExclusive:!1,order:999},elevation:{name:lr.t("groups.elevation"),openByDefault:!0,mutuallyExclusive:!1},photo:{name:lr.t("groups.photo"),openByDefault:!0,mutuallyExclusive:!1},map:{name:lr.t("groups.map"),openByDefault:!0,mutuallyExclusive:!1}},Noe=$oe,Uoe=new Proxy(Noe,{get(e,t,n){const r=Reflect.get(e,t,n);return r||{name:t,openByDefault:!0,mutuallyExclusive:!1,order:100}},set(e,t,n,r){return Reflect.set(e,t,n,r)}}),joe=Jr({},({},e=Uoe)=>e,"layersGroupsSettingsAtom"),Voe=Boe,qoe=new Proxy(Voe,{get(e,t,n){const r=Reflect.get(e,t,n);return r||{name:t,openByDefault:!0,mutuallyExclusive:!1,order:100}},set(e,t,n,r){return Reflect.set(e,t,n,r)}}),Goe=Jr({},({},e=qoe)=>e,"layersCategoriesSettingsAtom"),Hoe=(()=>{let e=null;joe.subscribe(a=>e=a);let t=null;Goe.subscribe(a=>t=a);let n=null;Gf.subscribe(a=>n=a);let r=null;return E_.subscribe(a=>r=a),a=>{var E,A,L,F;if(!e||!t||!n||!r)return[];const c=(E=a.settings)==null?void 0:E.category,d=(A=a.settings)==null?void 0:A.group,l=c&&((L=t[c])==null?void 0:L.mutuallyExclusive),x=d&&((F=e[d])==null?void 0:F.mutuallyExclusive);if(!l&&!x)return[];const b=new Set;return n.forEach($=>{var Z,R;if(a.id===$)return;const N=r.get($);N&&(l?((Z=N.data)==null?void 0:Z.category)===c&&b.add($):x&&((R=N.data)==null?void 0:R.group)===d&&b.add($))}),Array.from(b).map($=>Gf.delete($))}})(),Woe={enable:()=>null,disable:()=>null,hide:()=>null,show:()=>null,download:()=>null,destroy:()=>null},Zoe=e=>(...t)=>console.error(`[Logical layer: ${e}]:`,...t);function Koe(e,t,n,r){let a=!1;const c=Jr({...Woe,layersSettingsAtom:E_,layersLegendsAtom:g3,layersMetaAtom:aF,layersSourcesAtom:sF,enabledLayersAtom:Gf,mountedLayersAtom:qp,hiddenLayersAtom:by,layersMenusAtom:lF,_patchState:d=>d},({get:d,onAction:l,getUnlistedState:x,onInit:b,schedule:E,create:A},L={id:e,error:null,isEnabled:!1,isLoading:!1,isMounted:!1,isVisible:!0,isDownloadable:!1,settings:null,meta:null,legend:null,source:null,contextMenu:null,style:null})=>{var Le,Oe;const F=[],$=r||x(oF),N={isLoading:!1,data:null,error:null},Z=d("layersSettingsAtom").get(e)??N,R=d("layersMetaAtom").get(e)??N,q=d("layersLegendsAtom").get(e)??N,G=d("layersSourcesAtom").get(e)??N,ee=d("layersMenusAtom").get(e)??null,ae=Zoe(L.id),K={id:L.id,error:L.error,isLoading:[Z,R,q,G].some(Fe=>Fe.isLoading),isEnabled:d("enabledLayersAtom").has(e),isMounted:d("mountedLayersAtom").has(e),isVisible:!d("hiddenLayersAtom").has(e),isDownloadable:((Le=G.data)==null?void 0:Le.source.type)==="geojson",settings:yp(Z.data),meta:yp(R.data),legend:yp(q.data),source:yp(G.data),contextMenu:yp(ee),style:((Oe=G.data)==null?void 0:Oe.style)??null};b(()=>{try{t.willInit({map:$,state:{...K}})}catch(Fe){ae(Fe),K.error=Fe}}),l("enable",()=>{K.isEnabled=!0,F.push(Gf.set(e),...Hoe(L))}),l("disable",()=>{K.isEnabled=!1,F.push(Gf.delete(e))}),l("hide",()=>{if($)try{t.willHide({map:$,state:{...K}}),K.isVisible=!1,F.push(by.set(e))}catch(Fe){ae(Fe),K.error=Fe}}),l("show",()=>{if($)try{t.willUnhide({map:$,state:{...K}}),K.isVisible=!0,F.push(by.delete(e))}catch(Fe){ae(Fe),K.error=Fe}}),l("download",()=>{var Fe,Ge;try{if(!L.isDownloadable)return;if(!((Fe=L.source)!=null&&Fe.source)){ae("Download failed, source unavailable");return}L.source.source.type==="geojson"?Doe(L.source.source.data,`${((Ge=L.settings)==null?void 0:Ge.name)||L.id||"Disaster Ninja map layer"}-${new Date().toISOString()}.json`):ae("Only geojson layers can be downloaded")}catch(tt){ae(tt),K.error=tt}});const le=!a&&K.isEnabled!==K.isMounted;if(!(L.isMounted!==K.isMounted)&&le&&!K.isLoading)try{K.isMounted?$&&(t.willUnMount({map:$,state:{...K}}),K.isMounted=!1,F.push(qp.delete(e))):$&&(t.willMount({map:$,state:{...K}}),K.isMounted=!0,F.push(qp.set(e,c)))}catch(Fe){ae(Fe),K.error=Fe}if(L.isMounted&&K.isMounted){if(L.legend!==K.legend&&$)try{t.willLegendUpdate({map:$,state:{...K}})}catch(tt){ae(tt),K.error=tt}if(L.source!==K.source&&$)try{t.willSourceUpdate({map:$,state:{...K}})}catch(tt){ae(tt),K.error=tt}}return l("destroy",()=>{a=!0;try{t.willDestroy({map:$,state:{...K}}),x(n).has(L.id)&&F.push(n.unregister(L.id,{notifyLayerAboutDestroy:!1}))}catch(Fe){ae(Fe),K.error=Fe}}),l("_patchState",Fe=>{Object.assign(K,Fe)}),F.length&&E(Fe=>{Fe(F),t.setErrorState(Ge=>{ae(Ge),Fe(A("_patchState",{error:Ge.message}))})}),K},{id:e,decorators:[ZO()]});return c}const rP=new WeakMap,iP=new WeakMap,Xoe=e=>{const t=Jr({register:n=>Array.isArray(n)?n:[n],unregister:(n,{notifyLayerAboutDestroy:r}={})=>({ids:Array.isArray(n)?n:[n],notifyLayerAboutDestroy:r}),_delete:n=>Array.isArray(n)?n:[n]},({onAction:n,create:r,schedule:a},c=new Map)=>(n("register",d=>{const l=new Map(c);d.forEach(({id:x,renderer:b,cleanUpActions:E,map:A})=>{const L=Koe(x,b,t,A);l.set(x,L),E&&rP.set(L,E),iP.set(L,L.subscribe(()=>null))}),c=l}),n("unregister",({ids:d,notifyLayerAboutDestroy:l})=>{d.forEach(x=>{const b=c.get(x);b?a(E=>{iP.get(b)();const L=[...rP.get(b)||[],qp.delete(x),by.delete(x),l&&b.destroy(),r("_delete",x)].filter(F=>!!F);E(L)}):console.error(`Attempt unregister not existing layer with id: ${x}`)})}),n("_delete",d=>{const l=new Map(c);d.forEach(x=>{l.delete(x)}),c=l}),c),e);return t},_p=Xoe("layersRegistryAtom"),oP=Jr({setUser:(e=z2)=>e},({onAction:e,schedule:t,getUnlistedState:n},r=z2)=>(e("setUser",a=>{a?r=a:r=z2;const c=Array.from(n(E_)).filter(([,x])=>{var b;return(b=x==null?void 0:x.data)==null?void 0:b.ownedByUser}).map(([x])=>x);if(!c.length)return;const d=Array.from(n(_p)).filter(([x])=>c.includes(x)).map(([x,b])=>b);if(!d.length)return;const l=d.map(x=>x.destroy());t(x=>{x(l)})}),r),"[Shared state] currentUserAtom"),Yoe=Jr({open:()=>null,close:()=>null},({onAction:e},t={isOpen:!1})=>(e("open",()=>t={...t,isOpen:!0}),e("close",()=>t={...t,isOpen:!1}),t),"episodesPanelState"),uF=Jr({setFocusedGeometry:(e,t)=>({source:e,geometry:t}),_update:e=>e,reset:()=>null,currentUserAtom:oP,episodesPanelState:Yoe},({onAction:e,schedule:t,create:n,getUnlistedState:r,onChange:a},c=null)=>(e("setFocusedGeometry",({source:d,geometry:l})=>{const x=r(oP);d&&l?t(async(b,E)=>{const A=await Foe(JSON.stringify({geometry:l,source:d,user:x.email}));if(!c||!E.hash||E.hash!==A){E.hash=A;const L={...l,hash:A};b(n("_update",{source:d,geometry:L}))}}):c=null}),e("reset",()=>{c=null}),e("_update",d=>{c=d}),a("currentUserAtom",()=>{var d;c&&((d=c.source)==null?void 0:d.type)!=="event"&&(c={...c})}),c),"[Shared state] focusedGeometryAtom"),Joe=[["count","area_km2"],["building_count","area_km2"],["highway_length","area_km2"],["local_hours","area_km2"],["avgmax_ts","one"],["days_mintemp_above_25c_1c","one"],["population","area_km2"],["total_hours","area_km2"],["view_count","area_km2"]];function cF(e){const t=Array.isArray(e)?[]:{};for(const n in e){const r=e[n];r&&typeof r=="object"?t[n]=cF(r):t[n]=r}return t}const Qoe=window.structuredClone??cF;function hF(e){var n;const t=Qoe(e);return"properties"in t&&(t.properties={}),"features"in t&&((n=t.features)!=null&&n.length)&&(t.features=t.features.map(r=>hF(r))),t}function fF(e){return!e||!e.geometry||e.geometry.type==="FeatureCollection"&&!e.geometry.features.length}function eae(e){const t={importantLayers:Joe};return e&&!fF(e)&&(t.geoJSON=hF(e==null?void 0:e.geometry)),t}function tae(e){if(e.hasOwnProperty("errors")&&Array.isArray(e.errors))return e.errors.reduce((t,n)=>(n.hasOwnProperty("message")&&t.push(n.message),t),[]).join("<br/>")}const nae=b_({focusedGeometryAtom:uF},({onChange:e},t={focusedGeometry:null})=>(e("focusedGeometryAtom",n=>{t={focusedGeometry:n}}),t),"bivariateStatisticsDependencyAtom");let Iv;const dF=JO(nae,async({focusedGeometry:e},t)=>{var r,a,c;if(!(e!=null&&e.geometry)&&Iv)return Iv;let n;try{const d=eae(e);n=await rF.post("/bivariate_matrix",d,!0,{signal:t.signal})}catch(d){if(KO(d)&&d.problem.kind==="canceled")return null;throw d}if(!n)throw new Error(lr.t("no_data_received"));if(!(n!=null&&n.data)){const d=tae(n);throw new Error(d||lr.t("no_data_received"))}if(!Array.isArray((c=(a=(r=n==null?void 0:n.data)==null?void 0:r.polygonStatistic)==null?void 0:a.bivariateStatistic)==null?void 0:c.correlationRates))throw new Error(lr.t("wrong_data_received"));return fF(e)&&!Iv&&(Iv=n.data),n.data},"bivariateStatisticsResource");class Ct{constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}static toLinear(t){return t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92}static yToL(t){return t<=Ct.epsilon?t/Ct.refY*Ct.kappa:116*Math.pow(t/Ct.refY,1/3)-16}static lToY(t){return t<=8?Ct.refY*t/Ct.kappa:Ct.refY*Math.pow((t+16)/116,3)}static rgbChannelToHex(t){const n=Math.round(t*255),r=n%16,a=(n-r)/16|0;return Ct.hexChars.charAt(a)+Ct.hexChars.charAt(r)}static hexToRgbChannel(t,n){const r=Ct.hexChars.indexOf(t.charAt(n)),a=Ct.hexChars.indexOf(t.charAt(n+1));return(r*16+a)/255}static distanceFromOriginAngle(t,n,r){const a=n/(Math.sin(r)-t*Math.cos(r));return a<0?1/0:a}static distanceFromOrigin(t,n){return Math.abs(n)/Math.sqrt(Math.pow(t,2)+1)}static min6(t,n,r,a,c,d){return Math.min(t,Math.min(n,Math.min(r,Math.min(a,Math.min(c,d)))))}rgbToHex(){this.hex="#",this.hex+=Ct.rgbChannelToHex(this.rgb_r),this.hex+=Ct.rgbChannelToHex(this.rgb_g),this.hex+=Ct.rgbChannelToHex(this.rgb_b)}hexToRgb(){this.hex=this.hex.toLowerCase(),this.rgb_r=Ct.hexToRgbChannel(this.hex,1),this.rgb_g=Ct.hexToRgbChannel(this.hex,3),this.rgb_b=Ct.hexToRgbChannel(this.hex,5)}xyzToRgb(){this.rgb_r=Ct.fromLinear(Ct.m_r0*this.xyz_x+Ct.m_r1*this.xyz_y+Ct.m_r2*this.xyz_z),this.rgb_g=Ct.fromLinear(Ct.m_g0*this.xyz_x+Ct.m_g1*this.xyz_y+Ct.m_g2*this.xyz_z),this.rgb_b=Ct.fromLinear(Ct.m_b0*this.xyz_x+Ct.m_b1*this.xyz_y+Ct.m_b2*this.xyz_z)}rgbToXyz(){const t=Ct.toLinear(this.rgb_r),n=Ct.toLinear(this.rgb_g),r=Ct.toLinear(this.rgb_b);this.xyz_x=.41239079926595*t+.35758433938387*n+.18048078840183*r,this.xyz_y=.21263900587151*t+.71516867876775*n+.072192315360733*r,this.xyz_z=.019330818715591*t+.11919477979462*n+.95053215224966*r}xyzToLuv(){const t=this.xyz_x+15*this.xyz_y+3*this.xyz_z;let n=4*this.xyz_x,r=9*this.xyz_y;t!==0?(n/=t,r/=t):(n=NaN,r=NaN),this.luv_l=Ct.yToL(this.xyz_y),this.luv_l===0?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(n-Ct.refU),this.luv_v=13*this.luv_l*(r-Ct.refV))}luvToXyz(){if(this.luv_l===0){this.xyz_x=0,this.xyz_y=0,this.xyz_z=0;return}const t=this.luv_u/(13*this.luv_l)+Ct.refU,n=this.luv_v/(13*this.luv_l)+Ct.refV;this.xyz_y=Ct.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*t/((t-4)*n-t*n),this.xyz_z=(9*this.xyz_y-15*n*this.xyz_y-n*this.xyz_x)/(3*n)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{const t=Math.atan2(this.luv_v,this.luv_u);this.lch_h=t*180/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){const t=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(t)*this.lch_c,this.luv_v=Math.sin(t)*this.lch_c}calculateBoundingLines(t){const n=Math.pow(t+16,3)/1560896,r=n>Ct.epsilon?n:t/Ct.kappa,a=r*(284517*Ct.m_r0-94839*Ct.m_r2),c=r*(838422*Ct.m_r2+769860*Ct.m_r1+731718*Ct.m_r0),d=r*(632260*Ct.m_r2-126452*Ct.m_r1),l=r*(284517*Ct.m_g0-94839*Ct.m_g2),x=r*(838422*Ct.m_g2+769860*Ct.m_g1+731718*Ct.m_g0),b=r*(632260*Ct.m_g2-126452*Ct.m_g1),E=r*(284517*Ct.m_b0-94839*Ct.m_b2),A=r*(838422*Ct.m_b2+769860*Ct.m_b1+731718*Ct.m_b0),L=r*(632260*Ct.m_b2-126452*Ct.m_b1);this.r0s=a/d,this.r0i=c*t/d,this.r1s=a/(d+126452),this.r1i=(c-769860)*t/(d+126452),this.g0s=l/b,this.g0i=x*t/b,this.g1s=l/(b+126452),this.g1i=(x-769860)*t/(b+126452),this.b0s=E/L,this.b0i=A*t/L,this.b1s=E/(L+126452),this.b1i=(A-769860)*t/(L+126452)}calcMaxChromaHpluv(){const t=Ct.distanceFromOrigin(this.r0s,this.r0i),n=Ct.distanceFromOrigin(this.r1s,this.r1i),r=Ct.distanceFromOrigin(this.g0s,this.g0i),a=Ct.distanceFromOrigin(this.g1s,this.g1i),c=Ct.distanceFromOrigin(this.b0s,this.b0i),d=Ct.distanceFromOrigin(this.b1s,this.b1i);return Ct.min6(t,n,r,a,c,d)}calcMaxChromaHsluv(t){const n=t/360*Math.PI*2,r=Ct.distanceFromOriginAngle(this.r0s,this.r0i,n),a=Ct.distanceFromOriginAngle(this.r1s,this.r1i,n),c=Ct.distanceFromOriginAngle(this.g0s,this.g0i,n),d=Ct.distanceFromOriginAngle(this.g1s,this.g1i,n),l=Ct.distanceFromOriginAngle(this.b0s,this.b0i,n),x=Ct.distanceFromOriginAngle(this.b1s,this.b1i,n);return Ct.min6(r,a,c,d,l,x)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);const t=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=t/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);const t=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/t*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hpluvToLch(){if(this.hpluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hpluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hpluv_l,this.calculateBoundingLines(this.hpluv_l);const t=this.calcMaxChromaHpluv();this.lch_c=t/100*this.hpluv_p}this.lch_h=this.hpluv_h}lchToHpluv(){if(this.lch_l>99.9999999)this.hpluv_p=0,this.hpluv_l=100;else if(this.lch_l<1e-8)this.hpluv_p=0,this.hpluv_l=0;else{this.calculateBoundingLines(this.lch_l);const t=this.calcMaxChromaHpluv();this.hpluv_p=this.lch_c/t*100,this.hpluv_l=this.lch_l}this.hpluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hpluvToRgb(){this.hpluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}hpluvToHex(){this.hpluvToRgb(),this.rgbToHex()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHsluv()}rgbToHpluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHpluv()}hexToHsluv(){this.hexToRgb(),this.rgbToHsluv()}hexToHpluv(){this.hexToRgb(),this.rgbToHpluv()}}Ct.hexChars="0123456789abcdef";Ct.refY=1;Ct.refU=.19783000664283;Ct.refV=.46831999493879;Ct.kappa=903.2962962;Ct.epsilon=.0088564516;Ct.m_r0=3.240969941904521;Ct.m_r1=-1.537383177570093;Ct.m_r2=-.498610760293;Ct.m_g0=-.96924363628087;Ct.m_g1=1.87596750150772;Ct.m_g2=.041555057407175;Ct.m_b0=.055630079696993;Ct.m_b1=-.20397695888897;Ct.m_b2=1.056971514242878;function Q1(e){const t=/https?:/;t.test(e)?e=window.location.protocol+e.replace(t,""):e=`${di.bivariateTilesServer??`${window.location.protocol}${window.location.host}${di.baseUrl}`}${e}`,e=e.replace("{bbox}","{bbox-epsg-3857}").replace("{proj}","EPSG:3857").replace("{width}","256").replace("{height}","256").replace("{zoom}","{z}").replace("{-y}","{y}");const n=(e.match(/{switch:(.*?)}/)||["",""])[1].split(",")[0];return e=e.replace(/{switch:(.*?)}/,n),e}function rae(e,t){return e+(((t-e)%360+540)%360-180)*.5}function aP(e,t){return(e+t)/2}function Kg(e,t){return[rae(e[0],t[0]),aP(e[1],t[1]),aP(e[2],t[2])]}function Xg(e){if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)){let t=e.substring(1).split("");t.length===3&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]);const n=parseInt(`0x${t.join("")}`,0);return`rgba(${[n>>16&255,n>>8&255,n&255].join(",")},0.5)`}throw new Error("Bad Hex")}function Mv(e,t){const n=(Array.isArray(t[0])?[...t[0]]:[t[0]]).sort(),r=(Array.isArray(t[1])?[...t[1]]:[t[1]]).sort(),a=Array.from(new Set(n.concat(r))),c=e.combinations.find(({corner:d})=>{if(a.length!==d.length)return!1;for(let l=0;l<a.length;l+=1)if(a[l]!==d[l])return!1;return!0});return c!=null&&c.color?{color:c.color}:{color:e.fallback,isFallbackColor:!0}}function iae(e,t,n,r,a,c){var N,Z;const{indicators:d,colors:l,axis:x}=a,b=x.find(R=>R.quotient[0]===e&&R.quotient[1]===t),E=x.find(R=>R.quotient[0]===n&&R.quotient[1]===r);if(!b||!E)return;const A=(N=d.find(R=>R.name===e))==null?void 0:N.direction,L=(Z=d.find(R=>R.name===n))==null?void 0:Z.direction;if(!A||!L)return;const F=aae(l,A,L),$=oae(b,E,F,a==null?void 0:a.meta,c);return[F,$]}const oae=(e,t,n,r,a)=>WO({id:`${e.quotient.join("&")}|${t.quotient.join("&")}`,x:e,y:t,colors:n,sourceLayer:a,source:{type:"vector",tiles:[`${Q1(di.bivariateTilesRelativeUrl)}{z}/{x}/{y}.mvt?indicatorsClass=${di.bivariateTilesIndicatorsClass}`],maxzoom:r.max_zoom,minzoom:0}}),aae=(e,t,n)=>{const r=new Ct,a=Mv(e,[t[0],n[0]]),c=Mv(e,[t[0],n[1]]),d=Mv(e,[t[1],n[0]]),l=Mv(e,[t[1],n[1]]),x=[a,c,d,l].map(ee=>(r.hex=ee.color,r.hexToHsluv(),[r.hsluv_h,r.hsluv_s,r.hsluv_l])),b=Kg(x[0],x[1]),E=Kg(x[0],x[2]),A=Kg(x[1],x[3]),L=Kg(x[2],x[3]),F=Kg(E,A),[$,N,Z,R,q]=[b,E,F,A,L].map(([ee,ae,K])=>(r.hsluv_h=ee,r.hsluv_s=ae,r.hsluv_l=K,r.hsluvToHex(),Xg(r.hex)));return[{id:"A1",color:Xg(a.color),isFallbackColor:a.isFallbackColor},{id:"A2",color:$},{id:"A3",color:Xg(c.color),isFallbackColor:c.isFallbackColor},{id:"B1",color:N},{id:"B2",color:Z},{id:"B3",color:R},{id:"C1",color:Xg(d.color),isFallbackColor:d.isFallbackColor},{id:"C2",color:q},{id:"C3",color:Xg(l.color),isFallbackColor:l.isFallbackColor}]};function sae(e,t){return WO({id:`${e.axis.x.quotient.join("&")}|${e.axis.y.quotient.join("&")}`,x:e.axis.x,y:e.axis.y,colors:[...e.steps].sort((n,r)=>n.label>r.label?1:-1).map(n=>({id:n.label,color:n.color})),sourceLayer:t})}function lae(e,t,n,r,a,c,d){const l=d.axis.find(b=>b.quotient[0]===n&&b.quotient[1]===r),x=d.axis.find(b=>b.quotient[0]===a&&b.quotient[1]===c);if(!(!l||!x))return uae(e,l,x,t)}const uae=(e,t,n,r)=>({name:e,axis:{x:t,y:n},type:"bivariate",steps:r.map(({id:a,color:c,isFallbackColor:d})=>({label:a,color:c,isFallbackColor:d}))});function cae(e,t,n,r,a){var F,$,N,Z;const c=a.indicators.find(R=>R.name===e),d=a.indicators.find(R=>R.name===n),l=c==null?void 0:c.label,x=d==null?void 0:d.label,b=(F=a.indicators.find(R=>R.name===t))==null?void 0:F.label,E=($=a.indicators.find(R=>R.name===r))==null?void 0:$.label;let A=[];return(N=c==null?void 0:c.copyrights)!=null&&N.length&&(A=A.concat(c.copyrights)),(Z=d==null?void 0:d.copyrights)!=null&&Z.length&&(A=A.concat(d.copyrights)),{description:`This map shows relation of ${l} (normalized by ${b}) to the base of ${x} (normalized by ${E}).`,copyrights:A,hints:{x:{label:l,direction:c==null?void 0:c.direction},y:{label:x,direction:d==null?void 0:d.direction}}}}function hae(e,t,n,r){const a=e.findIndex(l=>{if(n<l.value)return!0}),c=$C(a),d=t.findIndex(l=>{if(r<l.value)return!0});return c+d}const fae=e=>{const{correlationRates:t}=e,n=[],r=[];for(const a of t){const c=a.x.quotient,d=a.x.parent||c;let l=n.find(A=>A.parent===JSON.stringify(d));l?l.quotients.find(A=>JSON.stringify(A)===JSON.stringify(c))||l.quotients.push(c):(l={parent:JSON.stringify(d),quotients:[c],selectedQuotient:c},n.push(l));const x=a.y.quotient,b=a.y.parent||x;let E=r.find(A=>A.parent===JSON.stringify(b));E?E.quotients.find(A=>JSON.stringify(A)===JSON.stringify(x))||E.quotients.push(x):(E={parent:JSON.stringify(b),quotients:[x],selectedQuotient:x},r.push(E))}for(const a of n){const c=a.quotients.find(d=>JSON.stringify(d)===a.parent);c&&(a.selectedQuotient=c)}for(const a of r){const c=a.quotients.find(d=>JSON.stringify(d)===a.parent);c&&(a.selectedQuotient=c)}return{x:n,y:r}},Lv=Jr({setNumerators:(e,t)=>({xGroups:e,yGroups:t}),bivariateStatisticsResourceAtom:dF},({get:e,onAction:t,onChange:n},r={xGroups:[],yGroups:[]})=>(n("bivariateStatisticsResourceAtom",({data:a,loading:c})=>{if(a&&!c){const d=a.polygonStatistic.bivariateStatistic,l=fae(d);r={xGroups:l.x,yGroups:l.y}}}),t("setNumerators",a=>{r=a}),r),"bivariateNumerators"),dae=()=>({legend:[],source:[],meta:[],settings:[],menu:[]}),Ov=([e,t])=>[e,{data:t,isLoading:!1,error:null}];function sP(e){const t=e.reduce((a,{id:c,...d})=>(Object.keys(d).forEach(l=>{a[l].push([c,d[l]])}),a),dae()),n=[],r=[];if(t.legend.length){const a=t.legend.map(Ov);n.push(g3.change(c=>new Map([...c,...a])))}if(t.source.length){const a=t.source.map(Ov);n.push(sF.change(c=>new Map([...c,...a])))}if(t.meta.length){const a=t.meta.map(Ov);n.push(aF.change(c=>new Map([...c,...a])))}if(t.settings.length){const a=t.settings.map(Ov);n.push(E_.change(c=>new Map([...c,...a])))}if(t.menu.length){const a=t.menu;n.push(lF.change(c=>new Map([...c,...a])))}return[n,r]}var pF={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ss,function(){var n,r,a;function c(l,x){if(!n)n=x;else if(!r)r=x;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",E={};n(E),a=x(E),typeof window<"u"&&(a.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}c(["exports"],function(l){function x(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var b=E;function E(s,i){this.x=s,this.y=i}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,u=s.y-this.y;return i*i+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),u=Math.sin(s),p=u*this.x+i*this.y;return this.x=i*this.x-u*this.y,this.y=p,this},_rotateAround:function(s,i){var u=Math.cos(s),p=Math.sin(s),g=i.y+p*(this.x-i.x)+u*(this.y-i.y);return this.x=i.x+u*(this.x-i.x)-p*(this.y-i.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(s){return s instanceof E?s:Array.isArray(s)?new E(s[0],s[1]):s};var A=x(b),L=F;function F(s,i,u,p){this.cx=3*s,this.bx=3*(u-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=u,this.p2y=p}F.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var u=s,p=0;p<8;p++){var g=this.sampleCurveX(u)-s;if(Math.abs(g)<i)return u;var S=this.sampleCurveDerivativeX(u);if(Math.abs(S)<1e-6)break;u-=g/S}var C=0,T=1;for(u=s,p=0;p<20&&(g=this.sampleCurveX(u),!(Math.abs(g-s)<i));p++)s>g?C=u:T=u,u=.5*(T-C)+C;return u},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var $=x(L);function N(s,i,u,p){const g=new $(s,i,u,p);return function(S){return g.solve(S)}}const Z=N(.25,.1,.25,1);function R(s,i,u){return Math.min(u,Math.max(i,s))}function q(s,i,u){const p=u-i,g=((s-i)%p+p)%p+i;return g===i?u:g}function G(s,...i){for(const u of i)for(const p in u)s[p]=u[p];return s}let ee=1;function ae(s,i,u){const p={};for(const g in s)p[g]=i.call(u||this,s[g],g,s);return p}function K(s,i,u){const p={};for(const g in s)i.call(u||this,s[g],g,s)&&(p[g]=s[g]);return p}function le(s){return Array.isArray(s)?s.map(le):typeof s=="object"&&s?ae(s,le):s}const xe={};function Le(s){xe[s]||(typeof console<"u"&&console.warn(s),xe[s]=!0)}function Oe(s,i,u){return(u.y-s.y)*(i.x-s.x)>(i.y-s.y)*(u.x-s.x)}function Fe(s){let i=0;for(let u,p,g=0,S=s.length,C=S-1;g<S;C=g++)u=s[g],p=s[C],i+=(p.x-u.x)*(u.y+p.y);return i}function Ge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let tt=null;function yt(s){if(tt==null){const i=s.navigator?s.navigator.userAgent:null;tt=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return tt}function At(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Vt,Ve;const _e={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const i=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(s,i=0){return this.getImageCanvasContext(s).getImageData(-i,-i,s.width+2*i,s.height+2*i)},getImageCanvasContext(s){const i=window.document.createElement("canvas"),u=i.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return i.width=s.width,i.height=s.height,u.drawImage(s,0,0,s.width,s.height),u},resolveURL:s=>(Vt||(Vt=document.createElement("a")),Vt.href=s,Vt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ve==null&&(Ve=matchMedia("(prefers-reduced-motion: reduce)")),Ve.matches)}},we={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class X extends Error{constructor(i,u,p,g){super(`AJAXError: ${u} (${i}): ${p}`),this.status=i,this.statusText=u,this.url=p,this.body=g}}const oe=Ge()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,lt=s=>we.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function mt(s,i){const u=new AbortController,p=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:oe(),signal:u.signal});let g=!1,S=!1;return s.type==="json"&&p.headers.set("Accept","application/json"),S||fetch(p).then(C=>C.ok?(T=>{(s.type==="arrayBuffer"||s.type==="image"?T.arrayBuffer():s.type==="json"?T.json():T.text()).then(M=>{S||(g=!0,i(null,M,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(M=>{S||i(new Error(M.message))})})(C):C.blob().then(T=>i(new X(C.status,C.statusText,s.url,T)))).catch(C=>{C.code!==20&&i(new Error(C.message))}),{cancel:()=>{S=!0,g||u.abort()}}}const Gt=function(s,i){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i);if(!Ge())return(lt(s.url)||mt)(s,i)}if(!(/^file:/.test(u=s.url)||/^file:/.test(oe())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return mt(s,i);if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var u;return function(p,g){const S=new XMLHttpRequest;S.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(S.responseType="arraybuffer");for(const C in p.headers)S.setRequestHeader(C,p.headers[C]);return p.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=p.credentials==="include",S.onerror=()=>{g(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let C=S.response;if(p.type==="json")try{C=JSON.parse(S.response)}catch(T){return g(T)}g(null,C,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const C=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});g(new X(S.status,S.statusText,p.url,C))}},S.send(p.body),{cancel:()=>S.abort()}}(s,i)},Dt=function(s,i){return Gt(G(s,{type:"arrayBuffer"}),i)};function Qt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const i=new URL(s),u=window.location;return i.protocol===u.protocol&&i.host===u.host}function un(s,i,u){u[s]&&u[s].indexOf(i)!==-1||(u[s]=u[s]||[],u[s].push(i))}function Xn(s,i,u){if(u&&u[s]){const p=u[s].indexOf(i);p!==-1&&u[s].splice(p,1)}}class Qn{constructor(i,u={}){G(this,u),this.type=i}}class Bn extends Qn{constructor(i,u={}){super("error",G({error:i},u))}}class Qr{on(i,u){return this._listeners=this._listeners||{},un(i,u,this._listeners),this}off(i,u){return Xn(i,u,this._listeners),Xn(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},un(i,u,this._oneTimeListeners),this):new Promise(p=>this.once(i,p))}fire(i,u){typeof i=="string"&&(i=new Qn(i,u||{}));const p=i.type;if(this.listens(p)){i.target=this;const g=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const T of g)T.call(this,i);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const T of S)Xn(p,T,this._oneTimeListeners),T.call(this,i);const C=this._eventedParent;C&&(G(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(i))}else i instanceof Bn&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}var Je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const yr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Gi(s,i){const u={};for(const p in s)p!=="ref"&&(u[p]=s[p]);return yr.forEach(p=>{p in i&&(u[p]=i[p])}),u}function Gn(s,i){if(Array.isArray(s)){if(!Array.isArray(i)||s.length!==i.length)return!1;for(let u=0;u<s.length;u++)if(!Gn(s[u],i[u]))return!1;return!0}if(typeof s=="object"&&s!==null&&i!==null){if(typeof i!="object"||Object.keys(s).length!==Object.keys(i).length)return!1;for(const u in s)if(!Gn(s[u],i[u]))return!1;return!0}return s===i}const _n={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function _o(s,i,u){u.push({command:_n.addSource,args:[s,i[s]]})}function Mo(s,i,u){i.push({command:_n.removeSource,args:[s]}),u[s]=!0}function Lo(s,i,u,p){Mo(s,u,p),_o(s,i,u)}function ei(s,i,u){let p;for(p in s[u])if(Object.prototype.hasOwnProperty.call(s[u],p)&&p!=="data"&&!Gn(s[u][p],i[u][p]))return!1;for(p in i[u])if(Object.prototype.hasOwnProperty.call(i[u],p)&&p!=="data"&&!Gn(s[u][p],i[u][p]))return!1;return!0}function Yn(s,i,u,p,g,S){let C;for(C in i=i||{},s=s||{})Object.prototype.hasOwnProperty.call(s,C)&&(Gn(s[C],i[C])||u.push({command:S,args:[p,C,i[C],g]}));for(C in i)Object.prototype.hasOwnProperty.call(i,C)&&!Object.prototype.hasOwnProperty.call(s,C)&&(Gn(s[C],i[C])||u.push({command:S,args:[p,C,i[C],g]}))}function Oo(s){return s.id}function vo(s,i){return s[i.id]=i,s}class vt{constructor(i,u,p,g){this.message=(i?`${i}: `:"")+p,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function ti(s,...i){for(const u of i)for(const p in u)s[p]=u[p];return s}class We extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class se{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[p,g]of u)this.bindings[p]=g}concat(i){return new se(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Re={kind:"null"},Pe={kind:"number"},rt={kind:"string"},bt={kind:"boolean"},vn={kind:"color"},Wt={kind:"object"},xt={kind:"value"},$n={kind:"collator"},jn={kind:"formatted"},bn={kind:"padding"},_r={kind:"resolvedImage"};function Mn(s,i){return{kind:"array",itemType:s,N:i}}function On(s){if(s.kind==="array"){const i=On(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const La=[Re,Pe,rt,bt,vn,jn,Wt,Mn(xt),bn,_r];function ni(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!ni(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const u of La)if(!ni(u,i))return null}}return`Expected ${On(s)} but found ${On(i)} instead.`}function wr(s,i){return i.some(u=>u.kind===s.kind)}function ye(s,i){return i.some(u=>u==="null"?s===null:u==="array"?Array.isArray(s):u==="object"?s&&!Array.isArray(s)&&typeof s=="object":u===typeof s)}function W(s,i){return s.kind==="array"&&i.kind==="array"?s.itemType.kind===i.itemType.kind&&typeof s.N=="number":s.kind===i.kind}const Q=.96422,ce=.82521,Se=4/29,Ce=6/29,De=3*Ce*Ce,Te=Ce*Ce*Ce,Ae=Math.PI/180,Ne=180/Math.PI;function ot(s){return(s%=360)<0&&(s+=360),s}function at([s,i,u,p]){let g,S;const C=Jt((.2225045*(s=st(s))+.7168786*(i=st(i))+.0606169*(u=st(u)))/1);s===i&&i===u?g=S=C:(g=Jt((.4360747*s+.3850649*i+.1430804*u)/Q),S=Jt((.0139322*s+.0971045*i+.7141733*u)/ce));const T=116*C-16;return[T<0?0:T,500*(g-C),200*(C-S),p]}function st(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Jt(s){return s>Te?Math.pow(s,1/3):s/De+Se}function fn([s,i,u,p]){let g=(s+16)/116,S=isNaN(i)?g:g+i/500,C=isNaN(u)?g:g-u/200;return g=1*Zt(g),S=Q*Zt(S),C=ce*Zt(C),[jt(3.1338561*S-1.6168667*g-.4906146*C),jt(-.9787684*S+1.9161415*g+.033454*C),jt(.0719453*S-.2289914*g+1.4052427*C),p]}function jt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Zt(s){return s>Ce?s*s*s:De*(s-Se)}function rn(s){return parseInt(s.padEnd(2,s),16)/255}function Hn(s,i){return Wn(i?s/100:s,0,1)}function Wn(s,i,u){return Math.min(Math.max(i,s),u)}function Fn(s){return!s.some(Number.isNaN)}const Nn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class wn{constructor(i,u,p,g=1,S=!0){this.r=i,this.g=u,this.b=p,this.a=g,S||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,u,p,g]))}static parse(i){if(i instanceof wn)return i;if(typeof i!="string")return;const u=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Nn[p];if(g){const[C,T,M]=g;return[C/255,T/255,M/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const C=p.length<6?1:2;let T=1;return[rn(p.slice(T,T+=C)),rn(p.slice(T,T+=C)),rn(p.slice(T,T+=C)),rn(p.slice(T,T+C)||"ff")]}if(p.startsWith("rgb")){const C=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[T,M,B,j,H,J,te,re,ge,ve,pe,$e]=C,ke=[j||" ",te||" ",ve].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Be=[B,J,ge].join(""),He=Be==="%%%"?100:Be===""?255:0;if(He){const et=[Wn(+M/He,0,1),Wn(+H/He,0,1),Wn(+re/He,0,1),pe?Hn(+pe,$e):1];if(Fn(et))return et}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[C,T,M,B,j,H,J,te,re]=S,ge=[M||" ",j||" ",J].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const ve=[+T,Wn(+B,0,100),Wn(+H,0,100),te?Hn(+te,re):1];if(Fn(ve))return function([pe,$e,ke,Be]){function He(et){const Rt=(et+pe/30)%12,$t=$e*Math.min(ke,1-ke);return ke-$t*Math.max(-1,Math.min(Rt-3,9-Rt,1))}return pe=ot(pe),$e/=100,ke/=100,[He(0),He(8),He(4),Be]}(ve)}}}(i);return u?new wn(...u,!1):void 0}get rgb(){const{r:i,g:u,b:p,a:g}=this,S=g||1/0;return this.overwriteGetter("rgb",[i/S,u/S,p/S,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[u,p,g,S]=at(i),C=Math.sqrt(p*p+g*g);return[Math.round(1e4*C)?ot(Math.atan2(g,p)*Ne):NaN,C,u,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",at(this.rgb))}overwriteGetter(i,u){return Object.defineProperty(this,i,{value:u}),u}toString(){const[i,u,p,g]=this.rgb;return`rgba(${[i,u,p].map(S=>Math.round(255*S)).join(",")},${g})`}}wn.black=new wn(0,0,0,1),wn.white=new wn(1,1,1,1),wn.transparent=new wn(0,0,0,0),wn.red=new wn(1,0,0,1);class cr{constructor(i,u,p){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lr{constructor(i,u,p,g,S){this.text=i,this.image=u,this.scale=p,this.fontStack=g,this.textColor=S}}class pr{constructor(i){this.sections=i}static fromString(i){return new pr([new Lr(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof pr?i:pr.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Pr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Pr)return i;if(typeof i=="number")return new Pr([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const u of i)if(typeof u!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Pr(i)}}toString(){return JSON.stringify(this.values)}}class Fo{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Fo({name:i,available:!1}):null}}function sd(s,i,u,p){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,i,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,i,u,p]:[s,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rs(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof wn||s instanceof cr||s instanceof pr||s instanceof Pr||s instanceof Fo)return!0;if(Array.isArray(s)){for(const i of s)if(!rs(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!rs(s[i]))return!1;return!0}return!1}function jr(s){if(s===null)return Re;if(typeof s=="string")return rt;if(typeof s=="boolean")return bt;if(typeof s=="number")return Pe;if(s instanceof wn)return vn;if(s instanceof cr)return $n;if(s instanceof pr)return jn;if(s instanceof Pr)return bn;if(s instanceof Fo)return _r;if(Array.isArray(s)){const i=s.length;let u;for(const p of s){const g=jr(p);if(u){if(u===g)continue;u=xt;break}u=g}return Mn(u||xt,i)}return Wt}function Sl(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof wn||s instanceof pr||s instanceof Pr||s instanceof Fo?s.toString():JSON.stringify(s)}class is{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!rs(i[1]))return u.error("invalid value");const p=i[1];let g=jr(p);const S=u.expectedType;return g.kind!=="array"||g.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(g=S),new is(g,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ri{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const zs={string:rt,number:Pe,boolean:bt,object:Wt};class Yo{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let p,g=1;const S=i[0];if(S==="array"){let T,M;if(i.length>2){const B=i[1];if(typeof B!="string"||!(B in zs)||B==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);T=zs[B],g++}else T=xt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);M=i[2],g++}p=Mn(T,M)}else{if(!zs[S])throw new Error(`Types doesn't contain name = ${S}`);p=zs[S]}const C=[];for(;g<i.length;g++){const T=u.parse(i[g],g,xt);if(!T)return null;C.push(T)}return new Yo(p,C)}evaluate(i){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(i);if(!ni(this.type,jr(p)))return p;if(u===this.args.length-1)throw new ri(`Expected value to be of type ${On(this.type)}, but found ${On(jr(p))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const ld={"to-boolean":bt,"to-color":vn,"to-number":Pe,"to-string":rt};class Oa{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const p=i[0];if(!ld[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&i.length!==2)return u.error("Expected one argument.");const g=ld[p],S=[];for(let C=1;C<i.length;C++){const T=u.parse(i[C],C,xt);if(!T)return null;S.push(T)}return new Oa(g,S)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let u,p;for(const g of this.args){if(u=g.evaluate(i),p=null,u instanceof wn)return u;if(typeof u=="string"){const S=i.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:sd(u[0],u[1],u[2],u[3]),!p))return new wn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ri(p||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="padding"){let u;for(const p of this.args){u=p.evaluate(i);const g=Pr.parse(u);if(g)return g}throw new ri(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="number"){let u=null;for(const p of this.args){if(u=p.evaluate(i),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new ri(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?pr.fromString(Sl(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Fo.fromString(Sl(this.args[0].evaluate(i))):Sl(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Bs=["Unknown","Point","LineString","Polygon"];class cu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=wn.parse(i)),u}}class os{constructor(i,u,p=[],g,S=new se,C=[]){this.registry=i,this.path=p,this.key=p.map(T=>`[${T}]`).join(""),this.scope=S,this.errors=C,this.expectedType=g,this._isConstant=u}parse(i,u,p,g,S={}){return u?this.concat(u,p,g)._parse(i,S):this._parse(i,S)}_parse(i,u){function p(g,S,C){return C==="assert"?new Yo(S,[g]):C==="coerce"?new Oa(S,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[g];if(S){let C=S.parse(i,this);if(!C)return null;if(this.expectedType){const T=this.expectedType,M=C.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(T.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array"){if(this.checkSubtype(T,M))return null}else C=p(C,T,u.typeAnnotation||"coerce");else C=p(C,T,u.typeAnnotation||"coerce");else C=p(C,T,u.typeAnnotation||"assert")}if(!(C instanceof is)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const T=new cu;try{C=new is(C.type,C.evaluate(T))}catch(M){return this.error(M.message),null}}return C}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,p){const g=typeof i=="number"?this.path.concat(i):this.path,S=p?this.scope.concat(p):this.scope;return new os(this.registry,this._isConstant,g,u||null,S,this.errors)}error(i,...u){const p=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new We(p,i))}checkSubtype(i,u){const p=ni(i,u);return p&&this.error(p),p}}class as{constructor(i,u,p){this.type=$n,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const g=u.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,bt);if(!g)return null;const S=u.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,bt);if(!S)return null;let C=null;return p.locale&&(C=u.parse(p.locale,1,rt),!C)?null:new as(g,S,C)}evaluate(i){return new cr(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}const Ln=8192;function Cl(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function $s(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function gm(s,i){const u=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(u*g*Ln),Math.round(p*g*Ln)]}function $h(s,i,u){const p=s[0]-i[0],g=s[1]-i[1],S=s[0]-u[0],C=s[1]-u[1];return p*C-S*g==0&&p*S<=0&&g*C<=0}function hu(s,i){let u=!1;for(let C=0,T=i.length;C<T;C++){const M=i[C];for(let B=0,j=M.length;B<j-1;B++){if($h(s,M[B],M[B+1]))return!1;(g=M[B])[1]>(p=s)[1]!=(S=M[B+1])[1]>p[1]&&p[0]<(S[0]-g[0])*(p[1]-g[1])/(S[1]-g[1])+g[0]&&(u=!u)}}var p,g,S;return u}function Nh(s,i){for(let u=0;u<i.length;u++)if(hu(s,i[u]))return!0;return!1}function Uh(s,i,u,p){const g=p[0]-u[0],S=p[1]-u[1],C=(s[0]-u[0])*S-g*(s[1]-u[1]),T=(i[0]-u[0])*S-g*(i[1]-u[1]);return C>0&&T<0||C<0&&T>0}function jh(s,i,u){for(const B of u)for(let j=0;j<B.length-1;++j)if((T=[(C=B[j+1])[0]-(S=B[j])[0],C[1]-S[1]])[0]*(M=[(g=i)[0]-(p=s)[0],g[1]-p[1]])[1]-T[1]*M[0]!=0&&Uh(p,g,S,C)&&Uh(S,C,p,g))return!0;var p,g,S,C,T,M;return!1}function lc(s,i){for(let u=0;u<s.length;++u)if(!hu(s[u],i))return!1;for(let u=0;u<s.length-1;++u)if(jh(s[u],s[u+1],i))return!1;return!0}function Vh(s,i){for(let u=0;u<i.length;u++)if(lc(s,i[u]))return!0;return!1}function ss(s,i,u){const p=[];for(let g=0;g<s.length;g++){const S=[];for(let C=0;C<s[g].length;C++){const T=gm(s[g][C],u);Cl(i,T),S.push(T)}p.push(S)}return p}function qh(s,i,u){const p=[];for(let g=0;g<s.length;g++){const S=ss(s[g],i,u);p.push(S)}return p}function uc(s,i,u,p){if(s[0]<u[0]||s[0]>u[2]){const g=.5*p;let S=s[0]-u[0]>g?-p:u[0]-s[0]>g?p:0;S===0&&(S=s[0]-u[2]>g?-p:u[2]-s[0]>g?p:0),s[0]+=S}Cl(i,s)}function Gh(s,i,u,p){const g=Math.pow(2,p.z)*Ln,S=[p.x*Ln,p.y*Ln],C=[];for(const T of s)for(const M of T){const B=[M.x+S[0],M.y+S[1]];uc(B,i,u,g),C.push(B)}return C}function Hh(s,i,u,p){const g=Math.pow(2,p.z)*Ln,S=[p.x*Ln,p.y*Ln],C=[];for(const M of s){const B=[];for(const j of M){const H=[j.x+S[0],j.y+S[1]];Cl(i,H),B.push(H)}C.push(B)}if(i[2]-i[0]<=g/2){(T=i)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const M of C)for(const B of M)uc(B,i,u,g)}var T;return C}class ls{constructor(i,u){this.type=bt,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(rs(i[1])){const p=i[1];if(p.type==="FeatureCollection")for(let g=0;g<p.features.length;++g){const S=p.features[g].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new ls(p,p.features[g].geometry)}else if(p.type==="Feature"){const g=p.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ls(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new ls(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,p){const g=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(p.type==="Polygon"){const T=ss(p.coordinates,S,C),M=Gh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!hu(B,T))return!1}if(p.type==="MultiPolygon"){const T=qh(p.coordinates,S,C),M=Gh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!Nh(B,T))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,p){const g=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(p.type==="Polygon"){const T=ss(p.coordinates,S,C),M=Hh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!lc(B,T))return!1}if(p.type==="MultiPolygon"){const T=qh(p.coordinates,S,C),M=Hh(u.geometry(),g,S,C);if(!$s(g,S))return!1;for(const B of M)if(!Vh(B,T))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ns{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=i[1];return u.scope.has(p)?new Ns(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class xo{constructor(i,u,p,g){this.name=i,this.type=u,this._evaluate=p,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,u){const p=i[0],g=xo.definitions[p];if(!g)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(g)?g[0]:g.type,C=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,T=C.filter(([B])=>!Array.isArray(B)||B.length===i.length-1);let M=null;for(const[B,j]of T){M=new os(u.registry,cc,u.path,null,u.scope);const H=[];let J=!1;for(let te=1;te<i.length;te++){const re=i[te],ge=Array.isArray(B)?B[te-1]:B.type,ve=M.parse(re,1+H.length,ge);if(!ve){J=!0;break}H.push(ve)}if(!J)if(Array.isArray(B)&&B.length!==H.length)M.error(`Expected ${B.length} arguments, but found ${H.length} instead.`);else{for(let te=0;te<H.length;te++){const re=Array.isArray(B)?B[te]:B.type,ge=H[te];M.concat(te+1).checkSubtype(re,ge.type)}if(M.errors.length===0)return new xo(p,S,j,H)}}if(T.length===1)u.errors.push(...M.errors);else{const B=(T.length?T:C).map(([H])=>{return J=H,Array.isArray(J)?`(${J.map(On).join(", ")})`:`(${On(J.type)}...)`;var J}).join(" | "),j=[];for(let H=1;H<i.length;H++){const J=u.parse(i[H],1+j.length);if(!J)return null;j.push(On(J.type))}u.error(`Expected arguments of type ${B}, but found (${j.join(", ")}) instead.`)}return null}static register(i,u){xo.definitions=u;for(const p in u)i[p]=xo}}function cc(s){if(s instanceof Ns)return cc(s.boundExpression);if(s instanceof xo&&s.name==="error"||s instanceof as||s instanceof ls)return!1;const i=s instanceof Oa||s instanceof Yo;let u=!0;return s.eachChild(p=>{u=i?u&&cc(p):u&&p instanceof is}),!!u&&hc(s)&&kl(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function hc(s){if(s instanceof xo&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ls)return!1;let i=!0;return s.eachChild(u=>{i&&!hc(u)&&(i=!1)}),i}function El(s){if(s instanceof xo&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(u=>{i&&!El(u)&&(i=!1)}),i}function kl(s,i){if(s instanceof xo&&i.indexOf(s.name)>=0)return!1;let u=!0;return s.eachChild(p=>{u&&!kl(p,i)&&(u=!1)}),u}function fc(s,i){const u=s.length-1;let p,g,S=0,C=u,T=0;for(;S<=C;)if(T=Math.floor((S+C)/2),p=s[T],g=s[T+1],p<=i){if(T===u||i<g)return T;S=T+1}else{if(!(p>i))throw new ri("Input is not a number.");C=T-1}return 0}class fu{constructor(i,u,p){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[g,S]of p)this.labels.push(g),this.outputs.push(S)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(i[1],1,Pe);if(!p)return null;const g=[];let S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let C=1;C<i.length;C+=2){const T=C===1?-1/0:i[C],M=i[C+1],B=C,j=C+1;if(typeof T!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(g.length&&g[g.length-1][0]>=T)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const H=u.parse(M,j,S);if(!H)return null;S=S||H.type,g.push([T,H])}return new fu(S,p,g)}evaluate(i){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(i);const g=this.input.evaluate(i);if(g<=u[0])return p[0].evaluate(i);const S=u.length;return g>=u[S-1]?p[S-1].evaluate(i):p[fc(u,g)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Al(s,i,u){return s+u*(i-s)}function du(s,i,u){return s.map((p,g)=>Al(p,i[g],u))}const Hi={number:Al,color:function(s,i,u,p="rgb"){switch(p){case"rgb":{const[g,S,C,T]=du(s.rgb,i.rgb,u);return new wn(g,S,C,T,!1)}case"hcl":{const[g,S,C,T]=s.hcl,[M,B,j,H]=i.hcl;let J,te;if(isNaN(g)||isNaN(M))isNaN(g)?isNaN(M)?J=NaN:(J=M,C!==1&&C!==0||(te=B)):(J=g,j!==1&&j!==0||(te=S));else{let $e=M-g;M>g&&$e>180?$e-=360:M<g&&g-M>180&&($e+=360),J=g+u*$e}const[re,ge,ve,pe]=function([$e,ke,Be,He]){return $e=isNaN($e)?0:$e*Ae,fn([Be,Math.cos($e)*ke,Math.sin($e)*ke,He])}([J,te??Al(S,B,u),Al(C,j,u),Al(T,H,u)]);return new wn(re,ge,ve,pe,!1)}case"lab":{const[g,S,C,T]=fn(du(s.lab,i.lab,u));return new wn(g,S,C,T,!1)}}},array:du,padding:function(s,i,u){return new Pr(du(s.values,i.values,u))}};class bo{constructor(i,u,p,g,S){this.type=i,this.operator=u,this.interpolation=p,this.input=g,this.labels=[],this.outputs=[];for(const[C,T]of S)this.labels.push(C),this.outputs.push(T)}static interpolationFactor(i,u,p,g){let S=0;if(i.name==="exponential")S=Wh(u,i.base,p,g);else if(i.name==="linear")S=Wh(u,1,p,g);else if(i.name==="cubic-bezier"){const C=i.controlPoints;S=new $(C[0],C[1],C[2],C[3]).solve(Wh(u,1,p,g))}return S}static parse(i,u){let[p,g,S,...C]=i;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const B=g[1];if(typeof B!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:B}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const B=g.slice(1);if(B.length!==4||B.some(j=>typeof j!="number"||j<0||j>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:B}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,Pe),!S)return null;const T=[];let M=null;p==="interpolate-hcl"||p==="interpolate-lab"?M=vn:u.expectedType&&u.expectedType.kind!=="value"&&(M=u.expectedType);for(let B=0;B<C.length;B+=2){const j=C[B],H=C[B+1],J=B+3,te=B+4;if(typeof j!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(T.length&&T[T.length-1][0]>=j)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);const re=u.parse(H,te,M);if(!re)return null;M=M||re.type,T.push([j,re])}return W(M,Pe)||W(M,vn)||W(M,bn)||W(M,Mn(Pe))?new bo(M,p,g,S,T):u.error(`Type ${On(M)} is not interpolatable.`)}evaluate(i){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(i);const g=this.input.evaluate(i);if(g<=u[0])return p[0].evaluate(i);const S=u.length;if(g>=u[S-1])return p[S-1].evaluate(i);const C=fc(u,g),T=bo.interpolationFactor(this.interpolation,g,u[C],u[C+1]),M=p[C].evaluate(i),B=p[C+1].evaluate(i);switch(this.operator){case"interpolate":return Hi[this.type.kind](M,B,T);case"interpolate-hcl":return Hi.color(M,B,T,"hcl");case"interpolate-lab":return Hi.color(M,B,T,"lab")}}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Wh(s,i,u,p){const g=p-u,S=s-u;return g===0?0:i===1?S/g:(Math.pow(i,S)-1)/(Math.pow(i,g)-1)}class dc{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let p=null;const g=u.expectedType;g&&g.kind!=="value"&&(p=g);const S=[];for(const T of i.slice(1)){const M=u.parse(T,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!M)return null;p=p||M.type,S.push(M)}if(!p)throw new Error("No output type");const C=g&&S.some(T=>ni(g,T.type));return new dc(C?xt:p,S)}evaluate(i){let u,p=null,g=0;for(const S of this.args)if(g++,p=S.evaluate(i),p&&p instanceof Fo&&!p.available&&(u||(u=p.name),p=null,g===this.args.length&&(p=u)),p!==null)break;return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}class pc{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let S=1;S<i.length-1;S+=2){const C=i[S];if(typeof C!="string")return u.error(`Expected string, but found ${typeof C} instead.`,S);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);const T=u.parse(i[S+1],S+1);if(!T)return null;p.push([C,T])}const g=u.parse(i[i.length-1],i.length-1,u.expectedType,p);return g?new pc(p,g):null}outputDefined(){return this.result.outputDefined()}}class Zh{constructor(i,u,p){this.type=i,this.index=u,this.input=p}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,Pe),g=u.parse(i[2],2,Mn(u.expectedType||xt));return p&&g?new Zh(g.type.itemType,p,g):null}evaluate(i){const u=this.index.evaluate(i),p=this.input.evaluate(i);if(u<0)throw new ri(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new ri(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new ri(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class mr{constructor(i,u){this.type=bt,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,xt),g=u.parse(i[2],2,xt);return p&&g?wr(p.type,[bt,rt,Pe,Re,xt])?new mr(p,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(p.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!p)return!1;if(!ye(u,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${On(jr(u))} instead.`);if(!ye(p,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${On(jr(p))} instead.`);return p.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class er{constructor(i,u,p){this.type=Pe,this.needle=i,this.haystack=u,this.fromIndex=p}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,xt),g=u.parse(i[2],2,xt);if(!p||!g)return null;if(!wr(p.type,[bt,rt,Pe,Re,xt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(p.type)} instead`);if(i.length===4){const S=u.parse(i[3],3,Pe);return S?new er(p,g,S):null}return new er(p,g)}evaluate(i){const u=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!ye(u,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${On(jr(u))} instead.`);if(!ye(p,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${On(jr(p))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(i);return p.indexOf(u,g)}return p.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Tl{constructor(i,u,p,g,S,C){this.inputType=i,this.type=u,this.input=p,this.cases=g,this.outputs=S,this.otherwise=C}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let p,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const S={},C=[];for(let B=2;B<i.length-1;B+=2){let j=i[B];const H=i[B+1];Array.isArray(j)||(j=[j]);const J=u.concat(B);if(j.length===0)return J.error("Expected at least one branch label.");for(const re of j){if(typeof re!="number"&&typeof re!="string")return J.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return J.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return J.error("Numeric branch labels must be integer values.");if(p){if(J.checkSubtype(p,jr(re)))return null}else p=jr(re);if(S[String(re)]!==void 0)return J.error("Branch labels must be unique.");S[String(re)]=C.length}const te=u.parse(H,B,g);if(!te)return null;g=g||te.type,C.push(te)}const T=u.parse(i[1],1,xt);if(!T)return null;const M=u.parse(i[i.length-1],i.length-1,g);return M?T.type.kind!=="value"&&u.concat(1).checkSubtype(p,T.type)?null:new Tl(p,g,T,S,C,M):null}evaluate(i){const u=this.input.evaluate(i);return(jr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Vn{constructor(i,u,p){this.type=i,this.branches=u,this.otherwise=p}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const g=[];for(let C=1;C<i.length-1;C+=2){const T=u.parse(i[C],C,bt);if(!T)return null;const M=u.parse(i[C+1],C+1,p);if(!M)return null;g.push([T,M]),p=p||M.type}const S=u.parse(i[i.length-1],i.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new Vn(p,g,S)}evaluate(i){for(const[u,p]of this.branches)if(u.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,p]of this.branches)i(u),i(p);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class mc{constructor(i,u,p,g){this.type=i,this.input=u,this.beginIndex=p,this.endIndex=g}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,xt),g=u.parse(i[2],2,Pe);if(!p||!g)return null;if(!wr(p.type,[Mn(xt),rt,xt]))return u.error(`Expected first argument to be of type array or string, but found ${On(p.type)} instead`);if(i.length===4){const S=u.parse(i[3],3,Pe);return S?new mc(p.type,p,g,S):null}return new mc(p.type,p,g)}evaluate(i){const u=this.input.evaluate(i),p=this.beginIndex.evaluate(i);if(!ye(u,["string","array"]))throw new ri(`Expected first argument to be of type array or string, but found ${On(jr(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(i);return u.slice(p,g)}return u.slice(p)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function ud(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function cd(s,i,u,p){return p.compare(i,u)===0}function Pl(s,i,u){const p=s!=="=="&&s!=="!=";return class mF{constructor(S,C,T){this.type=bt,this.lhs=S,this.rhs=C,this.collator=T,this.hasUntypedArgument=S.type.kind==="value"||C.type.kind==="value"}static parse(S,C){if(S.length!==3&&S.length!==4)return C.error("Expected two or three arguments.");const T=S[0];let M=C.parse(S[1],1,xt);if(!M)return null;if(!ud(T,M.type))return C.concat(1).error(`"${T}" comparisons are not supported for type '${On(M.type)}'.`);let B=C.parse(S[2],2,xt);if(!B)return null;if(!ud(T,B.type))return C.concat(2).error(`"${T}" comparisons are not supported for type '${On(B.type)}'.`);if(M.type.kind!==B.type.kind&&M.type.kind!=="value"&&B.type.kind!=="value")return C.error(`Cannot compare types '${On(M.type)}' and '${On(B.type)}'.`);p&&(M.type.kind==="value"&&B.type.kind!=="value"?M=new Yo(B.type,[M]):M.type.kind!=="value"&&B.type.kind==="value"&&(B=new Yo(M.type,[B])));let j=null;if(S.length===4){if(M.type.kind!=="string"&&B.type.kind!=="string"&&M.type.kind!=="value"&&B.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(j=C.parse(S[3],3,$n),!j)return null}return new mF(M,B,j)}evaluate(S){const C=this.lhs.evaluate(S),T=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const M=jr(C),B=jr(T);if(M.kind!==B.kind||M.kind!=="string"&&M.kind!=="number")throw new ri(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${M.kind}, ${B.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const M=jr(C),B=jr(T);if(M.kind!=="string"||B.kind!=="string")return i(S,C,T)}return this.collator?u(S,C,T,this.collator.evaluate(S)):i(S,C,T)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const hd=Pl("==",function(s,i,u){return i===u},cd),ym=Pl("!=",function(s,i,u){return i!==u},function(s,i,u,p){return!cd(0,i,u,p)}),Ei=Pl("<",function(s,i,u){return i<u},function(s,i,u,p){return p.compare(i,u)<0}),Kh=Pl(">",function(s,i,u){return i>u},function(s,i,u,p){return p.compare(i,u)>0}),Us=Pl("<=",function(s,i,u){return i<=u},function(s,i,u,p){return p.compare(i,u)<=0}),fd=Pl(">=",function(s,i,u){return i>=u},function(s,i,u,p){return p.compare(i,u)>=0});class pu{constructor(i,u,p,g,S){this.type=rt,this.number=i,this.locale=u,this.currency=p,this.minFractionDigits=g,this.maxFractionDigits=S}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const p=u.parse(i[1],1,Pe);if(!p)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let S=null;if(g.locale&&(S=u.parse(g.locale,1,rt),!S))return null;let C=null;if(g.currency&&(C=u.parse(g.currency,1,rt),!C))return null;let T=null;if(g["min-fraction-digits"]&&(T=u.parse(g["min-fraction-digits"],1,Pe),!T))return null;let M=null;return g["max-fraction-digits"]&&(M=u.parse(g["max-fraction-digits"],1,Pe),!M)?null:new pu(p,S,C,T,M)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Wi{constructor(i){this.type=jn,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const g=[];let S=!1;for(let C=1;C<=i.length-1;++C){const T=i[C];if(S&&typeof T=="object"&&!Array.isArray(T)){S=!1;let M=null;if(T["font-scale"]&&(M=u.parse(T["font-scale"],1,Pe),!M))return null;let B=null;if(T["text-font"]&&(B=u.parse(T["text-font"],1,Mn(rt)),!B))return null;let j=null;if(T["text-color"]&&(j=u.parse(T["text-color"],1,vn),!j))return null;const H=g[g.length-1];H.scale=M,H.font=B,H.textColor=j}else{const M=u.parse(i[C],1,xt);if(!M)return null;const B=M.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,g.push({content:M,scale:null,font:null,textColor:null})}}return new Wi(g)}evaluate(i){return new pr(this.sections.map(u=>{const p=u.content.evaluate(i);return jr(p)===_r?new Lr("",p,null,null,null):new Lr(Sl(p),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}}class gc{constructor(i){this.type=_r,this.input=i}static parse(i,u){if(i.length!==2)return u.error("Expected two arguments.");const p=u.parse(i[1],1,rt);return p?new gc(p):u.error("No image name provided.")}evaluate(i){const u=this.input.evaluate(i),p=Fo.fromString(u);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(u)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}}class yc{constructor(i){this.type=Pe,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=u.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${On(p.type)} instead.`):new yc(p):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new ri(`Expected value to be of type string or array, but found ${On(jr(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const js={"==":hd,"!=":ym,">":Kh,"<":Ei,">=":fd,"<=":Us,array:Yo,at:Zh,boolean:Yo,case:Vn,coalesce:dc,collator:as,format:Wi,image:gc,in:mr,"index-of":er,interpolate:bo,"interpolate-hcl":bo,"interpolate-lab":bo,length:yc,let:pc,literal:is,match:Tl,number:Yo,"number-format":pu,object:Yo,slice:mc,step:fu,string:Yo,"to-boolean":Oa,"to-color":Oa,"to-number":Oa,"to-string":Oa,var:Ns,within:ls};function Xh(s,[i,u,p,g]){i=i.evaluate(s),u=u.evaluate(s),p=p.evaluate(s);const S=g?g.evaluate(s):1,C=sd(i,u,p,S);if(C)throw new ri(C);return new wn(i/255,u/255,p/255,S,!1)}function Yh(s,i){return s in i}function _c(s,i){const u=i[s];return u===void 0?null:u}function ii(s){return{type:s}}function dd(s){return{result:"success",value:s}}function ki(s){return{result:"error",value:s}}function Il(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Jh(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function pa(s){return!!s.expression&&s.expression.interpolated}function qn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Ml(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Ir(s){return s}function Fa(s,i){const u=i.type==="color",p=s.stops&&typeof s.stops[0][0]=="object",g=p||!(p||s.property!==void 0),S=s.type||(pa(i)?"exponential":"interval");if(u||i.type==="padding"){const j=u?wn.parse:Pr.parse;(s=ti({},s)).stops&&(s.stops=s.stops.map(H=>[H[0],j(H[1])])),s.default=j(s.default?s.default:i.default)}if(s.colorSpace&&(C=s.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var C;let T,M,B;if(S==="exponential")T=vc;else if(S==="interval")T=Qh;else if(S==="categorical"){T=_m,M=Object.create(null);for(const j of s.stops)M[j[0]]=j[1];B=typeof s.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);T=vm}if(p){const j={},H=[];for(let re=0;re<s.stops.length;re++){const ge=s.stops[re],ve=ge[0].zoom;j[ve]===void 0&&(j[ve]={zoom:ve,type:s.type,property:s.property,default:s.default,stops:[]},H.push(ve)),j[ve].stops.push([ge[0].value,ge[1]])}const J=[];for(const re of H)J.push([j[re].zoom,Fa(j[re],i)]);const te={name:"linear"};return{kind:"composite",interpolationType:te,interpolationFactor:bo.interpolationFactor.bind(void 0,te),zoomStops:J.map(re=>re[0]),evaluate:({zoom:re},ge)=>vc({stops:J,base:s.base},i,re).evaluate(re,ge)}}if(g){const j=S==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:bo.interpolationFactor.bind(void 0,j),zoomStops:s.stops.map(H=>H[0]),evaluate:({zoom:H})=>T(s,i,H,M,B)}}return{kind:"source",evaluate(j,H){const J=H&&H.properties?H.properties[s.property]:void 0;return J===void 0?Vs(s.default,i.default):T(s,i,J,M,B)}}}function Vs(s,i,u){return s!==void 0?s:i!==void 0?i:u!==void 0?u:void 0}function _m(s,i,u,p,g){return Vs(typeof u===g?p[u]:void 0,s.default,i.default)}function Qh(s,i,u){if(qn(u)!=="number")return Vs(s.default,i.default);const p=s.stops.length;if(p===1||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[p-1][0])return s.stops[p-1][1];const g=fc(s.stops.map(S=>S[0]),u);return s.stops[g][1]}function vc(s,i,u){const p=s.base!==void 0?s.base:1;if(qn(u)!=="number")return Vs(s.default,i.default);const g=s.stops.length;if(g===1||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[g-1][0])return s.stops[g-1][1];const S=fc(s.stops.map(j=>j[0]),u),C=function(j,H,J,te){const re=te-J,ge=j-J;return re===0?0:H===1?ge/re:(Math.pow(H,ge)-1)/(Math.pow(H,re)-1)}(u,p,s.stops[S][0],s.stops[S+1][0]),T=s.stops[S][1],M=s.stops[S+1][1],B=Hi[i.type]||Ir;return typeof T.evaluate=="function"?{evaluate(...j){const H=T.evaluate.apply(void 0,j),J=M.evaluate.apply(void 0,j);if(H!==void 0&&J!==void 0)return B(H,J,C,s.colorSpace)}}:B(T,M,C,s.colorSpace)}function vm(s,i,u){switch(i.type){case"color":u=wn.parse(u);break;case"formatted":u=pr.fromString(u.toString());break;case"resolvedImage":u=Fo.fromString(u.toString());break;case"padding":u=Pr.parse(u);break;default:qn(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0)}return Vs(u,s.default,i.default)}xo.register(js,{error:[{kind:"error"},[rt],(s,[i])=>{throw new ri(i.evaluate(s))}],typeof:[rt,[xt],(s,[i])=>On(jr(i.evaluate(s)))],"to-rgba":[Mn(Pe,4),[vn],(s,[i])=>{const[u,p,g,S]=i.evaluate(s).rgb;return[255*u,255*p,255*g,S]}],rgb:[vn,[Pe,Pe,Pe],Xh],rgba:[vn,[Pe,Pe,Pe,Pe],Xh],has:{type:bt,overloads:[[[rt],(s,[i])=>Yh(i.evaluate(s),s.properties())],[[rt,Wt],(s,[i,u])=>Yh(i.evaluate(s),u.evaluate(s))]]},get:{type:xt,overloads:[[[rt],(s,[i])=>_c(i.evaluate(s),s.properties())],[[rt,Wt],(s,[i,u])=>_c(i.evaluate(s),u.evaluate(s))]]},"feature-state":[xt,[rt],(s,[i])=>_c(i.evaluate(s),s.featureState||{})],properties:[Wt,[],s=>s.properties()],"geometry-type":[rt,[],s=>s.geometryType()],id:[xt,[],s=>s.id()],zoom:[Pe,[],s=>s.globals.zoom],"heatmap-density":[Pe,[],s=>s.globals.heatmapDensity||0],"line-progress":[Pe,[],s=>s.globals.lineProgress||0],accumulated:[xt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Pe,ii(Pe),(s,i)=>{let u=0;for(const p of i)u+=p.evaluate(s);return u}],"*":[Pe,ii(Pe),(s,i)=>{let u=1;for(const p of i)u*=p.evaluate(s);return u}],"-":{type:Pe,overloads:[[[Pe,Pe],(s,[i,u])=>i.evaluate(s)-u.evaluate(s)],[[Pe],(s,[i])=>-i.evaluate(s)]]},"/":[Pe,[Pe,Pe],(s,[i,u])=>i.evaluate(s)/u.evaluate(s)],"%":[Pe,[Pe,Pe],(s,[i,u])=>i.evaluate(s)%u.evaluate(s)],ln2:[Pe,[],()=>Math.LN2],pi:[Pe,[],()=>Math.PI],e:[Pe,[],()=>Math.E],"^":[Pe,[Pe,Pe],(s,[i,u])=>Math.pow(i.evaluate(s),u.evaluate(s))],sqrt:[Pe,[Pe],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Pe,[Pe],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Pe,[Pe],(s,[i])=>Math.log(i.evaluate(s))],log2:[Pe,[Pe],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Pe,[Pe],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Pe,[Pe],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Pe,[Pe],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Pe,[Pe],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Pe,[Pe],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Pe,[Pe],(s,[i])=>Math.atan(i.evaluate(s))],min:[Pe,ii(Pe),(s,i)=>Math.min(...i.map(u=>u.evaluate(s)))],max:[Pe,ii(Pe),(s,i)=>Math.max(...i.map(u=>u.evaluate(s)))],abs:[Pe,[Pe],(s,[i])=>Math.abs(i.evaluate(s))],round:[Pe,[Pe],(s,[i])=>{const u=i.evaluate(s);return u<0?-Math.round(-u):Math.round(u)}],floor:[Pe,[Pe],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Pe,[Pe],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[bt,[rt,xt],(s,[i,u])=>s.properties()[i.value]===u.value],"filter-id-==":[bt,[xt],(s,[i])=>s.id()===i.value],"filter-type-==":[bt,[rt],(s,[i])=>s.geometryType()===i.value],"filter-<":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p<g}],"filter-id-<":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u<p}],"filter->":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p>g}],"filter-id->":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u>p}],"filter-<=":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p<=g}],"filter-id-<=":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u<=p}],"filter->=":[bt,[rt,xt],(s,[i,u])=>{const p=s.properties()[i.value],g=u.value;return typeof p==typeof g&&p>=g}],"filter-id->=":[bt,[xt],(s,[i])=>{const u=s.id(),p=i.value;return typeof u==typeof p&&u>=p}],"filter-has":[bt,[xt],(s,[i])=>i.value in s.properties()],"filter-has-id":[bt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[bt,[Mn(rt)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[bt,[Mn(xt)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[bt,[rt,Mn(xt)],(s,[i,u])=>u.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[bt,[rt,Mn(xt)],(s,[i,u])=>function(p,g,S,C){for(;S<=C;){const T=S+C>>1;if(g[T]===p)return!0;g[T]>p?C=T-1:S=T+1}return!1}(s.properties()[i.value],u.value,0,u.value.length-1)],all:{type:bt,overloads:[[[bt,bt],(s,[i,u])=>i.evaluate(s)&&u.evaluate(s)],[ii(bt),(s,i)=>{for(const u of i)if(!u.evaluate(s))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],(s,[i,u])=>i.evaluate(s)||u.evaluate(s)],[ii(bt),(s,i)=>{for(const u of i)if(u.evaluate(s))return!0;return!1}]]},"!":[bt,[bt],(s,[i])=>!i.evaluate(s)],"is-supported-script":[bt,[rt],(s,[i])=>{const u=s.globals&&s.globals.isSupportedScript;return!u||u(i.evaluate(s))}],upcase:[rt,[rt],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[rt,[rt],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[rt,ii(xt),(s,i)=>i.map(u=>Sl(u.evaluate(s))).join("")],"resolved-locale":[rt,[$n],(s,[i])=>i.evaluate(s).resolvedLocale()]});class ef{constructor(i,u){var p;this.expression=i,this._warningHistory={},this._evaluator=new cu,this._defaultValue=u?(p=u).type==="color"&&Ml(p.default)?new wn(0,0,0,0):p.type==="color"?wn.parse(p.default)||null:p.type==="padding"?Pr.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(i,u,p,g,S,C){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=g,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(i,u,p,g,S,C){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=g,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ri(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function mu(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in js}function qs(s,i){const u=new os(js,cc,[],i?function(g){const S={color:vn,string:rt,number:Pe,enum:rt,boolean:bt,formatted:jn,padding:bn,resolvedImage:_r};return g.type==="array"?Mn(S[g.value]||xt,g.length):S[g.type]}(i):void 0),p=u.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?dd(new ef(p,i)):ki(u.errors)}class hr{constructor(i,u){this.kind=i,this._styleExpression=u,this.isStateDependent=i!=="constant"&&!El(u.expression)}evaluateWithoutErrorHandling(i,u,p,g,S,C){return this._styleExpression.evaluateWithoutErrorHandling(i,u,p,g,S,C)}evaluate(i,u,p,g,S,C){return this._styleExpression.evaluate(i,u,p,g,S,C)}}class tf{constructor(i,u,p,g){this.kind=i,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!El(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,u,p,g,S,C){return this._styleExpression.evaluateWithoutErrorHandling(i,u,p,g,S,C)}evaluate(i,u,p,g,S,C){return this._styleExpression.evaluate(i,u,p,g,S,C)}interpolationFactor(i,u,p){return this.interpolationType?bo.interpolationFactor(this.interpolationType,i,u,p):0}}function Pn(s,i){const u=qs(s,i);if(u.result==="error")return u;const p=u.value.expression,g=hc(p);if(!g&&!Il(i))return ki([new We("","data expressions not supported")]);const S=kl(p,["zoom"]);if(!S&&!Jh(i))return ki([new We("","zoom expressions not supported")]);const C=or(p);return C||S?C instanceof We?ki([C]):C instanceof bo&&!pa(i)?ki([new We("",'"interpolate" expressions cannot be used with this property')]):dd(C?new tf(g?"camera":"composite",u.value,C.labels,C instanceof bo?C.interpolation:void 0):new hr(g?"constant":"source",u.value)):ki([new We("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gs{constructor(i,u){this._parameters=i,this._specification=u,ti(this,Fa(this._parameters,this._specification))}static deserialize(i){return new Gs(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function or(s){let i=null;if(s instanceof pc)i=or(s.result);else if(s instanceof dc){for(const u of s.args)if(i=or(u),i)break}else(s instanceof fu||s instanceof bo)&&s.input instanceof xo&&s.input.name==="zoom"&&(i=s);return i instanceof We||s.eachChild(u=>{const p=or(u);p instanceof We?i=p:!i&&p?i=new We("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new We("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function ar(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!ar(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const gu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xc(s){if(s==null)return{filter:()=>!0,needGeometry:!1};ar(s)||(s=wc(s));const i=qs(s,gu);if(i.result==="error")throw new Error(i.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,p,g)=>i.value.evaluate(u,p,{},g),needGeometry:bc(s)}}function nf(s,i){return s<i?-1:s>i?1:0}function bc(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(bc(s[i]))return!0;return!1}function wc(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?Sc(s[1],s[2],"=="):i==="!="?Ra(Sc(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Sc(s[1],s[2],i):i==="any"?(u=s.slice(1),["any"].concat(u.map(wc))):i==="all"?["all"].concat(s.slice(1).map(wc)):i==="none"?["all"].concat(s.slice(1).map(wc).map(Ra)):i==="in"?Zi(s[1],s.slice(2)):i==="!in"?Ra(Zi(s[1],s.slice(2))):i==="has"?yu(s[1]):i==="!has"?Ra(yu(s[1])):i!=="within"||s;var u}function Sc(s,i,u){switch(s){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,s,i]}}function Zi(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",s,["literal",i.sort(nf)]]:["filter-in-small",s,["literal",i]]}}function yu(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ra(s){return["!",s]}function _u(s){const i=typeof s;if(i==="number"||i==="boolean"||i==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const S of s)g+=`${_u(S)},`;return`${g}]`}const u=Object.keys(s).sort();let p="{";for(let g=0;g<u.length;g++)p+=`${JSON.stringify(u[g])}:${_u(s[u[g]])},`;return`${p}}`}function Cc(s){let i="";for(const u of yr)i+=`/${_u(s[u])}`;return i}function pd(s){const i=s.value;return i?[new vt(s.key,i,"constants have been deprecated as of v8")]:[]}function Vr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Hs(s){if(Array.isArray(s))return s.map(Hs);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const u in s)i[u]=Hs(s[u]);return i}return Vr(s)}function Ro(s){const i=s.key,u=s.value,p=s.valueSpec||{},g=s.objectElementValidators||{},S=s.style,C=s.styleSpec,T=s.validateSpec;let M=[];const B=qn(u);if(B!=="object")return[new vt(i,u,`object expected, ${B} found`)];for(const j in u){const H=j.split(".")[0],J=p[H]||p["*"];let te;if(g[H])te=g[H];else if(p[H])te=T;else if(g["*"])te=g["*"];else{if(!p["*"]){M.push(new vt(i,u[j],`unknown property "${j}"`));continue}te=T}M=M.concat(te({key:(i&&`${i}.`)+j,value:u[j],valueSpec:J,style:S,styleSpec:C,object:u,objectKey:j,validateSpec:T},u))}for(const j in p)g[j]||p[j].required&&p[j].default===void 0&&u[j]===void 0&&M.push(new vt(i,u,`missing required property "${j}"`));return M}function md(s){const i=s.value,u=s.valueSpec,p=s.style,g=s.styleSpec,S=s.key,C=s.arrayElementValidator||s.validateSpec;if(qn(i)!=="array")return[new vt(S,i,`array expected, ${qn(i)} found`)];if(u.length&&i.length!==u.length)return[new vt(S,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new vt(S,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let T={type:u.value,values:u.values};g.$version<7&&(T.function=u.function),qn(u.value)==="object"&&(T=u.value);let M=[];for(let B=0;B<i.length;B++)M=M.concat(C({array:i,arrayIndex:B,value:i[B],valueSpec:T,validateSpec:s.validateSpec,style:p,styleSpec:g,key:`${S}[${B}]`}));return M}function us(s){const i=s.key,u=s.value,p=s.valueSpec;let g=qn(u);return g==="number"&&u!=u&&(g="NaN"),g!=="number"?[new vt(i,u,`number expected, ${g} found`)]:"minimum"in p&&u<p.minimum?[new vt(i,u,`${u} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&u>p.maximum?[new vt(i,u,`${u} is greater than the maximum value ${p.maximum}`)]:[]}function gd(s){const i=s.valueSpec,u=Vr(s.value.type);let p,g,S,C={};const T=u!=="categorical"&&s.value.property===void 0,M=!T,B=qn(s.value.stops)==="array"&&qn(s.value.stops[0])==="array"&&qn(s.value.stops[0][0])==="object",j=Ro({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(te){if(u==="identity")return[new vt(te.key,te.value,'identity function may not have a "stops" property')];let re=[];const ge=te.value;return re=re.concat(md({key:te.key,value:ge,valueSpec:te.valueSpec,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:H})),qn(ge)==="array"&&ge.length===0&&re.push(new vt(te.key,ge,"array must have at least one stop")),re},default:function(te){return te.validateSpec({key:te.key,value:te.value,valueSpec:i,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec})}}});return u==="identity"&&T&&j.push(new vt(s.key,s.value,'missing required property "property"')),u==="identity"||s.value.stops||j.push(new vt(s.key,s.value,'missing required property "stops"')),u==="exponential"&&s.valueSpec.expression&&!pa(s.valueSpec)&&j.push(new vt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(M&&!Il(s.valueSpec)?j.push(new vt(s.key,s.value,"property functions not supported")):T&&!Jh(s.valueSpec)&&j.push(new vt(s.key,s.value,"zoom functions not supported"))),u!=="categorical"&&!B||s.value.property!==void 0||j.push(new vt(s.key,s.value,'"property" property is required')),j;function H(te){let re=[];const ge=te.value,ve=te.key;if(qn(ge)!=="array")return[new vt(ve,ge,`array expected, ${qn(ge)} found`)];if(ge.length!==2)return[new vt(ve,ge,`array length 2 expected, length ${ge.length} found`)];if(B){if(qn(ge[0])!=="object")return[new vt(ve,ge,`object expected, ${qn(ge[0])} found`)];if(ge[0].zoom===void 0)return[new vt(ve,ge,"object stop key must have zoom")];if(ge[0].value===void 0)return[new vt(ve,ge,"object stop key must have value")];if(S&&S>Vr(ge[0].zoom))return[new vt(ve,ge[0].zoom,"stop zoom values must appear in ascending order")];Vr(ge[0].zoom)!==S&&(S=Vr(ge[0].zoom),g=void 0,C={}),re=re.concat(Ro({key:`${ve}[0]`,value:ge[0],valueSpec:{zoom:{}},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:us,value:J}}))}else re=re.concat(J({key:`${ve}[0]`,value:ge[0],valueSpec:{},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec},ge));return mu(Hs(ge[1]))?re.concat([new vt(`${ve}[1]`,ge[1],"expressions are not allowed in function stops.")]):re.concat(te.validateSpec({key:`${ve}[1]`,value:ge[1],valueSpec:i,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec}))}function J(te,re){const ge=qn(te.value),ve=Vr(te.value),pe=te.value!==null?te.value:re;if(p){if(ge!==p)return[new vt(te.key,pe,`${ge} stop domain type must match previous stop domain type ${p}`)]}else p=ge;if(ge!=="number"&&ge!=="string"&&ge!=="boolean")return[new vt(te.key,pe,"stop domain value must be a number, string, or boolean")];if(ge!=="number"&&u!=="categorical"){let $e=`number expected, ${ge} found`;return Il(i)&&u===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(te.key,pe,$e)]}return u!=="categorical"||ge!=="number"||isFinite(ve)&&Math.floor(ve)===ve?u!=="categorical"&&ge==="number"&&g!==void 0&&ve<g?[new vt(te.key,pe,"stop domain values must appear in ascending order")]:(g=ve,u==="categorical"&&ve in C?[new vt(te.key,pe,"stop domain values must be unique")]:(C[ve]=!0,[])):[new vt(te.key,pe,`integer expected, found ${ve}`)]}}function Ll(s){const i=(s.expressionContext==="property"?Pn:qs)(Hs(s.value),s.valueSpec);if(i.result==="error")return i.value.map(p=>new vt(`${s.key}${p.key}`,s.value,p.message));const u=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!u.outputDefined())return[new vt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!El(u))return[new vt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!El(u))return[new vt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!kl(u,["zoom","feature-state"]))return[new vt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!hc(u))return[new vt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ws(s){const i=s.key,u=s.value,p=s.valueSpec,g=[];return Array.isArray(p.values)?p.values.indexOf(Vr(u))===-1&&g.push(new vt(i,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(Vr(u))===-1&&g.push(new vt(i,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function vu(s){return ar(Hs(s.value))?Ll(ti({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Do(s)}function Do(s){const i=s.value,u=s.key;if(qn(i)!=="array")return[new vt(u,i,`array expected, ${qn(i)} found`)];const p=s.styleSpec;let g,S=[];if(i.length<1)return[new vt(u,i,"filter array must have at least 1 element")];switch(S=S.concat(Ws({key:`${u}[0]`,value:i[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),Vr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Vr(i[1])==="$type"&&S.push(new vt(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&S.push(new vt(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=qn(i[1]),g!=="string"&&S.push(new vt(`${u}[1]`,i[1],`string expected, ${g} found`)));for(let C=2;C<i.length;C++)g=qn(i[C]),Vr(i[1])==="$type"?S=S.concat(Ws({key:`${u}[${C}]`,value:i[C],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&S.push(new vt(`${u}[${C}]`,i[C],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let C=1;C<i.length;C++)S=S.concat(Do({key:`${u}[${C}]`,value:i[C],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=qn(i[1]),i.length!==2?S.push(new vt(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&S.push(new vt(`${u}[1]`,i[1],`string expected, ${g} found`));break;case"within":g=qn(i[1]),i.length!==2?S.push(new vt(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="object"&&S.push(new vt(`${u}[1]`,i[1],`object expected, ${g} found`))}return S}function xu(s,i){const u=s.key,p=s.validateSpec,g=s.style,S=s.styleSpec,C=s.value,T=s.objectKey,M=S[`${i}_${s.layerType}`];if(!M)return[];const B=T.match(/^(.*)-transition$/);if(i==="paint"&&B&&M[B[1]]&&M[B[1]].transition)return p({key:u,value:C,valueSpec:S.transition,style:g,styleSpec:S});const j=s.valueSpec||M[T];if(!j)return[new vt(u,C,`unknown property "${T}"`)];let H;if(qn(C)==="string"&&Il(j)&&!j.tokens&&(H=/^{([^}]+)}$/.exec(C)))return[new vt(u,C,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const J=[];return s.layerType==="symbol"&&(T==="text-field"&&g&&!g.glyphs&&J.push(new vt(u,C,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Ml(Hs(C))&&Vr(C.type)==="identity"&&J.push(new vt(u,C,'"text-font" does not support identity functions'))),J.concat(p({key:s.key,value:C,valueSpec:j,style:g,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:T}))}function rf(s){return xu(s,"paint")}function yd(s){return xu(s,"layout")}function Ec(s){let i=[];const u=s.value,p=s.key,g=s.style,S=s.styleSpec;u.type||u.ref||i.push(new vt(p,u,'either "type" or "ref" is required'));let C=Vr(u.type);const T=Vr(u.ref);if(u.id){const M=Vr(u.id);for(let B=0;B<s.arrayIndex;B++){const j=g.layers[B];Vr(j.id)===M&&i.push(new vt(p,u.id,`duplicate layer id "${u.id}", previously used at line ${j.id.__line__}`))}}if("ref"in u){let M;["type","source","source-layer","filter","layout"].forEach(B=>{B in u&&i.push(new vt(p,u[B],`"${B}" is prohibited for ref layers`))}),g.layers.forEach(B=>{Vr(B.id)===T&&(M=B)}),M?M.ref?i.push(new vt(p,u.ref,"ref cannot reference another ref layer")):C=Vr(M.type):i.push(new vt(p,u.ref,`ref layer "${T}" not found`))}else if(C!=="background")if(u.source){const M=g.sources&&g.sources[u.source],B=M&&Vr(M.type);M?B==="vector"&&C==="raster"?i.push(new vt(p,u.source,`layer "${u.id}" requires a raster source`)):B==="raster"&&C!=="raster"?i.push(new vt(p,u.source,`layer "${u.id}" requires a vector source`)):B!=="vector"||u["source-layer"]?B==="raster-dem"&&C!=="hillshade"?i.push(new vt(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!u.paint||!u.paint["line-gradient"]||B==="geojson"&&M.lineMetrics||i.push(new vt(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new vt(p,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new vt(p,u.source,`source "${u.source}" not found`))}else i.push(new vt(p,u,'missing required property "source"'));return i=i.concat(Ro({key:p,value:u,valueSpec:S.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:u.type,valueSpec:S.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:u,objectKey:"type"}),filter:vu,layout:M=>Ro({layer:u,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":B=>yd(ti({layerType:C},B))}}),paint:M=>Ro({layer:u,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":B=>rf(ti({layerType:C},B))}})}})),i}function Ki(s){const i=s.value,u=s.key,p=qn(i);return p!=="string"?[new vt(u,i,`string expected, ${p} found`)]:[]}const io={promoteId:function({key:s,value:i}){if(qn(i)==="string")return Ki({key:s,value:i});{const u=[];for(const p in i)u.push(...Ki({key:`${s}.${p}`,value:i[p]}));return u}}};function bu(s){const i=s.value,u=s.key,p=s.styleSpec,g=s.style,S=s.validateSpec;if(!i.type)return[new vt(u,i,'"type" is required')];const C=Vr(i.type);let T;switch(C){case"vector":case"raster":case"raster-dem":return T=Ro({key:u,value:i,valueSpec:p[`source_${C.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:io,validateSpec:S}),T;case"geojson":if(T=Ro({key:u,value:i,valueSpec:p.source_geojson,style:g,styleSpec:p,validateSpec:S,objectElementValidators:io}),i.cluster)for(const M in i.clusterProperties){const[B,j]=i.clusterProperties[M],H=typeof B=="string"?[B,["accumulated"],["get",M]]:B;T.push(...Ll({key:`${u}.${M}.map`,value:j,validateSpec:S,expressionContext:"cluster-map"})),T.push(...Ll({key:`${u}.${M}.reduce`,value:H,validateSpec:S,expressionContext:"cluster-reduce"}))}return T;case"video":return Ro({key:u,value:i,valueSpec:p.source_video,style:g,validateSpec:S,styleSpec:p});case"image":return Ro({key:u,value:i,valueSpec:p.source_image,style:g,validateSpec:S,styleSpec:p});case"canvas":return[new vt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ws({key:`${u}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:S,styleSpec:p})}}function _d(s){const i=s.value,u=s.styleSpec,p=u.light,g=s.style;let S=[];const C=qn(i);if(i===void 0)return S;if(C!=="object")return S=S.concat([new vt("light",i,`object expected, ${C} found`)]),S;for(const T in i){const M=T.match(/^(.*)-transition$/);S=S.concat(M&&p[M[1]]&&p[M[1]].transition?s.validateSpec({key:T,value:i[T],valueSpec:u.transition,validateSpec:s.validateSpec,style:g,styleSpec:u}):p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],validateSpec:s.validateSpec,style:g,styleSpec:u}):[new vt(T,i[T],`unknown property "${T}"`)])}return S}function wu(s){const i=s.value,u=s.styleSpec,p=u.terrain,g=s.style;let S=[];const C=qn(i);if(i===void 0)return S;if(C!=="object")return S=S.concat([new vt("terrain",i,`object expected, ${C} found`)]),S;for(const T in i)S=S.concat(p[T]?s.validateSpec({key:T,value:i[T],valueSpec:p[T],validateSpec:s.validateSpec,style:g,styleSpec:u}):[new vt(T,i[T],`unknown property "${T}"`)]);return S}function vd(s){let i=[];const u=s.value,p=s.key;if(Array.isArray(u)){const g=[],S=[];for(const C in u)u[C].id&&g.includes(u[C].id)&&i.push(new vt(p,u,`all the sprites' ids must be unique, but ${u[C].id} is duplicated`)),g.push(u[C].id),u[C].url&&S.includes(u[C].url)&&i.push(new vt(p,u,`all the sprites' URLs must be unique, but ${u[C].url} is duplicated`)),S.push(u[C].url),i=i.concat(Ro({key:`${p}[${C}]`,value:u[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return i}return Ki({key:p,value:u})}const xd={"*":()=>[],array:md,boolean:function(s){const i=s.value,u=s.key,p=qn(i);return p!=="boolean"?[new vt(u,i,`boolean expected, ${p} found`)]:[]},number:us,color:function(s){const i=s.key,u=s.value,p=qn(u);return p!=="string"?[new vt(i,u,`color expected, ${p} found`)]:wn.parse(String(u))?[]:[new vt(i,u,`color expected, "${u}" found`)]},constants:pd,enum:Ws,filter:vu,function:gd,layer:Ec,object:Ro,source:bu,light:_d,terrain:wu,string:Ki,formatted:function(s){return Ki(s).length===0?[]:Ll(s)},resolvedImage:function(s){return Ki(s).length===0?[]:Ll(s)},padding:function(s){const i=s.key,u=s.value;if(qn(u)==="array"){if(u.length<1||u.length>4)return[new vt(i,u,`padding requires 1 to 4 values; ${u.length} values found`)];const p={type:"number"};let g=[];for(let S=0;S<u.length;S++)g=g.concat(s.validateSpec({key:`${i}[${S}]`,value:u[S],validateSpec:s.validateSpec,valueSpec:p}));return g}return us({key:i,value:u,valueSpec:{}})},sprite:vd};function Su(s){const i=s.value,u=s.valueSpec,p=s.styleSpec;return s.validateSpec=Su,u.expression&&Ml(Vr(i))?gd(s):u.expression&&mu(Hs(i))?Ll(s):u.type&&xd[u.type]?xd[u.type](s):Ro(ti({},s,{valueSpec:u.type?p[u.type]:u}))}function Zs(s){const i=s.value,u=s.key,p=Ki(s);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new vt(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new vt(u,i,'"glyphs" url must include a "{range}" token'))),p}function ze(s,i=Je){let u=[];return u=u.concat(Su({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,validateSpec:Su,objectElementValidators:{glyphs:Zs,"*":()=>[]}})),s.constants&&(u=u.concat(pd({key:"constants",value:s.constants,style:s,styleSpec:i,validateSpec:Su}))),Ye(u)}function Qe(s){return function(i){return s({...i,validateSpec:Su})}}function Ye(s){return[].concat(s).sort((i,u)=>i.line-u.line)}function Tt(s){return function(...i){return Ye(s.apply(this,i))}}ze.source=Tt(Qe(bu)),ze.sprite=Tt(Qe(vd)),ze.glyphs=Tt(Qe(Zs)),ze.light=Tt(Qe(_d)),ze.terrain=Tt(Qe(wu)),ze.layer=Tt(Qe(Ec)),ze.filter=Tt(Qe(vu)),ze.paintProperty=Tt(Qe(rf)),ze.layoutProperty=Tt(Qe(yd));const ln=ze,tr=ln.light,oi=ln.paintProperty,gr=ln.layoutProperty;function cs(s,i){let u=!1;if(i&&i.length)for(const p of i)s.fire(new Bn(new Error(p.message))),u=!0;return u}class Cu{constructor(i,u,p){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const C=new Int32Array(this.arrayBuffer);i=C[0],this.d=(u=C[1])+2*(p=C[2]);for(let M=0;M<this.d*this.d;M++){const B=C[3+M],j=C[3+M+1];g.push(B===j?null:C.subarray(B,j))}const T=C[3+g.length+1];this.keys=C.subarray(C[3+g.length],T),this.bboxes=C.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*p;for(let C=0;C<this.d*this.d;C++)g.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=i,this.padding=p,this.scale=u/i,this.uid=0;const S=p/u*i;this.min=-S,this.max=i+S}insert(i,u,p,g,S){this._forEachCell(u,p,g,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,u,p,g,S,C){this.cells[S].push(C)}query(i,u,p,g,S){const C=this.min,T=this.max;if(i<=C&&u<=C&&T<=p&&T<=g&&!S)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(i,u,p,g,this._queryCell,M,{},S),M}}_queryCell(i,u,p,g,S,C,T,M){const B=this.cells[S];if(B!==null){const j=this.keys,H=this.bboxes;for(let J=0;J<B.length;J++){const te=B[J];if(T[te]===void 0){const re=4*te;(M?M(H[re+0],H[re+1],H[re+2],H[re+3]):i<=H[re+2]&&u<=H[re+3]&&p>=H[re+0]&&g>=H[re+1])?(T[te]=!0,C.push(j[te])):T[te]=!1}}}}_forEachCell(i,u,p,g,S,C,T,M){const B=this._convertToCellCoord(i),j=this._convertToCellCoord(u),H=this._convertToCellCoord(p),J=this._convertToCellCoord(g);for(let te=B;te<=H;te++)for(let re=j;re<=J;re++){const ge=this.d*re+te;if((!M||M(this._convertFromCellCoord(te),this._convertFromCellCoord(re),this._convertFromCellCoord(te+1),this._convertFromCellCoord(re+1)))&&S.call(this,i,u,p,g,ge,C,T,M))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,u=3+this.cells.length+1+1;let p=0;for(let C=0;C<this.cells.length;C++)p+=this.cells[C].length;const g=new Int32Array(u+p+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let S=u;for(let C=0;C<i.length;C++){const T=i[C];g[3+C]=S,g.set(T,S),S+=T.length}return g[3+i.length]=S,g.set(this.keys,S),S+=this.keys.length,g[3+i.length+1]=S,g.set(this.bboxes,S),S+=this.bboxes.length,g.buffer}static serialize(i,u){const p=i.toArrayBuffer();return u&&u.push(p),{buffer:p}}static deserialize(i){return new Cu(i.buffer)}}const qr={};function Bt(s,i,u={}){if(qr[s])throw new Error(`${s} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:s,writeable:!1}),qr[s]={klass:i,omit:u.omit||[],shallow:u.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Cu),Bt("Color",wn),Bt("Error",Error),Bt("AJAXError",X),Bt("ResolvedImage",Fo),Bt("StylePropertyFunction",Gs),Bt("StyleExpression",ef,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",tf),Bt("ZoomConstantExpression",hr),Bt("CompoundExpression",xo,{omit:["_evaluate"]});for(const s in js)js[s]._classRegistryKey||Bt(`Expression_${s}`,js[s]);function kc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ma(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(kc(s)||At(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const u=s;return i&&i.push(u.buffer),u}if(s instanceof ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const u=[];for(const p of s)u.push(ma(p,i));return u}if(typeof s=="object"){const u=s.constructor,p=u._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!qr[p])throw new Error(`${p} is not registered.`);const g=u.serialize?u.serialize(s,i):{};if(u.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in s){if(!s.hasOwnProperty(S)||qr[p].omit.indexOf(S)>=0)continue;const C=s[S];g[S]=qr[p].shallow.indexOf(S)>=0?C:ma(C,i)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(g.$name=p),g}throw new Error("can't serialize object of type "+typeof s)}function zo(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||kc(s)||At(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(zo);if(typeof s=="object"){const i=s.$name||"Object";if(!qr[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:u}=qr[i];if(!u)throw new Error(`can't deserialize unregistered class ${i}`);if(u.deserialize)return u.deserialize(s);const p=Object.create(u.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const S=s[g];p[g]=qr[i].shallow.indexOf(g)>=0?S:zo(S)}return p}throw new Error("can't deserialize object of type "+typeof s)}class Eu{constructor(){this.first=!0}update(i,u){const p=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=p,!0))}}const ht={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Ac(s){for(const i of s)if(Pc(i.charCodeAt(0)))return!0;return!1}function Tc(s){for(const i of s)if(!ku(i.charCodeAt(0)))return!1;return!0}function ku(s){return!(ht.Arabic(s)||ht["Arabic Supplement"](s)||ht["Arabic Extended-A"](s)||ht["Arabic Presentation Forms-A"](s)||ht["Arabic Presentation Forms-B"](s))}function Pc(s){return!(s!==746&&s!==747&&(s<4352||!(ht["Bopomofo Extended"](s)||ht.Bopomofo(s)||ht["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||ht["CJK Compatibility Ideographs"](s)||ht["CJK Compatibility"](s)||ht["CJK Radicals Supplement"](s)||ht["CJK Strokes"](s)||!(!ht["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||ht["CJK Unified Ideographs Extension A"](s)||ht["CJK Unified Ideographs"](s)||ht["Enclosed CJK Letters and Months"](s)||ht["Hangul Compatibility Jamo"](s)||ht["Hangul Jamo Extended-A"](s)||ht["Hangul Jamo Extended-B"](s)||ht["Hangul Jamo"](s)||ht["Hangul Syllables"](s)||ht.Hiragana(s)||ht["Ideographic Description Characters"](s)||ht.Kanbun(s)||ht["Kangxi Radicals"](s)||ht["Katakana Phonetic Extensions"](s)||ht.Katakana(s)&&s!==12540||!(!ht["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!ht["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||ht["Unified Canadian Aboriginal Syllabics"](s)||ht["Unified Canadian Aboriginal Syllabics Extended"](s)||ht["Vertical Forms"](s)||ht["Yijing Hexagram Symbols"](s)||ht["Yi Syllables"](s)||ht["Yi Radicals"](s))))}function bd(s){return!(Pc(s)||function(i){return!!(ht["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ht["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ht["Letterlike Symbols"](i)||ht["Number Forms"](i)||ht["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ht["Control Pictures"](i)&&i!==9251||ht["Optical Character Recognition"](i)||ht["Enclosed Alphanumerics"](i)||ht["Geometric Shapes"](i)||ht["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ht["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ht["CJK Symbols and Punctuation"](i)||ht.Katakana(i)||ht["Private Use Area"](i)||ht["CJK Compatibility Forms"](i)||ht["Small Form Variants"](i)||ht["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function Ic(s){return s>=1424&&s<=2303||ht["Arabic Presentation Forms-A"](s)||ht["Arabic Presentation Forms-B"](s)}function Ks(s,i){return!(!i&&Ic(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||ht.Khmer(s))}function Da(s){for(const i of s)if(Ic(i.charCodeAt(0)))return!0;return!1}const Ol="deferred",Au="loading",Fl="loaded";let Rl=null,Xi="unavailable",Jo=null;const of=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(Xi="error"),Rl&&Rl(s)};function Xs(){ga.fire(new Qn("pluginStateChange",{pluginStatus:Xi,pluginURL:Jo}))}const ga=new Qr,Dl=function(){return Xi},wd=function(){if(Xi!==Ol||!Jo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xi=Au,Xs(),Jo&&Dt({url:Jo},s=>{s?of(s):(Xi=Fl,Xs())})},Bo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Xi===Fl||Bo.applyArabicShaping!=null,isLoading:()=>Xi===Au,setState(s){if(!Ge())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Xi=s.pluginStatus,Jo=s.pluginURL},isParsed(){if(!Ge())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Bo.applyArabicShaping!=null&&Bo.processBidirectionalText!=null&&Bo.processStyledBidirectionalText!=null},getPluginURL(){if(!Ge())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Jo}};class Sr{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Eu,this.transition={})}isSupportedScript(i){return function(u,p){for(const g of u)if(!Ks(g.charCodeAt(0),p))return!1;return!0}(i,Bo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,u=i-Math.floor(i),p=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}}}class Ys{constructor(i,u){this.property=i,this.value=u,this.expression=function(p,g){if(Ml(p))return new Gs(p,g);if(mu(p)){const S=Pn(p,g);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=p;return g.type==="color"&&typeof p=="string"?S=wn.parse(p):g.type!=="padding"||typeof p!="number"&&!Array.isArray(p)||(S=Pr.parse(p)),{kind:"constant",evaluate:()=>S}}}(u===void 0?i.specification.default:u,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,p){return this.property.possiblyEvaluate(this,i,u,p)}}class zl{constructor(i){this.property=i,this.value=new Ys(i,void 0)}transitioned(i,u){return new Tu(this.property,this.value,u,G({},i.transition,this.transition),i.now)}untransitioned(){return new Tu(this.property,this.value,null,{},0)}}class Mc{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return le(this._values[i].value.value)}setValue(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new zl(this._values[i].property)),this._values[i].value=new Ys(this._values[i].property,u===null?void 0:le(u))}getTransition(i){return le(this._values[i].transition)}setTransition(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new zl(this._values[i].property)),this._values[i].transition=le(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(i[u]=p);const g=this.getTransition(u);g!==void 0&&(i[`${u}-transition`]=g)}return i}transitioned(i,u){const p=new af(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].transitioned(i,u._values[g]);return p}untransitioned(){const i=new af(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class Tu{constructor(i,u,p,g,S){this.property=i,this.value=u,this.begin=S+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=p)}possiblyEvaluate(i,u,p){const g=i.now||0,S=this.value.possiblyEvaluate(i,u,p),C=this.prior;if(C){if(g>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(g<this.begin)return C.possiblyEvaluate(i,u,p);{const T=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(i,u,p),S,function(M){if(M<=0)return 0;if(M>=1)return 1;const B=M*M,j=B*M;return 4*(M<.5?j:3*(M-B)+j-.75)}(T))}}return S}}class af{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,p){const g=new zr(this._properties);for(const S of Object.keys(this._values))g._values[S]=this._values[S].possiblyEvaluate(i,u,p);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class sf{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return le(this._values[i].value)}setValue(i,u){this._values[i]=new Ys(this._values[i].property,u===null?void 0:le(u))}serialize(){const i={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(i[u]=p)}return i}possiblyEvaluate(i,u,p){const g=new zr(this._properties);for(const S of Object.keys(this._values))g._values[S]=this._values[S].possiblyEvaluate(i,u,p);return g}}class ya{constructor(i,u,p){this.property=i,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,p,g){return this.property.evaluate(this.value,this.parameters,i,u,p,g)}}class zr{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Lt{constructor(i){this.specification=i}possiblyEvaluate(i,u){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(u)}interpolate(i,u,p){const g=Hi[this.specification.type];return g?g(i,u,p):i}}class en{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,p,g){return new ya(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},p,g)}:i.expression,u)}interpolate(i,u,p){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new ya(this,{kind:"constant",value:void 0},i.parameters);const g=Hi[this.specification.type];if(g){const S=g(i.value.value,u.value.value,p);return new ya(this,{kind:"constant",value:S},i.parameters)}return i}evaluate(i,u,p,g,S,C){return i.kind==="constant"?i.value:i.evaluate(u,p,g,S,C)}}class Lc extends en{possiblyEvaluate(i,u,p,g){if(i.value===void 0)return new ya(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){const S=i.expression.evaluate(u,null,{},p,g),C=i.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,T=this._calculate(C,C,C,u);return new ya(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){const S=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new ya(this,{kind:"constant",value:S},u)}return new ya(this,i.expression,u)}evaluate(i,u,p,g,S,C){if(i.kind==="source"){const T=i.evaluate(u,p,g,S,C);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},p,g),i.evaluate({zoom:Math.floor(u.zoom)},p,g),i.evaluate({zoom:Math.floor(u.zoom)+1},p,g),u):i.value}_calculate(i,u,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:p,to:u}}interpolate(i){return i}}class Oc{constructor(i){this.specification=i}possiblyEvaluate(i,u,p,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const S=i.expression.evaluate(u,null,{},p,g);return this._calculate(S,S,S,u)}return this._calculate(i.expression.evaluate(new Sr(Math.floor(u.zoom-1),u)),i.expression.evaluate(new Sr(Math.floor(u.zoom),u)),i.expression.evaluate(new Sr(Math.floor(u.zoom+1),u)),u)}}_calculate(i,u,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:p,to:u}}interpolate(i){return i}}class lf{constructor(i){this.specification=i}possiblyEvaluate(i,u,p,g){return!!i.expression.evaluate(u,null,{},p,g)}interpolate(){return!1}}class Mi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in i){const p=i[u];p.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new Ys(p,void 0),S=this.defaultTransitionablePropertyValues[u]=new zl(p);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate({})}}}Bt("DataDrivenProperty",en),Bt("DataConstantProperty",Lt),Bt("CrossFadedDataDrivenProperty",Lc),Bt("CrossFadedProperty",Oc),Bt("ColorRampProperty",lf);const Bl="-transition";class $o extends Qr{constructor(i,u){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new sf(u.layout)),u.paint)){this._transitionablePaint=new Mc(u.paint);for(const p in i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(const p in i.layout)this.setLayoutProperty(p,i.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u,p={}){u!=null&&this._validate(gr,`layers.${this.id}.layout.${i}`,i,u,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)}getPaintProperty(i){return i.endsWith(Bl)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u,p={}){if(u!=null&&this._validate(oi,`layers.${this.id}.paint.${i}`,i,u,p))return!1;if(i.endsWith(Bl))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;{const g=this._transitionablePaint._values[i],S=g.property.specification["property-type"]==="cross-faded-data-driven",C=g.value.isDataDriven(),T=g.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);const M=this._transitionablePaint._values[i].value;return M.isDataDriven()||C||S||this._handleOverridablePaintPropertyUpdate(i,T,M)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,u,p){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),K(i,(u,p)=>!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length))}_validate(i,u,p,g,S={}){return(!S||S.validate!==!1)&&cs(this,i.call(ln,{key:u,layerType:this.type,objectKey:p,value:g,styleSpec:Je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof ya&&Il(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const Qo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hs{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Or(s,i=1){let u=0,p=0;return{members:s.map(g=>{const S=Qo[g.type].BYTES_PER_ELEMENT,C=u=fs(u,Math.max(i,S)),T=g.components||1;return p=Math.max(p,S),u+=S*T,{name:g.name,type:g.type,components:T,offset:C}}),size:fs(u,Math.max(p,i)),alignment:i}}function fs(s,i){return Math.ceil(s/i)*i}class Pu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const g=2*i;return this.int16[g+0]=u,this.int16[g+1]=p,i}}Pu.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",Pu);class Fc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=3*i;return this.int16[S+0]=u,this.int16[S+1]=p,this.int16[S+2]=g,i}}Fc.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Fc);class _a extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,g)}emplace(i,u,p,g,S){const C=4*i;return this.int16[C+0]=u,this.int16[C+1]=p,this.int16[C+2]=g,this.int16[C+3]=S,i}}_a.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",_a);class Rc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,p,g,S,C)}emplace(i,u,p,g,S,C,T){const M=6*i;return this.int16[M+0]=u,this.int16[M+1]=p,this.int16[M+2]=g,this.int16[M+3]=S,this.int16[M+4]=C,this.int16[M+5]=T,i}}Rc.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",Rc);class Iu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,p,g,S,C)}emplace(i,u,p,g,S,C,T){const M=4*i,B=8*i;return this.int16[M+0]=u,this.int16[M+1]=p,this.uint8[B+4]=g,this.uint8[B+5]=S,this.uint8[B+6]=C,this.uint8[B+7]=T,i}}Iu.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",Iu);class za extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const g=2*i;return this.float32[g+0]=u,this.float32[g+1]=p,i}}za.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",za);class Ba extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j){const H=this.length;return this.resize(H+1),this.emplace(H,i,u,p,g,S,C,T,M,B,j)}emplace(i,u,p,g,S,C,T,M,B,j,H){const J=10*i;return this.uint16[J+0]=u,this.uint16[J+1]=p,this.uint16[J+2]=g,this.uint16[J+3]=S,this.uint16[J+4]=C,this.uint16[J+5]=T,this.uint16[J+6]=M,this.uint16[J+7]=B,this.uint16[J+8]=j,this.uint16[J+9]=H,i}}Ba.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",Ba);class Dc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j,H,J){const te=this.length;return this.resize(te+1),this.emplace(te,i,u,p,g,S,C,T,M,B,j,H,J)}emplace(i,u,p,g,S,C,T,M,B,j,H,J,te){const re=12*i;return this.int16[re+0]=u,this.int16[re+1]=p,this.int16[re+2]=g,this.int16[re+3]=S,this.uint16[re+4]=C,this.uint16[re+5]=T,this.uint16[re+6]=M,this.uint16[re+7]=B,this.int16[re+8]=j,this.int16[re+9]=H,this.int16[re+10]=J,this.int16[re+11]=te,i}}Dc.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",Dc);class ie extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=3*i;return this.float32[S+0]=u,this.float32[S+1]=p,this.float32[S+2]=g,i}}ie.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",ie);class No extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}No.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",No);class $l extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B){const j=this.length;return this.resize(j+1),this.emplace(j,i,u,p,g,S,C,T,M,B)}emplace(i,u,p,g,S,C,T,M,B,j){const H=10*i,J=5*i;return this.int16[H+0]=u,this.int16[H+1]=p,this.int16[H+2]=g,this.int16[H+3]=S,this.int16[H+4]=C,this.int16[H+5]=T,this.uint32[J+3]=M,this.uint16[H+8]=B,this.uint16[H+9]=j,i}}$l.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",$l);class Yi extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,p,g,S,C)}emplace(i,u,p,g,S,C,T){const M=6*i;return this.int16[M+0]=u,this.int16[M+1]=p,this.int16[M+2]=g,this.int16[M+3]=S,this.int16[M+4]=C,this.int16[M+5]=T,i}}Yi.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",Yi);class Sn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S){const C=this.length;return this.resize(C+1),this.emplace(C,i,u,p,g,S)}emplace(i,u,p,g,S,C){const T=4*i,M=8*i;return this.float32[T+0]=u,this.float32[T+1]=p,this.float32[T+2]=g,this.int16[M+6]=S,this.int16[M+7]=C,i}}Sn.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",Sn);class uf extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,g)}emplace(i,u,p,g,S){const C=12*i,T=3*i;return this.uint8[C+0]=u,this.uint8[C+1]=p,this.float32[T+1]=g,this.float32[T+2]=S,i}}uf.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",uf);class zc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=3*i;return this.uint16[S+0]=u,this.uint16[S+1]=p,this.uint16[S+2]=g,i}}zc.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",zc);class Bc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge,ve,pe){const $e=this.length;return this.resize($e+1),this.emplace($e,i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge,ve,pe)}emplace(i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge,ve,pe,$e){const ke=24*i,Be=12*i,He=48*i;return this.int16[ke+0]=u,this.int16[ke+1]=p,this.uint16[ke+2]=g,this.uint16[ke+3]=S,this.uint32[Be+2]=C,this.uint32[Be+3]=T,this.uint32[Be+4]=M,this.uint16[ke+10]=B,this.uint16[ke+11]=j,this.uint16[ke+12]=H,this.float32[Be+7]=J,this.float32[Be+8]=te,this.uint8[He+36]=re,this.uint8[He+37]=ge,this.uint8[He+38]=ve,this.uint32[Be+10]=pe,this.int16[ke+22]=$e,i}}Bc.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bc);class $a extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge,ve,pe,$e,ke,Be,He,et,Rt,$t,Ft,Pt,wt,Mt){const It=this.length;return this.resize(It+1),this.emplace(It,i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge,ve,pe,$e,ke,Be,He,et,Rt,$t,Ft,Pt,wt,Mt)}emplace(i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge,ve,pe,$e,ke,Be,He,et,Rt,$t,Ft,Pt,wt,Mt,It){const ct=34*i,Yt=17*i;return this.int16[ct+0]=u,this.int16[ct+1]=p,this.int16[ct+2]=g,this.int16[ct+3]=S,this.int16[ct+4]=C,this.int16[ct+5]=T,this.int16[ct+6]=M,this.int16[ct+7]=B,this.uint16[ct+8]=j,this.uint16[ct+9]=H,this.uint16[ct+10]=J,this.uint16[ct+11]=te,this.uint16[ct+12]=re,this.uint16[ct+13]=ge,this.uint16[ct+14]=ve,this.uint16[ct+15]=pe,this.uint16[ct+16]=$e,this.uint16[ct+17]=ke,this.uint16[ct+18]=Be,this.uint16[ct+19]=He,this.uint16[ct+20]=et,this.uint16[ct+21]=Rt,this.uint16[ct+22]=$t,this.uint32[Yt+12]=Ft,this.float32[Yt+13]=Pt,this.float32[Yt+14]=wt,this.float32[Yt+15]=Mt,this.float32[Yt+16]=It,i}}$a.prototype.bytesPerElement=68,Bt("StructArrayLayout8i15ui1ul4f68",$a);class $c extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}$c.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",$c);class Zn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,u,p)}emplace(i,u,p,g){const S=4*i;return this.uint32[2*i+0]=u,this.uint16[S+2]=p,this.uint16[S+3]=g,i}}Zn.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",Zn);class v extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const g=2*i;return this.uint16[g+0]=u,this.uint16[g+1]=p,i}}v.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",v);class o extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}o.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",o);class h extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,g){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,g)}emplace(i,u,p,g,S){const C=4*i;return this.float32[C+0]=u,this.float32[C+1]=p,this.float32[C+2]=g,this.float32[C+3]=S,i}}h.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",h);class m extends hs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}m.prototype.size=20;class _ extends $l{get(i){return new m(this,i)}}Bt("CollisionBoxArray",_);class w extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}w.prototype.size=48;class P extends Bc{get(i){return new w(this,i)}}Bt("PlacedSymbolArray",P);class I extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}I.prototype.size=68;class O extends $a{get(i){return new I(this,i)}}Bt("SymbolInstanceArray",O);class D extends $c{getoffsetX(i){return this.float32[1*i+0]}}Bt("GlyphOffsetArray",D);class U extends Fc{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Bt("SymbolLineVertexArray",U);class V extends hs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}V.prototype.size=8;class ne extends Zn{get(i){return new V(this,i)}}Bt("FeatureIndexArray",ne);class fe extends Pu{}class he extends Pu{}class de extends Pu{}class me extends Rc{}class Me extends Iu{}class je extends za{}class be extends Ba{}class Ue extends Dc{}class Ze extends ie{}class Ke extends No{}class nt extends Yi{}class ut extends uf{}class it extends zc{}class Et extends v{}const Nt=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:xn}=Nt;class _t{constructor(i=[]){this.segments=i}prepareSegment(i,u,p,g){let S=this.segments[this.segments.length-1];return i>_t.MAX_VERTEX_ARRAY_LENGTH&&Le(`Max vertices per segment is ${_t.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!S||S.vertexLength+i>_t.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==g)&&(S={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},g!==void 0&&(S.sortKey=g),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,p,g){return new _t([{vertexOffset:i,primitiveOffset:u,vertexLength:p,primitiveLength:g,vaos:{},sortKey:0}])}}function Xt(s,i){return 256*(s=R(Math.floor(s),0,255))+R(Math.floor(i),0,255)}_t.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",_t);const Ot=Or([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Un={exports:{}},Rn={exports:{}};Rn.exports=function(s,i){var u,p,g,S,C,T,M,B;for(p=s.length-(u=3&s.length),g=i,C=3432918353,T=461845907,B=0;B<p;)M=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24,++B,g=27492+(65535&(S=5*(65535&(g=(g^=M=(65535&(M=(M=(65535&M)*C+(((M>>>16)*C&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(M=0,u){case 3:M^=(255&s.charCodeAt(B+2))<<16;case 2:M^=(255&s.charCodeAt(B+1))<<8;case 1:g^=M=(65535&(M=(M=(65535&(M^=255&s.charCodeAt(B)))*C+(((M>>>16)*C&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var dn=Rn.exports,nn={exports:{}};nn.exports=function(s,i){for(var u,p=s.length,g=i^p,S=0;p>=4;)u=1540483477*(65535&(u=255&s.charCodeAt(S)|(255&s.charCodeAt(++S))<<8|(255&s.charCodeAt(++S))<<16|(255&s.charCodeAt(++S))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++S;switch(p){case 3:g^=(255&s.charCodeAt(S+2))<<16;case 2:g^=(255&s.charCodeAt(S+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(S)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ir=dn,fr=nn.exports;Un.exports=ir,Un.exports.murmur3=ir,Un.exports.murmur2=fr;var Gr=x(Un.exports);class ai{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,u,p,g){this.ids.push(oo(i)),this.positions.push(u,p,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=oo(i);let p=0,g=this.ids.length-1;for(;p<g;){const C=p+g>>1;this.ids[C]>=u?g=C:p=C+1}const S=[];for(;this.ids[p]===u;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(i,u){const p=new Float64Array(i.ids),g=new Uint32Array(i.positions);return Ji(p,g,0,p.length-1),u&&u.push(p.buffer,g.buffer),{ids:p,positions:g}}static deserialize(i){const u=new ai;return u.ids=i.ids,u.positions=i.positions,u.indexed=!0,u}}function oo(s){const i=+s;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Gr(String(s))}function Ji(s,i,u,p){for(;u<p;){const g=s[u+p>>1];let S=u-1,C=p+1;for(;;){do S++;while(s[S]<g);do C--;while(s[C]>g);if(S>=C)break;yi(s,S,C),yi(i,3*S,3*C),yi(i,3*S+1,3*C+1),yi(i,3*S+2,3*C+2)}C-u<p-C?(Ji(s,i,u,C),u=C+1):(Ji(s,i,C+1,p),p=C)}}function yi(s,i,u){const p=s[i];s[i]=s[u],s[u]=p}Bt("FeaturePositionMap",ai);class Li{constructor(i,u){this.gl=i.gl,this.location=u}}class va extends Li{constructor(i,u){super(i,u),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class ds extends Li{constructor(i,u){super(i,u),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Oi extends Li{constructor(i,u){super(i,u),this.current=wn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const si=new Float32Array(16);function cn(s){return[Xt(255*s.r,255*s.g),Xt(255*s.b,255*s.a)]}class Hr{constructor(i,u,p){this.value=i,this.uniformNames=u.map(g=>`u_${g}`),this.type=p}setUniform(i,u,p){i.set(p.constantOr(this.value))}getBinding(i,u,p){return this.type==="color"?new Oi(i,u):new va(i,u)}}class li{constructor(i,u){this.uniformNames=u.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=i.tlbr}setUniform(i,u,p,g){const S=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&i.set(S)}getBinding(i,u,p){return p.substr(0,9)==="u_pattern"?new ds(i,u):new va(i,u)}}class kn{constructor(i,u,p,g){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,u,p,g,S){const C=this.paintVertexArray.length,T=this.expression.evaluate(new Sr(0),u,{},g,[],S);this.paintVertexArray.resize(i),this._setPaintValue(C,i,T)}updatePaintArray(i,u,p,g){const S=this.expression.evaluate({zoom:0},p,g);this._setPaintValue(i,u,S)}_setPaintValue(i,u,p){if(this.type==="color"){const g=cn(p);for(let S=i;S<u;S++)this.paintVertexArray.emplace(S,g[0],g[1])}else{for(let g=i;g<u;g++)this.paintVertexArray.emplace(g,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wr{constructor(i,u,p,g,S,C){this.expression=i,this.uniformNames=u.map(T=>`u_${T}_t`),this.type=p,this.useIntegerZoom=g,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(i,u,p,g,S){const C=this.expression.evaluate(new Sr(this.zoom),u,{},g,[],S),T=this.expression.evaluate(new Sr(this.zoom+1),u,{},g,[],S),M=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(M,i,C,T)}updatePaintArray(i,u,p,g){const S=this.expression.evaluate({zoom:this.zoom},p,g),C=this.expression.evaluate({zoom:this.zoom+1},p,g);this._setPaintValue(i,u,S,C)}_setPaintValue(i,u,p,g){if(this.type==="color"){const S=cn(p),C=cn(g);for(let T=i;T<u;T++)this.paintVertexArray.emplace(T,S[0],S[1],C[0],C[1])}else{for(let S=i;S<u;S++)this.paintVertexArray.emplace(S,p,g);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u){const p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,g=R(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,u,p){return new va(i,u)}}class Fi{constructor(i,u,p,g,S,C){this.expression=i,this.type=u,this.useIntegerZoom=p,this.zoom=g,this.layerId=C,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(i,u,p){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(i,u,p,g,S){this._setPaintValues(i,u,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(i,u,p,g){if(!g||!p)return;const{min:S,mid:C,max:T}=p,M=g[S],B=g[C],j=g[T];if(M&&B&&j)for(let H=i;H<u;H++)this.zoomInPaintVertexArray.emplace(H,B.tl[0],B.tl[1],B.br[0],B.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],B.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,B.tl[0],B.tl[1],B.br[0],B.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],B.pixelRatio,j.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Ot.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Ot.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class xa{constructor(i,u,p){this.binders={},this._buffers=[];const g=[];for(const S in i.paint._values){if(!p(S))continue;const C=i.paint.get(S);if(!(C instanceof ya&&Il(C.property.specification)))continue;const T=Qi(S,i.type),M=C.value,B=C.property.specification.type,j=C.property.useIntegerZoom,H=C.property.specification["property-type"],J=H==="cross-faded"||H==="cross-faded-data-driven";if(M.kind==="constant")this.binders[S]=J?new li(M.value,T):new Hr(M.value,T,B),g.push(`/u_${S}`);else if(M.kind==="source"||J){const te=Nc(S,B,"source");this.binders[S]=J?new Fi(M,B,j,u,te,i.id):new kn(M,T,B,te),g.push(`/a_${S}`)}else{const te=Nc(S,B,"composite");this.binders[S]=new Wr(M,T,B,j,u,te),g.push(`/z_${S}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof kn||u instanceof Wr?u.maxValue:0}populatePaintArrays(i,u,p,g,S){for(const C in this.binders){const T=this.binders[C];(T instanceof kn||T instanceof Wr||T instanceof Fi)&&T.populatePaintArray(i,u,p,g,S)}}setConstantPatternPositions(i,u){for(const p in this.binders){const g=this.binders[p];g instanceof li&&g.setConstantPatternPositions(i,u)}}updatePaintArrays(i,u,p,g,S){let C=!1;for(const T in i){const M=u.getPositions(T);for(const B of M){const j=p.feature(B.index);for(const H in this.binders){const J=this.binders[H];if((J instanceof kn||J instanceof Wr||J instanceof Fi)&&J.expression.isStateDependent===!0){const te=g.paint.get(H);J.expression=te.value,J.updatePaintArray(B.start,B.end,j,i[T],S),C=!0}}}}return C}defines(){const i=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Hr||p instanceof li)&&i.push(...p.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof kn||p instanceof Wr)for(let g=0;g<p.paintVertexAttributes.length;g++)i.push(p.paintVertexAttributes[g].name);else if(p instanceof Fi)for(let g=0;g<Ot.members.length;g++)i.push(Ot.members[g].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Hr||p instanceof li||p instanceof Wr)for(const g of p.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,u){const p=[];for(const g in this.binders){const S=this.binders[g];if(S instanceof Hr||S instanceof li||S instanceof Wr){for(const C of S.uniformNames)if(u[C]){const T=S.getBinding(i,u[C],C);p.push({name:C,property:g,binding:T})}}}return p}setUniforms(i,u,p,g){for(const{name:S,property:C,binding:T}of u)this.binders[C].setUniform(T,g,p.get(C),S)}updatePaintBuffers(i){this._buffers=[];for(const u in this.binders){const p=this.binders[u];if(i&&p instanceof Fi){const g=i.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(p instanceof kn||p instanceof Wr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(i){for(const u in this.binders){const p=this.binders[u];(p instanceof kn||p instanceof Wr||p instanceof Fi)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof kn||u instanceof Wr||u instanceof Fi)&&u.destroy()}}}class ba{constructor(i,u,p=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new xa(g,u,p);this.needsUpload=!1,this._featureMap=new ai,this._bufferOffset=0}populatePaintArrays(i,u,p,g,S,C){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(i,u,g,S,C);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,p,g){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(i,this._featureMap,u,S,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Qi(s,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}function Nc(s,i,u){const p={color:{source:za,composite:h},number:{source:$c,composite:za}},g=function(S){return{"line-pattern":{source:be,composite:be},"fill-pattern":{source:be,composite:be},"fill-extrusion-pattern":{source:be,composite:be}}[S]}(s);return g&&g[u]||p[i][u]}Bt("ConstantBinder",Hr),Bt("CrossFadedConstantBinder",li),Bt("SourceExpressionBinder",kn),Bt("CrossFadedCompositeBinder",Fi),Bt("CompositeExpressionBinder",Wr),Bt("ProgramConfiguration",xa,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",ba);const xr=8192,cf=Math.pow(2,14)-1,Mu=-cf-1;function ea(s){const i=xr/s.extent,u=s.loadGeometry();for(let p=0;p<u.length;p++){const g=u[p];for(let S=0;S<g.length;S++){const C=g[S],T=Math.round(C.x*i),M=Math.round(C.y*i);C.x=R(T,Mu,cf),C.y=R(M,Mu,cf),(T<C.x||T>C.x+1||M<C.y||M>C.y+1)&&Le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Lu(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?ea(s):[]}}function Nl(s,i,u,p,g){s.emplaceBack(2*i+(p+1)/2,2*u+(g+1)/2)}class Sd{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new he,this.indexArray=new it,this.segments=new _t,this.programConfigurations=new ba(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){const g=this.layers[0],S=[];let C=null,T=!1;g.type==="circle"&&(C=g.layout.get("circle-sort-key"),T=!C.isConstant());for(const{feature:M,id:B,index:j,sourceLayerIndex:H}of i){const J=this.layers[0]._featureFilter.needGeometry,te=Lu(M,J);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),te,p))continue;const re=T?C.evaluate(te,{},p):void 0,ge={id:B,properties:M.properties,type:M.type,sourceLayerIndex:H,index:j,geometry:J?te.geometry:ea(M),patterns:{},sortKey:re};S.push(ge)}T&&S.sort((M,B)=>M.sortKey-B.sortKey);for(const M of S){const{geometry:B,index:j,sourceLayerIndex:H}=M,J=i[j].feature;this.addFeature(M,B,j,p),u.featureIndex.insert(J,B,j,H,this.index)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,xn),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,p,g){for(const S of u)for(const C of S){const T=C.x,M=C.y;if(T<0||T>=xr||M<0||M>=xr)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),j=B.vertexLength;Nl(this.layoutVertexArray,T,M,-1,-1),Nl(this.layoutVertexArray,T,M,1,-1),Nl(this.layoutVertexArray,T,M,1,1),Nl(this.layoutVertexArray,T,M,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{},g)}}function k_(s,i){for(let u=0;u<s.length;u++)if(jc(i,s[u]))return!0;for(let u=0;u<i.length;u++)if(jc(s,i[u]))return!0;return!!xm(s,i)}function Lb(s,i,u){return!!jc(s,i)||!!Cd(i,s,u)}function Uc(s,i){if(s.length===1)return T_(i,s[0]);for(let u=0;u<i.length;u++){const p=i[u];for(let g=0;g<p.length;g++)if(jc(s,p[g]))return!0}for(let u=0;u<s.length;u++)if(T_(i,s[u]))return!0;for(let u=0;u<i.length;u++)if(xm(s,i[u]))return!0;return!1}function Ob(s,i,u){if(s.length>1){if(xm(s,i))return!0;for(let p=0;p<i.length;p++)if(Cd(i[p],s,u))return!0}for(let p=0;p<s.length;p++)if(Cd(s[p],i,u))return!0;return!1}function xm(s,i){if(s.length===0||i.length===0)return!1;for(let u=0;u<s.length-1;u++){const p=s[u],g=s[u+1];for(let S=0;S<i.length-1;S++)if(bm(p,g,i[S],i[S+1]))return!0}return!1}function bm(s,i,u,p){return Oe(s,u,p)!==Oe(i,u,p)&&Oe(s,i,u)!==Oe(s,i,p)}function Cd(s,i,u){const p=u*u;if(i.length===1)return s.distSqr(i[0])<p;for(let g=1;g<i.length;g++)if(A_(s,i[g-1],i[g])<p)return!0;return!1}function A_(s,i,u){const p=i.distSqr(u);if(p===0)return s.distSqr(i);const g=((s.x-i.x)*(u.x-i.x)+(s.y-i.y)*(u.y-i.y))/p;return s.distSqr(g<0?i:g>1?u:u.sub(i)._mult(g)._add(i))}function T_(s,i){let u,p,g,S=!1;for(let C=0;C<s.length;C++){u=s[C];for(let T=0,M=u.length-1;T<u.length;M=T++)p=u[T],g=u[M],p.y>i.y!=g.y>i.y&&i.x<(g.x-p.x)*(i.y-p.y)/(g.y-p.y)+p.x&&(S=!S)}return S}function jc(s,i){let u=!1;for(let p=0,g=s.length-1;p<s.length;g=p++){const S=s[p],C=s[g];S.y>i.y!=C.y>i.y&&i.x<(C.x-S.x)*(i.y-S.y)/(C.y-S.y)+S.x&&(u=!u)}return u}function P_(s,i,u){const p=u[0],g=u[2];if(s.x<p.x&&i.x<p.x||s.x>g.x&&i.x>g.x||s.y<p.y&&i.y<p.y||s.y>g.y&&i.y>g.y)return!1;const S=Oe(s,i,u[0]);return S!==Oe(s,i,u[1])||S!==Oe(s,i,u[2])||S!==Oe(s,i,u[3])}function Ou(s,i,u){const p=i.paint.get(s).value;return p.kind==="constant"?p.value:u.programConfigurations.get(i.id).getMaxValue(s)}function Ed(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Vc(s,i,u,p,g){if(!i[0]&&!i[1])return s;const S=A.convert(i)._mult(g);u==="viewport"&&S._rotate(-p);const C=[];for(let T=0;T<s.length;T++)C.push(s[T].sub(S));return C}let wm,Sm;Bt("CircleBucket",Sd,{omit:["layers"]});var I_={get paint(){return Sm=Sm||new Mi({"circle-radius":new en(Je.paint_circle["circle-radius"]),"circle-color":new en(Je.paint_circle["circle-color"]),"circle-blur":new en(Je.paint_circle["circle-blur"]),"circle-opacity":new en(Je.paint_circle["circle-opacity"]),"circle-translate":new Lt(Je.paint_circle["circle-translate"]),"circle-translate-anchor":new Lt(Je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lt(Je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lt(Je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new en(Je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new en(Je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new en(Je.paint_circle["circle-stroke-opacity"])})},get layout(){return wm=wm||new Mi({"circle-sort-key":new en(Je.layout_circle["circle-sort-key"])})}},Ai=1e-6,qc=typeof Float32Array<"u"?Float32Array:Array;function kd(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Cm(s,i,u){var p=i[0],g=i[1],S=i[2],C=i[3],T=i[4],M=i[5],B=i[6],j=i[7],H=i[8],J=i[9],te=i[10],re=i[11],ge=i[12],ve=i[13],pe=i[14],$e=i[15],ke=u[0],Be=u[1],He=u[2],et=u[3];return s[0]=ke*p+Be*T+He*H+et*ge,s[1]=ke*g+Be*M+He*J+et*ve,s[2]=ke*S+Be*B+He*te+et*pe,s[3]=ke*C+Be*j+He*re+et*$e,s[4]=(ke=u[4])*p+(Be=u[5])*T+(He=u[6])*H+(et=u[7])*ge,s[5]=ke*g+Be*M+He*J+et*ve,s[6]=ke*S+Be*B+He*te+et*pe,s[7]=ke*C+Be*j+He*re+et*$e,s[8]=(ke=u[8])*p+(Be=u[9])*T+(He=u[10])*H+(et=u[11])*ge,s[9]=ke*g+Be*M+He*J+et*ve,s[10]=ke*S+Be*B+He*te+et*pe,s[11]=ke*C+Be*j+He*re+et*$e,s[12]=(ke=u[12])*p+(Be=u[13])*T+(He=u[14])*H+(et=u[15])*ge,s[13]=ke*g+Be*M+He*J+et*ve,s[14]=ke*S+Be*B+He*te+et*pe,s[15]=ke*C+Be*j+He*re+et*$e,s}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var hf,M_=Cm;function Ad(s,i,u){var p=i[0],g=i[1],S=i[2],C=i[3];return s[0]=u[0]*p+u[4]*g+u[8]*S+u[12]*C,s[1]=u[1]*p+u[5]*g+u[9]*S+u[13]*C,s[2]=u[2]*p+u[6]*g+u[10]*S+u[14]*C,s[3]=u[3]*p+u[7]*g+u[11]*S+u[15]*C,s}hf=new qc(4),qc!=Float32Array&&(hf[0]=0,hf[1]=0,hf[2]=0,hf[3]=0);class Em extends $o{constructor(i){super(i,I_)}createBucket(i){return new Sd(i)}queryRadius(i){const u=i;return Ou("circle-radius",this,u)+Ou("circle-stroke-width",this,u)+Ed(this.paint.get("circle-translate"))}queryIntersectsFeature(i,u,p,g,S,C,T,M){const B=Vc(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,T),j=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),H=this.paint.get("circle-pitch-alignment")==="map",J=H?B:function(re,ge){return re.map(ve=>km(ve,ge))}(B,M),te=H?j*T:j;for(const re of g)for(const ge of re){const ve=H?ge:km(ge,M);let pe=te;const $e=Ad([],[ge.x,ge.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=$e[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=C.cameraToCenterDistance/$e[3]),Lb(J,ve,pe))return!0}return!1}}function km(s,i){const u=Ad([],[s.x,s.y,0,1],i);return new A(u[0]/u[3],u[1]/u[3])}class Td extends Sd{}let L_;Bt("HeatmapBucket",Td,{omit:["layers"]});var Am={get paint(){return L_=L_||new Mi({"heatmap-radius":new en(Je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new en(Je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lt(Je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lf(Je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lt(Je.paint_heatmap["heatmap-opacity"])})}};function In(s,{width:i,height:u},p,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*u*p)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*u*p}`)}else g=new Uint8Array(i*u*p);return s.width=i,s.height=u,s.data=g,s}function O_(s,{width:i,height:u},p){if(i===s.width&&u===s.height)return;const g=In({},{width:i,height:u},p);Tm(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,i),height:Math.min(s.height,u)},p),s.width=i,s.height=u,s.data=g.data}function Tm(s,i,u,p,g,S){if(g.width===0||g.height===0)return i;if(g.width>s.width||g.height>s.height||u.x>s.width-g.width||u.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||p.x>i.width-g.width||p.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const C=s.data,T=i.data;if(C===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<g.height;M++){const B=((u.y+M)*s.width+u.x)*S,j=((p.y+M)*i.width+p.x)*S;for(let H=0;H<g.width*S;H++)T[j+H]=C[B+H]}return i}class Js{constructor(i,u){In(this,i,1,u)}resize(i){O_(this,i,1)}clone(){return new Js({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,p,g,S){Tm(i,u,p,g,S,1)}}class Uo{constructor(i,u){In(this,i,4,u)}resize(i){O_(this,i,4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Uo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,p,g,S){Tm(i,u,p,g,S,4)}}function F_(s){const i={},u=s.resolution||256,p=s.clips?s.clips.length:1,g=s.image||new Uo({width:u,height:p});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const S=(C,T,M)=>{i[s.evaluationKey]=M;const B=s.expression.evaluate(i);g.data[C+T+0]=Math.floor(255*B.r/B.a),g.data[C+T+1]=Math.floor(255*B.g/B.a),g.data[C+T+2]=Math.floor(255*B.b/B.a),g.data[C+T+3]=Math.floor(255*B.a)};if(s.clips)for(let C=0,T=0;C<p;++C,T+=4*u)for(let M=0,B=0;M<u;M++,B+=4){const j=M/(u-1),{start:H,end:J}=s.clips[C];S(T,B,H*(1-j)+J*j)}else for(let C=0,T=0;C<u;C++,T+=4)S(0,T,C/(u-1));return g}Bt("AlphaImage",Js),Bt("RGBAImage",Uo);class Fb extends $o{createBucket(i){return new Td(i)}constructor(i){super(i,Am),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=F_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ta;var Rb={get paint(){return ta=ta||new Mi({"hillshade-illumination-direction":new Lt(Je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Lt(Je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lt(Je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lt(Je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lt(Je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lt(Je.paint_hillshade["hillshade-accent-color"])})}};class Pd extends $o{constructor(i){super(i,Rb)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Pm=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:R_}=Pm;var Id={exports:{}};function ao(s,i,u){u=u||2;var p,g,S,C,T,M,B,j=i&&i.length,H=j?i[0]*u:s.length,J=Qs(s,0,H,u,!0),te=[];if(!J||J.next===J.prev)return te;if(j&&(J=function(ge,ve,pe,$e){var ke,Be,He,et=[];for(ke=0,Be=ve.length;ke<Be;ke++)(He=Qs(ge,ve[ke]*$e,ke<Be-1?ve[ke+1]*$e:ge.length,$e,!1))===He.next&&(He.steiner=!0),et.push(jl(He));for(et.sort(Mm),ke=0;ke<et.length;ke++)pe=Lm(et[ke],pe);return pe}(s,i,J,u)),s.length>80*u){p=S=s[0],g=C=s[1];for(var re=u;re<H;re+=u)(T=s[re])<p&&(p=T),(M=s[re+1])<g&&(g=M),T>S&&(S=T),M>C&&(C=M);B=(B=Math.max(S-p,C-g))!==0?32767/B:0}return Gc(J,te,u,p,g,B,0),te}function Qs(s,i,u,p,g){var S,C;if(g===wa(s,i,u,p)>0)for(S=i;S<u;S+=p)C=Fm(S,s[S],s[S+1],C);else for(S=u-p;S>=i;S-=p)C=Fm(S,s[S],s[S+1],C);return C&&Ld(C,C.next)&&(Wc(C),C=C.next),C}function el(s,i){if(!s)return s;i||(i=s);var u,p=s;do if(u=!1,p.steiner||!Ld(p,p.next)&&Fr(p.prev,p,p.next)!==0)p=p.next;else{if(Wc(p),(p=i=p.prev)===p.next)break;u=!0}while(u||p!==i);return i}function Gc(s,i,u,p,g,S,C){if(s){!C&&S&&function(j,H,J,te){var re=j;do re.z===0&&(re.z=Om(re.x,re.y,H,J,te)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==j);re.prevZ.nextZ=null,re.prevZ=null,function(ge){var ve,pe,$e,ke,Be,He,et,Rt,$t=1;do{for(pe=ge,ge=null,Be=null,He=0;pe;){for(He++,$e=pe,et=0,ve=0;ve<$t&&(et++,$e=$e.nextZ);ve++);for(Rt=$t;et>0||Rt>0&&$e;)et!==0&&(Rt===0||!$e||pe.z<=$e.z)?(ke=pe,pe=pe.nextZ,et--):(ke=$e,$e=$e.nextZ,Rt--),Be?Be.nextZ=ke:ge=ke,ke.prevZ=Be,Be=ke;pe=$e}Be.nextZ=null,$t*=2}while(He>1)}(re)}(s,p,g,S);for(var T,M,B=s;s.prev!==s.next;)if(T=s.prev,M=s.next,S?D_(s,p,g,S):Md(s))i.push(T.i/u|0),i.push(s.i/u|0),i.push(M.i/u|0),Wc(s),s=M.next,B=M.next;else if((s=M)===B){C?C===1?Gc(s=Im(el(s),i,u),i,u,p,g,S,2):C===2&&z_(s,i,u,p,g,S):Gc(el(s),i,u,p,g,S,1);break}}}function Md(s){var i=s.prev,u=s,p=s.next;if(Fr(i,u,p)>=0)return!1;for(var g=i.x,S=u.x,C=p.x,T=i.y,M=u.y,B=p.y,j=g<S?g<C?g:C:S<C?S:C,H=T<M?T<B?T:B:M<B?M:B,J=g>S?g>C?g:C:S>C?S:C,te=T>M?T>B?T:B:M>B?M:B,re=p.next;re!==i;){if(re.x>=j&&re.x<=J&&re.y>=H&&re.y<=te&&Fu(g,T,S,M,C,B,re.x,re.y)&&Fr(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function D_(s,i,u,p){var g=s.prev,S=s,C=s.next;if(Fr(g,S,C)>=0)return!1;for(var T=g.x,M=S.x,B=C.x,j=g.y,H=S.y,J=C.y,te=T<M?T<B?T:B:M<B?M:B,re=j<H?j<J?j:J:H<J?H:J,ge=T>M?T>B?T:B:M>B?M:B,ve=j>H?j>J?j:J:H>J?H:J,pe=Om(te,re,i,u,p),$e=Om(ge,ve,i,u,p),ke=s.prevZ,Be=s.nextZ;ke&&ke.z>=pe&&Be&&Be.z<=$e;){if(ke.x>=te&&ke.x<=ge&&ke.y>=re&&ke.y<=ve&&ke!==g&&ke!==C&&Fu(T,j,M,H,B,J,ke.x,ke.y)&&Fr(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,Be.x>=te&&Be.x<=ge&&Be.y>=re&&Be.y<=ve&&Be!==g&&Be!==C&&Fu(T,j,M,H,B,J,Be.x,Be.y)&&Fr(Be.prev,Be,Be.next)>=0))return!1;Be=Be.nextZ}for(;ke&&ke.z>=pe;){if(ke.x>=te&&ke.x<=ge&&ke.y>=re&&ke.y<=ve&&ke!==g&&ke!==C&&Fu(T,j,M,H,B,J,ke.x,ke.y)&&Fr(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;Be&&Be.z<=$e;){if(Be.x>=te&&Be.x<=ge&&Be.y>=re&&Be.y<=ve&&Be!==g&&Be!==C&&Fu(T,j,M,H,B,J,Be.x,Be.y)&&Fr(Be.prev,Be,Be.next)>=0)return!1;Be=Be.nextZ}return!0}function Im(s,i,u){var p=s;do{var g=p.prev,S=p.next.next;!Ld(g,S)&&$_(g,p,p.next,S)&&Hc(g,S)&&Hc(S,g)&&(i.push(g.i/u|0),i.push(p.i/u|0),i.push(S.i/u|0),Wc(p),Wc(p.next),p=s=S),p=p.next}while(p!==s);return el(p)}function z_(s,i,u,p,g,S){var C=s;do{for(var T=C.next.next;T!==C.prev;){if(C.i!==T.i&&B_(C,T)){var M=N_(C,T);return C=el(C,C.next),M=el(M,M.next),Gc(C,i,u,p,g,S,0),void Gc(M,i,u,p,g,S,0)}T=T.next}C=C.next}while(C!==s)}function Mm(s,i){return s.x-i.x}function Lm(s,i){var u=function(g,S){var C,T=S,M=g.x,B=g.y,j=-1/0;do{if(B<=T.y&&B>=T.next.y&&T.next.y!==T.y){var H=T.x+(B-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(H<=M&&H>j&&(j=H,C=T.x<T.next.x?T:T.next,H===M))return C}T=T.next}while(T!==S);if(!C)return null;var J,te=C,re=C.x,ge=C.y,ve=1/0;T=C;do M>=T.x&&T.x>=re&&M!==T.x&&Fu(B<ge?M:j,B,re,ge,B<ge?j:M,B,T.x,T.y)&&(J=Math.abs(B-T.y)/(M-T.x),Hc(T,g)&&(J<ve||J===ve&&(T.x>C.x||T.x===C.x&&Ul(C,T)))&&(C=T,ve=J)),T=T.next;while(T!==te);return C}(s,i);if(!u)return i;var p=N_(u,s);return el(p,p.next),el(u,u.next)}function Ul(s,i){return Fr(s.prev,s,i.prev)<0&&Fr(i.next,s,s.next)<0}function Om(s,i,u,p,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-u)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function jl(s){var i=s,u=s;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==s);return u}function Fu(s,i,u,p,g,S,C,T){return(g-C)*(i-T)>=(s-C)*(S-T)&&(s-C)*(p-T)>=(u-C)*(i-T)&&(u-C)*(S-T)>=(g-C)*(p-T)}function B_(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(u,p){var g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==p.i&&g.next.i!==p.i&&$_(g,g.next,u,p))return!0;g=g.next}while(g!==u);return!1}(s,i)&&(Hc(s,i)&&Hc(i,s)&&function(u,p){var g=u,S=!1,C=(u.x+p.x)/2,T=(u.y+p.y)/2;do g.y>T!=g.next.y>T&&g.next.y!==g.y&&C<(g.next.x-g.x)*(T-g.y)/(g.next.y-g.y)+g.x&&(S=!S),g=g.next;while(g!==u);return S}(s,i)&&(Fr(s.prev,s,i.prev)||Fr(s,i.prev,i))||Ld(s,i)&&Fr(s.prev,s,s.next)>0&&Fr(i.prev,i,i.next)>0)}function Fr(s,i,u){return(i.y-s.y)*(u.x-i.x)-(i.x-s.x)*(u.y-i.y)}function Ld(s,i){return s.x===i.x&&s.y===i.y}function $_(s,i,u,p){var g=ff(Fr(s,i,u)),S=ff(Fr(s,i,p)),C=ff(Fr(u,p,s)),T=ff(Fr(u,p,i));return g!==S&&C!==T||!(g!==0||!Od(s,u,i))||!(S!==0||!Od(s,p,i))||!(C!==0||!Od(u,s,p))||!(T!==0||!Od(u,i,p))}function Od(s,i,u){return i.x<=Math.max(s.x,u.x)&&i.x>=Math.min(s.x,u.x)&&i.y<=Math.max(s.y,u.y)&&i.y>=Math.min(s.y,u.y)}function ff(s){return s>0?1:s<0?-1:0}function Hc(s,i){return Fr(s.prev,s,s.next)<0?Fr(s,i,s.next)>=0&&Fr(s,s.prev,i)>=0:Fr(s,i,s.prev)<0||Fr(s,s.next,i)<0}function N_(s,i){var u=new so(s.i,s.x,s.y),p=new so(i.i,i.x,i.y),g=s.next,S=i.prev;return s.next=i,i.prev=s,u.next=g,g.prev=u,p.next=u,u.prev=p,S.next=p,p.prev=S,p}function Fm(s,i,u,p){var g=new so(s,i,u);return p?(g.next=p.next,g.prev=p,p.next.prev=g,p.next=g):(g.prev=g,g.next=g),g}function Wc(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function so(s,i,u){this.i=s,this.x=i,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wa(s,i,u,p){for(var g=0,S=i,C=u-p;S<u;S+=p)g+=(s[C]-s[S])*(s[S+1]+s[C+1]),C=S;return g}Id.exports=ao,Id.exports.default=ao,ao.deviation=function(s,i,u,p){var g=i&&i.length,S=Math.abs(wa(s,0,g?i[0]*u:s.length,u));if(g)for(var C=0,T=i.length;C<T;C++)S-=Math.abs(wa(s,i[C]*u,C<T-1?i[C+1]*u:s.length,u));var M=0;for(C=0;C<p.length;C+=3){var B=p[C]*u,j=p[C+1]*u,H=p[C+2]*u;M+=Math.abs((s[B]-s[H])*(s[j+1]-s[B+1])-(s[B]-s[j])*(s[H+1]-s[B+1]))}return S===0&&M===0?0:Math.abs((M-S)/S)},ao.flatten=function(s){for(var i=s[0][0].length,u={vertices:[],holes:[],dimensions:i},p=0,g=0;g<s.length;g++){for(var S=0;S<s[g].length;S++)for(var C=0;C<i;C++)u.vertices.push(s[g][S][C]);g>0&&u.holes.push(p+=s[g-1].length)}return u};var U_=x(Id.exports);function Db(s,i,u,p,g){df(s,i,u||0,p||s.length-1,g||j_)}function df(s,i,u,p,g){for(;p>u;){if(p-u>600){var S=p-u+1,C=i-u+1,T=Math.log(S),M=.5*Math.exp(2*T/3),B=.5*Math.sqrt(T*M*(S-M)/S)*(C-S/2<0?-1:1);df(s,i,Math.max(u,Math.floor(i-C*M/S+B)),Math.min(p,Math.floor(i+(S-C)*M/S+B)),g)}var j=s[i],H=u,J=p;for(ps(s,u,i),g(s[p],j)>0&&ps(s,u,p);H<J;){for(ps(s,H,J),H++,J--;g(s[H],j)<0;)H++;for(;g(s[J],j)>0;)J--}g(s[u],j)===0?ps(s,u,J):ps(s,++J,p),J<=i&&(u=J+1),i<=J&&(p=J-1)}}function ps(s,i,u){var p=s[i];s[i]=s[u],s[u]=p}function j_(s,i){return s<i?-1:s>i?1:0}function Fd(s,i){const u=s.length;if(u<=1)return[s];const p=[];let g,S;for(let C=0;C<u;C++){const T=Fe(s[C]);T!==0&&(s[C].area=Math.abs(T),S===void 0&&(S=T<0),S===T<0?(g&&p.push(g),g=[s[C]]):g.push(s[C]))}if(g&&p.push(g),i>1)for(let C=0;C<p.length;C++)p[C].length<=i||(Db(p[C],i,1,p[C].length-1,zb),p[C]=p[C].slice(0,i));return p}function zb(s,i){return i.area-s.area}function Rd(s,i,u){const p=u.patternDependencies;let g=!1;for(const S of i){const C=S.paint.get(`${s}-pattern`);C.isConstant()||(g=!0);const T=C.constantOr(null);T&&(g=!0,p[T.to]=!0,p[T.from]=!0)}return g}function Vl(s,i,u,p,g){const S=g.patternDependencies;for(const C of i){const T=C.paint.get(`${s}-pattern`).value;if(T.kind!=="constant"){let M=T.evaluate({zoom:p-1},u,{},g.availableImages),B=T.evaluate({zoom:p},u,{},g.availableImages),j=T.evaluate({zoom:p+1},u,{},g.availableImages);M=M&&M.name?M.name:M,B=B&&B.name?B.name:B,j=j&&j.name?j.name:j,S[M]=!0,S[B]=!0,S[j]=!0,u.patterns[C.id]={min:M,mid:B,max:j}}}return u}class Ru{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new de,this.indexArray=new it,this.indexArray2=new Et,this.programConfigurations=new ba(i.layers,i.zoom),this.segments=new _t,this.segments2=new _t,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){this.hasPattern=Rd("fill",this.layers,u);const g=this.layers[0].layout.get("fill-sort-key"),S=!g.isConstant(),C=[];for(const{feature:T,id:M,index:B,sourceLayerIndex:j}of i){const H=this.layers[0]._featureFilter.needGeometry,J=Lu(T,H);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),J,p))continue;const te=S?g.evaluate(J,{},p,u.availableImages):void 0,re={id:M,properties:T.properties,type:T.type,sourceLayerIndex:j,index:B,geometry:H?J.geometry:ea(T),patterns:{},sortKey:te};C.push(re)}S&&C.sort((T,M)=>T.sortKey-M.sortKey);for(const T of C){const{geometry:M,index:B,sourceLayerIndex:j}=T;if(this.hasPattern){const H=Vl("fill",this.layers,T,this.zoom,u);this.patternFeatures.push(H)}else this.addFeature(T,M,B,p,{});u.featureIndex.insert(i[B].feature,M,B,j,this.index)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}addFeatures(i,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,R_),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,u,p,g,S){for(const C of Fd(u,500)){let T=0;for(const te of C)T+=te.length;const M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),B=M.vertexLength,j=[],H=[];for(const te of C){if(te.length===0)continue;te!==C[0]&&H.push(j.length/2);const re=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),ge=re.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(ge+te.length-1,ge),j.push(te[0].x),j.push(te[0].y);for(let ve=1;ve<te.length;ve++)this.layoutVertexArray.emplaceBack(te[ve].x,te[ve].y),this.indexArray2.emplaceBack(ge+ve-1,ge+ve),j.push(te[ve].x),j.push(te[ve].y);re.vertexLength+=te.length,re.primitiveLength+=te.length}const J=U_(j,H);for(let te=0;te<J.length;te+=3)this.indexArray.emplaceBack(B+J[te],B+J[te+1],B+J[te+2]);M.vertexLength+=T,M.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,g)}}let V_,Rm;Bt("FillBucket",Ru,{omit:["layers","patternFeatures"]});var q_={get paint(){return Rm=Rm||new Mi({"fill-antialias":new Lt(Je.paint_fill["fill-antialias"]),"fill-opacity":new en(Je.paint_fill["fill-opacity"]),"fill-color":new en(Je.paint_fill["fill-color"]),"fill-outline-color":new en(Je.paint_fill["fill-outline-color"]),"fill-translate":new Lt(Je.paint_fill["fill-translate"]),"fill-translate-anchor":new Lt(Je.paint_fill["fill-translate-anchor"]),"fill-pattern":new Lc(Je.paint_fill["fill-pattern"])})},get layout(){return V_=V_||new Mi({"fill-sort-key":new en(Je.layout_fill["fill-sort-key"])})}};class Dd extends $o{constructor(i){super(i,q_)}recalculate(i,u){super.recalculate(i,u);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Ru(i)}queryRadius(){return Ed(this.paint.get("fill-translate"))}queryIntersectsFeature(i,u,p,g,S,C,T){return Uc(Vc(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,T),g)}isTileClipped(){return!0}}const G_=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zd=Or([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Dm}=G_;var Na={},Bb=b,zm=tl;function tl(s,i,u,p,g){this.properties={},this.extent=u,this.type=0,this._pbf=s,this._geometry=-1,this._keys=p,this._values=g,s.readFields(H_,this,i)}function H_(s,i,u){s==1?i.id=u.readVarint():s==2?function(p,g){for(var S=p.readVarint()+p.pos;p.pos<S;){var C=g._keys[p.readVarint()],T=g._values[p.readVarint()];g.properties[C]=T}}(u,i):s==3?i.type=u.readVarint():s==4&&(i._geometry=u.pos)}function Bm(s){for(var i,u,p=0,g=0,S=s.length,C=S-1;g<S;C=g++)p+=((u=s[C]).x-(i=s[g]).x)*(i.y+u.y);return p}tl.types=["Unknown","Point","LineString","Polygon"],tl.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,u=s.readVarint()+s.pos,p=1,g=0,S=0,C=0,T=[];s.pos<u;){if(g<=0){var M=s.readVarint();p=7&M,g=M>>3}if(g--,p===1||p===2)S+=s.readSVarint(),C+=s.readSVarint(),p===1&&(i&&T.push(i),i=[]),i.push(new Bb(S,C));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&T.push(i),T},tl.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,u=1,p=0,g=0,S=0,C=1/0,T=-1/0,M=1/0,B=-1/0;s.pos<i;){if(p<=0){var j=s.readVarint();u=7&j,p=j>>3}if(p--,u===1||u===2)(g+=s.readSVarint())<C&&(C=g),g>T&&(T=g),(S+=s.readSVarint())<M&&(M=S),S>B&&(B=S);else if(u!==7)throw new Error("unknown command "+u)}return[C,M,T,B]},tl.prototype.toGeoJSON=function(s,i,u){var p,g,S=this.extent*Math.pow(2,u),C=this.extent*s,T=this.extent*i,M=this.loadGeometry(),B=tl.types[this.type];function j(te){for(var re=0;re<te.length;re++){var ge=te[re];te[re]=[360*(ge.x+C)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(ge.y+T)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(p=0;p<M.length;p++)H[p]=M[p][0];j(M=H);break;case 2:for(p=0;p<M.length;p++)j(M[p]);break;case 3:for(M=function(te){var re=te.length;if(re<=1)return[te];for(var ge,ve,pe=[],$e=0;$e<re;$e++){var ke=Bm(te[$e]);ke!==0&&(ve===void 0&&(ve=ke<0),ve===ke<0?(ge&&pe.push(ge),ge=[te[$e]]):ge.push(te[$e]))}return ge&&pe.push(ge),pe}(M),p=0;p<M.length;p++)for(g=0;g<M[p].length;g++)j(M[p][g])}M.length===1?M=M[0]:B="Multi"+B;var J={type:"Feature",geometry:{type:B,coordinates:M},properties:this.properties};return"id"in this&&(J.id=this.id),J};var $b=zm,$m=ms;function ms(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(W_,this,i),this.length=this._features.length}function W_(s,i,u){s===15?i.version=u.readVarint():s===1?i.name=u.readString():s===5?i.extent=u.readVarint():s===2?i._features.push(u.pos):s===3?i._keys.push(u.readString()):s===4&&i._values.push(function(p){for(var g=null,S=p.readVarint()+p.pos;p.pos<S;){var C=p.readVarint()>>3;g=C===1?p.readString():C===2?p.readFloat():C===3?p.readDouble():C===4?p.readVarint64():C===5?p.readVarint():C===6?p.readSVarint():C===7?p.readBoolean():null}return g}(u))}ms.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new $b(this._pbf,i,this.extent,this._keys,this._values)};var Z_=$m;function Nb(s,i,u){if(s===3){var p=new Z_(u,u.readVarint()+u.pos);p.length&&(i[p.name]=p)}}Na.VectorTile=function(s,i){this.layers=s.readFields(Nb,{},i)},Na.VectorTileFeature=zm,Na.VectorTileLayer=$m;const K_=Na.VectorTileFeature.types,Nm=Math.pow(2,13);function pf(s,i,u,p,g,S,C,T){s.emplaceBack(i,u,2*Math.floor(p*Nm)+C,g*Nm*2,S*Nm*2,Math.round(T))}class Ua{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new me,this.centroidVertexArray=new fe,this.indexArray=new it,this.programConfigurations=new ba(i.layers,i.zoom),this.segments=new _t,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){this.features=[],this.hasPattern=Rd("fill-extrusion",this.layers,u);for(const{feature:g,id:S,index:C,sourceLayerIndex:T}of i){const M=this.layers[0]._featureFilter.needGeometry,B=Lu(g,M);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),B,p))continue;const j={id:S,sourceLayerIndex:T,index:C,geometry:M?B.geometry:ea(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Vl("fill-extrusion",this.layers,j,this.zoom,u)):this.addFeature(j,j.geometry,C,p,{}),u.featureIndex.insert(g,j.geometry,C,T,this.index,!0)}}addFeatures(i,u,p){for(const g of this.features){const{geometry:S}=g;this.addFeature(g,S,g.index,u,p)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Dm),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,zd.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,u,p,g,S){const C={x:0,y:0,vertexCount:0};for(const T of Fd(u,500)){let M=0;for(const re of T)M+=re.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const re of T){if(re.length===0||jm(re))continue;let ge=0;for(let ve=0;ve<re.length;ve++){const pe=re[ve];if(ve>=1){const $e=re[ve-1];if(!Um(pe,$e)){B.vertexLength+4>_t.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=pe.sub($e)._perp()._unit(),Be=$e.dist(pe);ge+Be>32768&&(ge=0),pf(this.layoutVertexArray,pe.x,pe.y,ke.x,ke.y,0,0,ge),pf(this.layoutVertexArray,pe.x,pe.y,ke.x,ke.y,0,1,ge),C.x+=2*pe.x,C.y+=2*pe.y,C.vertexCount+=2,ge+=Be,pf(this.layoutVertexArray,$e.x,$e.y,ke.x,ke.y,0,0,ge),pf(this.layoutVertexArray,$e.x,$e.y,ke.x,ke.y,0,1,ge),C.x+=2*$e.x,C.y+=2*$e.y,C.vertexCount+=2;const He=B.vertexLength;this.indexArray.emplaceBack(He,He+2,He+1),this.indexArray.emplaceBack(He+1,He+2,He+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+M>_t.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),K_[i.type]!=="Polygon")continue;const j=[],H=[],J=B.vertexLength;for(const re of T)if(re.length!==0){re!==T[0]&&H.push(j.length/2);for(let ge=0;ge<re.length;ge++){const ve=re[ge];pf(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),C.x+=ve.x,C.y+=ve.y,C.vertexCount+=1,j.push(ve.x),j.push(ve.y)}}const te=U_(j,H);for(let re=0;re<te.length;re+=3)this.indexArray.emplaceBack(J+te[re],J+te[re+2],J+te[re+1]);B.primitiveLength+=te.length/3,B.vertexLength+=M}for(let T=0;T<C.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,g)}}function Um(s,i){return s.x===i.x&&(s.x<0||s.x>xr)||s.y===i.y&&(s.y<0||s.y>xr)}function jm(s){return s.every(i=>i.x<0)||s.every(i=>i.x>xr)||s.every(i=>i.y<0)||s.every(i=>i.y>xr)}let Bd;Bt("FillExtrusionBucket",Ua,{omit:["layers","features"]});var $d={get paint(){return Bd=Bd||new Mi({"fill-extrusion-opacity":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new en(Je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Lc(Je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new en(Je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new en(Je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lt(Je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Zc extends $o{constructor(i){super(i,$d)}createBucket(i){return new Ua(i)}queryRadius(){return Ed(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,u,p,g,S,C,T,M){const B=Vc(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,T),j=this.paint.get("fill-extrusion-height").evaluate(u,p),H=this.paint.get("fill-extrusion-base").evaluate(u,p),J=function(re,ge,ve,pe){const $e=[];for(const ke of re){const Be=[ke.x,ke.y,0,1];Ad(Be,Be,ge),$e.push(new A(Be[0]/Be[3],Be[1]/Be[3]))}return $e}(B,M),te=function(re,ge,ve,pe){const $e=[],ke=[],Be=pe[8]*ge,He=pe[9]*ge,et=pe[10]*ge,Rt=pe[11]*ge,$t=pe[8]*ve,Ft=pe[9]*ve,Pt=pe[10]*ve,wt=pe[11]*ve;for(const Mt of re){const It=[],ct=[];for(const Yt of Mt){const qt=Yt.x,Ht=Yt.y,pn=pe[0]*qt+pe[4]*Ht+pe[12],br=pe[1]*qt+pe[5]*Ht+pe[13],ci=pe[2]*qt+pe[6]*Ht+pe[14],Vo=pe[3]*qt+pe[7]*Ht+pe[15],uo=ci+et,Br=Vo+Rt,_i=pn+$t,Ri=br+Ft,co=ci+Pt,vi=Vo+wt,$r=new A((pn+Be)/Br,(br+He)/Br);$r.z=uo/Br,It.push($r);const hi=new A(_i/vi,Ri/vi);hi.z=co/vi,ct.push(hi)}$e.push(It),ke.push(ct)}return[$e,ke]}(g,H,j,M);return function(re,ge,ve){let pe=1/0;Uc(ve,ge)&&(pe=mf(ve,ge[0]));for(let $e=0;$e<ge.length;$e++){const ke=ge[$e],Be=re[$e];for(let He=0;He<ke.length-1;He++){const et=ke[He],Rt=[et,ke[He+1],Be[He+1],Be[He],et];k_(ve,Rt)&&(pe=Math.min(pe,mf(ve,Rt)))}}return pe!==1/0&&pe}(te[0],te[1],J)}}function on(s,i){return s.x*i.x+s.y*i.y}function mf(s,i){if(s.length===1){let u=0;const p=i[u++];let g;for(;!g||p.equals(g);)if(g=i[u++],!g)return 1/0;for(;u<i.length;u++){const S=i[u],C=s[0],T=g.sub(p),M=S.sub(p),B=C.sub(p),j=on(T,T),H=on(T,M),J=on(M,M),te=on(B,T),re=on(B,M),ge=j*J-H*H,ve=(J*te-H*re)/ge,pe=(j*re-H*te)/ge,$e=p.z*(1-ve-pe)+g.z*ve+S.z*pe;if(isFinite($e))return $e}return 1/0}{let u=1/0;for(const p of i)u=Math.min(u,p.z);return u}}const Vm=Or([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Du}=Vm,Ub=Or([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:qm}=Ub,X_=Na.VectorTileFeature.types,lo=Math.cos(Math.PI/180*37.5),Y_=Math.pow(2,14)/.5;class Gm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new je,this.indexArray=new it,this.programConfigurations=new ba(i.layers,i.zoom),this.segments=new _t,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p){this.hasPattern=Rd("line",this.layers,u);const g=this.layers[0].layout.get("line-sort-key"),S=!g.isConstant(),C=[];for(const{feature:T,id:M,index:B,sourceLayerIndex:j}of i){const H=this.layers[0]._featureFilter.needGeometry,J=Lu(T,H);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),J,p))continue;const te=S?g.evaluate(J,{},p):void 0,re={id:M,properties:T.properties,type:T.type,sourceLayerIndex:j,index:B,geometry:H?J.geometry:ea(T),patterns:{},sortKey:te};C.push(re)}S&&C.sort((T,M)=>T.sortKey-M.sortKey);for(const T of C){const{geometry:M,index:B,sourceLayerIndex:j}=T;if(this.hasPattern){const H=Vl("line",this.layers,T,this.zoom,u);this.patternFeatures.push(H)}else this.addFeature(T,M,B,p,{});u.featureIndex.insert(i[B].feature,M,B,j,this.index)}}update(i,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p)}addFeatures(i,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,qm)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Du),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,p,g,S){const C=this.layers[0].layout,T=C.get("line-join").evaluate(i,{}),M=C.get("line-cap"),B=C.get("line-miter-limit"),j=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const H of u)this.addLine(H,i,T,M,B,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,S,g)}addLine(i,u,p,g,S,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<i.length-1;pe++)this.totalDistance+=i[pe].dist(i[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=X_[u.type]==="Polygon";let M=i.length;for(;M>=2&&i[M-1].equals(i[M-2]);)M--;let B=0;for(;B<M-1&&i[B].equals(i[B+1]);)B++;if(M<(T?3:2))return;p==="bevel"&&(S=1.05);const j=this.overscaling<=16?15*xr/(512*this.overscaling):0,H=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let J,te,re,ge,ve;this.e1=this.e2=-1,T&&(J=i[M-2],ve=i[B].sub(J)._unit()._perp());for(let pe=B;pe<M;pe++){if(re=pe===M-1?T?i[B+1]:void 0:i[pe+1],re&&i[pe].equals(re))continue;ve&&(ge=ve),J&&(te=J),J=i[pe],ve=re?re.sub(J)._unit()._perp():ge,ge=ge||ve;let $e=ge.add(ve);$e.x===0&&$e.y===0||$e._unit();const ke=ge.x*ve.x+ge.y*ve.y,Be=$e.x*ve.x+$e.y*ve.y,He=Be!==0?1/Be:1/0,et=2*Math.sqrt(2-2*Be),Rt=Be<lo&&te&&re,$t=ge.x*ve.y-ge.y*ve.x>0;if(Rt&&pe>B){const wt=J.dist(te);if(wt>2*j){const Mt=J.sub(J.sub(te)._mult(j/wt)._round());this.updateDistance(te,Mt),this.addCurrentVertex(Mt,ge,0,0,H),te=Mt}}const Ft=te&&re;let Pt=Ft?p:T?"butt":g;if(Ft&&Pt==="round"&&(He<C?Pt="miter":He<=2&&(Pt="fakeround")),Pt==="miter"&&He>S&&(Pt="bevel"),Pt==="bevel"&&(He>2&&(Pt="flipbevel"),He<S&&(Pt="miter")),te&&this.updateDistance(te,J),Pt==="miter")$e._mult(He),this.addCurrentVertex(J,$e,0,0,H);else if(Pt==="flipbevel"){if(He>100)$e=ve.mult(-1);else{const wt=He*ge.add(ve).mag()/ge.sub(ve).mag();$e._perp()._mult(wt*($t?-1:1))}this.addCurrentVertex(J,$e,0,0,H),this.addCurrentVertex(J,$e.mult(-1),0,0,H)}else if(Pt==="bevel"||Pt==="fakeround"){const wt=-Math.sqrt(He*He-1),Mt=$t?wt:0,It=$t?0:wt;if(te&&this.addCurrentVertex(J,ge,Mt,It,H),Pt==="fakeround"){const ct=Math.round(180*et/Math.PI/20);for(let Yt=1;Yt<ct;Yt++){let qt=Yt/ct;if(qt!==.5){const pn=qt-.5;qt+=qt*pn*(qt-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*pn*pn+(.848013+ke*(.215638*ke-1.06021)))}const Ht=ve.sub(ge)._mult(qt)._add(ge)._unit()._mult($t?-1:1);this.addHalfVertex(J,Ht.x,Ht.y,!1,$t,0,H)}}re&&this.addCurrentVertex(J,ve,-Mt,-It,H)}else if(Pt==="butt")this.addCurrentVertex(J,$e,0,0,H);else if(Pt==="square"){const wt=te?1:-1;this.addCurrentVertex(J,$e,wt,wt,H)}else Pt==="round"&&(te&&(this.addCurrentVertex(J,ge,0,0,H),this.addCurrentVertex(J,ge,1,1,H,!0)),re&&(this.addCurrentVertex(J,ve,-1,-1,H,!0),this.addCurrentVertex(J,ve,0,0,H)));if(Rt&&pe<M-1){const wt=J.dist(re);if(wt>2*j){const Mt=J.add(re.sub(J)._mult(j/wt)._round());this.updateDistance(J,Mt),this.addCurrentVertex(Mt,ve,0,0,H),J=Mt}}}}addCurrentVertex(i,u,p,g,S,C=!1){const T=u.y*g-u.x,M=-u.y-u.x*g;this.addHalfVertex(i,u.x+u.y*p,u.y-u.x*p,C,!1,p,S),this.addHalfVertex(i,T,M,C,!0,-g,S),this.distance>Y_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,u,p,g,S,C))}addHalfVertex({x:i,y:u},p,g,S,C,T,M){const B=.5*(this.lineClips?this.scaledDistance*(Y_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(S?1:0),(u<<1)+(C?1:0),Math.round(63*p)+128,Math.round(63*g)+128,1+(T===0?0:T<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),M.primitiveLength++),C?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,u){this.distance+=i.dist(u),this.updateScaledDistance()}}let Hm,J_;Bt("LineBucket",Gm,{omit:["layers","patternFeatures"]});var Wm={get paint(){return J_=J_||new Mi({"line-opacity":new en(Je.paint_line["line-opacity"]),"line-color":new en(Je.paint_line["line-color"]),"line-translate":new Lt(Je.paint_line["line-translate"]),"line-translate-anchor":new Lt(Je.paint_line["line-translate-anchor"]),"line-width":new en(Je.paint_line["line-width"]),"line-gap-width":new en(Je.paint_line["line-gap-width"]),"line-offset":new en(Je.paint_line["line-offset"]),"line-blur":new en(Je.paint_line["line-blur"]),"line-dasharray":new Oc(Je.paint_line["line-dasharray"]),"line-pattern":new Lc(Je.paint_line["line-pattern"]),"line-gradient":new lf(Je.paint_line["line-gradient"])})},get layout(){return Hm=Hm||new Mi({"line-cap":new Lt(Je.layout_line["line-cap"]),"line-join":new en(Je.layout_line["line-join"]),"line-miter-limit":new Lt(Je.layout_line["line-miter-limit"]),"line-round-limit":new Lt(Je.layout_line["line-round-limit"]),"line-sort-key":new en(Je.layout_line["line-sort-key"])})}};class jb extends en{possiblyEvaluate(i,u){return u=new Sr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(i,u)}evaluate(i,u,p,g){return u=G({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(i,u,p,g)}}let Nd;class Vb extends $o{constructor(i){super(i,Wm),this.gradientVersion=0,Nd||(Nd=new jb(Wm.paint.properties["line-width"].specification),Nd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,u){super.recalculate(i,u),this.paint._values["line-floorwidth"]=Nd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Gm(i)}queryRadius(i){const u=i,p=gs(Ou("line-width",this,u),Ou("line-gap-width",this,u)),g=Ou("line-offset",this,u);return p/2+Math.abs(g)+Ed(this.paint.get("line-translate"))}queryIntersectsFeature(i,u,p,g,S,C,T){const M=Vc(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,T),B=T/2*gs(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),j=this.paint.get("line-offset").evaluate(u,p);return j&&(g=function(H,J){const te=[];for(let re=0;re<H.length;re++){const ge=H[re],ve=[];for(let pe=0;pe<ge.length;pe++){const $e=ge[pe-1],ke=ge[pe],Be=ge[pe+1],He=pe===0?new A(0,0):ke.sub($e)._unit()._perp(),et=pe===ge.length-1?new A(0,0):Be.sub(ke)._unit()._perp(),Rt=He._add(et)._unit(),$t=Rt.x*et.x+Rt.y*et.y;$t!==0&&Rt._mult(1/$t),ve.push(Rt._mult(J)._add(ke))}te.push(ve)}return te}(g,j*T)),function(H,J,te){for(let re=0;re<J.length;re++){const ge=J[re];if(H.length>=3){for(let ve=0;ve<ge.length;ve++)if(jc(H,ge[ve]))return!0}if(Ob(H,ge,te))return!0}return!1}(M,g,B)}isTileClipped(){return!0}}function gs(s,i){return i>0?i+2*s:s}const wo=Or([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zm=Or([{name:"a_projected_pos",components:3,type:"Float32"}],4);Or([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qb=Or([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Or([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ud=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gb=Or([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Hb(s,i,u){return s.sections.forEach(p=>{p.text=function(g,S,C){const T=S.layout.get("text-transform").evaluate(C,{});return T==="uppercase"?g=g.toLocaleUpperCase():T==="lowercase"&&(g=g.toLocaleLowerCase()),Bo.applyArabicShaping&&(g=Bo.applyArabicShaping(g)),g}(p.text,i,u)}),s}Or([{name:"triangle",components:3,type:"Uint16"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Or([{type:"Float32",name:"offsetX"}]),Or([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const nl={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ui=24,Km=sr,Q_=function(s,i,u,p,g){var S,C,T=8*g-p-1,M=(1<<T)-1,B=M>>1,j=-7,H=u?g-1:0,J=u?-1:1,te=s[i+H];for(H+=J,S=te&(1<<-j)-1,te>>=-j,j+=T;j>0;S=256*S+s[i+H],H+=J,j-=8);for(C=S&(1<<-j)-1,S>>=-j,j+=p;j>0;C=256*C+s[i+H],H+=J,j-=8);if(S===0)S=1-B;else{if(S===M)return C?NaN:1/0*(te?-1:1);C+=Math.pow(2,p),S-=B}return(te?-1:1)*C*Math.pow(2,S-p)},e0=function(s,i,u,p,g,S){var C,T,M,B=8*S-g-1,j=(1<<B)-1,H=j>>1,J=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=p?0:S-1,re=p?1:-1,ge=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,C=j):(C=Math.floor(Math.log(i)/Math.LN2),i*(M=Math.pow(2,-C))<1&&(C--,M*=2),(i+=C+H>=1?J/M:J*Math.pow(2,1-H))*M>=2&&(C++,M/=2),C+H>=j?(T=0,C=j):C+H>=1?(T=(i*M-1)*Math.pow(2,g),C+=H):(T=i*Math.pow(2,H-1)*Math.pow(2,g),C=0));g>=8;s[u+te]=255&T,te+=re,T/=256,g-=8);for(C=C<<g|T,B+=g;B>0;s[u+te]=255&C,te+=re,C/=256,B-=8);s[u+te-re]|=128*ge};function sr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}sr.Varint=0,sr.Fixed64=1,sr.Bytes=2,sr.Fixed32=5;var Xm=4294967296,Ym=1/Xm,Jm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function rl(s){return s.type===sr.Bytes?s.readVarint()+s.pos:s.pos+1}function ql(s,i,u){return u?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function Qm(s,i,u){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));u.realloc(p);for(var g=u.pos-1;g>=s;g--)u.buf[g+p]=u.buf[g]}function gf(s,i){for(var u=0;u<s.length;u++)i.writeVarint(s[u])}function eg(s,i){for(var u=0;u<s.length;u++)i.writeSVarint(s[u])}function t0(s,i){for(var u=0;u<s.length;u++)i.writeFloat(s[u])}function n0(s,i){for(var u=0;u<s.length;u++)i.writeDouble(s[u])}function jd(s,i){for(var u=0;u<s.length;u++)i.writeBoolean(s[u])}function r0(s,i){for(var u=0;u<s.length;u++)i.writeFixed32(s[u])}function ys(s,i){for(var u=0;u<s.length;u++)i.writeSFixed32(s[u])}function zu(s,i){for(var u=0;u<s.length;u++)i.writeFixed64(s[u])}function Wb(s,i){for(var u=0;u<s.length;u++)i.writeSFixed64(s[u])}function yf(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function Kc(s,i,u){s[u]=i,s[u+1]=i>>>8,s[u+2]=i>>>16,s[u+3]=i>>>24}function i0(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}sr.prototype={destroy:function(){this.buf=null},readFields:function(s,i,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),g=p>>3,S=this.pos;this.type=7&p,s(g,i,this),this.pos===S&&this.skip(p)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=yf(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=i0(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=yf(this.buf,this.pos)+yf(this.buf,this.pos+4)*Xm;return this.pos+=8,s},readSFixed64:function(){var s=yf(this.buf,this.pos)+i0(this.buf,this.pos+4)*Xm;return this.pos+=8,s},readFloat:function(){var s=Q_(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Q_(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,u,p=this.buf;return i=127&(u=p[this.pos++]),u<128?i:(i|=(127&(u=p[this.pos++]))<<7,u<128?i:(i|=(127&(u=p[this.pos++]))<<14,u<128?i:(i|=(127&(u=p[this.pos++]))<<21,u<128?i:function(g,S,C){var T,M,B=C.buf;if(T=(112&(M=B[C.pos++]))>>4,M<128||(T|=(127&(M=B[C.pos++]))<<3,M<128)||(T|=(127&(M=B[C.pos++]))<<10,M<128)||(T|=(127&(M=B[C.pos++]))<<17,M<128)||(T|=(127&(M=B[C.pos++]))<<24,M<128)||(T|=(1&(M=B[C.pos++]))<<31,M<128))return ql(g,T,S);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(u=p[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&Jm?function(u,p,g){return Jm.decode(u.subarray(p,g))}(this.buf,i,s):function(u,p,g){for(var S="",C=p;C<g;){var T,M,B,j=u[C],H=null,J=j>239?4:j>223?3:j>191?2:1;if(C+J>g)break;J===1?j<128&&(H=j):J===2?(192&(T=u[C+1]))==128&&(H=(31&j)<<6|63&T)<=127&&(H=null):J===3?(M=u[C+2],(192&(T=u[C+1]))==128&&(192&M)==128&&((H=(15&j)<<12|(63&T)<<6|63&M)<=2047||H>=55296&&H<=57343)&&(H=null)):J===4&&(M=u[C+2],B=u[C+3],(192&(T=u[C+1]))==128&&(192&M)==128&&(192&B)==128&&((H=(15&j)<<18|(63&T)<<12|(63&M)<<6|63&B)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,J=1):H>65535&&(H-=65536,S+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),S+=String.fromCharCode(H),C+=J}return S}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==sr.Bytes)return s.push(this.readVarint(i));var u=rl(this);for(s=s||[];this.pos<u;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==sr.Bytes)return s.push(this.readSVarint());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==sr.Bytes)return s.push(this.readBoolean());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==sr.Bytes)return s.push(this.readFloat());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==sr.Bytes)return s.push(this.readDouble());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==sr.Bytes)return s.push(this.readFixed32());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==sr.Bytes)return s.push(this.readSFixed32());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==sr.Bytes)return s.push(this.readFixed64());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==sr.Bytes)return s.push(this.readSFixed64());var i=rl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===sr.Varint)for(;this.buf[this.pos++]>127;);else if(i===sr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===sr.Fixed32)this.pos+=4;else{if(i!==sr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var u=new Uint8Array(i);u.set(this.buf),this.buf=u,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Kc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Kc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Kc(this.buf,-1&s,this.pos),Kc(this.buf,Math.floor(s*Ym),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Kc(this.buf,-1&s,this.pos),Kc(this.buf,Math.floor(s*Ym),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,u){var p,g;if(i>=0?(p=i%4294967296|0,g=i/4294967296|0):(g=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(S,C,T){T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,S>>>=7,T.buf[T.pos++]=127&S|128,T.buf[T.pos]=127&(S>>>=7)}(p,0,u),function(S,C){var T=(7&S)<<4;C.buf[C.pos++]|=T|((S>>>=3)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S|((S>>>=7)?128:0),S&&(C.buf[C.pos++]=127&S)))))}(g,u)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(p,g,S){for(var C,T,M=0;M<g.length;M++){if((C=g.charCodeAt(M))>55295&&C<57344){if(!T){C>56319||M+1===g.length?(p[S++]=239,p[S++]=191,p[S++]=189):T=C;continue}if(C<56320){p[S++]=239,p[S++]=191,p[S++]=189,T=C;continue}C=T-55296<<10|C-56320|65536,T=null}else T&&(p[S++]=239,p[S++]=191,p[S++]=189,T=null);C<128?p[S++]=C:(C<2048?p[S++]=C>>6|192:(C<65536?p[S++]=C>>12|224:(p[S++]=C>>18|240,p[S++]=C>>12&63|128),p[S++]=C>>6&63|128),p[S++]=63&C|128)}return S}(this.buf,s,this.pos);var u=this.pos-i;u>=128&&Qm(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeFloat:function(s){this.realloc(4),e0(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),e0(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var u=0;u<i;u++)this.buf[this.pos++]=s[u]},writeRawMessage:function(s,i){this.pos++;var u=this.pos;s(i,this);var p=this.pos-u;p>=128&&Qm(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(s,i,u){this.writeTag(s,sr.Bytes),this.writeRawMessage(i,u)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,gf,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,eg,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,jd,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,t0,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,n0,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,r0,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,ys,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,zu,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,Wb,i)},writeBytesField:function(s,i){this.writeTag(s,sr.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,sr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,sr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,sr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,sr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,sr.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,sr.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,sr.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,sr.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,sr.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,!!i)}};var tg=x(Km);const ng=3;function Zb(s,i,u){s===1&&u.readMessage(Kb,i)}function Kb(s,i,u){if(s===3){const{id:p,bitmap:g,width:S,height:C,left:T,top:M,advance:B}=u.readMessage(Xb,{});i.push({id:p,bitmap:new Js({width:S+2*ng,height:C+2*ng},g),metrics:{width:S,height:C,left:T,top:M,advance:B}})}}function Xb(s,i,u){s===1?i.id=u.readVarint():s===2?i.bitmap=u.readBytes():s===3?i.width=u.readVarint():s===4?i.height=u.readVarint():s===5?i.left=u.readSVarint():s===6?i.top=u.readSVarint():s===7&&(i.advance=u.readVarint())}const o0=ng;function a0(s){let i=0,u=0;for(const C of s)i+=C.w*C.h,u=Math.max(u,C.w);s.sort((C,T)=>T.h-C.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let g=0,S=0;for(const C of s)for(let T=p.length-1;T>=0;T--){const M=p[T];if(!(C.w>M.w||C.h>M.h)){if(C.x=M.x,C.y=M.y,S=Math.max(S,C.y+C.h),g=Math.max(g,C.x+C.w),C.w===M.w&&C.h===M.h){const B=p.pop();T<p.length&&(p[T]=B)}else C.h===M.h?(M.x+=C.w,M.w-=C.w):C.w===M.w?(M.y+=C.h,M.h-=C.h):(p.push({x:M.x+C.w,y:M.y,w:M.w-C.w,h:C.h}),M.y+=C.h,M.h-=C.h);break}}return{w:g,h:S,fill:i/(g*S)||0}}const So=1;class rg{constructor(i,{pixelRatio:u,version:p,stretchX:g,stretchY:S,content:C}){this.paddedRect=i,this.pixelRatio=u,this.stretchX=g,this.stretchY=S,this.content=C,this.version=p}get tl(){return[this.paddedRect.x+So,this.paddedRect.y+So]}get br(){return[this.paddedRect.x+this.paddedRect.w-So,this.paddedRect.y+this.paddedRect.h-So]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*So)/this.pixelRatio,(this.paddedRect.h-2*So)/this.pixelRatio]}}class ig{constructor(i,u){const p={},g={};this.haveRenderCallbacks=[];const S=[];this.addImages(i,p,S),this.addImages(u,g,S);const{w:C,h:T}=a0(S),M=new Uo({width:C||1,height:T||1});for(const B in i){const j=i[B],H=p[B].paddedRect;Uo.copy(j.data,M,{x:0,y:0},{x:H.x+So,y:H.y+So},j.data)}for(const B in u){const j=u[B],H=g[B].paddedRect,J=H.x+So,te=H.y+So,re=j.data.width,ge=j.data.height;Uo.copy(j.data,M,{x:0,y:0},{x:J,y:te},j.data),Uo.copy(j.data,M,{x:0,y:ge-1},{x:J,y:te-1},{width:re,height:1}),Uo.copy(j.data,M,{x:0,y:0},{x:J,y:te+ge},{width:re,height:1}),Uo.copy(j.data,M,{x:re-1,y:0},{x:J-1,y:te},{width:1,height:ge}),Uo.copy(j.data,M,{x:0,y:0},{x:J+re,y:te},{width:1,height:ge})}this.image=M,this.iconPositions=p,this.patternPositions=g}addImages(i,u,p){for(const g in i){const S=i[g],C={x:0,y:0,w:S.data.width+2*So,h:S.data.height+2*So};p.push(C),u[g]=new rg(C,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,u){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),u)}patchUpdatedImage(i,u,p){if(!i||!u||i.version===u.version)return;i.version=u.version;const[g,S]=i.tl;p.update(u.data,void 0,{x:g,y:S})}}var il;Bt("ImagePosition",rg),Bt("ImageAtlas",ig),l.WritingMode=void 0,(il=l.WritingMode||(l.WritingMode={}))[il.none=0]="none",il[il.horizontal=1]="horizontal",il[il.vertical=2]="vertical",il[il.horizontalOnly=3]="horizontalOnly";const Xc=-17;class _f{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,u){const p=new _f;return p.scale=i||1,p.fontStack=u,p}static forImage(i){const u=new _f;return u.imageName=i,u}}class Yc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u){const p=new Yc;for(let g=0;g<i.sections.length;g++){const S=i.sections[g];S.image?p.addImageSection(S):p.addTextSection(S,u)}return p}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let u="";for(let p=0;p<i.length;p++){const g=i.charCodeAt(p+1)||null,S=i.charCodeAt(p-1)||null;u+=g&&bd(g)&&!nl[i[p+1]]||S&&bd(S)&&!nl[i[p-1]]||!nl[i[p]]?i[p]:nl[i[p]]}return u}(this.text)}trim(){let i=0;for(let p=0;p<this.text.length&&vf[this.text.charCodeAt(p)];p++)i++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=i&&vf[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const p=new Yc;return p.text=this.text.substring(i,u),p.sectionIndex=this.sectionIndex.slice(i,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(_f.forText(i.scale,i.fontStack||u));const p=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(p)}addImageSection(i){const u=i.image?i.image.name:"";if(u.length===0)return void Le("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(_f.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vd(s,i,u,p,g,S,C,T,M,B,j,H,J,te,re,ge){const ve=Yc.fromFeature(s,g);let pe;H===l.WritingMode.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:$e,processStyledBidirectionalText:ke}=Bo;if($e&&ve.sections.length===1){pe=[];const et=$e(ve.toString(),jo(ve,B,S,i,p,te,re));for(const Rt of et){const $t=new Yc;$t.text=Rt,$t.sections=ve.sections;for(let Ft=0;Ft<Rt.length;Ft++)$t.sectionIndex.push(0);pe.push($t)}}else if(ke){pe=[];const et=ke(ve.text,ve.sectionIndex,jo(ve,B,S,i,p,te,re));for(const Rt of et){const $t=new Yc;$t.text=Rt[0],$t.sectionIndex=Rt[1],$t.sections=ve.sections,pe.push($t)}}else pe=function(et,Rt){const $t=[],Ft=et.text;let Pt=0;for(const wt of Rt)$t.push(et.substring(Pt,wt)),Pt=wt;return Pt<Ft.length&&$t.push(et.substring(Pt,Ft.length)),$t}(ve,jo(ve,B,S,i,p,te,re));const Be=[],He={positionedLines:Be,text:ve.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(et,Rt,$t,Ft,Pt,wt,Mt,It,ct,Yt,qt,Ht){let pn=0,br=Xc,ci=0,Vo=0;const uo=It==="right"?1:It==="left"?0:.5;let Br=0;for(const $r of Pt){$r.trim();const hi=$r.getMaxScale(),Di=(hi-1)*ui,Ti={positionedGlyphs:[],lineOffset:0};et.positionedLines[Br]=Ti;const Cr=Ti.positionedGlyphs;let xi=0;if(!$r.length()){br+=wt,++Br;continue}for(let zi=0;zi<$r.length();zi++){const Tn=$r.getSection(zi),qo=$r.getSectionIndex(zi),Bi=$r.getCharCode(zi);let $i=0,bi=null,hn=null,Sa=null,wi=ui;const ra=!(ct===l.WritingMode.horizontal||!qt&&!Pc(Bi)||qt&&(vf[Bi]||(_i=Bi,ht.Arabic(_i)||ht["Arabic Supplement"](_i)||ht["Arabic Extended-A"](_i)||ht["Arabic Presentation Forms-A"](_i)||ht["Arabic Presentation Forms-B"](_i))));if(Tn.imageName){const ia=Ft[Tn.imageName];if(!ia)continue;Sa=Tn.imageName,et.iconsInText=et.iconsInText||!0,hn=ia.paddedRect;const Cn=ia.displaySize;Tn.scale=Tn.scale*ui/Ht,bi={width:Cn[0],height:Cn[1],left:So,top:-o0,advance:ra?Cn[1]:Cn[0]},$i=Di+(ui-Cn[1]*Tn.scale),wi=bi.advance;const ol=ra?Cn[0]*Tn.scale-ui*hi:Cn[1]*Tn.scale-ui*hi;ol>0&&ol>xi&&(xi=ol)}else{const ia=$t[Tn.fontStack],Cn=ia&&ia[Bi];if(Cn&&Cn.rect)hn=Cn.rect,bi=Cn.metrics;else{const ol=Rt[Tn.fontStack],rh=ol&&ol[Bi];if(!rh)continue;bi=rh.metrics}$i=(hi-Tn.scale)*ui}ra?(et.verticalizable=!0,Cr.push({glyph:Bi,imageName:Sa,x:pn,y:br+$i,vertical:ra,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:qo,metrics:bi,rect:hn}),pn+=wi*Tn.scale+Yt):(Cr.push({glyph:Bi,imageName:Sa,x:pn,y:br+$i,vertical:ra,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:qo,metrics:bi,rect:hn}),pn+=bi.advance*Tn.scale+Yt)}Cr.length!==0&&(ci=Math.max(pn-Yt,ci),Qb(Cr,0,Cr.length-1,uo,xi)),pn=0;const Nr=wt*hi+xi;Ti.lineOffset=Math.max(xi,Di),br+=Nr,Vo=Math.max(Nr,Vo),++Br}var _i;const Ri=br-Xc,{horizontalAlign:co,verticalAlign:vi}=og(Mt);(function($r,hi,Di,Ti,Cr,xi,Nr,zi,Tn){const qo=(hi-Di)*Cr;let Bi=0;Bi=xi!==Nr?-zi*Ti-Xc:(-Ti*Tn+.5)*Nr;for(const $i of $r)for(const bi of $i.positionedGlyphs)bi.x+=qo,bi.y+=Bi})(et.positionedLines,uo,co,vi,ci,Vo,wt,Ri,Pt.length),et.top+=-vi*Ri,et.bottom=et.top+Ri,et.left+=-co*ci,et.right=et.left+ci}(He,i,u,p,pe,C,T,M,H,B,J,ge),!function(et){for(const Rt of et)if(Rt.positionedGlyphs.length!==0)return!1;return!0}(Be)&&He}const vf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function s0(s,i,u,p,g,S){if(i.imageName){const C=p[i.imageName];return C?C.displaySize[0]*i.scale*ui/S+g:0}{const C=u[i.fontStack],T=C&&C[s];return T?T.metrics.advance*i.scale+g:0}}function l0(s,i,u,p){const g=Math.pow(s-i,2);return p?s<i?g/2:2*g:g+Math.abs(u)*u}function Jb(s,i,u){let p=0;return s===10&&(p-=1e4),u&&(p+=150),s!==40&&s!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function u0(s,i,u,p,g,S){let C=null,T=l0(i,u,g,S);for(const M of p){const B=l0(i-M.x,u,g,S)+M.badness;B<=T&&(C=M,T=B)}return{index:s,x:i,priorBreak:C,badness:T}}function c0(s){return s?c0(s.priorBreak).concat(s.index):[]}function jo(s,i,u,p,g,S,C){if(S!=="point")return[];if(!s)return[];const T=[],M=function(J,te,re,ge,ve,pe){let $e=0;for(let ke=0;ke<J.length();ke++){const Be=J.getSection(ke);$e+=s0(J.getCharCode(ke),Be,ge,ve,te,pe)}return $e/Math.max(1,Math.ceil($e/re))}(s,i,u,p,g,C),B=s.text.indexOf("")>=0;let j=0;for(let J=0;J<s.length();J++){const te=s.getSection(J),re=s.getCharCode(J);if(vf[re]||(j+=s0(re,te,p,g,i,C)),J<s.length()-1){const ge=!((H=re)<11904||!(ht["Bopomofo Extended"](H)||ht.Bopomofo(H)||ht["CJK Compatibility Forms"](H)||ht["CJK Compatibility Ideographs"](H)||ht["CJK Compatibility"](H)||ht["CJK Radicals Supplement"](H)||ht["CJK Strokes"](H)||ht["CJK Symbols and Punctuation"](H)||ht["CJK Unified Ideographs Extension A"](H)||ht["CJK Unified Ideographs"](H)||ht["Enclosed CJK Letters and Months"](H)||ht["Halfwidth and Fullwidth Forms"](H)||ht.Hiragana(H)||ht["Ideographic Description Characters"](H)||ht["Kangxi Radicals"](H)||ht["Katakana Phonetic Extensions"](H)||ht.Katakana(H)||ht["Vertical Forms"](H)||ht["Yi Radicals"](H)||ht["Yi Syllables"](H)));(Yb[re]||ge||te.imageName)&&T.push(u0(J+1,j,M,T,Jb(re,s.getCharCode(J+1),ge&&B),!1))}}var H;return c0(u0(s.length(),j,M,T,0,!0))}function og(s){let i=.5,u=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function Qb(s,i,u,p,g){if(!p&&!g)return;const S=s[u],C=(s[u].x+S.metrics.advance*S.scale)*p;for(let T=i;T<=u;T++)s[T].x-=C,s[T].y+=g}function ew(s,i,u){const{horizontalAlign:p,verticalAlign:g}=og(u),S=i[0]-s.displaySize[0]*p,C=i[1]-s.displaySize[1]*g;return{image:s,top:C,bottom:C+s.displaySize[1],left:S,right:S+s.displaySize[0]}}function ag(s,i,u,p,g,S){const C=s.image;let T;if(C.content){const ve=C.content,pe=C.pixelRatio||1;T=[ve[0]/pe,ve[1]/pe,C.displaySize[0]-ve[2]/pe,C.displaySize[1]-ve[3]/pe]}const M=i.left*S,B=i.right*S;let j,H,J,te;u==="width"||u==="both"?(te=g[0]+M-p[3],H=g[0]+B+p[1]):(te=g[0]+(M+B-C.displaySize[0])/2,H=te+C.displaySize[0]);const re=i.top*S,ge=i.bottom*S;return u==="height"||u==="both"?(j=g[1]+re-p[0],J=g[1]+ge+p[2]):(j=g[1]+(re+ge-C.displaySize[1])/2,J=j+C.displaySize[1]),{image:C,top:j,right:H,bottom:J,left:te,collisionPadding:T}}const xf=255,_s=128,Gl=xf*_s;function h0(s,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Sr(s+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:g}=u;let S=0;for(;S<p.length&&p[S]<=s;)S++;S=Math.max(0,S-1);let C=S;for(;C<p.length&&p[C]<s+1;)C++;C=Math.min(p.length-1,C);const T=p[S],M=p[C];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:g}:{kind:"camera",minZoom:T,maxZoom:M,minSize:u.evaluate(new Sr(T)),maxSize:u.evaluate(new Sr(M)),interpolationType:g}}}function bf(s,i,u){let p="never";const g=s.get(i);return g?p=g:s.get(u)&&(p="always"),p}const tw=Na.VectorTileFeature.types,nw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qd(s,i,u,p,g,S,C,T,M,B,j,H,J){const te=T?Math.min(Gl,Math.round(T[0])):0,re=T?Math.min(Gl,Math.round(T[1])):0;s.emplaceBack(i,u,Math.round(32*p),Math.round(32*g),S,C,(te<<1)+(M?1:0),re,16*B,16*j,256*H,256*J)}function sg(s,i,u){s.emplaceBack(i.x,i.y,u),s.emplaceBack(i.x,i.y,u),s.emplaceBack(i.x,i.y,u),s.emplaceBack(i.x,i.y,u)}function rw(s){for(const i of s.sections)if(Da(i.text))return!0;return!1}class lg{constructor(i){this.layoutVertexArray=new Ue,this.indexArray=new it,this.programConfigurations=i,this.segments=new _t,this.dynamicLayoutVertexArray=new Ze,this.opacityVertexArray=new Ke,this.hasVisibleVertices=!1,this.placedSymbolArray=new P}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,u,p,g){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wo.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Zm.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,nw,!0),this.opacityVertexBuffer.itemSize=1),(p||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",lg);class ug{constructor(i,u,p){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new p,this.segments=new _t,this.collisionVertexArray=new ut}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,qb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",ug);class Jc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(C=>C.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=kd([]),this.placementViewportMatrix=kd([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=h0(this.zoom,u["text-size"]),this.iconSizeData=h0(this.zoom,u["icon-size"]);const p=this.layers[0].layout,g=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=bf(p,"text-overlap","text-allow-overlap")!=="never"||bf(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(C=>l.WritingMode[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=i.sourceID}createArrays(){this.text=new lg(new ba(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new lg(new ba(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new D,this.lineVertexArray=new U,this.symbolInstances=new O}calculateGlyphDependencies(i,u,p,g,S){for(let C=0;C<i.length;C++)if(u[i.charCodeAt(C)]=!0,(p||g)&&S){const T=nl[i.charAt(C)];T&&(u[T.charCodeAt(0)]=!0)}}populate(i,u,p){const g=this.layers[0],S=g.layout,C=S.get("text-font"),T=S.get("text-field"),M=S.get("icon-image"),B=(T.value.kind!=="constant"||T.value.value instanceof pr&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),j=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,H=S.get("symbol-sort-key");if(this.features=[],!B&&!j)return;const J=u.iconDependencies,te=u.glyphDependencies,re=u.availableImages,ge=new Sr(this.zoom);for(const{feature:ve,id:pe,index:$e,sourceLayerIndex:ke}of i){const Be=g._featureFilter.needGeometry,He=Lu(ve,Be);if(!g._featureFilter.filter(ge,He,p))continue;let et,Rt;if(Be||(He.geometry=ea(ve)),B){const Ft=g.getValueAndResolveTokens("text-field",He,p,re),Pt=pr.factory(Ft);rw(Pt)&&(this.hasRTLText=!0),(!this.hasRTLText||Dl()==="unavailable"||this.hasRTLText&&Bo.isParsed())&&(et=Hb(Pt,g,He))}if(j){const Ft=g.getValueAndResolveTokens("icon-image",He,p,re);Rt=Ft instanceof Fo?Ft:Fo.fromString(Ft)}if(!et&&!Rt)continue;const $t=this.sortFeaturesByKey?H.evaluate(He,{},p):void 0;if(this.features.push({id:pe,text:et,icon:Rt,index:$e,sourceLayerIndex:ke,geometry:He.geometry,properties:ve.properties,type:tw[ve.type],sortKey:$t}),Rt&&(J[Rt.name]=!0),et){const Ft=C.evaluate(He,{},p).join(","),Pt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const wt of et.sections)if(wt.image)J[wt.image.name]=!0;else{const Mt=Ac(et.toString()),It=wt.fontStack||Ft,ct=te[It]=te[It]||{};this.calculateGlyphDependencies(wt.text,ct,Pt,this.allowVerticalPlacement,Mt)}}}S.get("symbol-placement")==="line"&&(this.features=function(ve){const pe={},$e={},ke=[];let Be=0;function He(Ft){ke.push(ve[Ft]),Be++}function et(Ft,Pt,wt){const Mt=$e[Ft];return delete $e[Ft],$e[Pt]=Mt,ke[Mt].geometry[0].pop(),ke[Mt].geometry[0]=ke[Mt].geometry[0].concat(wt[0]),Mt}function Rt(Ft,Pt,wt){const Mt=pe[Pt];return delete pe[Pt],pe[Ft]=Mt,ke[Mt].geometry[0].shift(),ke[Mt].geometry[0]=wt[0].concat(ke[Mt].geometry[0]),Mt}function $t(Ft,Pt,wt){const Mt=wt?Pt[0][Pt[0].length-1]:Pt[0][0];return`${Ft}:${Mt.x}:${Mt.y}`}for(let Ft=0;Ft<ve.length;Ft++){const Pt=ve[Ft],wt=Pt.geometry,Mt=Pt.text?Pt.text.toString():null;if(!Mt){He(Ft);continue}const It=$t(Mt,wt),ct=$t(Mt,wt,!0);if(It in $e&&ct in pe&&$e[It]!==pe[ct]){const Yt=Rt(It,ct,wt),qt=et(It,ct,ke[Yt].geometry);delete pe[It],delete $e[ct],$e[$t(Mt,ke[qt].geometry,!0)]=qt,ke[Yt].geometry=null}else It in $e?et(It,ct,wt):ct in pe?Rt(It,ct,wt):(He(Ft),pe[It]=Be-1,$e[ct]=Be-1)}return ke.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,pe)=>ve.sortKey-pe.sortKey)}update(i,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(i,u,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const p=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(u[i.segment+1]),S=i.dist(u[i.segment]);const C={};for(let T=i.segment+1;T<u.length;T++)C[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:g},T<u.length-1&&(g+=u[T+1].dist(u[T]));for(let T=i.segment||0;T>=0;T--)C[T]={x:u[T].x,y:u[T].y,tileUnitDistanceFromAnchor:S},T>0&&(S+=u[T-1].dist(u[T]));for(let T=0;T<u.length;T++){const M=C[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,u,p,g,S,C,T,M,B,j,H,J){const te=i.indexArray,re=i.layoutVertexArray,ge=i.segments.prepareSegment(4*u.length,re,te,this.canOverlap?C.sortKey:void 0),ve=this.glyphOffsetArray.length,pe=ge.vertexLength,$e=this.allowVerticalPlacement&&T===l.WritingMode.vertical?Math.PI/2:0,ke=C.text&&C.text.sections;for(let Be=0;Be<u.length;Be++){const{tl:He,tr:et,bl:Rt,br:$t,tex:Ft,pixelOffsetTL:Pt,pixelOffsetBR:wt,minFontScaleX:Mt,minFontScaleY:It,glyphOffset:ct,isSDF:Yt,sectionIndex:qt}=u[Be],Ht=ge.vertexLength,pn=ct[1];qd(re,M.x,M.y,He.x,pn+He.y,Ft.x,Ft.y,p,Yt,Pt.x,Pt.y,Mt,It),qd(re,M.x,M.y,et.x,pn+et.y,Ft.x+Ft.w,Ft.y,p,Yt,wt.x,Pt.y,Mt,It),qd(re,M.x,M.y,Rt.x,pn+Rt.y,Ft.x,Ft.y+Ft.h,p,Yt,Pt.x,wt.y,Mt,It),qd(re,M.x,M.y,$t.x,pn+$t.y,Ft.x+Ft.w,Ft.y+Ft.h,p,Yt,wt.x,wt.y,Mt,It),sg(i.dynamicLayoutVertexArray,M,$e),te.emplaceBack(Ht,Ht+1,Ht+2),te.emplaceBack(Ht+1,Ht+2,Ht+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),Be!==u.length-1&&qt===u[Be+1].sectionIndex||i.programConfigurations.populatePaintArrays(re.length,C,C.index,{},J,ke&&ke[qt])}i.placedSymbolArray.emplaceBack(M.x,M.y,ve,this.glyphOffsetArray.length-ve,pe,B,j,M.segment,p?p[0]:0,p?p[1]:0,g[0],g[1],T,0,!1,0,H)}_addCollisionDebugVertex(i,u,p,g,S,C){return u.emplaceBack(0,0),i.emplaceBack(p.x,p.y,g,S,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(i,u,p,g,S,C,T){const M=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),B=M.vertexLength,j=S.layoutVertexArray,H=S.collisionVertexArray,J=T.anchorX,te=T.anchorY;this._addCollisionDebugVertex(j,H,C,J,te,new A(i,u)),this._addCollisionDebugVertex(j,H,C,J,te,new A(p,u)),this._addCollisionDebugVertex(j,H,C,J,te,new A(p,g)),this._addCollisionDebugVertex(j,H,C,J,te,new A(i,g)),M.vertexLength+=4;const re=S.indexArray;re.emplaceBack(B,B+1),re.emplaceBack(B+1,B+2),re.emplaceBack(B+2,B+3),re.emplaceBack(B+3,B),M.primitiveLength+=4}addDebugCollisionBoxes(i,u,p,g){for(let S=i;S<u;S++){const C=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,g?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ug(nt,Ud.members,Et),this.iconCollisionBox=new ug(nt,Ud.members,Et);for(let i=0;i<this.symbolInstances.length;i++){const u=this.symbolInstances.get(i);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(i,u,p,g,S,C,T,M,B){const j={};for(let H=u;H<p;H++){const J=i.get(H);j.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.textFeatureIndex=J.featureIndex;break}for(let H=g;H<S;H++){const J=i.get(H);j.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.verticalTextFeatureIndex=J.featureIndex;break}for(let H=C;H<T;H++){const J=i.get(H);j.iconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.iconFeatureIndex=J.featureIndex;break}for(let H=M;H<B;H++){const J=i.get(H);j.verticalIconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.verticalIconFeatureIndex=J.featureIndex;break}return j}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,u){const p=i.placedSymbolArray.get(u),g=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<g;S+=4)i.indexArray.emplaceBack(S,S+1,S+2),i.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),p=Math.cos(i),g=[],S=[],C=[];for(let T=0;T<this.symbolInstances.length;++T){C.push(T);const M=this.symbolInstances.get(T);g.push(0|Math.round(u*M.anchorX+p*M.anchorY)),S.push(M.featureIndex)}return C.sort((T,M)=>g[T]-g[M]||S[M]-S[T]),C}addToSortKeyRanges(i,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((g,S,C)=>{g>=0&&C.indexOf(g)===S&&this.addIndicesForPlacedSymbol(this.text,g)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let f0,d0;Bt("SymbolBucket",Jc,{omit:["layers","collisionBoxArray","features","compareText"]}),Jc.MAX_GLYPHS=65535,Jc.addDynamicAttributes=sg;var cg={get paint(){return d0=d0||new Mi({"icon-opacity":new en(Je.paint_symbol["icon-opacity"]),"icon-color":new en(Je.paint_symbol["icon-color"]),"icon-halo-color":new en(Je.paint_symbol["icon-halo-color"]),"icon-halo-width":new en(Je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new en(Je.paint_symbol["icon-halo-blur"]),"icon-translate":new Lt(Je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lt(Je.paint_symbol["icon-translate-anchor"]),"text-opacity":new en(Je.paint_symbol["text-opacity"]),"text-color":new en(Je.paint_symbol["text-color"],{runtimeType:vn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new en(Je.paint_symbol["text-halo-color"]),"text-halo-width":new en(Je.paint_symbol["text-halo-width"]),"text-halo-blur":new en(Je.paint_symbol["text-halo-blur"]),"text-translate":new Lt(Je.paint_symbol["text-translate"]),"text-translate-anchor":new Lt(Je.paint_symbol["text-translate-anchor"])})},get layout(){return f0=f0||new Mi({"symbol-placement":new Lt(Je.layout_symbol["symbol-placement"]),"symbol-spacing":new Lt(Je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lt(Je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new en(Je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lt(Je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lt(Je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Lt(Je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Lt(Je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lt(Je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lt(Je.layout_symbol["icon-rotation-alignment"]),"icon-size":new en(Je.layout_symbol["icon-size"]),"icon-text-fit":new Lt(Je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lt(Je.layout_symbol["icon-text-fit-padding"]),"icon-image":new en(Je.layout_symbol["icon-image"]),"icon-rotate":new en(Je.layout_symbol["icon-rotate"]),"icon-padding":new en(Je.layout_symbol["icon-padding"]),"icon-keep-upright":new Lt(Je.layout_symbol["icon-keep-upright"]),"icon-offset":new en(Je.layout_symbol["icon-offset"]),"icon-anchor":new en(Je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lt(Je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lt(Je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lt(Je.layout_symbol["text-rotation-alignment"]),"text-field":new en(Je.layout_symbol["text-field"]),"text-font":new en(Je.layout_symbol["text-font"]),"text-size":new en(Je.layout_symbol["text-size"]),"text-max-width":new en(Je.layout_symbol["text-max-width"]),"text-line-height":new Lt(Je.layout_symbol["text-line-height"]),"text-letter-spacing":new en(Je.layout_symbol["text-letter-spacing"]),"text-justify":new en(Je.layout_symbol["text-justify"]),"text-radial-offset":new en(Je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lt(Je.layout_symbol["text-variable-anchor"]),"text-anchor":new en(Je.layout_symbol["text-anchor"]),"text-max-angle":new Lt(Je.layout_symbol["text-max-angle"]),"text-writing-mode":new Lt(Je.layout_symbol["text-writing-mode"]),"text-rotate":new en(Je.layout_symbol["text-rotate"]),"text-padding":new Lt(Je.layout_symbol["text-padding"]),"text-keep-upright":new Lt(Je.layout_symbol["text-keep-upright"]),"text-transform":new en(Je.layout_symbol["text-transform"]),"text-offset":new en(Je.layout_symbol["text-offset"]),"text-allow-overlap":new Lt(Je.layout_symbol["text-allow-overlap"]),"text-overlap":new Lt(Je.layout_symbol["text-overlap"]),"text-ignore-placement":new Lt(Je.layout_symbol["text-ignore-placement"]),"text-optional":new Lt(Je.layout_symbol["text-optional"])})}};class p0{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Re,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",p0,{omit:["defaultValue"]});class Gd extends $o{constructor(i){super(i,cg)}recalculate(i,u){if(super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const g=[];for(const S of p)g.indexOf(S)<0&&g.push(S);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,u,p,g){const S=this.layout.get(i).evaluate(u,{},p,g),C=this._unevaluatedLayout._values[i];return C.isDataDriven()||mu(C.value)||!S?S:function(T,M){return M.replace(/{([^{}]+)}/g,(B,j)=>j in T?String(T[j]):"")}(u.properties,S)}createBucket(i){return new Jc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of cg.paint.overridableProperties){if(!Gd.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),p=new p0(u),g=new ef(p,u.property.specification);let S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new hr("source",g):new tf("composite",g,u.value.zoomStops),this.paint._values[i]=new ya(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&Gd.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const p=i.get("text-field"),g=cg.paint.properties[u];let S=!1;const C=T=>{for(const M of T)if(g.overrides&&g.overrides.hasOverride(M))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof pr)C(p.value.value.sections);else if(p.value.kind==="source"){const T=B=>{S||(B instanceof is&&jr(B.value)===jn?C(B.value.sections):B instanceof Wi?C(B.sections):B.eachChild(T))},M=p.value;M._styleExpression&&T(M._styleExpression.expression)}return S}}let m0;var iw={get paint(){return m0=m0||new Mi({"background-color":new Lt(Je.paint_background["background-color"]),"background-pattern":new Oc(Je.paint_background["background-pattern"]),"background-opacity":new Lt(Je.paint_background["background-opacity"])})}};class ow extends $o{constructor(i){super(i,iw)}}let g0;var aw={get paint(){return g0=g0||new Mi({"raster-opacity":new Lt(Je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lt(Je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lt(Je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lt(Je.paint_raster["raster-brightness-max"]),"raster-saturation":new Lt(Je.paint_raster["raster-saturation"]),"raster-contrast":new Lt(Je.paint_raster["raster-contrast"]),"raster-resampling":new Lt(Je.paint_raster["raster-resampling"]),"raster-fade-duration":new Lt(Je.paint_raster["raster-fade-duration"])})}};class sw extends $o{constructor(i){super(i,aw)}}class lw extends $o{constructor(i){super(i,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class hg{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Hd=63710088e-1;class Hl{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Hl(q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,p=this.lat*u,g=i.lat*u,S=Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos((i.lng-this.lng)*u);return Hd*Math.acos(Math.min(S,1))}static convert(i){if(i instanceof Hl)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Hl(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Hl(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const y0=2*Math.PI*Hd;function _0(s){return y0*Math.cos(s*Math.PI/180)}function v0(s){return(180+s)/360}function x0(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function b0(s,i){return s/_0(i)}function fg(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Wd{constructor(i,u,p=0){this.x=+i,this.y=+u,this.z=+p}static fromLngLat(i,u=0){const p=Hl.convert(i);return new Wd(v0(p.lng),x0(p.lat),b0(u,p.lat))}toLngLat(){return new Hl(360*this.x-180,fg(this.y))}toAltitude(){return this.z*_0(fg(this.y))}meterInMercatorCoordinateUnits(){return 1/y0*(i=fg(this.y),1/Math.cos(i*Math.PI/180));var i}}function dg(s,i,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[s*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class pg{constructor(i,u,p){if(i<0||i>25||p<0||p>=Math.pow(2,i)||u<0||u>=Math.pow(2,i))throw new Error(`x=${u}, y=${p}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=u,this.y=p,this.key=Sf(0,i,i,u,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u,p){const g=(C=this.y,T=this.z,M=dg(256*(S=this.x),256*(C=Math.pow(2,T)-C-1),T),B=dg(256*(S+1),256*(C+1),T),M[0]+","+M[1]+","+B[0]+","+B[1]);var S,C,T,M,B;const j=function(H,J,te){let re,ge="";for(let ve=H;ve>0;ve--)re=1<<ve-1,ge+=(J&re?1:0)+(te&re?2:0);return ge}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const u=this.z-i.z;return u>0&&i.x===this.x>>u&&i.y===this.y>>u}getTilePoint(i){const u=Math.pow(2,this.z);return new A((i.x*u-this.x)*xr,(i.y*u-this.y)*xr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class wf{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Sf(i,u.z,u.z,u.x,u.y)}}class na{constructor(i,u,p,g,S){if(i<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${p}`);this.overscaledZ=i,this.wrap=u,this.canonical=new pg(p,+g,+S),this.key=Sf(u,i,p,g,S)}clone(){return new na(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-i;return i>this.canonical.z?new na(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new na(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-i;return i>this.canonical.z?Sf(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y):Sf(this.wrap*+u,i,i,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,g=2*this.canonical.y;return[new na(u,this.wrap,u,p,g),new na(u,this.wrap,u,p+1,g),new na(u,this.wrap,u,p,g+1),new na(u,this.wrap,u,p+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new na(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new wf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Wd(i.x-this.wrap,i.y))}}function Sf(s,i,u,p,g){(s*=2)<0&&(s=-1*s-1);const S=1<<u;return(S*S*s+S*g+p).toString(36)+u.toString(36)+i.toString(36)}Bt("CanonicalTileID",pg),Bt("OverscaledTileID",na,{omit:["posMatrix"]});class w0{constructor(i,u,p){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void Le(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const g=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=p||"mapbox";for(let S=0;S<g;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(g,S)]=this.data[this._idx(g-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,g)]=this.data[this._idx(S,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<g;S++)for(let C=0;C<g;C++){const T=this.get(S,C);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(i,u){const p=new Uint8Array(this.data.buffer),g=4*this._idx(i,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(p[g],p[g+1],p[g+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}_unpackMapbox(i,u,p){return(256*i*256+256*u+p)/10-1e4}_unpackTerrarium(i,u,p){return 256*i+u+p/256-32768}getPixels(){return new Uo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,u,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,S=u*this.dim+this.dim,C=p*this.dim,T=p*this.dim+this.dim;switch(u){case-1:g=S-1;break;case 1:S=g+1}switch(p){case-1:C=T-1;break;case 1:T=C+1}const M=-u*this.dim,B=-p*this.dim;for(let j=C;j<T;j++)for(let H=g;H<S;H++)this.data[this._idx(H,j)]=i.data[this._idx(H+M,j+B)]}}Bt("DEMData",w0);class S0{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const p=i[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class C0{constructor(i,u,p,g,S){this.type="Feature",this._vectorTileFeature=i,i._z=u,i._x=p,i._y=g,this.properties=i.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(i[u]=this[u]);return i}}class E0{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Cu(xr,16,0),this.grid3D=new Cu(xr,16,0),this.featureIndexArray=new ne,this.promoteId=u}insert(i,u,p,g,S,C){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,g,S);const M=C?this.grid3D:this.grid;for(let B=0;B<u.length;B++){const j=u[B],H=[1/0,1/0,-1/0,-1/0];for(let J=0;J<j.length;J++){const te=j[J];H[0]=Math.min(H[0],te.x),H[1]=Math.min(H[1],te.y),H[2]=Math.max(H[2],te.x),H[3]=Math.max(H[3],te.y)}H[0]<xr&&H[1]<xr&&H[2]>=0&&H[3]>=0&&M.insert(T,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Na.VectorTile(new tg(this.rawTileData)).layers,this.sourceLayerCoder=new S0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,u,p,g){this.loadVTLayers();const S=i.params||{},C=xr/i.tileSize/i.scale,T=xc(S.filter),M=i.queryGeometry,B=i.queryPadding*C,j=A0(M),H=this.grid.query(j.minX-B,j.minY-B,j.maxX+B,j.maxY+B),J=A0(i.cameraQueryGeometry),te=this.grid3D.query(J.minX-B,J.minY-B,J.maxX+B,J.maxY+B,(ve,pe,$e,ke)=>function(Be,He,et,Rt,$t){for(const Pt of Be)if(He<=Pt.x&&et<=Pt.y&&Rt>=Pt.x&&$t>=Pt.y)return!0;const Ft=[new A(He,et),new A(He,$t),new A(Rt,$t),new A(Rt,et)];if(Be.length>2){for(const Pt of Ft)if(jc(Be,Pt))return!0}for(let Pt=0;Pt<Be.length-1;Pt++)if(P_(Be[Pt],Be[Pt+1],Ft))return!0;return!1}(i.cameraQueryGeometry,ve-B,pe-B,$e+B,ke+B));for(const ve of te)H.push(ve);H.sort(uw);const re={};let ge;for(let ve=0;ve<H.length;ve++){const pe=H[ve];if(pe===ge)continue;ge=pe;const $e=this.featureIndexArray.get(pe);let ke=null;this.loadMatchingFeature(re,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,T,S.layers,S.availableImages,u,p,g,(Be,He,et)=>(ke||(ke=ea(Be)),He.queryIntersectsFeature(M,Be,et,ke,this.z,i.transform,C,i.pixelPosMatrix)))}return re}loadMatchingFeature(i,u,p,g,S,C,T,M,B,j,H){const J=this.bucketLayerIDs[u];if(C&&!function(ve,pe){for(let $e=0;$e<ve.length;$e++)if(pe.indexOf(ve[$e])>=0)return!0;return!1}(C,J))return;const te=this.sourceLayerCoder.decode(p),re=this.vtLayers[te].feature(g);if(S.needGeometry){const ve=Lu(re,!0);if(!S.filter(new Sr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!S.filter(new Sr(this.tileID.overscaledZ),re))return;const ge=this.getId(re,te);for(let ve=0;ve<J.length;ve++){const pe=J[ve];if(C&&C.indexOf(pe)<0)continue;const $e=M[pe];if(!$e)continue;let ke={};ge&&j&&(ke=j.getState($e.sourceLayer||"_geojsonTileLayer",ge));const Be=G({},B[pe]);Be.paint=k0(Be.paint,$e.paint,re,ke,T),Be.layout=k0(Be.layout,$e.layout,re,ke,T);const He=!H||H(re,$e,ke);if(!He)continue;const et=new C0(re,this.z,this.x,this.y,ge);et.layer=Be;let Rt=i[pe];Rt===void 0&&(Rt=i[pe]=[]),Rt.push({featureIndex:g,feature:et,intersectionZ:He})}}lookupSymbolFeatures(i,u,p,g,S,C,T,M){const B={};this.loadVTLayers();const j=xc(S);for(const H of i)this.loadMatchingFeature(B,p,g,H,j,C,T,M,u);return B}hasLayer(i){for(const u of this.bucketLayerIDs)for(const p of u)if(i===p)return!0;return!1}getId(i,u){let p=i.id;return this.promoteId&&(p=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof p=="boolean"&&(p=Number(p))),p}}function k0(s,i,u,p,g){return ae(s,(S,C)=>{const T=i instanceof zr?i.get(C):null;return T&&T.evaluate?T.evaluate(u,p,g):T})}function A0(s){let i=1/0,u=1/0,p=-1/0,g=-1/0;for(const S of s)i=Math.min(i,S.x),u=Math.min(u,S.y),p=Math.max(p,S.x),g=Math.max(g,S.y);return{minX:i,minY:u,maxX:p,maxY:g}}function uw(s,i){return i-s}function T0(s,i,u,p,g){const S=[];for(let C=0;C<s.length;C++){const T=s[C];let M;for(let B=0;B<T.length-1;B++){let j=T[B],H=T[B+1];j.x<i&&H.x<i||(j.x<i?j=new A(i,j.y+(i-j.x)/(H.x-j.x)*(H.y-j.y))._round():H.x<i&&(H=new A(i,j.y+(i-j.x)/(H.x-j.x)*(H.y-j.y))._round()),j.y<u&&H.y<u||(j.y<u?j=new A(j.x+(u-j.y)/(H.y-j.y)*(H.x-j.x),u)._round():H.y<u&&(H=new A(j.x+(u-j.y)/(H.y-j.y)*(H.x-j.x),u)._round()),j.x>=p&&H.x>=p||(j.x>=p?j=new A(p,j.y+(p-j.x)/(H.x-j.x)*(H.y-j.y))._round():H.x>=p&&(H=new A(p,j.y+(p-j.x)/(H.x-j.x)*(H.y-j.y))._round()),j.y>=g&&H.y>=g||(j.y>=g?j=new A(j.x+(g-j.y)/(H.y-j.y)*(H.x-j.x),g)._round():H.y>=g&&(H=new A(j.x+(g-j.y)/(H.y-j.y)*(H.x-j.x),g)._round()),M&&j.equals(M[M.length-1])||(M=[j],S.push(M)),M.push(H)))))}}return S}Bt("FeatureIndex",E0,{omit:["rawTileData","sourceLayerCoder"]});class Wl extends A{constructor(i,u,p,g){super(i,u),this.angle=p,g!==void 0&&(this.segment=g)}clone(){return new Wl(this.x,this.y,this.angle,this.segment)}}function P0(s,i,u,p,g){if(i.segment===void 0||u===0)return!0;let S=i,C=i.segment+1,T=0;for(;T>-u/2;){if(C--,C<0)return!1;T-=s[C].dist(S),S=s[C]}T+=s[C].dist(s[C+1]),C++;const M=[];let B=0;for(;T<u/2;){const j=s[C],H=s[C+1];if(!H)return!1;let J=s[C-1].angleTo(j)-j.angleTo(H);for(J=Math.abs((J+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:J}),B+=J;T-M[0].distance>p;)B-=M.shift().angleDelta;if(B>g)return!1;C++,T+=j.dist(H)}return!0}function I0(s){let i=0;for(let u=0;u<s.length-1;u++)i+=s[u].dist(s[u+1]);return i}function M0(s,i,u){return s?.6*i*u:0}function L0(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function cw(s,i,u,p,g,S){const C=M0(u,g,S),T=L0(u,p)*S;let M=0;const B=I0(s)/2;for(let j=0;j<s.length-1;j++){const H=s[j],J=s[j+1],te=H.dist(J);if(M+te>B){const re=(B-M)/te,ge=Hi.number(H.x,J.x,re),ve=Hi.number(H.y,J.y,re),pe=new Wl(ge,ve,J.angleTo(H),j);return pe._round(),!C||P0(s,pe,T,C,i)?pe:void 0}M+=te}}function O0(s,i,u,p,g,S,C,T,M){const B=M0(p,S,C),j=L0(p,g),H=j*C,J=s[0].x===0||s[0].x===M||s[0].y===0||s[0].y===M;return i-H<i/4&&(i=H+i/4),mg(s,J?i/2*T%i:(j/2+2*S)*C*T%i,i,B,u,H,J,!1,M)}function mg(s,i,u,p,g,S,C,T,M){const B=S/2,j=I0(s);let H=0,J=i-u,te=[];for(let re=0;re<s.length-1;re++){const ge=s[re],ve=s[re+1],pe=ge.dist(ve),$e=ve.angleTo(ge);for(;J+u<H+pe;){J+=u;const ke=(J-H)/pe,Be=Hi.number(ge.x,ve.x,ke),He=Hi.number(ge.y,ve.y,ke);if(Be>=0&&Be<M&&He>=0&&He<M&&J-B>=0&&J+B<=j){const et=new Wl(Be,He,$e,re);et._round(),p&&!P0(s,et,S,p,g)||te.push(et)}}H+=pe}return T||te.length||C||(te=mg(s,H/2,u,p,g,S,C,!0,M)),te}Bt("Anchor",Wl);const Qc=So;function F0(s,i,u,p){const g=[],S=s.image,C=S.pixelRatio,T=S.paddedRect.w-2*Qc,M=S.paddedRect.h-2*Qc,B=s.right-s.left,j=s.bottom-s.top,H=S.stretchX||[[0,T]],J=S.stretchY||[[0,M]],te=(wt,Mt)=>wt+Mt[1]-Mt[0],re=H.reduce(te,0),ge=J.reduce(te,0),ve=T-re,pe=M-ge;let $e=0,ke=re,Be=0,He=ge,et=0,Rt=ve,$t=0,Ft=pe;if(S.content&&p){const wt=S.content;$e=Zd(H,0,wt[0]),Be=Zd(J,0,wt[1]),ke=Zd(H,wt[0],wt[2]),He=Zd(J,wt[1],wt[3]),et=wt[0]-$e,$t=wt[1]-Be,Rt=wt[2]-wt[0]-ke,Ft=wt[3]-wt[1]-He}const Pt=(wt,Mt,It,ct)=>{const Yt=Bu(wt.stretch-$e,ke,B,s.left),qt=Kd(wt.fixed-et,Rt,wt.stretch,re),Ht=Bu(Mt.stretch-Be,He,j,s.top),pn=Kd(Mt.fixed-$t,Ft,Mt.stretch,ge),br=Bu(It.stretch-$e,ke,B,s.left),ci=Kd(It.fixed-et,Rt,It.stretch,re),Vo=Bu(ct.stretch-Be,He,j,s.top),uo=Kd(ct.fixed-$t,Ft,ct.stretch,ge),Br=new A(Yt,Ht),_i=new A(br,Ht),Ri=new A(br,Vo),co=new A(Yt,Vo),vi=new A(qt/C,pn/C),$r=new A(ci/C,uo/C),hi=i*Math.PI/180;if(hi){const Cr=Math.sin(hi),xi=Math.cos(hi),Nr=[xi,-Cr,Cr,xi];Br._matMult(Nr),_i._matMult(Nr),co._matMult(Nr),Ri._matMult(Nr)}const Di=wt.stretch+wt.fixed,Ti=Mt.stretch+Mt.fixed;return{tl:Br,tr:_i,bl:co,br:Ri,tex:{x:S.paddedRect.x+Qc+Di,y:S.paddedRect.y+Qc+Ti,w:It.stretch+It.fixed-Di,h:ct.stretch+ct.fixed-Ti},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vi,pixelOffsetBR:$r,minFontScaleX:Rt/C/B,minFontScaleY:Ft/C/j,isSDF:u}};if(p&&(S.stretchX||S.stretchY)){const wt=R0(H,ve,re),Mt=R0(J,pe,ge);for(let It=0;It<wt.length-1;It++){const ct=wt[It],Yt=wt[It+1];for(let qt=0;qt<Mt.length-1;qt++)g.push(Pt(ct,Mt[qt],Yt,Mt[qt+1]))}}else g.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return g}function Zd(s,i,u){let p=0;for(const g of s)p+=Math.max(i,Math.min(u,g[1]))-Math.max(i,Math.min(u,g[0]));return p}function R0(s,i,u){const p=[{fixed:-Qc,stretch:0}];for(const[g,S]of s){const C=p[p.length-1];p.push({fixed:g-C.stretch,stretch:C.stretch}),p.push({fixed:g-C.stretch,stretch:C.stretch+(S-g)})}return p.push({fixed:i+Qc,stretch:u}),p}function Bu(s,i,u,p){return s/i*u+p}function Kd(s,i,u,p){return s-i*u/p}class Xd{constructor(i,u,p,g,S,C,T,M,B,j){if(this.boxStartIndex=i.length,B){let H=C.top,J=C.bottom;const te=C.collisionPadding;te&&(H-=te[1],J+=te[3]);let re=J-H;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let H=C.top*T-M[0],J=C.bottom*T+M[2],te=C.left*T-M[3],re=C.right*T+M[1];const ge=C.collisionPadding;if(ge&&(te-=ge[0]*T,H-=ge[1]*T,re+=ge[2]*T,J+=ge[3]*T),j){const ve=new A(te,H),pe=new A(re,H),$e=new A(te,J),ke=new A(re,J),Be=j*Math.PI/180;ve._rotate(Be),pe._rotate(Be),$e._rotate(Be),ke._rotate(Be),te=Math.min(ve.x,pe.x,$e.x,ke.x),re=Math.max(ve.x,pe.x,$e.x,ke.x),H=Math.min(ve.y,pe.y,$e.y,ke.y),J=Math.max(ve.y,pe.y,$e.y,ke.y)}i.emplaceBack(u.x,u.y,te,H,re,J,p,g,S)}this.boxEndIndex=i.length}}class hw{constructor(i=[],u=fw){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:p}=this,g=u[i];for(;i>0;){const S=i-1>>1,C=u[S];if(p(g,C)>=0)break;u[i]=C,i=S}u[i]=g}_down(i){const{data:u,compare:p}=this,g=this.length>>1,S=u[i];for(;i<g;){let C=1+(i<<1),T=u[C];const M=C+1;if(M<this.length&&p(u[M],T)<0&&(C=M,T=u[M]),p(T,S)>=0)break;u[i]=T,i=C}u[i]=S}}function fw(s,i){return s<i?-1:s>i?1:0}function dw(s,i=1,u=!1){let p=1/0,g=1/0,S=-1/0,C=-1/0;const T=s[0];for(let te=0;te<T.length;te++){const re=T[te];(!te||re.x<p)&&(p=re.x),(!te||re.y<g)&&(g=re.y),(!te||re.x>S)&&(S=re.x),(!te||re.y>C)&&(C=re.y)}const M=Math.min(S-p,C-g);let B=M/2;const j=new hw([],pw);if(M===0)return new A(p,g);for(let te=p;te<S;te+=M)for(let re=g;re<C;re+=M)j.push(new eh(te+B,re+B,B,s));let H=function(te){let re=0,ge=0,ve=0;const pe=te[0];for(let $e=0,ke=pe.length,Be=ke-1;$e<ke;Be=$e++){const He=pe[$e],et=pe[Be],Rt=He.x*et.y-et.x*He.y;ge+=(He.x+et.x)*Rt,ve+=(He.y+et.y)*Rt,re+=3*Rt}return new eh(ge/re,ve/re,0,te)}(s),J=j.length;for(;j.length;){const te=j.pop();(te.d>H.d||!H.d)&&(H=te,u&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,J)),te.max-H.d<=i||(B=te.h/2,j.push(new eh(te.p.x-B,te.p.y-B,B,s)),j.push(new eh(te.p.x+B,te.p.y-B,B,s)),j.push(new eh(te.p.x-B,te.p.y+B,B,s)),j.push(new eh(te.p.x+B,te.p.y+B,B,s)),J+=4)}return u&&(console.log(`num probes: ${J}`),console.log(`best distance: ${H.d}`)),H.p}function pw(s,i){return i.max-s.max}function eh(s,i,u,p){this.p=new A(s,i),this.h=u,this.d=function(g,S){let C=!1,T=1/0;for(let M=0;M<S.length;M++){const B=S[M];for(let j=0,H=B.length,J=H-1;j<H;J=j++){const te=B[j],re=B[J];te.y>g.y!=re.y>g.y&&g.x<(re.x-te.x)*(g.y-te.y)/(re.y-te.y)+te.x&&(C=!C),T=Math.min(T,A_(g,te,re))}}return(C?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const gg=Number.POSITIVE_INFINITY;function D0(s,i){return i[1]!==gg?function(u,p,g){let S=0,C=0;switch(p=Math.abs(p),g=Math.abs(g),u){case"top-right":case"top-left":case"top":C=g-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-g}switch(u){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,C]}(s,i[0],i[1]):function(u,p){let g=0,S=0;p<0&&(p=0);const C=p/Math.sqrt(2);switch(u){case"top-right":case"top-left":S=C-7;break;case"bottom-right":case"bottom-left":S=7-C;break;case"bottom":S=7-p;break;case"top":S=p-7}switch(u){case"top-right":case"bottom-right":g=-C;break;case"top-left":case"bottom-left":g=C;break;case"left":g=p;break;case"right":g=-p}return[g,S]}(s,i[0])}function yg(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function mw(s,i,u,p,g,S,C,T,M,B,j){let H=S.textMaxSize.evaluate(i,{});H===void 0&&(H=C);const J=s.layers[0].layout,te=J.get("icon-offset").evaluate(i,{},j),re=z0(u.horizontal),ge=C/24,ve=s.tilePixelRatio*ge,pe=s.tilePixelRatio*H/24,$e=s.tilePixelRatio*T,ke=s.tilePixelRatio*J.get("symbol-spacing"),Be=J.get("text-padding")*s.tilePixelRatio,He=function(ct,Yt,qt,Ht=1){const pn=ct.get("icon-padding").evaluate(Yt,{},qt),br=pn&&pn.values;return[br[0]*Ht,br[1]*Ht,br[2]*Ht,br[3]*Ht]}(J,i,j,s.tilePixelRatio),et=J.get("text-max-angle")/180*Math.PI,Rt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",$t=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Ft=J.get("symbol-placement"),Pt=ke/2,wt=J.get("icon-text-fit");let Mt;p&&wt!=="none"&&(s.allowVerticalPlacement&&u.vertical&&(Mt=ag(p,u.vertical,wt,J.get("icon-text-fit-padding"),te,ge)),re&&(p=ag(p,re,wt,J.get("icon-text-fit-padding"),te,ge)));const It=(ct,Yt)=>{Yt.x<0||Yt.x>=xr||Yt.y<0||Yt.y>=xr||function(qt,Ht,pn,br,ci,Vo,uo,Br,_i,Ri,co,vi,$r,hi,Di,Ti,Cr,xi,Nr,zi,Tn,qo,Bi,$i,bi){const hn=qt.addToLineVertexArray(Ht,pn);let Sa,wi,ra,ia,Cn=0,ol=0,rh=0,kf=0,Cg=-1,Eg=-1;const al={};let N0=Gr(""),kg=0,Ag=0;if(Br._unevaluatedLayout.getValue("text-radial-offset")===void 0?[kg,Ag]=Br.layout.get("text-offset").evaluate(Tn,{},$i).map(Co=>Co*ui):(kg=Br.layout.get("text-radial-offset").evaluate(Tn,{},$i)*ui,Ag=gg),qt.allowVerticalPlacement&&br.vertical){const Co=Br.layout.get("text-rotate").evaluate(Tn,{},$i)+90;ra=new Xd(_i,Ht,Ri,co,vi,br.vertical,$r,hi,Di,Co),uo&&(ia=new Xd(_i,Ht,Ri,co,vi,uo,Cr,xi,Di,Co))}if(ci){const Co=Br.layout.get("icon-rotate").evaluate(Tn,{}),Er=Br.layout.get("icon-text-fit")!=="none",Ni=F0(ci,Co,Bi,Er),Af=uo?F0(uo,Co,Bi,Er):void 0;wi=new Xd(_i,Ht,Ri,co,vi,ci,Cr,xi,!1,Co),Cn=4*Ni.length;const V0=qt.iconSizeData;let $u=null;V0.kind==="source"?($u=[_s*Br.layout.get("icon-size").evaluate(Tn,{})],$u[0]>Gl&&Le(`${qt.layerIds[0]}: Value for "icon-size" is >= ${xf}. Reduce your "icon-size".`)):V0.kind==="composite"&&($u=[_s*qo.compositeIconSizes[0].evaluate(Tn,{},$i),_s*qo.compositeIconSizes[1].evaluate(Tn,{},$i)],($u[0]>Gl||$u[1]>Gl)&&Le(`${qt.layerIds[0]}: Value for "icon-size" is >= ${xf}. Reduce your "icon-size".`)),qt.addSymbols(qt.icon,Ni,$u,zi,Nr,Tn,l.WritingMode.none,Ht,hn.lineStartIndex,hn.lineLength,-1,$i),Cg=qt.icon.placedSymbolArray.length-1,Af&&(ol=4*Af.length,qt.addSymbols(qt.icon,Af,$u,zi,Nr,Tn,l.WritingMode.vertical,Ht,hn.lineStartIndex,hn.lineLength,-1,$i),Eg=qt.icon.placedSymbolArray.length-1)}const U0=Object.keys(br.horizontal);for(const Co of U0){const Er=br.horizontal[Co];if(!Sa){N0=Gr(Er.text);const Af=Br.layout.get("text-rotate").evaluate(Tn,{},$i);Sa=new Xd(_i,Ht,Ri,co,vi,Er,$r,hi,Di,Af)}const Ni=Er.positionedLines.length===1;if(rh+=Cf(qt,Ht,Er,Vo,Br,Di,Tn,Ti,hn,br.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Ni?U0:[Co],al,Cg,qo,$i),Ni)break}br.vertical&&(kf+=Cf(qt,Ht,br.vertical,Vo,Br,Di,Tn,Ti,hn,l.WritingMode.vertical,["vertical"],al,Eg,qo,$i));const gw=Sa?Sa.boxStartIndex:qt.collisionBoxArray.length,yw=Sa?Sa.boxEndIndex:qt.collisionBoxArray.length,_w=ra?ra.boxStartIndex:qt.collisionBoxArray.length,vw=ra?ra.boxEndIndex:qt.collisionBoxArray.length,xw=wi?wi.boxStartIndex:qt.collisionBoxArray.length,bw=wi?wi.boxEndIndex:qt.collisionBoxArray.length,Tg=ia?ia.boxStartIndex:qt.collisionBoxArray.length,ww=ia?ia.boxEndIndex:qt.collisionBoxArray.length;let oa=-1;const ep=(Co,Er)=>Co&&Co.circleDiameter?Math.max(Co.circleDiameter,Er):Er;oa=ep(Sa,oa),oa=ep(ra,oa),oa=ep(wi,oa),oa=ep(ia,oa);const j0=oa>-1?1:0;j0&&(oa*=bi/ui),qt.glyphOffsetArray.length>=Jc.MAX_GLYPHS&&Le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&qt.addToSortKeyRanges(qt.symbolInstances.length,Tn.sortKey),qt.symbolInstances.emplaceBack(Ht.x,Ht.y,al.right>=0?al.right:-1,al.center>=0?al.center:-1,al.left>=0?al.left:-1,al.vertical||-1,Cg,Eg,N0,gw,yw,_w,vw,xw,bw,Tg,ww,Ri,rh,kf,Cn,ol,j0,0,$r,kg,Ag,oa)}(s,Yt,ct,u,p,g,Mt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,ve,[Be,Be,Be,Be],Rt,M,$e,He,$t,te,i,S,B,j,C)};if(Ft==="line")for(const ct of T0(i.geometry,0,0,xr,xr)){const Yt=O0(ct,ke,et,u.vertical||re,p,24,pe,s.overscaling,xr);for(const qt of Yt)re&&B0(s,re.text,Pt,qt)||It(ct,qt)}else if(Ft==="line-center"){for(const ct of i.geometry)if(ct.length>1){const Yt=cw(ct,et,u.vertical||re,p,24,pe);Yt&&It(ct,Yt)}}else if(i.type==="Polygon")for(const ct of Fd(i.geometry,0)){const Yt=dw(ct,16);It(ct[0],new Wl(Yt.x,Yt.y,0))}else if(i.type==="LineString")for(const ct of i.geometry)It(ct,new Wl(ct[0].x,ct[0].y,0));else if(i.type==="Point")for(const ct of i.geometry)for(const Yt of ct)It([Yt],new Wl(Yt.x,Yt.y,0))}function Cf(s,i,u,p,g,S,C,T,M,B,j,H,J,te,re){const ge=function($e,ke,Be,He,et,Rt,$t,Ft){const Pt=He.layout.get("text-rotate").evaluate(Rt,{})*Math.PI/180,wt=[];for(const Mt of ke.positionedLines)for(const It of Mt.positionedGlyphs){if(!It.rect)continue;const ct=It.rect||{};let Yt=o0+1,qt=!0,Ht=1,pn=0;const br=(et||Ft)&&It.vertical,ci=It.metrics.advance*It.scale/2;if(Ft&&ke.verticalizable&&(pn=Mt.lineOffset/2-(It.imageName?-(ui-It.metrics.width*It.scale)/2:(It.scale-1)*ui)),It.imageName){const Nr=$t[It.imageName];qt=Nr.sdf,Ht=Nr.pixelRatio,Yt=So/Ht}const Vo=et?[It.x+ci,It.y]:[0,0];let uo=et?[0,0]:[It.x+ci+Be[0],It.y+Be[1]-pn],Br=[0,0];br&&(Br=uo,uo=[0,0]);const _i=(It.metrics.left-Yt)*It.scale-ci+uo[0],Ri=(-It.metrics.top-Yt)*It.scale+uo[1],co=_i+ct.w*It.scale/Ht,vi=Ri+ct.h*It.scale/Ht,$r=new A(_i,Ri),hi=new A(co,Ri),Di=new A(_i,vi),Ti=new A(co,vi);if(br){const Nr=new A(-ci,ci-Xc),zi=-Math.PI/2,Tn=ui/2-ci,qo=new A(5-Xc-Tn,-(It.imageName?Tn:0)),Bi=new A(...Br);$r._rotateAround(zi,Nr)._add(qo)._add(Bi),hi._rotateAround(zi,Nr)._add(qo)._add(Bi),Di._rotateAround(zi,Nr)._add(qo)._add(Bi),Ti._rotateAround(zi,Nr)._add(qo)._add(Bi)}if(Pt){const Nr=Math.sin(Pt),zi=Math.cos(Pt),Tn=[zi,-Nr,Nr,zi];$r._matMult(Tn),hi._matMult(Tn),Di._matMult(Tn),Ti._matMult(Tn)}const Cr=new A(0,0),xi=new A(0,0);wt.push({tl:$r,tr:hi,bl:Di,br:Ti,tex:ct,writingMode:ke.writingMode,glyphOffset:Vo,sectionIndex:It.sectionIndex,isSDF:qt,pixelOffsetTL:Cr,pixelOffsetBR:xi,minFontScaleX:0,minFontScaleY:0})}return wt}(0,u,T,g,S,C,p,s.allowVerticalPlacement),ve=s.textSizeData;let pe=null;ve.kind==="source"?(pe=[_s*g.layout.get("text-size").evaluate(C,{})],pe[0]>Gl&&Le(`${s.layerIds[0]}: Value for "text-size" is >= ${xf}. Reduce your "text-size".`)):ve.kind==="composite"&&(pe=[_s*te.compositeTextSizes[0].evaluate(C,{},re),_s*te.compositeTextSizes[1].evaluate(C,{},re)],(pe[0]>Gl||pe[1]>Gl)&&Le(`${s.layerIds[0]}: Value for "text-size" is >= ${xf}. Reduce your "text-size".`)),s.addSymbols(s.text,ge,pe,T,S,C,B,i,M.lineStartIndex,M.lineLength,J,re);for(const $e of j)H[$e]=s.text.placedSymbolArray.length-1;return 4*ge.length}function z0(s){for(const i in s)return s[i];return null}function B0(s,i,u,p){const g=s.compareText;if(i in g){const S=g[i];for(let C=S.length-1;C>=0;C--)if(p.dist(S[C])<u)return!0}else g[i]=[];return g[i].push(p),!1}const _g=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ef{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=p>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const S=_g[15&p];if(!S)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(i,2,1),[T]=new Uint32Array(i,4,1);return new Ef(T,C,S,i)}constructor(i,u=64,p=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const S=_g.indexOf(this.ArrayType),C=2*i*this.ArrayType.BYTES_PER_ELEMENT,T=i*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+M,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+C+T+M),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+M,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=u,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Yd(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:C,nodeSize:T}=this,M=[0,S.length-1,0],B=[];for(;M.length;){const j=M.pop()||0,H=M.pop()||0,J=M.pop()||0;if(H-J<=T){for(let ve=J;ve<=H;ve++){const pe=C[2*ve],$e=C[2*ve+1];pe>=i&&pe<=p&&$e>=u&&$e<=g&&B.push(S[ve])}continue}const te=J+H>>1,re=C[2*te],ge=C[2*te+1];re>=i&&re<=p&&ge>=u&&ge<=g&&B.push(S[te]),(j===0?i<=re:u<=ge)&&(M.push(J),M.push(te-1),M.push(1-j)),(j===0?p>=re:g>=ge)&&(M.push(te+1),M.push(H),M.push(1-j))}return B}within(i,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:S,nodeSize:C}=this,T=[0,g.length-1,0],M=[],B=p*p;for(;T.length;){const j=T.pop()||0,H=T.pop()||0,J=T.pop()||0;if(H-J<=C){for(let ve=J;ve<=H;ve++)$0(S[2*ve],S[2*ve+1],i,u)<=B&&M.push(g[ve]);continue}const te=J+H>>1,re=S[2*te],ge=S[2*te+1];$0(re,ge,i,u)<=B&&M.push(g[te]),(j===0?i-p<=re:u-p<=ge)&&(T.push(J),T.push(te-1),T.push(1-j)),(j===0?i+p>=re:u+p>=ge)&&(T.push(te+1),T.push(H),T.push(1-j))}return M}}function Yd(s,i,u,p,g,S){if(g-p<=u)return;const C=p+g>>1;vg(s,i,C,p,g,S),Yd(s,i,u,p,C-1,1-S),Yd(s,i,u,C+1,g,1-S)}function vg(s,i,u,p,g,S){for(;g>p;){if(g-p>600){const B=g-p+1,j=u-p+1,H=Math.log(B),J=.5*Math.exp(2*H/3),te=.5*Math.sqrt(H*J*(B-J)/B)*(j-B/2<0?-1:1);vg(s,i,u,Math.max(p,Math.floor(u-j*J/B+te)),Math.min(g,Math.floor(u+(B-j)*J/B+te)),S)}const C=i[2*u+S];let T=p,M=g;for(th(s,i,p,u),i[2*g+S]>C&&th(s,i,p,g);T<M;){for(th(s,i,T,M),T++,M--;i[2*T+S]<C;)T++;for(;i[2*M+S]>C;)M--}i[2*p+S]===C?th(s,i,p,M):(M++,th(s,i,M,g)),M<=u&&(p=M+1),u<=M&&(g=M-1)}}function th(s,i,u,p){Jd(s,u,p),Jd(i,2*u,2*p),Jd(i,2*u+1,2*p+1)}function Jd(s,i,u){const p=s[i];s[i]=s[u],s[u]=p}function $0(s,i,u,p){const g=s-u,S=i-p;return g*g+S*S}var xg;l.PerformanceMarkers=void 0,(xg=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",xg.load="load",xg.fullLoad="fullLoad";let Qd=null,Zl=[];const nh=1e3/60,bg="loadTime",wg="fullLoadTime",Sg={mark(s){performance.mark(s)},frame(s){const i=s;Qd!=null&&Zl.push(i-Qd),Qd=i},clearMetrics(){Qd=null,Zl=[],performance.clearMeasures(bg),performance.clearMeasures(wg);for(const s in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[s])},getPerformanceMetrics(){performance.measure(bg,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(wg,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const s=performance.getEntriesByName(bg)[0].duration,i=performance.getEntriesByName(wg)[0].duration,u=Zl.length,p=1/(Zl.reduce((S,C)=>S+C,0)/u/1e3),g=Zl.filter(S=>S>nh).reduce((S,C)=>S+(C-nh)/nh,0);return{loadTime:s,fullLoadTime:i,fps:p,percentDroppedFrames:g/(u+g)*100,totalFrames:u}}};l.AJAXError=X,l.ARRAY_TYPE=qc,l.Actor=class{constructor(s,i,u){this.receive=p=>{const g=p.data,S=g.id;if(S&&(!g.targetMapId||this.mapId===g.targetMapId))if(g.type==="<cancel>"){delete this.tasks[S];const C=this.cancelCallbacks[S];delete this.cancelCallbacks[S],C&&C()}else Ge()||g.mustQueue?(this.tasks[S]=g,this.taskQueue.push(S),this.invoker.trigger()):this.processTask(S,g)},this.process=()=>{if(!this.taskQueue.length)return;const p=this.taskQueue.shift(),g=this.tasks[p];delete this.tasks[p],this.taskQueue.length&&this.invoker.trigger(),g&&this.processTask(p,g)},this.target=s,this.parent=i,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new hg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ge()?s:window}send(s,i,u,p,g=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[S]=u);const C=yt(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:s,hasCallback:!!u,targetMapId:p,mustQueue:g,sourceMapId:this.mapId,data:ma(i,C)},C),{cancel:()=>{u&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}processTask(s,i){if(i.type==="<response>"){const u=this.callbacks[s];delete this.callbacks[s],u&&(i.error?u(zo(i.error)):u(null,zo(i.data)))}else{let u=!1;const p=yt(this.globalScope)?void 0:[],g=i.hasCallback?(T,M)=>{u=!0,delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:T?ma(T):null,data:ma(M,p)},p)}:T=>{u=!0};let S=null;const C=zo(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,C,g);else if(this.parent.getWorkerSource){const T=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,T[0],C.source)[T[1]](C,g)}else g(new Error(`Could not find function ${i.type}`));!u&&S&&S.cancel&&(this.cancelCallbacks[s]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Js,l.CanonicalTileID=pg,l.CollisionBoxArray=_,l.CollisionCircleLayoutArray=class extends Sn{},l.Color=wn,l.DEMData=w0,l.DataConstantProperty=Lt,l.DictionaryCoder=S0,l.EXTENT=xr,l.ErrorEvent=Bn,l.EvaluationParameters=Sr,l.Event=Qn,l.Evented=Qr,l.FeatureIndex=E0,l.FillBucket=Ru,l.FillExtrusionBucket=Ua,l.GeoJSONFeature=C0,l.ImageAtlas=ig,l.ImagePosition=rg,l.KDBush=Ef,l.LineBucket=Gm,l.LineStripIndexArray=class extends o{},l.LngLat=Hl,l.MercatorCoordinate=Wd,l.ONE_EM=ui,l.OverscaledTileID=na,l.PerformanceUtils=Sg,l.Point=A,l.Pos3dArray=class extends Fc{},l.PosArray=fe,l.Properties=Mi,l.Protobuf=tg,l.QuadTriangleArray=class extends zc{},l.RGBAImage=Uo,l.RasterBoundsArray=class extends _a{},l.RequestPerformance=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},l.SegmentVector=_t,l.SymbolBucket=Jc,l.Transitionable=Mc,l.TriangleIndexArray=it,l.Uniform1f=va,l.Uniform1i=class extends Li{constructor(s,i){super(s,i),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},l.Uniform2f=class extends Li{constructor(s,i){super(s,i),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},l.Uniform3f=class extends Li{constructor(s,i){super(s,i),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},l.Uniform4f=ds,l.UniformColor=Oi,l.UniformMatrix4f=class extends Li{constructor(s,i){super(s,i),this.current=si}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let i=1;i<16;i++)if(s[i]!==this.current[i]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},l.UnwrappedTileID=wf,l.ValidationError=vt,l.ZoomHistory=Eu,l.addDynamicAttributes=sg,l.arrayBufferToImage=function(s,i){const u=new Image;u.onload=()=>{i(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=zt})},u.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(s)],{type:"image/png"});u.src=s.byteLength?URL.createObjectURL(p):zt},l.arrayBufferToImageBitmap=function(s,i){const u=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(u).then(p=>{i(null,p)}).catch(p=>{i(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(s,i,u){if(!s.length)return u(null,[]);let p=s.length;const g=new Array(s.length);let S=null;s.forEach((C,T)=>{i(C,(M,B)=>{M&&(S=M),g[T]=B,--p==0&&u(S,g)})})},l.bezier=N,l.browser=_e,l.clamp=R,l.clipLine=T0,l.clone=function(s){var i=new qc(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},l.clone$1=le,l.collisionCircleLayout=Gb,l.config=we,l.copy=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},l.create=function(){var s=new qc(16);return qc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},l.createExpression=qs,l.createFilter=xc,l.createLayout=Or,l.createStyleLayer=function(s){if(s.type==="custom")return new lw(s);switch(s.type){case"background":return new ow(s);case"circle":return new Em(s);case"fill":return new Dd(s);case"fill-extrusion":return new Zc(s);case"heatmap":return new Fb(s);case"hillshade":return new Pd(s);case"line":return new Vb(s);case"raster":return new sw(s);case"symbol":return new Gd(s)}},l.deepEqual=function s(i,u){if(Array.isArray(i)){if(!Array.isArray(u)||i.length!==u.length)return!1;for(let p=0;p<i.length;p++)if(!s(i[p],u[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&u!==null){if(typeof u!="object"||Object.keys(i).length!==Object.keys(u).length)return!1;for(const p in i)if(!s(i[p],u[p]))return!1;return!0}return i===u},l.defaultEasing=Z,l.derefLayers=function(s){s=s.slice();const i=Object.create(null);for(let u=0;u<s.length;u++)i[s[u].id]=s[u];for(let u=0;u<s.length;u++)"ref"in s[u]&&(s[u]=Gi(s[u],i[s[u].ref]));return s},l.diffStyles=function(s,i){if(!s)return[{command:_n.setStyle,args:[i]}];let u=[];try{if(!Gn(s.version,i.version))return[{command:_n.setStyle,args:[i]}];Gn(s.center,i.center)||u.push({command:_n.setCenter,args:[i.center]}),Gn(s.zoom,i.zoom)||u.push({command:_n.setZoom,args:[i.zoom]}),Gn(s.bearing,i.bearing)||u.push({command:_n.setBearing,args:[i.bearing]}),Gn(s.pitch,i.pitch)||u.push({command:_n.setPitch,args:[i.pitch]}),Gn(s.sprite,i.sprite)||u.push({command:_n.setSprite,args:[i.sprite]}),Gn(s.glyphs,i.glyphs)||u.push({command:_n.setGlyphs,args:[i.glyphs]}),Gn(s.transition,i.transition)||u.push({command:_n.setTransition,args:[i.transition]}),Gn(s.light,i.light)||u.push({command:_n.setLight,args:[i.light]});const p={},g=[];(function(C,T,M,B){let j;for(j in T=T||{},C=C||{})Object.prototype.hasOwnProperty.call(C,j)&&(Object.prototype.hasOwnProperty.call(T,j)||Mo(j,M,B));for(j in T)Object.prototype.hasOwnProperty.call(T,j)&&(Object.prototype.hasOwnProperty.call(C,j)?Gn(C[j],T[j])||(C[j].type==="geojson"&&T[j].type==="geojson"&&ei(C,T,j)?M.push({command:_n.setGeoJSONSourceData,args:[j,T[j].data]}):Lo(j,T,M,B)):_o(j,T,M))})(s.sources,i.sources,g,p);const S=[];s.layers&&s.layers.forEach(C=>{p[C.source]?u.push({command:_n.removeLayer,args:[C.id]}):S.push(C)}),u=u.concat(g),function(C,T,M){T=T||[];const B=(C=C||[]).map(Oo),j=T.map(Oo),H=C.reduce(vo,{}),J=T.reduce(vo,{}),te=B.slice(),re=Object.create(null);let ge,ve,pe,$e,ke,Be,He;for(ge=0,ve=0;ge<B.length;ge++)pe=B[ge],Object.prototype.hasOwnProperty.call(J,pe)?ve++:(M.push({command:_n.removeLayer,args:[pe]}),te.splice(te.indexOf(pe,ve),1));for(ge=0,ve=0;ge<j.length;ge++)pe=j[j.length-1-ge],te[te.length-1-ge]!==pe&&(Object.prototype.hasOwnProperty.call(H,pe)?(M.push({command:_n.removeLayer,args:[pe]}),te.splice(te.lastIndexOf(pe,te.length-ve),1)):ve++,Be=te[te.length-ge],M.push({command:_n.addLayer,args:[J[pe],Be]}),te.splice(te.length-ge,0,pe),re[pe]=!0);for(ge=0;ge<j.length;ge++)if(pe=j[ge],$e=H[pe],ke=J[pe],!re[pe]&&!Gn($e,ke))if(Gn($e.source,ke.source)&&Gn($e["source-layer"],ke["source-layer"])&&Gn($e.type,ke.type)){for(He in Yn($e.layout,ke.layout,M,pe,null,_n.setLayoutProperty),Yn($e.paint,ke.paint,M,pe,null,_n.setPaintProperty),Gn($e.filter,ke.filter)||M.push({command:_n.setFilter,args:[pe,ke.filter]}),Gn($e.minzoom,ke.minzoom)&&Gn($e.maxzoom,ke.maxzoom)||M.push({command:_n.setLayerZoomRange,args:[pe,ke.minzoom,ke.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Yn($e[He],ke[He],M,pe,He.slice(6),_n.setPaintProperty):Gn($e[He],ke[He])||M.push({command:_n.setLayerProperty,args:[pe,He,ke[He]]}));for(He in ke)Object.prototype.hasOwnProperty.call(ke,He)&&!Object.prototype.hasOwnProperty.call($e,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?Yn($e[He],ke[He],M,pe,He.slice(6),_n.setPaintProperty):Gn($e[He],ke[He])||M.push({command:_n.setLayerProperty,args:[pe,He,ke[He]]}))}else M.push({command:_n.removeLayer,args:[pe]}),Be=te[te.lastIndexOf(pe)+1],M.push({command:_n.addLayer,args:[ke,Be]})}(S,i.layers,u)}catch(p){console.warn("Unable to compute style diff:",p),u=[{command:_n.setStyle,args:[i]}]}return u},l.dot=function(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]+s[3]*i[3]},l.earthRadius=Hd,l.emitValidationErrors=cs,l.emptyStyle=function(){const s={},i=Je.$version;for(const u in Je.$root){const p=Je.$root[u];if(p.required){let g=null;g=u==="version"?i:p.type==="array"?[]:{},g!=null&&(s[u]=g)}}return s},l.equals=function(s,i){var u=s[0],p=s[1],g=s[2],S=s[3],C=s[4],T=s[5],M=s[6],B=s[7],j=s[8],H=s[9],J=s[10],te=s[11],re=s[12],ge=s[13],ve=s[14],pe=s[15],$e=i[0],ke=i[1],Be=i[2],He=i[3],et=i[4],Rt=i[5],$t=i[6],Ft=i[7],Pt=i[8],wt=i[9],Mt=i[10],It=i[11],ct=i[12],Yt=i[13],qt=i[14],Ht=i[15];return Math.abs(u-$e)<=Ai*Math.max(1,Math.abs(u),Math.abs($e))&&Math.abs(p-ke)<=Ai*Math.max(1,Math.abs(p),Math.abs(ke))&&Math.abs(g-Be)<=Ai*Math.max(1,Math.abs(g),Math.abs(Be))&&Math.abs(S-He)<=Ai*Math.max(1,Math.abs(S),Math.abs(He))&&Math.abs(C-et)<=Ai*Math.max(1,Math.abs(C),Math.abs(et))&&Math.abs(T-Rt)<=Ai*Math.max(1,Math.abs(T),Math.abs(Rt))&&Math.abs(M-$t)<=Ai*Math.max(1,Math.abs(M),Math.abs($t))&&Math.abs(B-Ft)<=Ai*Math.max(1,Math.abs(B),Math.abs(Ft))&&Math.abs(j-Pt)<=Ai*Math.max(1,Math.abs(j),Math.abs(Pt))&&Math.abs(H-wt)<=Ai*Math.max(1,Math.abs(H),Math.abs(wt))&&Math.abs(J-Mt)<=Ai*Math.max(1,Math.abs(J),Math.abs(Mt))&&Math.abs(te-It)<=Ai*Math.max(1,Math.abs(te),Math.abs(It))&&Math.abs(re-ct)<=Ai*Math.max(1,Math.abs(re),Math.abs(ct))&&Math.abs(ge-Yt)<=Ai*Math.max(1,Math.abs(ge),Math.abs(Yt))&&Math.abs(ve-qt)<=Ai*Math.max(1,Math.abs(ve),Math.abs(qt))&&Math.abs(pe-Ht)<=Ai*Math.max(1,Math.abs(pe),Math.abs(Ht))},l.evaluateSizeForFeature=function(s,{uSize:i,uSizeT:u},{lowerSize:p,upperSize:g}){return s.kind==="source"?p/_s:s.kind==="composite"?Hi.number(p/_s,g/_s,u):i},l.evaluateSizeForZoom=function(s,i){let u=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:S,maxZoom:C}=s,T=g?R(bo.interpolationFactor(g,i,S,C),0,1):0;s.kind==="camera"?p=Hi.number(s.minSize,s.maxSize,T):u=T}return{uSizeT:u,uSize:p}},l.evaluateVariableOffset=D0,l.evented=ga,l.extend=G,l.filterObject=K,l.findLineIntersection=function(s,i,u,p){const g=i.y-s.y,S=i.x-s.x,C=p.y-u.y,T=p.x-u.x,M=C*S-T*g;if(M===0)return null;const B=(T*(s.y-u.y)-C*(s.x-u.x))/M;return new A(s.x+B*S,s.y+B*g)},l.fromScaling=function(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},l.getAnchorAlignment=og,l.getAnchorJustification=yg,l.getArrayBuffer=Dt,l.getDefaultExportFromCjs=x,l.getJSON=function(s,i){return Gt(G(s,{type:"json"}),i)},l.getOverlapMode=bf,l.getProtocolAction=lt,l.getRTLTextPluginStatus=Dl,l.getReferrer=oe,l.getVideo=function(s,i){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let p=0;p<s.length;p++){const g=window.document.createElement("source");Qt(s[p])||(u.crossOrigin="Anonymous"),g.src=s[p],u.appendChild(g)}return{cancel:()=>{}}},l.groupByLayout=function(s,i){const u={};for(let g=0;g<s.length;g++){const S=i&&i[s[g].id]||Cc(s[g]);i&&(i[s[g].id]=S);let C=u[S];C||(C=u[S]=[]),C.push(s[g])}const p=[];for(const g in u)p.push(u[g]);return p},l.identity=kd,l.interpolate=Hi,l.invert=function(s,i){var u=i[0],p=i[1],g=i[2],S=i[3],C=i[4],T=i[5],M=i[6],B=i[7],j=i[8],H=i[9],J=i[10],te=i[11],re=i[12],ge=i[13],ve=i[14],pe=i[15],$e=u*T-p*C,ke=u*M-g*C,Be=u*B-S*C,He=p*M-g*T,et=p*B-S*T,Rt=g*B-S*M,$t=j*ge-H*re,Ft=j*ve-J*re,Pt=j*pe-te*re,wt=H*ve-J*ge,Mt=H*pe-te*ge,It=J*pe-te*ve,ct=$e*It-ke*Mt+Be*wt+He*Pt-et*Ft+Rt*$t;return ct?(s[0]=(T*It-M*Mt+B*wt)*(ct=1/ct),s[1]=(g*Mt-p*It-S*wt)*ct,s[2]=(ge*Rt-ve*et+pe*He)*ct,s[3]=(J*et-H*Rt-te*He)*ct,s[4]=(M*Pt-C*It-B*Ft)*ct,s[5]=(u*It-g*Pt+S*Ft)*ct,s[6]=(ve*Be-re*Rt-pe*ke)*ct,s[7]=(j*Rt-J*Be+te*ke)*ct,s[8]=(C*Mt-T*Pt+B*$t)*ct,s[9]=(p*Pt-u*Mt-S*$t)*ct,s[10]=(re*et-ge*Be+pe*$e)*ct,s[11]=(H*Be-j*et-te*$e)*ct,s[12]=(T*Ft-C*wt-M*$t)*ct,s[13]=(u*wt-p*Ft+g*$t)*ct,s[14]=(ge*ke-re*He-ve*$e)*ct,s[15]=(j*He-H*ke+J*$e)*ct,s):null},l.isImageBitmap=At,l.isSafari=yt,l.isWorker=Ge,l.keysDifference=function(s,i){const u=[];for(const p in s)p in i||u.push(p);return u},l.lazyLoadRTLTextPlugin=function(){Bo.isLoading()||Bo.isLoaded()||Dl()!=="deferred"||wd()},l.makeRequest=Gt,l.mapObject=ae,l.mercatorXfromLng=v0,l.mercatorYfromLat=x0,l.mercatorZfromAltitude=b0,l.mul=M_,l.mul$1=function(s,i,u){return s[0]=i[0]*u[0],s[1]=i[1]*u[1],s[2]=i[2]*u[2],s[3]=i[3]*u[3],s},l.multiply=Cm,l.nextPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},l.operations=_n,l.ortho=function(s,i,u,p,g,S,C){var T=1/(i-u),M=1/(p-g),B=1/(S-C);return s[0]=-2*T,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*M,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*B,s[11]=0,s[12]=(i+u)*T,s[13]=(g+p)*M,s[14]=(C+S)*B,s[15]=1,s},l.parseCacheControl=function(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,g,S)=>{const C=g||S;return i[p]=!C||C.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i},l.parseGlyphPbf=function(s){return new tg(s).readFields(Zb,[])},l.pbf=Km,l.performSymbolLayout=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=xr/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const i=s.bucket.layers[0].layout,u=s.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:u["icon-size"].possiblyEvaluate(new Sr(s.bucket.zoom+1),s.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new Sr(s.bucket.zoom+1),s.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new Sr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:B}=s.bucket.textSizeData;p.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Sr(M),s.canonical),u["text-size"].possiblyEvaluate(new Sr(B),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:B}=s.bucket.iconSizeData;p.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Sr(M),s.canonical),u["icon-size"].possiblyEvaluate(new Sr(B),s.canonical)]}const g=i.get("text-line-height")*ui,S=i.get("text-rotation-alignment")!=="viewport"&&i.get("symbol-placement")!=="point",C=i.get("text-keep-upright"),T=i.get("text-size");for(const M of s.bucket.features){const B=i.get("text-font").evaluate(M,{},s.canonical).join(","),j=T.evaluate(M,{},s.canonical),H=p.layoutTextSize.evaluate(M,{},s.canonical),J=p.layoutIconSize.evaluate(M,{},s.canonical),te={horizontal:{},vertical:void 0},re=M.text;let ge,ve=[0,0];if(re){const ke=re.toString(),Be=i.get("text-letter-spacing").evaluate(M,{},s.canonical)*ui,He=Tc(ke)?Be:0,et=i.get("text-anchor").evaluate(M,{},s.canonical),Rt=i.get("text-variable-anchor");if(!Rt){const Mt=i.get("text-radial-offset").evaluate(M,{},s.canonical);ve=Mt?D0(et,[Mt*ui,gg]):i.get("text-offset").evaluate(M,{},s.canonical).map(It=>It*ui)}let $t=S?"center":i.get("text-justify").evaluate(M,{},s.canonical);const Ft=i.get("symbol-placement"),Pt=Ft==="point"?i.get("text-max-width").evaluate(M,{},s.canonical)*ui:0,wt=()=>{s.bucket.allowVerticalPlacement&&Ac(ke)&&(te.vertical=Vd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,et,"left",He,ve,l.WritingMode.vertical,!0,Ft,H,j))};if(!S&&Rt){const Mt=$t==="auto"?Rt.map(ct=>yg(ct)):[$t];let It=!1;for(let ct=0;ct<Mt.length;ct++){const Yt=Mt[ct];if(!te.horizontal[Yt])if(It)te.horizontal[Yt]=te.horizontal[0];else{const qt=Vd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,"center",Yt,He,ve,l.WritingMode.horizontal,!1,Ft,H,j);qt&&(te.horizontal[Yt]=qt,It=qt.positionedLines.length===1)}}wt()}else{$t==="auto"&&($t=yg(et));const Mt=Vd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,et,$t,He,ve,l.WritingMode.horizontal,!1,Ft,H,j);Mt&&(te.horizontal[$t]=Mt),wt(),Ac(ke)&&S&&C&&(te.vertical=Vd(re,s.glyphMap,s.glyphPositions,s.imagePositions,B,Pt,g,et,$t,He,ve,l.WritingMode.vertical,!1,Ft,H,j))}}let pe=!1;if(M.icon&&M.icon.name){const ke=s.imageMap[M.icon.name];ke&&(ge=ew(s.imagePositions[M.icon.name],i.get("icon-offset").evaluate(M,{},s.canonical),i.get("icon-anchor").evaluate(M,{},s.canonical)),pe=!!ke.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=pe:s.bucket.sdfIcons!==pe&&Le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==s.bucket.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const $e=z0(te.horizontal)||te.vertical;s.bucket.iconsInText=!!$e&&$e.iconsInText,($e||ge)&&mw(s.bucket,M,te,ge,s.imageMap,p,H,J,ve,pe,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},l.perspective=function(s,i,u,p,g){var S,C=1/Math.tan(i/2);return s[0]=C/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=C,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+p)*(S=1/(p-g)),s[14]=2*g*p*S):(s[10]=-1,s[14]=-2*p),s},l.pick=function(s,i){const u={};for(let p=0;p<i.length;p++){const g=i[p];g in s&&(u[g]=s[g])}return u},l.plugin=Bo,l.pointGeometry=b,l.polygonIntersectsPolygon=k_,l.potpack=a0,l.register=Bt,l.registerForPluginStateChange=function(s){return s({pluginStatus:Xi,pluginURL:Jo}),ga.on("pluginStateChange",s),s},l.renderColorRamp=F_,l.rotateX=function(s,i,u){var p=Math.sin(u),g=Math.cos(u),S=i[4],C=i[5],T=i[6],M=i[7],B=i[8],j=i[9],H=i[10],J=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=S*g+B*p,s[5]=C*g+j*p,s[6]=T*g+H*p,s[7]=M*g+J*p,s[8]=B*g-S*p,s[9]=j*g-C*p,s[10]=H*g-T*p,s[11]=J*g-M*p,s},l.rotateZ=function(s,i,u){var p=Math.sin(u),g=Math.cos(u),S=i[0],C=i[1],T=i[2],M=i[3],B=i[4],j=i[5],H=i[6],J=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=S*g+B*p,s[1]=C*g+j*p,s[2]=T*g+H*p,s[3]=M*g+J*p,s[4]=B*g-S*p,s[5]=j*g-C*p,s[6]=H*g-T*p,s[7]=J*g-M*p,s},l.sameOrigin=Qt,l.scale=function(s,i,u){var p=u[0],g=u[1],S=u[2];return s[0]=i[0]*p,s[1]=i[1]*p,s[2]=i[2]*p,s[3]=i[3]*p,s[4]=i[4]*g,s[5]=i[5]*g,s[6]=i[6]*g,s[7]=i[7]*g,s[8]=i[8]*S,s[9]=i[9]*S,s[10]=i[10]*S,s[11]=i[11]*S,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},l.setRTLTextPlugin=function(s,i,u=!1){if(Xi===Ol||Xi===Au||Xi===Fl)throw new Error("setRTLTextPlugin cannot be called multiple times.");Jo=_e.resolveURL(s),Xi=Ol,Rl=i,Xs(),u||wd()},l.sphericalToCartesian=function([s,i,u]){return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:s*Math.cos(i)*Math.sin(u),y:s*Math.sin(i)*Math.sin(u),z:s*Math.cos(u)}},l.toEvaluationFeature=Lu,l.transformMat4=Ad,l.translate=function(s,i,u){var p,g,S,C,T,M,B,j,H,J,te,re,ge=u[0],ve=u[1],pe=u[2];return i===s?(s[12]=i[0]*ge+i[4]*ve+i[8]*pe+i[12],s[13]=i[1]*ge+i[5]*ve+i[9]*pe+i[13],s[14]=i[2]*ge+i[6]*ve+i[10]*pe+i[14],s[15]=i[3]*ge+i[7]*ve+i[11]*pe+i[15]):(g=i[1],S=i[2],C=i[3],T=i[4],M=i[5],B=i[6],j=i[7],H=i[8],J=i[9],te=i[10],re=i[11],s[0]=p=i[0],s[1]=g,s[2]=S,s[3]=C,s[4]=T,s[5]=M,s[6]=B,s[7]=j,s[8]=H,s[9]=J,s[10]=te,s[11]=re,s[12]=p*ge+T*ve+H*pe+i[12],s[13]=g*ge+M*ve+J*pe+i[13],s[14]=S*ge+B*ve+te*pe+i[14],s[15]=C*ge+j*ve+re*pe+i[15]),s},l.triggerPluginCompletionEvent=of,l.unicodeBlockLookup=ht,l.uniqueId=function(){return ee++},l.v8Spec=Je,l.validateCustomStyleLayer=function(s){const i=[],u=s.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},l.validateLight=tr,l.validateStyle=ln,l.vectorTile=Na,l.warnOnce=Le,l.wrap=q}),c(["./shared"],function(l){class x{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,Q){for(const Se of W){this._layerConfigs[Se.id]=Se;const Ce=this._layers[Se.id]=l.createStyleLayer(Se);Ce._featureFilter=l.createFilter(Ce.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of Q)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const ce=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Se of ce){const Ce=Se.map(at=>this._layers[at.id]),De=Ce[0];if(De.visibility==="none")continue;const Te=De.source||"";let Ae=this.familiesBySource[Te];Ae||(Ae=this.familiesBySource[Te]={});const Ne=De.sourceLayer||"_geojsonTileLayer";let ot=Ae[Ne];ot||(ot=Ae[Ne]=[]),ot.push(Ce)}}}class b{constructor(W){const Q={},ce=[];for(const Te in W){const Ae=W[Te],Ne=Q[Te]={};for(const ot in Ae){const at=Ae[+ot];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const st={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};ce.push(st),Ne[ot]={rect:st,metrics:at.metrics}}}const{w:Se,h:Ce}=l.potpack(ce),De=new l.AlphaImage({width:Se||1,height:Ce||1});for(const Te in W){const Ae=W[Te];for(const Ne in Ae){const ot=Ae[+Ne];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const at=Q[Te][Ne].rect;l.AlphaImage.copy(ot.bitmap,De,{x:0,y:0},{x:at.x+1,y:at.y+1},ot.bitmap)}}this.image=De,this.positions=Q}}l.register("GlyphAtlas",b);class E{constructor(W){this.tileID=new l.OverscaledTileID(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(W,Q,ce,Se,Ce){this.status="parsing",this.data=W,this.collisionBoxArray=new l.CollisionBoxArray;const De=new l.DictionaryCoder(Object.keys(W.layers).sort()),Te=new l.FeatureIndex(this.tileID,this.promoteId);Te.bucketLayerIDs=[];const Ae={},Ne={featureIndex:Te,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ce},ot=Q.familiesBySource[this.source];for(const Fn in ot){const Nn=W.layers[Fn];if(!Nn)continue;Nn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wn=De.encode(Fn),cr=[];for(let Lr=0;Lr<Nn.length;Lr++){const pr=Nn.feature(Lr),Pr=Te.getId(pr,Fn);cr.push({feature:pr,id:Pr,index:Lr,sourceLayerIndex:wn})}for(const Lr of ot[Fn]){const pr=Lr[0];pr.source!==this.source&&l.warnOnce(`layer.source = ${pr.source} does not equal this.source = ${this.source}`),pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||pr.visibility!=="none"&&(A(Lr,this.zoom,ce),(Ae[pr.id]=pr.createBucket({index:Te.bucketLayerIDs.length,layers:Lr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wn,sourceID:this.source})).populate(cr,Ne,this.tileID.canonical),Te.bucketLayerIDs.push(Lr.map(Pr=>Pr.id)))}}let at,st,Jt,fn;const jt=l.mapObject(Ne.glyphDependencies,Fn=>Object.keys(Fn).map(Number));this.inFlightDependencies.forEach(Fn=>Fn==null?void 0:Fn.cancel()),this.inFlightDependencies=[];const Zt=++this.dependencySentinel;Object.keys(jt).length?this.inFlightDependencies.push(Se.send("getGlyphs",{uid:this.uid,stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"},(Fn,Nn)=>{Zt===this.dependencySentinel&&(at||(at=Fn,st=Nn,Wn.call(this)))})):st={};const rn=Object.keys(Ne.iconDependencies);rn.length?this.inFlightDependencies.push(Se.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},(Fn,Nn)=>{Zt===this.dependencySentinel&&(at||(at=Fn,Jt=Nn,Wn.call(this)))})):Jt={};const Hn=Object.keys(Ne.patternDependencies);function Wn(){if(at)return Ce(at);if(st&&Jt&&fn){const Fn=new b(st),Nn=new l.ImageAtlas(Jt,fn);for(const wn in Ae){const cr=Ae[wn];cr instanceof l.SymbolBucket?(A(cr.layers,this.zoom,ce),l.performSymbolLayout({bucket:cr,glyphMap:st,glyphPositions:Fn.positions,imageMap:Jt,imagePositions:Nn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):cr.hasPattern&&(cr instanceof l.LineBucket||cr instanceof l.FillBucket||cr instanceof l.FillExtrusionBucket)&&(A(cr.layers,this.zoom,ce),cr.addFeatures(Ne,this.tileID.canonical,Nn.patternPositions))}this.status="done",Ce(null,{buckets:Object.values(Ae).filter(wn=>!wn.isEmpty()),featureIndex:Te,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fn.image,imageAtlas:Nn,glyphMap:this.returnDependencies?st:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?Fn.positions:null})}}Hn.length?this.inFlightDependencies.push(Se.send("getImages",{icons:Hn,source:this.source,tileID:this.tileID,type:"patterns"},(Fn,Nn)=>{Zt===this.dependencySentinel&&(at||(at=Fn,fn=Nn,Wn.call(this)))})):fn={},Wn.call(this)}}function A(ye,W,Q){const ce=new l.EvaluationParameters(W);for(const Se of ye)Se.recalculate(ce,Q)}function L(ye,W){const Q=l.getArrayBuffer(ye.request,(ce,Se,Ce,De)=>{ce?W(ce):Se&&W(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Se)),rawData:Se,cacheControl:Ce,expires:De})});return()=>{Q.cancel(),W()}}class F{constructor(W,Q,ce,Se){this.actor=W,this.layerIndex=Q,this.availableImages=ce,this.loadVectorData=Se||L,this.loading={},this.loaded={}}loadTile(W,Q){const ce=W.uid;this.loading||(this.loading={});const Se=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.RequestPerformance(W.request),Ce=this.loading[ce]=new E(W);Ce.abort=this.loadVectorData(W,(De,Te)=>{if(delete this.loading[ce],De||!Te)return Ce.status="done",this.loaded[ce]=Ce,Q(De);const Ae=Te.rawData,Ne={};Te.expires&&(Ne.expires=Te.expires),Te.cacheControl&&(Ne.cacheControl=Te.cacheControl);const ot={};if(Se){const at=Se.finish();at&&(ot.resourceTiming=JSON.parse(JSON.stringify(at)))}Ce.vectorTile=Te.vectorTile,Ce.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,(at,st)=>{if(at||!st)return Q(at);Q(null,l.extend({rawTileData:Ae.slice(0)},st,Ne,ot))}),this.loaded=this.loaded||{},this.loaded[ce]=Ce})}reloadTile(W,Q){const ce=this.loaded,Se=W.uid;if(ce&&ce[Se]){const Ce=ce[Se];Ce.showCollisionBoxes=W.showCollisionBoxes,Ce.status==="parsing"?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,Q):Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,Q):Q())}}abortTile(W,Q){const ce=this.loading,Se=W.uid;ce&&ce[Se]&&ce[Se].abort&&(ce[Se].abort(),delete ce[Se]),Q()}removeTile(W,Q){const ce=this.loaded,Se=W.uid;ce&&ce[Se]&&delete ce[Se],Q()}}class ${constructor(){this.loaded={}}loadTile(W,Q){const{uid:ce,encoding:Se,rawImageData:Ce}=W,De=l.isImageBitmap(Ce)?this.getImageData(Ce):Ce,Te=new l.DEMData(ce,De,Se);this.loaded=this.loaded||{},this.loaded[ce]=Te,Q(null,Te)}getImageData(W){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const Q=this.offscreenCanvasContext.getImageData(-1,-1,W.width+2,W.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Q.width,height:Q.height},Q.data)}removeTile(W){const Q=this.loaded,ce=W.uid;Q&&Q[ce]&&delete Q[ce]}}function N(ye,W){if(ye.length!==0){Z(ye[0],W);for(var Q=1;Q<ye.length;Q++)Z(ye[Q],!W)}}function Z(ye,W){for(var Q=0,ce=0,Se=0,Ce=ye.length,De=Ce-1;Se<Ce;De=Se++){var Te=(ye[Se][0]-ye[De][0])*(ye[De][1]+ye[Se][1]),Ae=Q+Te;ce+=Math.abs(Q)>=Math.abs(Te)?Q-Ae+Te:Te-Ae+Q,Q=Ae}Q+ce>=0!=!!W&&ye.reverse()}var R=l.getDefaultExportFromCjs(function ye(W,Q){var ce,Se=W&&W.type;if(Se==="FeatureCollection")for(ce=0;ce<W.features.length;ce++)ye(W.features[ce],Q);else if(Se==="GeometryCollection")for(ce=0;ce<W.geometries.length;ce++)ye(W.geometries[ce],Q);else if(Se==="Feature")ye(W.geometry,Q);else if(Se==="Polygon")N(W.coordinates,Q);else if(Se==="MultiPolygon")for(ce=0;ce<W.coordinates.length;ce++)N(W.coordinates[ce],Q);return W});const q=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},ee=l.pointGeometry,ae=l.vectorTile.VectorTileFeature,K=le;function le(ye,W){this.options=W||{},this.features=ye,this.length=ye.length}function xe(ye,W){this.id=typeof ye.id=="number"?ye.id:void 0,this.type=ye.type,this.rawGeometry=ye.type===1?[ye.geometry]:ye.geometry,this.properties=ye.tags,this.extent=W||4096}le.prototype.feature=function(ye){return new xe(this.features[ye],this.options.extent)},xe.prototype.loadGeometry=function(){var ye=this.rawGeometry;this.geometry=[];for(var W=0;W<ye.length;W++){for(var Q=ye[W],ce=[],Se=0;Se<Q.length;Se++)ce.push(new ee(Q[Se][0],Q[Se][1]));this.geometry.push(ce)}return this.geometry},xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ye=this.geometry,W=1/0,Q=-1/0,ce=1/0,Se=-1/0,Ce=0;Ce<ye.length;Ce++)for(var De=ye[Ce],Te=0;Te<De.length;Te++){var Ae=De[Te];W=Math.min(W,Ae.x),Q=Math.max(Q,Ae.x),ce=Math.min(ce,Ae.y),Se=Math.max(Se,Ae.y)}return[W,ce,Q,Se]},xe.prototype.toGeoJSON=ae.prototype.toGeoJSON;var Le=l.pbf,Oe=K;function Fe(ye){var W=new Le;return function(Q,ce){for(var Se in Q.layers)ce.writeMessage(3,Ge,Q.layers[Se])}(ye,W),W.finish()}function Ge(ye,W){var Q;W.writeVarintField(15,ye.version||1),W.writeStringField(1,ye.name||""),W.writeVarintField(5,ye.extent||4096);var ce={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<ye.length;Q++)ce.feature=ye.feature(Q),W.writeMessage(2,tt,ce);var Se=ce.keys;for(Q=0;Q<Se.length;Q++)W.writeStringField(3,Se[Q]);var Ce=ce.values;for(Q=0;Q<Ce.length;Q++)W.writeMessage(4,Ve,Ce[Q])}function tt(ye,W){var Q=ye.feature;Q.id!==void 0&&W.writeVarintField(1,Q.id),W.writeMessage(2,yt,ye),W.writeVarintField(3,Q.type),W.writeMessage(4,Vt,Q)}function yt(ye,W){var Q=ye.feature,ce=ye.keys,Se=ye.values,Ce=ye.keycache,De=ye.valuecache;for(var Te in Q.properties){var Ae=Q.properties[Te],Ne=Ce[Te];if(Ae!==null){Ne===void 0&&(ce.push(Te),Ce[Te]=Ne=ce.length-1),W.writeVarint(Ne);var ot=typeof Ae;ot!=="string"&&ot!=="boolean"&&ot!=="number"&&(Ae=JSON.stringify(Ae));var at=ot+":"+Ae,st=De[at];st===void 0&&(Se.push(Ae),De[at]=st=Se.length-1),W.writeVarint(st)}}}function At(ye,W){return(W<<3)+(7&ye)}function zt(ye){return ye<<1^ye>>31}function Vt(ye,W){for(var Q=ye.loadGeometry(),ce=ye.type,Se=0,Ce=0,De=Q.length,Te=0;Te<De;Te++){var Ae=Q[Te],Ne=1;ce===1&&(Ne=Ae.length),W.writeVarint(At(1,Ne));for(var ot=ce===3?Ae.length-1:Ae.length,at=0;at<ot;at++){at===1&&ce!==1&&W.writeVarint(At(2,ot-1));var st=Ae[at].x-Se,Jt=Ae[at].y-Ce;W.writeVarint(zt(st)),W.writeVarint(zt(Jt)),Se+=st,Ce+=Jt}ce===3&&W.writeVarint(At(7,1))}}function Ve(ye,W){var Q=typeof ye;Q==="string"?W.writeStringField(1,ye):Q==="boolean"?W.writeBooleanField(7,ye):Q==="number"&&(ye%1!=0?W.writeDoubleField(3,ye):ye<0?W.writeSVarintField(6,ye):W.writeVarintField(5,ye))}G.exports=Fe,G.exports.fromVectorTileJs=Fe,G.exports.fromGeojsonVt=function(ye,W){W=W||{};var Q={};for(var ce in ye)Q[ce]=new Oe(ye[ce].features,W),Q[ce].name=ce,Q[ce].version=W.version,Q[ce].extent=W.extent;return Fe({layers:Q})},G.exports.GeoJSONWrapper=Oe;var _e=l.getDefaultExportFromCjs(G.exports);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},X=Math.fround||(oe=new Float32Array(1),ye=>(oe[0]=+ye,oe[0]));var oe;const lt=3,mt=5,Gt=6;class Dt{constructor(W){this.options=Object.assign(Object.create(we),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:Q,minZoom:ce,maxZoom:Se}=this.options;Q&&console.time("total time");const Ce=`prepare ${W.length} points`;Q&&console.time(Ce),this.points=W;const De=[];for(let Ae=0;Ae<W.length;Ae++){const Ne=W[Ae];if(!Ne.geometry)continue;const[ot,at]=Ne.geometry.coordinates,st=X(Xn(ot)),Jt=X(Qn(at));De.push(st,Jt,1/0,Ae,-1,1),this.options.reduce&&De.push(0)}let Te=this.trees[Se+1]=this._createTree(De);Q&&console.timeEnd(Ce);for(let Ae=Se;Ae>=ce;Ae--){const Ne=+Date.now();Te=this.trees[Ae]=this._createTree(this._cluster(Te,Ae)),Q&&console.log("z%d: %d clusters in %dms",Ae,Te.numItems,+Date.now()-Ne)}return Q&&console.timeEnd("total time"),this}getClusters(W,Q){let ce=((W[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,W[1]));let Ce=W[2]===180?180:((W[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ce=-180,Ce=180;else if(ce>Ce){const at=this.getClusters([ce,Se,180,De],Q),st=this.getClusters([-180,Se,Ce,De],Q);return at.concat(st)}const Te=this.trees[this._limitZoom(Q)],Ae=Te.range(Xn(ce),Qn(De),Xn(Ce),Qn(Se)),Ne=Te.data,ot=[];for(const at of Ae){const st=this.stride*at;ot.push(Ne[st+mt]>1?Qt(Ne,st,this.clusterProps):this.points[Ne[st+lt]])}return ot}getChildren(W){const Q=this._getOriginId(W),ce=this._getOriginZoom(W),Se="No cluster with the specified id.",Ce=this.trees[ce];if(!Ce)throw new Error(Se);const De=Ce.data;if(Q*this.stride>=De.length)throw new Error(Se);const Te=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Ae=Ce.within(De[Q*this.stride],De[Q*this.stride+1],Te),Ne=[];for(const ot of Ae){const at=ot*this.stride;De[at+4]===W&&Ne.push(De[at+mt]>1?Qt(De,at,this.clusterProps):this.points[De[at+lt]])}if(Ne.length===0)throw new Error(Se);return Ne}getLeaves(W,Q,ce){const Se=[];return this._appendLeaves(Se,W,Q=Q||10,ce=ce||0,0),Se}getTile(W,Q,ce){const Se=this.trees[this._limitZoom(W)],Ce=Math.pow(2,W),{extent:De,radius:Te}=this.options,Ae=Te/De,Ne=(ce-Ae)/Ce,ot=(ce+1+Ae)/Ce,at={features:[]};return this._addTileFeatures(Se.range((Q-Ae)/Ce,Ne,(Q+1+Ae)/Ce,ot),Se.data,Q,ce,Ce,at),Q===0&&this._addTileFeatures(Se.range(1-Ae/Ce,Ne,1,ot),Se.data,Ce,ce,Ce,at),Q===Ce-1&&this._addTileFeatures(Se.range(0,Ne,Ae/Ce,ot),Se.data,-1,ce,Ce,at),at.features.length?at:null}getClusterExpansionZoom(W){let Q=this._getOriginZoom(W)-1;for(;Q<=this.options.maxZoom;){const ce=this.getChildren(W);if(Q++,ce.length!==1)break;W=ce[0].properties.cluster_id}return Q}_appendLeaves(W,Q,ce,Se,Ce){const De=this.getChildren(Q);for(const Te of De){const Ae=Te.properties;if(Ae&&Ae.cluster?Ce+Ae.point_count<=Se?Ce+=Ae.point_count:Ce=this._appendLeaves(W,Ae.cluster_id,ce,Se,Ce):Ce<Se?Ce++:W.push(Te),W.length===ce)break}return Ce}_createTree(W){const Q=new l.KDBush(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ce=0;ce<W.length;ce+=this.stride)Q.add(W[ce],W[ce+1]);return Q.finish(),Q.data=W,Q}_addTileFeatures(W,Q,ce,Se,Ce,De){for(const Te of W){const Ae=Te*this.stride,Ne=Q[Ae+mt]>1;let ot,at,st;if(Ne)ot=un(Q,Ae,this.clusterProps),at=Q[Ae],st=Q[Ae+1];else{const jt=this.points[Q[Ae+lt]];ot=jt.properties;const[Zt,rn]=jt.geometry.coordinates;at=Xn(Zt),st=Qn(rn)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(at*Ce-ce)),Math.round(this.options.extent*(st*Ce-Se))]],tags:ot};let fn;fn=Ne||this.options.generateId?Q[Ae+lt]:this.points[Q[Ae+lt]].id,fn!==void 0&&(Jt.id=fn),De.features.push(Jt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,Q){const{radius:ce,extent:Se,reduce:Ce,minPoints:De}=this.options,Te=ce/(Se*Math.pow(2,Q)),Ae=W.data,Ne=[],ot=this.stride;for(let at=0;at<Ae.length;at+=ot){if(Ae[at+2]<=Q)continue;Ae[at+2]=Q;const st=Ae[at],Jt=Ae[at+1],fn=W.within(Ae[at],Ae[at+1],Te),jt=Ae[at+mt];let Zt=jt;for(const rn of fn){const Hn=rn*ot;Ae[Hn+2]>Q&&(Zt+=Ae[Hn+mt])}if(Zt>jt&&Zt>=De){let rn,Hn=st*jt,Wn=Jt*jt,Fn=-1;const Nn=((at/ot|0)<<5)+(Q+1)+this.points.length;for(const wn of fn){const cr=wn*ot;if(Ae[cr+2]<=Q)continue;Ae[cr+2]=Q;const Lr=Ae[cr+mt];Hn+=Ae[cr]*Lr,Wn+=Ae[cr+1]*Lr,Ae[cr+4]=Nn,Ce&&(rn||(rn=this._map(Ae,at,!0),Fn=this.clusterProps.length,this.clusterProps.push(rn)),Ce(rn,this._map(Ae,cr)))}Ae[at+4]=Nn,Ne.push(Hn/Zt,Wn/Zt,1/0,Nn,-1,Zt),Ce&&Ne.push(Fn)}else{for(let rn=0;rn<ot;rn++)Ne.push(Ae[at+rn]);if(Zt>1)for(const rn of fn){const Hn=rn*ot;if(!(Ae[Hn+2]<=Q)){Ae[Hn+2]=Q;for(let Wn=0;Wn<ot;Wn++)Ne.push(Ae[Hn+Wn])}}}}return Ne}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,Q,ce){if(W[Q+mt]>1){const De=this.clusterProps[W[Q+Gt]];return ce?Object.assign({},De):De}const Se=this.points[W[Q+lt]].properties,Ce=this.options.map(Se);return ce&&Ce===Se?Object.assign({},Ce):Ce}}function Qt(ye,W,Q){return{type:"Feature",id:ye[W+lt],properties:un(ye,W,Q),geometry:{type:"Point",coordinates:[(ce=ye[W],360*(ce-.5)),Bn(ye[W+1])]}};var ce}function un(ye,W,Q){const ce=ye[W+mt],Se=ce>=1e4?`${Math.round(ce/1e3)}k`:ce>=1e3?Math.round(ce/100)/10+"k":ce,Ce=ye[W+Gt],De=Ce===-1?{}:Object.assign({},Q[Ce]);return Object.assign(De,{cluster:!0,cluster_id:ye[W+lt],point_count:ce,point_count_abbreviated:Se})}function Xn(ye){return ye/360+.5}function Qn(ye){const W=Math.sin(ye*Math.PI/180),Q=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return Q<0?0:Q>1?1:Q}function Bn(ye){const W=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function Qr(ye,W,Q,ce){for(var Se,Ce=ce,De=Q-W>>1,Te=Q-W,Ae=ye[W],Ne=ye[W+1],ot=ye[Q],at=ye[Q+1],st=W+3;st<Q;st+=3){var Jt=Je(ye[st],ye[st+1],Ae,Ne,ot,at);if(Jt>Ce)Se=st,Ce=Jt;else if(Jt===Ce){var fn=Math.abs(st-De);fn<Te&&(Se=st,Te=fn)}}Ce>ce&&(Se-W>3&&Qr(ye,W,Se,ce),ye[Se+2]=Ce,Q-Se>3&&Qr(ye,Se,Q,ce))}function Je(ye,W,Q,ce,Se,Ce){var De=Se-Q,Te=Ce-ce;if(De!==0||Te!==0){var Ae=((ye-Q)*De+(W-ce)*Te)/(De*De+Te*Te);Ae>1?(Q=Se,ce=Ce):Ae>0&&(Q+=De*Ae,ce+=Te*Ae)}return(De=ye-Q)*De+(Te=W-ce)*Te}function yr(ye,W,Q,ce){var Se={id:ye===void 0?null:ye,type:W,geometry:Q,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var De=Ce.geometry,Te=Ce.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Gi(Ce,De);else if(Te==="Polygon"||Te==="MultiLineString")for(var Ae=0;Ae<De.length;Ae++)Gi(Ce,De[Ae]);else if(Te==="MultiPolygon")for(Ae=0;Ae<De.length;Ae++)for(var Ne=0;Ne<De[Ae].length;Ne++)Gi(Ce,De[Ae][Ne])}(Se),Se}function Gi(ye,W){for(var Q=0;Q<W.length;Q+=3)ye.minX=Math.min(ye.minX,W[Q]),ye.minY=Math.min(ye.minY,W[Q+1]),ye.maxX=Math.max(ye.maxX,W[Q]),ye.maxY=Math.max(ye.maxY,W[Q+1])}function Gn(ye,W,Q,ce){if(W.geometry){var Se=W.geometry.coordinates,Ce=W.geometry.type,De=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),Te=[],Ae=W.id;if(Q.promoteId?Ae=W.properties[Q.promoteId]:Q.generateId&&(Ae=ce||0),Ce==="Point")_n(Se,Te);else if(Ce==="MultiPoint")for(var Ne=0;Ne<Se.length;Ne++)_n(Se[Ne],Te);else if(Ce==="LineString")_o(Se,Te,De,!1);else if(Ce==="MultiLineString"){if(Q.lineMetrics){for(Ne=0;Ne<Se.length;Ne++)_o(Se[Ne],Te=[],De,!1),ye.push(yr(Ae,"LineString",Te,W.properties));return}Mo(Se,Te,De,!1)}else if(Ce==="Polygon")Mo(Se,Te,De,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(Ne=0;Ne<W.geometry.geometries.length;Ne++)Gn(ye,{id:Ae,geometry:W.geometry.geometries[Ne],properties:W.properties},Q,ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ne=0;Ne<Se.length;Ne++){var ot=[];Mo(Se[Ne],ot,De,!0),Te.push(ot)}}ye.push(yr(Ae,Ce,Te,W.properties))}}function _n(ye,W){W.push(Lo(ye[0])),W.push(ei(ye[1])),W.push(0)}function _o(ye,W,Q,ce){for(var Se,Ce,De=0,Te=0;Te<ye.length;Te++){var Ae=Lo(ye[Te][0]),Ne=ei(ye[Te][1]);W.push(Ae),W.push(Ne),W.push(0),Te>0&&(De+=ce?(Se*Ne-Ae*Ce)/2:Math.sqrt(Math.pow(Ae-Se,2)+Math.pow(Ne-Ce,2))),Se=Ae,Ce=Ne}var ot=W.length-3;W[2]=1,Qr(W,0,ot,Q),W[ot+2]=1,W.size=Math.abs(De),W.start=0,W.end=W.size}function Mo(ye,W,Q,ce){for(var Se=0;Se<ye.length;Se++){var Ce=[];_o(ye[Se],Ce,Q,ce),W.push(Ce)}}function Lo(ye){return ye/360+.5}function ei(ye){var W=Math.sin(ye*Math.PI/180),Q=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return Q<0?0:Q>1?1:Q}function Yn(ye,W,Q,ce,Se,Ce,De,Te){if(ce/=W,Ce>=(Q/=W)&&De<ce)return ye;if(De<Q||Ce>=ce)return null;for(var Ae=[],Ne=0;Ne<ye.length;Ne++){var ot=ye[Ne],at=ot.geometry,st=ot.type,Jt=Se===0?ot.minX:ot.minY,fn=Se===0?ot.maxX:ot.maxY;if(Jt>=Q&&fn<ce)Ae.push(ot);else if(!(fn<Q||Jt>=ce)){var jt=[];if(st==="Point"||st==="MultiPoint")Oo(at,jt,Q,ce,Se);else if(st==="LineString")vo(at,jt,Q,ce,Se,!1,Te.lineMetrics);else if(st==="MultiLineString")ti(at,jt,Q,ce,Se,!1);else if(st==="Polygon")ti(at,jt,Q,ce,Se,!0);else if(st==="MultiPolygon")for(var Zt=0;Zt<at.length;Zt++){var rn=[];ti(at[Zt],rn,Q,ce,Se,!0),rn.length&&jt.push(rn)}if(jt.length){if(Te.lineMetrics&&st==="LineString"){for(Zt=0;Zt<jt.length;Zt++)Ae.push(yr(ot.id,st,jt[Zt],ot.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(jt.length===1?(st="LineString",jt=jt[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=jt.length===3?"Point":"MultiPoint"),Ae.push(yr(ot.id,st,jt,ot.tags))}}}return Ae.length?Ae:null}function Oo(ye,W,Q,ce,Se){for(var Ce=0;Ce<ye.length;Ce+=3){var De=ye[Ce+Se];De>=Q&&De<=ce&&(W.push(ye[Ce]),W.push(ye[Ce+1]),W.push(ye[Ce+2]))}}function vo(ye,W,Q,ce,Se,Ce,De){for(var Te,Ae,Ne=vt(ye),ot=Se===0?se:Re,at=ye.start,st=0;st<ye.length-3;st+=3){var Jt=ye[st],fn=ye[st+1],jt=ye[st+2],Zt=ye[st+3],rn=ye[st+4],Hn=Se===0?Jt:fn,Wn=Se===0?Zt:rn,Fn=!1;De&&(Te=Math.sqrt(Math.pow(Jt-Zt,2)+Math.pow(fn-rn,2))),Hn<Q?Wn>Q&&(Ae=ot(Ne,Jt,fn,Zt,rn,Q),De&&(Ne.start=at+Te*Ae)):Hn>ce?Wn<ce&&(Ae=ot(Ne,Jt,fn,Zt,rn,ce),De&&(Ne.start=at+Te*Ae)):We(Ne,Jt,fn,jt),Wn<Q&&Hn>=Q&&(Ae=ot(Ne,Jt,fn,Zt,rn,Q),Fn=!0),Wn>ce&&Hn<=ce&&(Ae=ot(Ne,Jt,fn,Zt,rn,ce),Fn=!0),!Ce&&Fn&&(De&&(Ne.end=at+Te*Ae),W.push(Ne),Ne=vt(ye)),De&&(at+=Te)}var Nn=ye.length-3;Jt=ye[Nn],fn=ye[Nn+1],jt=ye[Nn+2],(Hn=Se===0?Jt:fn)>=Q&&Hn<=ce&&We(Ne,Jt,fn,jt),Nn=Ne.length-3,Ce&&Nn>=3&&(Ne[Nn]!==Ne[0]||Ne[Nn+1]!==Ne[1])&&We(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&W.push(Ne)}function vt(ye){var W=[];return W.size=ye.size,W.start=ye.start,W.end=ye.end,W}function ti(ye,W,Q,ce,Se,Ce){for(var De=0;De<ye.length;De++)vo(ye[De],W,Q,ce,Se,Ce,!1)}function We(ye,W,Q,ce){ye.push(W),ye.push(Q),ye.push(ce)}function se(ye,W,Q,ce,Se,Ce){var De=(Ce-W)/(ce-W);return ye.push(Ce),ye.push(Q+(Se-Q)*De),ye.push(1),De}function Re(ye,W,Q,ce,Se,Ce){var De=(Ce-Q)/(Se-Q);return ye.push(W+(ce-W)*De),ye.push(Ce),ye.push(1),De}function Pe(ye,W){for(var Q=[],ce=0;ce<ye.length;ce++){var Se,Ce=ye[ce],De=Ce.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")Se=rt(Ce.geometry,W);else if(De==="MultiLineString"||De==="Polygon"){Se=[];for(var Te=0;Te<Ce.geometry.length;Te++)Se.push(rt(Ce.geometry[Te],W))}else if(De==="MultiPolygon")for(Se=[],Te=0;Te<Ce.geometry.length;Te++){for(var Ae=[],Ne=0;Ne<Ce.geometry[Te].length;Ne++)Ae.push(rt(Ce.geometry[Te][Ne],W));Se.push(Ae)}Q.push(yr(Ce.id,De,Se,Ce.tags))}return Q}function rt(ye,W){var Q=[];Q.size=ye.size,ye.start!==void 0&&(Q.start=ye.start,Q.end=ye.end);for(var ce=0;ce<ye.length;ce+=3)Q.push(ye[ce]+W,ye[ce+1],ye[ce+2]);return Q}function bt(ye,W){if(ye.transformed)return ye;var Q,ce,Se,Ce=1<<ye.z,De=ye.x,Te=ye.y;for(Q=0;Q<ye.features.length;Q++){var Ae=ye.features[Q],Ne=Ae.geometry,ot=Ae.type;if(Ae.geometry=[],ot===1)for(ce=0;ce<Ne.length;ce+=2)Ae.geometry.push(vn(Ne[ce],Ne[ce+1],W,Ce,De,Te));else for(ce=0;ce<Ne.length;ce++){var at=[];for(Se=0;Se<Ne[ce].length;Se+=2)at.push(vn(Ne[ce][Se],Ne[ce][Se+1],W,Ce,De,Te));Ae.geometry.push(at)}}return ye.transformed=!0,ye}function vn(ye,W,Q,ce,Se,Ce){return[Math.round(Q*(ye*ce-Se)),Math.round(Q*(W*ce-Ce))]}function Wt(ye,W,Q,ce,Se){for(var Ce=W===Se.maxZoom?0:Se.tolerance/((1<<W)*Se.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:ce,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Te=0;Te<ye.length;Te++){De.numFeatures++,xt(De,ye[Te],Ce,Se);var Ae=ye[Te].minX,Ne=ye[Te].minY,ot=ye[Te].maxX,at=ye[Te].maxY;Ae<De.minX&&(De.minX=Ae),Ne<De.minY&&(De.minY=Ne),ot>De.maxX&&(De.maxX=ot),at>De.maxY&&(De.maxY=at)}return De}function xt(ye,W,Q,ce){var Se=W.geometry,Ce=W.type,De=[];if(Ce==="Point"||Ce==="MultiPoint")for(var Te=0;Te<Se.length;Te+=3)De.push(Se[Te]),De.push(Se[Te+1]),ye.numPoints++,ye.numSimplified++;else if(Ce==="LineString")$n(De,Se,ye,Q,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(Te=0;Te<Se.length;Te++)$n(De,Se[Te],ye,Q,Ce==="Polygon",Te===0);else if(Ce==="MultiPolygon")for(var Ae=0;Ae<Se.length;Ae++){var Ne=Se[Ae];for(Te=0;Te<Ne.length;Te++)$n(De,Ne[Te],ye,Q,!0,Te===0)}if(De.length){var ot=W.tags||null;if(Ce==="LineString"&&ce.lineMetrics){for(var at in ot={},W.tags)ot[at]=W.tags[at];ot.mapbox_clip_start=Se.start/Se.size,ot.mapbox_clip_end=Se.end/Se.size}var st={geometry:De,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:ot};W.id!==null&&(st.id=W.id),ye.features.push(st)}}function $n(ye,W,Q,ce,Se,Ce){var De=ce*ce;if(ce>0&&W.size<(Se?De:ce))Q.numPoints+=W.length/3;else{for(var Te=[],Ae=0;Ae<W.length;Ae+=3)(ce===0||W[Ae+2]>De)&&(Q.numSimplified++,Te.push(W[Ae]),Te.push(W[Ae+1])),Q.numPoints++;Se&&function(Ne,ot){for(var at=0,st=0,Jt=Ne.length,fn=Jt-2;st<Jt;fn=st,st+=2)at+=(Ne[st]-Ne[fn])*(Ne[st+1]+Ne[fn+1]);if(at>0===ot)for(st=0,Jt=Ne.length;st<Jt/2;st+=2){var jt=Ne[st],Zt=Ne[st+1];Ne[st]=Ne[Jt-2-st],Ne[st+1]=Ne[Jt-1-st],Ne[Jt-2-st]=jt,Ne[Jt-1-st]=Zt}}(Te,Ce),ye.push(Te)}}function jn(ye,W){var Q=(W=this.options=function(Se,Ce){for(var De in Ce)Se[De]=Ce[De];return Se}(Object.create(this.options),W)).debug;if(Q&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var ce=function(Se,Ce){var De=[];if(Se.type==="FeatureCollection")for(var Te=0;Te<Se.features.length;Te++)Gn(De,Se.features[Te],Ce,Te);else Gn(De,Se.type==="Feature"?Se:{geometry:Se},Ce);return De}(ye,W);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ce=function(Se,Ce){var De=Ce.buffer/Ce.extent,Te=Se,Ae=Yn(Se,1,-1-De,De,0,-1,2,Ce),Ne=Yn(Se,1,1-De,2+De,0,-1,2,Ce);return(Ae||Ne)&&(Te=Yn(Se,1,-De,1+De,0,-1,2,Ce)||[],Ae&&(Te=Pe(Ae,1).concat(Te)),Ne&&(Te=Te.concat(Pe(Ne,-1)))),Te}(ce,W),ce.length&&this.splitTile(ce,0,0,0),Q&&(ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bn(ye,W,Q){return 32*((1<<ye)*Q+W)+ye}function _r(ye,W){return W?ye.properties[W]:ye.id}function Mn(ye,W){if(ye==null)return!0;if(ye.type==="Feature")return _r(ye,W)!=null;if(ye.type==="FeatureCollection"){const Q=new Set;for(const ce of ye.features){const Se=_r(ce,W);if(Se==null||Q.has(Se))return!1;Q.add(Se)}return!0}return!1}function On(ye,W){const Q=new Map;if(ye!=null)if(ye.type==="Feature")Q.set(_r(ye,W),ye);else for(const ce of ye.features)Q.set(_r(ce,W),ce);return Q}function La(ye,W){const Q=ye.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const ce=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!ce)return W(null,null);const Se=new class{constructor(De){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=De.length,this._features=De}feature(De){return new class{constructor(Te){this._feature=Te,this.extent=l.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const Ae of this._feature.geometry)Te.push([new l.Point(Ae[0],Ae[1])]);return Te}{const Te=[];for(const Ae of this._feature.geometry){const Ne=[];for(const ot of Ae)Ne.push(new l.Point(ot[0],ot[1]));Te.push(Ne)}return Te}}toGeoJSON(Te,Ae,Ne){return q.call(this,Te,Ae,Ne)}}(this._features[De])}}(ce.features);let Ce=_e(Se);Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),W(null,{vectorTile:Se,rawData:Ce.buffer})}jn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},jn.prototype.splitTile=function(ye,W,Q,ce,Se,Ce,De){for(var Te=[ye,W,Q,ce],Ae=this.options,Ne=Ae.debug;Te.length;){ce=Te.pop(),Q=Te.pop(),W=Te.pop(),ye=Te.pop();var ot=1<<W,at=bn(W,Q,ce),st=this.tiles[at];if(!st&&(Ne>1&&console.time("creation"),st=this.tiles[at]=Wt(ye,W,Q,ce,Ae),this.tileCoords.push({z:W,x:Q,y:ce}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Q,ce,st.numFeatures,st.numPoints,st.numSimplified),console.timeEnd("creation"));var Jt="z"+W;this.stats[Jt]=(this.stats[Jt]||0)+1,this.total++}if(st.source=ye,Se){if(W===Ae.maxZoom||W===Se)continue;var fn=1<<Se-W;if(Q!==Math.floor(Ce/fn)||ce!==Math.floor(De/fn))continue}else if(W===Ae.indexMaxZoom||st.numPoints<=Ae.indexMaxPoints)continue;if(st.source=null,ye.length!==0){Ne>1&&console.time("clipping");var jt,Zt,rn,Hn,Wn,Fn,Nn=.5*Ae.buffer/Ae.extent,wn=.5-Nn,cr=.5+Nn,Lr=1+Nn;jt=Zt=rn=Hn=null,Wn=Yn(ye,ot,Q-Nn,Q+cr,0,st.minX,st.maxX,Ae),Fn=Yn(ye,ot,Q+wn,Q+Lr,0,st.minX,st.maxX,Ae),ye=null,Wn&&(jt=Yn(Wn,ot,ce-Nn,ce+cr,1,st.minY,st.maxY,Ae),Zt=Yn(Wn,ot,ce+wn,ce+Lr,1,st.minY,st.maxY,Ae),Wn=null),Fn&&(rn=Yn(Fn,ot,ce-Nn,ce+cr,1,st.minY,st.maxY,Ae),Hn=Yn(Fn,ot,ce+wn,ce+Lr,1,st.minY,st.maxY,Ae),Fn=null),Ne>1&&console.timeEnd("clipping"),Te.push(jt||[],W+1,2*Q,2*ce),Te.push(Zt||[],W+1,2*Q,2*ce+1),Te.push(rn||[],W+1,2*Q+1,2*ce),Te.push(Hn||[],W+1,2*Q+1,2*ce+1)}}},jn.prototype.getTile=function(ye,W,Q){var ce=this.options,Se=ce.extent,Ce=ce.debug;if(ye<0||ye>24)return null;var De=1<<ye,Te=bn(ye,W=(W%De+De)%De,Q);if(this.tiles[Te])return bt(this.tiles[Te],Se);Ce>1&&console.log("drilling down to z%d-%d-%d",ye,W,Q);for(var Ae,Ne=ye,ot=W,at=Q;!Ae&&Ne>0;)Ne--,ot=Math.floor(ot/2),at=Math.floor(at/2),Ae=this.tiles[bn(Ne,ot,at)];return Ae&&Ae.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",Ne,ot,at),Ce>1&&console.time("drilling down"),this.splitTile(Ae.source,Ne,ot,at,ye,W,Q),Ce>1&&console.timeEnd("drilling down"),this.tiles[Te]?bt(this.tiles[Te],Se):null):null};class ni extends F{constructor(W,Q,ce,Se){super(W,Q,ce,La),this._dataUpdateable=new Map,this.loadGeoJSON=(Ce,De)=>{const{promoteId:Te}=Ce;if(Ce.request)return l.getJSON(Ce.request,(Ae,Ne,ot,at)=>{this._dataUpdateable=Mn(Ne,Te)?On(Ne,Te):void 0,De(Ae,Ne,ot,at)});if(typeof Ce.data=="string")try{const Ae=JSON.parse(Ce.data);this._dataUpdateable=Mn(Ae,Te)?On(Ae,Te):void 0,De(null,Ae)}catch{De(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`))}else Ce.dataDiff?this._dataUpdateable?(function(Ae,Ne,ot){var at,st,Jt,fn;if(Ne.removeAll&&Ae.clear(),Ne.remove)for(const jt of Ne.remove)Ae.delete(jt);if(Ne.add)for(const jt of Ne.add){const Zt=_r(jt,ot);Zt!=null&&Ae.set(Zt,jt)}if(Ne.update)for(const jt of Ne.update){let Zt=Ae.get(jt.id);if(Zt==null)continue;const rn=!jt.removeAllProperties&&(((at=jt.removeProperties)===null||at===void 0?void 0:at.length)>0||((st=jt.addOrUpdateProperties)===null||st===void 0?void 0:st.length)>0);if((jt.newGeometry||jt.removeAllProperties||rn)&&(Zt={...Zt},Ae.set(jt.id,Zt),rn&&(Zt.properties={...Zt.properties})),jt.newGeometry&&(Zt.geometry=jt.newGeometry),jt.removeAllProperties)Zt.properties={};else if(((Jt=jt.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const Hn of jt.removeProperties)Object.prototype.hasOwnProperty.call(Zt.properties,Hn)&&delete Zt.properties[Hn];if(((fn=jt.addOrUpdateProperties)===null||fn===void 0?void 0:fn.length)>0)for(const{key:Hn,value:Wn}of jt.addOrUpdateProperties)Zt.properties[Hn]=Wn}}(this._dataUpdateable,Ce.dataDiff,Te),De(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):De(new Error(`Cannot update existing geojson data in ${Ce.source}`)):De(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Se&&(this.loadGeoJSON=Se)}loadData(W,Q){var ce;(ce=this._pendingRequest)===null||ce===void 0||ce.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Se=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.RequestPerformance(W.request);this._pendingCallback=Q,this._pendingRequest=this.loadGeoJSON(W,(Ce,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ce||!De)return Q(Ce);if(typeof De!="object")return Q(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{R(De,!0);try{if(W.filter){const Ae=l.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ae.result==="error")throw new Error(Ae.value.map(ot=>`${ot.key}: ${ot.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(ot=>Ae.value.evaluate({zoom:0},ot))}}this._geoJSONIndex=W.cluster?new Dt(function({superclusterOptions:Ae,clusterProperties:Ne}){if(!Ne||!Ae)return Ae;const ot={},at={},st={accumulated:null,zoom:0},Jt={properties:null},fn=Object.keys(Ne);for(const jt of fn){const[Zt,rn]=Ne[jt],Hn=l.createExpression(rn),Wn=l.createExpression(typeof Zt=="string"?[Zt,["accumulated"],["get",jt]]:Zt);ot[jt]=Hn.value,at[jt]=Wn.value}return Ae.map=jt=>{Jt.properties=jt;const Zt={};for(const rn of fn)Zt[rn]=ot[rn].evaluate(st,Jt);return Zt},Ae.reduce=(jt,Zt)=>{Jt.properties=Zt;for(const rn of fn)st.accumulated=jt[rn],jt[rn]=at[rn].evaluate(st,Jt)},Ae}(W)).load(De.features):function(Ae,Ne){return new jn(Ae,Ne)}(De,W.geojsonVtOptions)}catch(Ae){return Q(Ae)}this.loaded={};const Te={};if(Se){const Ae=Se.finish();Ae&&(Te.resourceTiming={},Te.resourceTiming[W.source]=JSON.parse(JSON.stringify(Ae)))}Q(null,Te)}})}reloadTile(W,Q){const ce=this.loaded;return ce&&ce[W.uid]?super.reloadTile(W,Q):this.loadTile(W,Q)}removeSource(W,Q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Q()}getClusterExpansionZoom(W,Q){try{Q(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(ce){Q(ce)}}getClusterChildren(W,Q){try{Q(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(ce){Q(ce)}}getClusterLeaves(W,Q){try{Q(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(ce){Q(ce)}}}class wr{constructor(W){this.self=W,this.actor=new l.Actor(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:F,geojson:ni},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Q,ce)=>{if(this.workerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.workerSourceTypes[Q]=ce},this.self.registerRTLTextPlugin=Q=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Q.applyArabicShaping,l.plugin.processBidirectionalText=Q.processBidirectionalText,l.plugin.processStyledBidirectionalText=Q.processStyledBidirectionalText}}setReferrer(W,Q){this.referrer=Q}setImages(W,Q,ce){this.availableImages[W]=Q;for(const Se in this.workerSources[W]){const Ce=this.workerSources[W][Se];for(const De in Ce)Ce[De].availableImages=Q}ce()}setLayers(W,Q,ce){this.getLayerIndex(W).replace(Q),ce()}updateLayers(W,Q,ce){this.getLayerIndex(W).update(Q.layers,Q.removedIds),ce()}loadTile(W,Q,ce){this.getWorkerSource(W,Q.type,Q.source).loadTile(Q,ce)}loadDEMTile(W,Q,ce){this.getDEMWorkerSource(W,Q.source).loadTile(Q,ce)}reloadTile(W,Q,ce){this.getWorkerSource(W,Q.type,Q.source).reloadTile(Q,ce)}abortTile(W,Q,ce){this.getWorkerSource(W,Q.type,Q.source).abortTile(Q,ce)}removeTile(W,Q,ce){this.getWorkerSource(W,Q.type,Q.source).removeTile(Q,ce)}removeDEMTile(W,Q){this.getDEMWorkerSource(W,Q.source).removeTile(Q)}removeSource(W,Q,ce){if(!this.workerSources[W]||!this.workerSources[W][Q.type]||!this.workerSources[W][Q.type][Q.source])return;const Se=this.workerSources[W][Q.type][Q.source];delete this.workerSources[W][Q.type][Q.source],Se.removeSource!==void 0?Se.removeSource(Q,ce):ce()}loadWorkerSource(W,Q,ce){try{this.self.importScripts(Q.url),ce()}catch(Se){ce(Se.toString())}}syncRTLPluginState(W,Q,ce){try{l.plugin.setState(Q);const Se=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const Ce=l.plugin.isParsed();ce(Ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),Ce)}}catch(Se){ce(Se.toString())}}getAvailableImages(W){let Q=this.availableImages[W];return Q||(Q=[]),Q}getLayerIndex(W){let Q=this.layerIndexes[W];return Q||(Q=this.layerIndexes[W]=new x),Q}getWorkerSource(W,Q,ce){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][Q]||(this.workerSources[W][Q]={}),!this.workerSources[W][Q][ce]){const Se={send:(Ce,De,Te)=>{this.actor.send(Ce,De,Te,W)}};this.workerSources[W][Q][ce]=new this.workerSourceTypes[Q](Se,this.getLayerIndex(W),this.getAvailableImages(W))}return this.workerSources[W][Q][ce]}getDEMWorkerSource(W,Q){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][Q]||(this.demWorkerSources[W][Q]=new $),this.demWorkerSources[W][Q]}}return l.isWorker()&&(self.worker=new wr(self)),wr}),c(["./shared"],function(l){var x="3.2.1";class b{static testProp(o){if(!b.docStyle)return o[0];for(let h=0;h<o.length;h++)if(o[h]in b.docStyle)return o[h];return o[0]}static create(o,h,m){const _=window.document.createElement(o);return h!==void 0&&(_.className=h),m&&m.appendChild(_),_}static createNS(o,h){return window.document.createElementNS(o,h)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(o,h){o.style[b.transformProp]=h}static addEventListener(o,h,m,_={}){o.addEventListener(h,m,"passive"in _?_:_.capture)}static removeEventListener(o,h,m,_={}){o.removeEventListener(h,m,"passive"in _?_:_.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(o,h){const m=o.getBoundingClientRect();return new l.Point(h.clientX-m.left-o.clientLeft,h.clientY-m.top-o.clientTop)}static touchPos(o,h){const m=o.getBoundingClientRect(),_=[];for(let w=0;w<h.length;w++)_.push(new l.Point(h[w].clientX-m.left-o.clientLeft,h[w].clientY-m.top-o.clientTop));return _}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function(v){!F&&L&&($?N(v):A=v)}};let A,L,F=!1,$=!1;function N(v){const o=v.createTexture();v.bindTexture(v.TEXTURE_2D,o);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,L),v.isContextLost())return;E.supported=!0}catch{}v.deleteTexture(o),F=!0}var Z,R;typeof document<"u"&&(L=document.createElement("img"),L.onload=function(){A&&N(A),A=null,$=!0},L.onerror=function(){F=!0,A=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let o,h,m,_;v.resetRequestQueue=()=>{o=[],h=0,m=0,_={}},v.addThrottleControl=D=>{const U=m++;return _[U]=D,U},v.removeThrottleControl=D=>{delete _[D],I()},v.getImage=(D,U,V=!0)=>{E.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const ne={requestParameters:D,supportImageRefresh:V,callback:U,cancelled:!1,completed:!1,cancel:()=>{ne.completed||ne.cancelled||(ne.cancelled=!0,ne.innerRequest&&(ne.innerRequest.cancel(),h--),I())}};return o.push(ne),I(),ne};const w=D=>{const{requestParameters:U,supportImageRefresh:V,callback:ne}=D;return l.extend(U,{type:"image"}),(V!==!1||l.isWorker()||l.getProtocolAction(U.url)||U.headers&&!Object.keys(U.headers).reduce((fe,he)=>fe&&he==="accept",!0)?l.makeRequest:O)(U,(fe,he,de,me)=>{P(D,ne,fe,he,de,me)})},P=(D,U,V,ne,fe,he)=>{V?U(V):ne instanceof HTMLImageElement||ne instanceof ImageBitmap?U(null,ne):ne&&((de,me)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(de,me):l.arrayBufferToImage(de,me)})(ne,(de,me)=>{de!=null?U(de):me!=null&&U(null,me,{cacheControl:fe,expires:he})}),D.cancelled||(D.completed=!0,h--,I())},I=()=>{const D=(()=>{const U=Object.keys(_);let V=!1;if(U.length>0){for(const ne of U)if(V=_[ne](),V)break}return V})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=h;U<D&&o.length>0;U++){const V=o.shift();if(V.cancelled){U--;continue}const ne=w(V);h++,V.innerRequest=ne}},O=(D,U)=>{const V=new Image,ne=D.url;let fe=!1;const he=D.credentials;return he&&he==="include"?V.crossOrigin="use-credentials":(he&&he==="same-origin"||!l.sameOrigin(ne))&&(V.crossOrigin="anonymous"),V.fetchPriority="high",V.onload=()=>{U(null,V),V.onerror=V.onload=null},V.onerror=()=>{fe||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),V.onerror=V.onload=null},V.src=ne,{cancel:()=>{fe=!0,V.src=""}}}}(Z||(Z={})),Z.resetRequestQueue(),function(v){v.Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown"}(R||(R={}));class q{constructor(o){this._transformRequestFn=o}transformRequest(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}}normalizeSpriteURL(o,h,m){const _=function(w){const P=w.match(G);if(!P)throw new Error(`Unable to parse URL "${w}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(o);return _.path+=`${h}${m}`,function(w){const P=w.params.length?`?${w.params.join("&")}`:"";return`${w.protocol}://${w.authority}${w.path}${P}`}(_)}setTransformRequest(o){this._transformRequestFn=o}}const G=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ee(v){var o=new l.ARRAY_TYPE(3);return o[0]=v[0],o[1]=v[1],o[2]=v[2],o}var ae,K=function(v,o,h){return v[0]=o[0]-h[0],v[1]=o[1]-h[1],v[2]=o[2]-h[2],v};ae=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(ae[0]=0,ae[1]=0,ae[2]=0);var le=function(v){var o=v[0],h=v[1];return o*o+h*h};function xe(v){const o=[];if(typeof v=="string")o.push({id:"default",url:v});else if(v&&v.length>0){const h=[];for(const{id:m,url:_}of v){const w=`${m}${_}`;h.indexOf(w)===-1&&(h.push(w),o.push({id:m,url:_}))}}return o}function Le(v,o,h,m,_){if(m)return void v(m);if(_!==Object.values(o).length||_!==Object.values(h).length)return;const w={};for(const P in o){w[P]={};const I=l.browser.getImageCanvasContext(h[P]),O=o[P];for(const D in O){const{width:U,height:V,x:ne,y:fe,sdf:he,pixelRatio:de,stretchX:me,stretchY:Me,content:je}=O[D];w[P][D]={data:null,pixelRatio:de,sdf:he,stretchX:me,stretchY:Me,content:je,spriteData:{width:U,height:V,x:ne,y:fe,context:I}}}}v(null,w)}(function(){var v=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(v[0]=0,v[1]=0)})();class Oe{constructor(o,h,m,_){this.context=o,this.format=m,this.texture=o.gl.createTexture(),this.update(h,_)}update(o,h,m){const{width:_,height:w}=o,P=!(this.size&&this.size[0]===_&&this.size[1]===w||m),{context:I}=this,{gl:O}=I;if(this.useMipmap=!!(h&&h.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!h||h.premultiply!==!1)),P)this.size=[_,w],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,o):O.texImage2D(O.TEXTURE_2D,0,this.format,_,w,0,this.format,O.UNSIGNED_BYTE,o.data);else{const{x:D,y:U}=m||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texSubImage2D(O.TEXTURE_2D,0,D,U,O.RGBA,O.UNSIGNED_BYTE,o):O.texSubImage2D(O.TEXTURE_2D,0,D,U,_,w,O.RGBA,O.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(o,h,m){const{context:_}=this,{gl:w}=_;w.bindTexture(w.TEXTURE_2D,this.texture),m!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=w.LINEAR),o!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,o),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,m||o),this.filter=o),h!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,h),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function Fe(v){const{userImage:o}=v;return!!(o&&o.render&&o.render())&&(v.data.replace(new Uint8Array(o.data.buffer)),!0)}class Ge extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:h,callback:m}of this.requestors)this._notify(h,m);this.requestors=[]}}getImage(o){const h=this.images[o];if(h&&!h.data&&h.spriteData){const m=h.spriteData;h.data=new l.RGBAImage({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),h.spriteData=null}return h}addImage(o,h){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,h)&&(this.images[o]=h)}_validate(o,h){let m=!0;const _=h.data||h.spriteData;return this._validateStretch(h.stretchX,_&&_.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),m=!1),this._validateStretch(h.stretchY,_&&_.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),m=!1),this._validateContent(h.content,h)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),m=!1),m}_validateStretch(o,h){if(!o)return!0;let m=0;for(const _ of o){if(_[0]<m||_[1]<_[0]||h<_[1])return!1;m=_[1]}return!0}_validateContent(o,h){if(!o)return!0;if(o.length!==4)return!1;const m=h.spriteData,_=m&&m.width||h.data.width,w=m&&m.height||h.data.height;return!(o[0]<0||_<o[0]||o[1]<0||w<o[1]||o[2]<0||_<o[2]||o[3]<0||w<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,h,m=!0){const _=this.getImage(o);if(m&&(_.data.width!==h.data.width||_.data.height!==h.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[o]=h,this.updatedImages[o]=!0}removeImage(o){const h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,h){let m=!0;if(!this.isLoaded())for(const _ of o)this.images[_]||(m=!1);this.isLoaded()||m?this._notify(o,h):this.requestors.push({ids:o,callback:h})}_notify(o,h){const m={};for(const _ of o){let w=this.getImage(_);w||(this.fire(new l.Event("styleimagemissing",{id:_})),w=this.getImage(_)),w?m[_]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:l.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,m)}getPixelSize(){const{width:o,height:h}=this.atlasImage;return{width:o,height:h}}getPattern(o){const h=this.patterns[o],m=this.getImage(o);if(!m)return null;if(h&&h.position.version===m.version)return h.position;if(h)h.position.version=m.version;else{const _={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new l.ImagePosition(_,m);this.patterns[o]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Oe(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const w in this.patterns)o.push(this.patterns[w].bin);const{w:h,h:m}=l.potpack(o),_=this.atlasImage;_.resize({width:h||1,height:m||1});for(const w in this.patterns){const{bin:P}=this.patterns[w],I=P.x+1,O=P.y+1,D=this.getImage(w).data,U=D.width,V=D.height;l.RGBAImage.copy(D,_,{x:0,y:0},{x:I,y:O},{width:U,height:V}),l.RGBAImage.copy(D,_,{x:0,y:V-1},{x:I,y:O-1},{width:U,height:1}),l.RGBAImage.copy(D,_,{x:0,y:0},{x:I,y:O+V},{width:U,height:1}),l.RGBAImage.copy(D,_,{x:U-1,y:0},{x:I-1,y:O},{width:1,height:V}),l.RGBAImage.copy(D,_,{x:0,y:0},{x:I+U,y:O},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const h of o){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const m=this.getImage(h);m||l.warnOnce(`Image with ID: "${h}" was not found`),Fe(m)&&this.updateImage(h,m)}}}const tt=1e20;function yt(v,o,h,m,_,w,P,I,O){for(let D=o;D<o+m;D++)At(v,h*w+D,w,_,P,I,O);for(let D=h;D<h+_;D++)At(v,D*w+o,1,m,P,I,O)}function At(v,o,h,m,_,w,P){w[0]=0,P[0]=-tt,P[1]=tt,_[0]=v[o];for(let I=1,O=0,D=0;I<m;I++){_[I]=v[o+I*h];const U=I*I;do{const V=w[O];D=(_[I]-_[V]+U-V*V)/(I-V)/2}while(D<=P[O]&&--O>-1);O++,w[O]=I,P[O]=D,P[O+1]=tt}for(let I=0,O=0;I<m;I++){for(;P[O+1]<I;)O++;const D=w[O],U=I-D;v[o+I*h]=_[D]+U*U}}class zt{constructor(o,h){this.requestManager=o,this.localIdeographFontFamily=h,this.entries={}}setURL(o){this.url=o}getGlyphs(o,h){const m=[];for(const _ in o)for(const w of o[_])m.push({stack:_,id:w});l.asyncAll(m,({stack:_,id:w},P)=>{let I=this.entries[_];I||(I=this.entries[_]={glyphs:{},requests:{},ranges:{}});let O=I.glyphs[w];if(O!==void 0)return void P(null,{stack:_,id:w,glyph:O});if(O=this._tinySDF(I,_,w),O)return I.glyphs[w]=O,void P(null,{stack:_,id:w,glyph:O});const D=Math.floor(w/256);if(256*D>65535)return void P(new Error("glyphs > 65535 not supported"));if(I.ranges[D])return void P(null,{stack:_,id:w,glyph:O});if(!this.url)return void P(new Error("glyphsUrl is not set"));let U=I.requests[D];U||(U=I.requests[D]=[],zt.loadGlyphRange(_,D,this.url,this.requestManager,(V,ne)=>{if(ne){for(const fe in ne)this._doesCharSupportLocalGlyph(+fe)||(I.glyphs[+fe]=ne[+fe]);I.ranges[D]=!0}for(const fe of U)fe(V,ne);delete I.requests[D]})),U.push((V,ne)=>{V?P(V):ne&&P(null,{stack:_,id:w,glyph:ne[w]||null})})},(_,w)=>{if(_)h(_);else if(w){const P={};for(const{stack:I,id:O,glyph:D}of w)(P[I]||(P[I]={}))[O]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};h(null,P)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](o)||l.unicodeBlockLookup["Hangul Syllables"](o)||l.unicodeBlockLookup.Hiragana(o)||l.unicodeBlockLookup.Katakana(o))}_tinySDF(o,h,m){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(m))return;let w=o.tinySDF;if(!w){let I="400";/bold/i.test(h)?I="900":/medium/i.test(h)?I="500":/light/i.test(h)&&(I="200"),w=o.tinySDF=new zt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:_,fontWeight:I})}const P=w.draw(String.fromCharCode(m));return{id:m,bitmap:new l.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}zt.loadGlyphRange=function(v,o,h,m,_){const w=256*o,P=w+255,I=m.transformRequest(h.replace("{fontstack}",v).replace("{range}",`${w}-${P}`),R.Glyphs);l.getArrayBuffer(I,(O,D)=>{if(O)_(O);else if(D){const U={};for(const V of l.parseGlyphPbf(D))U[V.id]=V;_(null,U)}})},zt.TinySDF=class{constructor({fontSize:v=24,buffer:o=3,radius:h=8,cutoff:m=.25,fontFamily:_="sans-serif",fontWeight:w="normal",fontStyle:P="normal"}={}){this.buffer=o,this.cutoff=m,this.radius=h;const I=this.size=v+4*o,O=this._createCanvas(I),D=this.ctx=O.getContext("2d",{willReadFrequently:!0});D.font=`${P} ${w} ${v}px ${_}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(v){const o=document.createElement("canvas");return o.width=o.height=v,o}draw(v){const{width:o,actualBoundingBoxAscent:h,actualBoundingBoxDescent:m,actualBoundingBoxLeft:_,actualBoundingBoxRight:w}=this.ctx.measureText(v),P=Math.ceil(h),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-_))),O=Math.min(this.size-this.buffer,P+Math.ceil(m)),D=I+2*this.buffer,U=O+2*this.buffer,V=Math.max(D*U,0),ne=new Uint8ClampedArray(V),fe={data:ne,width:D,height:U,glyphWidth:I,glyphHeight:O,glyphTop:P,glyphLeft:0,glyphAdvance:o};if(I===0||O===0)return fe;const{ctx:he,buffer:de,gridInner:me,gridOuter:Me}=this;he.clearRect(de,de,I,O),he.fillText(v,de,de+P);const je=he.getImageData(de,de,I,O);Me.fill(tt,0,V),me.fill(0,0,V);for(let be=0;be<O;be++)for(let Ue=0;Ue<I;Ue++){const Ze=je.data[4*(be*I+Ue)+3]/255;if(Ze===0)continue;const Ke=(be+de)*D+Ue+de;if(Ze===1)Me[Ke]=0,me[Ke]=tt;else{const nt=.5-Ze;Me[Ke]=nt>0?nt*nt:0,me[Ke]=nt<0?nt*nt:0}}yt(Me,0,0,D,U,D,this.f,this.v,this.z),yt(me,de,de,I,O,D,this.f,this.v,this.z);for(let be=0;be<V;be++){const Ue=Math.sqrt(Me[be])-Math.sqrt(me[be]);ne[be]=Math.round(255-255*(Ue/this.radius+this.cutoff))}return fe}};class Vt{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(o,h){return l.sphericalToCartesian(o.expression.evaluate(h))}interpolate(o,h,m){return{x:l.interpolate.number(o.x,h.x,m),y:l.interpolate.number(o.y,h.y,m),z:l.interpolate.number(o.z,h.z,m)}}}let Ve,_e;class we extends l.Evented{constructor(o){super(),Ve=Ve||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new Vt,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable(Ve),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,h={}){if(!this._validate(l.validateLight,o,h))for(const m in o){const _=o[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),_):this._transitionable.setValue(m,_)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,h,m){return(!m||m.validate!==!1)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class X{constructor(o,h){this.width=o,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,h){const m=o.join(",")+String(h);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(o,h)),this.dashEntry[m]}getDashRanges(o,h,m){const _=[];let w=o.length%2==1?-o[o.length-1]*m:0,P=o[0]*m,I=!0;_.push({left:w,right:P,isDash:I,zeroLength:o[0]===0});let O=o[0];for(let D=1;D<o.length;D++){I=!I;const U=o[D];w=O*m,O+=U,P=O*m,_.push({left:w,right:P,isDash:I,zeroLength:U===0})}return _}addRoundDash(o,h,m){const _=h/2;for(let w=-m;w<=m;w++){const P=this.width*(this.nextRow+m+w);let I=0,O=o[I];for(let D=0;D<this.width;D++){D/O.right>1&&(O=o[++I]);const U=Math.abs(D-O.left),V=Math.abs(D-O.right),ne=Math.min(U,V);let fe;const he=w/m*(_+1);if(O.isDash){const de=_-Math.abs(he);fe=Math.sqrt(ne*ne+de*de)}else fe=_-Math.sqrt(ne*ne+he*he);this.data[P+D]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(o){for(let I=o.length-1;I>=0;--I){const O=o[I],D=o[I+1];O.zeroLength?o.splice(I,1):D&&D.isDash===O.isDash&&(D.left=O.left,o.splice(I,1))}const h=o[0],m=o[o.length-1];h.isDash===m.isDash&&(h.left=m.left-this.width,m.right=h.right+this.width);const _=this.width*this.nextRow;let w=0,P=o[w];for(let I=0;I<this.width;I++){I/P.right>1&&(P=o[++w]);const O=Math.abs(I-P.left),D=Math.abs(I-P.right),U=Math.min(O,D);this.data[_+I]=Math.max(0,Math.min(255,(P.isDash?U:-U)+128))}}addDash(o,h){const m=h?7:0,_=2*m+1;if(this.nextRow+_>this.height)return l.warnOnce("LineAtlas out of space"),null;let w=0;for(let I=0;I<o.length;I++)w+=o[I];if(w!==0){const I=this.width/w,O=this.getDashRanges(o,this.width,I);h?this.addRoundDash(O,I,m):this.addRegularDash(O)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:w};return this.nextRow+=_,this.dirty=!0,P}bind(o){const h=o.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class oe{constructor(o,h,m){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=m;const _=this.workerPool.acquire(m);for(let w=0;w<_.length;w++){const P=new oe.Actor(_[w],h,m);P.name=`Worker ${w}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,h,m){l.asyncAll(this.actors,(_,w)=>{_.send(o,h,w)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}}function lt(v,o,h){const m=function(_,w){if(_)return h(_);if(w){const P=l.pick(l.extend(w,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(P.vectorLayers=w.vector_layers,P.vectorLayerIds=P.vectorLayers.map(I=>I.id)),h(null,P)}};return v.url?l.getJSON(o.transformRequest(v.url,R.Source),m):l.browser.frame(()=>m(null,v))}oe.Actor=l.Actor;class mt{constructor(o,h){o&&(h?this.setSouthWest(o).setNorthEast(h):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}setSouthWest(o){return this._sw=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}extend(o){const h=this._sw,m=this._ne;let _,w;if(o instanceof l.LngLat)_=o,w=o;else{if(!(o instanceof mt))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(mt.convert(o)):this.extend(l.LngLat.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(l.LngLat.convert(o)):this;if(_=o._sw,w=o._ne,!_||!w)return this}return h||m?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),m.lng=Math.max(w.lng,m.lng),m.lat=Math.max(w.lat,m.lat)):(this._sw=new l.LngLat(_.lng,_.lat),this._ne=new l.LngLat(w.lng,w.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:h,lat:m}=l.LngLat.convert(o);let _=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&_}static convert(o){return o instanceof mt?o:o&&new mt(o)}static fromLngLat(o,h=0){const m=360*h/40075017,_=m/Math.cos(Math.PI/180*o.lat);return new mt(new l.LngLat(o.lng-_,o.lat-m),new l.LngLat(o.lng+_,o.lat+m))}}class Gt{constructor(o,h,m){this.bounds=mt.convert(this.validateBounds(o)),this.minzoom=h||0,this.maxzoom=m||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const h=Math.pow(2,o.z),m=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*h),_=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*h),P=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*h);return o.x>=m&&o.x<w&&o.y>=_&&o.y<P}}class Dt extends l.Evented{constructor(o,h,m,_){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,(w,P)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),w?this.fire(new l.ErrorEvent(w)):P&&(l.extend(this,P),P.bounds&&(this.tileBounds=new Gt(P.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.extend({},this._options),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(h,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(o,h){const m=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(m,R.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(P,I){return delete o.request,o.aborted?h(null):P&&P.status!==404?h(P):(I&&I.resourceTiming&&(o.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&o.setExpiryData(I),o.loadVectorData(I,this.map.painter),h(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=h:o.request=o.actor.send("reloadTile",_,w.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",_,w.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Qt extends l.Evented{constructor(o,h,m,_){super(),this.id=o,this.dispatcher=m,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},h),l.extend(this,l.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new l.ErrorEvent(o)):h&&(l.extend(this,h),h.bounds&&(this.tileBounds=new Gt(h.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,h){const m=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=Z.getImage(this.map._requestManager.transformRequest(m,R.Tile),(_,w,P)=>{if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(_)o.state="errored",h(_);else if(w){this.map._refreshExpiredTiles&&P&&o.setExpiryData(P);const I=this.map.painter.context,O=I.gl;o.texture=this.map.painter.getTileTexture(w.width),o.texture?o.texture.update(w,{useMipmap:!0}):(o.texture=new Oe(I,w,O.RGBA,{useMipmap:!0}),o.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),o.state="loaded",h(null)}},this.map._refreshExpiredTiles)}abortTile(o,h){o.request&&(o.request.cancel(),delete o.request),h()}unloadTile(o,h){o.texture&&this.map.painter.saveTileTexture(o.texture),h()}hasTransition(){return!1}}class un extends Qt{constructor(o,h,m,_){super(o,h,m,_),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}loadTile(o,h){const m=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function _(w,P){w&&(o.state="errored",h(w)),P&&(o.dem=P,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",h(null))}o.request=Z.getImage(this.map._requestManager.transformRequest(m,R.Tile),(function(w,P){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(w)o.state="errored",h(w);else if(P){this.map._refreshExpiredTiles&&o.setExpiryData(P),delete P.cacheControl,delete P.expires;const I=l.isImageBitmap(P)&&(_e==null&&(_e=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_e)?P:l.browser.getImageData(P,1),O={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:I,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",O,_.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const h=o.canonical,m=Math.pow(2,h.z),_=(h.x-1+m)%m,w=h.x===0?o.wrap-1:o.wrap,P=(h.x+1+m)%m,I=h.x+1===m?o.wrap+1:o.wrap,O={};return O[new l.OverscaledTileID(o.overscaledZ,w,h.z,_,h.y).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,I,h.z,P,h.y).key]={backfilled:!1},h.y>0&&(O[new l.OverscaledTileID(o.overscaledZ,w,h.z,_,h.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,I,h.z,P,h.y-1).key]={backfilled:!1}),h.y+1<m&&(O[new l.OverscaledTileID(o.overscaledZ,w,h.z,_,h.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,I,h.z,P,h.y+1).key]={backfilled:!1}),O}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class Xn extends l.Evented{constructor(o,h,m,_){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.extend({},this._options,{type:this.type,data:this._data}),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(_),this._data=h.data,this._options=l.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const w=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*w,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*w,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:l.EXTENT,radius:(h.clusterRadius||50)*w,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},h),this}getClusterChildren(o,h){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},h),this}getClusterLeaves(o,h,m,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:h,offset:m},_),this}_updateWorkerData(o){const h=l.extend({},this.workerOptions);o?h.dataDiff=o:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(l.browser.resolveURL(this._data),R.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(m,_)=>{if(this._pendingLoads--,this._removed||_&&_.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let w=null;if(_&&_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0)),m)return void this.fire(new l.ErrorEvent(m));const P={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&l.extend(P,{resourceTiming:w}),this.fire(new l.Event("data",{...P,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...P,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(o,h){const m=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const _={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(m,_,(w,P)=>(delete o.request,o.unloadVectorData(),o.aborted?h(null):w?h(w):(o.loadVectorData(P,this.map.painter,m==="reloadTile"),h(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Qn=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Bn extends l.Evented{constructor(o,h,m,_){super(),this.load=(w,P)=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Z.getImage(this.map._requestManager.transformRequest(this.url,R.Image),(I,O)=>{this._request=null,this._loaded=!0,I?this.fire(new l.ErrorEvent(I)):O&&(this.image=O,w&&(this.coordinates=w),P&&P(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Oe(w,this.image,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let I=!1;for(const O in this.tiles){const D=this.tiles[O];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=o,this.dispatcher=m,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(o){this.coordinates=o;const h=o.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(_){let w=1/0,P=1/0,I=-1/0,O=-1/0;for(const ne of _)w=Math.min(w,ne.x),P=Math.min(P,ne.y),I=Math.max(I,ne.x),O=Math.max(O,ne.y);const D=Math.max(I-w,O-P),U=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),V=Math.pow(2,U);return new l.CanonicalTileID(U,Math.floor((w+I)/2*V),Math.floor((P+O)/2*V))}(h),this.minzoom=this.maxzoom=this.tileID.z;const m=h.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(o,h){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},h(null)):(o.state="errored",h(null))}hasTransition(){return!1}}class Qr extends Bn{constructor(o,h,m,_){super(o,h,m,_),this.load=()=>{this._loaded=!1;const w=this.options;this.urls=[];for(const P of w.urls)this.urls.push(this.map._requestManager.transformRequest(P,R.Source).url);l.getVideo(this.urls,(P,I)=>{this._loaded=!0,P?this.fire(new l.ErrorEvent(P)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.texSubImage2D(P.TEXTURE_2D,0,0,0,P.RGBA,P.UNSIGNED_BYTE,this.video)):(this.texture=new Oe(w,this.video,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let I=!1;for(const O in this.tiles){const D=this.tiles[O];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=h}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Je extends Bn{constructor(o,h,m,_){super(o,h,m,_),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const P=this.map.painter.context,I=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Oe(P,this.canvas,I.RGBA,{premultiply:!0});let O=!1;for(const D in this.tiles){const U=this.tiles[D];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,O=!0)}O&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(P=>typeof P!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const yr={},Gi=v=>{switch(v){case"geojson":return Xn;case"image":return Bn;case"raster":return Qt;case"raster-dem":return un;case"vector":return Dt;case"video":return Qr;case"canvas":return Je}return yr[v]};function Gn(v,o){const h=l.create();return l.translate(h,h,[1,1,0]),l.scale(h,h,[.5*v.width,.5*v.height,1]),l.multiply(h,h,v.calculatePosMatrix(o.toUnwrapped()))}function _n(v,o,h,m,_,w){const P=function(V,ne,fe){if(V)for(const he of V){const de=ne[he];if(de&&de.source===fe&&de.type==="fill-extrusion")return!0}else for(const he in ne){const de=ne[he];if(de.source===fe&&de.type==="fill-extrusion")return!0}return!1}(_&&_.layers,o,v.id),I=w.maxPitchScaleFactor(),O=v.tilesIn(m,I,P);O.sort(_o);const D=[];for(const V of O)D.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(o,h,v._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,_,w,I,Gn(v.transform,V.tileID))});const U=function(V){const ne={},fe={};for(const he of V){const de=he.queryResults,me=he.wrappedTileID,Me=fe[me]=fe[me]||{};for(const je in de){const be=de[je],Ue=Me[je]=Me[je]||{},Ze=ne[je]=ne[je]||[];for(const Ke of be)Ue[Ke.featureIndex]||(Ue[Ke.featureIndex]=!0,Ze.push(Ke))}}return ne}(D);for(const V in U)U[V].forEach(ne=>{const fe=ne.feature,he=v.getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=he});return U}function _o(v,o){const h=v.tileID,m=o.tileID;return h.overscaledZ-m.overscaledZ||h.canonical.y-m.canonical.y||h.wrap-m.wrap||h.canonical.x-m.canonical.x}class Mo{constructor(o,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=l.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const h=o+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,h,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(_,w){const P={};if(!w)return P;for(const I of _){const O=I.layerIds.map(D=>w.getLayer(D)).filter(Boolean);if(O.length!==0){I.layers=O,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(D=>O.filter(U=>U.id===D)[0]));for(const D of O)P[D.id]=I}}return P}(o.buckets,h.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof l.SymbolBucket&&w.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(_).queryRadius(w))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const m in this.buckets){const _=this.buckets[m];_.uploadPending()&&_.upload(o)}const h=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Oe(o,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Oe(o,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,h,m,_,w,P,I,O,D,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:w,scale:P,tileSize:this.tileSize,pixelPosMatrix:U,transform:O,params:I,queryPadding:this.queryPadding*D},o,h,m):{}}querySourceFeatures(o,h){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const _=m.loadVTLayers(),w=h&&h.sourceLayer?h.sourceLayer:"",P=_._geojsonTileLayer||_[w];if(!P)return;const I=l.createFilter(h&&h.filter),{z:O,x:D,y:U}=this.tileID.canonical,V={z:O,x:D,y:U};for(let ne=0;ne<P.length;ne++){const fe=P.feature(ne);if(I.needGeometry){const me=l.toEvaluationFeature(fe,!0);if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!I.filter(new l.EvaluationParameters(this.tileID.overscaledZ),fe))continue;const he=m.getId(fe,w),de=new l.GeoJSONFeature(fe,O,D,U,he);de.tile=V,o.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const h=this.expirationTime;if(o.cacheControl){const m=l.parseCacheControl(o.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const m=Date.now();let _=!1;if(this.expirationTime>m)_=!1;else if(h)if(this.expirationTime<h)_=!0;else{const w=this.expirationTime-h;w?this.expirationTime=m+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!h.style.hasLayer(_))continue;const w=this.buckets[_],P=w.layers[0].sourceLayer||"_geojsonTileLayer",I=m[P],O=o[P];if(!I||!O||Object.keys(O).length===0)continue;w.update(O,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=h&&h.style&&h.style.getLayer(_);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=l.browser.now()+o}setDependencies(o,h){const m={};for(const _ of h)m[_]=!0;this.dependencies[o]=m}hasDependency(o,h){for(const m of o){const _=this.dependencies[m];if(_){for(const w of h)if(_[w])return!0}}return!1}}class Lo{constructor(o,h){this.max=o,this.onRemove=h,this.reset()}reset(){for(const o in this.data)for(const h of this.data[o])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(o,h,m){const _=o.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:h,timeout:void 0};if(m!==void 0&&(w.timeout=setTimeout(()=>{this.remove(o,w)},m)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const h=this.data[o].shift();return h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),h.value}getByKey(o){const h=this.data[o];return h?h[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,h){if(!this.has(o))return this;const m=o.wrapped().key,_=h===void 0?0:this.data[m].indexOf(h),w=this.data[m][_];return this.data[m].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(w.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(o){const h=[];for(const m in this.data)for(const _ of this.data[m])o(_.value)||h.push(_);for(const m of h)this.remove(m.value.tileID,m)}}class ei{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,h,m){const _=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][_]=this.stateChanges[o][_]||{},l.extend(this.stateChanges[o][_],m),this.deletedStates[o]===null){this.deletedStates[o]={};for(const w in this.state[o])w!==_&&(this.deletedStates[o][w]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][_]===null){this.deletedStates[o][_]={};for(const w in this.state[o][_])m[w]||(this.deletedStates[o][_][w]=null)}else for(const w in m)this.deletedStates[o]&&this.deletedStates[o][_]&&this.deletedStates[o][_][w]===null&&delete this.deletedStates[o][_][w]}removeFeatureState(o,h,m){if(this.deletedStates[o]===null)return;const _=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},m&&h!==void 0)this.deletedStates[o][_]!==null&&(this.deletedStates[o][_]=this.deletedStates[o][_]||{},this.deletedStates[o][_][m]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][_])for(m in this.deletedStates[o][_]={},this.stateChanges[o][_])this.deletedStates[o][_][m]=null;else this.deletedStates[o][_]=null;else this.deletedStates[o]=null}getState(o,h){const m=String(h),_=l.extend({},(this.state[o]||{})[m],(this.stateChanges[o]||{})[m]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const w=this.deletedStates[o][h];if(w===null)return{};for(const P in w)delete _[P]}return _}initializeTileState(o,h){o.setFeatureState(this.state,h)}coalesceChanges(o,h){const m={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const P in this.stateChanges[_])this.state[_][P]||(this.state[_][P]={}),l.extend(this.state[_][P],this.stateChanges[_][P]),w[P]=this.state[_][P];m[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const P in this.state[_])w[P]={},this.state[_][P]={};else for(const P in this.deletedStates[_]){if(this.deletedStates[_][P]===null)this.state[_][P]={};else for(const I of Object.keys(this.deletedStates[_][P]))delete this.state[_][P][I];w[P]=this.state[_][P]}m[_]=m[_]||{},l.extend(m[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const _ in o)o[_].setFeatureState(m,h)}}class Yn extends l.Evented{constructor(o,h,m){super(),this.id=o,this.dispatcher=m,this.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,w,P,I)=>{const O=new(Gi(w.type))(_,w,P,I);if(O.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${O.id}`);return O})(o,h,m,this),this._tiles={},this._cache=new Lo(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ei,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,h){return this._source.loadTile(o,h)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new l.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const m=this._tiles[h];m.upload(o),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Oo).map(o=>o.key)}getRenderableIds(o){const h=[];for(const m in this._tiles)this._isIdRenderable(m,o)&&h.push(this._tiles[m]);return o?h.sort((m,_)=>{const w=m.tileID,P=_.tileID,I=new l.Point(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),O=new l.Point(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-P.overscaledZ||O.y-I.y||O.x-I.x}).map(m=>m.tileID.key):h.map(m=>m.tileID).sort(Oo).map(m=>m.key)}hasRenderableParent(o){const h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,h){const m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=h),this._loadTile(m,this._tileLoaded.bind(this,m,o,h)))}_tileLoaded(o,h,m,_){if(_)return o.state="errored",void(_.status!==404?this._source.fire(new l.ErrorEvent(_,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=l.browser.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const h=this.getRenderableIds();for(let _=0;_<h.length;_++){const w=h[_];if(o.neighboringTiles&&o.neighboringTiles[w]){const P=this.getTileByID(w);m(o,P),m(P,o)}}function m(_,w){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let P=w.tileID.canonical.x-_.tileID.canonical.x;const I=w.tileID.canonical.y-_.tileID.canonical.y,O=Math.pow(2,_.tileID.canonical.z),D=w.tileID.key;P===0&&I===0||Math.abs(I)>1||(Math.abs(P)>1&&(Math.abs(P+O)===1?P+=O:Math.abs(P-O)===1&&(P-=O)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,P,I),_.neighboringTiles&&_.neighboringTiles[D]&&(_.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,h,m,_){for(const w in this._tiles){let P=this._tiles[w];if(_[w]||!P.hasData()||P.tileID.overscaledZ<=h||P.tileID.overscaledZ>m)continue;let I=P.tileID;for(;P&&P.tileID.overscaledZ>h+1;){const D=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[D.key],P&&P.hasData()&&(I=D)}let O=I;for(;O.overscaledZ>h;)if(O=O.scaledTo(O.overscaledZ-1),o[O.key]){_[I.key]=I;break}}}findLoadedParent(o,h){if(o.key in this._loadedParentTiles){const m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=h?m:null}for(let m=o.overscaledZ-1;m>=h;m--){const _=o.scaledTo(m),w=this._getLoadedTile(_);if(w)return w}}_getLoadedTile(o){const h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const h=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,_=Math.floor(h*m*(this._maxTileCacheZoomLevels===null?l.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(o){const h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){const m={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+h),m[w.tileID.key]=w}this._tiles=m;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(o,h){if(this.transform=o,this.terrain=h,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new l.OverscaledTileID(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(m=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(m=m.filter(U=>this._source.hasTile(U)))):m=[];const _=o.coveringZoomLevel(this._source),w=Math.max(_-Yn.maxOverzooming,this._source.minzoom),P=Math.max(_+Yn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const V of m)if(V.canonical.z>this._source.minzoom){const ne=V.scaledTo(V.canonical.z-1);U[ne.key]=ne;const fe=V.scaledTo(Math.max(this._source.minzoom,Math.min(V.canonical.z,5)));U[fe.key]=fe}m=m.concat(Object.values(U))}const I=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(m,_);if(vo(this._source.type)){const U={},V={},ne=Object.keys(O),fe=l.browser.now();for(const he of ne){const de=O[he],me=this._tiles[he];if(!me||me.fadeEndTime!==0&&me.fadeEndTime<=fe)continue;const Me=this.findLoadedParent(de,w);Me&&(this._addTile(Me.tileID),U[Me.tileID.key]=Me.tileID),V[he]=de}this._retainLoadedChildren(V,_,P,O);for(const he in U)O[he]||(this._coveredTiles[he]=!0,O[he]=U[he]);if(h){const he={},de={};for(const me of m)this._tiles[me.key].hasData()?he[me.key]=me:de[me.key]=me;for(const me in de){const Me=de[me].children(this._source.maxzoom);this._tiles[Me[0].key]&&this._tiles[Me[1].key]&&this._tiles[Me[2].key]&&this._tiles[Me[3].key]&&(he[Me[0].key]=O[Me[0].key]=Me[0],he[Me[1].key]=O[Me[1].key]=Me[1],he[Me[2].key]=O[Me[2].key]=Me[2],he[Me[3].key]=O[Me[3].key]=Me[3],delete de[me])}for(const me in de){const Me=this.findLoadedParent(de[me],this._source.minzoom);if(Me){he[Me.tileID.key]=O[Me.tileID.key]=Me.tileID;for(const je in he)he[je].isChildOf(Me.tileID)&&delete he[je]}}for(const me in this._tiles)he[me]||(this._coveredTiles[me]=!0)}}for(const U in O)this._tiles[U].clearFadeHold();const D=l.keysDifference(this._tiles,O);for(const U of D){const V=this._tiles[U];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,h){const m={},_={},w=Math.max(h-Yn.maxOverzooming,this._source.minzoom),P=Math.max(h+Yn.maxUnderzooming,this._source.minzoom),I={};for(const O of o){const D=this._addTile(O);m[O.key]=O,D.hasData()||h<this._source.maxzoom&&(I[O.key]=O)}this._retainLoadedChildren(I,h,P,m);for(const O of o){let D=this._tiles[O.key];if(D.hasData())continue;if(h+1>this._source.maxzoom){const V=O.children(this._source.maxzoom)[0],ne=this.getTile(V);if(ne&&ne.hasData()){m[V.key]=V;continue}}else{const V=O.children(this._source.maxzoom);if(m[V[0].key]&&m[V[1].key]&&m[V[2].key]&&m[V[3].key])continue}let U=D.wasRequested();for(let V=O.overscaledZ-1;V>=w;--V){const ne=O.scaledTo(V);if(_[ne.key])break;if(_[ne.key]=!0,D=this.getTile(ne),!D&&U&&(D=this._addTile(ne)),D){const fe=D.hasData();if((U||fe)&&(m[ne.key]=ne),U=D.wasRequested(),fe)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const h=[];let m,_=this._tiles[o].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){m=this._loadedParentTiles[_.key];break}h.push(_.key);const w=_.scaledTo(_.overscaledZ-1);if(m=this._getLoadedTile(w),m)break;_=w}for(const w of h)this._loadedParentTiles[w]=m}}_addTile(o){let h=this._tiles[o.key];if(h)return h;h=this._cache.getAndRemove(o),h&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));const m=h;return h||(h=new Mo(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,o.key,h.state))),h.uses++,this._tiles[o.key]=h,m||this._source.fire(new l.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(o,h){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const m=h.getExpiryTimeout();m&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},m))}_removeTile(o){const h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,h,m){const _=[],w=this.transform;if(!w)return _;const P=m?w.getCameraQueryGeometry(o):o,I=o.map(he=>w.pointCoordinate(he,this.terrain)),O=P.map(he=>w.pointCoordinate(he,this.terrain)),D=this.getIds();let U=1/0,V=1/0,ne=-1/0,fe=-1/0;for(const he of O)U=Math.min(U,he.x),V=Math.min(V,he.y),ne=Math.max(ne,he.x),fe=Math.max(fe,he.y);for(let he=0;he<D.length;he++){const de=this._tiles[D[he]];if(de.holdingForFade())continue;const me=de.tileID,Me=Math.pow(2,w.zoom-de.tileID.overscaledZ),je=h*de.queryPadding*l.EXTENT/de.tileSize/Me,be=[me.getTilePoint(new l.MercatorCoordinate(U,V)),me.getTilePoint(new l.MercatorCoordinate(ne,fe))];if(be[0].x-je<l.EXTENT&&be[0].y-je<l.EXTENT&&be[1].x+je>=0&&be[1].y+je>=0){const Ue=I.map(Ke=>me.getTilePoint(Ke)),Ze=O.map(Ke=>me.getTilePoint(Ke));_.push({tile:de,tileID:me,queryGeometry:Ue,cameraQueryGeometry:Ze,scale:Me})}}return _}getVisibleCoordinates(o){const h=this.getRenderableIds(o).map(m=>this._tiles[m].tileID);for(const m of h)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(vo(this._source.type)){const o=l.browser.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=o)return!0}return!1}setFeatureState(o,h,m){this._state.updateState(o=o||"_geojsonTileLayer",h,m)}removeFeatureState(o,h,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,m)}getFeatureState(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)}setDependencies(o,h,m){const _=this._tiles[o];_&&_.setDependencies(h,m)}reloadTilesForDependencies(o,h){for(const m in this._tiles)this._tiles[m].hasDependency(o,h)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(o,h))}}function Oo(v,o){const h=Math.abs(2*v.wrap)-+(v.wrap<0),m=Math.abs(2*o.wrap)-+(o.wrap<0);return v.overscaledZ-o.overscaledZ||m-h||o.canonical.y-v.canonical.y||o.canonical.x-v.canonical.x}function vo(v){return v==="raster"||v==="image"||v==="video"}Yn.maxOverzooming=10,Yn.maxUnderzooming=3;const vt="mapboxgl_preloaded_worker_pool";class ti{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<ti.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[vt]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(l.browser.hardwareConcurrency/2);let se;function Re(){return se||(se=new ti),se}ti.workerCount=l.isSafari(globalThis)?Math.max(Math.min(We,3),1):1;class Pe{constructor(o,h){this.reset(o,h)}reset(o,h){this.points=o||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);let h=1,m=this._distances[h];const _=o*this.paddedLength+this.padding;for(;m<_&&h<this._distances.length;)m=this._distances[++h];const w=h-1,P=this._distances[w],I=m-P,O=I>0?(_-P)/I:0;return this.points[w].mult(1-O).add(this.points[h].mult(O))}}function rt(v,o){let h=!0;return v==="always"||v!=="never"&&o!=="never"||(h=!1),h}class bt{constructor(o,h,m){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(h/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,h,m,_,w){this._forEachCell(h,m,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(o,h,m,_){this._forEachCell(h-_,m-_,h+_,m+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(m),this.circles.push(_)}_insertBoxCell(o,h,m,_,w,P){this.boxCells[w].push(P)}_insertCircleCell(o,h,m,_,w,P){this.circleCells[w].push(P)}_query(o,h,m,_,w,P,I){if(m<0||o>this.width||_<0||h>this.height)return[];const O=[];if(o<=0&&h<=0&&this.width<=m&&this.height<=_){if(w)return[{key:null,x1:o,y1:h,x2:m,y2:_}];for(let D=0;D<this.boxKeys.length;D++)O.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const U=this.circles[3*D],V=this.circles[3*D+1],ne=this.circles[3*D+2];O.push({key:this.circleKeys[D],x1:U-ne,y1:V-ne,x2:U+ne,y2:V+ne})}}else this._forEachCell(o,h,m,_,this._queryCell,O,{hitTest:w,overlapMode:P,seenUids:{box:{},circle:{}}},I);return O}query(o,h,m,_){return this._query(o,h,m,_,!1,null)}hitTest(o,h,m,_,w,P){return this._query(o,h,m,_,!0,w,P).length>0}hitTestCircle(o,h,m,_,w){const P=o-m,I=o+m,O=h-m,D=h+m;if(I<0||P>this.width||D<0||O>this.height)return!1;const U=[];return this._forEachCell(P,O,I,D,this._queryCellCircle,U,{hitTest:!0,overlapMode:_,circle:{x:o,y:h,radius:m},seenUids:{box:{},circle:{}}},w),U.length>0}_queryCell(o,h,m,_,w,P,I,O){const{seenUids:D,hitTest:U,overlapMode:V}=I,ne=this.boxCells[w];if(ne!==null){const he=this.bboxes;for(const de of ne)if(!D.box[de]){D.box[de]=!0;const me=4*de,Me=this.boxKeys[de];if(o<=he[me+2]&&h<=he[me+3]&&m>=he[me+0]&&_>=he[me+1]&&(!O||O(Me))&&(!U||!rt(V,Me.overlapMode))&&(P.push({key:Me,x1:he[me],y1:he[me+1],x2:he[me+2],y2:he[me+3]}),U))return!0}}const fe=this.circleCells[w];if(fe!==null){const he=this.circles;for(const de of fe)if(!D.circle[de]){D.circle[de]=!0;const me=3*de,Me=this.circleKeys[de];if(this._circleAndRectCollide(he[me],he[me+1],he[me+2],o,h,m,_)&&(!O||O(Me))&&(!U||!rt(V,Me.overlapMode))){const je=he[me],be=he[me+1],Ue=he[me+2];if(P.push({key:Me,x1:je-Ue,y1:be-Ue,x2:je+Ue,y2:be+Ue}),U)return!0}}}return!1}_queryCellCircle(o,h,m,_,w,P,I,O){const{circle:D,seenUids:U,overlapMode:V}=I,ne=this.boxCells[w];if(ne!==null){const he=this.bboxes;for(const de of ne)if(!U.box[de]){U.box[de]=!0;const me=4*de,Me=this.boxKeys[de];if(this._circleAndRectCollide(D.x,D.y,D.radius,he[me+0],he[me+1],he[me+2],he[me+3])&&(!O||O(Me))&&!rt(V,Me.overlapMode))return P.push(!0),!0}}const fe=this.circleCells[w];if(fe!==null){const he=this.circles;for(const de of fe)if(!U.circle[de]){U.circle[de]=!0;const me=3*de,Me=this.circleKeys[de];if(this._circlesCollide(he[me],he[me+1],he[me+2],D.x,D.y,D.radius)&&(!O||O(Me))&&!rt(V,Me.overlapMode))return P.push(!0),!0}}}_forEachCell(o,h,m,_,w,P,I,O){const D=this._convertToXCellCoord(o),U=this._convertToYCellCoord(h),V=this._convertToXCellCoord(m),ne=this._convertToYCellCoord(_);for(let fe=D;fe<=V;fe++)for(let he=U;he<=ne;he++)if(w.call(this,o,h,m,_,this.xCellCount*he+fe,P,I,O))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,h,m,_,w,P){const I=_-o,O=w-h,D=m+P;return D*D>I*I+O*O}_circleAndRectCollide(o,h,m,_,w,P,I){const O=(P-_)/2,D=Math.abs(o-(_+O));if(D>O+m)return!1;const U=(I-w)/2,V=Math.abs(h-(w+U));if(V>U+m)return!1;if(D<=O||V<=U)return!0;const ne=D-O,fe=V-U;return ne*ne+fe*fe<=m*m}}function vn(v,o,h,m,_){const w=l.create();return o?(l.scale(w,w,[1/_,1/_,1]),h||l.rotateZ(w,w,m.angle)):l.multiply(w,m.labelPlaneMatrix,v),w}function Wt(v,o,h,m,_){if(o){const w=l.clone(v);return l.scale(w,w,[_,_,1]),h||l.rotateZ(w,w,-m.angle),w}return m.glCoordMatrix}function xt(v,o,h){let m;h?(m=[v.x,v.y,h(v.x,v.y),1],l.transformMat4(m,m,o)):(m=[v.x,v.y,0,1],Se(m,m,o));const _=m[3];return{point:new l.Point(m[0]/_,m[1]/_),signedDistanceFromCamera:_}}function $n(v,o){return .5+v/o*.5}function jn(v,o){const h=v[0]/v[3],m=v[1]/v[3];return h>=-o[0]&&h<=o[0]&&m>=-o[1]&&m<=o[1]}function bn(v,o,h,m,_,w,P,I,O,D){const U=m?v.textSizeData:v.iconSizeData,V=l.evaluateSizeForZoom(U,h.transform.zoom),ne=[256/h.width*2+1,256/h.height*2+1],fe=m?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;fe.clear();const he=v.lineVertexArray,de=m?v.text.placedSymbolArray:v.icon.placedSymbolArray,me=h.transform.width/h.transform.height;let Me=!1;for(let je=0;je<de.length;je++){const be=de.get(je);if(be.hidden||be.writingMode===l.WritingMode.vertical&&!Me){ce(be.numGlyphs,fe);continue}let Ue;if(Me=!1,D?(Ue=[be.anchorX,be.anchorY,D(be.anchorX,be.anchorY),1],l.transformMat4(Ue,Ue,o)):(Ue=[be.anchorX,be.anchorY,0,1],Se(Ue,Ue,o)),!jn(Ue,ne)){ce(be.numGlyphs,fe);continue}const Ze=$n(h.transform.cameraToCenterDistance,Ue[3]),Ke=l.evaluateSizeForFeature(U,V,be),nt=P?Ke/Ze:Ke*Ze,ut=new l.Point(be.anchorX,be.anchorY),it=xt(ut,_,D).point,Et={projections:{},offsets:{}},Nt=On(be,nt,!1,I,o,_,w,v.glyphOffsetArray,he,fe,it,ut,Et,me,O,D);Me=Nt.useVertical,(Nt.notEnoughRoom||Me||Nt.needsFlipping&&On(be,nt,!0,I,o,_,w,v.glyphOffsetArray,he,fe,it,ut,Et,me,O,D).notEnoughRoom)&&ce(be.numGlyphs,fe)}m?v.text.dynamicLayoutVertexBuffer.updateData(fe):v.icon.dynamicLayoutVertexBuffer.updateData(fe)}function _r(v,o,h,m,_,w,P,I,O,D,U,V,ne){const fe=I.glyphStartIndex+I.numGlyphs,he=I.lineStartIndex,de=I.lineStartIndex+I.lineLength,me=o.getoffsetX(I.glyphStartIndex),Me=o.getoffsetX(fe-1),je=W(v*me,h,m,_,w,P,I.segment,he,de,O,D,U,V,ne);if(!je)return null;const be=W(v*Me,h,m,_,w,P,I.segment,he,de,O,D,U,V,ne);return be?{first:je,last:be}:null}function Mn(v,o,h,m){return v===l.WritingMode.horizontal&&Math.abs(h.y-o.y)>Math.abs(h.x-o.x)*m?{useVertical:!0}:(v===l.WritingMode.vertical?o.y<h.y:o.x>h.x)?{needsFlipping:!0}:null}function On(v,o,h,m,_,w,P,I,O,D,U,V,ne,fe,he,de){const me=o/24,Me=v.lineOffsetX*me,je=v.lineOffsetY*me;let be;if(v.numGlyphs>1){const Ue=v.glyphStartIndex+v.numGlyphs,Ze=v.lineStartIndex,Ke=v.lineStartIndex+v.lineLength,nt=_r(me,I,Me,je,h,U,V,v,O,w,ne,he,de);if(!nt)return{notEnoughRoom:!0};const ut=xt(nt.first.point,P,de).point,it=xt(nt.last.point,P,de).point;if(m&&!h){const Et=Mn(v.writingMode,ut,it,fe);if(Et)return Et}be=[nt.first];for(let Et=v.glyphStartIndex+1;Et<Ue-1;Et++)be.push(W(me*I.getoffsetX(Et),Me,je,h,U,V,v.segment,Ze,Ke,O,w,ne,he,de));be.push(nt.last)}else{if(m&&!h){const Ze=xt(V,_,de).point,Ke=v.lineStartIndex+v.segment+1,nt=new l.Point(O.getx(Ke),O.gety(Ke)),ut=xt(nt,_,de),it=ut.signedDistanceFromCamera>0?ut.point:La(V,nt,Ze,1,_,de),Et=Mn(v.writingMode,Ze,it,fe);if(Et)return Et}const Ue=W(me*I.getoffsetX(v.glyphStartIndex),Me,je,h,U,V,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,O,w,ne,he,de);if(!Ue)return{notEnoughRoom:!0};be=[Ue]}for(const Ue of be)l.addDynamicAttributes(D,Ue.point,Ue.angle);return{}}function La(v,o,h,m,_,w){const P=xt(v.add(v.sub(o)._unit()),_,w).point,I=h.sub(P);return h.add(I._mult(m/I.mag()))}function ni(v,o){const{projectionCache:h,lineVertexArray:m,labelPlaneMatrix:_,tileAnchorPoint:w,distanceFromAnchor:P,getElevation:I,previousVertex:O,direction:D,absOffsetX:U}=o;if(h.projections[v])return h.projections[v];const V=new l.Point(m.getx(v),m.gety(v)),ne=xt(V,_,I);if(ne.signedDistanceFromCamera>0)return h.projections[v]=ne.point,ne.point;const fe=v-D;return La(P===0?w:new l.Point(m.getx(fe),m.gety(fe)),V,O,U-P+1,_,I)}function wr(v,o,h){return v._unit()._perp()._mult(o*h)}function ye(v,o,h,m,_,w,P,I){const{projectionCache:O,direction:D}=I;if(O.offsets[v])return O.offsets[v];const U=h.add(o);if(v+D<m||v+D>=_)return O.offsets[v]=U,U;const V=ni(v+D,I),ne=wr(V.sub(h),P,D),fe=h.add(ne),he=V.add(ne);return O.offsets[v]=l.findLineIntersection(w,U,fe,he)||U,O.offsets[v]}function W(v,o,h,m,_,w,P,I,O,D,U,V,ne,fe){const he=m?v-o:v+o;let de=he>0?1:-1,me=0;m&&(de*=-1,me=Math.PI),de<0&&(me+=Math.PI);let Me,je,be=de>0?I+P:I+P+1,Ue=_,Ze=_,Ke=0,nt=0;const ut=Math.abs(he),it=[];let Et;for(;Ke+nt<=ut;){if(be+=de,be<I||be>=O)return null;Ke+=nt,Ze=Ue,je=Me;const _t={projectionCache:V,lineVertexArray:D,labelPlaneMatrix:U,tileAnchorPoint:w,distanceFromAnchor:Ke,getElevation:fe,previousVertex:Ze,direction:de,absOffsetX:ut};if(Ue=ni(be,_t),h===0)it.push(Ze),Et=Ue.sub(Ze);else{let Xt;const Ot=Ue.sub(Ze);Xt=Ot.mag()===0?wr(ni(be+de,_t).sub(Ue),h,de):wr(Ot,h,de),je||(je=Ze.add(Xt)),Me=ye(be,Xt,Ue,I,O,je,h,_t),it.push(je),Et=Me.sub(je)}nt=Et.mag()}const Nt=Et._mult((ut-Ke)/nt)._add(je||Ze),xn=me+Math.atan2(Ue.y-Ze.y,Ue.x-Ze.x);return it.push(Nt),{point:Nt,angle:ne?xn:0,path:it}}const Q=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(v,o){for(let h=0;h<v;h++){const m=o.length;o.resize(m+4),o.float32.set(Q,3*m)}}function Se(v,o,h){const m=o[0],_=o[1];return v[0]=h[0]*m+h[4]*_+h[12],v[1]=h[1]*m+h[5]*_+h[13],v[3]=h[3]*m+h[7]*_+h[15],v}const Ce=100;class De{constructor(o,h=new bt(o.width+200,o.height+200,25),m=new bt(o.width+200,o.height+200,25)){this.transform=o,this.grid=h,this.ignoredGrid=m,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ce,this.screenBottomBoundary=o.height+Ce,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,h,m,_,w,P){const I=this.projectAndGetPerspectiveRatio(_,o.anchorPointX,o.anchorPointY,P),O=m*I.perspectiveRatio,D=o.x1*O+I.point.x,U=o.y1*O+I.point.y,V=o.x2*O+I.point.x,ne=o.y2*O+I.point.y;return!this.isInsideGrid(D,U,V,ne)||h!=="always"&&this.grid.hitTest(D,U,V,ne,h,w)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,U,V,ne],offscreen:this.isOffscreen(D,U,V,ne)}}placeCollisionCircles(o,h,m,_,w,P,I,O,D,U,V,ne,fe,he){const de=[],me=new l.Point(h.anchorX,h.anchorY),Me=xt(me,P,he),je=$n(this.transform.cameraToCenterDistance,Me.signedDistanceFromCamera),be=(U?w/je:w*je)/l.ONE_EM,Ue=xt(me,I,he).point,Ze=_r(be,_,h.lineOffsetX*be,h.lineOffsetY*be,!1,Ue,me,h,m,I,{projections:{},offsets:{}},!1,he);let Ke=!1,nt=!1,ut=!0;if(Ze){const it=.5*ne*je+fe,Et=new l.Point(-100,-100),Nt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),xn=new Pe,_t=Ze.first,Xt=Ze.last;let Ot=[];for(let dn=_t.path.length-1;dn>=1;dn--)Ot.push(_t.path[dn]);for(let dn=1;dn<Xt.path.length;dn++)Ot.push(Xt.path[dn]);const Un=2.5*it;if(O){const dn=Ot.map(nn=>xt(nn,O,he));Ot=dn.some(nn=>nn.signedDistanceFromCamera<=0)?[]:dn.map(nn=>nn.point)}let Rn=[];if(Ot.length>0){const dn=Ot[0].clone(),nn=Ot[0].clone();for(let ir=1;ir<Ot.length;ir++)dn.x=Math.min(dn.x,Ot[ir].x),dn.y=Math.min(dn.y,Ot[ir].y),nn.x=Math.max(nn.x,Ot[ir].x),nn.y=Math.max(nn.y,Ot[ir].y);Rn=dn.x>=Et.x&&nn.x<=Nt.x&&dn.y>=Et.y&&nn.y<=Nt.y?[Ot]:nn.x<Et.x||dn.x>Nt.x||nn.y<Et.y||dn.y>Nt.y?[]:l.clipLine([Ot],Et.x,Et.y,Nt.x,Nt.y)}for(const dn of Rn){xn.reset(dn,.25*it);let nn=0;nn=xn.length<=.5*it?1:Math.ceil(xn.paddedLength/Un)+1;for(let ir=0;ir<nn;ir++){const fr=ir/Math.max(nn-1,1),Gr=xn.lerp(fr),ai=Gr.x+Ce,oo=Gr.y+Ce;de.push(ai,oo,it,0);const Ji=ai-it,yi=oo-it,Li=ai+it,va=oo+it;if(ut=ut&&this.isOffscreen(Ji,yi,Li,va),nt=nt||this.isInsideGrid(Ji,yi,Li,va),o!=="always"&&this.grid.hitTestCircle(ai,oo,it,o,V)&&(Ke=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ke}}}}return{circles:!D&&Ke||!nt||je<this.perspectiveRatioCutoff?[]:de,offscreen:ut,collisionDetected:Ke}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let m=1/0,_=1/0,w=-1/0,P=-1/0;for(const U of o){const V=new l.Point(U.x+Ce,U.y+Ce);m=Math.min(m,V.x),_=Math.min(_,V.y),w=Math.max(w,V.x),P=Math.max(P,V.y),h.push(V)}const I=this.grid.query(m,_,w,P).concat(this.ignoredGrid.query(m,_,w,P)),O={},D={};for(const U of I){const V=U.key;if(O[V.bucketInstanceId]===void 0&&(O[V.bucketInstanceId]={}),O[V.bucketInstanceId][V.featureIndex])continue;const ne=[new l.Point(U.x1,U.y1),new l.Point(U.x2,U.y1),new l.Point(U.x2,U.y2),new l.Point(U.x1,U.y2)];l.polygonIntersectsPolygon(h,ne)&&(O[V.bucketInstanceId][V.featureIndex]=!0,D[V.bucketInstanceId]===void 0&&(D[V.bucketInstanceId]=[]),D[V.bucketInstanceId].push(V.featureIndex))}return D}insertCollisionBox(o,h,m,_,w,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:w,collisionGroupID:P,overlapMode:h},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,h,m,_,w,P){const I=m?this.ignoredGrid:this.grid,O={bucketInstanceId:_,featureIndex:w,collisionGroupID:P,overlapMode:h};for(let D=0;D<o.length;D+=4)I.insertCircle(O,o[D],o[D+1],o[D+2])}projectAndGetPerspectiveRatio(o,h,m,_){let w;return _?(w=[h,m,_(h,m),1],l.transformMat4(w,w,o)):(w=[h,m,0,1],Se(w,w,o)),{point:new l.Point((w[0]/w[3]+1)/2*this.transform.width+Ce,(-w[1]/w[3]+1)/2*this.transform.height+Ce),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}}isOffscreen(o,h,m,_){return m<Ce||o>=this.screenRightBoundary||_<Ce||h>this.screenBottomBoundary}isInsideGrid(o,h,m,_){return m>=0&&o<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o}}function Te(v,o,h){return o*(l.EXTENT/(v.tileSize*Math.pow(2,h-v.tileID.overscaledZ)))}class Ae{constructor(o,h,m,_){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?h:-h))):_&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Ne{constructor(o,h,m,_,w){this.text=new Ae(o?o.text:null,h,m,w),this.icon=new Ae(o?o.icon:null,h,_,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ot{constructor(o,h,m){this.text=o,this.icon=h,this.skipFade=m}}class at{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class st{constructor(o,h,m,_,w){this.bucketInstanceId=o,this.featureIndex=h,this.sourceLayerIndex=m,this.bucketIndex=_,this.tileID=w}}class Jt{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const h=++this.maxGroupID;this.collisionGroups[o]={ID:h,predicate:m=>m.collisionGroupID===h}}return this.collisionGroups[o]}}function fn(v,o,h,m,_){const{horizontalAlign:w,verticalAlign:P}=l.getAnchorAlignment(v),I=-(w-.5)*o,O=-(P-.5)*h,D=l.evaluateVariableOffset(v,m);return new l.Point(I+D[0]*_,O+D[1]*_)}function jt(v,o,h,m,_,w){const{x1:P,x2:I,y1:O,y2:D,anchorPointX:U,anchorPointY:V}=v,ne=new l.Point(o,h);return m&&ne._rotate(_?w:-w),{x1:P+ne.x,y1:O+ne.y,x2:I+ne.x,y2:D+ne.y,anchorPointX:U,anchorPointY:V}}class Zt{constructor(o,h,m,_,w){this.transform=o.clone(),this.terrain=h,this.collisionIndex=new De(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Jt(_),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,h,m,_){const w=m.getBucket(h),P=m.latestFeatureIndex;if(!w||!P||h.id!==w.layerIds[0])return;const I=m.collisionBoxArray,O=w.layers[0].layout,D=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/l.EXTENT,V=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),ne=O.get("text-pitch-alignment")==="map",fe=O.get("text-rotation-alignment")==="map",he=Te(m,1,this.transform.zoom),de=vn(V,ne,fe,this.transform,he);let me=null;if(ne){const je=Wt(V,ne,fe,this.transform,he);me=l.multiply([],this.transform.labelPlaneMatrix,je)}this.retainedQueryData[w.bucketInstanceId]=new st(w.bucketInstanceId,P,w.sourceLayerIndex,w.index,m.tileID);const Me={bucket:w,layout:O,posMatrix:V,textLabelPlaneMatrix:de,labelToScreenMatrix:me,scale:D,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const je of w.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Ue,symbolInstanceEnd:Ze}=je;o.push({sortKey:be,symbolInstanceStart:Ue,symbolInstanceEnd:Ze,parameters:Me})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(o,h,m,_,w,P,I,O,D,U,V,ne,fe,he,de,me){const Me=[ne.textOffset0,ne.textOffset1],je=fn(o,m,_,Me,w),be=this.collisionIndex.placeCollisionBox(jt(h,je.x,je.y,P,I,this.transform.angle),V,O,D,U.predicate,me);if((!de||this.collisionIndex.placeCollisionBox(jt(de,je.x,je.y,P,I,this.transform.angle),V,O,D,U.predicate,me).box.length!==0)&&be.box.length>0){let Ue;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(Ue=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:Me,width:m,height:_,anchor:o,textBoxScale:w,prevAnchor:Ue},this.markUsedJustification(fe,o,ne,he),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,he,ne),this.placedOrientations[ne.crossTileID]=he),{shift:je,placedGlyphBoxes:be}}}placeLayerBucketPart(o,h,m){const{bucket:_,layout:w,posMatrix:P,textLabelPlaneMatrix:I,labelToScreenMatrix:O,textPixelRatio:D,holdingForFade:U,collisionBoxArray:V,partiallyEvaluatedTextSize:ne,collisionGroup:fe}=o.parameters,he=w.get("text-optional"),de=w.get("icon-optional"),me=l.getOverlapMode(w,"text-overlap","text-allow-overlap"),Me=me==="always",je=l.getOverlapMode(w,"icon-overlap","icon-allow-overlap"),be=je==="always",Ue=w.get("text-rotation-alignment")==="map",Ze=w.get("text-pitch-alignment")==="map",Ke=w.get("icon-text-fit")!=="none",nt=w.get("symbol-z-order")==="viewport-y",ut=Me&&(be||!_.hasIconData()||de),it=be&&(Me||!_.hasTextData()||he);!_.collisionArrays&&V&&_.deserializeCollisionBoxes(V);const Et=this.retainedQueryData[_.bucketInstanceId].tileID,Nt=this.terrain?(_t,Xt)=>this.terrain.getElevation(Et,_t,Xt):null,xn=(_t,Xt)=>{if(h[_t.crossTileID])return;if(U)return void(this.placements[_t.crossTileID]=new ot(!1,!1,!1));let Ot=!1,Un=!1,Rn=!0,dn=null,nn={box:null,offscreen:null},ir={box:null,offscreen:null},fr=null,Gr=null,ai=null,oo=0,Ji=0,yi=0;Xt.textFeatureIndex?oo=Xt.textFeatureIndex:_t.useRuntimeCollisionCircles&&(oo=_t.featureIndex),Xt.verticalTextFeatureIndex&&(Ji=Xt.verticalTextFeatureIndex);const Li=Xt.textBox;if(Li){const Oi=cn=>{let Hr=l.WritingMode.horizontal;if(_.allowVerticalPlacement&&!cn&&this.prevPlacement){const li=this.prevPlacement.placedOrientations[_t.crossTileID];li&&(this.placedOrientations[_t.crossTileID]=li,Hr=li,this.markUsedOrientation(_,Hr,_t))}return Hr},si=(cn,Hr)=>{if(_.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&Xt.verticalTextBox){for(const li of _.writingModes)if(li===l.WritingMode.vertical?(nn=Hr(),ir=nn):nn=cn(),nn&&nn.box&&nn.box.length)break}else nn=cn()};if(w.get("text-variable-anchor")){let cn=w.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[_t.crossTileID]){const kn=this.prevPlacement.variableOffsets[_t.crossTileID];cn.indexOf(kn.anchor)>0&&(cn=cn.filter(Wr=>Wr!==kn.anchor),cn.unshift(kn.anchor))}const Hr=(kn,Wr,Fi)=>{const xa=kn.x2-kn.x1,ba=kn.y2-kn.y1,Qi=_t.textBoxScale,Nc=Ke&&je==="never"?Wr:null;let xr={box:[],offscreen:!1};const cf=me!=="never"?2*cn.length:cn.length;for(let Mu=0;Mu<cf;++Mu){const ea=this.attemptAnchorPlacement(cn[Mu%cn.length],kn,xa,ba,Qi,Ue,Ze,D,P,fe,Mu>=cn.length?me:"never",_t,_,Fi,Nc,Nt);if(ea&&(xr=ea.placedGlyphBoxes,xr&&xr.box&&xr.box.length)){Ot=!0,dn=ea.shift;break}}return xr};si(()=>Hr(Li,Xt.iconBox,l.WritingMode.horizontal),()=>{const kn=Xt.verticalTextBox;return _.allowVerticalPlacement&&!(nn&&nn.box&&nn.box.length)&&_t.numVerticalGlyphVertices>0&&kn?Hr(kn,Xt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),nn&&(Ot=nn.box,Rn=nn.offscreen);const li=Oi(nn&&nn.box);if(!Ot&&this.prevPlacement){const kn=this.prevPlacement.variableOffsets[_t.crossTileID];kn&&(this.variableOffsets[_t.crossTileID]=kn,this.markUsedJustification(_,kn.anchor,_t,li))}}else{const cn=(Hr,li)=>{const kn=this.collisionIndex.placeCollisionBox(Hr,me,D,P,fe.predicate,Nt);return kn&&kn.box&&kn.box.length&&(this.markUsedOrientation(_,li,_t),this.placedOrientations[_t.crossTileID]=li),kn};si(()=>cn(Li,l.WritingMode.horizontal),()=>{const Hr=Xt.verticalTextBox;return _.allowVerticalPlacement&&_t.numVerticalGlyphVertices>0&&Hr?cn(Hr,l.WritingMode.vertical):{box:null,offscreen:null}}),Oi(nn&&nn.box&&nn.box.length)}}if(fr=nn,Ot=fr&&fr.box&&fr.box.length>0,Rn=fr&&fr.offscreen,_t.useRuntimeCollisionCircles){const Oi=_.text.placedSymbolArray.get(_t.centerJustifiedTextSymbolIndex),si=l.evaluateSizeForFeature(_.textSizeData,ne,Oi),cn=w.get("text-padding");Gr=this.collisionIndex.placeCollisionCircles(me,Oi,_.lineVertexArray,_.glyphOffsetArray,si,P,I,O,m,Ze,fe.predicate,_t.collisionCircleDiameter,cn,Nt),Gr.circles.length&&Gr.collisionDetected&&!m&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Ot=Me||Gr.circles.length>0&&!Gr.collisionDetected,Rn=Rn&&Gr.offscreen}if(Xt.iconFeatureIndex&&(yi=Xt.iconFeatureIndex),Xt.iconBox){const Oi=si=>{const cn=Ke&&dn?jt(si,dn.x,dn.y,Ue,Ze,this.transform.angle):si;return this.collisionIndex.placeCollisionBox(cn,je,D,P,fe.predicate,Nt)};ir&&ir.box&&ir.box.length&&Xt.verticalIconBox?(ai=Oi(Xt.verticalIconBox),Un=ai.box.length>0):(ai=Oi(Xt.iconBox),Un=ai.box.length>0),Rn=Rn&&ai.offscreen}const va=he||_t.numHorizontalGlyphVertices===0&&_t.numVerticalGlyphVertices===0,ds=de||_t.numIconVertices===0;if(va||ds?ds?va||(Un=Un&&Ot):Ot=Un&&Ot:Un=Ot=Un&&Ot,Ot&&fr&&fr.box&&this.collisionIndex.insertCollisionBox(fr.box,me,w.get("text-ignore-placement"),_.bucketInstanceId,ir&&ir.box&&Ji?Ji:oo,fe.ID),Un&&ai&&this.collisionIndex.insertCollisionBox(ai.box,je,w.get("icon-ignore-placement"),_.bucketInstanceId,yi,fe.ID),Gr&&(Ot&&this.collisionIndex.insertCollisionCircles(Gr.circles,me,w.get("text-ignore-placement"),_.bucketInstanceId,oo,fe.ID),m)){const Oi=_.bucketInstanceId;let si=this.collisionCircleArrays[Oi];si===void 0&&(si=this.collisionCircleArrays[Oi]=new at);for(let cn=0;cn<Gr.circles.length;cn+=4)si.circles.push(Gr.circles[cn+0]),si.circles.push(Gr.circles[cn+1]),si.circles.push(Gr.circles[cn+2]),si.circles.push(Gr.collisionDetected?1:0)}if(_t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_t.crossTileID]=new ot(Ot||ut,Un||it,Rn||_.justReloaded),h[_t.crossTileID]=!0};if(nt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _t=_.getSortedSymbolIndexes(this.transform.angle);for(let Xt=_t.length-1;Xt>=0;--Xt){const Ot=_t[Xt];xn(_.symbolInstances.get(Ot),_.collisionArrays[Ot])}}else for(let _t=o.symbolInstanceStart;_t<o.symbolInstanceEnd;_t++)xn(_.symbolInstances.get(_t),_.collisionArrays[_t]);if(m&&_.bucketInstanceId in this.collisionCircleArrays){const _t=this.collisionCircleArrays[_.bucketInstanceId];l.invert(_t.invProjMatrix,P),_t.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}markUsedJustification(o,h,m,_){let w;w=_===l.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(h)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const I of P)I>=0&&(o.text.placedSymbolArray.get(I).crossTileID=w>=0&&I!==w?0:m.crossTileID)}markUsedOrientation(o,h,m){const _=h===l.WritingMode.horizontal||h===l.WritingMode.horizontalOnly?h:0,w=h===l.WritingMode.vertical?h:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const I of P)o.text.placedSymbolArray.get(I).placedOrientation=_;m.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let m=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const _=h?h.symbolFadeChange(o):1,w=h?h.opacities:{},P=h?h.variableOffsets:{},I=h?h.placedOrientations:{};for(const O in this.placements){const D=this.placements[O],U=w[O];U?(this.opacities[O]=new Ne(U,_,D.text,D.icon),m=m||D.text!==U.text.placed||D.icon!==U.icon.placed):(this.opacities[O]=new Ne(null,_,D.text,D.icon,D.skipFade),m=m||D.text||D.icon)}for(const O in w){const D=w[O];if(!this.opacities[O]){const U=new Ne(D,_,!1,!1);U.isHidden()||(this.opacities[O]=U,m=m||D.text.placed||D.icon.placed)}}for(const O in P)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=P[O]);for(const O in I)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=I[O]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:o)}updateLayerOpacities(o,h){const m={};for(const _ of h){const w=_.getBucket(o);w&&_.latestFeatureIndex&&o.id===w.layerIds[0]&&this.updateBucketOpacities(w,m,_.collisionBoxArray)}}updateBucketOpacities(o,h,m){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const _=o.layers[0].layout,w=new Ne(null,0,!1,!1,!0),P=_.get("text-allow-overlap"),I=_.get("icon-allow-overlap"),O=_.get("text-variable-anchor"),D=_.get("text-rotation-alignment")==="map",U=_.get("text-pitch-alignment")==="map",V=_.get("icon-text-fit")!=="none",ne=new Ne(null,0,P&&(I||!o.hasIconData()||_.get("icon-optional")),I&&(P||!o.hasTextData()||_.get("text-optional")),!0);!o.collisionArrays&&m&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(m);const fe=(he,de,me)=>{for(let Me=0;Me<de/4;Me++)he.opacityVertexArray.emplaceBack(me);he.hasVisibleVertices=he.hasVisibleVertices||me!==Pr};for(let he=0;he<o.symbolInstances.length;he++){const de=o.symbolInstances.get(he),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:Me,crossTileID:je}=de;let be=this.opacities[je];h[je]?be=w:be||(be=ne,this.opacities[je]=be),h[je]=!0;const Ue=de.numIconVertices>0,Ze=this.placedOrientations[de.crossTileID],Ke=Ze===l.WritingMode.vertical,nt=Ze===l.WritingMode.horizontal||Ze===l.WritingMode.horizontalOnly;if(me>0||Me>0){const ut=pr(be.text);fe(o.text,me,Ke?Pr:ut),fe(o.text,Me,nt?Pr:ut);const it=be.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach(xn=>{xn>=0&&(o.text.placedSymbolArray.get(xn).hidden=it||Ke?1:0)}),de.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=it||nt?1:0);const Et=this.variableOffsets[de.crossTileID];Et&&this.markUsedJustification(o,Et.anchor,de,Ze);const Nt=this.placedOrientations[de.crossTileID];Nt&&(this.markUsedJustification(o,"left",de,Nt),this.markUsedOrientation(o,Nt,de))}if(Ue){const ut=pr(be.icon),it=!(V&&de.verticalPlacedIconSymbolIndex&&Ke);de.placedIconSymbolIndex>=0&&(fe(o.icon,de.numIconVertices,it?ut:Pr),o.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=be.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(fe(o.icon,de.numVerticalIconVertices,it?Pr:ut),o.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const ut=o.collisionArrays[he];if(ut){let it=new l.Point(0,0);if(ut.textBox||ut.verticalTextBox){let Nt=!0;if(O){const xn=this.variableOffsets[je];xn?(it=fn(xn.anchor,xn.width,xn.height,xn.textOffset,xn.textBoxScale),D&&it._rotate(U?this.transform.angle:-this.transform.angle)):Nt=!1}ut.textBox&&rn(o.textCollisionBox.collisionVertexArray,be.text.placed,!Nt||Ke,it.x,it.y),ut.verticalTextBox&&rn(o.textCollisionBox.collisionVertexArray,be.text.placed,!Nt||nt,it.x,it.y)}const Et=!!(!nt&&ut.verticalIconBox);ut.iconBox&&rn(o.iconCollisionBox.collisionVertexArray,be.icon.placed,Et,V?it.x:0,V?it.y:0),ut.verticalIconBox&&rn(o.iconCollisionBox.collisionVertexArray,be.icon.placed,!Et,V?it.x:0,V?it.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const he=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=he.invProjMatrix,o.placementViewportMatrix=he.viewportMatrix,o.collisionCircleArray=he.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,h){const m=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*m>o}setStale(){this.stale=!0}}function rn(v,o,h,m,_){v.emplaceBack(o?1:0,h?1:0,m||0,_||0),v.emplaceBack(o?1:0,h?1:0,m||0,_||0),v.emplaceBack(o?1:0,h?1:0,m||0,_||0),v.emplaceBack(o?1:0,h?1:0,m||0,_||0)}const Hn=Math.pow(2,25),Wn=Math.pow(2,24),Fn=Math.pow(2,17),Nn=Math.pow(2,16),wn=Math.pow(2,9),cr=Math.pow(2,8),Lr=Math.pow(2,1);function pr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const o=v.placed?1:0,h=Math.floor(127*v.opacity);return h*Hn+o*Wn+h*Fn+o*Nn+h*wn+o*cr+h*Lr+o}const Pr=0;class Fo{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,h,m,_,w){const P=this._bucketParts;for(;this._currentTileIndex<o.length;)if(h.getBucketParts(P,_,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((I,O)=>I.sortKey-O.sortKey));this._currentPartIndex<P.length;)if(h.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,w())return!0;return!1}}class sd{constructor(o,h,m,_,w,P,I,O){this.placement=new Zt(o,h,P,I,O),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(o,h,m){const _=l.browser.now(),w=()=>!this._forceFullPlacement&&l.browser.now()-_>2;for(;this._currentPlacementIndex>=0;){const P=h[o[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=I)&&(!P.maxzoom||P.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Fo(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const rs=512/l.EXTENT/2;class jr{constructor(o,h,m){this.tileID=o,this.bucketInstanceId=m,this._symbolsByKey={};const _=new Map;for(let w=0;w<h.length;w++){const P=h.get(w),I=P.key,O=_.get(I);O?O.push(P):_.set(I,[P])}for(const[w,P]of _){const I={positions:P.map(O=>({x:Math.floor(O.anchorX*rs),y:Math.floor(O.anchorY*rs)})),crossTileIDs:P.map(O=>O.crossTileID)};if(I.positions.length>128){const O=new l.KDBush(I.positions.length,16,Uint16Array);for(const{x:D,y:U}of I.positions)O.add(D,U);O.finish(),delete I.positions,I.index=O}this._symbolsByKey[w]=I}}getScaledCoordinates(o,h){const{x:m,y:_,z:w}=this.tileID.canonical,{x:P,y:I,z:O}=h.canonical,D=rs/Math.pow(2,O-w),U=(I*l.EXTENT+o.anchorY)*D,V=_*l.EXTENT*rs;return{x:Math.floor((P*l.EXTENT+o.anchorX)*D-m*l.EXTENT*rs),y:Math.floor(U-V)}}findMatches(o,h,m){const _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let w=0;w<o.length;w++){const P=o.get(w);if(P.crossTileID)continue;const I=this._symbolsByKey[P.key];if(!I)continue;const O=this.getScaledCoordinates(P,h);if(I.index){const D=I.index.range(O.x-_,O.y-_,O.x+_,O.y+_).sort();for(const U of D){const V=I.crossTileIDs[U];if(!m[V]){m[V]=!0,P.crossTileID=V;break}}}else if(I.positions)for(let D=0;D<I.positions.length;D++){const U=I.positions[D],V=I.crossTileIDs[D];if(Math.abs(U.x-O.x)<=_&&Math.abs(U.y-O.y)<=_&&!m[V]){m[V]=!0,P.crossTileID=V;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class Sl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class is{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const h=Math.round((o-this.lng)/360);if(h!==0)for(const m in this.indexes){const _=this.indexes[m],w={};for(const P in _){const I=_[P];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+h),w[I.tileID.key]=I}this.indexes[m]=w}this.lng=o}addBucket(o,h,m){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const _=this.usedCrossTileIDs[o.overscaledZ];for(const w in this.indexes){const P=this.indexes[w];if(Number(w)>o.overscaledZ)for(const I in P){const O=P[I];O.tileID.isChildOf(o)&&O.findMatches(h.symbolInstances,o,_)}else{const I=P[o.scaledTo(Number(w)).key];I&&I.findMatches(h.symbolInstances,o,_)}}for(let w=0;w<h.symbolInstances.length;w++){const P=h.symbolInstances.get(w);P.crossTileID||(P.crossTileID=m.generate(),_[P.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new jr(o,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(o,h){for(const m of h.getCrossTileIDsLists())for(const _ of m)delete this.usedCrossTileIDs[o][_]}removeStaleBuckets(o){let h=!1;for(const m in this.indexes){const _=this.indexes[m];for(const w in _)o[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,_[w]),delete _[w],h=!0)}return h}}class ri{constructor(){this.layerIndexes={},this.crossTileIDs=new Sl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,h,m){let _=this.layerIndexes[o.id];_===void 0&&(_=this.layerIndexes[o.id]=new is);let w=!1;const P={};_.handleWrapJump(m);for(const I of h){const O=I.getBucket(o);O&&o.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,O,this.crossTileIDs)&&(w=!0),P[O.bucketInstanceId]=!0)}return _.removeStaleBuckets(P)&&(w=!0),w}pruneUnusedLayers(o){const h={};o.forEach(m=>{h[m]=!0});for(const m in this.layerIndexes)h[m]||delete this.layerIndexes[m]}}const zs=(v,o)=>l.emitValidationErrors(v,o&&o.filter(h=>h.identifier!=="source.canvas")),Yo=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ld=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),Oa=l.emptyStyle();class Bs extends l.Evented{constructor(o,h={}){super(),this.map=o,this.dispatcher=new oe(Re(),this,o._getMapId()),this.imageManager=new Ge,this.imageManager.setEventedParent(this),this.glyphManager=new zt(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new X(256,512),this.crossTileSymbolIndex=new ri,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const m=this;this._rtlTextPluginCallback=Bs.registerForPluginStateChange(_=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(w,P)=>{if(l.triggerPluginCompletionEvent(w),P&&P.every(I=>I))for(const I in m.sourceCaches){const O=m.sourceCaches[I].getSource().type;O!=="vector"&&O!=="geojson"||m.sourceCaches[I].reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.sourceCaches[_.sourceId];if(!w)return;const P=w.getSource();if(P&&P.vectorLayerIds)for(const I in this._layers){const O=this._layers[I];O.source===P.id&&this._validateLayer(O)}})}loadURL(o,h={},m){this.fire(new l.Event("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const _=this.map._requestManager.transformRequest(o,R.Style);this._request=l.getJSON(_,(w,P)=>{this._request=null,w?this.fire(new l.ErrorEvent(w)):P&&this._load(P,h,m)})}loadJSON(o,h={},m){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(()=>{this._request=null,h.validate=h.validate!==!1,this._load(o,h,m)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Oa,{validate:!1})}_load(o,h,m){const _=h.transformStyle?h.transformStyle(m,o):o;if(!h.validate||!zs(this,l.validateStyle(_))){this._loaded=!0,this.stylesheet=_;for(const w in _.sources)this.addSource(w,_.sources[w],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new we(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const o=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",o),this._order=o.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of o){const m=l.createStyleLayer(h);m.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=m}}_loadSprite(o,h=!1,m=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(_,w,P,I){const O=xe(_),D=O.length,U=P>1?"@2x":"",V={},ne={},fe={};for(const{id:he,url:de}of O){const me=w.transformRequest(w.normalizeSpriteURL(de,U,".json"),R.SpriteJSON),Me=`${he}_${me.url}`;V[Me]=l.getJSON(me,(Ue,Ze)=>{delete V[Me],ne[he]=Ze,Le(I,ne,fe,Ue,D)});const je=w.transformRequest(w.normalizeSpriteURL(de,U,".png"),R.SpriteImage),be=`${he}_${je.url}`;V[be]=Z.getImage(je,(Ue,Ze)=>{delete V[be],fe[he]=Ze,Le(I,ne,fe,Ue,D)})}return{cancel(){for(const he of Object.values(V))he.cancel()}}}(o,this.map._requestManager,this.map.getPixelRatio(),(_,w)=>{if(this._spriteRequest=null,_)this.fire(new l.ErrorEvent(_));else if(w)for(const P in w){this._spritesImagesIds[P]=[];const I=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(O=>!(O in w)):[];for(const O of I)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in w[P]){const D=P==="default"?O:`${P}:${O}`;this._spritesImagesIds[P].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,w[P][O],!1):this.imageManager.addImage(D,w[P][O]),h&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),m&&m(_)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(o){const h=this.sourceCaches[o.source];if(!h)return;const m=o.sourceLayer;if(!m)return;const _=h.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(m)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${_.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){const h=this._serializedAllLayers();if(!o||o.length===0)return Object.values(h);const m=[];for(const _ of o)h[_]&&m.push(h[_]);return m}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const h=Object.keys(this._layers);for(const m of h){const _=this._layers[m];_.type!=="custom"&&(o[m]=_.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const h=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const P in this._updatedSources){const I=this._updatedSources[P];if(I==="reload")this._reloadSource(P);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const m={};for(const _ in this.sourceCaches){const w=this.sourceCaches[_];m[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];w.recalculate(o,this._availableImages),!w.isHidden(o.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const _ in m){const w=this.sourceCaches[_];m[_]!==w.used&&w.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(o),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,h={}){this._checkLoaded();const m=this.serialize();if(o=h.transformStyle?h.transformStyle(m,o):o,zs(this,l.validateStyle(o)))return!1;(o=l.clone$1(o)).layers=l.derefLayers(o.layers);const _=l.diffStyles(m,o).filter(P=>!(P.command in ld));if(_.length===0)return!1;const w=_.filter(P=>!(P.command in Yo));if(w.length>0)throw new Error(`Unimplemented: ${w.map(P=>P.command).join(", ")}.`);for(const P of _)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=o,!0}addImage(o,h){if(this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,h),this._afterImageUpdated(o)}updateImage(o,h){this.imageManager.updateImage(o,h)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,h,m={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(l.validateStyle.source,`sources.${o}`,h,null,m))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const _=this.sourceCaches[o]=new Yn(o,h,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:o})),_.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===o)return this.fire(new l.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${m}" is using it.`)));const h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,h){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const m=this.sourceCaches[o].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(h),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,h,m={}){this._checkLoaded();const _=o.id;if(this.getLayer(_))return void this.fire(new l.ErrorEvent(new Error(`Layer "${_}" already exists on this map.`)));let w;if(o.type==="custom"){if(zs(this,l.validateCustomStyleLayer(o)))return;w=l.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(_,o.source),o=l.clone$1(o),o=l.extend(o,{source:_})),this._validate(l.validateStyle.layer,`layers.${_}`,o,{arrayIndex:-1},m))return;w=l.createStyleLayer(o),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}})}const P=h?this._order.indexOf(h):this._order.length;if(h&&P===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${_}" before non-existing layer "${h}".`)));else{if(this._order.splice(P,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&w.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(o,h){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===h)return;const m=this._order.indexOf(o);this._order.splice(m,1);const _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${h}".`))):(this._order.splice(_,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const h=this._layers[o];if(!h)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));h.setEventedParent(null);const m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,h,m){this._checkLoaded();const _=this.getLayer(o);_?_.minzoom===h&&_.maxzoom===m||(h!=null&&(_.minzoom=h),m!=null&&(_.maxzoom=m),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,h,m={}){this._checkLoaded();const _=this.getLayer(o);if(_){if(!l.deepEqual(_.filter,h))return h==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(l.validateStyle.filter,`layers.${_.id}.filter`,h,null,m)||(_.filter=l.clone$1(h),this._updateLayer(_)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return l.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,h,m,_={}){this._checkLoaded();const w=this.getLayer(o);w?l.deepEqual(w.getLayoutProperty(h),m)||(w.setLayoutProperty(h,m,_),this._updateLayer(w)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,h){const m=this.getLayer(o);if(m)return m.getLayoutProperty(h);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,h,m,_={}){this._checkLoaded();const w=this.getLayer(o);w?l.deepEqual(w.getPaintProperty(h),m)||(w.setPaintProperty(h,m,_)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,h){return this.getLayer(o).getPaintProperty(h)}setFeatureState(o,h){this._checkLoaded();const m=o.source,_=o.sourceLayer,w=this.sourceCaches[m];if(w===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const P=w.getSource().type;P==="geojson"&&_?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||_?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,o.id,h)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,h){this._checkLoaded();const m=o.source,_=this.sourceCaches[m];if(_===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const w=_.getSource().type,P=w==="vector"?o.sourceLayer:void 0;w!=="vector"||P?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(P,o.id,h):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const h=o.source,m=o.sourceLayer,_=this.sourceCaches[h];if(_!==void 0)return _.getSource().type!=="vector"||m?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(m,o.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=l.mapObject(this.sourceCaches,_=>_.serialize()),h=this._serializeByIds(this._order),m=this.stylesheet;return l.filterObject({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:o,layers:h},_=>_!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const h=P=>this._layers[P].type==="fill-extrusion",m={},_=[];for(let P=this._order.length-1;P>=0;P--){const I=this._order[P];if(h(I)){m[I]=P;for(const O of o){const D=O[I];if(D)for(const U of D)_.push(U)}}}_.sort((P,I)=>I.intersectionZ-P.intersectionZ);const w=[];for(let P=this._order.length-1;P>=0;P--){const I=this._order[P];if(h(I))for(let O=_.length-1;O>=0;O--){const D=_[O].feature;if(m[D.layer.id]<P)break;w.push(D),_.pop()}else for(const O of o){const D=O[I];if(D)for(const U of D)w.push(U.feature)}}return w}queryRenderedFeatures(o,h,m){h&&h.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const _={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of h.layers){const O=this._layers[I];if(!O)return this.fire(new l.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];_[O.source]=!0}}const w=[];h.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const I in this.sourceCaches)h.layers&&!_[I]||w.push(_n(this.sourceCaches[I],this._layers,P,o,h,m));return this.placement&&w.push(function(I,O,D,U,V,ne,fe){const he={},de=ne.queryRenderedSymbols(U),me=[];for(const Me of Object.keys(de).map(Number))me.push(fe[Me]);me.sort(_o);for(const Me of me){const je=Me.featureIndex.lookupSymbolFeatures(de[Me.bucketInstanceId],O,Me.bucketIndex,Me.sourceLayerIndex,V.filter,V.layers,V.availableImages,I);for(const be in je){const Ue=he[be]=he[be]||[],Ze=je[be];Ze.sort((Ke,nt)=>{const ut=Me.featureSortOrder;if(ut){const it=ut.indexOf(Ke.featureIndex);return ut.indexOf(nt.featureIndex)-it}return nt.featureIndex-Ke.featureIndex});for(const Ke of Ze)Ue.push(Ke)}}for(const Me in he)he[Me].forEach(je=>{const be=je.feature,Ue=D[I[Me].source].getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ue});return he}(this._layers,P,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(o,h){h&&h.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const m=this.sourceCaches[o];return m?function(_,w){const P=_.getRenderableIds().map(D=>_.getTileByID(D)),I=[],O={};for(let D=0;D<P.length;D++){const U=P[D],V=U.tileID.canonical.key;O[V]||(O[V]=!0,U.querySourceFeatures(I,w))}return I}(m,h):[]}addSourceType(o,h,m){return Gi(o)?m(new Error(`A source type called "${o}" already exists.`)):(((_,w)=>{yr[_]=w})(o,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:h.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(o,h={}){this._checkLoaded();const m=this.light.getLight();let _=!1;for(const P in o)if(!l.deepEqual(o[P],m[P])){_=!0;break}if(!_)return;const w={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(w)}_validate(o,h,m,_,w={}){return(!w||w.validate!==!1)&&zs(this,o.call(l.validateStyle,l.extend({key:h,style:this.serialize(),value:m,styleSpec:l.v8Spec},_)))}_remove(o=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const m=this.sourceCaches[h];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const h in this.sourceCaches)this.sourceCaches[h].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,h,m,_,w=!1){let P=!1,I=!1;const O={};for(const D of this._order){const U=this._layers[D];if(U.type!=="symbol")continue;if(!O[U.source]){const ne=this.sourceCaches[U.source];O[U.source]=ne.getRenderableIds(!0).map(fe=>ne.getTileByID(fe)).sort((fe,he)=>he.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(he.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(U,O[U.source],o.center.lng);P=P||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),o.zoom))&&(this.pauseablePlacement=new sd(o,this.map.terrain,this._order,w,h,m,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),I=!0),P&&this.pauseablePlacement.placement.setStale()),I||P)for(const D of this._order){const U=this._layers[D];U.type==="symbol"&&this.placement.updateLayerOpacities(U,O[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,h,m){this.imageManager.getImages(h.icons,m),this._updateTilesForChangedImages();const _=this.sourceCaches[h.source];_&&_.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(o,h,m){this.glyphManager.getGlyphs(h.stacks,m);const _=this.sourceCaches[h.source];_&&_.setDependencies(h.tileID.key,h.type,[""])}getResource(o,h,m){return l.makeRequest(h,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,h={}){this._checkLoaded(),o&&this._validate(l.validateStyle.glyphs,"glyphs",o,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,h,m={},_){this._checkLoaded();const w=[{id:o,url:h}],P=[...xe(this.stylesheet.sprite),...w];this._validate(l.validateStyle.sprite,"sprite",P,null,m)||(this.stylesheet.sprite=P,this._loadSprite(w,!0,_))}removeSprite(o){this._checkLoaded();const h=xe(this.stylesheet.sprite);if(h.find(m=>m.id===o)){if(this._spritesImagesIds[o])for(const m of this._spritesImagesIds[o])this.imageManager.removeImage(m),this._changedImages[m]=!0;h.splice(h.findIndex(m=>m.id===o),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return xe(this.stylesheet.sprite)}setSprite(o,h={},m){this._checkLoaded(),o&&this._validate(l.validateStyle.sprite,"sprite",o,null,h)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,m):(this._unloadSprite(),m&&m(null)))}}Bs.registerForPluginStateChange=l.registerForPluginStateChange;var cu=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),os="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const as={prelude:Ln(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ln(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ln(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ln(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ln("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ln(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ln("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ln("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ln(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ln(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ln(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ln(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ln(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ln(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ln(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ln(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ln(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ln(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ln(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ln("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",os),terrainDepth:Ln("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",os),terrainCoords:Ln("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",os)};function Ln(v,o){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=o.match(/attribute ([\w]+) ([\w]+)/g),_=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=w?w.concat(_):_,I={};return{fragmentSource:v=v.replace(h,(O,D,U,V,ne)=>(I[ne]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${U} ${V} ${ne};
#else
uniform ${U} ${V} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${U} ${V} ${ne} = u_${ne};
#endif
`)),vertexSource:o=o.replace(h,(O,D,U,V,ne)=>{const fe=V==="float"?"vec2":"vec4",he=ne.match(/color/)?"color":fe;return I[ne]?D==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${U} ${fe} a_${ne};
varying ${U} ${V} ${ne};
#else
uniform ${U} ${V} u_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${U} ${fe} a_${ne};
#else
uniform ${U} ${V} u_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${U} ${V} ${ne} = a_${ne};
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${U} ${V} ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${U} ${V} ${ne} = u_${ne};
#endif
`}),staticAttributes:m,staticUniforms:P}}class Cl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,h,m,_,w,P,I,O,D){this.context=o;let U=this.boundPaintVertexBuffers.length!==_.length;for(let V=0;!U&&V<_.length;V++)this.boundPaintVertexBuffers[V]!==_[V]&&(U=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==m||U||this.boundIndexBuffer!==w||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==D?this.freshBind(h,m,_,w,P,I,O,D):(o.bindVertexArray.set(this.vao),I&&I.bind(),w&&w.dynamicDraw&&w.bind(),O&&O.bind(),D&&D.bind())}freshBind(o,h,m,_,w,P,I,O){const D=o.numAttributes,U=this.context,V=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=O,h.enableAttributes(V,o);for(const ne of m)ne.enableAttributes(V,o);P&&P.enableAttributes(V,o),I&&I.enableAttributes(V,o),O&&O.enableAttributes(V,o),h.bind(),h.setVertexAttribPointers(V,o,w);for(const ne of m)ne.bind(),ne.setVertexAttribPointers(V,o,w);P&&(P.bind(),P.setVertexAttribPointers(V,o,w)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(V,o,w)),O&&(O.bind(),O.setVertexAttribPointers(V,o,w)),U.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function $s(v){const o=[];for(let h=0;h<v.length;h++){if(v[h]===null)continue;const m=v[h].split(" ");o.push(m.pop())}return o}class gm{constructor(o,h,m,_,w,P){const I=o.gl;this.program=I.createProgram();const O=$s(h.staticAttributes),D=m?m.getBinderAttributes():[],U=O.concat(D),V=as.prelude.staticUniforms?$s(as.prelude.staticUniforms):[],ne=h.staticUniforms?$s(h.staticUniforms):[],fe=m?m.getBinderUniforms():[],he=V.concat(ne).concat(fe),de=[];for(const Ke of he)de.indexOf(Ke)<0&&de.push(Ke);const me=m?m.defines():[];w&&me.push("#define OVERDRAW_INSPECTOR;"),P&&me.push("#define TERRAIN3D;");const Me=me.concat(as.prelude.fragmentSource,h.fragmentSource).join(`
`),je=me.concat(as.prelude.vertexSource,h.vertexSource).join(`
`),be=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(be,Me),I.compileShader(be),I.attachShader(this.program,be);const Ue=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(Ue,je),I.compileShader(Ue),I.attachShader(this.program,Ue),this.attributes={};const Ze={};this.numAttributes=U.length;for(let Ke=0;Ke<this.numAttributes;Ke++)U[Ke]&&(I.bindAttribLocation(this.program,Ke,U[Ke]),this.attributes[U[Ke]]=Ke);I.linkProgram(this.program),I.deleteShader(Ue),I.deleteShader(be);for(let Ke=0;Ke<de.length;Ke++){const nt=de[Ke];if(nt&&!Ze[nt]){const ut=I.getUniformLocation(this.program,nt);ut&&(Ze[nt]=ut)}}this.fixedUniforms=_(o,Ze),this.terrainUniforms=((Ke,nt)=>({u_depth:new l.Uniform1i(Ke,nt.u_depth),u_terrain:new l.Uniform1i(Ke,nt.u_terrain),u_terrain_dim:new l.Uniform1f(Ke,nt.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(Ke,nt.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(Ke,nt.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(Ke,nt.u_terrain_exaggeration)}))(o,Ze),this.binderUniforms=m?m.getUniforms(o,Ze):[]}draw(o,h,m,_,w,P,I,O,D,U,V,ne,fe,he,de,me,Me,je){const be=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(m),o.setStencilMode(_),o.setColorMode(w),o.setCullFace(P),O){o.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,O.depthTexture),o.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,O.texture);for(const Ze in this.terrainUniforms)this.terrainUniforms[Ze].set(O[Ze])}for(const Ze in this.fixedUniforms)this.fixedUniforms[Ze].set(I[Ze]);de&&de.setUniforms(o,this.binderUniforms,fe,{zoom:he});let Ue=0;switch(h){case be.LINES:Ue=2;break;case be.TRIANGLES:Ue=3;break;case be.LINE_STRIP:Ue=1}for(const Ze of ne.get()){const Ke=Ze.vaos||(Ze.vaos={});(Ke[D]||(Ke[D]=new Cl)).bind(o,this,U,de?de.getPaintVertexBuffers():[],V,Ze.vertexOffset,me,Me,je),be.drawElements(h,Ze.primitiveLength*Ue,be.UNSIGNED_SHORT,Ze.primitiveOffset*Ue*2)}}}function $h(v,o,h){const m=1/Te(h,1,o.transform.tileZoom),_=Math.pow(2,h.tileID.overscaledZ),w=h.tileSize*Math.pow(2,o.transform.tileZoom)/_,P=w*(h.tileID.canonical.x+h.tileID.wrap*_),I=w*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[m,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[P>>16,I>>16],u_pixel_coord_lower:[65535&P,65535&I]}}const hu=(v,o,h,m)=>{const _=o.style.light,w=_.properties.get("position"),P=[w.x,w.y,w.z],I=function(){var D=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();_.properties.get("anchor")==="viewport"&&function(D,U){var V=Math.sin(U),ne=Math.cos(U);D[0]=ne,D[1]=V,D[2]=0,D[3]=-V,D[4]=ne,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(I,-o.transform.angle),function(D,U,V){var ne=U[0],fe=U[1],he=U[2];D[0]=ne*V[0]+fe*V[3]+he*V[6],D[1]=ne*V[1]+fe*V[4]+he*V[7],D[2]=ne*V[2]+fe*V[5]+he*V[8]}(P,P,I);const O=_.properties.get("color");return{u_matrix:v,u_lightpos:P,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+h,u_opacity:m}},Nh=(v,o,h,m,_,w,P)=>l.extend(hu(v,o,h,m),$h(w,o,P),{u_height_factor:-Math.pow(2,_.overscaledZ)/P.tileSize/8}),Uh=v=>({u_matrix:v}),jh=(v,o,h,m)=>l.extend(Uh(v),$h(h,o,m)),lc=(v,o)=>({u_matrix:v,u_world:o}),Vh=(v,o,h,m,_)=>l.extend(jh(v,o,h,m),{u_world:_}),ss=(v,o,h,m)=>{const _=v.transform;let w,P;if(m.paint.get("circle-pitch-alignment")==="map"){const I=Te(h,1,_.zoom);w=!0,P=[I,I]}else w=!1,P=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(o.posMatrix,h,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:P}},qh=(v,o,h)=>{const m=Te(h,1,o.zoom),_=Math.pow(2,o.zoom-h.tileID.overscaledZ),w=h.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[o.pixelsToGLUnits[0]/(m*_),o.pixelsToGLUnits[1]/(m*_)],u_overscale_factor:w}},uc=(v,o,h=1)=>({u_matrix:v,u_color:o,u_overlay:0,u_overlay_scale:h}),Gh=v=>({u_matrix:v}),Hh=(v,o,h,m)=>({u_matrix:v,u_extrude_scale:Te(o,1,h),u_intensity:m});function ls(v,o){const h=Math.pow(2,o.canonical.z),m=o.canonical.y;return[new l.MercatorCoordinate(0,m/h).toLngLat().lat,new l.MercatorCoordinate(0,(m+1)/h).toLngLat().lat]}const Ns=(v,o,h,m)=>{const _=v.transform;return{u_matrix:kl(v,o,h,m),u_ratio:1/Te(o,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},xo=(v,o,h,m,_)=>l.extend(Ns(v,o,h,_),{u_image:0,u_image_height:m}),cc=(v,o,h,m,_)=>{const w=v.transform,P=El(o,w);return{u_matrix:kl(v,o,h,_),u_texsize:o.imageAtlasTexture.size,u_ratio:1/Te(o,1,w.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},hc=(v,o,h,m,_,w)=>{const P=v.lineAtlas,I=El(o,v.transform),O=h.layout.get("line-cap")==="round",D=P.getDash(m.from,O),U=P.getDash(m.to,O),V=D.width*_.fromScale,ne=U.width*_.toScale;return l.extend(Ns(v,o,h,w),{u_patternscale_a:[I/V,-D.height/2],u_patternscale_b:[I/ne,-U.height/2],u_sdfgamma:P.width/(256*Math.min(V,ne)*v.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:U.y,u_mix:_.t})};function El(v,o){return 1/Te(v,1,o.tileZoom)}function kl(v,o,h,m){return v.translatePosMatrix(m?m.posMatrix:o.tileID.posMatrix,o,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const fc=(v,o,h,m,_)=>{return{u_matrix:v,u_tl_parent:o,u_scale_parent:h,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(P=_.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(w=_.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:fu(_.paint.get("raster-hue-rotate"))};var w,P};function fu(v){v*=Math.PI/180;const o=Math.sin(v),h=Math.cos(v);return[(2*h+1)/3,(-Math.sqrt(3)*o-h+1)/3,(Math.sqrt(3)*o-h+1)/3]}const Al=(v,o,h,m,_,w,P,I,O,D)=>{const U=_.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:U.width/U.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:P,u_coord_matrix:I,u_is_text:+O,u_pitch_with_map:+m,u_texsize:D,u_texture:0}},du=(v,o,h,m,_,w,P,I,O,D,U)=>{const V=_.transform;return l.extend(Al(v,o,h,m,_,w,P,I,O,D),{u_gamma_scale:m?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:_.pixelRatio,u_is_halo:+U})},Hi=(v,o,h,m,_,w,P,I,O,D)=>l.extend(du(v,o,h,m,_,w,P,I,!0,O,!0),{u_texsize_icon:D,u_texture_icon:1}),bo=(v,o,h)=>({u_matrix:v,u_opacity:o,u_color:h}),Wh=(v,o,h,m,_,w)=>l.extend(function(P,I,O,D){const U=O.imageManager.getPattern(P.from.toString()),V=O.imageManager.getPattern(P.to.toString()),{width:ne,height:fe}=O.imageManager.getPixelSize(),he=Math.pow(2,D.tileID.overscaledZ),de=D.tileSize*Math.pow(2,O.transform.tileZoom)/he,me=de*(D.tileID.canonical.x+D.tileID.wrap*he),Me=de*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[ne,fe],u_mix:I.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Te(D,1,O.transform.tileZoom),u_pixel_coord_upper:[me>>16,Me>>16],u_pixel_coord_lower:[65535&me,65535&Me]}}(m,w,h,_),{u_matrix:v,u_opacity:o}),dc={fillExtrusion:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_lightpos:new l.Uniform3f(v,o.u_lightpos),u_lightintensity:new l.Uniform1f(v,o.u_lightintensity),u_lightcolor:new l.Uniform3f(v,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(v,o.u_vertical_gradient),u_opacity:new l.Uniform1f(v,o.u_opacity)}),fillExtrusionPattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_lightpos:new l.Uniform3f(v,o.u_lightpos),u_lightintensity:new l.Uniform1f(v,o.u_lightintensity),u_lightcolor:new l.Uniform3f(v,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(v,o.u_vertical_gradient),u_height_factor:new l.Uniform1f(v,o.u_height_factor),u_image:new l.Uniform1i(v,o.u_image),u_texsize:new l.Uniform2f(v,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade),u_opacity:new l.Uniform1f(v,o.u_opacity)}),fill:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),fillPattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_image:new l.Uniform1i(v,o.u_image),u_texsize:new l.Uniform2f(v,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade)}),fillOutline:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_world:new l.Uniform2f(v,o.u_world)}),fillOutlinePattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_world:new l.Uniform2f(v,o.u_world),u_image:new l.Uniform1i(v,o.u_image),u_texsize:new l.Uniform2f(v,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade)}),circle:(v,o)=>({u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(v,o.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(v,o.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),collisionBox:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(v,o.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(v,o.u_extrude_scale),u_overscale_factor:new l.Uniform1f(v,o.u_overscale_factor)}),collisionCircle:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_inv_matrix:new l.UniformMatrix4f(v,o.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(v,o.u_viewport_size)}),debug:(v,o)=>({u_color:new l.UniformColor(v,o.u_color),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_overlay:new l.Uniform1i(v,o.u_overlay),u_overlay_scale:new l.Uniform1f(v,o.u_overlay_scale)}),clippingMask:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),heatmap:(v,o)=>({u_extrude_scale:new l.Uniform1f(v,o.u_extrude_scale),u_intensity:new l.Uniform1f(v,o.u_intensity),u_matrix:new l.UniformMatrix4f(v,o.u_matrix)}),heatmapTexture:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_world:new l.Uniform2f(v,o.u_world),u_image:new l.Uniform1i(v,o.u_image),u_color_ramp:new l.Uniform1i(v,o.u_color_ramp),u_opacity:new l.Uniform1f(v,o.u_opacity)}),hillshade:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_image:new l.Uniform1i(v,o.u_image),u_latrange:new l.Uniform2f(v,o.u_latrange),u_light:new l.Uniform2f(v,o.u_light),u_shadow:new l.UniformColor(v,o.u_shadow),u_highlight:new l.UniformColor(v,o.u_highlight),u_accent:new l.UniformColor(v,o.u_accent)}),hillshadePrepare:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_image:new l.Uniform1i(v,o.u_image),u_dimension:new l.Uniform2f(v,o.u_dimension),u_zoom:new l.Uniform1f(v,o.u_zoom),u_unpack:new l.Uniform4f(v,o.u_unpack)}),line:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels)}),lineGradient:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels),u_image:new l.Uniform1i(v,o.u_image),u_image_height:new l.Uniform1f(v,o.u_image_height)}),linePattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_texsize:new l.Uniform2f(v,o.u_texsize),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_image:new l.Uniform1i(v,o.u_image),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels),u_scale:new l.Uniform3f(v,o.u_scale),u_fade:new l.Uniform1f(v,o.u_fade)}),lineSDF:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ratio:new l.Uniform1f(v,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(v,o.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(v,o.u_patternscale_a),u_patternscale_b:new l.Uniform2f(v,o.u_patternscale_b),u_sdfgamma:new l.Uniform1f(v,o.u_sdfgamma),u_image:new l.Uniform1i(v,o.u_image),u_tex_y_a:new l.Uniform1f(v,o.u_tex_y_a),u_tex_y_b:new l.Uniform1f(v,o.u_tex_y_b),u_mix:new l.Uniform1f(v,o.u_mix)}),raster:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_tl_parent:new l.Uniform2f(v,o.u_tl_parent),u_scale_parent:new l.Uniform1f(v,o.u_scale_parent),u_buffer_scale:new l.Uniform1f(v,o.u_buffer_scale),u_fade_t:new l.Uniform1f(v,o.u_fade_t),u_opacity:new l.Uniform1f(v,o.u_opacity),u_image0:new l.Uniform1i(v,o.u_image0),u_image1:new l.Uniform1i(v,o.u_image1),u_brightness_low:new l.Uniform1f(v,o.u_brightness_low),u_brightness_high:new l.Uniform1f(v,o.u_brightness_high),u_saturation_factor:new l.Uniform1f(v,o.u_saturation_factor),u_contrast_factor:new l.Uniform1f(v,o.u_contrast_factor),u_spin_weights:new l.Uniform3f(v,o.u_spin_weights)}),symbolIcon:(v,o)=>({u_is_size_zoom_constant:new l.Uniform1i(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(v,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(v,o.u_size_t),u_size:new l.Uniform1f(v,o.u_size),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(v,o.u_pitch),u_rotate_symbol:new l.Uniform1i(v,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(v,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(v,o.u_fade_change),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(v,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(v,o.u_coord_matrix),u_is_text:new l.Uniform1i(v,o.u_is_text),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_texsize:new l.Uniform2f(v,o.u_texsize),u_texture:new l.Uniform1i(v,o.u_texture)}),symbolSDF:(v,o)=>({u_is_size_zoom_constant:new l.Uniform1i(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(v,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(v,o.u_size_t),u_size:new l.Uniform1f(v,o.u_size),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(v,o.u_pitch),u_rotate_symbol:new l.Uniform1i(v,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(v,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(v,o.u_fade_change),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(v,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(v,o.u_coord_matrix),u_is_text:new l.Uniform1i(v,o.u_is_text),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_texsize:new l.Uniform2f(v,o.u_texsize),u_texture:new l.Uniform1i(v,o.u_texture),u_gamma_scale:new l.Uniform1f(v,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(v,o.u_is_halo)}),symbolTextAndIcon:(v,o)=>({u_is_size_zoom_constant:new l.Uniform1i(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(v,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(v,o.u_size_t),u_size:new l.Uniform1f(v,o.u_size),u_camera_to_center_distance:new l.Uniform1f(v,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(v,o.u_pitch),u_rotate_symbol:new l.Uniform1i(v,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(v,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(v,o.u_fade_change),u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(v,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(v,o.u_coord_matrix),u_is_text:new l.Uniform1i(v,o.u_is_text),u_pitch_with_map:new l.Uniform1i(v,o.u_pitch_with_map),u_texsize:new l.Uniform2f(v,o.u_texsize),u_texsize_icon:new l.Uniform2f(v,o.u_texsize_icon),u_texture:new l.Uniform1i(v,o.u_texture),u_texture_icon:new l.Uniform1i(v,o.u_texture_icon),u_gamma_scale:new l.Uniform1f(v,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(v,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(v,o.u_is_halo)}),background:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_opacity:new l.Uniform1f(v,o.u_opacity),u_color:new l.UniformColor(v,o.u_color)}),backgroundPattern:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_opacity:new l.Uniform1f(v,o.u_opacity),u_image:new l.Uniform1i(v,o.u_image),u_pattern_tl_a:new l.Uniform2f(v,o.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(v,o.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(v,o.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(v,o.u_pattern_br_b),u_texsize:new l.Uniform2f(v,o.u_texsize),u_mix:new l.Uniform1f(v,o.u_mix),u_pattern_size_a:new l.Uniform2f(v,o.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(v,o.u_pattern_size_b),u_scale_a:new l.Uniform1f(v,o.u_scale_a),u_scale_b:new l.Uniform1f(v,o.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(v,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(v,o.u_tile_units_to_pixels)}),terrain:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_texture:new l.Uniform1i(v,o.u_texture),u_ele_delta:new l.Uniform1f(v,o.u_ele_delta)}),terrainDepth:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_ele_delta:new l.Uniform1f(v,o.u_ele_delta)}),terrainCoords:(v,o)=>({u_matrix:new l.UniformMatrix4f(v,o.u_matrix),u_texture:new l.Uniform1i(v,o.u_texture),u_terrain_coords_id:new l.Uniform1f(v,o.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(v,o.u_ele_delta)})};class pc{constructor(o,h,m){this.context=o;const _=o.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Zh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mr{constructor(o,h,m,_){this.length=h.length,this.attributes=m,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=o;const w=o.gl;this.buffer=w.createBuffer(),o.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,h){for(let m=0;m<this.attributes.length;m++){const _=h.attributes[this.attributes[m].name];_!==void 0&&o.enableVertexAttribArray(_)}}setVertexAttribPointers(o,h,m){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],P=h.attributes[w.name];P!==void 0&&o.vertexAttribPointer(P,w.components,o[Zh[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const er=new WeakMap;function Tl(v){if(er.has(v))return er.get(v);{const o=v.getParameter(v.VERSION).startsWith("WebGL 2.0");return er.set(v,o),o}}class Vn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mc extends Vn{getDefault(){return l.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class ud extends Vn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class cd extends Vn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Pl extends Vn{getDefault(){return[!0,!0,!0,!0]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class hd extends Vn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class ym extends Vn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ei extends Vn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Kh extends Vn{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Us extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}}class fd extends Vn{getDefault(){return[0,1]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class pu extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}}class Wi extends Vn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class gc extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}}class yc extends Vn{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class js extends Vn{getDefault(){return l.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Xh extends Vn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Yh extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}}class _c extends Vn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class ii extends Vn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class dd extends Vn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class ki extends Vn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Il extends Vn{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Jh extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class pa extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class qn extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Ml extends Vn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ir extends Vn{getDefault(){return null}set(o){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Fa extends Vn{getDefault(){return null}set(o){var h;if(o===this.current&&!this.dirty)return;const m=this.gl;Tl(m)?m.bindVertexArray(o):(h=m.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Vs extends Vn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class _m extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Qh extends Vn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class vc extends Vn{constructor(o,h){super(o),this.context=o,this.parent=h}getDefault(){return null}}class vm extends vc{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class ef extends vc{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class mu extends vc{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class qs{constructor(o,h,m,_,w){this.context=o,this.width=h,this.height=m;const P=o.gl,I=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new vm(o,I),_)this.depthAttachment=w?new mu(o,I):new ef(o,I);else if(w)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,h=this.colorAttachment.get();if(h&&o.deleteTexture(h),this.depthAttachment){const m=this.depthAttachment.get();m&&o.deleteRenderbuffer(m)}o.deleteFramebuffer(this.framebuffer)}}class hr{constructor(o,h,m){this.blendFunction=o,this.blendColor=h,this.mask=m}}hr.Replace=[1,0],hr.disabled=new hr(hr.Replace,l.Color.transparent,[!1,!1,!1,!1]),hr.unblended=new hr(hr.Replace,l.Color.transparent,[!0,!0,!0,!0]),hr.alphaBlended=new hr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class tf{constructor(o){var h,m;if(this.gl=o,this.clearColor=new mc(this),this.clearDepth=new ud(this),this.clearStencil=new cd(this),this.colorMask=new Pl(this),this.depthMask=new hd(this),this.stencilMask=new ym(this),this.stencilFunc=new Ei(this),this.stencilOp=new Kh(this),this.stencilTest=new Us(this),this.depthRange=new fd(this),this.depthTest=new pu(this),this.depthFunc=new Wi(this),this.blend=new gc(this),this.blendFunc=new yc(this),this.blendColor=new js(this),this.blendEquation=new Xh(this),this.cullFace=new Yh(this),this.cullFaceSide=new _c(this),this.frontFace=new ii(this),this.program=new dd(this),this.activeTexture=new ki(this),this.viewport=new Il(this),this.bindFramebuffer=new Jh(this),this.bindRenderbuffer=new pa(this),this.bindTexture=new qn(this),this.bindVertexBuffer=new Ml(this),this.bindElementBuffer=new Ir(this),this.bindVertexArray=new Fa(this),this.pixelStoreUnpack=new Vs(this),this.pixelStoreUnpackPremultiplyAlpha=new _m(this),this.pixelStoreUnpackFlipY=new Qh(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),Tl(o)){this.HALF_FLOAT=o.HALF_FLOAT;const _=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=o.RGBA16F)!==null&&h!==void 0?h:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(m=o.RGB16F)!==null&&m!==void 0?m:_==null?void 0:_.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const _=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,h){return new pc(this,o,h)}createVertexBuffer(o,h,m){return new mr(this,o,h,m)}createRenderbuffer(o,h,m){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,o,h,m),this.bindRenderbuffer.set(null),w}createFramebuffer(o,h,m,_){return new qs(this,o,h,m,_)}clear({color:o,depth:h,stencil:m}){const _=this.gl;let w=0;o&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),m!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),_.clear(w)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){l.deepEqual(o.blendFunction,hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return Tl(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var h;return Tl(this.gl)?this.gl.deleteVertexArray(o):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Pn{constructor(o,h,m){this.func=o,this.mask=h,this.range=m}}Pn.ReadOnly=!1,Pn.ReadWrite=!0,Pn.disabled=new Pn(519,Pn.ReadOnly,[0,1]);const Gs=7680;class or{constructor(o,h,m,_,w,P){this.test=o,this.ref=h,this.mask=m,this.fail=_,this.depthFail=w,this.pass=P}}or.disabled=new or({func:519,mask:0},0,0,Gs,Gs,Gs);class ar{constructor(o,h,m){this.enable=o,this.mode=h,this.frontFace=m}}let gu;function xc(v,o,h,m,_,w,P){const I=v.context,O=I.gl,D=v.useProgram("collisionBox"),U=[];let V=0,ne=0;for(let be=0;be<m.length;be++){const Ue=m[be],Ze=o.getTile(Ue),Ke=Ze.getBucket(h);if(!Ke)continue;let nt=Ue.posMatrix;_[0]===0&&_[1]===0||(nt=v.translatePosMatrix(Ue.posMatrix,Ze,_,w));const ut=P?Ke.textCollisionBox:Ke.iconCollisionBox,it=Ke.collisionCircleArray;if(it.length>0){const Et=l.create(),Nt=nt;l.mul(Et,Ke.placementInvProjMatrix,v.transform.glCoordMatrix),l.mul(Et,Et,Ke.placementViewportMatrix),U.push({circleArray:it,circleOffset:ne,transform:Nt,invTransform:Et,coord:Ue}),V+=it.length/4,ne=V}ut&&D.draw(I,O.LINES,Pn.disabled,or.disabled,v.colorModeForRenderPass(),ar.disabled,qh(nt,v.transform,Ze),v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ue),h.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,null,v.transform.zoom,null,null,ut.collisionVertexBuffer)}if(!P||!U.length)return;const fe=v.useProgram("collisionCircle"),he=new l.CollisionCircleLayoutArray;he.resize(4*V),he._trim();let de=0;for(const be of U)for(let Ue=0;Ue<be.circleArray.length/4;Ue++){const Ze=4*Ue,Ke=be.circleArray[Ze+0],nt=be.circleArray[Ze+1],ut=be.circleArray[Ze+2],it=be.circleArray[Ze+3];he.emplace(de++,Ke,nt,ut,it,0),he.emplace(de++,Ke,nt,ut,it,1),he.emplace(de++,Ke,nt,ut,it,2),he.emplace(de++,Ke,nt,ut,it,3)}(!gu||gu.length<2*V)&&(gu=function(be){const Ue=2*be,Ze=new l.QuadTriangleArray;Ze.resize(Ue),Ze._trim();for(let Ke=0;Ke<Ue;Ke++){const nt=6*Ke;Ze.uint16[nt+0]=4*Ke+0,Ze.uint16[nt+1]=4*Ke+1,Ze.uint16[nt+2]=4*Ke+2,Ze.uint16[nt+3]=4*Ke+2,Ze.uint16[nt+4]=4*Ke+3,Ze.uint16[nt+5]=4*Ke+0}return Ze}(V));const me=I.createIndexBuffer(gu,!0),Me=I.createVertexBuffer(he,l.collisionCircleLayout.members,!0);for(const be of U){const Ue={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(je=v.transform).cameraToCenterDistance,u_viewport_size:[je.width,je.height]};fe.draw(I,O.TRIANGLES,Pn.disabled,or.disabled,v.colorModeForRenderPass(),ar.disabled,Ue,v.style.map.terrain&&v.style.map.terrain.getTerrainData(be.coord),h.id,Me,me,l.SegmentVector.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,v.transform.zoom,null,null,null)}var je;Me.destroy(),me.destroy()}ar.disabled=new ar(!1,1029,2305),ar.backCCW=new ar(!0,1029,2305);const nf=l.identity(new Float32Array(16));function bc(v,o,h,m,_,w){const{horizontalAlign:P,verticalAlign:I}=l.getAnchorAlignment(v),O=-(P-.5)*o,D=-(I-.5)*h,U=l.evaluateVariableOffset(v,m);return new l.Point((O/_+U[0])*w,(D/_+U[1])*w)}function wc(v,o,h,m,_,w,P,I,O,D,U){const V=v.text.placedSymbolArray,ne=v.text.dynamicLayoutVertexArray,fe=v.icon.dynamicLayoutVertexArray,he={};ne.clear();for(let de=0;de<V.length;de++){const me=V.get(de),Me=me.hidden||!me.crossTileID||v.allowVerticalPlacement&&!me.placedOrientation?null:m[me.crossTileID];if(Me){const je=new l.Point(me.anchorX,me.anchorY),be=xt(je,h?P:w,U),Ue=$n(_.cameraToCenterDistance,be.signedDistanceFromCamera);let Ze=l.evaluateSizeForFeature(v.textSizeData,O,me)*Ue/l.ONE_EM;h&&(Ze*=v.tilePixelRatio/I);const{width:Ke,height:nt,anchor:ut,textOffset:it,textBoxScale:Et}=Me,Nt=bc(ut,Ke,nt,it,Et,Ze),xn=h?xt(je.add(Nt),w,U).point:be.point.add(o?Nt.rotate(-_.angle):Nt),_t=v.allowVerticalPlacement&&me.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Xt=0;Xt<me.numGlyphs;Xt++)l.addDynamicAttributes(ne,xn,_t);D&&me.associatedIconIndex>=0&&(he[me.associatedIconIndex]={shiftedAnchor:xn,angle:_t})}else ce(me.numGlyphs,ne)}if(D){fe.clear();const de=v.icon.placedSymbolArray;for(let me=0;me<de.length;me++){const Me=de.get(me);if(Me.hidden)ce(Me.numGlyphs,fe);else{const je=he[me];if(je)for(let be=0;be<Me.numGlyphs;be++)l.addDynamicAttributes(fe,je.shiftedAnchor,je.angle);else ce(Me.numGlyphs,fe)}}v.icon.dynamicLayoutVertexBuffer.updateData(fe)}v.text.dynamicLayoutVertexBuffer.updateData(ne)}function Sc(v,o,h){return h.iconsInText&&o?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Zi(v,o,h,m,_,w,P,I,O,D,U,V){const ne=v.context,fe=ne.gl,he=v.transform,de=I==="map",me=O==="map",Me=I!=="viewport"&&h.layout.get("symbol-placement")!=="point",je=de&&!me&&!Me,be=!h.layout.get("symbol-sort-key").isConstant();let Ue=!1;const Ze=v.depthModeForSublayer(0,Pn.ReadOnly),Ke=h.layout.get("text-variable-anchor"),nt=[];for(const ut of m){const it=o.getTile(ut),Et=it.getBucket(h);if(!Et)continue;const Nt=_?Et.text:Et.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const xn=Nt.programConfigurations.get(h.id),_t=_||Et.sdfIcons,Xt=_?Et.textSizeData:Et.iconSizeData,Ot=me||he.pitch!==0,Un=v.useProgram(Sc(_t,_,Et),xn),Rn=l.evaluateSizeForZoom(Xt,he.zoom),dn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ut);let nn,ir,fr,Gr,ai=[0,0],oo=null;if(_)ir=it.glyphAtlasTexture,fr=fe.LINEAR,nn=it.glyphAtlasTexture.size,Et.iconsInText&&(ai=it.imageAtlasTexture.size,oo=it.imageAtlasTexture,Gr=Ot||v.options.rotating||v.options.zooming||Xt.kind==="composite"||Xt.kind==="camera"?fe.LINEAR:fe.NEAREST);else{const Wr=h.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;ir=it.imageAtlasTexture,fr=_t||v.options.rotating||v.options.zooming||Wr||Ot?fe.LINEAR:fe.NEAREST,nn=it.imageAtlasTexture.size}const Ji=Te(it,1,v.transform.zoom),yi=vn(ut.posMatrix,me,de,v.transform,Ji),Li=Wt(ut.posMatrix,me,de,v.transform,Ji),va=Ke&&Et.hasTextData(),ds=h.layout.get("icon-text-fit")!=="none"&&va&&Et.hasIconData();if(Me){const Wr=v.style.map.terrain?(xa,ba)=>v.style.map.terrain.getElevation(ut,xa,ba):null,Fi=h.layout.get("text-rotation-alignment")==="map";bn(Et,ut.posMatrix,v,_,yi,Li,me,D,Fi,Wr)}const Oi=v.translatePosMatrix(ut.posMatrix,it,w,P),si=Me||_&&Ke||ds?nf:yi,cn=v.translatePosMatrix(Li,it,w,P,!0),Hr=_t&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let li;li=_t?Et.iconsInText?Hi(Xt.kind,Rn,je,me,v,Oi,si,cn,nn,ai):du(Xt.kind,Rn,je,me,v,Oi,si,cn,_,nn,!0):Al(Xt.kind,Rn,je,me,v,Oi,si,cn,_,nn);const kn={program:Un,buffers:Nt,uniformValues:li,atlasTexture:ir,atlasTextureIcon:oo,atlasInterpolation:fr,atlasInterpolationIcon:Gr,isSDF:_t,hasHalo:Hr};if(be&&Et.canOverlap){Ue=!0;const Wr=Nt.segments.get();for(const Fi of Wr)nt.push({segments:new l.SegmentVector([Fi]),sortKey:Fi.sortKey,state:kn,terrainData:dn})}else nt.push({segments:Nt.segments,sortKey:0,state:kn,terrainData:dn})}Ue&&nt.sort((ut,it)=>ut.sortKey-it.sortKey);for(const ut of nt){const it=ut.state;if(ne.activeTexture.set(fe.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,fe.CLAMP_TO_EDGE),it.atlasTextureIcon&&(ne.activeTexture.set(fe.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),it.isSDF){const Et=it.uniformValues;it.hasHalo&&(Et.u_is_halo=1,yu(it.buffers,ut.segments,h,v,it.program,Ze,U,V,Et,ut.terrainData)),Et.u_is_halo=0}yu(it.buffers,ut.segments,h,v,it.program,Ze,U,V,it.uniformValues,ut.terrainData)}}function yu(v,o,h,m,_,w,P,I,O,D){const U=m.context;_.draw(U,U.gl.TRIANGLES,w,P,I,ar.disabled,O,D,h.id,v.layoutVertexBuffer,v.indexBuffer,o,h.paint,m.transform.zoom,v.programConfigurations.get(h.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Ra(v,o,h,m,_){if(!h||!m||!m.imageAtlas)return;const w=m.imageAtlas.patternPositions;let P=w[h.to.toString()],I=w[h.from.toString()];if(!P||!I){const O=_.getPaintProperty(o);P=w[O],I=w[O]}P&&I&&v.setConstantPatternPositions(P,I)}function _u(v,o,h,m,_,w,P){const I=v.context.gl,O="fill-pattern",D=h.paint.get(O),U=D&&D.constantOr(1),V=h.getCrossfadeParameters();let ne,fe,he,de,me;P?(fe=U&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=I.LINES):(fe=U?"fillPattern":"fill",ne=I.TRIANGLES);const Me=D.constantOr(null);for(const je of m){const be=o.getTile(je);if(U&&!be.patternsLoaded())continue;const Ue=be.getBucket(h);if(!Ue)continue;const Ze=Ue.programConfigurations.get(h.id),Ke=v.useProgram(fe,Ze),nt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(je);U&&(v.context.activeTexture.set(I.TEXTURE0),be.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Ze.updatePaintBuffers(V)),Ra(Ze,O,Me,be,h);const ut=nt?je:null,it=v.translatePosMatrix(ut?ut.posMatrix:je.posMatrix,be,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(P){de=Ue.indexBuffer2,me=Ue.segments2;const Et=[I.drawingBufferWidth,I.drawingBufferHeight];he=fe==="fillOutlinePattern"&&U?Vh(it,v,V,be,Et):lc(it,Et)}else de=Ue.indexBuffer,me=Ue.segments,he=U?jh(it,v,V,be):Uh(it);Ke.draw(v.context,ne,_,v.stencilModeForClipping(je),w,ar.disabled,he,nt,h.id,Ue.layoutVertexBuffer,de,me,h.paint,v.transform.zoom,Ze)}}function Cc(v,o,h,m,_,w,P){const I=v.context,O=I.gl,D="fill-extrusion-pattern",U=h.paint.get(D),V=U.constantOr(1),ne=h.getCrossfadeParameters(),fe=h.paint.get("fill-extrusion-opacity"),he=U.constantOr(null);for(const de of m){const me=o.getTile(de),Me=me.getBucket(h);if(!Me)continue;const je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(de),be=Me.programConfigurations.get(h.id),Ue=v.useProgram(V?"fillExtrusionPattern":"fillExtrusion",be);V&&(v.context.activeTexture.set(O.TEXTURE0),me.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),be.updatePaintBuffers(ne)),Ra(be,D,he,me,h);const Ze=v.translatePosMatrix(de.posMatrix,me,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Ke=h.paint.get("fill-extrusion-vertical-gradient"),nt=V?Nh(Ze,v,Ke,fe,de,ne,me):hu(Ze,v,Ke,fe);Ue.draw(I,I.gl.TRIANGLES,_,w,P,ar.backCCW,nt,je,h.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,h.paint,v.transform.zoom,be,v.style.map.terrain&&Me.centroidVertexBuffer)}}function pd(v,o,h,m,_,w,P){const I=v.context,O=I.gl,D=h.fbo;if(!D)return;const U=v.useProgram("hillshade"),V=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);I.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,D.colorAttachment.get()),U.draw(I,O.TRIANGLES,_,w,P,ar.disabled,((ne,fe,he,de)=>{const me=he.paint.get("hillshade-shadow-color"),Me=he.paint.get("hillshade-highlight-color"),je=he.paint.get("hillshade-accent-color");let be=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(be-=ne.transform.angle);const Ue=!ne.options.moving;return{u_matrix:de?de.posMatrix:ne.transform.calculatePosMatrix(fe.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:ls(0,fe.tileID),u_light:[he.paint.get("hillshade-exaggeration"),be],u_shadow:me,u_highlight:Me,u_accent:je}})(v,h,m,V?o:null),V,m.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Vr(v,o,h,m,_,w){const P=v.context,I=P.gl,O=o.dem;if(O&&O.data){const D=O.dim,U=O.stride,V=O.getPixels();if(P.activeTexture.set(I.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||v.getTileTexture(U),o.demTexture){const fe=o.demTexture;fe.update(V,{premultiply:!1}),fe.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else o.demTexture=new Oe(P,V,I.RGBA,{premultiply:!1}),o.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);P.activeTexture.set(I.TEXTURE0);let ne=o.fbo;if(!ne){const fe=new Oe(P,{width:D,height:D,data:null},I.RGBA);fe.bind(I.LINEAR,I.CLAMP_TO_EDGE),ne=o.fbo=P.createFramebuffer(D,D,!0,!1),ne.colorAttachment.set(fe.texture)}P.bindFramebuffer.set(ne.framebuffer),P.viewport.set([0,0,D,D]),v.useProgram("hillshadePrepare").draw(P,I.TRIANGLES,m,_,w,ar.disabled,((fe,he)=>{const de=he.stride,me=l.create();return l.ortho(me,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(me,me,[0,-l.EXTENT,0]),{u_matrix:me,u_image:1,u_dimension:[de,de],u_zoom:fe.overscaledZ,u_unpack:he.getUnpackVector()}})(o.tileID,O),null,h.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function Hs(v,o,h,m,_,w){const P=m.paint.get("raster-fade-duration");if(!w&&P>0){const I=l.browser.now(),O=(I-v.timeAdded)/P,D=o?(I-o.timeAdded)/P:-1,U=h.getSource(),V=_.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),ne=!o||Math.abs(o.tileID.overscaledZ-V)>Math.abs(v.tileID.overscaledZ-V),fe=ne&&v.refreshedUponExpiration?1:l.clamp(ne?O:1-D,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),o?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const Ro=new l.Color(1,0,0,1),md=new l.Color(0,1,0,1),us=new l.Color(0,0,1,1),gd=new l.Color(1,0,1,1),Ll=new l.Color(0,1,1,1);function Ws(v,o,h,m){Do(v,0,o+h/2,v.transform.width,h,m)}function vu(v,o,h,m){Do(v,o-h/2,0,h,v.transform.height,m)}function Do(v,o,h,m,_,w){const P=v.context,I=P.gl;I.enable(I.SCISSOR_TEST),I.scissor(o*v.pixelRatio,h*v.pixelRatio,m*v.pixelRatio,_*v.pixelRatio),P.clear({color:w}),I.disable(I.SCISSOR_TEST)}function xu(v,o,h){const m=v.context,_=m.gl,w=h.posMatrix,P=v.useProgram("debug"),I=Pn.disabled,O=or.disabled,D=v.colorModeForRenderPass(),U="$debug",V=v.style.map.terrain&&v.style.map.terrain.getTerrainData(h);m.activeTexture.set(_.TEXTURE0);const ne=o.getTileByID(h.key).latestRawTileData,fe=Math.floor((ne&&ne.byteLength||0)/1024),he=o.getTile(h).tileSize,de=512/Math.min(he,512)*(h.overscaledZ/v.transform.zoom)*.5;let me=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(me+=` => ${h.overscaledZ}`),function(Me,je){Me.initDebugOverlayCanvas();const be=Me.debugOverlayCanvas,Ue=Me.context.gl,Ze=Me.debugOverlayCanvas.getContext("2d");Ze.clearRect(0,0,be.width,be.height),Ze.shadowColor="white",Ze.shadowBlur=2,Ze.lineWidth=1.5,Ze.strokeStyle="white",Ze.textBaseline="top",Ze.font="bold 36px Open Sans, sans-serif",Ze.fillText(je,5,5),Ze.strokeText(je,5,5),Me.debugOverlayTexture.update(be),Me.debugOverlayTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}(v,`${me} ${fe}kB`),P.draw(m,_.TRIANGLES,I,O,hr.alphaBlended,ar.disabled,uc(w,l.Color.transparent,de),null,U,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),P.draw(m,_.LINE_STRIP,I,O,D,ar.disabled,uc(w,l.Color.red),V,U,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function rf(v,o,h){const m=v.context,_=m.gl,w=v.colorModeForRenderPass(),P=new Pn(_.LEQUAL,Pn.ReadWrite,v.depthRangeFor3D),I=v.useProgram("terrain"),O=o.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,v.width,v.height]);for(const D of h){const U=v.renderToTexture.getTexture(D),V=o.getTerrainData(D.tileID);m.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,U.texture);const ne={u_matrix:v.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(v.transform.zoom)};I.draw(m,_.TRIANGLES,P,or.disabled,w,ar.backCCW,ne,V,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class yd{constructor(o,h){this.context=new tf(o),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=Yn.maxUnderzooming+Yn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ri}resize(o,h,m){if(this.width=Math.floor(o*m),this.height=Math.floor(h*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const o=this.context,h=new l.PosArray;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(h,cu.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const m=new l.PosArray;m.emplaceBack(0,0),m.emplaceBack(l.EXTENT,0),m.emplaceBack(0,l.EXTENT),m.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(m,cu.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const _=new l.RasterBoundsArray;_.emplaceBack(0,0,0,0),_.emplaceBack(l.EXTENT,0,l.EXTENT,0),_.emplaceBack(0,l.EXTENT,0,l.EXTENT),_.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(_,Qn.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const w=new l.PosArray;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(w,cu.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const P=new l.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(P);const I=new l.TriangleIndexArray;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(I);const O=this.context.gl;this.stencilClearMode=new or({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const o=this.context,h=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=l.create();l.ortho(m,0,this.width,this.height,0,0,1),l.scale(m,m,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,h.TRIANGLES,Pn.disabled,this.stencilClearMode,hr.disabled,ar.disabled,Gh(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,h){if(this.currentStencilSource===o.source||!o.isTileClipped()||!h||!h.length)return;this.currentStencilSource=o.source;const m=this.context,_=m.gl;this.nextStencilID+h.length>256&&this.clearStencil(),m.setColorMode(hr.disabled),m.setDepthMode(Pn.disabled);const w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of h){const I=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);w.draw(m,_.TRIANGLES,Pn.disabled,new or({func:_.ALWAYS,mask:0},I,255,_.KEEP,_.KEEP,_.REPLACE),hr.disabled,ar.disabled,Gh(P.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,h=this.context.gl;return new or({func:h.NOTEQUAL,mask:255},o,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(o){const h=this.context.gl;return new or({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(o){const h=this.context.gl,m=o.sort((P,I)=>I.overscaledZ-P.overscaledZ),_=m[m.length-1].overscaledZ,w=m[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const P={};for(let I=0;I<w;I++)P[I+_]=new or({func:h.GEQUAL,mask:255},I+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[P,m]}return[{[_]:or.disabled},m]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new hr([o.CONSTANT_COLOR,o.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hr.unblended:hr.alphaBlended}depthModeForSublayer(o,h,m){if(!this.opaquePassEnabledForLayer())return Pn.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Pn(m||this.context.gl.LEQUAL,h,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,h){this.style=o,this.options=h,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();const m=this.style._order,_=this.style.sourceCaches,w={},P={},I={};for(const O in _){const D=_[O];D.used&&D.prepare(this.context),w[O]=D.getVisibleCoordinates(),P[O]=w[O].slice().reverse(),I[O]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<m.length;O++)if(this.style._layers[m[O]].is3D()){this.opaquePassCutoff=O;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const O=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||O.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,U){const V=D.context,ne=V.gl,fe=hr.unblended,he=new Pn(ne.LEQUAL,Pn.ReadWrite,[0,1]),de=U.getTerrainMesh(),me=U.sourceCache.getRenderableTiles(),Me=D.useProgram("terrainDepth");V.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),V.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),V.clear({color:l.Color.transparent,depth:1});for(const je of me){const be=U.getTerrainData(je.tileID),Ue={u_matrix:D.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(D.transform.zoom)};Me.draw(V,ne.TRIANGLES,he,or.disabled,fe,ar.backCCW,Ue,be,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}V.bindFramebuffer.set(null),V.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,U){const V=D.context,ne=V.gl,fe=hr.unblended,he=new Pn(ne.LEQUAL,Pn.ReadWrite,[0,1]),de=U.getTerrainMesh(),me=U.getCoordsTexture(),Me=U.sourceCache.getRenderableTiles(),je=D.useProgram("terrainCoords");V.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),V.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),V.clear({color:l.Color.transparent,depth:1}),U.coordsIndex=[];for(const be of Me){const Ue=U.getTerrainData(be.tileID);V.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,me.texture);const Ze={u_matrix:D.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(D.transform.zoom)};je.draw(V,ne.TRIANGLES,he,or.disabled,fe,ar.backCCW,Ze,Ue,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),U.coordsIndex.push(be.tileID.key)}V.bindFramebuffer.set(null),V.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const O of m){const D=this.style._layers[O];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const U=P[D.source];(D.type==="custom"||U.length)&&this.renderLayer(this,_[D.source],D,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[m[this.currentLayer]],D=_[O.source],U=w[O.source];this._renderTileClippingMasks(O,U),this.renderLayer(this,D,O,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const O=this.style._layers[m[this.currentLayer]],D=_[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const U=(O.type==="symbol"?I:P)[O.source];this._renderTileClippingMasks(O,w[O.source]),this.renderLayer(this,D,O,U)}if(this.options.showTileBoundaries){const O=function(D,U){let V=null;const ne=Object.values(D._layers).flatMap(me=>me.source&&!me.isHidden(U)?[D.sourceCaches[me.source]]:[]),fe=ne.filter(me=>me.getSource().type==="vector"),he=ne.filter(me=>me.getSource().type!=="vector"),de=me=>{(!V||V.getSource().maxzoom<me.getSource().maxzoom)&&(V=me)};return fe.forEach(me=>de(me)),V||he.forEach(me=>de(me)),V}(this.style,this.transform.zoom);O&&function(D,U,V){for(let ne=0;ne<V.length;ne++)xu(D,U,V[ne])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const D=O.transform.padding;Ws(O,O.transform.height-(D.top||0),3,Ro),Ws(O,D.bottom||0,3,md),vu(O,D.left||0,3,us),vu(O,O.transform.width-(D.right||0),3,gd);const U=O.transform.centerPoint;(function(V,ne,fe,he){Do(V,ne-1,fe-10,2,20,he),Do(V,ne-10,fe-1,20,2,he)})(O,U.x,O.transform.height-U.y,Ll)}(this),this.context.setDefault()}renderLayer(o,h,m,_){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(_||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(w,P,I,O,D){if(w.renderPass!=="translucent")return;const U=or.disabled,V=w.colorModeForRenderPass();I.layout.get("text-variable-anchor")&&function(ne,fe,he,de,me,Me,je){const be=fe.transform,Ue=me==="map",Ze=Me==="map";for(const Ke of ne){const nt=de.getTile(Ke),ut=nt.getBucket(he);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const it=l.evaluateSizeForZoom(ut.textSizeData,be.zoom),Et=Te(nt,1,fe.transform.zoom),Nt=vn(Ke.posMatrix,Ze,Ue,fe.transform,Et),xn=he.layout.get("icon-text-fit")!=="none"&&ut.hasIconData();if(it){const _t=Math.pow(2,be.zoom-nt.tileID.overscaledZ);wc(ut,Ue,Ze,je,be,Nt,Ke.posMatrix,_t,it,xn,fe.style.map.terrain?(Xt,Ot)=>fe.style.map.terrain.getElevation(Ke,Xt,Ot):null)}}}(O,w,I,P,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),D),I.paint.get("icon-opacity").constantOr(1)!==0&&Zi(w,P,I,O,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),U,V),I.paint.get("text-opacity").constantOr(1)!==0&&Zi(w,P,I,O,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),U,V),P.map.showCollisionBoxes&&(xc(w,P,I,O,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),xc(w,P,I,O,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(o,h,m,_,this.style.placement.variableOffsets);break;case"circle":(function(w,P,I,O){if(w.renderPass!=="translucent")return;const D=I.paint.get("circle-opacity"),U=I.paint.get("circle-stroke-width"),V=I.paint.get("circle-stroke-opacity"),ne=!I.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(U.constantOr(1)===0||V.constantOr(1)===0))return;const fe=w.context,he=fe.gl,de=w.depthModeForSublayer(0,Pn.ReadOnly),me=or.disabled,Me=w.colorModeForRenderPass(),je=[];for(let be=0;be<O.length;be++){const Ue=O[be],Ze=P.getTile(Ue),Ke=Ze.getBucket(I);if(!Ke)continue;const nt=Ke.programConfigurations.get(I.id),ut=w.useProgram("circle",nt),it=Ke.layoutVertexBuffer,Et=Ke.indexBuffer,Nt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ue),xn={programConfiguration:nt,program:ut,layoutVertexBuffer:it,indexBuffer:Et,uniformValues:ss(w,Ue,Ze,I),terrainData:Nt};if(ne){const _t=Ke.segments.get();for(const Xt of _t)je.push({segments:new l.SegmentVector([Xt]),sortKey:Xt.sortKey,state:xn})}else je.push({segments:Ke.segments,sortKey:0,state:xn})}ne&&je.sort((be,Ue)=>be.sortKey-Ue.sortKey);for(const be of je){const{programConfiguration:Ue,program:Ze,layoutVertexBuffer:Ke,indexBuffer:nt,uniformValues:ut,terrainData:it}=be.state;Ze.draw(fe,he.TRIANGLES,de,me,Me,ar.disabled,ut,it,I.id,Ke,nt,be.segments,I.paint,w.transform.zoom,Ue)}})(o,h,m,_);break;case"heatmap":(function(w,P,I,O){if(I.paint.get("heatmap-opacity")!==0)if(w.renderPass==="offscreen"){const D=w.context,U=D.gl,V=or.disabled,ne=new hr([U.ONE,U.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(fe,he,de){const me=fe.gl;fe.activeTexture.set(me.TEXTURE1),fe.viewport.set([0,0,he.width/4,he.height/4]);let Me=de.heatmapFbo;if(Me)me.bindTexture(me.TEXTURE_2D,Me.colorAttachment.get()),fe.bindFramebuffer.set(Me.framebuffer);else{const je=me.createTexture();me.bindTexture(me.TEXTURE_2D,je),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),Me=de.heatmapFbo=fe.createFramebuffer(he.width/4,he.height/4,!1,!1),function(be,Ue,Ze,Ke){var nt,ut;const it=be.gl,Et=(nt=be.HALF_FLOAT)!==null&&nt!==void 0?nt:it.UNSIGNED_BYTE,Nt=(ut=be.RGBA16F)!==null&&ut!==void 0?ut:it.RGBA;it.texImage2D(it.TEXTURE_2D,0,Nt,Ue.width/4,Ue.height/4,0,it.RGBA,Et,null),Ke.colorAttachment.set(Ze)}(fe,he,je,Me)}})(D,w,I),D.clear({color:l.Color.transparent});for(let fe=0;fe<O.length;fe++){const he=O[fe];if(P.hasRenderableParent(he))continue;const de=P.getTile(he),me=de.getBucket(I);if(!me)continue;const Me=me.programConfigurations.get(I.id),je=w.useProgram("heatmap",Me),{zoom:be}=w.transform;je.draw(D,U.TRIANGLES,Pn.disabled,V,ne,ar.disabled,Hh(he.posMatrix,de,be,I.paint.get("heatmap-intensity")),null,I.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,I.paint,w.transform.zoom,Me)}D.viewport.set([0,0,w.width,w.height])}else w.renderPass==="translucent"&&(w.context.setColorMode(w.colorModeForRenderPass()),function(D,U){const V=D.context,ne=V.gl,fe=U.heatmapFbo;if(!fe)return;V.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,fe.colorAttachment.get()),V.activeTexture.set(ne.TEXTURE1);let he=U.colorRampTexture;he||(he=U.colorRampTexture=new Oe(V,U.colorRamp,ne.RGBA)),he.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(V,ne.TRIANGLES,Pn.disabled,or.disabled,D.colorModeForRenderPass(),ar.disabled,((de,me,Me,je)=>{const be=l.create();l.ortho(be,0,de.width,de.height,0,0,1);const Ue=de.context.gl;return{u_matrix:be,u_world:[Ue.drawingBufferWidth,Ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:me.paint.get("heatmap-opacity")}})(D,U),null,U.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,U.paint,D.transform.zoom)}(w,I))})(o,h,m,_);break;case"line":(function(w,P,I,O){if(w.renderPass!=="translucent")return;const D=I.paint.get("line-opacity"),U=I.paint.get("line-width");if(D.constantOr(1)===0||U.constantOr(1)===0)return;const V=w.depthModeForSublayer(0,Pn.ReadOnly),ne=w.colorModeForRenderPass(),fe=I.paint.get("line-dasharray"),he=I.paint.get("line-pattern"),de=he.constantOr(1),me=I.paint.get("line-gradient"),Me=I.getCrossfadeParameters(),je=de?"linePattern":fe?"lineSDF":me?"lineGradient":"line",be=w.context,Ue=be.gl;let Ze=!0;for(const Ke of O){const nt=P.getTile(Ke);if(de&&!nt.patternsLoaded())continue;const ut=nt.getBucket(I);if(!ut)continue;const it=ut.programConfigurations.get(I.id),Et=w.context.program.get(),Nt=w.useProgram(je,it),xn=Ze||Nt.program!==Et,_t=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ke),Xt=he.constantOr(null);if(Xt&&nt.imageAtlas){const Rn=nt.imageAtlas,dn=Rn.patternPositions[Xt.to.toString()],nn=Rn.patternPositions[Xt.from.toString()];dn&&nn&&it.setConstantPatternPositions(dn,nn)}const Ot=_t?Ke:null,Un=de?cc(w,nt,I,Me,Ot):fe?hc(w,nt,I,fe,Me,Ot):me?xo(w,nt,I,ut.lineClipsArray.length,Ot):Ns(w,nt,I,Ot);if(de)be.activeTexture.set(Ue.TEXTURE0),nt.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),it.updatePaintBuffers(Me);else if(fe&&(xn||w.lineAtlas.dirty))be.activeTexture.set(Ue.TEXTURE0),w.lineAtlas.bind(be);else if(me){const Rn=ut.gradients[I.id];let dn=Rn.texture;if(I.gradientVersion!==Rn.version){let nn=256;if(I.stepInterpolant){const ir=P.getSource().maxzoom,fr=Ke.canonical.z===ir?Math.ceil(1<<w.transform.maxZoom-Ke.canonical.z):1;nn=l.clamp(l.nextPowerOfTwo(ut.maxLineLength/l.EXTENT*1024*fr),256,be.maxTextureSize)}Rn.gradient=l.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:nn,image:Rn.gradient||void 0,clips:ut.lineClipsArray}),Rn.texture?Rn.texture.update(Rn.gradient):Rn.texture=new Oe(be,Rn.gradient,Ue.RGBA),Rn.version=I.gradientVersion,dn=Rn.texture}be.activeTexture.set(Ue.TEXTURE0),dn.bind(I.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}Nt.draw(be,Ue.TRIANGLES,V,w.stencilModeForClipping(Ke),ne,ar.disabled,Un,_t,I.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,I.paint,w.transform.zoom,it,ut.layoutVertexBuffer2),Ze=!1}})(o,h,m,_);break;case"fill":(function(w,P,I,O){const D=I.paint.get("fill-color"),U=I.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const V=w.colorModeForRenderPass(),ne=I.paint.get("fill-pattern"),fe=w.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&D.constantOr(l.Color.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===fe){const he=w.depthModeForSublayer(1,w.renderPass==="opaque"?Pn.ReadWrite:Pn.ReadOnly);_u(w,P,I,O,he,V,!1)}if(w.renderPass==="translucent"&&I.paint.get("fill-antialias")){const he=w.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Pn.ReadOnly);_u(w,P,I,O,he,V,!0)}})(o,h,m,_);break;case"fill-extrusion":(function(w,P,I,O){const D=I.paint.get("fill-extrusion-opacity");if(D!==0&&w.renderPass==="translucent"){const U=new Pn(w.context.gl.LEQUAL,Pn.ReadWrite,w.depthRangeFor3D);if(D!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Cc(w,P,I,O,U,or.disabled,hr.disabled),Cc(w,P,I,O,U,w.stencilModeFor3D(),w.colorModeForRenderPass());else{const V=w.colorModeForRenderPass();Cc(w,P,I,O,U,or.disabled,V)}}})(o,h,m,_);break;case"hillshade":(function(w,P,I,O){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const D=w.context,U=w.depthModeForSublayer(0,Pn.ReadOnly),V=w.colorModeForRenderPass(),[ne,fe]=w.renderPass==="translucent"?w.stencilConfigForOverlap(O):[{},O];for(const he of fe){const de=P.getTile(he);de.needsHillshadePrepare!==void 0&&de.needsHillshadePrepare&&w.renderPass==="offscreen"?Vr(w,de,I,U,or.disabled,V):w.renderPass==="translucent"&&pd(w,he,de,I,U,ne[he.overscaledZ],V)}D.viewport.set([0,0,w.width,w.height])})(o,h,m,_);break;case"raster":(function(w,P,I,O){if(w.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!O.length)return;const D=w.context,U=D.gl,V=P.getSource(),ne=w.useProgram("raster"),fe=w.colorModeForRenderPass(),[he,de]=V instanceof Bn?[{},O]:w.stencilConfigForOverlap(O),me=de[de.length-1].overscaledZ,Me=!w.options.moving;for(const je of de){const be=w.depthModeForSublayer(je.overscaledZ-me,I.paint.get("raster-opacity")===1?Pn.ReadWrite:Pn.ReadOnly,U.LESS),Ue=P.getTile(je);Ue.registerFadeDuration(I.paint.get("raster-fade-duration"));const Ze=P.findLoadedParent(je,0),Ke=Hs(Ue,Ze,P,I,w.transform,w.style.map.terrain);let nt,ut;const it=I.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;D.activeTexture.set(U.TEXTURE0),Ue.texture.bind(it,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(U.TEXTURE1),Ze?(Ze.texture.bind(it,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),nt=Math.pow(2,Ze.tileID.overscaledZ-Ue.tileID.overscaledZ),ut=[Ue.tileID.canonical.x*nt%1,Ue.tileID.canonical.y*nt%1]):Ue.texture.bind(it,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const Et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(je),Nt=Et?je:null,xn=Nt?Nt.posMatrix:w.transform.calculatePosMatrix(je.toUnwrapped(),Me),_t=fc(xn,ut||[0,0],nt||1,Ke,I);V instanceof Bn?ne.draw(D,U.TRIANGLES,be,or.disabled,fe,ar.disabled,_t,Et,I.id,V.boundsBuffer,w.quadTriangleIndexBuffer,V.boundsSegments):ne.draw(D,U.TRIANGLES,be,he[je.overscaledZ],fe,ar.disabled,_t,Et,I.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(o,h,m,_);break;case"background":(function(w,P,I,O){const D=I.paint.get("background-color"),U=I.paint.get("background-opacity");if(U===0)return;const V=w.context,ne=V.gl,fe=w.transform,he=fe.tileSize,de=I.paint.get("background-pattern");if(w.isPatternMissing(de))return;const me=!de&&D.a===1&&U===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==me)return;const Me=or.disabled,je=w.depthModeForSublayer(0,me==="opaque"?Pn.ReadWrite:Pn.ReadOnly),be=w.colorModeForRenderPass(),Ue=w.useProgram(de?"backgroundPattern":"background"),Ze=O||fe.coveringTiles({tileSize:he,terrain:w.style.map.terrain});de&&(V.activeTexture.set(ne.TEXTURE0),w.imageManager.bind(w.context));const Ke=I.getCrossfadeParameters();for(const nt of Ze){const ut=O?nt.posMatrix:w.transform.calculatePosMatrix(nt.toUnwrapped()),it=de?Wh(ut,U,w,de,{tileID:nt,tileSize:he},Ke):bo(ut,U,D),Et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(nt);Ue.draw(V,ne.TRIANGLES,je,Me,be,ar.disabled,it,Et,I.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(o,0,m,_);break;case"custom":(function(w,P,I){const O=w.context,D=I.implementation;if(w.renderPass==="offscreen"){const U=D.prerender;U&&(w.setCustomLayerDefaults(),O.setColorMode(w.colorModeForRenderPass()),U.call(D,O.gl,w.transform.customLayerMatrix()),O.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),O.setColorMode(w.colorModeForRenderPass()),O.setStencilMode(or.disabled);const U=D.renderingMode==="3d"?new Pn(w.context.gl.LEQUAL,Pn.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,Pn.ReadOnly);O.setDepthMode(U),D.render(O.gl,w.transform.customLayerMatrix()),O.setDirty(),w.setBaseState(),O.bindFramebuffer.set(null)}})(o,0,m)}}translatePosMatrix(o,h,m,_,w){if(!m[0]&&!m[1])return o;const P=w?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(P){const D=Math.sin(P),U=Math.cos(P);m=[m[0]*U-m[1]*D,m[0]*D+m[1]*U]}const I=[w?m[0]:Te(h,m[0],this.transform.zoom),w?m[1]:Te(h,m[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,o,I),O}saveTileTexture(o){const h=this._tileTextures[o.size[0]];h?h.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const h=this._tileTextures[o];return h&&h.length>0?h.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const h=this.imageManager.getPattern(o.from.toString()),m=this.imageManager.getPattern(o.to.toString());return!h||!m}useProgram(o,h){this.cache=this.cache||{};const m=o+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new gm(this.context,as[o],h,dc[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:h}=this.context.gl;return this.width!==o||this.height!==h}}class Ec{constructor(o,h){this.points=o,this.planes=h}static fromInvProjectionMatrix(o,h,m){const _=Math.pow(2,m),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const O=1/(I=l.transformMat4([],I,o))[3]/h*_;return l.mul$1(I,I,[O,O,1/I[3],O])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const O=function(ne,fe){var he=fe[0],de=fe[1],me=fe[2],Me=he*he+de*de+me*me;return Me>0&&(Me=1/Math.sqrt(Me)),ne[0]=fe[0]*Me,ne[1]=fe[1]*Me,ne[2]=fe[2]*Me,ne}([],function(ne,fe,he){var de=fe[0],me=fe[1],Me=fe[2],je=he[0],be=he[1],Ue=he[2];return ne[0]=me*Ue-Me*be,ne[1]=Me*je-de*Ue,ne[2]=de*be-me*je,ne}([],K([],w[I[0]],w[I[1]]),K([],w[I[2]],w[I[1]]))),D=-((U=O)[0]*(V=w[I[1]])[0]+U[1]*V[1]+U[2]*V[2]);var U,V;return O.concat(D)});return new Ec(w,P)}}class Ki{constructor(o,h){this.min=o,this.max=h,this.center=function(m,_,w){return m[0]=.5*_[0],m[1]=.5*_[1],m[2]=.5*_[2],m}([],function(m,_,w){return m[0]=_[0]+w[0],m[1]=_[1]+w[1],m[2]=_[2]+w[2],m}([],this.min,this.max))}quadrant(o){const h=[o%2==0,o<2],m=ee(this.min),_=ee(this.max);for(let w=0;w<h.length;w++)m[w]=h[w]?this.min[w]:this.center[w],_[w]=h[w]?this.center[w]:this.max[w];return _[2]=this.max[2],new Ki(m,_)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let _=0;_<o.planes.length;_++){const w=o.planes[_];let P=0;for(let I=0;I<h.length;I++)l.dot(w,h[I])>=0&&P++;if(P===0)return 0;P!==h.length&&(m=!1)}if(m)return 2;for(let _=0;_<3;_++){let w=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let I=0;I<o.points.length;I++){const O=o.points[I][_]-this.min[_];w=Math.min(w,O),P=Math.max(P,O)}if(P<0||w>this.max[_]-this.min[_])return 0}return 1}}class io{constructor(o=0,h=0,m=0,_=0){if(isNaN(o)||o<0||isNaN(h)||h<0||isNaN(m)||m<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=h,this.left=m,this.right=_}interpolate(o,h,m){return h.top!=null&&o.top!=null&&(this.top=l.interpolate.number(o.top,h.top,m)),h.bottom!=null&&o.bottom!=null&&(this.bottom=l.interpolate.number(o.bottom,h.bottom,m)),h.left!=null&&o.left!=null&&(this.left=l.interpolate.number(o.left,h.left,m)),h.right!=null&&o.right!=null&&(this.right=l.interpolate.number(o.right,h.right,m)),this}getCenter(o,h){const m=l.clamp((this.left+o-this.right)/2,0,o),_=l.clamp((this.top+h-this.bottom)/2,0,h);return new l.Point(m,_)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class bu{constructor(o,h,m,_,w){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=w===void 0||!!w,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=m??0,this._maxPitch=_??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new io,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const o=new bu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this._minEleveationForCurrentTile=o._minEleveationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const h=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var m=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}(),function(m,_,w){var P=_[0],I=_[1],O=_[2],D=_[3],U=Math.sin(w),V=Math.cos(w);m[0]=P*V+O*U,m[1]=I*V+D*U,m[2]=P*-U+O*V,m[3]=I*-U+D*V}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const h=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const h=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,h,m){this._unmodified=!1,this._edgeInsets.interpolate(o,h,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const h=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(o){const h=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const m=this.pointCoordinate(new l.Point(0,0)),_=this.pointCoordinate(new l.Point(this.width,0)),w=this.pointCoordinate(new l.Point(this.width,this.height)),P=this.pointCoordinate(new l.Point(0,this.height)),I=Math.floor(Math.min(m.x,_.x,w.x,P.x)),O=Math.floor(Math.max(m.x,_.x,w.x,P.x)),D=1;for(let U=I-D;U<=O+D;U++)U!==0&&h.push(new l.UnwrappedTileID(U,o))}return h}coveringTiles(o){var h,m;let _=this.coveringZoomLevel(o);const w=_;if(o.minzoom!==void 0&&_<o.minzoom)return[];o.maxzoom!==void 0&&_>o.maxzoom&&(_=o.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),I=l.MercatorCoordinate.fromLngLat(this.center),O=Math.pow(2,_),D=[O*P.x,O*P.y,0],U=[O*I.x,O*I.y,0],V=Ec.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_);let ne=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=_);const fe=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,he=be=>({aabb:new Ki([be*O,0,0],[(be+1)*O,O,0]),zoom:0,x:0,y:0,wrap:be,fullyVisible:!1}),de=[],me=[],Me=_,je=o.reparseOverscaled?w:_;if(this._renderWorldCopies)for(let be=1;be<=3;be++)de.push(he(-be)),de.push(he(be));for(de.push(he(0));de.length>0;){const be=de.pop(),Ue=be.x,Ze=be.y;let Ke=be.fullyVisible;if(!Ke){const Nt=be.aabb.intersects(V);if(Nt===0)continue;Ke=Nt===2}const nt=o.terrain?D:U,ut=be.aabb.distanceX(nt),it=be.aabb.distanceY(nt),Et=Math.max(Math.abs(ut),Math.abs(it));if(be.zoom===Me||Et>fe+(1<<Me-be.zoom)-2&&be.zoom>=ne){const Nt=Me-be.zoom,xn=D[0]-.5-(Ue<<Nt),_t=D[1]-.5-(Ze<<Nt);me.push({tileID:new l.OverscaledTileID(be.zoom===Me?je:be.zoom,be.wrap,be.zoom,Ue,Ze),distanceSq:le([U[0]-.5-Ue,U[1]-.5-Ze]),tileDistanceToCamera:Math.sqrt(xn*xn+_t*_t)})}else for(let Nt=0;Nt<4;Nt++){const xn=(Ue<<1)+Nt%2,_t=(Ze<<1)+(Nt>>1),Xt=be.zoom+1;let Ot=be.aabb.quadrant(Nt);if(o.terrain){const Un=new l.OverscaledTileID(Xt,be.wrap,Xt,xn,_t),Rn=o.terrain.getMinMaxElevation(Un),dn=(h=Rn.minElevation)!==null&&h!==void 0?h:this.elevation,nn=(m=Rn.maxElevation)!==null&&m!==void 0?m:this.elevation;Ot=new Ki([Ot.min[0],Ot.min[1],dn],[Ot.max[0],Ot.max[1],nn])}de.push({aabb:Ot,zoom:Xt,x:xn,y:_t,wrap:be.wrap,fullyVisible:Ke})}}return me.sort((be,Ue)=>be.distanceSq-Ue.distanceSq).map(be=>be.tileID)}resize(o,h){this.width=o,this.height=h,this.pixelsToGLUnits=[2/o,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const h=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(h)*this.worldSize)}unproject(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const h=this.pointLocation(this.centerPoint,o),m=o.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-m))return;const _=this.getCameraPosition(),w=l.MercatorCoordinate.fromLngLat(_.lngLat,_.altitude),P=l.MercatorCoordinate.fromLngLat(h,m),I=w.x-P.x,O=w.y-P.y,D=w.z-P.z,U=Math.sqrt(I*I+O*O+D*D),V=this.scaleZoom(this.cameraToCenterDistance/U/this.tileSize);this._elevation=m,this._center=h,this.zoom=V}setLocationAtPoint(o,h){const m=this.pointCoordinate(h),_=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(o),P=new l.MercatorCoordinate(w.x-(m.x-_.x),w.y-(m.y-_.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,h){return h?this.coordinatePoint(this.locationCoordinate(o),h.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,h){return this.coordinateLocation(this.pointCoordinate(o,h))}locationCoordinate(o){return l.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,h){if(h){const ne=h.pointCoordinate(o);if(ne!=null)return ne}const m=[o.x,o.y,0,1],_=[o.x,o.y,1,1];l.transformMat4(m,m,this.pixelMatrixInverse),l.transformMat4(_,_,this.pixelMatrixInverse);const w=m[3],P=_[3],I=m[1]/w,O=_[1]/P,D=m[2]/w,U=_[2]/P,V=D===U?0:(0-D)/(U-D);return new l.MercatorCoordinate(l.interpolate.number(m[0]/w,_[0]/P,V)/this.worldSize,l.interpolate.number(I,O,V)/this.worldSize)}coordinatePoint(o,h=0,m=this.pixelMatrix){const _=[o.x*this.worldSize,o.y*this.worldSize,h,1];return l.transformMat4(_,_,m),new l.Point(_[0]/_[3],_[1]/_[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new mt().extend(this.pointLocation(new l.Point(0,o))).extend(this.pointLocation(new l.Point(this.width,o))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new mt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,h=!1){const m=o.key,_=h?this._alignedPosMatrixCache:this._posMatrixCache;if(_[m])return _[m];const w=o.canonical,P=this.worldSize/this.zoomScale(w.z),I=w.x+Math.pow(2,w.z)*o.wrap,O=l.identity(new Float64Array(16));return l.translate(O,O,[I*P,w.y*P,0]),l.scale(O,O,[P/l.EXTENT,P/l.EXTENT,1]),l.multiply(O,h?this.alignedProjMatrix:this.projMatrix,O),_[m]=new Float32Array(O),_[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,h,m,_,w=-90,P=90,I=-180,O=180;const D=this.size,U=this._unmodified;if(this.latRange){const fe=this.latRange;w=l.mercatorYfromLat(fe[1])*this.worldSize,P=l.mercatorYfromLat(fe[0])*this.worldSize,o=P-w<D.y?D.y/(P-w):0}if(this.lngRange){const fe=this.lngRange;I=l.wrap(l.mercatorXfromLng(fe[0])*this.worldSize,0,this.worldSize),O=l.wrap(l.mercatorXfromLng(fe[1])*this.worldSize,0,this.worldSize),O<I&&(O+=this.worldSize),h=O-I<D.x?D.x/(O-I):0}const V=this.point,ne=Math.max(h||0,o||0);if(ne)return this.center=this.unproject(new l.Point(h?(O+I)/2:V.x,o?(P+w)/2:V.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const fe=V.y,he=D.y/2;fe-he<w&&(_=w+he),fe+he>P&&(_=P-he)}if(this.lngRange){const fe=(I+O)/2,he=l.wrap(V.x,fe-this.worldSize/2,fe+this.worldSize/2),de=D.x/2;he-de<I&&(m=I+de),he+de>O&&(m=O-de)}m===void 0&&_===void 0||(this.center=this.unproject(new l.Point(m!==void 0?m:V.x,_!==void 0?_:V.y)).wrap()),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,h=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let _=l.identity(new Float64Array(16));l.scale(_,_,[this.width/2,-this.height/2,1]),l.translate(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=l.identity(new Float64Array(16)),l.scale(_,_,[1,-1,1]),l.translate(_,_,[-1,-1,0]),l.scale(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_;const w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this._minEleveationForCurrentTile),I=w-P*this._pixelPerMeter/Math.cos(this._pitch),O=P<0?I:w,D=Math.PI/2+this._pitch,U=this._fov*(.5+o.y/this.height),V=Math.sin(U)*O/Math.sin(l.clamp(Math.PI-D-U,.01,Math.PI-.01)),ne=this.getHorizon(),fe=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+o.y/(2*ne)),he=Math.sin(fe)*O/Math.sin(l.clamp(Math.PI-D-fe,.01,Math.PI-.01)),de=Math.min(V,he),me=1.01*(Math.cos(Math.PI/2-this._pitch)*de+O),Me=this.height/50;_=new Float64Array(16),l.perspective(_,this._fov,this.width/this.height,Me,me),_[8]=2*-o.x/this.width,_[9]=2*o.y/this.height,l.scale(_,_,[1,-1,1]),l.translate(_,_,[0,0,-this.cameraToCenterDistance]),l.rotateX(_,_,this._pitch),l.rotateZ(_,_,this.angle),l.translate(_,_,[-h,-m,0]),this.mercatorMatrix=l.scale([],_,[this.worldSize,this.worldSize,this.worldSize]),l.scale(_,_,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,_),l.translate(_,_,[0,0,-this.elevation]),this.projMatrix=_,this.invProjMatrix=l.invert([],_),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,_);const je=this.width%2/2,be=this.height%2/2,Ue=Math.cos(this.angle),Ze=Math.sin(this.angle),Ke=h-Math.round(h)+Ue*je+Ze*be,nt=m-Math.round(m)+Ue*be+Ze*je,ut=new Float64Array(_);if(l.translate(ut,ut,[Ke>.5?Ke-1:Ke,nt>.5?nt-1:nt,0]),this.alignedProjMatrix=ut,_=l.invert(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new l.Point(0,0)),h=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))}getCameraQueryGeometry(o){const h=this.getCameraPoint();if(o.length===1)return[o[0],h];{let m=h.x,_=h.y,w=h.x,P=h.y;for(const I of o)m=Math.min(m,I.x),_=Math.min(_,I.y),w=Math.max(w,I.x),P=Math.max(P,I.y);return[new l.Point(m,_),new l.Point(w,_),new l.Point(w,P),new l.Point(m,P),new l.Point(m,_)]}}}class _d{constructor(o){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let m;return h.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(m=_)}),(m&&m[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(m=>isNaN(m))){const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:m,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=function(h,m){let _=!1,w=null;const P=()=>{w=null,_&&(h(),w=setTimeout(P,300),_=!1)};return()=>(_=!0,w||P(),w)}(this._updateHashUnthrottled),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const h=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,_=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),P=Math.round(h.lng*w)/w,I=Math.round(h.lat*w)/w,O=this._map.getBearing(),D=this._map.getPitch();let U="";if(U+=o?`/${P}/${I}/${m}`:`${m}/${I}/${P}`,(O||D)&&(U+="/"+Math.round(10*O)/10),D&&(U+=`/${Math.round(D)}`),this._hashName){const V=this._hashName;let ne=!1;const fe=window.location.hash.slice(1).split("&").map(he=>{const de=he.split("=")[0];return de===V?(ne=!0,`${de}=${U}`):he}).filter(he=>he);return ne||fe.push(`${V}=${U}`),`#${fe.join("&")}`}return`#${U}`}}const wu={linearity:.3,easing:l.bezier(0,0,.3,1)},vd=l.extend({deceleration:2500,maxSpeed:1400},wu),xd=l.extend({deceleration:20,maxSpeed:1400},wu),Su=l.extend({deceleration:1e3,maxSpeed:360},wu),Zs=l.extend({deceleration:1e3,maxSpeed:90},wu);class ze{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,h=l.browser.now();for(;o.length>0&&h-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){const w=Ye(h.pan.mag(),m,l.extend({},vd,o||{}));_.offset=h.pan.mult(w.amount/h.pan.mag()),_.center=this._map.transform.center,Qe(_,w)}if(h.zoom){const w=Ye(h.zoom,m,xd);_.zoom=this._map.transform.zoom+w.amount,Qe(_,w)}if(h.bearing){const w=Ye(h.bearing,m,Su);_.bearing=this._map.transform.bearing+l.clamp(w.amount,-179,179),Qe(_,w)}if(h.pitch){const w=Ye(h.pitch,m,Zs);_.pitch=this._map.transform.pitch+w.amount,Qe(_,w)}if(_.zoom||_.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),l.extend(_,{noMoveStart:!0})}}function Qe(v,o){(!v.duration||v.duration<o.duration)&&(v.duration=o.duration,v.easing=o.easing)}function Ye(v,o,h){const{maxSpeed:m,linearity:_,deceleration:w}=h,P=l.clamp(v*_/(o/1e3),-m,m),I=Math.abs(P)/(w*_);return{easing:h.easing,duration:1e3*I,amount:P*(I/2)}}class Tt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m,_={}){const w=b.mousePos(h.getCanvasContainer(),m),P=h.unproject(w);super(o,l.extend({point:w,lngLat:P,originalEvent:m},_)),this._defaultPrevented=!1,this.target=h}}class ln extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m){const _=o==="touchend"?m.changedTouches:m.touches,w=b.touchPos(h.getCanvasContainer(),_),P=w.map(O=>h.unproject(O)),I=w.reduce((O,D,U,V)=>O.add(D.div(V.length)),new l.Point(0,0));super(o,{points:w,point:I,lngLats:P,lngLat:h.unproject(I),originalEvent:m}),this._defaultPrevented=!1}}class tr extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,h,m){super(o,{originalEvent:m}),this._defaultPrevented=!1}}class oi{constructor(o,h){this._map=o,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new tr(o.type,this._map,o))}mousedown(o,h){return this._mousedownPos=h,this._firePreventable(new Tt(o.type,this._map,o))}mouseup(o){this._map.fire(new Tt(o.type,this._map,o))}click(o,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Tt(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Tt(o.type,this._map,o))}mouseover(o){this._map.fire(new Tt(o.type,this._map,o))}mouseout(o){this._map.fire(new Tt(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ln(o.type,this._map,o))}touchmove(o){this._map.fire(new ln(o.type,this._map,o))}touchend(o){this._map.fire(new ln(o.type,this._map,o))}touchcancel(o){this._map.fire(new ln(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Tt(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Tt(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(l.Point.convert(o),this._map.terrain)}}class Cu{constructor(o,h){this._map=o,this._tr=new cs(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,h){this.isEnabled()&&o.shiftKey&&o.button===0&&(b.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(o,h){if(!this._active)return;const m=h;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=m,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const w=Math.min(_.x,m.x),P=Math.max(_.x,m.x),I=Math.min(_.y,m.y),O=Math.max(_.y,m.y);b.setTransform(this._box,`translate(${w}px,${I}px)`),this._box.style.width=P-w+"px",this._box.style.height=O-I+"px"}mouseupWindow(o,h){if(!this._active||o.button!==0)return;const m=this._startPos,_=h;if(this.reset(),b.suppressClick(),m.x!==_.x||m.y!==_.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:w=>w.fitScreenCoordinates(m,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,h){return this._map.fire(new l.Event(o,{originalEvent:h}))}}function qr(v,o){if(v.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${o.length}`);const h={};for(let m=0;m<v.length;m++)h[v[m].identifier]=o[m];return h}class Bt{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,h,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),m.length===this.numTouches&&(this.centroid=function(_){const w=new l.Point(0,0);for(const P of _)w._add(P);return w.div(_.length)}(h),this.touches=qr(m,h)))}touchmove(o,h,m){if(this.aborted||!this.centroid)return;const _=qr(m,h);for(const w in this.touches){const P=_[w];(!P||P.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(o,h,m){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class kc{constructor(o){this.singleTap=new Bt(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,h,m){this.singleTap.touchstart(o,h,m)}touchmove(o,h,m){this.singleTap.touchmove(o,h,m)}touchend(o,h,m){const _=this.singleTap.touchend(o,h,m);if(_){const w=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(_)<30;if(w&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class ma{constructor(o){this._tr=new cs(o),this._zoomIn=new kc({numTouches:1,numTaps:2}),this._zoomOut=new kc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,h,m){this._zoomIn.touchstart(o,h,m),this._zoomOut.touchstart(o,h,m)}touchmove(o,h,m){this._zoomIn.touchmove(o,h,m),this._zoomOut.touchmove(o,h,m)}touchend(o,h,m){const _=this._zoomIn.touchend(o,h,m),w=this._zoomOut.touchend(o,h,m),P=this._tr;return _?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(_)},{originalEvent:o})}):w?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(w)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zo{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const h=this._moveFunction(...o);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(o,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,h){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const _=h.length?h[0]:h;return!this._moved&&_.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(m,_))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&b.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Eu={0:1,2:2};class ht{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const h=b.mouseButton(o);this._eventButton=h}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(h,m){const _=Eu[m];return h.buttons===void 0||(h.buttons&_)!==_}(o,this._eventButton)}isValidEndEvent(o){return b.mouseButton(o)===this._eventButton}}class Ac{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}const Tc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(o){o.preventDefault()}},ku=({enable:v,clickTolerance:o,bearingDegreesPerPixelMoved:h=.8})=>{const m=new ht({checkCorrectEvent:_=>b.mouseButton(_)===0&&_.ctrlKey||b.mouseButton(_)===2});return new zo({clickTolerance:o,move:(_,w)=>({bearingDelta:(w.x-_.x)*h}),moveStateManager:m,enable:v,assignEvents:Tc})},Pc=({enable:v,clickTolerance:o,pitchDegreesPerPixelMoved:h=-.5})=>{const m=new ht({checkCorrectEvent:_=>b.mouseButton(_)===0&&_.ctrlKey||b.mouseButton(_)===2});return new zo({clickTolerance:o,move:(_,w)=>({pitchDelta:(w.y-_.y)*h}),moveStateManager:m,enable:v,assignEvents:Tc})};class bd{constructor(o,h){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,h,m){return this._calculateTransform(o,h,m)}touchmove(o,h,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,h,m)}touchend(o,h,m){this._calculateTransform(o,h,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,h,m){m.length>0&&(this._active=!0);const _=qr(m,h),w=new l.Point(0,0),P=new l.Point(0,0);let I=0;for(const D in _){const U=_[D],V=this._touches[D];V&&(w._add(U),P._add(U.sub(V)),I++,_[D]=U)}if(this._touches=_,I<this._minTouches||!P.mag())return;const O=P.div(I);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ic{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,h,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([h[0],h[1]]))}touchmove(o,h,m){if(!this._firstTwoTouches)return;o.preventDefault();const[_,w]=this._firstTwoTouches,P=Ks(m,h,_),I=Ks(m,h,w);if(!P||!I)return;const O=this._aroundCenter?null:P.add(I).div(2);return this._move([P,I],O,o)}touchend(o,h,m){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,P=Ks(m,h,_),I=Ks(m,h,w);P&&I||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ks(v,o,h){for(let m=0;m<v.length;m++)if(v[m].identifier===h)return o[m]}function Da(v,o){return Math.log(v/o)/Math.LN2}class Ol extends Ic{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,h){const m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Da(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Da(this._distance,m),pinchAround:h}}}function Au(v,o){return 180*v.angleWith(o)/Math.PI}class Fl extends Ic{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,h){const m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Au(this._vector,m),pinchAround:h}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const h=25/(Math.PI*this._minDiameter)*360,m=Au(o,this._startVector);return Math.abs(m)<h}}function Rl(v){return Math.abs(v.y)>Math.abs(v.x)}class Xi extends Ic{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,h,m){super.touchstart(o,h,m),this._currentTouchCount=m.length}_start(o){this._lastPoints=o,Rl(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,h,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const _=o[0].sub(this._lastPoints[0]),w=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,w,m.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(o,h,m){if(this._valid!==void 0)return this._valid;const _=o.mag()>=2,w=h.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=o.y>0==h.y>0;return Rl(o)&&Rl(h)&&P}}const Jo={panStep:100,bearingStep:15,pitchStep:10};class of{constructor(o){this._tr=new cs(o);const h=Jo;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let h=0,m=0,_=0,w=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:o.shiftKey?m=-1:(o.preventDefault(),w=-1);break;case 39:o.shiftKey?m=1:(o.preventDefault(),w=1);break;case 38:o.shiftKey?_=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?_=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,_=0),{cameraAnimation:I=>{const O=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Xs,zoom:h?Math.round(O.zoom)+h*(o.shiftKey?2:1):O.zoom,bearing:O.bearing+m*this._bearingStep,pitch:O.pitch+_*this._pitchStep,offset:[-w*this._panStep,-P*this._panStep],center:O.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xs(v){return v*(2-v)}const ga=4.000244140625;class Dl{constructor(o,h){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=o,this._tr=new cs(o),this._el=o.getCanvasContainer(),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!o[this._map._metaKey])return;o.preventDefault()}let h=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const m=l.browser.now(),_=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,h!==0&&h%ga==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),o.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=o,this._delta-=h,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=b.mousePos(this._el,o),m=this._tr;this._around=l.LngLat.convert(this._aroundCenter?m.center:m.unproject(h)),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>ga?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&O!==0&&(O=1/O);const D=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(D*O))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,m=this._startZoom,_=this._easing;let w,P=!1;if(this._type==="wheel"&&m&&_){const I=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),O=_(I);w=l.interpolate.number(m,h,O),I<1?this._frameId||(this._frameId=!0):P=!0}else w=h,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:w-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let h=l.defaultEasing;if(this._prevEase){const m=this._prevEase,_=(l.browser.now()-m.start)/m.duration,w=m.easing(_+.01)-m.easing(_),P=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-P*P);h=l.bezier(P,I,.25,1)}return this._prevEase={start:l.browser.now(),duration:o,easing:h},h}reset(){this._active=!1}}class wd{constructor(o,h){this._clickZoom=o,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bo{constructor(o){this._tr=new cs(o),this.reset()}reset(){this._active=!1}dblclick(o,h){return o.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sr{constructor(){this._tap=new kc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,h,m){if(!this._swipePoint)if(this._tapTime){const _=h[0],w=o.timeStamp-this._tapTime<500,P=this._tapPoint.dist(_)<30;w&&P?m.length>0&&(this._swipePoint=_,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(o,h,m)}touchmove(o,h,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const _=h[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,o.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(o,h,m)}touchend(o,h,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const _=this._tap.touchend(o,h,m);_&&(this._tapTime=o.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ys{constructor(o,h,m){this._el=o,this._mousePan=h,this._touchPan=m}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zl{constructor(o,h,m){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=h,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Mc{constructor(o,h,m,_){this._el=o,this._touchZoom=h,this._touchRotate=m,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Tu=v=>v.zoom||v.drag||v.pitch||v.rotate;class af extends l.Event{}function sf(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class ya{constructor(o,h){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,w)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},O={},D={},U=_.touches,V=U?this._getMapTouches(U):void 0,ne=V?b.touchPos(this._el,V):b.mousePos(this._el,_);for(const{handlerName:de,handler:me,allowed:Me}of this._handlers){if(!me.isEnabled())continue;let je;this._blockedByActive(D,Me,de)?me.reset():me[w||_.type]&&(je=me[w||_.type](_,ne,V),this.mergeHandlerResult(I,O,je,de,P),je&&je.needsRenderFrame&&this._triggerRenderFrame()),(je||me.isActive())&&(D[de]=me)}const fe={};for(const de in this._previousActiveHandlers)D[de]||(fe[de]=P);this._previousActiveHandlers=D,(Object.keys(fe).length||sf(I))&&(this._changes.push([I,O,fe]),this._triggerRenderFrame()),(Object.keys(D).length||sf(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=I;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ze(o),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,P]of this._listeners)b.addEventListener(_,w,_===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[o,h,m]of this._listeners)b.removeEventListener(o,h,o===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(o){const h=this._map,m=h.getCanvasContainer();this._add("mapEvent",new oi(h,o));const _=h.boxZoom=new Cu(h,o);this._add("boxZoom",_),o.interactive&&o.boxZoom&&_.enable();const w=new ma(h),P=new Bo(h);h.doubleClickZoom=new wd(P,w),this._add("tapZoom",w),this._add("clickZoom",P),o.interactive&&o.doubleClickZoom&&h.doubleClickZoom.enable();const I=new Sr;this._add("tapDragZoom",I);const O=h.touchPitch=new Xi(h);this._add("touchPitch",O),o.interactive&&o.touchPitch&&h.touchPitch.enable(o.touchPitch);const D=ku(o),U=Pc(o);h.dragRotate=new zl(o,D,U),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),o.interactive&&o.dragRotate&&h.dragRotate.enable();const V=(({enable:Me,clickTolerance:je})=>{const be=new ht({checkCorrectEvent:Ue=>b.mouseButton(Ue)===0&&!Ue.ctrlKey});return new zo({clickTolerance:je,move:(Ue,Ze)=>({around:Ze,panDelta:Ze.sub(Ue)}),activateOnStart:!0,moveStateManager:be,enable:Me,assignEvents:Tc})})(o),ne=new bd(o,h);h.dragPan=new Ys(m,V,ne),this._add("mousePan",V),this._add("touchPan",ne,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&h.dragPan.enable(o.dragPan);const fe=new Fl,he=new Ol;h.touchZoomRotate=new Mc(m,he,fe,I),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&h.touchZoomRotate.enable(o.touchZoomRotate);const de=h.scrollZoom=new Dl(h,()=>this._triggerRenderFrame());this._add("scrollZoom",de,["mousePan"]),o.interactive&&o.scrollZoom&&h.scrollZoom.enable(o.scrollZoom);const me=h.keyboard=new of(h);this._add("keyboard",me),o.interactive&&o.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new gr(h))}_add(o,h,m){this._handlers.push({handlerName:o,handler:h,allowed:m}),this._handlersById[o]=h}stop(o){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Tu(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,h,m){for(const _ in o)if(_!==m&&(!h||h.indexOf(_)<0))return!0;return!1}_getMapTouches(o){const h=[];for(const m of o)this._el.contains(m.target)&&h.push(m);return h}mergeHandlerResult(o,h,m,_,w){if(!m)return;l.extend(o,m);const P={handlerName:_,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(h.zoom=P),m.panDelta!==void 0&&(h.drag=P),m.pitchDelta!==void 0&&(h.pitch=P),m.bearingDelta!==void 0&&(h.rotate=P)}_applyChanges(){const o={},h={},m={};for(const[_,w,P]of this._changes)_.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(o.around=_.around),_.pinchAround!==void 0&&(o.pinchAround=_.pinchAround),_.noInertia&&(o.noInertia=_.noInertia),l.extend(h,w),l.extend(m,P);this._updateMapTransform(o,h,m),this._changes=[]}_updateMapTransform(o,h,m){const _=this._map,w=_._getTransformForUpdate(),P=_.terrain;if(!(sf(o)||P&&this._terrainMovement))return this._fireEvents(h,m,!0);let{panDelta:I,zoomDelta:O,bearingDelta:D,pitchDelta:U,around:V,pinchAround:ne}=o;ne!==void 0&&(V=ne),_._stop(!0),V=V||_.transform.centerPoint;const fe=w.pointLocation(I?V.sub(I):V);D&&(w.bearing+=D),U&&(w.pitch+=U),O&&(w.zoom+=O),P?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(I)):w.setLocationAtPoint(fe,V):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(fe,V),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,w.recalculateZoom(_.terrain)})):w.setLocationAtPoint(fe,V),_._applyUpdatedTransform(w),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(h,m,!0)}_fireEvents(o,h,m){const _=Tu(this._eventsInProgress),w=Tu(o),P={};for(const U in o){const{originalEvent:V}=o[U];this._eventsInProgress[U]||(P[`${U}start`]=V),this._eventsInProgress[U]=o[U]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const U in P)this._fireEvent(U,P[U]);w&&this._fireEvent("move",w.originalEvent);for(const U in o){const{originalEvent:V}=o[U];this._fireEvent(U,V)}const I={};let O;for(const U in this._eventsInProgress){const{handlerName:V,originalEvent:ne}=this._eventsInProgress[U];this._handlersById[V].isActive()||(delete this._eventsInProgress[U],O=h[V]||ne,I[`${U}end`]=O)}for(const U in I)this._fireEvent(U,I[U]);const D=Tu(this._eventsInProgress);if(m&&(_||w)&&!D){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;U?(V(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),V(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,h){this._map.fire(new l.Event(o,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new af("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zr extends l.Evented{constructor(o,h){super(),this._renderFrameCallback=()=>{const m=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,h){return this.jumpTo({center:o},h)}panBy(o,h,m){return o=l.Point.convert(o).mult(-1),this.panTo(this.transform.center,l.extend({offset:o},h),m)}panTo(o,h,m){return this.easeTo(l.extend({center:o},h),m)}getZoom(){return this.transform.zoom}setZoom(o,h){return this.jumpTo({zoom:o},h),this}zoomTo(o,h,m){return this.easeTo(l.extend({zoom:o},h),m)}zoomIn(o,h){return this.zoomTo(this.getZoom()+1,o,h),this}zoomOut(o,h){return this.zoomTo(this.getZoom()-1,o,h),this}getBearing(){return this.transform.bearing}setBearing(o,h){return this.jumpTo({bearing:o},h),this}getPadding(){return this.transform.padding}setPadding(o,h){return this.jumpTo({padding:o},h),this}rotateTo(o,h,m){return this.easeTo(l.extend({bearing:o},h),m)}resetNorth(o,h){return this.rotateTo(0,l.extend({duration:1e3},o),h),this}resetNorthPitch(o,h){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},o),h),this}snapToNorth(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this}getPitch(){return this.transform.pitch}setPitch(o,h){return this.jumpTo({pitch:o},h),this}cameraForBounds(o,h){o=mt.convert(o);const m=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,h)}_cameraForBoxAndBearing(o,h,m,_){const w={top:0,bottom:0,right:0,left:0};if(typeof(_=l.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const Ze=_.padding;_.padding={top:Ze,bottom:Ze,right:Ze,left:Ze}}_.padding=l.extend(w,_.padding);const P=this.transform,I=P.padding,O=P.project(l.LngLat.convert(o)),D=P.project(l.LngLat.convert(h)),U=O.rotate(-m*Math.PI/180),V=D.rotate(-m*Math.PI/180),ne=new l.Point(Math.max(U.x,V.x),Math.max(U.y,V.y)),fe=new l.Point(Math.min(U.x,V.x),Math.min(U.y,V.y)),he=ne.sub(fe),de=(P.width-(I.left+I.right+_.padding.left+_.padding.right))/he.x,me=(P.height-(I.top+I.bottom+_.padding.top+_.padding.bottom))/he.y;if(me<0||de<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Me=Math.min(P.scaleZoom(P.scale*Math.min(de,me)),_.maxZoom),je=l.Point.convert(_.offset),be=new l.Point((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(m*Math.PI/180),Ue=je.add(be).mult(P.scale/P.zoomScale(Me));return{center:P.unproject(O.add(D).div(2).sub(Ue)),zoom:Me,bearing:m}}fitBounds(o,h,m){return this._fitInternal(this.cameraForBounds(o,h),h,m)}fitScreenCoordinates(o,h,m,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(o)),this.transform.pointLocation(l.Point.convert(h)),m,_),_,w)}_fitInternal(o,h,m){return o?(delete(h=l.extend(o,h)).padding,h.linear?this.easeTo(h,m):this.flyTo(h,m)):this}jumpTo(o,h){this.stop();const m=this._getTransformForUpdate();let _=!1,w=!1,P=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(_=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=l.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(w=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(P=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this._applyUpdatedTransform(m),this.fire(new l.Event("movestart",h)).fire(new l.Event("move",h)),_&&this.fire(new l.Event("zoomstart",h)).fire(new l.Event("zoom",h)).fire(new l.Event("zoomend",h)),w&&this.fire(new l.Event("rotatestart",h)).fire(new l.Event("rotate",h)).fire(new l.Event("rotateend",h)),P&&this.fire(new l.Event("pitchstart",h)).fire(new l.Event("pitch",h)).fire(new l.Event("pitchend",h)),this.fire(new l.Event("moveend",h))}calculateCameraOptionsFromTo(o,h,m,_=0){const w=l.MercatorCoordinate.fromLngLat(o,h),P=l.MercatorCoordinate.fromLngLat(m,_),I=P.x-w.x,O=P.y-w.y,D=P.z-w.z,U=Math.hypot(I,O,D);if(U===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(I,O),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/U/this.transform.tileSize),fe=180*Math.atan2(I,-O)/Math.PI;let he=180*Math.acos(V/U)/Math.PI;return he=D<0?90-he:90+he,{center:P.toLngLat(),zoom:ne,pitch:he,bearing:fe}}easeTo(o,h){this._stop(!1,o.easeId),((o=l.extend({offset:[0,0],duration:500,easing:l.defaultEasing},o)).animate===!1||!o.essential&&l.browser.prefersReducedMotion)&&(o.duration=0);const m=this._getTransformForUpdate(),_=this.getZoom(),w=this.getBearing(),P=this.getPitch(),I=this.getPadding(),O="zoom"in o?+o.zoom:_,D="bearing"in o?this._normalizeBearing(o.bearing,w):w,U="pitch"in o?+o.pitch:P,V="padding"in o?o.padding:m.padding,ne=l.Point.convert(o.offset);let fe=m.centerPoint.add(ne);const he=m.pointLocation(fe),de=l.LngLat.convert(o.center||he);this._normalizeCenter(de);const me=m.project(he),Me=m.project(de).sub(me),je=m.zoomScale(O-_);let be,Ue;o.around&&(be=l.LngLat.convert(o.around),Ue=m.locationPoint(be));const Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==_,this._rotating=this._rotating||w!==D,this._pitching=this._pitching||U!==P,this._padding=!m.isPaddingEqual(V),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,Ze),this.terrain&&this._prepareElevation(de),this._ease(Ke=>{if(this._zooming&&(m.zoom=l.interpolate.number(_,O,Ke)),this._rotating&&(m.bearing=l.interpolate.number(w,D,Ke)),this._pitching&&(m.pitch=l.interpolate.number(P,U,Ke)),this._padding&&(m.interpolatePadding(I,V,Ke),fe=m.centerPoint.add(ne)),this.terrain&&!o.freezeElevation&&this._updateElevation(Ke),be)m.setLocationAtPoint(be,Ue);else{const nt=m.zoomScale(m.zoom-_),ut=O>_?Math.min(2,je):Math.max(.5,je),it=Math.pow(ut,1-Ke),Et=m.unproject(me.add(Me.mult(Ke*it)).mult(nt));m.setLocationAtPoint(m.renderWorldCopies?Et.wrap():Et,fe)}this._applyUpdatedTransform(m),this._fireMoveEvents(h)},Ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,Ke)},o),this}_prepareEase(o,h,m={}){this._moving=!0,h||m.moving||this.fire(new l.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new l.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new l.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new l.Event("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&h!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(m-(h-(m*o+this._elevationStart))/(1-o)),this._elevationTarget=h}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;const h=o.clone(),{center:m,zoom:_,pitch:w,bearing:P,elevation:I}=this.transformCameraUpdate(h);m&&(h.center=m),_!==void 0&&(h.zoom=_),w!==void 0&&(h.pitch=w),P!==void 0&&(h.bearing=P),I!==void 0&&(h.elevation=I),this.transform.apply(h)}_fireMoveEvents(o){this.fire(new l.Event("move",o)),this._zooming&&this.fire(new l.Event("zoom",o)),this._rotating&&this.fire(new l.Event("rotate",o)),this._pitching&&this.fire(new l.Event("pitch",o))}_afterEase(o,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const m=this._zooming,_=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new l.Event("zoomend",o)),_&&this.fire(new l.Event("rotateend",o)),w&&this.fire(new l.Event("pitchend",o)),this.fire(new l.Event("moveend",o))}flyTo(o,h){if(!o.essential&&l.browser.prefersReducedMotion){const Ot=l.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ot,h)}this.stop(),o=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.defaultEasing},o);const m=this._getTransformForUpdate(),_=this.getZoom(),w=this.getBearing(),P=this.getPitch(),I=this.getPadding(),O="zoom"in o?l.clamp(+o.zoom,m.minZoom,m.maxZoom):_,D="bearing"in o?this._normalizeBearing(o.bearing,w):w,U="pitch"in o?+o.pitch:P,V="padding"in o?o.padding:m.padding,ne=m.zoomScale(O-_),fe=l.Point.convert(o.offset);let he=m.centerPoint.add(fe);const de=m.pointLocation(he),me=l.LngLat.convert(o.center||de);this._normalizeCenter(me);const Me=m.project(de),je=m.project(me).sub(Me);let be=o.curve;const Ue=Math.max(m.width,m.height),Ze=Ue/ne,Ke=je.mag();if("minZoom"in o){const Ot=l.clamp(Math.min(o.minZoom,_,O),m.minZoom,m.maxZoom),Un=Ue/m.zoomScale(Ot-_);be=Math.sqrt(Un/Ke*2)}const nt=be*be;function ut(Ot){const Un=(Ze*Ze-Ue*Ue+(Ot?-1:1)*nt*nt*Ke*Ke)/(2*(Ot?Ze:Ue)*nt*Ke);return Math.log(Math.sqrt(Un*Un+1)-Un)}function it(Ot){return(Math.exp(Ot)-Math.exp(-Ot))/2}function Et(Ot){return(Math.exp(Ot)+Math.exp(-Ot))/2}const Nt=ut(!1);let xn=function(Ot){return Et(Nt)/Et(Nt+be*Ot)},_t=function(Ot){return Ue*((Et(Nt)*(it(Un=Nt+be*Ot)/Et(Un))-it(Nt))/nt)/Ke;var Un},Xt=(ut(!0)-Nt)/be;if(Math.abs(Ke)<1e-6||!isFinite(Xt)){if(Math.abs(Ue-Ze)<1e-6)return this.easeTo(o,h);const Ot=Ze<Ue?-1:1;Xt=Math.abs(Math.log(Ze/Ue))/be,_t=function(){return 0},xn=function(Un){return Math.exp(Ot*be*Un)}}return o.duration="duration"in o?+o.duration:1e3*Xt/("screenSpeed"in o?+o.screenSpeed/be:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=w!==D,this._pitching=U!==P,this._padding=!m.isPaddingEqual(V),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(me),this._ease(Ot=>{const Un=Ot*Xt,Rn=1/xn(Un);m.zoom=Ot===1?O:_+m.scaleZoom(Rn),this._rotating&&(m.bearing=l.interpolate.number(w,D,Ot)),this._pitching&&(m.pitch=l.interpolate.number(P,U,Ot)),this._padding&&(m.interpolatePadding(I,V,Ot),he=m.centerPoint.add(fe)),this.terrain&&!o.freezeElevation&&this._updateElevation(Ot);const dn=Ot===1?me:m.unproject(Me.add(je.mult(_t(Un))).mult(Rn));m.setLocationAtPoint(m.renderWorldCopies?dn.wrap():dn,he),this._applyUpdatedTransform(m),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,h)}if(!o){const m=this.handlers;m&&m.stop(!1)}return this}_ease(o,h,m){m.animate===!1||m.duration===0?(o(1),h()):(this._easeStart=l.browser.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,h){o=l.wrap(o,-180,180);const m=Math.abs(o-h);return Math.abs(o-360-h)<m&&(o-=360),Math.abs(o+360-h)<m&&(o+=360),o}_normalizeCenter(o){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const m=o.lng-h.center.lng;o.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(l.LngLat.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}class Lt{constructor(o={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,h){const m=this._map._getUIString(`AttributionControl.${h}`);o.title=m,o.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const h=this._map.style.sourceCaches;for(const _ in h){const w=h[_];if(w.used||w.usedForTerrain){const P=w.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o=o.filter(_=>String(_).trim()),o.sort((_,w)=>_.length-w.length),o=o.filter((_,w)=>{for(let P=w+1;P<o.length;P++)if(o[P].indexOf(_)>=0)return!1;return!0});const m=o.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,o.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class en{constructor(o={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const m=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const h=b.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const h=++this._id;return this._queue.push({callback:o,id:h,cancelled:!1}),h}remove(o){const h=this._currentlyRunning,m=h?this._queue.concat(h):this._queue;for(const _ of m)if(_.id===o)return void(_.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const m of h)if(!m.cancelled&&(m.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Oc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var lf=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Mi extends l.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,h){this.sourceCache.update(o,h),this._renderableTilesKeys=[];const m={};for(const _ of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))m[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[_.key]=new Mo(_,this.tileSize));for(const _ in this._tiles)m[_]||delete this._tiles[_]}freeRtt(o){for(const h in this._tiles){const m=this._tiles[h];(!o||m.tileID.equals(o)||m.tileID.isChildOf(o)||o.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const h={};for(const m of this._renderableTilesKeys){const _=this._tiles[m].tileID;if(_.canonical.equals(o.canonical)){const w=o.clone();w.posMatrix=new Float64Array(16),l.ortho(w.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),h[m]=w}else if(_.canonical.isChildOf(o.canonical)){const w=o.clone();w.posMatrix=new Float64Array(16);const P=_.canonical.z-o.canonical.z,I=_.canonical.x-(_.canonical.x>>P<<P),O=_.canonical.y-(_.canonical.y>>P<<P),D=l.EXTENT>>P;l.ortho(w.posMatrix,0,D,0,D,0,1),l.translate(w.posMatrix,w.posMatrix,[-I*D,-O*D,0]),h[m]=w}else if(o.canonical.isChildOf(_.canonical)){const w=o.clone();w.posMatrix=new Float64Array(16);const P=o.canonical.z-_.canonical.z,I=o.canonical.x-(o.canonical.x>>P<<P),O=o.canonical.y-(o.canonical.y>>P<<P),D=l.EXTENT>>P;l.ortho(w.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(w.posMatrix,w.posMatrix,[I*D,O*D,0]),l.scale(w.posMatrix,w.posMatrix,[1/2**P,1/2**P,0]),h[m]=w}}return h}getSourceTile(o,h){const m=this.sourceCache._source;let _=o.overscaledZ-this.deltaZoom;if(_>m.maxzoom&&(_=m.maxzoom),_<m.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(_).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!w||!w.dem)&&h)for(;_>=m.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(o.scaledTo(_--).key);return w}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=o)}}class Bl{constructor(o,h,m){this.painter=o,this.sourceCache=new Mi(h),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,h,m,_=l.EXTENT){var w;if(!(h>=0&&h<_&&m>=0&&m<_))return 0;const P=this.getTerrainData(o),I=(w=P.tile)===null||w===void 0?void 0:w.dem;if(!I)return 0;const O=function(he,de,me){var Me=de[0],je=de[1];return he[0]=me[0]*Me+me[4]*je+me[12],he[1]=me[1]*Me+me[5]*je+me[13],he}([],[h/_*l.EXTENT,m/_*l.EXTENT],P.u_terrain_matrix),D=[O[0]*I.dim,O[1]*I.dim],U=Math.floor(D[0]),V=Math.floor(D[1]),ne=D[0]-U,fe=D[1]-V;return I.get(U,V)*(1-ne)*(1-fe)+I.get(U+1,V)*ne*(1-fe)+I.get(U,V+1)*(1-ne)*fe+I.get(U+1,V+1)*ne*fe}getElevationForLngLatZoom(o,h){const{tileID:m,mercatorX:_,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(o,h);return this.getElevation(m,_%l.EXTENT,w%l.EXTENT,l.EXTENT)}getElevation(o,h,m,_=l.EXTENT){return this.getDEMElevation(o,h,m,_)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const _=this.painter.context,w=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Oe(_,w,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Oe(_,new l.RGBAImage({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const h=this.sourceCache.getSourceTile(o,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const _=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new Oe(_,h.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),h.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const m=h&&h+h.tileID.key+o.key;if(m&&!this._demMatrixCache[m]){const _=this.sourceCache.sourceCache._source.maxzoom;let w=o.canonical.z-h.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=_?w=o.canonical.z-_:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=o.canonical.x-(o.canonical.x>>w<<w),I=o.canonical.y-(o.canonical.y>>w<<w),O=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<w),1/(l.EXTENT<<w),0]);l.translate(O,O,[P*l.EXTENT,I*l.EXTENT,0]),this._demMatrixCache[o.key]={matrix:O,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(o){const h=this.painter,m=h.width/devicePixelRatio,_=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Oe(h.context,{width:m,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Oe(h.context,{width:m,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(m,_,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,m,_))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,P=0;w<this._coordsTextureSize;w++)for(let I=0;I<this._coordsTextureSize;I++,P+=4)h[P+0]=255&I,h[P+1]=255&w,h[P+2]=I>>8<<4|w>>8,h[P+3]=0;const m=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),_=new Oe(o,m,o.gl.RGBA,{premultiply:!1});return _.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(o){const h=new Uint8Array(4),m=this.painter.context,_=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),m.bindFramebuffer.set(null);const w=h[0]+(h[2]>>4<<8),P=h[1]+((15&h[2])<<8),I=this.coordsIndex[255-h[3]],O=I&&this.sourceCache.getTileByID(I);if(!O)return null;const D=this._coordsTextureSize,U=(1<<O.tileID.canonical.z)*D;return new l.MercatorCoordinate((O.tileID.canonical.x*D+w)/U,(O.tileID.canonical.y*D+P)/U,this.getElevation(O.tileID,w,P,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.painter.context,h=new l.Pos3dArray,m=new l.TriangleIndexArray,_=this.meshSize,w=l.EXTENT/_,P=_*_;for(let V=0;V<=_;V++)for(let ne=0;ne<=_;ne++)h.emplaceBack(ne*w,V*w,0);for(let V=0;V<P;V+=_+1)for(let ne=0;ne<_;ne++)m.emplaceBack(ne+V,_+ne+V+1,_+ne+V+2),m.emplaceBack(ne+V,_+ne+V+2,ne+V+1);const I=h.length,O=I+2*(_+1);for(const V of[0,1])for(let ne=0;ne<=_;ne++)for(const fe of[0,1])h.emplaceBack(ne*w,V*l.EXTENT,fe);for(let V=0;V<2*_;V+=2)m.emplaceBack(O+V,O+V+1,O+V+3),m.emplaceBack(O+V,O+V+3,O+V+2),m.emplaceBack(I+V,I+V+3,I+V+1),m.emplaceBack(I+V,I+V+2,I+V+3);const D=h.length,U=D+2*(_+1);for(const V of[0,1])for(let ne=0;ne<=_;ne++)for(const fe of[0,1])h.emplaceBack(V*l.EXTENT,ne*w,fe);for(let V=0;V<2*_;V+=2)m.emplaceBack(D+V,D+V+1,D+V+3),m.emplaceBack(D+V,D+V+3,D+V+2),m.emplaceBack(U+V,U+V+3,U+V+1),m.emplaceBack(U+V,U+V+2,U+V+3);return this._mesh={indexBuffer:o.createIndexBuffer(m),vertexBuffer:o.createVertexBuffer(h,lf.members),segments:l.SegmentVector.simpleSegment(0,0,h.length,m.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*l.earthRadius/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,h){var m;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(o,h);return(m=this.getMinMaxElevation(_).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(o){const h=this.getTerrainData(o).tile,m={minElevation:null,maxElevation:null};return h&&h.dem&&(m.minElevation=h.dem.min*this.exaggeration,m.maxElevation=h.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(o,h){const m=l.MercatorCoordinate.fromLngLat(o.wrap()),_=(1<<h)*l.EXTENT,w=m.x*_,P=m.y*_,I=Math.floor(w/l.EXTENT),O=Math.floor(P/l.EXTENT);return{tileID:new l.OverscaledTileID(h,0,h,I,O),mercatorX:w,mercatorY:P}}}class $o{constructor(o,h,m){this._context=o,this._size=h,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new Oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(m.texture),{id:o,fbo:h,texture:m,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>o.id!==h),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Qo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class hs{constructor(o,h){this.painter=o,this.terrain=h,this.pool=new $o(o.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(m=>!o._layers[m].isHidden(h)),this._coordsDescendingInv={};for(const m in o.sourceCaches){this._coordsDescendingInv[m]={};const _=o.sourceCaches[m].getVisibleCoordinates();for(const w of _){const P=this.terrain.sourceCache.getTerrainCoords(w);for(const I in P)this._coordsDescendingInv[m][I]||(this._coordsDescendingInv[m][I]=[]),this._coordsDescendingInv[m][I].push(P[I])}}this._coordsDescendingInvStr={};for(const m of o._order){const _=o._layers[m],w=_.source;if(Qo[_.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(const P in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][P]=this._coordsDescendingInv[w][P].map(I=>I.key).sort().join()}}for(const m of this._renderableTiles)for(const _ in this._coordsDescendingInvStr){const w=this._coordsDescendingInvStr[_][m.tileID.key];w&&w!==m.rttCoords[_]&&(m.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;const h=o.type,m=this.painter,_=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Qo[h]&&(this._prevType&&Qo[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(o.id),!_))return!0;if(Qo[this._prevType]||Qo[h]&&_){this._prevType=h;const w=this._stacks.length-1,P=this._stacks[w]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(rf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[w]){const D=this.pool.getObjectForId(I.rtt[w].id);if(D.stamp===I.rtt[w].stamp){this.pool.useObject(D);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),I.rtt[w]={id:O.id,stamp:O.stamp},m.context.bindFramebuffer.set(O.fbo.framebuffer),m.context.clear({color:l.Color.transparent,stencil:0}),m.currentStencilSource=void 0;for(let D=0;D<P.length;D++){const U=m.style._layers[P[D]],V=U.source?this._coordsDescendingInv[U.source][I.tileID.key]:[I.tileID];m.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),m._renderTileClippingMasks(U,V),m.renderLayer(m,m.style.sourceCaches[U.source],U,V),U.source&&(I.rttCoords[U.source]=this._coordsDescendingInvStr[U.source][I.tileID.key])}}return rf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Qo[h]}return!1}}const vr=x,Or={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},fs=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Pu={showCompass:!0,showZoom:!0,visualizePitch:!1};class Fc{constructor(o,h,m=!1){this.mousedown=P=>{this.startMouse(l.extend({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),b.mousePos(this.element,P)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,b.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const _=o.dragRotate._mouseRotate.getClickTolerance(),w=o.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=ku({clickTolerance:_,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:I,bearingDegreesPerPixelMoved:O=.8})=>{const D=new Ac;return new zo({clickTolerance:I,move:(U,V)=>({bearingDelta:(V.x-U.x)*O}),moveStateManager:D,enable:P,assignEvents:fs})})({clickTolerance:_,enable:!0}),this.map=o,m&&(this.mousePitch=Pc({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:I,pitchDegreesPerPixelMoved:O=-.5})=>{const D=new Ac;return new zo({clickTolerance:I,move:(U,V)=>({pitchDelta:(V.y-U.y)*O}),moveStateManager:D,enable:P,assignEvents:fs})})({clickTolerance:w,enable:!0})),b.addEventListener(h,"mousedown",this.mousedown),b.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(h,"touchcancel",this.reset)}startMouse(o,h){this.mouseRotate.dragStart(o,h),this.mousePitch&&this.mousePitch.dragStart(o,h),b.disableDrag()}startTouch(o,h){this.touchRotate.dragStart(o,h),this.touchPitch&&this.touchPitch.dragStart(o,h),b.disableDrag()}moveMouse(o,h){const m=this.map,{bearingDelta:_}=this.mouseRotate.dragMove(o,h)||{};if(_&&m.setBearing(m.getBearing()+_),this.mousePitch){const{pitchDelta:w}=this.mousePitch.dragMove(o,h)||{};w&&m.setPitch(m.getPitch()+w)}}moveTouch(o,h){const m=this.map,{bearingDelta:_}=this.touchRotate.dragMove(o,h)||{};if(_&&m.setBearing(m.getBearing()+_),this.touchPitch){const{pitchDelta:w}=this.touchPitch.dragMove(o,h)||{};w&&m.setPitch(m.getPitch()+w)}}off(){const o=this.element;b.removeEventListener(o,"mousedown",this.mousedown),b.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let _a;function Rc(v,o,h){if(v=new l.LngLat(v.lng,v.lat),o){const m=new l.LngLat(v.lng-360,v.lat),_=new l.LngLat(v.lng+360,v.lat),w=h.locationPoint(v).distSqr(o);h.locationPoint(m).distSqr(o)<w?v=m:h.locationPoint(_).distSqr(o)<w&&(v=_)}for(;Math.abs(v.lng-h.center.lng)>180;){const m=h.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=h.width&&m.y<=h.height)break;v.lng>h.center.lng?v.lng-=360:v.lng+=360}return v}const Iu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function za(v,o,h){const m=v.classList;for(const _ in Iu)m.remove(`maplibregl-${h}-anchor-${_}`);m.add(`maplibregl-${h}-anchor-${o}`)}class Ba extends l.Evented{constructor(o){if(super(),this._onKeyPress=h=>{const m=h.code,_=h.charCode||h.keyCode;m!=="Space"&&m!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=h=>{const m=h.originalEvent.target,_=this._element;this._popup&&(m===_||_.contains(m))&&this.togglePopup()},this._update=h=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Rc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Iu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const w=this._map.unproject(this._pos),P=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=w.distanceTo(this._lngLat)>20*P?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=h=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=l.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const h=b.createNS("http://www.w3.org/2000/svg","svg"),m=41,_=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${m}px`),h.setAttributeNS(null,"width",`${_}px`),h.setAttributeNS(null,"viewBox",`0 0 ${_} ${m}`);const w=b.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const P=b.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const I=b.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Me of O){const je=b.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",Me.rx),je.setAttributeNS(null,"ry",Me.ry),I.appendChild(je)}const D=b.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const U=b.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(U);const V=b.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"opacity","0.25"),V.setAttributeNS(null,"fill","#000000");const ne=b.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),V.appendChild(ne);const fe=b.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const he=b.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=b.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const me=b.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),he.appendChild(de),he.appendChild(me),P.appendChild(I),P.appendChild(D),P.appendChild(V),P.appendChild(fe),P.appendChild(he),h.appendChild(P),h.setAttributeNS(null,"height",m*this._scale+"px"),h.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(h),this._offset=l.Point.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),za(this._element,this._anchor,"marker"),o&&o.className)for(const h of o.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(o){return this._offset=l.Point.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Dc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ie=0,No=!1;const $l={maxWidth:100,unit:"metric"};function Yi(v,o,h){const m=h&&h.maxWidth||100,_=v._container.clientHeight/2,w=v.unproject([0,_]),P=v.unproject([m,_]),I=w.distanceTo(P);if(h&&h.unit==="imperial"){const O=3.2808*I;O>5280?Sn(o,m,O/5280,v._getUIString("ScaleControl.Miles")):Sn(o,m,O,v._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Sn(o,m,I/1852,v._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Sn(o,m,I/1e3,v._getUIString("ScaleControl.Kilometers")):Sn(o,m,I,v._getUIString("ScaleControl.Meters"))}function Sn(v,o,h,m){const _=function(w){const P=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/P;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(O){const D=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*D)/D}(I),P*I}(h);v.style.width=o*(_/h)+"px",v.innerHTML=`${_}&nbsp;${m}`}const uf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bc(v){if(v){if(typeof v=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(v,2)));return{center:new l.Point(0,0),top:new l.Point(0,v),"top-left":new l.Point(o,o),"top-right":new l.Point(-o,o),bottom:new l.Point(0,-v),"bottom-left":new l.Point(o,-o),"bottom-right":new l.Point(-o,-o),left:new l.Point(v,0),right:new l.Point(-v,0)}}if(v instanceof l.Point||Array.isArray(v)){const o=l.Point.convert(v);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:l.Point.convert(v.center||[0,0]),top:l.Point.convert(v.top||[0,0]),"top-left":l.Point.convert(v["top-left"]||[0,0]),"top-right":l.Point.convert(v["top-right"]||[0,0]),bottom:l.Point.convert(v.bottom||[0,0]),"bottom-left":l.Point.convert(v["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(v["bottom-right"]||[0,0]),left:l.Point.convert(v.left||[0,0]),right:l.Point.convert(v.right||[0,0])}}return Bc(new l.Point(0,0))}const $a={extend:(v,...o)=>l.extend(v,...o),run(v){v()},logToElement(v,o=!1,h="log"){const m=window.document.getElementById(h);m&&(o&&(m.innerHTML=""),m.innerHTML+=`<br>${v}`)}},$c=x;class Zn{static get version(){return $c}static get workerCount(){return ti.workerCount}static set workerCount(o){ti.workerCount=o}static get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(o){l.config.MAX_PARALLEL_IMAGE_REQUESTS=o}static get workerUrl(){return l.config.WORKER_URL}static set workerUrl(o){l.config.WORKER_URL=o}static addProtocol(o,h){l.config.REGISTERED_PROTOCOLS[o]=h}static removeProtocol(o){delete l.config.REGISTERED_PROTOCOLS[o]}}return Zn.Map=class extends zr{constructor(v){if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(v=l.extend({},Or,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new bu(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._cooperativeGesturesOnWheel=o=>{this._onCooperativeGesture(o,o[this._metaKey],1)},this._contextLost=o=>{o.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new Lc,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Oc,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;this._resizeObserver=new ResizeObserver(h=>{o?this._trackResize&&this.resize(h)._update():o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ya(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new _d(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,l.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Lt({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new en,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new l.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new l.Event(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new l.Event("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(v,o){if(o===void 0&&(o=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=v.onAdd(this);this._controls.push(v);const m=this._controlPositions[o];return o.indexOf("bottom")!==-1?m.insertBefore(h,m.firstChild):m.appendChild(h),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(v);return o>-1&&this._controls.splice(o,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,o,h,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,o,h,m)}resize(v){var o;const h=this._containerDimensions(),m=h[0],_=h[1],w=this._getClampedPixelRatio(m,_);if(this._resizeCanvas(m,_,w),this.painter.resize(m,_,w),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const O=this._getClampedPixelRatio(m,_);this._resizeCanvas(m,_,O),this.painter.resize(m,_,O)}this.transform.resize(m,_),(o=this._requestedCameraState)===null||o===void 0||o.resize(m,_);const P=!this._moving;return P&&(this.stop(),this.fire(new l.Event("movestart",v)).fire(new l.Event("move",v))),this.fire(new l.Event("resize",v)),P&&this.fire(new l.Event("moveend",v)),this}_getClampedPixelRatio(v,o){const{0:h,1:m}=this._maxCanvasSize,_=this.getPixelRatio(),w=v*_,P=o*_;return Math.min(w>h?h/w:1,P>m?m/P:1)*_}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(mt.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(l.LngLat.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(l.Point.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,o,h){if(v==="mouseenter"||v==="mouseover"){let m=!1;return{layer:o,listener:h,delegates:{mousemove:w=>{const P=this.getLayer(o)?this.queryRenderedFeatures(w.point,{layers:[o]}):[];P.length?m||(m=!0,h.call(this,new Tt(v,this,w.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(v==="mouseleave"||v==="mouseout"){let m=!1;return{layer:o,listener:h,delegates:{mousemove:P=>{(this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[]).length?m=!0:m&&(m=!1,h.call(this,new Tt(v,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,h.call(this,new Tt(v,this,P.originalEvent)))}}}}{const m=_=>{const w=this.getLayer(o)?this.queryRenderedFeatures(_.point,{layers:[o]}):[];w.length&&(_.features=w,h.call(this,_),delete _.features)};return{layer:o,listener:h,delegates:{[v]:m}}}}on(v,o,h){if(h===void 0)return super.on(v,o);const m=this._createDelegatedListener(v,o,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(m);for(const _ in m.delegates)this.on(_,m.delegates[_]);return this}once(v,o,h){if(h===void 0)return super.once(v,o);const m=this._createDelegatedListener(v,o,h);for(const _ in m.delegates)this.once(_,m.delegates[_]);return this}off(v,o,h){return h===void 0?super.off(v,o):(this._delegatedListeners&&this._delegatedListeners[v]&&(m=>{const _=this._delegatedListeners[v];for(let w=0;w<_.length;w++){const P=_[w];if(P.layer===o&&P.listener===h){for(const I in P.delegates)this.off(I,P.delegates[I]);return _.splice(w,1),this}}})(),this)}queryRenderedFeatures(v,o){if(!this.style)return[];let h;const m=v instanceof l.Point||Array.isArray(v),_=m?v:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(m?{}:v)||{},_ instanceof l.Point||typeof _[0]=="number")h=[l.Point.convert(_)];else{const w=l.Point.convert(_[0]),P=l.Point.convert(_[1]);h=[w,new l.Point(P.x,w.y),P,new l.Point(w.x,P.y),w]}return this.style.queryRenderedFeatures(h,o,this.transform)}querySourceFeatures(v,o){return this.style.querySourceFeatures(v,o)}setStyle(v,o){return(o=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(v,o))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const o=this._locale[v];if(o==null)throw new Error(`Missing UI string '${v}'`);return o}_updateStyle(v,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,o));const h=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Bs(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,o,h):this.style.loadJSON(v,o,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,o){if(typeof v=="string"){const h=this._requestManager.transformRequest(v,R.Style);l.getJSON(h,(m,_)=>{m?this.fire(new l.ErrorEvent(m)):_&&this._updateDiff(_,o)})}else typeof v=="object"&&this._updateDiff(v,o)}_updateDiff(v,o){try{this.style.setState(v,o)&&this._update(!0)}catch(h){l.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(v,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(v,o){return this._lazyInitEmptyStyle(),this.style.addSource(v,o),this._update(!0)}isSourceLoaded(v){const o=this.style&&this.style.sourceCaches[v];if(o!==void 0)return o.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const o=this.style.sourceCaches[v.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const h in this.style._layers){const m=this.style._layers[h];m.type==="hillshade"&&m.source===v.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bl(this.painter,o,v),this.painter.renderToTexture=new hs(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==v.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.Event("terrain",{terrain:v})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const o in v){const h=v[o]._tiles;for(const m in h){const _=h[m];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(v,o,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,o,h)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,o,h={}){const{pixelRatio:m=1,sdf:_=!1,stretchX:w,stretchY:P,content:I}=h;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||l.isImageBitmap(o))){if(o.width===void 0||o.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:D,data:U}=o,V=o;return this.style.addImage(v,{data:new l.RGBAImage({width:O,height:D},new Uint8Array(U)),pixelRatio:m,stretchX:w,stretchY:P,content:I,sdf:_,version:0,userImage:V}),V.onAdd&&V.onAdd(this,v),this}}{const{width:O,height:D,data:U}=l.browser.getImageData(o);this.style.addImage(v,{data:new l.RGBAImage({width:O,height:D},U),pixelRatio:m,stretchX:w,stretchY:P,content:I,sdf:_,version:0})}}updateImage(v,o){const h=this.style.getImage(v);if(!h)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=o instanceof HTMLImageElement||l.isImageBitmap(o)?l.browser.getImageData(o):o,{width:_,height:w,data:P}=m;if(_===void 0||w===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||w!==h.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(o instanceof HTMLImageElement||l.isImageBitmap(o));return h.data.replace(P,I),this.style.updateImage(v,h),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,o){Z.getImage(this._requestManager.transformRequest(v,R.Image),o)}listImages(){return this.style.listImages()}addLayer(v,o){return this._lazyInitEmptyStyle(),this.style.addLayer(v,o),this._update(!0)}moveLayer(v,o){return this.style.moveLayer(v,o),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,o,h){return this.style.setLayerZoomRange(v,o,h),this._update(!0)}setFilter(v,o,h={}){return this.style.setFilter(v,o,h),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,o,h,m={}){return this.style.setPaintProperty(v,o,h,m),this._update(!0)}getPaintProperty(v,o){return this.style.getPaintProperty(v,o)}setLayoutProperty(v,o,h,m={}){return this.style.setLayoutProperty(v,o,h,m),this._update(!0)}getLayoutProperty(v,o){return this.style.getLayoutProperty(v,o)}setGlyphs(v,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,o,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,o,h,m=>{m||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,o,h=>{h||this._update(!0)}),this}setLight(v,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,o){return this.style.setFeatureState(v,o),this._update()}removeFeatureState(v,o){return this.style.removeFeatureState(v,o),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,o=0;return this._container&&(v=this._container.clientWidth||400,o=this._container.clientHeight||300),[v,o]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const o=this._canvasContainer=b.create("div","maplibregl-canvas-container",v);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),m=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],m);const _=this._controlContainer=b.create("div","maplibregl-control-container",v),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{w[P]=b.create("div",`maplibregl-ctrl-${P} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${v}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,o,h){this._canvas.width=Math.floor(h*v),this._canvas.height=Math.floor(h*o),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let o=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{o={requestedAttributes:v},m&&(o.statusMessage=m.statusMessage,o.type=m.type)},{once:!0});const h=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!h){const m="Failed to initialize WebGL";throw o?(o.message=m,new Error(JSON.stringify(o))):new Error(m)}this.painter=new yd(h,this.transform),E.testSupport(h)}_onCooperativeGesture(v,o,h){return!o&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,w=l.browser.now();this.style.zoomHistory.update(_,w);const P=new l.EvaluationParameters(_,{now:w,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=P.crossFadingFactor();I===1&&I===this._crossFadingFactor||(h=!0,this._crossFadingFactor=I),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.browser.frame(v=>{l.PerformanceUtils.frame(v),this._frame=null,this._render(v)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return vr}getCameraTargetElevation(){return this.transform.elevation}},Zn.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const o=this._map.getZoom(),h=o===this._map.getMaxZoom(),m=o===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,h)=>{const m=this._map._getUIString(`NavigationControl.${h}`);o.title=m,o.setAttribute("aria-label",m)},this.options=l.extend({},Pu,v),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,o){const h=b.create("button",v,this._container);return h.type="button",h.addEventListener("click",o),h}},Zn.GeolocateControl=class extends l.Evented{constructor(v){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",o)),this._finish()}},this._updateCamera=o=>{const h=new l.LngLat(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,_=this._map.getBearing(),w=l.extend({bearing:_},this.options.fitBoundsOptions),P=mt.fromLngLat(h,m);this._map.fitBounds(P,w,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const h=new l.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&No)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=o=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",o===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ba({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ba({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}},this.options=l.extend({},Dc,v)}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(o,h=!1){_a===void 0||h?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(m=>{_a=m.state!=="denied",o(_a)}).catch(()=>{_a=!!window.navigator.geolocation,o(_a)}):(_a=!!window.navigator.geolocation,o(_a)):o(_a)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ie=0,No=!1}_isOutOfMapMaxBounds(v){const o=this._map.getMaxBounds(),h=v.coords;return o&&(h.longitude<o.getWest()||h.longitude>o.getEast()||h.latitude<o.getSouth()||h.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),o=v.getSouthEast(),h=v.getNorthEast(),m=o.distanceTo(h),_=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ie--,No=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ie++,ie>1?(v={maximumAge:6e5,timeout:0},No=!0):(v=this.options.positionOptions,No=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Zn.AttributionControl=Lt,Zn.LogoControl=en,Zn.ScaleControl=class{constructor(v){this._onMove=()=>{Yi(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,Yi(this._map,this._container,this.options)},this.options=l.extend({},$l,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Zn.FullscreenControl=class extends l.Evented{constructor(v={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Zn.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=v}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Zn.Popup=class extends l.Evented{constructor(v){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!o)return;const h=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);let m=this.options.anchor;const _=Bc(this.options.offset);if(!m){const P=this._container.offsetWidth,I=this._container.offsetHeight;let O;O=h.y+_.bottom.y<I?["top"]:h.y>this._map.transform.height-I?["bottom"]:[],h.x<P/2?O.push("left"):h.x>this._map.transform.width-P/2&&O.push("right"),m=O.length===0?"bottom":O.join("-")}const w=h.add(_[m]).round();b.setTransform(this._container,`${Iu[m]} translate(${w.x}px,${w.y}px)`),za(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=l.extend(Object.create(uf),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const o=document.createDocumentFragment(),h=document.createElement("body");let m;for(h.innerHTML=v;m=h.firstChild,m;)o.appendChild(m);return this.setDOMContent(o)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(zc);v&&v.focus()}},Zn.Marker=Ba,Zn.Style=Bs,Zn.LngLat=l.LngLat,Zn.LngLatBounds=mt,Zn.Point=l.Point,Zn.MercatorCoordinate=l.MercatorCoordinate,Zn.Evented=l.Evented,Zn.AJAXError=l.AJAXError,Zn.config=l.config,Zn.CanvasSource=Je,Zn.GeoJSONSource=Xn,Zn.ImageSource=Bn,Zn.RasterDEMTileSource=un,Zn.RasterTileSource=Qt,Zn.VectorTileSource=Dt,Zn.VideoSource=Qr,Zn.setRTLTextPlugin=l.setRTLTextPlugin,Zn.getRTLTextPluginStatus=l.getRTLTextPluginStatus,Zn.prewarm=function(){Re().acquire(vt)},Zn.clearPrewarmedResources=function(){const v=se;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(vt),se=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},$a.extend(Zn,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Zn});var d=a;return d})})(pF);var lP=pF.exports;class pae{constructor(){an(this,"errorSetter",t=>{console.warn("Hook for renderer errors not installed. You must add it in logical layer by setErrorState method")});an(this,"onError",t=>{t instanceof Error?this.errorSetter(t):typeof t=="string"?this.errorSetter(new Error(t)):this.errorSetter(new Error("unknown"))})}setErrorState(t){this.errorSetter=t}setupExtension(t){}willInit(t){}willMount(t){}willUnMount(t){}willHide(t){}willUnhide(t){}willLegendUpdate(t){}willSourceUpdate(t){}willDestroy(t){}}Jr({currentMapAtom:oF},({onChange:e,schedule:t})=>{e("currentMapAtom",(n,r)=>{r&&t(a=>{a([by.clear(),qp.clear()])})})},"autoClearAtom");const mae=["background","raster","hillshade","heatmap","fill","fill-extrusion","line","circle","symbol","custom"];class gae{constructor(){an(this,"_baseMapFirstLayerIdx",null);an(this,"_map",null);an(this,"_layersSettings",null);an(this,"_layersParentsIds",null);an(this,"_unsubscribe",[]);an(this,"_typesOrder",[...mae]);an(this,"_awaitingTasks",new Set)}init(t,n,r){this._map=t,this._unsubscribe.push(r.subscribe(a=>this._layersSettings=a)),this._layersParentsIds=n,this._baseMapFirstLayerIdx=(t.getStyle().layers??[]).length-1,this._awaitingTasks.forEach(a=>{this._awaitingTasks.delete(a),a(t)})}destroy(){this._unsubscribe.forEach(t=>t())}getIdToMountOnTypesTop(t,n,r){this._asyncWrap(t,n,r,this._getIdToMountOnTypesTopSync.bind(this))}getIdToMountOnTypesBottom(t,n,r){this._asyncWrap(t,n,r,this._getIdToMountOnTypesBottomSync.bind(this))}_getIdToMountOnTypesTopSync(t,n,r){var E,A,L,F;const a=this._getMountedOrderedLayers(t);if(!(a!=null&&a.size))return;const c=a.get(n),d=(E=this._layersParentsIds)==null?void 0:E.get(r),l=(L=(A=this._layersSettings)==null?void 0:A.get(d||""))==null?void 0:L.data;if(!l){console.warn("settings were not found for layer ",n,r);return}const x=l.category,b=c==null?void 0:c.find($=>{if(x==="base")return $.category!=="base";if(x==="overlay")return $.category===void 0});if(x&&b)return b.layer.id;if(!b||!x){const $=this._typesOrder.slice(this._typesOrder.indexOf(n)+1).find(Z=>{var R;return(R=a.get(Z))==null?void 0:R.length});return $?(F=a.get($))==null?void 0:F[0].layer.id:void 0}}_getIdToMountOnTypesBottomSync(t,n,r){var E,A,L,F;const a=this._getMountedOrderedLayers(t);if(!(a!=null&&a.size))return;const c=a.get(n),d=(E=this._layersParentsIds)==null?void 0:E.get(r),l=(L=(A=this._layersSettings)==null?void 0:A.get(d||""))==null?void 0:L.data;if(!l){console.warn("settings were not found for layer ",n,r);return}const x=l.category,b=(()=>{if(x==="base")return c==null?void 0:c[0];if(x==="overlay")return c==null?void 0:c.find($=>$.category==="overlay"||$.category===void 0);if(x===void 0)return c==null?void 0:c.find($=>$.category===void 0)})();if(b)return b.layer.id;if(!(c!=null&&c.length)||!b){const $=this._typesOrder.slice(this._typesOrder.indexOf(n)+1).find(Z=>{var R;return(R=a.get(Z))==null?void 0:R.length});return $?(F=a.get($))==null?void 0:F[0].layer.id:void 0}}_getMountedOrderedLayers(t){if(this._baseMapFirstLayerIdx===null)return;const n=t.getStyle().layers??[];if(n.length===0)return;const r=n.slice(this._baseMapFirstLayerIdx+1);if(!r.length)return;const a=new Map;return r.forEach(c=>{var x,b,E,A;const d=(x=this._layersParentsIds)==null?void 0:x.get(c.id);if(!d)return console.warn("id was not found for",c.id,c);const l=a.get(c.type)||[];l.push({layer:c,category:(A=(E=(b=this._layersSettings)==null?void 0:b.get(d))==null?void 0:E.data)==null?void 0:A.category}),a.set(c.type,l)}),a}_asyncWrap(t,n,r,a){const c=this._map;c===null||this._baseMapFirstLayerIdx===null?this._awaitingTasks.add(d=>{r(a(d,t,n))}):r(a(c,t,n))}}const yae=new gae,B2=new Map;function $2(e,t=yae){function n(c,d){B2.set(c.id,d),t.getIdToMountOnTypesTop(c.type,c.id,l=>e.addLayer(c,l))}function r(c,d){B2.set(c.id,d),t.getIdToMountOnTypesBottom(c.type,c.id,l=>e.addLayer(c,l))}function a(c,d){B2.set(c.id,d),e.addLayer(c,void 0)}return{addAboveLayerWithSameType:n,addUnderLayerWithSameType:r,addAboveAllExistingLayers:a}}const _ae=(e,t)=>new Promise((n,r)=>{try{e.on(t,n)}catch(a){r(a)}});function N2(e){if(!e._loaded)return _ae(e,"load")}const vae={click:[],mousemove:[],mouseleave:[]};function Yg(e,t,n=50,r){return uP.addMapListener.dispatch(e,t,n),()=>{uP.removeMapListener.dispatch(e,t)}}const uP=Jr({addMapListener:(e,t,n)=>({eventType:e,listener:t,priority:n}),removeMapListener:(e,t)=>({eventType:e,listener:t})},({onAction:e},t=vae)=>(e("addMapListener",({eventType:n,listener:r,priority:a})=>{const c=[...t[n]];if(!c.length)c.push({listener:r,priority:a});else for(let d=0;d<c.length;d++){const l=c[d];if(a<l.priority){c.splice(d,0,{listener:r,priority:a});break}else if(l.priority===a){c.splice(d+1,0,{listener:r,priority:a});break}else if(c[d+1]){if(a>l.priority&&a<c[d+1].priority){c.splice(d+1,0,{listener:r,priority:a});break}}else{c.push({listener:r,priority:a});break}}t={...t,[n]:c}}),e("removeMapListener",({eventType:n,listener:r})=>t[n]=t[n].filter(a=>a.listener!==r)),t),"[Shared state] mapListenersAtom"),xae="_tootipRoot_i3o78_1",bae="_hexagon_i3o78_5",wae="_labels_i3o78_28",Sae="_column_i3o78_34",Cae="_bivariateHexagonPopupContentRoot_i3o78_45",Ff={tootipRoot:xae,hexagon:bae,labels:wae,column:Sae,bivariateHexagonPopupContentRoot:Cae},cP=Ff.bivariateHexagonPopupContentRoot,Eae=e=>OC(e)?K1:Yre(e)?X1:GO,kae=e=>FC(e)?K1:Jre(e)?X1:GO,Aae=({hexagonColor:e,axis:t,cellIndex:n,cellLabel:r,values:a})=>mn("div",{className:Ff.tootipRoot,children:[Xe("div",{className:Ff.hexagon,children:Xe("div",{style:{background:e},children:r})}),mn("div",{className:Ff.labels,children:[mn("div",{className:Ff.column,children:[Xe("span",{children:t.x.label||B4(t.x.quotients)}),Xe("span",{children:t.y.label||B4(t.y.quotients)})]}),a&&mn("div",{className:Ff.column,children:[Xe("span",{children:a.x}),Xe("span",{children:a.y})]}),mn("div",{className:Ff.column,children:[Xe("span",{children:Eae(n)}),Xe("span",{children:kae(n)})]})]})]});Jr({set:e=>e,reset:()=>null},({onAction:e},t=null)=>(e("set",n=>t={id:n}),e("reset",()=>t=null),t),"[Shared state] currentEpisodeAtom");const Tae=Jr({setCurrentEventId:e=>e,focusedGeometryAtom:uF},({onAction:e,onChange:t},n=null)=>(t("focusedGeometryAtom",r=>{const a=r==null?void 0:r.source;a&&a.type!=="event"&&a.type!=="episode"&&(n={id:null})}),e("setCurrentEventId",r=>n={id:r}),n),"[Shared state] currentEventAtom"),Pae=MO(!1,"scheduledAutoSelect");MO(!1,"scheduledAutoFocus");const Iae=JO(null,async(e,t)=>rF.get("/events/user_feeds",void 0,!0,{signal:t.signal}),"eventFeedsResource"),hP=[Lae(di.defaultFeed)],Mae=Jr({eventFeedsResourceAtom:Iae},({get:e},t=hP)=>{const{data:n,error:r,loading:a}=e("eventFeedsResourceAtom");return!a&&!r?n?(console.assert(n.map(c=>c.feed).includes(di.defaultFeed),"default feed not included in response"),n):[...hP]:t},"[Shared state] eventFeeds");function Lae(e){return(!e||e!=="kontur-public")&&console.warn("WARNING! Default feed provided via config is incorrect or absent"),{feed:"kontur-public",name:lr.t("configs.Kontur_public_feed"),description:lr.t("configs.Kontur_public_feed_description"),default:!0}}Jr({setCurrentFeed:e=>e,setFeedForExistingEvent:e=>e,resetCurrentFeed:()=>null,eventFeedsAtom:Mae},({onAction:e,onChange:t,schedule:n,getUnlistedState:r},a={id:di.defaultFeed})=>(e("setCurrentFeed",c=>{(a==null?void 0:a.id)!==c&&(a={id:c})}),e("resetCurrentFeed",()=>{a&&(a=null)}),t("eventFeedsAtom",c=>{if(c&&c.length){const d=Oae(c,a==null?void 0:a.id);d!==void 0&&d!==(a==null?void 0:a.id)&&(a={id:d},r(Tae)!==null&&n(x=>x(Pae.setTrue())))}}),a),"[Shared state] currentEventFeedAtom");function Oae(e,t){if(!t)return di.defaultFeed;const n=e==null?void 0:e.find(r=>r.feed===t);return n?n.feed:di.defaultFeed}Jr({setCurrentMapPosition:e=>({type:"centerZoom",...e}),setCurrentMapBbox:e=>({type:"bbox",bbox:e})},({onAction:e},t=null)=>(e("setCurrentMapPosition",n=>{if(t===null||t.type!=="centerZoom")t=n;else{const{lat:r,lng:a,zoom:c}=n;(t.lat!==r||t.lng!==a||t.zoom!==c)&&(t=n)}}),e("setCurrentMapBbox",n=>{(t===null||t.type!=="bbox"||t.bbox.some((r,a)=>r!==n.bbox[a]))&&(t=n)}),t),"[Shared state] currentMapPositionAtom");Jr({addControl:e=>e,removeControl:e=>e,toggleActiveState:e=>e,enable:e=>e,disable:e=>e,reset:()=>null},({onAction:e,schedule:t,create:n},r={})=>(e("addControl",a=>{r={...r,[a.id]:a}}),e("removeControl",a=>{delete r[a],r={...r}}),e("enable",a=>{var b;const c=r[a];(b=c.onChange)==null||b.call(c,!0);const d={...r[a],active:!0},l={...r,[a]:d},x=[];Object.entries(l).forEach(([E,A])=>{if(A.id!==a&&A.exclusiveGroup===c.exclusiveGroup&&A.active){const L=n("disable",A.id);x.push(L)}}),x.length&&t(E=>{E(x)}),r=l}),e("disable",a=>{var l;const c=r[a];(l=c==null?void 0:c.onChange)==null||l.call(c,!1);const d={...r[a],active:!1};r={...r,[a]:d}}),e("toggleActiveState",a=>{if(!r[a])return console.error(`[toolbarControlsAtom] Cannot toggle state for ${a} because it doesn't exist`);const d=n(r[a].active?"disable":"enable",a);t(l=>l(d))}),e("reset",()=>{Object.entries(r).forEach(([a,c])=>{var d;c.active&&((d=c.onChange)==null||d.call(c,!1))}),r={}}),r),"[Shared state] toolbarControlsAtom");const Fae=_K,Rae=Jr({set:(e={...di.effectiveFeatures})=>e},({onAction:e},t={})=>{if(e("set",n=>{n?t=n:t={...di.effectiveFeatures}}),{}.VITE_FEATURES_CONFIG)try{const n=JSON.parse({}.VITE_FEATURES_CONFIG);n&&(t={...t,...n})}catch(n){console.error("Local features override error",n)}return t},"[Shared state] featureFlagsAtom"),i1="stats",gF=0,yF=22,fP={hover:"hover",active:"active"},Dae={type:"line",layout:{},paint:{"line-color":["case",["==",["feature-state",fP.active],!0],"rgba(5, 22, 38, 1)",["==",["feature-state",fP.hover],!0],"rgba(5, 22, 38, 0.4)","rgba(0, 0, 0, 0)"],"line-width":1}},zae="rgba(90, 200, 127, 0.5)",Bae="rgba(228, 26, 28, 0.5)",$ae=["bad","good"],Nae=["good","bad"];class Uae{constructor(){an(this,"add",(t,n)=>["+",t,n]);an(this,"sub",(t,n)=>["-",t,n]);an(this,"mult",(t,n)=>["*",t,n]);an(this,"div",(t,n)=>["/",t,n]);an(this,"log",t=>["ln",t]);an(this,"sqrt",t=>["sqrt",t])}}class jae{constructor(){an(this,"add",(t,n)=>t+n);an(this,"sub",(t,n)=>t-n);an(this,"mult",(t,n)=>t*n);an(this,"div",(t,n)=>t/n);an(this,"log",t=>Math.log(t));an(this,"sqrt",t=>Math.sqrt(t))}}const dP=(e,t)=>e.length===t.length&&e.every((n,r)=>n===t[r]);class _F{constructor(t){an(this,"math");this.math=t}rate({num:t,den:n}){return this.math.div(t,n)}normalize({x:t,min:n,max:r}){return this.math.div(this.math.sub(t,n),this.math.sub(r,n))}transform({x:t,min:n,max:r,transformation:a}){switch(a){case"no":return{tX:t,tMin:n,tMax:r};case"square_root":return{tX:this.math.sqrt(t),tMin:this.math.sqrt(n),tMax:this.math.sqrt(r)};case"natural_logarithm":return{tX:this.math.log(this.math.add(t,1)),tMin:this.math.log(this.math.add(n,1)),tMax:this.math.log(this.math.add(r,1))}}}invert(t){return this.math.sub(1,t)}scale(t,n){return this.math.mult(t,n)}}const Vae=new _F(new Uae),qae=new _F(new jae),vF=(e,t)=>({axis:n,range:r,coefficient:a,sentiment:c,transformationFunction:d,normalization:l})=>{const[x,b]=n,[E,A]=r,L=dP(c,Nae);L||console.assert(dP(c,$ae),"Not inverted equals default");const F=t({num:x,den:b}),$=e.rate(F),{tX:N,tMin:Z,tMax:R}=e.transform({x:$,min:E,max:A,transformation:d}),q=l==="max-min"?e.normalize({x:N,min:Z,max:R}):N,G=L?e.invert(q):q;return e.scale(G,a)},Gae="stats",pP=vF(Vae,e=>({num:["get",e.num],den:["get",e.den]}));function Hae(e){return HO(...e.map(({axis:t})=>RC(["/",Nf(t[0]),Nf(t[1])],0)))}function Wae(e){return e.length===1?pP(e.at(0)):["/",["+",...e.map(pP)],NC(e,"coefficient")]}function Zae({colorsConfig:e,mcdaResult:t,absoluteMin:n,absoluteMax:r}){const{good:a=zae,bad:c=Bae}=e.parameters;return{"fill-color":["let","mcdaResult",["to-number",t,-9999],["case",["all",[">=",["var","mcdaResult"],n],["<=",["var","mcdaResult"],r]],["interpolate-hcl",["linear"],["var","mcdaResult"],0,c,1,a],"transparent"]],"fill-opacity":1,"fill-antialias":!1}}function Kae({colorsConfig:e,mcdaResult:t,absoluteMax:n,absoluteMin:r}){return Object.entries(e.parameters).reduce((a,[c,d])=>(a[c]=Array.isArray(d)?["let","mcdaResult",["to-number",t,-9999],"absoluteMax",["to-number",n,-9999],"absoluteMin",["to-number",r,-9999],...d]:d,a),{})}function Xae(e){switch(e.colorsConfig.type){case"sentiments":return Zae(e);case"mapLibreExpression":return Kae(e)}}function Yae(e){const[t=0,n=1]=e.layers.reduce((c,d)=>{const l=d.normalization==="no"?d.range:[0,1];return c.length===0?l:(c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c)},[]),r=Wae(e.layers);return{id:e.id,type:"fill",layout:{},filter:Hae(e.layers),paint:Xae({colorsConfig:e.colors,mcdaResult:r,absoluteMin:t,absoluteMax:n}),source:{type:"vector",tiles:[`${Q1(di.bivariateTilesRelativeUrl)}{z}/{x}/{y}.mvt?indicatorsClass=${di.bivariateTilesIndicatorsClass}`],maxzoom:yF,minzoom:gF},"source-layer":Gae}}const Jae={mcda:e=>new Array(Yae(e))},Qae="_result_1l50n_1",ese="_tableBody_1l50n_6",tse="_list_1l50n_10",nse="_entryName_1l50n_18",Mp={result:Qae,tableBody:ese,list:tse,entryName:nse};function rse({layer:e,normalized:t,resultMCDA:n}){var d,l;const r=`${e.axis[0]}-${e.axis[1]}`,[a,c]=pt.useMemo(()=>e.axis.map(x=>m3(x.replaceAll("_"," "))),[e]);return mn("ul",{className:Mp.list,children:[mn("li",{children:[mn("span",{className:Mp.entryName,children:[a,":"]})," ",parseFloat((d=t[r])==null?void 0:d.numValue.toFixed(2))]}),mn("li",{children:[mn("span",{className:Mp.entryName,children:[c,":"]})," ",parseFloat((l=t[r])==null?void 0:l.denValue.toFixed(2))]}),mn("li",{children:[mn("span",{className:Mp.entryName,children:[a," / ",c,":"]})," ",n.toFixed(2)]})]})}function ise({layers:e,normalized:t,resultMCDA:n}){return mn("table",{children:[Xe("thead",{children:mn("tr",{children:[Xe("th",{children:"Layer"}),Xe("th",{children:"Range"}),Xe("th",{children:"Coefficient"}),Xe("th",{children:"Value"}),Xe("th",{children:"Normalized Value"})]})}),mn("tbody",{className:Mp.tableBody,children:[e.map(({axis:r,range:a,coefficient:c})=>{const[d,l]=a,[x,b]=r;return mn("tr",{children:[mn("td",{children:[x," / ",b]}),mn("td",{children:[d," - ",l]}),Xe("td",{children:c}),Xe("td",{children:t[`${x}-${b}`].val.toFixed(2)}),Xe("td",{children:t[`${x}-${b}`].norm.toFixed(2)})]},`${x}-${b}`)}),Xe("tr",{children:Xe("td",{colSpan:5,children:mn("b",{className:Mp.result,children:["Result: ",n.toFixed(2)]})})})]})]})}function ose({layers:e,normalized:t,resultMCDA:n}){return e.length===1?Xe(rse,{layer:e.at(0),normalized:t,resultMCDA:n}):Xe(ise,{layers:e,normalized:t,resultMCDA:n})}function ase(e,t){const n=vF(qae,({num:r,den:a})=>{var c,d;return{num:(c=e.properties)==null?void 0:c[r],den:(d=e.properties)==null?void 0:d[a]}});return t.reduce((r,a)=>{var x,b,E,A;const[c,d]=a.axis,l=((x=e.properties)==null?void 0:x[c])/((b=e.properties)==null?void 0:b[d]);return r[`${c}-${d}`]={val:l,norm:n(a),numValue:(E=e.properties)==null?void 0:E[c],denValue:(A=e.properties)==null?void 0:A[d]},r},{})}function sse(e,t){const n=NC(Object.values(t),"norm"),r=NC(e,"coefficient");return n/r}function lse(e,t){const n=ase(e,t),r=sse(t,n),a=document.createElement("div");return UE(a).render(ose({layers:t,normalized:n,resultMCDA:r})),a}function mP(e,t){e.includes("{-y}")&&(t.scheme="tms")}function use(e,t){if(e.type==="bivariate")return sae(e,t);throw new Error(`Unexpected legend type '${e.type}'`)}function cse(e){var n;const t=(n=e.layer.paint)==null?void 0:n["fill-color"];return t?t.a===0:!0}function VC(e){return!cse(e)}function hse(e){return die(e.id)}function gP(e,t){return t.target.queryRenderedFeatures(t.point).filter(n=>n.source.includes(e)).filter(VC).filter(hse)}function fse(e){const t=new Set,n=new Set,r=(a,c)=>{e.map.setFeatureState({source:e.sourceId,id:a,sourceLayer:e.sourceLayer},c)};return{onClick:a=>{t.forEach(d=>{r(d,{active:!1})}),t.clear();const c=gP(e.sourceId,a);return c.length&&c.forEach(d=>{r(d.id,{active:!0}),t.add(d.id)}),!0},onMouseMove:a=>{n.forEach(d=>{r(d,{hover:!1})}),n.clear();const c=gP(e.sourceId,a);return c.length&&c.forEach(d=>{r(d.id,{hover:!0}),n.add(d.id)}),!0},onMouseLeave:a=>(n.forEach(c=>{r(c,{hover:!1})}),n.clear(),!0),reset:()=>{t.forEach(a=>{r(a,{active:!1})}),t.clear(),n.forEach(a=>{r(a,{hover:!1})}),n.clear()}}}const dse=(e,t=!0)=>`rgba(${e.r*255*2},${e.g*255*2},${e.b*255*2}${t?","+e.a:""})`;function yP(e,t,n){const r=e[t],a=e[n];if(r==null||a==null)return"0.00";if(a!==0)return(r/a).toFixed(2)}class pse extends pae{constructor({id:n,layersOrderManager:r}){super();an(this,"id");an(this,"_layerId");an(this,"_sourceId");an(this,"_layersOrderManager");an(this,"_popup");an(this,"_listenersCleaningTasks",new Set);an(this,"cleanUpListeners",()=>{this._listenersCleaningTasks.forEach(n=>n()),this._listenersCleaningTasks.clear()});an(this,"_borderLayerId");an(this,"resetFeatureStates");an(this,"removeBivariatePopupClickHandler");an(this,"onMapZoomHandlers",new Set);an(this,"onMapZoom",n=>{this.cleanPopup()});this.id=n,this._layersOrderManager=r,this._sourceId=zoe+this.id}async addHoverAndActiveFeatureState(n,r){await N2(n);const a=this._sourceId,c=a+"_border";if(n.getLayer(c))return;const d={...Dae,id:c,source:a,"source-layer":i1};$2(n,this._layersOrderManager).addAboveLayerWithSameType(d,this.id),this._borderLayerId=c;const{onClick:l,onMouseMove:x,onMouseLeave:b,reset:E}=fse({map:n,sourceId:a,sourceLayer:i1});this._listenersCleaningTasks.add(Yg("click",l,60)),this._listenersCleaningTasks.add(Yg("mousemove",x,60)),this._listenersCleaningTasks.add(Yg("mouseleave",b,60)),this.resetFeatureStates=E,this.onMapZoomHandlers.add(this.resetFeatureStates)}async mountBivariateLayer(n,r,a){const c={type:"vector",tiles:r.source.urls.map(d=>Q1(d)),minzoom:r.minZoom||gF,maxzoom:r.maxZoom||yF};if(mP(r.source.urls[0],c),await N2(n),n.getSource(this._sourceId)===void 0&&n.addSource(this._sourceId,c),a){const d=use(a,i1),l=`${nP+this.id}`;if(n.getLayer(l))return;const x={...d,id:l,source:this._sourceId};$2(n,this._layersOrderManager).addAboveLayerWithSameType(x,this.id),this._layerId=x.id}else throw new Error(`[GenericLayer ${this.id}] Vector layers must have legend`)}addBivariatePopup(n,r){const a=d=>{var K;const l=d.target.queryRenderedFeatures(d.point).filter(le=>le.source.includes(this._sourceId));if(!l.length||!r||!l[0].geometry)return!0;const[x]=l;if(!VC(x)||!x.properties)return!0;const b=Rae.getState()[Fae.BIVARIATE_MANAGER],[E,A]=r.axis.x.quotient,[L,F]=r.axis.y.quotient,$=yP(x.properties,E,A),N=yP(x.properties,L,F);if(!$||!N)return!0;const Z=(K=x.layer.paint)==null?void 0:K["fill-color"];if(!Z)return!0;const R=dse(Z),q=cie(r.steps,"label"),G=hae(r.axis.x.steps,r.axis.y.steps,Number($),Number(N)),ee=q.findIndex(le=>le.label===G),ae=document.createElement("div");return UE(ae).render(Xe(Aae,{cellLabel:q[ee].label,cellIndex:ee,axis:r.axis,values:b?{x:$,y:N}:void 0,hexagonColor:R})),this.cleanPopup(),this._popup=new lP.Popup({closeOnClick:!0,className:cP,maxWidth:"none",focusAfterOpen:!1,offset:15}).setLngLat(d.lngLat).setDOMContent(ae).addTo(n),this._popup.once("close",()=>{var le;(le=this.resetFeatureStates)==null||le.call(this)}),!0};this.removeBivariatePopupClickHandler&&(this.removeBivariatePopupClickHandler(),this._listenersCleaningTasks.delete(this.removeBivariatePopupClickHandler));const c=Yg("click",a,60);this._listenersCleaningTasks.add(c),this.removeBivariatePopupClickHandler=c,this.onMapZoomHandlers.add(this.cleanPopup)}async mountMCDALayer(n,r,a){const c={type:"vector",tiles:r.source.urls.map(b=>Q1(b)),minzoom:r.minZoom||0,maxzoom:r.maxZoom||22};mP(r.source.urls[0],c),await N2(n),n.getSource(this._sourceId)===void 0&&n.addSource(this._sourceId,c);const d=`${nP+this.id}`;if(n.getLayer(d))return;const x={...Jae.mcda(a.config)[0],id:d,source:this._sourceId};$2(n,this._layersOrderManager).addAboveLayerWithSameType(x,this.id),this._layerId=d}addMCDAPopup(n,r){const a=d=>{const l=d.target.queryRenderedFeatures(d.point).filter(E=>E.source.includes(this._sourceId));if(!l.length||!l[0].geometry)return!0;const[x]=l;if(!VC(x))return!0;const b=lse(x,r.config.layers);return this.cleanPopup(),this._popup=new lP.Popup({closeOnClick:!0,className:cP,maxWidth:"none",focusAfterOpen:!1,offset:15}).setLngLat(d.lngLat).setDOMContent(b).addTo(n),this._popup.once("close",()=>{var E;(E=this.resetFeatureStates)==null||E.call(this)}),!0};this.cleanUpListeners();const c=Yg("click",a,60);this._listenersCleaningTasks.add(c),this.onMapZoomHandlers.add(this.cleanPopup)}_updateMap(n,r,a,c,d){r!=null&&((d==null?void 0:d.type)==="mcda"?(this.mountMCDALayer(n,r,d),this.addMCDAPopup(n,d)):(this.mountBivariateLayer(n,r,a),this.addBivariatePopup(n,a)),this.addHoverAndActiveFeatureState(n,d),c||this.willHide({map:n}))}cleanPopup(){this._popup&&(this._popup.remove(),this._popup=null)}willSourceUpdate({map:n,state:r}){r.source&&this._updateMap(n,r.source,r.legend,r.isVisible,r.style)}willMount({map:n,state:r}){n.on("zoom",this.onMapZoom),r.source&&this._updateMap(n,r.source,r.legend,r.isVisible,r.style)}willUnMount({map:n}){var r;this._layerId&&n.getLayer(this._layerId)?(n.removeLayer(this._layerId),this._layerId=void 0):console.warn(`Can't remove layer with ID: ${this._layerId}. Layer does't exist in map`),this._borderLayerId&&n.getLayer(this._borderLayerId)?(n.removeLayer(this._borderLayerId),this._borderLayerId=void 0):console.warn(`Can't remove layer with ID: ${this._borderLayerId}. Layer does't exist in map`),this.cleanPopup(),n.getSource(this._sourceId)?n.removeSource(this._sourceId):console.warn(`Can't remove source with ID: ${this._sourceId}. Source does't exist in map`),this.cleanUpListeners(),n.off("zoom",this.onMapZoom),this.onMapZoomHandlers.clear(),(r=this.resetFeatureStates)==null||r.call(this)}willHide({map:n}){this._layerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0?(n.setLayoutProperty(this._layerId,"visibility","none"),this.cleanPopup()):console.warn(`Can't hide layer with ID: ${this._layerId}. Layer doesn't exist on the map`))}willUnhide({map:n}){this._layerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0?n.setLayoutProperty(this._layerId,"visibility","visible"):console.warn(`Cannot unhide layer with ID: ${this._layerId}. Layer doesn't exist on the map`))}willDestroy({map:n}){this._layerId===void 0||this._borderLayerId===void 0||n===null||(n.getLayer(this._layerId)!==void 0||n.getLayer(this._borderLayerId)!==void 0)&&this.willUnMount({map:n})}}const U2=(e,t,n)=>{const r=e?e.findIndex(c=>c.selectedQuotient[0]===(n==null?void 0:n.xNumerator)&&c.selectedQuotient[1]===(n==null?void 0:n.xDenominator)):-1,a=t?t.findIndex(c=>c.selectedQuotient[0]===(n==null?void 0:n.yNumerator)&&c.selectedQuotient[1]===(n==null?void 0:n.yDenominator)):-1;return{x:r,y:a}},_P=(e,t,n)=>{const r=[...e];let a;const c=r.findIndex(({quotients:d})=>(a=d.find(l=>l[0]===t&&l[1]===n),a));return a&&(r[c]={...r[c],selectedQuotient:a}),r},mse={xNumerator:null,xDenominator:null,yNumerator:null,yDenominator:null,selectedCell:null,selectCellCallback:null},j2=(e,t,n,r)=>({xNumerator:e,xDenominator:t,yNumerator:n,yDenominator:r}),gse=Jr({enabledLayersAtom:Gf,layersLegendsAtom:g3,calculateSelectedCell:()=>null,resetSelection:()=>null,setSelectCellCallback:e=>e,runPreselection:()=>null,setMatrixSelection:j2,presetMatrixSelection:e=>e,enableBivariateLayer:e=>e,disableBivariateLayer:()=>null},({onAction:e,schedule:t,getUnlistedState:n,create:r,onChange:a},c=mse)=>{e("calculateSelectedCell",()=>{const{xGroups:l,yGroups:x}=n(Lv),b=U2(l,x,j2(c.xNumerator,c.xDenominator,c.yNumerator,c.yDenominator)),E=c.selectedCell;(!E||b.x!==E.x||b.y!==E.y)&&(c={...c,selectedCell:b})}),e("setSelectCellCallback",l=>{c={...c,selectCellCallback:l}});const d=()=>{const l=n(Gf),x=n(_p);return[...l].map(E=>{var A;return(A=x.get(E))==null?void 0:A.getState()}).find(E=>{var A;return E&&E.isEnabled&&((A=E.legend)==null?void 0:A.type)==="bivariate"})};return e("resetSelection",()=>{c={...c,xNumerator:null,xDenominator:null,yNumerator:null,yDenominator:null,selectedCell:null},t(l=>{var x;(x=c==null?void 0:c.selectCellCallback)==null||x.call(c,-1,-1)})}),e("runPreselection",()=>{const l=d();if(!l||!(l!=null&&l.legend)){t(b=>{b(r("resetSelection"))});return}const x=l.legend.axis;if(x){const b=j2(x.x.quotient[0]||null,x.x.quotient[1]||null,x.y.quotient[0]||null,x.y.quotient[1]||null),{xGroups:E,yGroups:A}=n(Lv),L=U2(E,A,b);if(L.x>=0&&L.y>=0){t(Z=>{var R;Z(r("presetMatrixSelection",b)),(R=c==null?void 0:c.selectCellCallback)==null||R.call(c,L.x,L.y)});return}let F=E,$=A;L.x===-1&&(F=_P(E,x.x.quotient[0],x.x.quotient[1])),L.y===-1&&($=_P(A,x.y.quotient[0],x.y.quotient[1]));const N=U2(F,$,b);t(Z=>{var R;N.x>=0&&N.y>=0?(Z(Lv.setNumerators(F,$)),Z(r("presetMatrixSelection",b)),(R=c==null?void 0:c.selectCellCallback)==null||R.call(c,N.x,N.y)):Z(r("resetSelection"))})}}),e("presetMatrixSelection",l=>{c={...c,...l},t(x=>{x(r("calculateSelectedCell"))})}),e("setMatrixSelection",l=>{c={...c,...l},t(R=>{R(r("calculateSelectedCell"))});const{xNumerator:x,xDenominator:b,yNumerator:E,yDenominator:A}=l;if(x===null||E===null)return;const{xGroups:L,yGroups:F}=n(Lv),$=n(dF).data;if($===null)return;const N=$.polygonStatistic.bivariateStatistic;if(!L||!F||!L.length||!F.length||!b||!A)return;const Z=iae(x,b,E,A,N,i1);if(Z){const[R,q]=Z,G=lae("Bivariate Layer",R,x,b,E,A,N);if(G){const ee=q,ae=ee.source,K=ee.id,le=cae(x,b,E,A,N),xe=ae?{id:K,maxZoom:ae.maxzoom,minZoom:ae.minzoom,source:{type:ae.type,urls:ae.tiles,tileSize:512,apiKey:""}}:void 0,[Le,Oe]=sP([{id:K,legend:G,meta:le,source:xe}]);n(E_).has(K)||Le.push(...sP([{id:K,settings:{id:K,name:"Bivariate Layer",category:"overlay",group:"bivariate",ownedByUser:!0}}]).flat()),n(_p).has(K)||Le.push(r("disableBivariateLayer"),_p.register({id:K,renderer:new pse({id:K}),cleanUpActions:Oe}),r("enableBivariateLayer",K)),Le.length&&t((tt,yt={})=>{tt(Le),yt.bivariateLayerAtomId=K})}}}),e("enableBivariateLayer",l=>{const x=n(_p);for(const[b,E]of Array.from(x))if(b===l){t(A=>{A(E.enable())});break}}),e("disableBivariateLayer",()=>{const l=n(_p);t((x,b={})=>{if(b.bivariateLayerAtomId){const E=l.get(b.bivariateLayerAtomId);E&&x(E.destroy())}})}),c},"bivariateMatrixSelection"),yse=pt.createContext(null),ex=37,_se=.7,xF=ex/Math.sqrt(2),bF=ex/Math.sqrt(2);function vse(e,t,n=0){return pt.useMemo(()=>({display:"inline-grid","--cell-size":n===0?"initial":`${n}px`,gridTemplateRows:`repeat(${t}, ${n===0?"auto":n+"px"})`,gridTemplateColumns:`repeat(${e}, ${n===0?"auto":n+"px"})`}),[e,t,n])}function xse(e,t){const n=[];for(let r=0;r<e;r++){n[r]=[];for(let a=0;a<t;a++)n[r][a]={gridColumn:`${r} / ${r+1}`,gridRow:`${a} / ${a+1}`}}return n}function bse(e,t){return pt.useMemo(()=>{if(!e||!e.length||!t||!t.length)return 0;let r=Fv(e[0].label);for(let c=1;c<e.length;c++){const d=Fv(e[c].label),l=c*bF;d>r+l&&(r=d-l)}let a=Fv(t[0].label);for(let c=1;c<t.length;c++){const d=Fv(t[c].label),l=c*xF;d>a+l&&(a=d-l)}return r>a?r:a},[e,t])}const wse=document.createElement("canvas"),wF=wse.getContext("2d")||{};wF.font="normal 13px Roboto";const Sse=30,Cse=90;function Fv(e){return wF.measureText(e).width+Sse+Cse}function vP(e,t,n){return t?{height:`${e+n*bF}px`}:{width:`${e+n*xF}px`}}const Ese="_hoveredCell_kt59d_1",kse="_valueCell_kt59d_5",Ase="_rotatedCell_kt59d_19",Tse="_valueFill_kt59d_28",Pse="_disabled_kt59d_39",Ise="_selectedCol_kt59d_43",Mse="_first_kt59d_48",Lse="_last_kt59d_52",Ose="_selectedRow_kt59d_56",ju={hoveredCell:Ese,valueCell:kse,rotatedCell:Ase,valueFill:Tse,disabled:Pse,selectedCol:Ise,first:Mse,last:Lse,selectedRow:Ose},SF=pt.forwardRef(({value:e,x:t,y:n,className:r,onMouseOver:a,onMouseOut:c,onClick:d,disabled:l=!1,style:x,firstRow:b,firstCol:E,lastRow:A,lastCol:L},F)=>{const $=pt.useRef(null);let N=!1,Z=!1,R=!1;const q=Ci(ju.valueCell,r,l&&ju.disabled);function G(){return`${q} ${Ci({[ju.hoveredCell]:N,[ju.selectedCol]:R,[ju.selectedRow]:Z,[ju.first]:b&&R||E&&Z,[ju.last]:A&&R||L&&Z})}`}return pt.useImperativeHandle(F,()=>({setHovered:()=>{$.current&&(N=!0,$.current.className=G())},resetHovered:()=>{$.current&&(N=!1,$.current.className=G())},setSelectedCol:()=>{$.current&&(R=!0,$.current.className=G())},resetSelectedCol:()=>{$.current&&(R=!1,$.current.className=G())},setSelectedRow:()=>{$.current&&(Z=!0,$.current.className=G())},resetSelectedRow:()=>{$.current&&(Z=!1,$.current.className=G())}})),Xe("div",{ref:$,className:q,style:x,onMouseOver:()=>{a(t,n)},onClick:ee=>{d(t,n,ee)},onMouseOut:c,children:!l&&e!==void 0?mn(qx,{children:[Math.abs(e)>=.1&&Xe("div",{className:ju.valueFill,style:{transform:`scale(${Math.abs(e)})`}}),Xe("span",{className:ju.rotatedCell,children:e==null?void 0:e.toFixed(3)})]}):null})});SF.displayName="BivariateMatrixCell";const Fse="_legendSlot_i0ppr_6",Rse="_matrixContainer_i0ppr_14",Dse="_rotatedMatrix_i0ppr_21",xP={legendSlot:Fse,matrixContainer:Rse,rotatedMatrix:Dse},zse="_horConnector_zzmmn_1",Bse="_vertConnector_zzmmn_7",$se="_connectorBody_zzmmn_13",Nse="_hovered_zzmmn_28",Use="_selected_zzmmn_33",dp={horConnector:zse,vertConnector:Bse,connectorBody:$se,hovered:Nse,selected:Use},qC=pt.forwardRef(({type:e,style:t},n)=>{const r=pt.useRef(null);let a=!1,c=!1;const d=dp.connectorBody;function l(){return`${d} ${Ci({[dp.hovered]:a,[dp.selected]:c})}`}return pt.useImperativeHandle(n,()=>({setHovered:()=>{r.current&&(a=!0,r.current.className=l())},resetHovered:()=>{r.current&&(a=!1,r.current.className=l())},setSelectedCol:()=>{e==="vertical"&&r.current&&(c=!0,r.current.className=l())},resetSelectedCol:()=>{e==="vertical"&&r.current&&(c=!1,r.current.className=l())},setSelectedRow:()=>{e==="horizontal"&&r.current&&(c=!0,r.current.className=l())},resetSelectedRow:()=>{e==="horizontal"&&r.current&&(c=!1,r.current.className=l())}})),Xe("div",{className:e==="horizontal"?dp.horConnector:dp.vertConnector,style:t,children:Xe("div",{className:dp.connectorBody,ref:r})})});qC.displayName="BivariateMatrixCellConnector";const jse="_denominatorIcon_2n0u5_1",Vse={denominatorIcon:jse},qse=()=>mn("svg",{width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[mn("g",{clipPath:"url(#clip0_4777_147920)",children:[Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.59226 5.6715C4.57385 5.68982 4.55581 5.70848 4.53814 5.72748C4.27818 6.00698 4.09843 6.3591 4.03058 6.74363C4.30836 6.45062 4.50699 6.08183 4.59226 5.6715ZM10.3266 5.66248C10.4117 6.0808 10.6146 6.45633 10.8991 6.75295C10.8325 6.3648 10.6519 6.00926 10.3899 5.7275C10.3693 5.70537 10.3482 5.68368 10.3266 5.66248ZM10.927 7.12889C10.2881 7.58142 9.93487 8.39557 10.1356 9.23105L10.3024 9.92533L10.8712 7.55816C10.9059 7.41385 10.924 7.27018 10.927 7.12889ZM10.8167 12.0655L11.135 13.3906C11.2431 13.8401 11.6451 14.157 12.1074 14.157H12.8928C13.3551 14.157 13.7571 13.8401 13.8651 13.3906L14.8646 9.23105C15.0886 8.29843 14.6225 7.39238 13.8391 6.98624C14.3731 6.58123 14.718 5.93987 14.718 5.21796C14.718 3.99301 13.725 3 12.5001 3C12.1224 3 11.7669 3.09436 11.4556 3.26079C11.4174 3.85333 11.25 4.41104 10.9816 4.90556C11.0898 5.00751 11.1903 5.11726 11.2822 5.23375C11.2821 5.22849 11.2821 5.22323 11.2821 5.21796C11.2821 4.5453 11.8274 4 12.5001 4C13.1727 4 13.718 4.5453 13.718 5.21796C13.718 5.89062 13.1727 6.43592 12.5001 6.43592C12.2381 6.43592 11.9954 6.35321 11.7968 6.21249C11.9482 6.7042 11.975 7.24459 11.8435 7.79175C11.9191 7.77351 11.9983 7.7638 12.0803 7.7638H12.9199C13.5667 7.7638 14.0433 8.36854 13.8922 8.99743L12.8928 13.157L12.1074 13.157L11.3309 9.92533L10.8167 12.0655ZM4.10776 12.0505L3.78577 13.3906C3.67777 13.8401 3.27574 14.157 2.81344 14.157H2.02803C1.56574 14.157 1.16371 13.8401 1.0557 13.3906L0.0562696 9.23105C-0.167809 8.29845 0.298349 7.39241 1.08167 6.98626C0.547652 6.58125 0.202745 5.93988 0.202745 5.21796C0.202745 3.99301 1.19576 3 2.42071 3C2.80138 3 3.15965 3.0959 3.47268 3.26486C3.5114 3.85587 3.67872 4.41215 3.94647 4.90553C3.83535 5.01024 3.73236 5.12317 3.63841 5.24319C3.63858 5.2348 3.63867 5.22639 3.63867 5.21796C3.63867 4.5453 3.09337 4 2.42071 4C1.74804 4 1.20274 4.5453 1.20274 5.21796C1.20274 5.89062 1.74804 6.43592 2.42071 6.43592C2.68679 6.43592 2.93294 6.3506 3.1333 6.20582C2.98006 6.69932 2.95243 7.24213 3.0845 7.79178L3.08494 7.79363C3.00708 7.77418 2.92528 7.7638 2.84055 7.7638H2.00092C1.35413 7.7638 0.877492 8.36854 1.0286 8.99742L2.02803 13.157L2.81344 13.157L3.59353 9.91034L4.10776 12.0505ZM4.62199 9.91034L4.78521 9.23105C4.98518 8.39877 4.63543 7.58765 4.00112 7.13409C4.00445 7.2737 4.02258 7.41562 4.05683 7.55816L4.62199 9.91034Z",fill:"black"}),Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.46348 3C9.46348 4.10457 8.56805 5 7.46348 5C6.35891 5 5.46348 4.10457 5.46348 3C5.46348 1.89543 6.35891 1 7.46348 1C8.56805 1 9.46348 1.89543 9.46348 3ZM9.52339 5.18101C10.1023 4.63409 10.4635 3.85923 10.4635 3C10.4635 1.34315 9.12033 0 7.46348 0C5.80662 0 4.46348 1.34315 4.46348 3C4.46348 3.85922 4.8247 4.63408 5.40356 5.181C4.4317 5.4836 3.80296 6.50391 4.05627 7.55816L5.68205 14.3245C5.79005 14.774 6.19208 15.0909 6.65437 15.0909H8.27254C8.73483 15.0909 9.13686 14.774 9.24487 14.3245L10.8706 7.55816C11.1239 6.50392 10.4952 5.48363 9.52339 5.18101ZM6.00092 6.09091H8.92599C9.57278 6.09091 10.0494 6.69564 9.89832 7.32453L8.27254 14.0909H6.65437L5.0286 7.32453C4.87749 6.69564 5.35414 6.09091 6.00092 6.09091Z",fill:"black"})]}),Xe("defs",{children:Xe("clipPath",{id:"clip0_4777_147920",children:Xe("rect",{width:"24",height:"24",fill:"white"})})})]}),Gse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{d:"M14.6012 12.1833C15.0887 12.6708 15.0887 13.4833 14.6012 13.9708L13.7346 14.8375C13.6262 14.9458 13.5179 15 13.3554 15C13.2471 15 13.0846 14.9458 12.9762 14.8375C12.7596 14.6208 12.7596 14.2958 12.9762 14.1333L13.4637 13.6458H3.33874C2.20124 13.6458 1.33457 12.725 1.33457 11.5875V1.4625L0.847072 1.95C0.630406 2.16667 0.305406 2.16667 0.142906 1.95C-0.0195943 1.73333 -0.073761 1.40833 0.142906 1.24583L1.00957 0.379167C1.49707 -0.108333 2.30957 -0.108333 2.79707 0.379167L3.66374 1.24583C3.88041 1.4625 3.88041 1.7875 3.66374 1.95C3.55541 2.05833 3.39291 2.05833 3.28457 2.05833C3.17624 2.05833 3.01374 2.00417 2.90541 1.89583L2.36374 1.35417V11.5875C2.36374 12.1292 2.79707 12.6167 3.39291 12.6167H13.5721L13.0304 12.075C12.8137 11.8583 12.8137 11.5333 13.0304 11.3708C13.2471 11.1542 13.5721 11.1542 13.7346 11.3708L14.6012 12.1833ZM13.4637 0H6.85541C6.58457 0 6.36791 0.216667 6.36791 0.4875C6.36791 0.758333 6.58457 0.975 6.85541 0.975H13.4096C13.6804 0.975 13.8971 1.19167 13.8971 1.4625V8.125C13.8971 8.39583 14.1137 8.6125 14.3846 8.6125C14.6554 8.6125 14.8721 8.39583 14.8721 8.125V1.51667C14.9804 0.704167 14.2762 0 13.4637 0ZM8.45541 9.72083C8.72624 9.72083 8.94291 9.50417 8.94291 9.23333V6.95833C8.94291 6.2 8.29291 5.55 7.53457 5.55C7.20957 5.55 6.88457 5.65833 6.66791 5.875C6.45124 5.65833 6.12624 5.55 5.80124 5.55C5.58457 5.55 5.42207 5.60417 5.25957 5.65833C5.15124 5.55 5.04291 5.49583 4.88041 5.49583C4.60957 5.49583 4.39291 5.7125 4.39291 5.98333V9.17917C4.39291 9.45 4.60957 9.66667 4.88041 9.66667C5.15124 9.66667 5.36791 9.45 5.36791 9.17917V6.95833C5.36791 6.74167 5.53041 6.57917 5.74707 6.57917C5.96374 6.57917 6.12624 6.74167 6.12624 6.95833V9.23333C6.12624 9.50417 6.34291 9.72083 6.61374 9.72083C6.88457 9.72083 7.10124 9.50417 7.10124 9.23333V6.95833C7.10124 6.74167 7.26374 6.57917 7.48041 6.57917C7.69707 6.57917 7.85957 6.74167 7.85957 6.95833V9.23333C7.91374 9.50417 8.18457 9.72083 8.45541 9.72083ZM10.7304 3.7625C10.0804 3.7625 9.53874 4.30417 9.53874 4.95417C9.53874 5.225 9.75541 5.44167 10.0262 5.44167C10.2971 5.44167 10.5137 5.225 10.5137 4.95417C10.5137 4.84583 10.5679 4.79167 10.6762 4.79167C10.7304 4.79167 10.8387 4.84583 10.8387 4.95417C10.8387 5.00833 10.7304 5.225 10.2429 5.76667C9.9179 6.09167 9.64707 6.3625 9.64707 6.3625C9.48457 6.525 9.4304 6.74167 9.53874 6.90417C9.59291 7.12083 9.80957 7.22917 10.0262 7.22917H11.3804C11.6512 7.22917 11.8679 7.0125 11.8679 6.74167C11.8679 6.47083 11.6512 6.25417 11.3804 6.25417H11.2721C11.7054 5.7125 11.9221 5.33333 11.9221 5.00833C11.9221 4.25 11.3804 3.7625 10.7304 3.7625Z",fill:"black"})}),Hse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5938 15C14.112 15 14.5312 14.5807 14.5312 14.0625V7.5C14.5312 6.9818 14.112 6.5625 13.5938 6.5625H12.6562V0.9375C12.6562 0.419297 12.237 0 11.7188 0H5.15625C4.63805 0 4.21875 0.419297 4.21875 0.9375V2.8125H1.40625C0.888047 2.8125 0.46875 3.2318 0.46875 3.75V14.0625C0.46875 14.5807 0.888047 15 1.40625 15H13.5938ZM1.40625 3.75H4.21875V5.5H3.5C3.22386 5.5 3 5.72386 3 6C3 6.27614 3.22386 6.5 3.5 6.5H4.21875V8H3.5C3.22386 8 3 8.22386 3 8.5C3 8.77614 3.22386 9 3.5 9H4.21875V10.5H3.5C3.22386 10.5 3 10.7239 3 11C3 11.2761 3.22386 11.5 3.5 11.5H4.21875V14.0625H1.40625V3.75ZM5.15625 0.9375H11.7188V14.0625H8.90625V11.25H7.96875V14.0625H5.15625V0.9375ZM12.6562 7.5H13.5938V14.0625H12.6562V7.5ZM6 9.5C6 9.22386 6.22386 9 6.5 9H10.5C10.7761 9 11 9.22386 11 9.5C11 9.77614 10.7761 10 10.5 10H6.5C6.22386 10 6 9.77614 6 9.5ZM6.5 3C6.22386 3 6 3.22386 6 3.5C6 3.77614 6.22386 4 6.5 4H10.5C10.7761 4 11 3.77614 11 3.5C11 3.22386 10.7761 3 10.5 3H6.5ZM6 7.5C6 7.22386 6.22386 7 6.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H6.5C6.22386 8 6 7.77614 6 7.5ZM6.5 5C6.22386 5 6 5.22386 6 5.5C6 5.77614 6.22386 6 6.5 6H10.5C10.7761 6 11 5.77614 11 5.5C11 5.22386 10.7761 5 10.5 5H6.5Z",fill:"black"})}),Wse=()=>Xe("svg",{width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4949 0.505013C14.7683 0.77838 14.7683 1.2216 14.4949 1.49496L1.49493 14.495C1.22156 14.7683 0.778343 14.7683 0.504977 14.495C0.23161 14.2216 0.23161 13.7784 0.504977 13.505L13.505 0.505013C13.7783 0.231646 14.2216 0.231646 14.4949 0.505013ZM14.495 6.50503C14.7683 6.77839 14.7683 7.22161 14.495 7.49497L7.49497 14.495C7.22161 14.7683 6.77839 14.7683 6.50503 14.495C6.23166 14.2216 6.23166 13.7784 6.50503 13.505L13.505 6.50503C13.7784 6.23166 14.2216 6.23166 14.495 6.50503ZM8.49498 1.49497C8.76834 1.22161 8.76834 0.778392 8.49498 0.505025C8.22161 0.231658 7.77839 0.231658 7.50503 0.505025L0.505025 7.50503C0.231658 7.77839 0.231658 8.22161 0.505025 8.49498C0.778392 8.76834 1.22161 8.76834 1.49497 8.49498L8.49498 1.49497ZM3.49497 0.505025C3.76834 0.778392 3.76834 1.22161 3.49497 1.49497L1.49497 3.49497C1.22161 3.76834 0.778392 3.76834 0.505025 3.49497C0.231658 3.22161 0.231658 2.77839 0.505025 2.50503L2.50503 0.505025C2.77839 0.231658 3.22161 0.231658 3.49497 0.505025ZM14.495 12.495C14.7684 12.2216 14.7684 11.7784 14.495 11.505C14.2217 11.2317 13.7784 11.2317 13.5051 11.505L11.5051 13.505C11.2317 13.7784 11.2317 14.2216 11.5051 14.495C11.7784 14.7683 12.2217 14.7683 12.495 14.495L14.495 12.495Z",fill:"black"})}),Zse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.60002 4C8.60002 3.75732 8.45384 3.53854 8.22963 3.44567C8.00543 3.3528 7.74736 3.40413 7.57576 3.57573L5.57576 5.57573C5.34145 5.81005 5.34145 6.18995 5.57576 6.42426C5.81007 6.65857 6.18997 6.65857 6.42429 6.42426L7.40002 5.44852V10.4H6.50002C6.16865 10.4 5.90002 10.6686 5.90002 11C5.90002 11.3314 6.16865 11.6 6.50002 11.6H9.50002C9.8314 11.6 10.1 11.3314 10.1 11C10.1 10.6686 9.8314 10.4 9.50002 10.4H8.60002V4Z",fill:"black"})}),Kse=()=>Xe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 15 15",fill:"none",children:Xe("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.31257 14.9513C2.38285 14.9835 2.45927 15.0001 2.53658 15C2.66433 14.9997 2.78777 14.9537 2.88462 14.8704C2.98148 14.7871 3.04538 14.672 3.0648 14.5457L5.20765 0.617136C5.22508 0.478692 5.1878 0.338912 5.10375 0.227531C5.0197 0.116151 4.89551 0.0419601 4.75759 0.0207426C4.61968 -0.00047491 4.47893 0.0329551 4.36529 0.113921C4.25164 0.194887 4.17407 0.316999 4.14908 0.454279L2.00622 14.3828C1.99447 14.4593 1.9994 14.5373 2.02067 14.6116C2.04193 14.686 2.07903 14.7548 2.12942 14.8134C2.17981 14.8721 2.24229 14.9191 2.31257 14.9513ZM12.9007 14.8704C12.9975 14.9537 13.121 14.9997 13.2487 15C13.326 15.0001 13.4025 14.9835 13.4727 14.9513C13.543 14.9191 13.6055 14.8721 13.6559 14.8134C13.7063 14.7548 13.7434 14.686 13.7646 14.6116C13.7859 14.5373 13.7908 14.4593 13.7791 14.3828L11.6362 0.454279C11.6112 0.316999 11.5337 0.194887 11.42 0.113921C11.3064 0.0329551 11.1656 -0.00047491 11.0277 0.0207426C10.8898 0.0419601 10.7656 0.116151 10.6816 0.227531C10.5975 0.338912 10.5602 0.478692 10.5777 0.617136L12.7205 14.5457C12.7399 14.672 12.8038 14.7871 12.9007 14.8704ZM8.5 10.5C8.5 10.2239 8.27614 10 8 10C7.72386 10 7.5 10.2239 7.5 10.5V14.5C7.5 14.7761 7.72386 15 8 15C8.27614 15 8.5 14.7761 8.5 14.5V10.5ZM8 4C8.27614 4 8.5 4.22386 8.5 4.5V7.5C8.5 7.77614 8.27614 8 8 8C7.72386 8 7.5 7.77614 7.5 7.5V4.5C7.5 4.22386 7.72386 4 8 4ZM8.5 1C8.5 0.723858 8.27614 0.5 8 0.5C7.72386 0.5 7.5 0.723858 7.5 1V2C7.5 2.27614 7.72386 2.5 8 2.5C8.27614 2.5 8.5 2.27614 8.5 2V1Z",fill:"black"})}),Xse={population:Xe(qse,{}),area_km2:Xe(Gse,{}),total_building_count:Xe(Hse,{}),populated_area_km2:Xe(Wse,{}),one:Xe(Zse,{})},Yse={population:lr.t("bivariate.matrix.icon.population"),area_km2:lr.t("bivariate.matrix.icon.area_km2"),total_building_count:lr.t("bivariate.matrix.icon.total_building_count"),populated_area_km2:lr.t("bivariate.matrix.icon.populated_area_km2"),one:lr.t("bivariate.matrix.icon.one")},CF=({iconId:e})=>{const t=Xse[e]||Xe(Kse,{}),n=Yse[e]||lr.t("bivariate.matrix.icon.roads");return Xe(Mb,{tooltipText:n,children:({showTooltip:r,hideTooltip:a})=>Xe("span",{className:Vse.denominatorIcon,onPointerOver:r,onPointerLeave:a,children:t})})},Jse=e=>{let t=e;const n=new Set,r=a=>{t=a,n.forEach(c=>c())};return()=>{const[a,c]=pt.useState(t);return pt.useEffect(()=>{const d=()=>{c(t)};return n.add(d),d(),()=>{n.delete(d)}},[]),[a,r]}},Qse=Jse({headingId:""}),ele="_denominators_1m5c6_1",tle="_row_1m5c6_5",nle="_column_1m5c6_9",rle="_denominatorSelector_1m5c6_13",ile="_disabled_1m5c6_25",ole="_denominatorsContainer_1m5c6_43",ale="_quotientItem_1m5c6_79",sle="_selected_1m5c6_85",Lp={denominators:ele,row:tle,column:nle,denominatorSelector:rle,disabled:ile,denominatorsContainer:ole,quotientItem:ale,selected:sle},lle=({numeratorId:e,denominatorId:t,numeratorLabel:n,quality:r,onSelectQuotient:a,isSelected:c=!1})=>{const d=l=>{l.stopPropagation(),a(e,t)};return mn("div",{className:Ci(Lp.quotientItem,c&&Lp.selected),onClick:d,children:[Xe(CF,{iconId:t}),sessionStorage.getItem("BIVARIATE_QA_MOD")&&Xe("div",{className:"qualityLabel",children:r??"&nbsp;"}),Xe("div",{className:"quotientLabel",children:n})]})},ule=100/70,cle=5,EF=pt.memo(({id:e,quotients:t,selectedQuotient:n,onSelectQuotient:r,type:a,children:c})=>{const[d,l]=Qse(),x=F=>{if(F.stopPropagation(),d.headingId===e)l({headingId:"",width:0});else{const $=F.currentTarget.getBoundingClientRect(),N=F.currentTarget.parentElement.parentElement.getBoundingClientRect(),Z=Math.ceil(($.left-N.left)*ule+cle);l({headingId:e,width:Z})}},b=pt.useCallback((F,$)=>{l({headingId:""}),r(F,$)},[l,r]),[E,A]=pt.useMemo(()=>{const F=t.findIndex(({id:$})=>$[0]===n.id[0]&&$[1]===n.id[1]);return F>=0?[t[F],t.filter(($,N)=>N!==F)]:[null,t]},[t,n.id]),L=({id:F,label:$,quality:N},Z)=>Xe(lle,{onSelectQuotient:b,quality:N,numeratorId:F[0],denominatorId:F[1],numeratorLabel:$,isSelected:Z},JSON.stringify(F));return mn("div",{className:Ci({[Lp.denominators]:!0,[Lp.row]:a==="horizontal",[Lp.column]:a==="vertical"}),children:[Xe("div",{onClick:x,children:c}),d.headingId===e&&mn("div",{className:Lp.denominatorsContainer,style:a==="horizontal"?{left:-d.width,right:0}:{top:-d.width,bottom:0},children:[E&&L(E,!0),A.map(F=>L(F,!1))]})]})});EF.displayName="QuotientSelector";const hle="_axisRecord_1dbhd_8",fle="_container_1dbhd_13",dle="_column_1dbhd_34",ple="_row_1dbhd_43",mle="_selected_1dbhd_110",gle="_corner_1dbhd_142",yle="_hovered_1dbhd_146",_le="_verticalText_1dbhd_173",vle="_quotientsCountLabel_1dbhd_185",Vu={axisRecord:hle,container:fle,column:dle,row:ple,selected:mle,corner:gle,hovered:yle,verticalText:_le,quotientsCountLabel:vle},xle=(e,t)=>({gridColumn:e?`${t+3} / ${t+4}`:"1",gridRow:e?"1":`${t+3} / ${t+4}`}),GC=pt.forwardRef(({index:e,type:t,className:n,selectedIndex:r=-1,headerCell:a,id:c,onCellHover:d,onCellClick:l,onSelectQuotient:x,baseDimension:b,calculateHeadingsStyle:E},A)=>{const L=()=>{d(e)},F=()=>{d(null)},$=xe=>{const Le=xe.target;Le.tagName==="svg"||Le.tagName==="path"||Le.className&&Le.className.indexOf&&Le.className.indexOf("denominator")!==-1||l(e,xe)},N=pt.useCallback((xe,Le)=>{x(e,xe,Le)},[x,e]),Z=a.quotients.length>1?mn("div",{className:Vu.quotientsCountLabel,children:["+",a.quotients.length-1," layers",Xe(rV,{})]}):null,R=pt.useRef(null);let q=!1,G=!1;const ee=t==="horizontal",ae=t==="vertical",K=Ci({[n||""]:n,[Vu.axisRecord]:!0,[Vu.column]:ae,[Vu.row]:ee,[Vu.verticalText]:ae,horizontal:ee,vertical:ae});function le(){return`${K} ${Ci({[Vu.hovered]:q,[Vu.selected]:G})}`}return pt.useImperativeHandle(A,()=>({setHovered:()=>{R.current&&(q=!0,R.current.className=le())},resetHovered:()=>{R.current&&(q=!1,R.current.className=le())},setSelectedCol:()=>{ae&&R.current&&(G=!0,R.current.className=le())},resetSelectedCol:()=>{ae&&R.current&&(G=!1,R.current.className=le())},setSelectedRow:()=>{ee&&R.current&&(G=!0,R.current.className=le())},resetSelectedRow:()=>{ee&&R.current&&(G=!1,R.current.className=le())}})),Xe("div",{ref:R,onMouseEnter:L,onMouseOut:F,onClick:$,style:xle(t==="vertical",e),className:K,children:mn("div",{style:E(b,ae,e),className:Vu.container,children:[Xe("div",{className:Vu.corner}),Xe(CF,{iconId:a.selectedQuotient.id[1]}),sessionStorage.getItem("BIVARIATE_QA_MOD")&&Xe("div",{className:"qualityLabel",children:a.quality?a.quality:"&nbsp;"}),a.label,Z&&Xe(EF,{id:`quotient_${c}`,onSelectQuotient:N,selectedQuotient:a.selectedQuotient,quotients:a.quotients,type:t,children:Z})]})})});GC.displayName="BivariateMatrixHeadingEntry";const ble="_axisCaptionRoot_1yhrg_1",wle="_axisCaptionAnchor_1yhrg_6",Sle="_axisCaptionBody_1yhrg_10",Cle="_tooltipHover_1yhrg_24",Ele="_axisCaptionText_1yhrg_33",kle="_popupContent_1yhrg_47",Op={axisCaptionRoot:ble,axisCaptionAnchor:wle,axisCaptionBody:Sle,tooltipHover:Cle,axisCaptionText:Ele,popupContent:kle},Ale=mn("div",{className:Op.axisCaptionText,children:[Xe("p",{children:lr.t("bivariate.matrix.caption.tooltip.p1")}),mn("ul",{children:[Xe("li",{children:lr.t("bivariate.matrix.caption.tooltip.li1")}),Xe("li",{children:lr.t("bivariate.matrix.caption.tooltip.li2")})]}),Xe("br",{}),Xe("b",{children:lr.t("bivariate.matrix.caption.tooltip.b")}),Xe("p",{children:lr.t("bivariate.matrix.caption.tooltip.p2")}),Xe("p",{children:lr.t("bivariate.matrix.caption.tooltip.p3")})]}),Tle={popupContent:Op.popupContent},Ple=({baseDimension:e=0})=>{const t=pt.useRef(null);return pt.useLayoutEffect(()=>{var n;(n=t.current)==null||n.scrollIntoView({block:"center"})},[]),Xe("div",{className:Op.axisCaptionRoot,ref:t,children:Xe("div",{className:Op.axisCaptionAnchor,style:{left:-e},children:Xe(Mb,{hoverBehavior:!1,tooltipId:"axis_caption",tooltipText:Ale,popupClasses:Tle,children:({showTooltip:n})=>mn("div",{className:Op.axisCaptionBody,children:[Xe(bP,{position:"left"}),Xe("br",{}),mn("div",{className:Op.tooltipHover,onClick:n,children:[Xe("span",{children:lr.t("bivariate.matrix.caption.base_axis")}),Xe(oV,{}),Xe("span",{children:lr.t("bivariate.matrix.caption.annex_axis")})]}),Xe("br",{}),Xe(bP,{position:"right"})]})})})})},bP=({position:e="left"})=>mn("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"22",viewBox:"0 0 6 22",fill:"none",transform:e==="left"?"rotate(90)":"rotate(-90)",children:[Xe("path",{d:"M3 1V20.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),Xe("path",{d:"M1 18L3 21.5L5 18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),Rv=3,Dv=3,Ile=15,kF=({matrix:e,xHeadings:t,yHeadings:n,onSelectCell:r,selectedCell:a,cellSize:c=0,onSelectQuotient:d})=>{const l=pt.useRef(null),x=pt.useContext(yse),b=[],E=[];let A=-1,L=-1;const F=pt.useRef((a==null?void 0:a.x)??-1),$=pt.useRef((a==null?void 0:a.y)??-1),N=_C(gse.setSelectCellCallback),Z=(Ve,_e,we)=>{_e>=0&&(b[_e]||(b[_e]=[]),b[_e].push(Ve)),we>=0&&(E[we]||(E[we]=[]),E[we].push(Ve))},R=(Ve,_e)=>{if(A!==Ve&&(A=Ve,A!==-1)){const we=E[A];we&&we.forEach(X=>{X==null||X.setHovered()})}if(L!==_e&&(L=_e,L!==-1)){const we=b[L];we&&we.forEach(X=>{X==null||X.setHovered()})}},q=()=>{if(A!==-1){const Ve=E[A];Ve&&Ve.forEach(_e=>{_e==null||_e.resetHovered()}),A=-1}if(L!==-1){const Ve=b[L];Ve&&Ve.forEach(_e=>{_e==null||_e.resetHovered()}),L=-1}},G=Ve=>{q(),Ve&&R(Ve,L)},ee=Ve=>{q(),Ve&&R(A,Ve)},ae=()=>{if(F.current!==-1){const Ve=E[F.current];Ve&&Ve.forEach(_e=>{_e==null||_e.resetSelectedCol()}),F.current=-1}if($.current!==-1){const Ve=b[$.current];Ve&&Ve.forEach(_e=>{_e==null||_e.resetSelectedRow()}),$.current=-1}},K=(Ve,_e,we)=>{ae(),xe(Ve,_e),r(Ve,_e,we)},le=(Ve,_e)=>{ae(),xe(Ve,_e)},xe=(Ve,_e)=>{if(Ve!==-1&&F.current!==Ve){F.current=Ve;const we=E[F.current];we&&we.forEach(X=>{X==null||X.setSelectedCol()})}if(_e!==-1&&$.current!==_e){$.current=_e;const we=b[$.current];we&&we.forEach(X=>{X==null||X.setSelectedRow()})}},Le=(Ve,_e)=>{K(Ve,$.current,_e)},Oe=(Ve,_e)=>{K(F.current,Ve,_e)},Fe=pt.useCallback((Ve,_e,we,X)=>{d(!1,Ve,_e,we,X)},[d]),Ge=pt.useCallback((Ve,_e,we,X)=>{d(!0,Ve,_e,we,X)},[d]),tt=bse(t,n),yt=Math.sqrt(Math.pow(t.length*ex,2)+Math.pow(n.length*ex,2))*_se+Ile;pt.useEffect(()=>{x==null||x.onMatrixPositionRecalculated(tt,yt),l.current&&(l.current.style.visibility="visible")},[tt]);const At=vse(t.length+1,n.length+1,c),zt=pt.useMemo(()=>({width:yt,height:yt}),[yt]),Vt=pt.useMemo(()=>xse(t.length+Rv,n.length+Dv),[t,n]);return pt.useEffect(()=>{N(le.bind(void 0)),a&&(a.x!==-1||a.y!==-1)&&le(a.x,a.y)},[e]),Xe("div",{ref:l,className:xP.matrixContainer,style:zt,children:mn("div",{style:At,className:xP.rotatedMatrix,children:[e.map((Ve,_e)=>Xe(qC,{type:"horizontal",style:Vt[-1+Rv][_e+Dv],ref:we=>Z(we,_e,-1)},`${_e}_row_connector`)),e[0].map((Ve,_e)=>Xe(qC,{type:"vertical",style:Vt[_e+Rv][-1+Dv],ref:we=>Z(we,-1,_e)},`${_e}_col_connector`)),e.map((Ve,_e)=>Ve.map((we,X)=>Xe(SF,{x:X,y:_e,onClick:K,onMouseOver:R,onMouseOut:q,style:Vt[X+Rv][_e+Dv],ref:oe=>Z(oe,_e,X),value:we===null?void 0:we,disabled:we===null,firstRow:_e===0,firstCol:X===0,lastRow:_e===e.length-1,lastCol:X===Ve.length-1},`matrix_cell_${X}_${_e}`))),[...n].reverse().map((Ve,_e)=>Xe(GC,{id:`hor_${n.length-1-_e}`,index:n.length-1-_e,type:"horizontal",selectedIndex:a==null?void 0:a.y,headerCell:Ve,onCellHover:ee,onCellClick:Oe,onSelectQuotient:Ge,baseDimension:tt,calculateHeadingsStyle:vP,ref:we=>Z(we,n.length-1-_e,-1)},`hor_${n.length-1-_e}`)),Xe(Ple,{baseDimension:tt}),t.map((Ve,_e)=>Xe(GC,{id:`vert_${_e}`,index:_e,type:"vertical",selectedIndex:a==null?void 0:a.x,headerCell:Ve,onCellHover:G,onCellClick:Le,onSelectQuotient:Fe,baseDimension:tt,calculateHeadingsStyle:vP,ref:we=>Z(we,-1,_e)},`vert_${_e}`))]})})};kF.displayName="BivariateMatrixControl";const Mle=pt.memo(kF,(e,t)=>e.matrix===t.matrix),vs={xGroups:[{parent:'["count","area_km2"]',quotients:[["count","area_km2"]],selectedQuotient:["count","area_km2"]},{parent:'["local_hours","area_km2"]',quotients:[["count","populated_area_km2"],["population_prev","populated_area_km2"],["gdp","populated_area_km2"],["population_prev","area_km2"],["gdp","area_km2"],["mandays_maxtemp_over_32c_1c","populated_area_km2"],["building_count","populated_area_km2"],["mandays_maxtemp_over_32c_1c","area_km2"],["osm_users","area_km2"],["total_hours","populated_area_km2"],["covid19_confirmed","populated_area_km2"],["covid19_confirmed","area_km2"],["osm_users","populated_area_km2"],["local_hours","area_km2"],["local_hours","populated_area_km2"]],selectedQuotient:["local_hours","area_km2"]},{parent:'["building_count","area_km2"]',quotients:[["building_count","area_km2"]],selectedQuotient:["building_count","area_km2"]},{parent:'["total_hours","area_km2"]',quotients:[["total_hours","area_km2"]],selectedQuotient:["total_hours","area_km2"]},{parent:'["highway_length","area_km2"]',quotients:[["total_road_length","area_km2"],["highway_length","area_km2"]],selectedQuotient:["highway_length","area_km2"]},{parent:'["view_count","area_km2"]',quotients:[["view_count","populated_area_km2"],["view_count_bf2402","populated_area_km2"],["view_count","area_km2"],["view_count_bf2402","area_km2"]],selectedQuotient:["view_count","area_km2"]},{parent:'["highway_length","populated_area_km2"]',quotients:[["highway_length","populated_area_km2"]],selectedQuotient:["highway_length","populated_area_km2"]},{parent:'["total_road_length","populated_area_km2"]',quotients:[["total_road_length","populated_area_km2"]],selectedQuotient:["total_road_length","populated_area_km2"]},{parent:'["man_distance_to_hospital","area_km2"]',quotients:[["man_distance_to_hospital","area_km2"]],selectedQuotient:["man_distance_to_hospital","area_km2"]},{parent:'["unknown_forest","total_building_count"]',quotients:[["total_road_length","total_building_count"],["unknown_forest","total_building_count"]],selectedQuotient:["unknown_forest","total_building_count"]},{parent:'["forest","total_building_count"]',quotients:[["highway_length","total_building_count"],["forest","total_building_count"]],selectedQuotient:["forest","total_building_count"]},{parent:'["man_distance_to_hospital","populated_area_km2"]',quotients:[["man_distance_to_hospital","populated_area_km2"]],selectedQuotient:["man_distance_to_hospital","populated_area_km2"]},{parent:'["man_distance_to_fire_brigade","area_km2"]',quotients:[["man_distance_to_fire_brigade","area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","area_km2"]},{parent:'["osm_users","population"]',quotients:[["osm_users","population"]],selectedQuotient:["osm_users","population"]},{parent:'["unknown_forest","population"]',quotients:[["total_road_length","population"],["unknown_forest","population"]],selectedQuotient:["unknown_forest","population"]},{parent:'["count","total_building_count"]',quotients:[["count","total_building_count"]],selectedQuotient:["count","total_building_count"]},{parent:'["highway_length","population"]',quotients:[["forest","population"],["highway_length","population"]],selectedQuotient:["highway_length","population"]},{parent:'["man_distance_to_fire_brigade","populated_area_km2"]',quotients:[["man_distance_to_fire_brigade","populated_area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","populated_area_km2"]}],yGroups:[{parent:'["local_hours","area_km2"]',quotients:[["population","populated_area_km2"],["total_building_count","populated_area_km2"],["count","populated_area_km2"],["population_prev","populated_area_km2"],["total_building_count","area_km2"],["gdp","populated_area_km2"],["mandays_maxtemp_over_32c_1c","populated_area_km2"],["population_prev","area_km2"],["gdp","area_km2"],["building_count","populated_area_km2"],["mandays_maxtemp_over_32c_1c","area_km2"],["total_hours","populated_area_km2"],["osm_users","area_km2"],["covid19_confirmed","populated_area_km2"],["osm_users","populated_area_km2"],["covid19_confirmed","area_km2"],["local_hours","populated_area_km2"],["local_hours","area_km2"]],selectedQuotient:["local_hours","area_km2"]},{parent:'["population","area_km2"]',quotients:[["population","area_km2"]],selectedQuotient:["population","area_km2"]},{parent:'["count","area_km2"]',quotients:[["count","area_km2"]],selectedQuotient:["count","area_km2"]},{parent:'["building_count","area_km2"]',quotients:[["building_count","area_km2"]],selectedQuotient:["building_count","area_km2"]},{parent:'["total_hours","area_km2"]',quotients:[["total_hours","area_km2"]],selectedQuotient:["total_hours","area_km2"]},{parent:'["highway_length","area_km2"]',quotients:[["total_road_length","area_km2"],["highway_length","area_km2"]],selectedQuotient:["highway_length","area_km2"]},{parent:'["view_count","area_km2"]',quotients:[["view_count","populated_area_km2"],["view_count_bf2402","populated_area_km2"],["view_count","area_km2"],["view_count_bf2402","area_km2"]],selectedQuotient:["view_count","area_km2"]},{parent:'["highway_length","populated_area_km2"]',quotients:[["highway_length","populated_area_km2"]],selectedQuotient:["highway_length","populated_area_km2"]},{parent:'["total_road_length","populated_area_km2"]',quotients:[["total_road_length","populated_area_km2"]],selectedQuotient:["total_road_length","populated_area_km2"]},{parent:'["man_distance_to_hospital","area_km2"]',quotients:[["man_distance_to_hospital","area_km2"]],selectedQuotient:["man_distance_to_hospital","area_km2"]},{parent:'["unknown_forest","total_building_count"]',quotients:[["total_road_length","total_building_count"],["unknown_forest","total_building_count"]],selectedQuotient:["unknown_forest","total_building_count"]},{parent:'["forest","total_building_count"]',quotients:[["highway_length","total_building_count"],["forest","total_building_count"]],selectedQuotient:["forest","total_building_count"]},{parent:'["populated_area_km2","area_km2"]',quotients:[["populated_area_km2","area_km2"]],selectedQuotient:["populated_area_km2","area_km2"]},{parent:'["count","population"]',quotients:[["populated_area_km2","population"],["count","population"]],selectedQuotient:["count","population"]},{parent:'["populated_area_km2","total_building_count"]',quotients:[["populated_area_km2","total_building_count"]],selectedQuotient:["populated_area_km2","total_building_count"]},{parent:'["man_distance_to_hospital","populated_area_km2"]',quotients:[["man_distance_to_hospital","populated_area_km2"]],selectedQuotient:["man_distance_to_hospital","populated_area_km2"]},{parent:'["man_distance_to_fire_brigade","area_km2"]',quotients:[["man_distance_to_fire_brigade","area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","area_km2"]},{parent:'["osm_users","population"]',quotients:[["osm_users","population"]],selectedQuotient:["osm_users","population"]},{parent:'["unknown_forest","population"]',quotients:[["total_road_length","population"],["unknown_forest","population"]],selectedQuotient:["unknown_forest","population"]},{parent:'["forest","population"]',quotients:[["highway_length","population"],["forest","population"]],selectedQuotient:["forest","population"]},{parent:'["avg_elevation","one"]',quotients:[["avg_elevation","one"]],selectedQuotient:["avg_elevation","one"]},{parent:'["man_distance_to_fire_brigade","populated_area_km2"]',quotients:[["man_distance_to_fire_brigade","populated_area_km2"]],selectedQuotient:["man_distance_to_fire_brigade","populated_area_km2"]}],matrix:[[.6330778143702572,null,.5428354424212366,.8125028273732107,.41794744630059005,.49075709882519214,.26266841211785613,.17540431775688137,.2817357956135096,-.08277918866628682,-.07354014808858399,.19952042019781102,.2900699030570146,-.09959194444606909,-.05653224901990311,-.08121946780800145,-.06293349539553206,.210717984018573],[.7671266114613431,.4624540160877126,.7461271344307278,.6236796022803118,.4651837775930101,.6983788201180583,.3282268564011803,.23940172696613696,.6102526069773476,-.06854993994184201,-.06300652330464818,.5425853155901724,.5357120339754239,-.12569275885753226,-.05722122475056985,-.044124976285712575,-.07252302728830883,.46170009422253117],[null,.6330778143702572,.9448400352897224,.8088667700993942,.5478619819586914,.7272525499712613,.39403434829318645,.27693369264722456,.4212553882513244,-.09219840214177631,-.08214624778695,.3334796387999488,.3381396079397914,-.11599438338517783,-.0603311321070773,null,-.0709735871498622,.24799941442360907],[.9448400352897224,.5428354424212366,null,.676324490987385,.495437368648744,.6083458288157841,.3469868158515808,.2430950316469889,.4310608323815133,-.09512147612349764,-.08309756332167413,.3452068134908724,.33210650851954204,-.1245886065474142,-.059708735955503585,-.14339940649431673,-.07375589630648925,.24325119232100342],[.8088667700993942,.8125028273732107,.676324490987385,null,.5189347708683577,.6884534708417488,.33187782018548295,.2219184858913333,.35395740401150805,-.09412791983951108,-.0863908043684727,.26082399416277346,.349163057602413,-.0749918701328735,-.06355840786694379,-.06179508212619175,-.06748437844937322,.25841056419208985],[.5478619819586914,.41794744630059005,.495437368648744,.5189347708683577,null,.38324804690465736,null,.414339823397522,.3069414868687711,-.10644082342648567,-.10931575987231072,.2754560009958487,.2569523390521722,-.11051731563471724,-.08226769814606767,.000604231582566239,null,.20899371630213479],[.7272525499712613,.49075709882519214,.6083458288157841,.6884534708417488,.38324804690465736,null,.30947144087595235,.22699474527609945,.2830320630422097,-.04226615774405834,-.037742340113614686,.23762065170375052,.23266705566189747,-.05154149468310855,-.02870286844834339,-.031190214624625075,-.03390072345440923,.18581115270615528],[.39403434829318645,.26266841211785613,.3469868158515808,.33187782018548295,null,.30947144087595235,null,.9304780288243525,.13914319427120514,.3291875622555688,.3720654440390036,.1934927693146689,.10623582254983449,.0007285286560751833,.19378449287322094,.32680720759696696,null,.16809925893975913],[.27693369264722456,.17540431775688137,.2430950316469889,.2219184858913333,.414339823397522,.22699474527609945,.9304780288243525,null,.09020847847993732,.42400942691094484,.5064709774524677,.1712970613845418,.06714970974071707,.01180306783229655,.2255650150706005,.3599655140069753,.30252787549965515,.15970052255248204],[.4212553882513244,.2817357956135096,.4310608323815133,.35395740401150805,.3069414868687711,.2830320630422097,.13914319427120514,.09020847847993732,null,-.06649666693010343,-.06343156740380441,null,.6841527486069171,-.13779469419376966,-.0635847915251171,-.026485710953304663,-.08026301675299034,.6178257434320957],[-.09219840214177631,-.08277918866628682,-.09512147612349764,-.09412791983951108,-.10644082342648567,-.04226615774405834,.3291875622555688,.42400942691094484,-.06649666693010343,null,.7678796845524921,.012760506344240884,-.054701981754940544,.1344540319549378,null,.5631324180563558,.3071029030398512,.04014411156301263],[-.08214624778695,-.07354014808858399,-.08309756332167413,-.0863908043684727,-.10931575987231072,-.037742340113614686,.3720654440390036,.5064709774524677,-.06343156740380441,.7678796845524921,null,.014062866759102748,-.05210682697853124,.11091668928613378,.2990964999949313,.5385399665532266,.22651079092994508,.04521239572328026],[.33092297487284617,.306348164358225,.3238400065207823,.3693496848744186,.38871869483912574,.1581862969025989,-.3471496502086163,-.43374811025089965,.33796301073828167,-.3268410473725932,-.3386739643520862,.055679399245274847,.3020796910928048,-.04623557252911246,-.19287576889960628,-.23886314058329716,-.1732637367181755,.02241746611798094],[null,-.05985205635299918,-.07346388019658537,-.04156216899598115,-.06836488141749311,-.03935680545094748,.12058512533492027,.13212728757237097,-.11270465651638581,.15970627541493335,.13401194122424062,-.12384718246215928,-.10414752849189488,.7574388860132296,.48388350772788513,null,.6315662616124519,-.11571785360027256],[-.2290337466539601,-.1757661352019487,-.24760184223062584,-.18278999260309406,-.1710761141838468,-.09542438099888385,-.059267030345385996,-.013539781630611262,-.09643066932644401,.43854582251146346,.3609544353566733,-.07178405902927397,-.06341025046618942,.22096261180630974,.10541941385096928,.5599627595822098,.1278673522191922,-.032944279661146915],[.3334796387999488,.19952042019781102,.3452068134908724,.26082399416277346,.2754560009958487,.23762065170375052,.1934927693146689,.1712970613845418,null,.012760506344240884,.014062866759102748,null,.6310066640401927,-.1500265206387344,-.06689746899862688,.01986212506899432,-.08550943488376969,.676555546708353],[.3381396079397914,.2900699030570146,.33210650851954204,.349163057602413,.2569523390521722,.23266705566189747,.10623582254983449,.06714970974071707,.6841527486069171,-.054701981754940544,-.05210682697853124,.6310066640401927,null,-.12258332045801432,-.0567307219837807,-.022320716664225384,-.07178249009741255,null],[-.11599438338517783,-.09959194444606909,-.1245886065474142,-.0749918701328735,-.11051731563471724,-.05154149468310855,.0007285286560751833,.01180306783229655,-.13779469419376966,.1344540319549378,.11091668928613378,-.1500265206387344,-.12258332045801432,null,.4348018015155649,.1802672705079899,.5785565720280881,-.1349910962529299],[-.0603311321070773,-.05653224901990311,-.059708735955503585,-.06355840786694379,-.08226769814606767,-.02870286844834339,.19378449287322094,.2255650150706005,-.0635847915251171,null,.2990964999949313,-.06689746899862688,-.0567307219837807,.4348018015155649,null,.16176932292012,.7133807791437314,-.05999313994718329],[-.06778027180778882,-.06094700100554602,-.06749293269532497,-.07015551687145612,-.09380332086205506,-.03214432503025587,.20746554020517102,.2523547017592986,-.07210328538123267,.4203440217106889,null,-.0750002557187531,-.06409549706414985,.49720071299727603,.8986894662282207,.19577005850577103,.7147205376873481,-.06663105366067186],[-.1314723477716716,-.10888331650996384,-.12016811312503141,-.14500851581063834,-.14651760866997154,-.0894267074095959,-.10021629943072725,-.02053796018986287,-.08959271152178999,.07728964320941438,.11382059101409457,-.055901670004619375,-.07981810377749747,.12046075802517535,.07334344740483416,-.020568856117619418,.12080907584004444,-.040957057721220644],[.24799941442360907,.210717984018573,.24325119232100342,.25841056419208985,.20899371630213479,.18581115270615528,.16809925893975913,.15970052255248204,.6178257434320957,.04014411156301263,.04521239572328026,.676555546708353,null,-.1349910962529299,-.05999313994718329,.035960163104143954,-.07699941382657573,null]],indicators:[{name:"mhr_index",label:"Multi-hazard risk PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"mhe_index",label:"Multi-hazard exposure PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"coping_capacity_index",label:"Coping Capacity PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["important","bad"],["good"]]},{name:"resilience_index",label:"Resilience PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["important","bad"],["good"]]},{name:"vulnerability_index",label:"Vulnerability PDC GRVA",copyrights:[" 2022 Pacific Disaster Center. https://www.pdc.org/privacy-policy/"],direction:[["unimportant"],["important","bad"]]},{name:"count",label:"OSM Objects",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"count_6_months",label:"OSM Objects (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"view_count",label:"OSM Map Views",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good","important"]]},{name:"avgmax_ts",label:"OSM Last Edit Date (avg)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good"]]},{name:"max_ts",label:"OSM Last Edit Date (max)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good"]]},{name:"min_ts",label:"OSM First Edit Date (min)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["neutral"]]},{name:"osm_users",label:"OSM Mappers Edited Here",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"building_count",label:"OSM Buildings",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"building_count_6_months",label:"OSM Buildings (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"highway_length",label:"OSM Road Length",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"highway_length_6_months",label:"OSM Road Length (last 6 months)",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"local_hours",label:"OSM Mapping Hours by Local Mappers",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"total_hours",label:"OSM Mapping Hours by All Mappers",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"pop_disability_total",label:"Population with a disability",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"forest",label:"Forest Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_not_well_eng_speak",label:"Population with a difficulty speaking English",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["good"],["important","bad"]]},{name:"evergreen_needle_leaved_forest",label:"Evergreen Needle-leaved Forest Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_under_5_total",label:"Population under age of 5",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"shrubs",label:"Shrubland Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"pop_over_65_total",label:"Population over age of 65",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant"],["important"]]},{name:"herbage",label:"Herbaceous Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"poverty_families_total",label:"Families living below poverty line",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["unimportant, good"],["important"]]},{name:"unknown_forest",label:"Unknown Forest Type Landcover Area",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050"],direction:[["unimportant"],["important"]]},{name:"volcanos_count",label:"Number of volcanos",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"covid19_vaccines",label:"COVID19 Vaccine Acceptance",copyrights:[" Data from Delphi COVIDcast, covidcast.cmu.edu"],direction:[["bad"],["neutral"]]},{name:"covid19_confirmed",label:"COVID19 Confirmed Cases",copyrights:[" Data from JHU CSSE COVID-19 Dataset"],direction:[["good"],["bad"]]},{name:"avg_slope",label:"Average slope",copyrights:[" Data from General Bathymatric Chart of the Oceans, www.gebco.net"],direction:[["good","unimportant"],["bad","important"]]},{name:"avg_elevation",label:"Average elevation",copyrights:[" Data from General Bathymatric Chart of the Oceans, www.gebco.net"],direction:[["good","unimportant"],["bad","important"]]},{name:"gdp",label:"Gross Domestic Product",copyrights:[" Kontur https://kontur.io/"," 2019 The World Bank Group, CC-BY 4.0","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, Myroslava Lesiv, Nandin-Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","@ OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad"],["good"]]},{name:"population_prev",label:"Population (previous version)",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"wildfires",label:"Wildfire Days Per Year",copyrights:[" NRT VIIRS 375 m Active Fire product VJ114IMGTDL_NRT. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/VIIRS/VJ114IMGT_NRT.002","NRT VIIRS 375 m Active Fire product VNP14IMGT. Available on-line [https://earthdata.nasa.gov/firms]. doi:10.5067/FIRMS/VIIRS/VNP14IMGT_NRT.002","MODIS Collection 6 NRT Hotspot / Active Fire Detections MCD14DL. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/MODIS/MCD14DL.NRT.006","MODIS Collection 6 NRT Hotspot / Active Fire Detections MCD14ML. Available on-line [https://earthdata.nasa.gov/firms]. doi: 10.5067/FIRMS/MODIS/MCD14ML"],direction:[["good","unimportant"],["bad","important"]]},{name:"avg_ndvi",label:"Average NDVI, JUN 2019",copyrights:[" Data from Sentinel-2 L2A 120m Mosaic, CC-BY 4.0, https://forum.sentinel-hub.com/c/aws-sentinel"],direction:[["bad"],["good"]]},{name:"industrial_area",label:"OSM industrial area",copyrights:[" OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"pop_without_car",label:"Population without a car",copyrights:[" United States Census Bureau. 2019 5-Year American Community Survey (ACS). https://www.census.gov/en.html"],direction:[["neutral"],["important"]]},{name:"area_km2",label:"Area",copyrights:["Concept of areas  Brahmagupta, Ren Descartes"],direction:[["neutral"],["neutral"]]},{name:"days_maxtemp_over_32c_1c",label:"Days above 32C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxtemp_over_32c_2c",label:"Days above 32C, potential scenario (2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_mintemp_above_25c_1c",label:"Nights above 25C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_mintemp_above_25c_2c",label:"Nights above 25C, potential scenario(2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxwetbulb_over_32c_1c",label:"Days above 32C wet-bulb, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"days_maxwetbulb_over_32c_2c",label:"Days above 32C wet-bulb, potential scenario(2C)",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"mandays_maxtemp_over_32c_1c",label:"Man-days above 32C, recent scenario",copyrights:[" 2021 Probable Futures, a Project of the SouthCoast Community Foundation. https://probablefutures.org/, CC BY 4.0"],direction:[["good"],["bad"]]},{name:"man_distance_to_fire_brigade",label:"Man-distance to fire brigade",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["bad"]]},{name:"man_distance_to_hospital",label:"Man-distance to hospitals",copyrights:[" Kontur https://kontur.io/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["good"],["bad"]]},{name:"total_road_length",label:"Total Roads length",copyrights:["2019 Facebook, Inc. and its affiliates https://github.com/facebookmicrosites/Open-Mapping-At-Facebook/blob/main/LICENSE.md"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"foursquare_places_count",label:"Foursquare Japan places count",copyrights:["Foursquare Labs Inc","Sample data"],direction:[["unimportant"],["important"]]},{name:"foursquare_visits_count",label:"Foursquare Japan visits count",copyrights:["Foursquare Labs Inc","Sample data"],direction:[["unimportant"],["important"]]},{name:"one",label:"1",copyrights:["Numbers  Muammad ibn Ms al-Khwrizm"],direction:[["neutral"],["neutral"]]},{name:"populated_area_km2",label:"Populated area",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"population",label:"Population",copyrights:[" Kontur https://kontur.io/","Facebook Connectivity Lab and Center for International Earth Science Information Network - CIESIN - Columbia University. 2016. High Resolution Settlement Layer (HRSL). Source imagery for HRSL  2016 DigitalGlobe. https://dataforgood.fb.com/tools/population-density-maps/","Dataset: Schiavina, Marcello; Freire, Sergio; MacManus, Kytt (2019): GHS population grid multitemporal (1975, 1990, 2000, 2015) R2019A. European Commission, Joint Research Centre (JRC) DOI: 10.2905/42E8BE89-54FF-464E-BE7B-BF9E64DA5218 PID: http://data.europa.eu/89h/0c6b9751-a71f-4062-830b-43c9f432370f Concept & Methodology: Freire, Sergio; MacManus, Kytt; Pesaresi, Martino; Doxsey-Whitfield, Erin; Mills, Jane (2016): Development of new open and free multi-temporal global population grids at 250 m resolution. Geospatial Data in a Changing World; Association of Geographic Information Laboratories in Europe (AGILE). AGILE 2016","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Unconstrained Individual countries 2020 (100m resolution): WorldPop - https://www.worldpop.org/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"total_building_count",label:"Total Buildings Estimate",copyrights:[" Kontur https://kontur.io/","Copernicus Global Land Service: Land Cover 100 m: Marcel Buchhorn, Bruno Smets, Luc Bertels, Bert De Roo, MyroslavaLesiv, Nandin - Erdene Tsendbazar,  Steffen Fritz. (2020). Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe (Version V3.0.1) Data set. Zenodo. http://doi.org/10.5281/zenodo.3939050","Geoalert Urban Mapping: Chechnya, Moscow region, Tyva - https://github.com/Geoalert/urban-mapping","Microsoft Buildings: Australia, Canada, Tanzania, Uganda, USA: This data is licensed by Microsoft under the Open Data Commons Open Database License (ODbL).","NZ Building Outlines data sourced from the LINZ Data Service - https://data.linz.govt.nz/"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["unimportant"],["important"]]},{name:"view_count_bf2402",label:"OSM Map Views 30 days before 24.02.2022",copyrights:[" Kontur"," OpenStreetMap contributors https://www.openstreetmap.org/copyright"],direction:[["bad","unimportant"],["good","important"]]}]},Lle="_axisMatrix_caw7e_1",Ole={axisMatrix:Lle},Fle=(e,t)=>{var n,r;return{label:((n=t.find(a=>a.name===e.selectedQuotient[0]))==null?void 0:n.label)||"",selectedQuotient:{id:e.selectedQuotient,label:(r=t.find(a=>a.name===e.selectedQuotient[1]))==null?void 0:r.label},quality:"1",quotients:e.quotients.map(a=>{var c;return{id:a,label:(c=t.find(d=>d.name===a[0]))==null?void 0:c.label,quality:"1"}})}};function Rle(){const e=pt.useMemo(()=>{if(!vs.indicators||!vs.xGroups||!vs.xGroups.length||!vs.yGroups||!vs.yGroups.length)return null;const c=d=>Fle(d,vs==null?void 0:vs.indicators);return{x:vs.xGroups.map(c),y:vs.yGroups.map(c)}},[vs]),[t,n]=pt.useState(null),r=pt.useCallback((c,d,l)=>{console.log("onSelectCellHandler",c,d,l),n({x:c,y:d})},[]),a=pt.useCallback((c,d,l,x)=>{console.log("onSelectQuotient",c,d,l,x)},[]);return Xe("div",{className:Ole.axisMatrix,children:mn(DL,{children:[Xe(Mle,{matrix:vs.matrix,xHeadings:e==null?void 0:e.x,yHeadings:e==null?void 0:e.y,onSelectCell:r,selectedCell:t,onSelectQuotient:a}),Xe(zO,{})]})})}const AF=document.createElement("template");AF.innerHTML=`
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
:host svg {
  z-index: 99;
  position: fixed;
  border: 0px;
  top: 0px;
}
</style>
<svg width="54" height="54" viewBox="0 0 250 250" aria-hidden="true">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;class Dle extends HTMLElement{constructor(){super(),this.right="0",this.shadow=this.attachShadow({mode:"open"}),this.shadow.appendChild(this.ownerDocument.importNode(AF.content,!0)),this.update()}static get observedAttributes(){return["style","z-index","target","height","width","href","color","fill","position","top","left","right","bottom","transform"]}setAttr(t,n){const r=this.shadow.querySelector("svg");/(href)/.test(t.toLocaleLowerCase())?r.lastElementChild.setAttribute("xlink:href",n):/(color|fill)/.test(t.toLocaleLowerCase())?r.firstElementChild.style[t]=n:/(z-index|position|top|left|right|bottom|transform)/.test(t.toLocaleLowerCase())?r.style[t]=n:r.setAttribute(t,n)}update(){[...this.getAttributeNames(),"right"].forEach(t=>{const n=this.getAttribute(t)||this[t]||"";this.setAttr(t,n)})}attributeChangedCallback(t,n,r){n!==r&&this.setAttr(t,r)}}customElements.define("github-corners",Dle);var zle=["size","fixed","bottom","zIndex","className","style","bgColor","color","position"];function Ble(e){var{size:t=80,fixed:n=!1,bottom:r,zIndex:a,style:c,bgColor:d="#151513",color:l="#fff",position:x="right"}=e,b=od(e,zle),E=x==="left"?{left:0,right:"initial",transform:"scale(-1, 1)"}:{right:0,left:"initial",transform:"scale(1, 1)"};return r?(E.bottom=0,E.top="initial",E.transform=x==="left"?"scale(-1, -1)":"scale(1, -1)"):(E.bottom="initial",E.top=0),Xe("github-corners",Io({target:"__blank",width:t,height:t,href:e.href,position:n?"fixed":"absolute","z-index":a,style:c,fill:d,color:l},E,b))}const $le=({children:e})=>mn(qx,{children:[e,Xe(Ble,{size:40,href:"https://github.com/konturio/disaster-ninja-fe"})]}),Nle=e=>e.raw[0],Ule=Nle`
  .cosmos-ui-kit-decorator {
    padding: 1em;
    display: flex;
    gap: 2em;
    flex-flow: row nowrap;
    align-items: center;
    justify-content: center;
    min-height: 100%;
    box-sizing: border-box;
    background-color: #fff;
    --transp-clr: #f5f5f5;
    background-image: linear-gradient(
        45deg,
        var(--transp-clr) 25%,
        transparent 25%,
        transparent 75%,
        var(--transp-clr) 75%
      ),
      linear-gradient(
        45deg,
        var(--transp-clr) 25%,
        transparent 25%,
        transparent 75%,
        var(--transp-clr) 75%
      );
    background-size: 24px 24px;
    background-position: 0 0, 12px 12px;
  }
`;function jle({children:e}){return mn(qx,{children:[Xe("style",{dangerouslySetInnerHTML:{__html:Ule}}),Xe("div",{className:"cosmos-ui-kit-decorator",children:e})]})}const Vle={port:5e3},qle={"src/components/BivariateLegend/BivariateLegend.fixture.tsx":{module:{default:kie}},"src/features/bivariate_color_manager/components/MiniLegend/MiniLegend.fixture.tsx":{module:{default:Fie}},"src/features/bivariate_manager/fixtures/BivariateGreetings.fixture.tsx":{module:{default:Vie}},"src/features/bivariate_manager/fixtures/BivariateMatrixControl.fixture.tsx":{module:{default:Rle}}},Gle={"cosmos.decorator.tsx":$le,"src/cosmos.decorator.tsx":jle};qj.mountDomRenderer({rendererConfig:Vle,decorators:Gle,fixtures:qle});console.log("Disaster Ninja",Gj);export{Xe as a,mn as j,pt as r};
