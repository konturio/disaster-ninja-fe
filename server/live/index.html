<!doctype html>
<html lang="en">
  <head>
    <title>Disaster Ninja by kontur.io</title>
    <meta
      name="description"
      content="Disaster Ninja is a platform for assesment of mapping needs in case of natural disaster. See what's happening, what are available map sources, explore coverage quality of OpenStreetMap, chart the area of interest, export and import as geojson."
    />
    <meta http-equiv="refresh" content="1; url=/active/" />
    <script>
      // This script takes DN1 url hash, transforms it to DN2 url format and initiates redirect to DN2 with those params
      const params = (() => {
        const hash = window.location.hash.substring(1);
        let p = '';
        hash.split(';').map((kv) => {
          const temp = kv.split('=');
          p[temp[0]] = temp[1];
        });
        if (p.position) {
          p.position = p.position.split(',');
        }
        return p;
      })();

      const dn2query = [
        params.id && `event=${params.id}`,
        params.zoom &&
          params.position &&
          `map=${params.zoom + 1}/${position[1]}/${position[0]}`, // flip the coords to be in z/lat/lng format
      ]
        .filter((q) => !!q[1])
        .join('&');

      if (dn2query.length > 0) {
        dn2query = '?' + queryUrl;
      }

      document
        .querySelector('meta[http-equiv="refresh"]')
        .setAttribute('content', '0; url=/active/' + queryUrl);
    </script>
  </head>
  <body></body>
</html>
